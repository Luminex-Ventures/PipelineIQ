var tI=Object.defineProperty;var rI=(e,t,r)=>t in e?tI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Kp=(e,t,r)=>rI(e,typeof t!="symbol"?t+"":t,r);function BS(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function Ua(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function nI(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var US={exports:{}},ah={},zS={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fc=Symbol.for("react.element"),aI=Symbol.for("react.portal"),iI=Symbol.for("react.fragment"),sI=Symbol.for("react.strict_mode"),oI=Symbol.for("react.profiler"),lI=Symbol.for("react.provider"),cI=Symbol.for("react.context"),uI=Symbol.for("react.forward_ref"),dI=Symbol.for("react.suspense"),fI=Symbol.for("react.memo"),hI=Symbol.for("react.lazy"),jb=Symbol.iterator;function pI(e){return e===null||typeof e!="object"?null:(e=jb&&e[jb]||e["@@iterator"],typeof e=="function"?e:null)}var WS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},KS=Object.assign,HS={};function Wo(e,t,r){this.props=e,this.context=t,this.refs=HS,this.updater=r||WS}Wo.prototype.isReactComponent={};Wo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Wo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qS(){}qS.prototype=Wo.prototype;function gy(e,t,r){this.props=e,this.context=t,this.refs=HS,this.updater=r||WS}var vy=gy.prototype=new qS;vy.constructor=gy;KS(vy,Wo.prototype);vy.isPureReactComponent=!0;var Sb=Array.isArray,VS=Object.prototype.hasOwnProperty,yy={current:null},GS={key:!0,ref:!0,__self:!0,__source:!0};function YS(e,t,r){var n,a={},i=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)VS.call(t,n)&&!GS.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:Fc,type:e,key:i,ref:s,props:a,_owner:yy.current}}function mI(e,t){return{$$typeof:Fc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function xy(e){return typeof e=="object"&&e!==null&&e.$$typeof===Fc}function gI(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Nb=/\/+/g;function Hp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gI(""+e.key):t.toString(36)}function fd(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Fc:case aI:s=!0}}if(s)return s=e,a=a(s),e=n===""?"."+Hp(s,0):n,Sb(a)?(r="",e!=null&&(r=e.replace(Nb,"$&/")+"/"),fd(a,t,r,"",function(u){return u})):a!=null&&(xy(a)&&(a=mI(a,r+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(Nb,"$&/")+"/")+e)),t.push(a)),1;if(s=0,n=n===""?".":n+":",Sb(e))for(var o=0;o<e.length;o++){i=e[o];var c=n+Hp(i,o);s+=fd(i,t,r,c,a)}else if(c=pI(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=n+Hp(i,o++),s+=fd(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function yu(e,t,r){if(e==null)return e;var n=[],a=0;return fd(e,n,"","",function(i){return t.call(r,i,a++)}),n}function vI(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var kr={current:null},hd={transition:null},yI={ReactCurrentDispatcher:kr,ReactCurrentBatchConfig:hd,ReactCurrentOwner:yy};function XS(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:yu,forEach:function(e,t,r){yu(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return yu(e,function(){t++}),t},toArray:function(e){return yu(e,function(t){return t})||[]},only:function(e){if(!xy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Re.Component=Wo;Re.Fragment=iI;Re.Profiler=oI;Re.PureComponent=gy;Re.StrictMode=sI;Re.Suspense=dI;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yI;Re.act=XS;Re.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=KS({},e.props),a=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=yy.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)VS.call(t,c)&&!GS.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Fc,type:e.type,key:a,ref:i,props:n,_owner:s}};Re.createContext=function(e){return e={$$typeof:cI,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:lI,_context:e},e.Consumer=e};Re.createElement=YS;Re.createFactory=function(e){var t=YS.bind(null,e);return t.type=e,t};Re.createRef=function(){return{current:null}};Re.forwardRef=function(e){return{$$typeof:uI,render:e}};Re.isValidElement=xy;Re.lazy=function(e){return{$$typeof:hI,_payload:{_status:-1,_result:e},_init:vI}};Re.memo=function(e,t){return{$$typeof:fI,type:e,compare:t===void 0?null:t}};Re.startTransition=function(e){var t=hd.transition;hd.transition={};try{e()}finally{hd.transition=t}};Re.unstable_act=XS;Re.useCallback=function(e,t){return kr.current.useCallback(e,t)};Re.useContext=function(e){return kr.current.useContext(e)};Re.useDebugValue=function(){};Re.useDeferredValue=function(e){return kr.current.useDeferredValue(e)};Re.useEffect=function(e,t){return kr.current.useEffect(e,t)};Re.useId=function(){return kr.current.useId()};Re.useImperativeHandle=function(e,t,r){return kr.current.useImperativeHandle(e,t,r)};Re.useInsertionEffect=function(e,t){return kr.current.useInsertionEffect(e,t)};Re.useLayoutEffect=function(e,t){return kr.current.useLayoutEffect(e,t)};Re.useMemo=function(e,t){return kr.current.useMemo(e,t)};Re.useReducer=function(e,t,r){return kr.current.useReducer(e,t,r)};Re.useRef=function(e){return kr.current.useRef(e)};Re.useState=function(e){return kr.current.useState(e)};Re.useSyncExternalStore=function(e,t,r){return kr.current.useSyncExternalStore(e,t,r)};Re.useTransition=function(){return kr.current.useTransition()};Re.version="18.3.1";zS.exports=Re;var p=zS.exports;const lt=Ua(p),xI=BS({__proto__:null,default:lt},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bI=p,wI=Symbol.for("react.element"),_I=Symbol.for("react.fragment"),jI=Object.prototype.hasOwnProperty,SI=bI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,NI={key:!0,ref:!0,__self:!0,__source:!0};function JS(e,t,r){var n,a={},i=null,s=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)jI.call(t,n)&&!NI.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:wI,type:e,key:i,ref:s,props:a,_owner:SI.current}}ah.Fragment=_I;ah.jsx=JS;ah.jsxs=JS;US.exports=ah;var l=US.exports,QS={exports:{}},ln={},ZS={exports:{}},eN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,M){var L=D.length;D.push(M);e:for(;0<L;){var oe=L-1>>>1,ee=D[oe];if(0<a(ee,M))D[oe]=M,D[L]=ee,L=oe;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var M=D[0],L=D.pop();if(L!==M){D[0]=L;e:for(var oe=0,ee=D.length,ye=ee>>>1;oe<ye;){var P=2*(oe+1)-1,V=D[P],te=P+1,$=D[te];if(0>a(V,L))te<ee&&0>a($,V)?(D[oe]=$,D[te]=L,oe=te):(D[oe]=V,D[P]=L,oe=P);else if(te<ee&&0>a($,L))D[oe]=$,D[te]=L,oe=te;else break e}}return M}function a(D,M){var L=D.sortIndex-M.sortIndex;return L!==0?L:D.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var c=[],u=[],d=1,f=null,h=3,m=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var M=r(u);M!==null;){if(M.callback===null)n(u);else if(M.startTime<=D)n(u),M.sortIndex=M.expirationTime,t(c,M);else break;M=r(u)}}function _(D){if(y=!1,b(D),!g)if(r(c)!==null)g=!0,B(j);else{var M=r(u);M!==null&&K(_,M.startTime-D)}}function j(D,M){g=!1,y&&(y=!1,x(k),k=-1),m=!0;var L=h;try{for(b(M),f=r(c);f!==null&&(!(f.expirationTime>M)||D&&!O());){var oe=f.callback;if(typeof oe=="function"){f.callback=null,h=f.priorityLevel;var ee=oe(f.expirationTime<=M);M=e.unstable_now(),typeof ee=="function"?f.callback=ee:f===r(c)&&n(c),b(M)}else n(c);f=r(c)}if(f!==null)var ye=!0;else{var P=r(u);P!==null&&K(_,P.startTime-M),ye=!1}return ye}finally{f=null,h=L,m=!1}}var S=!1,N=null,k=-1,C=5,E=-1;function O(){return!(e.unstable_now()-E<C)}function A(){if(N!==null){var D=e.unstable_now();E=D;var M=!0;try{M=N(!0,D)}finally{M?q():(S=!1,N=null)}}else S=!1}var q;if(typeof w=="function")q=function(){w(A)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,Z=J.port2;J.port1.onmessage=A,q=function(){Z.postMessage(null)}}else q=function(){v(A,0)};function B(D){N=D,S||(S=!0,q())}function K(D,M){k=v(function(){D(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,B(j))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(D){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var L=h;h=M;try{return D()}finally{h=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,M){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var L=h;h=D;try{return M()}finally{h=L}},e.unstable_scheduleCallback=function(D,M,L){var oe=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?oe+L:oe):L=oe,D){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=L+ee,D={id:d++,callback:M,priorityLevel:D,startTime:L,expirationTime:ee,sortIndex:-1},L>oe?(D.sortIndex=L,t(u,D),r(c)===null&&D===r(u)&&(y?(x(k),k=-1):y=!0,K(_,L-oe))):(D.sortIndex=ee,t(c,D),g||m||(g=!0,B(j))),D},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(D){var M=h;return function(){var L=h;h=M;try{return D.apply(this,arguments)}finally{h=L}}}})(eN);ZS.exports=eN;var kI=ZS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CI=p,an=kI;function re(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tN=new Set,ec={};function Os(e,t){ko(e,t),ko(e+"Capture",t)}function ko(e,t){for(ec[e]=t,e=0;e<t.length;e++)tN.add(t[e])}var Ca=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sg=Object.prototype.hasOwnProperty,EI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kb={},Cb={};function PI(e){return sg.call(Cb,e)?!0:sg.call(kb,e)?!1:EI.test(e)?Cb[e]=!0:(kb[e]=!0,!1)}function OI(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function AI(e,t,r,n){if(t===null||typeof t>"u"||OI(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Cr(e,t,r,n,a,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var cr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){cr[e]=new Cr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];cr[t]=new Cr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){cr[e]=new Cr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){cr[e]=new Cr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){cr[e]=new Cr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){cr[e]=new Cr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){cr[e]=new Cr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){cr[e]=new Cr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){cr[e]=new Cr(e,5,!1,e.toLowerCase(),null,!1,!1)});var by=/[\-:]([a-z])/g;function wy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(by,wy);cr[t]=new Cr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(by,wy);cr[t]=new Cr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(by,wy);cr[t]=new Cr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){cr[e]=new Cr(e,1,!1,e.toLowerCase(),null,!1,!1)});cr.xlinkHref=new Cr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){cr[e]=new Cr(e,1,!1,e.toLowerCase(),null,!0,!0)});function _y(e,t,r,n){var a=cr.hasOwnProperty(t)?cr[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(AI(t,r,a,n)&&(r=null),n||a===null?PI(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var za=CI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xu=Symbol.for("react.element"),eo=Symbol.for("react.portal"),to=Symbol.for("react.fragment"),jy=Symbol.for("react.strict_mode"),og=Symbol.for("react.profiler"),rN=Symbol.for("react.provider"),nN=Symbol.for("react.context"),Sy=Symbol.for("react.forward_ref"),lg=Symbol.for("react.suspense"),cg=Symbol.for("react.suspense_list"),Ny=Symbol.for("react.memo"),ri=Symbol.for("react.lazy"),aN=Symbol.for("react.offscreen"),Eb=Symbol.iterator;function fl(e){return e===null||typeof e!="object"?null:(e=Eb&&e[Eb]||e["@@iterator"],typeof e=="function"?e:null)}var bt=Object.assign,qp;function Tl(e){if(qp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);qp=t&&t[1]||""}return`
`+qp+e}var Vp=!1;function Gp(e,t){if(!e||Vp)return"";Vp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(s!==1||o!==1)do if(s--,o--,0>o||a[s]!==i[o]){var c=`
`+a[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=o);break}}}finally{Vp=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Tl(e):""}function TI(e){switch(e.tag){case 5:return Tl(e.type);case 16:return Tl("Lazy");case 13:return Tl("Suspense");case 19:return Tl("SuspenseList");case 0:case 2:case 15:return e=Gp(e.type,!1),e;case 11:return e=Gp(e.type.render,!1),e;case 1:return e=Gp(e.type,!0),e;default:return""}}function ug(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case to:return"Fragment";case eo:return"Portal";case og:return"Profiler";case jy:return"StrictMode";case lg:return"Suspense";case cg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nN:return(e.displayName||"Context")+".Consumer";case rN:return(e._context.displayName||"Context")+".Provider";case Sy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ny:return t=e.displayName||null,t!==null?t:ug(e.type)||"Memo";case ri:t=e._payload,e=e._init;try{return ug(e(t))}catch{}}return null}function DI(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ug(t);case 8:return t===jy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ji(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function iN(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function II(e){var t=iN(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bu(e){e._valueTracker||(e._valueTracker=II(e))}function sN(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=iN(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Od(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function dg(e,t){var r=t.checked;return bt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Pb(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ji(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function oN(e,t){t=t.checked,t!=null&&_y(e,"checked",t,!1)}function fg(e,t){oN(e,t);var r=ji(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?hg(e,t.type,r):t.hasOwnProperty("defaultValue")&&hg(e,t.type,ji(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ob(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function hg(e,t,r){(t!=="number"||Od(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Dl=Array.isArray;function mo(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ji(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function pg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(re(91));return bt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ab(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(re(92));if(Dl(r)){if(1<r.length)throw Error(re(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ji(r)}}function lN(e,t){var r=ji(t.value),n=ji(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Tb(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cN(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cN(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var wu,uN=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(wu=wu||document.createElement("div"),wu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=wu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function tc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Fl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RI=["Webkit","ms","Moz","O"];Object.keys(Fl).forEach(function(e){RI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fl[t]=Fl[e]})});function dN(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Fl.hasOwnProperty(e)&&Fl[e]?(""+t).trim():t+"px"}function fN(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=dN(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var MI=bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gg(e,t){if(t){if(MI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(re(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(re(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(re(61))}if(t.style!=null&&typeof t.style!="object")throw Error(re(62))}}function vg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yg=null;function ky(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xg=null,go=null,vo=null;function Db(e){if(e=zc(e)){if(typeof xg!="function")throw Error(re(280));var t=e.stateNode;t&&(t=ch(t),xg(e.stateNode,e.type,t))}}function hN(e){go?vo?vo.push(e):vo=[e]:go=e}function pN(){if(go){var e=go,t=vo;if(vo=go=null,Db(e),t)for(e=0;e<t.length;e++)Db(t[e])}}function mN(e,t){return e(t)}function gN(){}var Yp=!1;function vN(e,t,r){if(Yp)return e(t,r);Yp=!0;try{return mN(e,t,r)}finally{Yp=!1,(go!==null||vo!==null)&&(gN(),pN())}}function rc(e,t){var r=e.stateNode;if(r===null)return null;var n=ch(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(re(231,t,typeof r));return r}var bg=!1;if(Ca)try{var hl={};Object.defineProperty(hl,"passive",{get:function(){bg=!0}}),window.addEventListener("test",hl,hl),window.removeEventListener("test",hl,hl)}catch{bg=!1}function $I(e,t,r,n,a,i,s,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Bl=!1,Ad=null,Td=!1,wg=null,LI={onError:function(e){Bl=!0,Ad=e}};function FI(e,t,r,n,a,i,s,o,c){Bl=!1,Ad=null,$I.apply(LI,arguments)}function BI(e,t,r,n,a,i,s,o,c){if(FI.apply(this,arguments),Bl){if(Bl){var u=Ad;Bl=!1,Ad=null}else throw Error(re(198));Td||(Td=!0,wg=u)}}function As(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function yN(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ib(e){if(As(e)!==e)throw Error(re(188))}function UI(e){var t=e.alternate;if(!t){if(t=As(e),t===null)throw Error(re(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Ib(a),e;if(i===n)return Ib(a),t;i=i.sibling}throw Error(re(188))}if(r.return!==n.return)r=a,n=i;else{for(var s=!1,o=a.child;o;){if(o===r){s=!0,r=a,n=i;break}if(o===n){s=!0,n=a,r=i;break}o=o.sibling}if(!s){for(o=i.child;o;){if(o===r){s=!0,r=i,n=a;break}if(o===n){s=!0,n=i,r=a;break}o=o.sibling}if(!s)throw Error(re(189))}}if(r.alternate!==n)throw Error(re(190))}if(r.tag!==3)throw Error(re(188));return r.stateNode.current===r?e:t}function xN(e){return e=UI(e),e!==null?bN(e):null}function bN(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=bN(e);if(t!==null)return t;e=e.sibling}return null}var wN=an.unstable_scheduleCallback,Rb=an.unstable_cancelCallback,zI=an.unstable_shouldYield,WI=an.unstable_requestPaint,Ct=an.unstable_now,KI=an.unstable_getCurrentPriorityLevel,Cy=an.unstable_ImmediatePriority,_N=an.unstable_UserBlockingPriority,Dd=an.unstable_NormalPriority,HI=an.unstable_LowPriority,jN=an.unstable_IdlePriority,ih=null,sa=null;function qI(e){if(sa&&typeof sa.onCommitFiberRoot=="function")try{sa.onCommitFiberRoot(ih,e,void 0,(e.current.flags&128)===128)}catch{}}var Bn=Math.clz32?Math.clz32:YI,VI=Math.log,GI=Math.LN2;function YI(e){return e>>>=0,e===0?32:31-(VI(e)/GI|0)|0}var _u=64,ju=4194304;function Il(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Id(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,s=r&268435455;if(s!==0){var o=s&~a;o!==0?n=Il(o):(i&=s,i!==0&&(n=Il(i)))}else s=r&~a,s!==0?n=Il(s):i!==0&&(n=Il(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Bn(t),a=1<<r,n|=e[r],t&=~a;return n}function XI(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JI(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-Bn(i),o=1<<s,c=a[s];c===-1?(!(o&r)||o&n)&&(a[s]=XI(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function _g(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function SN(){var e=_u;return _u<<=1,!(_u&4194240)&&(_u=64),e}function Xp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Bc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Bn(t),e[t]=r}function QI(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Bn(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Ey(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Bn(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Ge=0;function NN(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var kN,Py,CN,EN,PN,jg=!1,Su=[],pi=null,mi=null,gi=null,nc=new Map,ac=new Map,oi=[],ZI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mb(e,t){switch(e){case"focusin":case"focusout":pi=null;break;case"dragenter":case"dragleave":mi=null;break;case"mouseover":case"mouseout":gi=null;break;case"pointerover":case"pointerout":nc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ac.delete(t.pointerId)}}function pl(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=zc(t),t!==null&&Py(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function eR(e,t,r,n,a){switch(t){case"focusin":return pi=pl(pi,e,t,r,n,a),!0;case"dragenter":return mi=pl(mi,e,t,r,n,a),!0;case"mouseover":return gi=pl(gi,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return nc.set(i,pl(nc.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,ac.set(i,pl(ac.get(i)||null,e,t,r,n,a)),!0}return!1}function ON(e){var t=ns(e.target);if(t!==null){var r=As(t);if(r!==null){if(t=r.tag,t===13){if(t=yN(r),t!==null){e.blockedOn=t,PN(e.priority,function(){CN(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Sg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);yg=n,r.target.dispatchEvent(n),yg=null}else return t=zc(r),t!==null&&Py(t),e.blockedOn=r,!1;t.shift()}return!0}function $b(e,t,r){pd(e)&&r.delete(t)}function tR(){jg=!1,pi!==null&&pd(pi)&&(pi=null),mi!==null&&pd(mi)&&(mi=null),gi!==null&&pd(gi)&&(gi=null),nc.forEach($b),ac.forEach($b)}function ml(e,t){e.blockedOn===t&&(e.blockedOn=null,jg||(jg=!0,an.unstable_scheduleCallback(an.unstable_NormalPriority,tR)))}function ic(e){function t(a){return ml(a,e)}if(0<Su.length){ml(Su[0],e);for(var r=1;r<Su.length;r++){var n=Su[r];n.blockedOn===e&&(n.blockedOn=null)}}for(pi!==null&&ml(pi,e),mi!==null&&ml(mi,e),gi!==null&&ml(gi,e),nc.forEach(t),ac.forEach(t),r=0;r<oi.length;r++)n=oi[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<oi.length&&(r=oi[0],r.blockedOn===null);)ON(r),r.blockedOn===null&&oi.shift()}var yo=za.ReactCurrentBatchConfig,Rd=!0;function rR(e,t,r,n){var a=Ge,i=yo.transition;yo.transition=null;try{Ge=1,Oy(e,t,r,n)}finally{Ge=a,yo.transition=i}}function nR(e,t,r,n){var a=Ge,i=yo.transition;yo.transition=null;try{Ge=4,Oy(e,t,r,n)}finally{Ge=a,yo.transition=i}}function Oy(e,t,r,n){if(Rd){var a=Sg(e,t,r,n);if(a===null)sm(e,t,n,Md,r),Mb(e,n);else if(eR(a,e,t,r,n))n.stopPropagation();else if(Mb(e,n),t&4&&-1<ZI.indexOf(e)){for(;a!==null;){var i=zc(a);if(i!==null&&kN(i),i=Sg(e,t,r,n),i===null&&sm(e,t,n,Md,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else sm(e,t,n,null,r)}}var Md=null;function Sg(e,t,r,n){if(Md=null,e=ky(n),e=ns(e),e!==null)if(t=As(e),t===null)e=null;else if(r=t.tag,r===13){if(e=yN(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Md=e,null}function AN(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KI()){case Cy:return 1;case _N:return 4;case Dd:case HI:return 16;case jN:return 536870912;default:return 16}default:return 16}}var di=null,Ay=null,md=null;function TN(){if(md)return md;var e,t=Ay,r=t.length,n,a="value"in di?di.value:di.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===a[i-n];n++);return md=a.slice(e,1<n?1-n:void 0)}function gd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Nu(){return!0}function Lb(){return!1}function cn(e){function t(r,n,a,i,s){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Nu:Lb,this.isPropagationStopped=Lb,this}return bt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Nu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Nu)},persist:function(){},isPersistent:Nu}),t}var Ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ty=cn(Ko),Uc=bt({},Ko,{view:0,detail:0}),aR=cn(Uc),Jp,Qp,gl,sh=bt({},Uc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gl&&(gl&&e.type==="mousemove"?(Jp=e.screenX-gl.screenX,Qp=e.screenY-gl.screenY):Qp=Jp=0,gl=e),Jp)},movementY:function(e){return"movementY"in e?e.movementY:Qp}}),Fb=cn(sh),iR=bt({},sh,{dataTransfer:0}),sR=cn(iR),oR=bt({},Uc,{relatedTarget:0}),Zp=cn(oR),lR=bt({},Ko,{animationName:0,elapsedTime:0,pseudoElement:0}),cR=cn(lR),uR=bt({},Ko,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),dR=cn(uR),fR=bt({},Ko,{data:0}),Bb=cn(fR),hR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gR(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mR[e])?!!t[e]:!1}function Dy(){return gR}var vR=bt({},Uc,{key:function(e){if(e.key){var t=hR[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dy,charCode:function(e){return e.type==="keypress"?gd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yR=cn(vR),xR=bt({},sh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ub=cn(xR),bR=bt({},Uc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dy}),wR=cn(bR),_R=bt({},Ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),jR=cn(_R),SR=bt({},sh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),NR=cn(SR),kR=[9,13,27,32],Iy=Ca&&"CompositionEvent"in window,Ul=null;Ca&&"documentMode"in document&&(Ul=document.documentMode);var CR=Ca&&"TextEvent"in window&&!Ul,DN=Ca&&(!Iy||Ul&&8<Ul&&11>=Ul),zb=" ",Wb=!1;function IN(e,t){switch(e){case"keyup":return kR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function RN(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ro=!1;function ER(e,t){switch(e){case"compositionend":return RN(t);case"keypress":return t.which!==32?null:(Wb=!0,zb);case"textInput":return e=t.data,e===zb&&Wb?null:e;default:return null}}function PR(e,t){if(ro)return e==="compositionend"||!Iy&&IN(e,t)?(e=TN(),md=Ay=di=null,ro=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return DN&&t.locale!=="ko"?null:t.data;default:return null}}var OR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!OR[e.type]:t==="textarea"}function MN(e,t,r,n){hN(n),t=$d(t,"onChange"),0<t.length&&(r=new Ty("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var zl=null,sc=null;function AR(e){VN(e,0)}function oh(e){var t=io(e);if(sN(t))return e}function TR(e,t){if(e==="change")return t}var $N=!1;if(Ca){var em;if(Ca){var tm="oninput"in document;if(!tm){var Hb=document.createElement("div");Hb.setAttribute("oninput","return;"),tm=typeof Hb.oninput=="function"}em=tm}else em=!1;$N=em&&(!document.documentMode||9<document.documentMode)}function qb(){zl&&(zl.detachEvent("onpropertychange",LN),sc=zl=null)}function LN(e){if(e.propertyName==="value"&&oh(sc)){var t=[];MN(t,sc,e,ky(e)),vN(AR,t)}}function DR(e,t,r){e==="focusin"?(qb(),zl=t,sc=r,zl.attachEvent("onpropertychange",LN)):e==="focusout"&&qb()}function IR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return oh(sc)}function RR(e,t){if(e==="click")return oh(t)}function MR(e,t){if(e==="input"||e==="change")return oh(t)}function $R(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zn=typeof Object.is=="function"?Object.is:$R;function oc(e,t){if(zn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!sg.call(t,a)||!zn(e[a],t[a]))return!1}return!0}function Vb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gb(e,t){var r=Vb(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vb(r)}}function FN(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?FN(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function BN(){for(var e=window,t=Od();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Od(e.document)}return t}function Ry(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function LR(e){var t=BN(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&FN(r.ownerDocument.documentElement,r)){if(n!==null&&Ry(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Gb(r,i);var s=Gb(r,n);a&&s&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var FR=Ca&&"documentMode"in document&&11>=document.documentMode,no=null,Ng=null,Wl=null,kg=!1;function Yb(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;kg||no==null||no!==Od(n)||(n=no,"selectionStart"in n&&Ry(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Wl&&oc(Wl,n)||(Wl=n,n=$d(Ng,"onSelect"),0<n.length&&(t=new Ty("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=no)))}function ku(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ao={animationend:ku("Animation","AnimationEnd"),animationiteration:ku("Animation","AnimationIteration"),animationstart:ku("Animation","AnimationStart"),transitionend:ku("Transition","TransitionEnd")},rm={},UN={};Ca&&(UN=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function lh(e){if(rm[e])return rm[e];if(!ao[e])return e;var t=ao[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in UN)return rm[e]=t[r];return e}var zN=lh("animationend"),WN=lh("animationiteration"),KN=lh("animationstart"),HN=lh("transitionend"),qN=new Map,Xb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oi(e,t){qN.set(e,t),Os(t,[e])}for(var nm=0;nm<Xb.length;nm++){var am=Xb[nm],BR=am.toLowerCase(),UR=am[0].toUpperCase()+am.slice(1);Oi(BR,"on"+UR)}Oi(zN,"onAnimationEnd");Oi(WN,"onAnimationIteration");Oi(KN,"onAnimationStart");Oi("dblclick","onDoubleClick");Oi("focusin","onFocus");Oi("focusout","onBlur");Oi(HN,"onTransitionEnd");ko("onMouseEnter",["mouseout","mouseover"]);ko("onMouseLeave",["mouseout","mouseover"]);ko("onPointerEnter",["pointerout","pointerover"]);ko("onPointerLeave",["pointerout","pointerover"]);Os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Os("onBeforeInput",["compositionend","keypress","textInput","paste"]);Os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rl));function Jb(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,BI(n,t,void 0,e),e.currentTarget=null}function VN(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;Jb(a,o,u),i=c}else for(s=0;s<n.length;s++){if(o=n[s],c=o.instance,u=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;Jb(a,o,u),i=c}}}if(Td)throw e=wg,Td=!1,wg=null,e}function at(e,t){var r=t[Ag];r===void 0&&(r=t[Ag]=new Set);var n=e+"__bubble";r.has(n)||(GN(t,e,2,!1),r.add(n))}function im(e,t,r){var n=0;t&&(n|=4),GN(r,e,n,t)}var Cu="_reactListening"+Math.random().toString(36).slice(2);function lc(e){if(!e[Cu]){e[Cu]=!0,tN.forEach(function(r){r!=="selectionchange"&&(zR.has(r)||im(r,!1,e),im(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Cu]||(t[Cu]=!0,im("selectionchange",!1,t))}}function GN(e,t,r,n){switch(AN(t)){case 1:var a=rR;break;case 4:a=nR;break;default:a=Oy}r=a.bind(null,t,r,e),a=void 0,!bg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function sm(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(s===4)for(s=n.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;s=s.return}for(;o!==null;){if(s=ns(o),s===null)return;if(c=s.tag,c===5||c===6){n=i=s;continue e}o=o.parentNode}}n=n.return}vN(function(){var u=i,d=ky(r),f=[];e:{var h=qN.get(e);if(h!==void 0){var m=Ty,g=e;switch(e){case"keypress":if(gd(r)===0)break e;case"keydown":case"keyup":m=yR;break;case"focusin":g="focus",m=Zp;break;case"focusout":g="blur",m=Zp;break;case"beforeblur":case"afterblur":m=Zp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Fb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=sR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=wR;break;case zN:case WN:case KN:m=cR;break;case HN:m=jR;break;case"scroll":m=aR;break;case"wheel":m=NR;break;case"copy":case"cut":case"paste":m=dR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Ub}var y=(t&4)!==0,v=!y&&e==="scroll",x=y?h!==null?h+"Capture":null:h;y=[];for(var w=u,b;w!==null;){b=w;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,x!==null&&(_=rc(w,x),_!=null&&y.push(cc(w,_,b)))),v)break;w=w.return}0<y.length&&(h=new m(h,g,null,r,d),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==yg&&(g=r.relatedTarget||r.fromElement)&&(ns(g)||g[Ea]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=u,g=g?ns(g):null,g!==null&&(v=As(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(y=Fb,_="onMouseLeave",x="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(y=Ub,_="onPointerLeave",x="onPointerEnter",w="pointer"),v=m==null?h:io(m),b=g==null?h:io(g),h=new y(_,w+"leave",m,r,d),h.target=v,h.relatedTarget=b,_=null,ns(d)===u&&(y=new y(x,w+"enter",g,r,d),y.target=b,y.relatedTarget=v,_=y),v=_,m&&g)t:{for(y=m,x=g,w=0,b=y;b;b=Ls(b))w++;for(b=0,_=x;_;_=Ls(_))b++;for(;0<w-b;)y=Ls(y),w--;for(;0<b-w;)x=Ls(x),b--;for(;w--;){if(y===x||x!==null&&y===x.alternate)break t;y=Ls(y),x=Ls(x)}y=null}else y=null;m!==null&&Qb(f,h,m,y,!1),g!==null&&v!==null&&Qb(f,v,g,y,!0)}}e:{if(h=u?io(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var j=TR;else if(Kb(h))if($N)j=MR;else{j=IR;var S=DR}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=RR);if(j&&(j=j(e,u))){MN(f,j,r,d);break e}S&&S(e,h,u),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&hg(h,"number",h.value)}switch(S=u?io(u):window,e){case"focusin":(Kb(S)||S.contentEditable==="true")&&(no=S,Ng=u,Wl=null);break;case"focusout":Wl=Ng=no=null;break;case"mousedown":kg=!0;break;case"contextmenu":case"mouseup":case"dragend":kg=!1,Yb(f,r,d);break;case"selectionchange":if(FR)break;case"keydown":case"keyup":Yb(f,r,d)}var N;if(Iy)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else ro?IN(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(DN&&r.locale!=="ko"&&(ro||k!=="onCompositionStart"?k==="onCompositionEnd"&&ro&&(N=TN()):(di=d,Ay="value"in di?di.value:di.textContent,ro=!0)),S=$d(u,k),0<S.length&&(k=new Bb(k,e,null,r,d),f.push({event:k,listeners:S}),N?k.data=N:(N=RN(r),N!==null&&(k.data=N)))),(N=CR?ER(e,r):PR(e,r))&&(u=$d(u,"onBeforeInput"),0<u.length&&(d=new Bb("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=N))}VN(f,t)})}function cc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function $d(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=rc(e,r),i!=null&&n.unshift(cc(e,i,a)),i=rc(e,t),i!=null&&n.push(cc(e,i,a))),e=e.return}return n}function Ls(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Qb(e,t,r,n,a){for(var i=t._reactName,s=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,a?(c=rc(r,i),c!=null&&s.unshift(cc(r,c,o))):a||(c=rc(r,i),c!=null&&s.push(cc(r,c,o)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var WR=/\r\n?/g,KR=/\u0000|\uFFFD/g;function Zb(e){return(typeof e=="string"?e:""+e).replace(WR,`
`).replace(KR,"")}function Eu(e,t,r){if(t=Zb(t),Zb(e)!==t&&r)throw Error(re(425))}function Ld(){}var Cg=null,Eg=null;function Pg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Og=typeof setTimeout=="function"?setTimeout:void 0,HR=typeof clearTimeout=="function"?clearTimeout:void 0,ew=typeof Promise=="function"?Promise:void 0,qR=typeof queueMicrotask=="function"?queueMicrotask:typeof ew<"u"?function(e){return ew.resolve(null).then(e).catch(VR)}:Og;function VR(e){setTimeout(function(){throw e})}function om(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),ic(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);ic(t)}function vi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function tw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ho=Math.random().toString(36).slice(2),aa="__reactFiber$"+Ho,uc="__reactProps$"+Ho,Ea="__reactContainer$"+Ho,Ag="__reactEvents$"+Ho,GR="__reactListeners$"+Ho,YR="__reactHandles$"+Ho;function ns(e){var t=e[aa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ea]||r[aa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=tw(e);e!==null;){if(r=e[aa])return r;e=tw(e)}return t}e=r,r=e.parentNode}return null}function zc(e){return e=e[aa]||e[Ea],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function io(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(re(33))}function ch(e){return e[uc]||null}var Tg=[],so=-1;function Ai(e){return{current:e}}function st(e){0>so||(e.current=Tg[so],Tg[so]=null,so--)}function rt(e,t){so++,Tg[so]=e.current,e.current=t}var Si={},gr=Ai(Si),Lr=Ai(!1),gs=Si;function Co(e,t){var r=e.type.contextTypes;if(!r)return Si;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Fr(e){return e=e.childContextTypes,e!=null}function Fd(){st(Lr),st(gr)}function rw(e,t,r){if(gr.current!==Si)throw Error(re(168));rt(gr,t),rt(Lr,r)}function YN(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(re(108,DI(e)||"Unknown",a));return bt({},r,n)}function Bd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Si,gs=gr.current,rt(gr,e),rt(Lr,Lr.current),!0}function nw(e,t,r){var n=e.stateNode;if(!n)throw Error(re(169));r?(e=YN(e,t,gs),n.__reactInternalMemoizedMergedChildContext=e,st(Lr),st(gr),rt(gr,e)):st(Lr),rt(Lr,r)}var ga=null,uh=!1,lm=!1;function XN(e){ga===null?ga=[e]:ga.push(e)}function XR(e){uh=!0,XN(e)}function Ti(){if(!lm&&ga!==null){lm=!0;var e=0,t=Ge;try{var r=ga;for(Ge=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ga=null,uh=!1}catch(a){throw ga!==null&&(ga=ga.slice(e+1)),wN(Cy,Ti),a}finally{Ge=t,lm=!1}}return null}var oo=[],lo=0,Ud=null,zd=0,gn=[],vn=0,vs=null,xa=1,ba="";function Gi(e,t){oo[lo++]=zd,oo[lo++]=Ud,Ud=e,zd=t}function JN(e,t,r){gn[vn++]=xa,gn[vn++]=ba,gn[vn++]=vs,vs=e;var n=xa;e=ba;var a=32-Bn(n)-1;n&=~(1<<a),r+=1;var i=32-Bn(t)+a;if(30<i){var s=a-a%5;i=(n&(1<<s)-1).toString(32),n>>=s,a-=s,xa=1<<32-Bn(t)+a|r<<a|n,ba=i+e}else xa=1<<i|r<<a|n,ba=e}function My(e){e.return!==null&&(Gi(e,1),JN(e,1,0))}function $y(e){for(;e===Ud;)Ud=oo[--lo],oo[lo]=null,zd=oo[--lo],oo[lo]=null;for(;e===vs;)vs=gn[--vn],gn[vn]=null,ba=gn[--vn],gn[vn]=null,xa=gn[--vn],gn[vn]=null}var rn=null,tn=null,ct=!1,$n=null;function QN(e,t){var r=yn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function aw(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rn=e,tn=vi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rn=e,tn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=vs!==null?{id:xa,overflow:ba}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=yn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,rn=e,tn=null,!0):!1;default:return!1}}function Dg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ig(e){if(ct){var t=tn;if(t){var r=t;if(!aw(e,t)){if(Dg(e))throw Error(re(418));t=vi(r.nextSibling);var n=rn;t&&aw(e,t)?QN(n,r):(e.flags=e.flags&-4097|2,ct=!1,rn=e)}}else{if(Dg(e))throw Error(re(418));e.flags=e.flags&-4097|2,ct=!1,rn=e}}}function iw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rn=e}function Pu(e){if(e!==rn)return!1;if(!ct)return iw(e),ct=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Pg(e.type,e.memoizedProps)),t&&(t=tn)){if(Dg(e))throw ZN(),Error(re(418));for(;t;)QN(e,t),t=vi(t.nextSibling)}if(iw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(re(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){tn=vi(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}tn=null}}else tn=rn?vi(e.stateNode.nextSibling):null;return!0}function ZN(){for(var e=tn;e;)e=vi(e.nextSibling)}function Eo(){tn=rn=null,ct=!1}function Ly(e){$n===null?$n=[e]:$n.push(e)}var JR=za.ReactCurrentBatchConfig;function vl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(re(309));var n=r.stateNode}if(!n)throw Error(re(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var o=a.refs;s===null?delete o[i]:o[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(re(284));if(!r._owner)throw Error(re(290,e))}return e}function Ou(e,t){throw e=Object.prototype.toString.call(t),Error(re(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function sw(e){var t=e._init;return t(e._payload)}function ek(e){function t(x,w){if(e){var b=x.deletions;b===null?(x.deletions=[w],x.flags|=16):b.push(w)}}function r(x,w){if(!e)return null;for(;w!==null;)t(x,w),w=w.sibling;return null}function n(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function a(x,w){return x=wi(x,w),x.index=0,x.sibling=null,x}function i(x,w,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<w?(x.flags|=2,w):b):(x.flags|=2,w)):(x.flags|=1048576,w)}function s(x){return e&&x.alternate===null&&(x.flags|=2),x}function o(x,w,b,_){return w===null||w.tag!==6?(w=mm(b,x.mode,_),w.return=x,w):(w=a(w,b),w.return=x,w)}function c(x,w,b,_){var j=b.type;return j===to?d(x,w,b.props.children,_,b.key):w!==null&&(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ri&&sw(j)===w.type)?(_=a(w,b.props),_.ref=vl(x,w,b),_.return=x,_):(_=jd(b.type,b.key,b.props,null,x.mode,_),_.ref=vl(x,w,b),_.return=x,_)}function u(x,w,b,_){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=gm(b,x.mode,_),w.return=x,w):(w=a(w,b.children||[]),w.return=x,w)}function d(x,w,b,_,j){return w===null||w.tag!==7?(w=ds(b,x.mode,_,j),w.return=x,w):(w=a(w,b),w.return=x,w)}function f(x,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=mm(""+w,x.mode,b),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case xu:return b=jd(w.type,w.key,w.props,null,x.mode,b),b.ref=vl(x,null,w),b.return=x,b;case eo:return w=gm(w,x.mode,b),w.return=x,w;case ri:var _=w._init;return f(x,_(w._payload),b)}if(Dl(w)||fl(w))return w=ds(w,x.mode,b,null),w.return=x,w;Ou(x,w)}return null}function h(x,w,b,_){var j=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:o(x,w,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case xu:return b.key===j?c(x,w,b,_):null;case eo:return b.key===j?u(x,w,b,_):null;case ri:return j=b._init,h(x,w,j(b._payload),_)}if(Dl(b)||fl(b))return j!==null?null:d(x,w,b,_,null);Ou(x,b)}return null}function m(x,w,b,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return x=x.get(b)||null,o(w,x,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case xu:return x=x.get(_.key===null?b:_.key)||null,c(w,x,_,j);case eo:return x=x.get(_.key===null?b:_.key)||null,u(w,x,_,j);case ri:var S=_._init;return m(x,w,b,S(_._payload),j)}if(Dl(_)||fl(_))return x=x.get(b)||null,d(w,x,_,j,null);Ou(w,_)}return null}function g(x,w,b,_){for(var j=null,S=null,N=w,k=w=0,C=null;N!==null&&k<b.length;k++){N.index>k?(C=N,N=null):C=N.sibling;var E=h(x,N,b[k],_);if(E===null){N===null&&(N=C);break}e&&N&&E.alternate===null&&t(x,N),w=i(E,w,k),S===null?j=E:S.sibling=E,S=E,N=C}if(k===b.length)return r(x,N),ct&&Gi(x,k),j;if(N===null){for(;k<b.length;k++)N=f(x,b[k],_),N!==null&&(w=i(N,w,k),S===null?j=N:S.sibling=N,S=N);return ct&&Gi(x,k),j}for(N=n(x,N);k<b.length;k++)C=m(N,x,k,b[k],_),C!==null&&(e&&C.alternate!==null&&N.delete(C.key===null?k:C.key),w=i(C,w,k),S===null?j=C:S.sibling=C,S=C);return e&&N.forEach(function(O){return t(x,O)}),ct&&Gi(x,k),j}function y(x,w,b,_){var j=fl(b);if(typeof j!="function")throw Error(re(150));if(b=j.call(b),b==null)throw Error(re(151));for(var S=j=null,N=w,k=w=0,C=null,E=b.next();N!==null&&!E.done;k++,E=b.next()){N.index>k?(C=N,N=null):C=N.sibling;var O=h(x,N,E.value,_);if(O===null){N===null&&(N=C);break}e&&N&&O.alternate===null&&t(x,N),w=i(O,w,k),S===null?j=O:S.sibling=O,S=O,N=C}if(E.done)return r(x,N),ct&&Gi(x,k),j;if(N===null){for(;!E.done;k++,E=b.next())E=f(x,E.value,_),E!==null&&(w=i(E,w,k),S===null?j=E:S.sibling=E,S=E);return ct&&Gi(x,k),j}for(N=n(x,N);!E.done;k++,E=b.next())E=m(N,x,k,E.value,_),E!==null&&(e&&E.alternate!==null&&N.delete(E.key===null?k:E.key),w=i(E,w,k),S===null?j=E:S.sibling=E,S=E);return e&&N.forEach(function(A){return t(x,A)}),ct&&Gi(x,k),j}function v(x,w,b,_){if(typeof b=="object"&&b!==null&&b.type===to&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case xu:e:{for(var j=b.key,S=w;S!==null;){if(S.key===j){if(j=b.type,j===to){if(S.tag===7){r(x,S.sibling),w=a(S,b.props.children),w.return=x,x=w;break e}}else if(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ri&&sw(j)===S.type){r(x,S.sibling),w=a(S,b.props),w.ref=vl(x,S,b),w.return=x,x=w;break e}r(x,S);break}else t(x,S);S=S.sibling}b.type===to?(w=ds(b.props.children,x.mode,_,b.key),w.return=x,x=w):(_=jd(b.type,b.key,b.props,null,x.mode,_),_.ref=vl(x,w,b),_.return=x,x=_)}return s(x);case eo:e:{for(S=b.key;w!==null;){if(w.key===S)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){r(x,w.sibling),w=a(w,b.children||[]),w.return=x,x=w;break e}else{r(x,w);break}else t(x,w);w=w.sibling}w=gm(b,x.mode,_),w.return=x,x=w}return s(x);case ri:return S=b._init,v(x,w,S(b._payload),_)}if(Dl(b))return g(x,w,b,_);if(fl(b))return y(x,w,b,_);Ou(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(r(x,w.sibling),w=a(w,b),w.return=x,x=w):(r(x,w),w=mm(b,x.mode,_),w.return=x,x=w),s(x)):r(x,w)}return v}var Po=ek(!0),tk=ek(!1),Wd=Ai(null),Kd=null,co=null,Fy=null;function By(){Fy=co=Kd=null}function Uy(e){var t=Wd.current;st(Wd),e._currentValue=t}function Rg(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function xo(e,t){Kd=e,Fy=co=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Rr=!0),e.firstContext=null)}function wn(e){var t=e._currentValue;if(Fy!==e)if(e={context:e,memoizedValue:t,next:null},co===null){if(Kd===null)throw Error(re(308));co=e,Kd.dependencies={lanes:0,firstContext:e}}else co=co.next=e;return t}var as=null;function zy(e){as===null?as=[e]:as.push(e)}function rk(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,zy(t)):(r.next=a.next,a.next=r),t.interleaved=r,Pa(e,n)}function Pa(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ni=!1;function Wy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ja(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function yi(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Be&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Pa(e,r)}return a=n.interleaved,a===null?(t.next=t,zy(n)):(t.next=a.next,a.next=t),n.interleaved=t,Pa(e,r)}function vd(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ey(e,r)}}function ow(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=s:i=i.next=s,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Hd(e,t,r,n){var a=e.updateQueue;ni=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,u=c.next;c.next=null,s===null?i=u:s.next=u,s=c;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==s&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;s=0,d=u=c=null,o=i;do{var h=o.lane,m=o.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,y=o;switch(h=t,m=r,y.tag){case 1:if(g=y.payload,typeof g=="function"){f=g.call(m,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,h=typeof g=="function"?g.call(m,f,h):g,h==null)break e;f=bt({},f,h);break e;case 2:ni=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,s|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do s|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);xs|=s,e.lanes=s,e.memoizedState=f}}function lw(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(re(191,a));a.call(n)}}}var Wc={},oa=Ai(Wc),dc=Ai(Wc),fc=Ai(Wc);function is(e){if(e===Wc)throw Error(re(174));return e}function Ky(e,t){switch(rt(fc,t),rt(dc,e),rt(oa,Wc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:mg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=mg(t,e)}st(oa),rt(oa,t)}function Oo(){st(oa),st(dc),st(fc)}function ak(e){is(fc.current);var t=is(oa.current),r=mg(t,e.type);t!==r&&(rt(dc,e),rt(oa,r))}function Hy(e){dc.current===e&&(st(oa),st(dc))}var yt=Ai(0);function qd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cm=[];function qy(){for(var e=0;e<cm.length;e++)cm[e]._workInProgressVersionPrimary=null;cm.length=0}var yd=za.ReactCurrentDispatcher,um=za.ReactCurrentBatchConfig,ys=0,xt=null,Lt=null,Yt=null,Vd=!1,Kl=!1,hc=0,QR=0;function dr(){throw Error(re(321))}function Vy(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!zn(e[r],t[r]))return!1;return!0}function Gy(e,t,r,n,a,i){if(ys=i,xt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,yd.current=e===null||e.memoizedState===null?rM:nM,e=r(n,a),Kl){i=0;do{if(Kl=!1,hc=0,25<=i)throw Error(re(301));i+=1,Yt=Lt=null,t.updateQueue=null,yd.current=aM,e=r(n,a)}while(Kl)}if(yd.current=Gd,t=Lt!==null&&Lt.next!==null,ys=0,Yt=Lt=xt=null,Vd=!1,t)throw Error(re(300));return e}function Yy(){var e=hc!==0;return hc=0,e}function ra(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?xt.memoizedState=Yt=e:Yt=Yt.next=e,Yt}function _n(){if(Lt===null){var e=xt.alternate;e=e!==null?e.memoizedState:null}else e=Lt.next;var t=Yt===null?xt.memoizedState:Yt.next;if(t!==null)Yt=t,Lt=e;else{if(e===null)throw Error(re(310));Lt=e,e={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},Yt===null?xt.memoizedState=Yt=e:Yt=Yt.next=e}return Yt}function pc(e,t){return typeof t=="function"?t(e):t}function dm(e){var t=_n(),r=t.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=e;var n=Lt,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var o=s=null,c=null,u=i;do{var d=u.lane;if((ys&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,s=n):c=c.next=f,xt.lanes|=d,xs|=d}u=u.next}while(u!==null&&u!==i);c===null?s=n:c.next=o,zn(n,t.memoizedState)||(Rr=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,xt.lanes|=i,xs|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function fm(e){var t=_n(),r=t.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var s=a=a.next;do i=e(i,s.action),s=s.next;while(s!==a);zn(i,t.memoizedState)||(Rr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function ik(){}function sk(e,t){var r=xt,n=_n(),a=t(),i=!zn(n.memoizedState,a);if(i&&(n.memoizedState=a,Rr=!0),n=n.queue,Xy(ck.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Yt!==null&&Yt.memoizedState.tag&1){if(r.flags|=2048,mc(9,lk.bind(null,r,n,a,t),void 0,null),Qt===null)throw Error(re(349));ys&30||ok(r,t,a)}return a}function ok(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=xt.updateQueue,t===null?(t={lastEffect:null,stores:null},xt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function lk(e,t,r,n){t.value=r,t.getSnapshot=n,uk(t)&&dk(e)}function ck(e,t,r){return r(function(){uk(t)&&dk(e)})}function uk(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!zn(e,r)}catch{return!0}}function dk(e){var t=Pa(e,1);t!==null&&Un(t,e,1,-1)}function cw(e){var t=ra();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pc,lastRenderedState:e},t.queue=e,e=e.dispatch=tM.bind(null,xt,e),[t.memoizedState,e]}function mc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=xt.updateQueue,t===null?(t={lastEffect:null,stores:null},xt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function fk(){return _n().memoizedState}function xd(e,t,r,n){var a=ra();xt.flags|=e,a.memoizedState=mc(1|t,r,void 0,n===void 0?null:n)}function dh(e,t,r,n){var a=_n();n=n===void 0?null:n;var i=void 0;if(Lt!==null){var s=Lt.memoizedState;if(i=s.destroy,n!==null&&Vy(n,s.deps)){a.memoizedState=mc(t,r,i,n);return}}xt.flags|=e,a.memoizedState=mc(1|t,r,i,n)}function uw(e,t){return xd(8390656,8,e,t)}function Xy(e,t){return dh(2048,8,e,t)}function hk(e,t){return dh(4,2,e,t)}function pk(e,t){return dh(4,4,e,t)}function mk(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function gk(e,t,r){return r=r!=null?r.concat([e]):null,dh(4,4,mk.bind(null,t,e),r)}function Jy(){}function vk(e,t){var r=_n();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Vy(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function yk(e,t){var r=_n();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Vy(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function xk(e,t,r){return ys&21?(zn(r,t)||(r=SN(),xt.lanes|=r,xs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Rr=!0),e.memoizedState=r)}function ZR(e,t){var r=Ge;Ge=r!==0&&4>r?r:4,e(!0);var n=um.transition;um.transition={};try{e(!1),t()}finally{Ge=r,um.transition=n}}function bk(){return _n().memoizedState}function eM(e,t,r){var n=bi(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},wk(e))_k(t,r);else if(r=rk(e,t,r,n),r!==null){var a=Sr();Un(r,e,n,a),jk(r,t,n)}}function tM(e,t,r){var n=bi(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(wk(e))_k(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,o=i(s,r);if(a.hasEagerState=!0,a.eagerState=o,zn(o,s)){var c=t.interleaved;c===null?(a.next=a,zy(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=rk(e,t,a,n),r!==null&&(a=Sr(),Un(r,e,n,a),jk(r,t,n))}}function wk(e){var t=e.alternate;return e===xt||t!==null&&t===xt}function _k(e,t){Kl=Vd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function jk(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ey(e,r)}}var Gd={readContext:wn,useCallback:dr,useContext:dr,useEffect:dr,useImperativeHandle:dr,useInsertionEffect:dr,useLayoutEffect:dr,useMemo:dr,useReducer:dr,useRef:dr,useState:dr,useDebugValue:dr,useDeferredValue:dr,useTransition:dr,useMutableSource:dr,useSyncExternalStore:dr,useId:dr,unstable_isNewReconciler:!1},rM={readContext:wn,useCallback:function(e,t){return ra().memoizedState=[e,t===void 0?null:t],e},useContext:wn,useEffect:uw,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,xd(4194308,4,mk.bind(null,t,e),r)},useLayoutEffect:function(e,t){return xd(4194308,4,e,t)},useInsertionEffect:function(e,t){return xd(4,2,e,t)},useMemo:function(e,t){var r=ra();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ra();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=eM.bind(null,xt,e),[n.memoizedState,e]},useRef:function(e){var t=ra();return e={current:e},t.memoizedState=e},useState:cw,useDebugValue:Jy,useDeferredValue:function(e){return ra().memoizedState=e},useTransition:function(){var e=cw(!1),t=e[0];return e=ZR.bind(null,e[1]),ra().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=xt,a=ra();if(ct){if(r===void 0)throw Error(re(407));r=r()}else{if(r=t(),Qt===null)throw Error(re(349));ys&30||ok(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,uw(ck.bind(null,n,i,e),[e]),n.flags|=2048,mc(9,lk.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=ra(),t=Qt.identifierPrefix;if(ct){var r=ba,n=xa;r=(n&~(1<<32-Bn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=hc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=QR++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nM={readContext:wn,useCallback:vk,useContext:wn,useEffect:Xy,useImperativeHandle:gk,useInsertionEffect:hk,useLayoutEffect:pk,useMemo:yk,useReducer:dm,useRef:fk,useState:function(){return dm(pc)},useDebugValue:Jy,useDeferredValue:function(e){var t=_n();return xk(t,Lt.memoizedState,e)},useTransition:function(){var e=dm(pc)[0],t=_n().memoizedState;return[e,t]},useMutableSource:ik,useSyncExternalStore:sk,useId:bk,unstable_isNewReconciler:!1},aM={readContext:wn,useCallback:vk,useContext:wn,useEffect:Xy,useImperativeHandle:gk,useInsertionEffect:hk,useLayoutEffect:pk,useMemo:yk,useReducer:fm,useRef:fk,useState:function(){return fm(pc)},useDebugValue:Jy,useDeferredValue:function(e){var t=_n();return Lt===null?t.memoizedState=e:xk(t,Lt.memoizedState,e)},useTransition:function(){var e=fm(pc)[0],t=_n().memoizedState;return[e,t]},useMutableSource:ik,useSyncExternalStore:sk,useId:bk,unstable_isNewReconciler:!1};function In(e,t){if(e&&e.defaultProps){t=bt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Mg(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:bt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var fh={isMounted:function(e){return(e=e._reactInternals)?As(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Sr(),a=bi(e),i=ja(n,a);i.payload=t,r!=null&&(i.callback=r),t=yi(e,i,a),t!==null&&(Un(t,e,a,n),vd(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Sr(),a=bi(e),i=ja(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=yi(e,i,a),t!==null&&(Un(t,e,a,n),vd(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Sr(),n=bi(e),a=ja(r,n);a.tag=2,t!=null&&(a.callback=t),t=yi(e,a,n),t!==null&&(Un(t,e,n,r),vd(t,e,n))}};function dw(e,t,r,n,a,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,s):t.prototype&&t.prototype.isPureReactComponent?!oc(r,n)||!oc(a,i):!0}function Sk(e,t,r){var n=!1,a=Si,i=t.contextType;return typeof i=="object"&&i!==null?i=wn(i):(a=Fr(t)?gs:gr.current,n=t.contextTypes,i=(n=n!=null)?Co(e,a):Si),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=fh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function fw(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&fh.enqueueReplaceState(t,t.state,null)}function $g(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Wy(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=wn(i):(i=Fr(t)?gs:gr.current,a.context=Co(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Mg(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&fh.enqueueReplaceState(a,a.state,null),Hd(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ao(e,t){try{var r="",n=t;do r+=TI(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function hm(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Lg(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var iM=typeof WeakMap=="function"?WeakMap:Map;function Nk(e,t,r){r=ja(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Xd||(Xd=!0,Gg=n),Lg(e,t)},r}function kk(e,t,r){r=ja(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Lg(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Lg(e,t),typeof n!="function"&&(xi===null?xi=new Set([this]):xi.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function hw(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new iM;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=xM.bind(null,e,t,r),t.then(e,e))}function pw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function mw(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ja(-1,1),t.tag=2,yi(r,t,1))),r.lanes|=1),e)}var sM=za.ReactCurrentOwner,Rr=!1;function br(e,t,r,n){t.child=e===null?tk(t,null,r,n):Po(t,e.child,r,n)}function gw(e,t,r,n,a){r=r.render;var i=t.ref;return xo(t,a),n=Gy(e,t,r,n,i,a),r=Yy(),e!==null&&!Rr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Oa(e,t,a)):(ct&&r&&My(t),t.flags|=1,br(e,t,n,a),t.child)}function vw(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!i0(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Ck(e,t,i,n,a)):(e=jd(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var s=i.memoizedProps;if(r=r.compare,r=r!==null?r:oc,r(s,n)&&e.ref===t.ref)return Oa(e,t,a)}return t.flags|=1,e=wi(i,n),e.ref=t.ref,e.return=t,t.child=e}function Ck(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(oc(i,n)&&e.ref===t.ref)if(Rr=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Rr=!0);else return t.lanes=e.lanes,Oa(e,t,a)}return Fg(e,t,r,n,a)}function Ek(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(fo,Xr),Xr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,rt(fo,Xr),Xr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,rt(fo,Xr),Xr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,rt(fo,Xr),Xr|=n;return br(e,t,a,r),t.child}function Pk(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Fg(e,t,r,n,a){var i=Fr(r)?gs:gr.current;return i=Co(t,i),xo(t,a),r=Gy(e,t,r,n,i,a),n=Yy(),e!==null&&!Rr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Oa(e,t,a)):(ct&&n&&My(t),t.flags|=1,br(e,t,r,a),t.child)}function yw(e,t,r,n,a){if(Fr(r)){var i=!0;Bd(t)}else i=!1;if(xo(t,a),t.stateNode===null)bd(e,t),Sk(t,r,n),$g(t,r,n,a),n=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var c=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=wn(u):(u=Fr(r)?gs:gr.current,u=Co(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==n||c!==u)&&fw(t,s,n,u),ni=!1;var h=t.memoizedState;s.state=h,Hd(t,n,s,a),c=t.memoizedState,o!==n||h!==c||Lr.current||ni?(typeof d=="function"&&(Mg(t,r,d,n),c=t.memoizedState),(o=ni||dw(t,r,o,n,h,c,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=u,n=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,nk(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:In(t.type,o),s.props=u,f=t.pendingProps,h=s.context,c=r.contextType,typeof c=="object"&&c!==null?c=wn(c):(c=Fr(r)?gs:gr.current,c=Co(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||h!==c)&&fw(t,s,n,c),ni=!1,h=t.memoizedState,s.state=h,Hd(t,n,s,a);var g=t.memoizedState;o!==f||h!==g||Lr.current||ni?(typeof m=="function"&&(Mg(t,r,m,n),g=t.memoizedState),(u=ni||dw(t,r,u,n,h,g,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,g,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,g,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),s.props=n,s.state=g,s.context=c,n=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Bg(e,t,r,n,i,a)}function Bg(e,t,r,n,a,i){Pk(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return a&&nw(t,r,!1),Oa(e,t,i);n=t.stateNode,sM.current=t;var o=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=Po(t,e.child,null,i),t.child=Po(t,null,o,i)):br(e,t,o,i),t.memoizedState=n.state,a&&nw(t,r,!0),t.child}function Ok(e){var t=e.stateNode;t.pendingContext?rw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&rw(e,t.context,!1),Ky(e,t.containerInfo)}function xw(e,t,r,n,a){return Eo(),Ly(a),t.flags|=256,br(e,t,r,n),t.child}var Ug={dehydrated:null,treeContext:null,retryLane:0};function zg(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ak(e,t,r){var n=t.pendingProps,a=yt.current,i=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),rt(yt,a&1),e===null)return Ig(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,i?(n=t.mode,i=t.child,s={mode:"hidden",children:s},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=mh(s,n,0,null),e=ds(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=zg(r),t.memoizedState=Ug,e):Qy(t,s));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return oM(e,t,s,n,o,a,r);if(i){i=n.fallback,s=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(s&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=wi(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=wi(o,i):(i=ds(i,s,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,s=e.child.memoizedState,s=s===null?zg(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~r,t.memoizedState=Ug,n}return i=e.child,e=i.sibling,n=wi(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Qy(e,t){return t=mh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Au(e,t,r,n){return n!==null&&Ly(n),Po(t,e.child,null,r),e=Qy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function oM(e,t,r,n,a,i,s){if(r)return t.flags&256?(t.flags&=-257,n=hm(Error(re(422))),Au(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=mh({mode:"visible",children:n.children},a,0,null),i=ds(i,a,s,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Po(t,e.child,null,s),t.child.memoizedState=zg(s),t.memoizedState=Ug,i);if(!(t.mode&1))return Au(e,t,s,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(re(419)),n=hm(i,n,void 0),Au(e,t,s,n)}if(o=(s&e.childLanes)!==0,Rr||o){if(n=Qt,n!==null){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|s)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Pa(e,a),Un(n,e,a,-1))}return a0(),n=hm(Error(re(421))),Au(e,t,s,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=bM.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,tn=vi(a.nextSibling),rn=t,ct=!0,$n=null,e!==null&&(gn[vn++]=xa,gn[vn++]=ba,gn[vn++]=vs,xa=e.id,ba=e.overflow,vs=t),t=Qy(t,n.children),t.flags|=4096,t)}function bw(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Rg(e.return,t,r)}function pm(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function Tk(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(br(e,t,n.children,r),n=yt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bw(e,r,t);else if(e.tag===19)bw(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(rt(yt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&qd(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),pm(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&qd(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}pm(t,!0,r,null,i);break;case"together":pm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Oa(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),xs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(re(153));if(t.child!==null){for(e=t.child,r=wi(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=wi(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function lM(e,t,r){switch(t.tag){case 3:Ok(t),Eo();break;case 5:ak(t);break;case 1:Fr(t.type)&&Bd(t);break;case 4:Ky(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;rt(Wd,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(rt(yt,yt.current&1),t.flags|=128,null):r&t.child.childLanes?Ak(e,t,r):(rt(yt,yt.current&1),e=Oa(e,t,r),e!==null?e.sibling:null);rt(yt,yt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Tk(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),rt(yt,yt.current),n)break;return null;case 22:case 23:return t.lanes=0,Ek(e,t,r)}return Oa(e,t,r)}var Dk,Wg,Ik,Rk;Dk=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Wg=function(){};Ik=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,is(oa.current);var i=null;switch(r){case"input":a=dg(e,a),n=dg(e,n),i=[];break;case"select":a=bt({},a,{value:void 0}),n=bt({},n,{value:void 0}),i=[];break;case"textarea":a=pg(e,a),n=pg(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ld)}gg(r,n);var s;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var o=a[u];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ec.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(o=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&o[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ec.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&at("scroll",e),i||o===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Rk=function(e,t,r,n){r!==n&&(t.flags|=4)};function yl(e,t){if(!ct)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function fr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function cM(e,t,r){var n=t.pendingProps;switch($y(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fr(t),null;case 1:return Fr(t.type)&&Fd(),fr(t),null;case 3:return n=t.stateNode,Oo(),st(Lr),st(gr),qy(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Pu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$n!==null&&(Jg($n),$n=null))),Wg(e,t),fr(t),null;case 5:Hy(t);var a=is(fc.current);if(r=t.type,e!==null&&t.stateNode!=null)Ik(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(re(166));return fr(t),null}if(e=is(oa.current),Pu(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[aa]=t,n[uc]=i,e=(t.mode&1)!==0,r){case"dialog":at("cancel",n),at("close",n);break;case"iframe":case"object":case"embed":at("load",n);break;case"video":case"audio":for(a=0;a<Rl.length;a++)at(Rl[a],n);break;case"source":at("error",n);break;case"img":case"image":case"link":at("error",n),at("load",n);break;case"details":at("toggle",n);break;case"input":Pb(n,i),at("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},at("invalid",n);break;case"textarea":Ab(n,i),at("invalid",n)}gg(r,i),a=null;for(var s in i)if(i.hasOwnProperty(s)){var o=i[s];s==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&Eu(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Eu(n.textContent,o,e),a=["children",""+o]):ec.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&at("scroll",n)}switch(r){case"input":bu(n),Ob(n,i,!0);break;case"textarea":bu(n),Tb(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Ld)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cN(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[aa]=t,e[uc]=n,Dk(e,t,!1,!1),t.stateNode=e;e:{switch(s=vg(r,n),r){case"dialog":at("cancel",e),at("close",e),a=n;break;case"iframe":case"object":case"embed":at("load",e),a=n;break;case"video":case"audio":for(a=0;a<Rl.length;a++)at(Rl[a],e);a=n;break;case"source":at("error",e),a=n;break;case"img":case"image":case"link":at("error",e),at("load",e),a=n;break;case"details":at("toggle",e),a=n;break;case"input":Pb(e,n),a=dg(e,n),at("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=bt({},n,{value:void 0}),at("invalid",e);break;case"textarea":Ab(e,n),a=pg(e,n),at("invalid",e);break;default:a=n}gg(r,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?fN(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&uN(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&tc(e,c):typeof c=="number"&&tc(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ec.hasOwnProperty(i)?c!=null&&i==="onScroll"&&at("scroll",e):c!=null&&_y(e,i,c,s))}switch(r){case"input":bu(e),Ob(e,n,!1);break;case"textarea":bu(e),Tb(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ji(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?mo(e,!!n.multiple,i,!1):n.defaultValue!=null&&mo(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ld)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return fr(t),null;case 6:if(e&&t.stateNode!=null)Rk(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(re(166));if(r=is(fc.current),is(oa.current),Pu(t)){if(n=t.stateNode,r=t.memoizedProps,n[aa]=t,(i=n.nodeValue!==r)&&(e=rn,e!==null))switch(e.tag){case 3:Eu(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Eu(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[aa]=t,t.stateNode=n}return fr(t),null;case 13:if(st(yt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ct&&tn!==null&&t.mode&1&&!(t.flags&128))ZN(),Eo(),t.flags|=98560,i=!1;else if(i=Pu(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(re(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(re(317));i[aa]=t}else Eo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;fr(t),i=!1}else $n!==null&&(Jg($n),$n=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||yt.current&1?zt===0&&(zt=3):a0())),t.updateQueue!==null&&(t.flags|=4),fr(t),null);case 4:return Oo(),Wg(e,t),e===null&&lc(t.stateNode.containerInfo),fr(t),null;case 10:return Uy(t.type._context),fr(t),null;case 17:return Fr(t.type)&&Fd(),fr(t),null;case 19:if(st(yt),i=t.memoizedState,i===null)return fr(t),null;if(n=(t.flags&128)!==0,s=i.rendering,s===null)if(n)yl(i,!1);else{if(zt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=qd(e),s!==null){for(t.flags|=128,yl(i,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return rt(yt,yt.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ct()>To&&(t.flags|=128,n=!0,yl(i,!1),t.lanes=4194304)}else{if(!n)if(e=qd(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),yl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!ct)return fr(t),null}else 2*Ct()-i.renderingStartTime>To&&r!==1073741824&&(t.flags|=128,n=!0,yl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(r=i.last,r!==null?r.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ct(),t.sibling=null,r=yt.current,rt(yt,n?r&1|2:r&1),t):(fr(t),null);case 22:case 23:return n0(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Xr&1073741824&&(fr(t),t.subtreeFlags&6&&(t.flags|=8192)):fr(t),null;case 24:return null;case 25:return null}throw Error(re(156,t.tag))}function uM(e,t){switch($y(t),t.tag){case 1:return Fr(t.type)&&Fd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Oo(),st(Lr),st(gr),qy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Hy(t),null;case 13:if(st(yt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(re(340));Eo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return st(yt),null;case 4:return Oo(),null;case 10:return Uy(t.type._context),null;case 22:case 23:return n0(),null;case 24:return null;default:return null}}var Tu=!1,pr=!1,dM=typeof WeakSet=="function"?WeakSet:Set,pe=null;function uo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){_t(e,t,n)}else r.current=null}function Kg(e,t,r){try{r()}catch(n){_t(e,t,n)}}var ww=!1;function fM(e,t){if(Cg=Rd,e=BN(),Ry(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var s=0,o=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==r||a!==0&&f.nodeType!==3||(o=s+a),f!==i||n!==0&&f.nodeType!==3||(c=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===r&&++u===a&&(o=s),h===i&&++d===n&&(c=s),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Eg={focusedElem:e,selectionRange:r},Rd=!1,pe=t;pe!==null;)if(t=pe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pe=e;else for(;pe!==null;){t=pe;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,v=g.memoizedState,x=t.stateNode,w=x.getSnapshotBeforeUpdate(t.elementType===t.type?y:In(t.type,y),v);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(_){_t(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,pe=e;break}pe=t.return}return g=ww,ww=!1,g}function Hl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Kg(t,r,i)}a=a.next}while(a!==n)}}function hh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Hg(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Mk(e){var t=e.alternate;t!==null&&(e.alternate=null,Mk(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[aa],delete t[uc],delete t[Ag],delete t[GR],delete t[YR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $k(e){return e.tag===5||e.tag===3||e.tag===4}function _w(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$k(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ld));else if(n!==4&&(e=e.child,e!==null))for(qg(e,t,r),e=e.sibling;e!==null;)qg(e,t,r),e=e.sibling}function Vg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Vg(e,t,r),e=e.sibling;e!==null;)Vg(e,t,r),e=e.sibling}var sr=null,Mn=!1;function ei(e,t,r){for(r=r.child;r!==null;)Lk(e,t,r),r=r.sibling}function Lk(e,t,r){if(sa&&typeof sa.onCommitFiberUnmount=="function")try{sa.onCommitFiberUnmount(ih,r)}catch{}switch(r.tag){case 5:pr||uo(r,t);case 6:var n=sr,a=Mn;sr=null,ei(e,t,r),sr=n,Mn=a,sr!==null&&(Mn?(e=sr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):sr.removeChild(r.stateNode));break;case 18:sr!==null&&(Mn?(e=sr,r=r.stateNode,e.nodeType===8?om(e.parentNode,r):e.nodeType===1&&om(e,r),ic(e)):om(sr,r.stateNode));break;case 4:n=sr,a=Mn,sr=r.stateNode.containerInfo,Mn=!0,ei(e,t,r),sr=n,Mn=a;break;case 0:case 11:case 14:case 15:if(!pr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Kg(r,t,s),a=a.next}while(a!==n)}ei(e,t,r);break;case 1:if(!pr&&(uo(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){_t(r,t,o)}ei(e,t,r);break;case 21:ei(e,t,r);break;case 22:r.mode&1?(pr=(n=pr)||r.memoizedState!==null,ei(e,t,r),pr=n):ei(e,t,r);break;default:ei(e,t,r)}}function jw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new dM),t.forEach(function(n){var a=wM.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Tn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:sr=o.stateNode,Mn=!1;break e;case 3:sr=o.stateNode.containerInfo,Mn=!0;break e;case 4:sr=o.stateNode.containerInfo,Mn=!0;break e}o=o.return}if(sr===null)throw Error(re(160));Lk(i,s,a),sr=null,Mn=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){_t(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Fk(t,e),t=t.sibling}function Fk(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Tn(t,e),ta(e),n&4){try{Hl(3,e,e.return),hh(3,e)}catch(y){_t(e,e.return,y)}try{Hl(5,e,e.return)}catch(y){_t(e,e.return,y)}}break;case 1:Tn(t,e),ta(e),n&512&&r!==null&&uo(r,r.return);break;case 5:if(Tn(t,e),ta(e),n&512&&r!==null&&uo(r,r.return),e.flags&32){var a=e.stateNode;try{tc(a,"")}catch(y){_t(e,e.return,y)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,s=r!==null?r.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&oN(a,i),vg(o,s);var u=vg(o,i);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];d==="style"?fN(a,f):d==="dangerouslySetInnerHTML"?uN(a,f):d==="children"?tc(a,f):_y(a,d,f,u)}switch(o){case"input":fg(a,i);break;case"textarea":lN(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?mo(a,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?mo(a,!!i.multiple,i.defaultValue,!0):mo(a,!!i.multiple,i.multiple?[]:"",!1))}a[uc]=i}catch(y){_t(e,e.return,y)}}break;case 6:if(Tn(t,e),ta(e),n&4){if(e.stateNode===null)throw Error(re(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(y){_t(e,e.return,y)}}break;case 3:if(Tn(t,e),ta(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ic(t.containerInfo)}catch(y){_t(e,e.return,y)}break;case 4:Tn(t,e),ta(e);break;case 13:Tn(t,e),ta(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(t0=Ct())),n&4&&jw(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(pr=(u=pr)||d,Tn(t,e),pr=u):Tn(t,e),ta(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(pe=e,d=e.child;d!==null;){for(f=pe=d;pe!==null;){switch(h=pe,m=h.child,h.tag){case 0:case 11:case 14:case 15:Hl(4,h,h.return);break;case 1:uo(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(y){_t(n,r,y)}}break;case 5:uo(h,h.return);break;case 22:if(h.memoizedState!==null){Nw(f);continue}}m!==null?(m.return=h,pe=m):Nw(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,c=f.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=dN("display",s))}catch(y){_t(e,e.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){_t(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Tn(t,e),ta(e),n&4&&jw(e);break;case 21:break;default:Tn(t,e),ta(e)}}function ta(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if($k(r)){var n=r;break e}r=r.return}throw Error(re(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(tc(a,""),n.flags&=-33);var i=_w(e);Vg(e,i,a);break;case 3:case 4:var s=n.stateNode.containerInfo,o=_w(e);qg(e,o,s);break;default:throw Error(re(161))}}catch(c){_t(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hM(e,t,r){pe=e,Bk(e)}function Bk(e,t,r){for(var n=(e.mode&1)!==0;pe!==null;){var a=pe,i=a.child;if(a.tag===22&&n){var s=a.memoizedState!==null||Tu;if(!s){var o=a.alternate,c=o!==null&&o.memoizedState!==null||pr;o=Tu;var u=pr;if(Tu=s,(pr=c)&&!u)for(pe=a;pe!==null;)s=pe,c=s.child,s.tag===22&&s.memoizedState!==null?kw(a):c!==null?(c.return=s,pe=c):kw(a);for(;i!==null;)pe=i,Bk(i),i=i.sibling;pe=a,Tu=o,pr=u}Sw(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,pe=i):Sw(e)}}function Sw(e){for(;pe!==null;){var t=pe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:pr||hh(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!pr)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:In(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&lw(t,i,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}lw(t,s,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&ic(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}pr||t.flags&512&&Hg(t)}catch(h){_t(t,t.return,h)}}if(t===e){pe=null;break}if(r=t.sibling,r!==null){r.return=t.return,pe=r;break}pe=t.return}}function Nw(e){for(;pe!==null;){var t=pe;if(t===e){pe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,pe=r;break}pe=t.return}}function kw(e){for(;pe!==null;){var t=pe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{hh(4,t)}catch(c){_t(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){_t(t,a,c)}}var i=t.return;try{Hg(t)}catch(c){_t(t,i,c)}break;case 5:var s=t.return;try{Hg(t)}catch(c){_t(t,s,c)}}}catch(c){_t(t,t.return,c)}if(t===e){pe=null;break}var o=t.sibling;if(o!==null){o.return=t.return,pe=o;break}pe=t.return}}var pM=Math.ceil,Yd=za.ReactCurrentDispatcher,Zy=za.ReactCurrentOwner,bn=za.ReactCurrentBatchConfig,Be=0,Qt=null,It=null,lr=0,Xr=0,fo=Ai(0),zt=0,gc=null,xs=0,ph=0,e0=0,ql=null,Ir=null,t0=0,To=1/0,pa=null,Xd=!1,Gg=null,xi=null,Du=!1,fi=null,Jd=0,Vl=0,Yg=null,wd=-1,_d=0;function Sr(){return Be&6?Ct():wd!==-1?wd:wd=Ct()}function bi(e){return e.mode&1?Be&2&&lr!==0?lr&-lr:JR.transition!==null?(_d===0&&(_d=SN()),_d):(e=Ge,e!==0||(e=window.event,e=e===void 0?16:AN(e.type)),e):1}function Un(e,t,r,n){if(50<Vl)throw Vl=0,Yg=null,Error(re(185));Bc(e,r,n),(!(Be&2)||e!==Qt)&&(e===Qt&&(!(Be&2)&&(ph|=r),zt===4&&li(e,lr)),Br(e,n),r===1&&Be===0&&!(t.mode&1)&&(To=Ct()+500,uh&&Ti()))}function Br(e,t){var r=e.callbackNode;JI(e,t);var n=Id(e,e===Qt?lr:0);if(n===0)r!==null&&Rb(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Rb(r),t===1)e.tag===0?XR(Cw.bind(null,e)):XN(Cw.bind(null,e)),qR(function(){!(Be&6)&&Ti()}),r=null;else{switch(NN(n)){case 1:r=Cy;break;case 4:r=_N;break;case 16:r=Dd;break;case 536870912:r=jN;break;default:r=Dd}r=Gk(r,Uk.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Uk(e,t){if(wd=-1,_d=0,Be&6)throw Error(re(327));var r=e.callbackNode;if(bo()&&e.callbackNode!==r)return null;var n=Id(e,e===Qt?lr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Qd(e,n);else{t=n;var a=Be;Be|=2;var i=Wk();(Qt!==e||lr!==t)&&(pa=null,To=Ct()+500,us(e,t));do try{vM();break}catch(o){zk(e,o)}while(!0);By(),Yd.current=i,Be=a,It!==null?t=0:(Qt=null,lr=0,t=zt)}if(t!==0){if(t===2&&(a=_g(e),a!==0&&(n=a,t=Xg(e,a))),t===1)throw r=gc,us(e,0),li(e,n),Br(e,Ct()),r;if(t===6)li(e,n);else{if(a=e.current.alternate,!(n&30)&&!mM(a)&&(t=Qd(e,n),t===2&&(i=_g(e),i!==0&&(n=i,t=Xg(e,i))),t===1))throw r=gc,us(e,0),li(e,n),Br(e,Ct()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(re(345));case 2:Yi(e,Ir,pa);break;case 3:if(li(e,n),(n&130023424)===n&&(t=t0+500-Ct(),10<t)){if(Id(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Sr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Og(Yi.bind(null,e,Ir,pa),t);break}Yi(e,Ir,pa);break;case 4:if(li(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var s=31-Bn(n);i=1<<s,s=t[s],s>a&&(a=s),n&=~i}if(n=a,n=Ct()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*pM(n/1960))-n,10<n){e.timeoutHandle=Og(Yi.bind(null,e,Ir,pa),n);break}Yi(e,Ir,pa);break;case 5:Yi(e,Ir,pa);break;default:throw Error(re(329))}}}return Br(e,Ct()),e.callbackNode===r?Uk.bind(null,e):null}function Xg(e,t){var r=ql;return e.current.memoizedState.isDehydrated&&(us(e,t).flags|=256),e=Qd(e,t),e!==2&&(t=Ir,Ir=r,t!==null&&Jg(t)),e}function Jg(e){Ir===null?Ir=e:Ir.push.apply(Ir,e)}function mM(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!zn(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function li(e,t){for(t&=~e0,t&=~ph,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Bn(t),n=1<<r;e[r]=-1,t&=~n}}function Cw(e){if(Be&6)throw Error(re(327));bo();var t=Id(e,0);if(!(t&1))return Br(e,Ct()),null;var r=Qd(e,t);if(e.tag!==0&&r===2){var n=_g(e);n!==0&&(t=n,r=Xg(e,n))}if(r===1)throw r=gc,us(e,0),li(e,t),Br(e,Ct()),r;if(r===6)throw Error(re(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Yi(e,Ir,pa),Br(e,Ct()),null}function r0(e,t){var r=Be;Be|=1;try{return e(t)}finally{Be=r,Be===0&&(To=Ct()+500,uh&&Ti())}}function bs(e){fi!==null&&fi.tag===0&&!(Be&6)&&bo();var t=Be;Be|=1;var r=bn.transition,n=Ge;try{if(bn.transition=null,Ge=1,e)return e()}finally{Ge=n,bn.transition=r,Be=t,!(Be&6)&&Ti()}}function n0(){Xr=fo.current,st(fo)}function us(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,HR(r)),It!==null)for(r=It.return;r!==null;){var n=r;switch($y(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Fd();break;case 3:Oo(),st(Lr),st(gr),qy();break;case 5:Hy(n);break;case 4:Oo();break;case 13:st(yt);break;case 19:st(yt);break;case 10:Uy(n.type._context);break;case 22:case 23:n0()}r=r.return}if(Qt=e,It=e=wi(e.current,null),lr=Xr=t,zt=0,gc=null,e0=ph=xs=0,Ir=ql=null,as!==null){for(t=0;t<as.length;t++)if(r=as[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var s=i.next;i.next=a,n.next=s}r.pending=n}as=null}return e}function zk(e,t){do{var r=It;try{if(By(),yd.current=Gd,Vd){for(var n=xt.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Vd=!1}if(ys=0,Yt=Lt=xt=null,Kl=!1,hc=0,Zy.current=null,r===null||r.return===null){zt=1,gc=t,It=null;break}e:{var i=e,s=r.return,o=r,c=t;if(t=lr,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=pw(s);if(m!==null){m.flags&=-257,mw(m,s,o,i,t),m.mode&1&&hw(i,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var y=new Set;y.add(c),t.updateQueue=y}else g.add(c);break e}else{if(!(t&1)){hw(i,u,t),a0();break e}c=Error(re(426))}}else if(ct&&o.mode&1){var v=pw(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),mw(v,s,o,i,t),Ly(Ao(c,o));break e}}i=c=Ao(c,o),zt!==4&&(zt=2),ql===null?ql=[i]:ql.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=Nk(i,c,t);ow(i,x);break e;case 1:o=c;var w=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(xi===null||!xi.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=kk(i,o,t);ow(i,_);break e}}i=i.return}while(i!==null)}Hk(r)}catch(j){t=j,It===r&&r!==null&&(It=r=r.return);continue}break}while(!0)}function Wk(){var e=Yd.current;return Yd.current=Gd,e===null?Gd:e}function a0(){(zt===0||zt===3||zt===2)&&(zt=4),Qt===null||!(xs&268435455)&&!(ph&268435455)||li(Qt,lr)}function Qd(e,t){var r=Be;Be|=2;var n=Wk();(Qt!==e||lr!==t)&&(pa=null,us(e,t));do try{gM();break}catch(a){zk(e,a)}while(!0);if(By(),Be=r,Yd.current=n,It!==null)throw Error(re(261));return Qt=null,lr=0,zt}function gM(){for(;It!==null;)Kk(It)}function vM(){for(;It!==null&&!zI();)Kk(It)}function Kk(e){var t=Vk(e.alternate,e,Xr);e.memoizedProps=e.pendingProps,t===null?Hk(e):It=t,Zy.current=null}function Hk(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=uM(r,t),r!==null){r.flags&=32767,It=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{zt=6,It=null;return}}else if(r=cM(r,t,Xr),r!==null){It=r;return}if(t=t.sibling,t!==null){It=t;return}It=t=e}while(t!==null);zt===0&&(zt=5)}function Yi(e,t,r){var n=Ge,a=bn.transition;try{bn.transition=null,Ge=1,yM(e,t,r,n)}finally{bn.transition=a,Ge=n}return null}function yM(e,t,r,n){do bo();while(fi!==null);if(Be&6)throw Error(re(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(re(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(QI(e,i),e===Qt&&(It=Qt=null,lr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Du||(Du=!0,Gk(Dd,function(){return bo(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=bn.transition,bn.transition=null;var s=Ge;Ge=1;var o=Be;Be|=4,Zy.current=null,fM(e,r),Fk(r,e),LR(Eg),Rd=!!Cg,Eg=Cg=null,e.current=r,hM(r),WI(),Be=o,Ge=s,bn.transition=i}else e.current=r;if(Du&&(Du=!1,fi=e,Jd=a),i=e.pendingLanes,i===0&&(xi=null),qI(r.stateNode),Br(e,Ct()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Xd)throw Xd=!1,e=Gg,Gg=null,e;return Jd&1&&e.tag!==0&&bo(),i=e.pendingLanes,i&1?e===Yg?Vl++:(Vl=0,Yg=e):Vl=0,Ti(),null}function bo(){if(fi!==null){var e=NN(Jd),t=bn.transition,r=Ge;try{if(bn.transition=null,Ge=16>e?16:e,fi===null)var n=!1;else{if(e=fi,fi=null,Jd=0,Be&6)throw Error(re(331));var a=Be;for(Be|=4,pe=e.current;pe!==null;){var i=pe,s=i.child;if(pe.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(pe=u;pe!==null;){var d=pe;switch(d.tag){case 0:case 11:case 15:Hl(8,d,i)}var f=d.child;if(f!==null)f.return=d,pe=f;else for(;pe!==null;){d=pe;var h=d.sibling,m=d.return;if(Mk(d),d===u){pe=null;break}if(h!==null){h.return=m,pe=h;break}pe=m}}}var g=i.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}pe=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,pe=s;else e:for(;pe!==null;){if(i=pe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Hl(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,pe=x;break e}pe=i.return}}var w=e.current;for(pe=w;pe!==null;){s=pe;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,pe=b;else e:for(s=w;pe!==null;){if(o=pe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:hh(9,o)}}catch(j){_t(o,o.return,j)}if(o===s){pe=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,pe=_;break e}pe=o.return}}if(Be=a,Ti(),sa&&typeof sa.onPostCommitFiberRoot=="function")try{sa.onPostCommitFiberRoot(ih,e)}catch{}n=!0}return n}finally{Ge=r,bn.transition=t}}return!1}function Ew(e,t,r){t=Ao(r,t),t=Nk(e,t,1),e=yi(e,t,1),t=Sr(),e!==null&&(Bc(e,1,t),Br(e,t))}function _t(e,t,r){if(e.tag===3)Ew(e,e,r);else for(;t!==null;){if(t.tag===3){Ew(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(xi===null||!xi.has(n))){e=Ao(r,e),e=kk(t,e,1),t=yi(t,e,1),e=Sr(),t!==null&&(Bc(t,1,e),Br(t,e));break}}t=t.return}}function xM(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Sr(),e.pingedLanes|=e.suspendedLanes&r,Qt===e&&(lr&r)===r&&(zt===4||zt===3&&(lr&130023424)===lr&&500>Ct()-t0?us(e,0):e0|=r),Br(e,t)}function qk(e,t){t===0&&(e.mode&1?(t=ju,ju<<=1,!(ju&130023424)&&(ju=4194304)):t=1);var r=Sr();e=Pa(e,t),e!==null&&(Bc(e,t,r),Br(e,r))}function bM(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),qk(e,r)}function wM(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(re(314))}n!==null&&n.delete(t),qk(e,r)}var Vk;Vk=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Lr.current)Rr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Rr=!1,lM(e,t,r);Rr=!!(e.flags&131072)}else Rr=!1,ct&&t.flags&1048576&&JN(t,zd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;bd(e,t),e=t.pendingProps;var a=Co(t,gr.current);xo(t,r),a=Gy(null,t,n,e,a,r);var i=Yy();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fr(n)?(i=!0,Bd(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Wy(t),a.updater=fh,t.stateNode=a,a._reactInternals=t,$g(t,n,e,r),t=Bg(null,t,n,!0,i,r)):(t.tag=0,ct&&i&&My(t),br(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(bd(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=jM(n),e=In(n,e),a){case 0:t=Fg(null,t,n,e,r);break e;case 1:t=yw(null,t,n,e,r);break e;case 11:t=gw(null,t,n,e,r);break e;case 14:t=vw(null,t,n,In(n.type,e),r);break e}throw Error(re(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:In(n,a),Fg(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:In(n,a),yw(e,t,n,a,r);case 3:e:{if(Ok(t),e===null)throw Error(re(387));n=t.pendingProps,i=t.memoizedState,a=i.element,nk(e,t),Hd(t,n,null,r);var s=t.memoizedState;if(n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Ao(Error(re(423)),t),t=xw(e,t,n,r,a);break e}else if(n!==a){a=Ao(Error(re(424)),t),t=xw(e,t,n,r,a);break e}else for(tn=vi(t.stateNode.containerInfo.firstChild),rn=t,ct=!0,$n=null,r=tk(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Eo(),n===a){t=Oa(e,t,r);break e}br(e,t,n,r)}t=t.child}return t;case 5:return ak(t),e===null&&Ig(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,s=a.children,Pg(n,a)?s=null:i!==null&&Pg(n,i)&&(t.flags|=32),Pk(e,t),br(e,t,s,r),t.child;case 6:return e===null&&Ig(t),null;case 13:return Ak(e,t,r);case 4:return Ky(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Po(t,null,n,r):br(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:In(n,a),gw(e,t,n,a,r);case 7:return br(e,t,t.pendingProps,r),t.child;case 8:return br(e,t,t.pendingProps.children,r),t.child;case 12:return br(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,s=a.value,rt(Wd,n._currentValue),n._currentValue=s,i!==null)if(zn(i.value,s)){if(i.children===a.children&&!Lr.current){t=Oa(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){s=i.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=ja(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Rg(i.return,r,t),o.lanes|=r;break}c=c.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(re(341));s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),Rg(s,r,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}br(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,xo(t,r),a=wn(a),n=n(a),t.flags|=1,br(e,t,n,r),t.child;case 14:return n=t.type,a=In(n,t.pendingProps),a=In(n.type,a),vw(e,t,n,a,r);case 15:return Ck(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:In(n,a),bd(e,t),t.tag=1,Fr(n)?(e=!0,Bd(t)):e=!1,xo(t,r),Sk(t,n,a),$g(t,n,a,r),Bg(null,t,n,!0,e,r);case 19:return Tk(e,t,r);case 22:return Ek(e,t,r)}throw Error(re(156,t.tag))};function Gk(e,t){return wN(e,t)}function _M(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(e,t,r,n){return new _M(e,t,r,n)}function i0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jM(e){if(typeof e=="function")return i0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Sy)return 11;if(e===Ny)return 14}return 2}function wi(e,t){var r=e.alternate;return r===null?(r=yn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function jd(e,t,r,n,a,i){var s=2;if(n=e,typeof e=="function")i0(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case to:return ds(r.children,a,i,t);case jy:s=8,a|=8;break;case og:return e=yn(12,r,t,a|2),e.elementType=og,e.lanes=i,e;case lg:return e=yn(13,r,t,a),e.elementType=lg,e.lanes=i,e;case cg:return e=yn(19,r,t,a),e.elementType=cg,e.lanes=i,e;case aN:return mh(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rN:s=10;break e;case nN:s=9;break e;case Sy:s=11;break e;case Ny:s=14;break e;case ri:s=16,n=null;break e}throw Error(re(130,e==null?e:typeof e,""))}return t=yn(s,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function ds(e,t,r,n){return e=yn(7,e,n,t),e.lanes=r,e}function mh(e,t,r,n){return e=yn(22,e,n,t),e.elementType=aN,e.lanes=r,e.stateNode={isHidden:!1},e}function mm(e,t,r){return e=yn(6,e,null,t),e.lanes=r,e}function gm(e,t,r){return t=yn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function SM(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xp(0),this.expirationTimes=Xp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xp(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function s0(e,t,r,n,a,i,s,o,c){return e=new SM(e,t,r,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=yn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wy(i),e}function NM(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:eo,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Yk(e){if(!e)return Si;e=e._reactInternals;e:{if(As(e)!==e||e.tag!==1)throw Error(re(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(re(171))}if(e.tag===1){var r=e.type;if(Fr(r))return YN(e,r,t)}return t}function Xk(e,t,r,n,a,i,s,o,c){return e=s0(r,n,!0,e,a,i,s,o,c),e.context=Yk(null),r=e.current,n=Sr(),a=bi(r),i=ja(n,a),i.callback=t??null,yi(r,i,a),e.current.lanes=a,Bc(e,a,n),Br(e,n),e}function gh(e,t,r,n){var a=t.current,i=Sr(),s=bi(a);return r=Yk(r),t.context===null?t.context=r:t.pendingContext=r,t=ja(i,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=yi(a,t,s),e!==null&&(Un(e,a,s,i),vd(e,a,s)),s}function Zd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Pw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function o0(e,t){Pw(e,t),(e=e.alternate)&&Pw(e,t)}function kM(){return null}var Jk=typeof reportError=="function"?reportError:function(e){console.error(e)};function l0(e){this._internalRoot=e}vh.prototype.render=l0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(re(409));gh(e,t,null,null)};vh.prototype.unmount=l0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bs(function(){gh(null,e,null,null)}),t[Ea]=null}};function vh(e){this._internalRoot=e}vh.prototype.unstable_scheduleHydration=function(e){if(e){var t=EN();e={blockedOn:null,target:e,priority:t};for(var r=0;r<oi.length&&t!==0&&t<oi[r].priority;r++);oi.splice(r,0,e),r===0&&ON(e)}};function c0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function yh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ow(){}function CM(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=Zd(s);i.call(u)}}var s=Xk(t,n,e,0,null,!1,!1,"",Ow);return e._reactRootContainer=s,e[Ea]=s.current,lc(e.nodeType===8?e.parentNode:e),bs(),s}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var u=Zd(c);o.call(u)}}var c=s0(e,0,!1,null,null,!1,!1,"",Ow);return e._reactRootContainer=c,e[Ea]=c.current,lc(e.nodeType===8?e.parentNode:e),bs(function(){gh(t,c,r,n)}),c}function xh(e,t,r,n,a){var i=r._reactRootContainer;if(i){var s=i;if(typeof a=="function"){var o=a;a=function(){var c=Zd(s);o.call(c)}}gh(t,s,e,a)}else s=CM(r,t,e,a,n);return Zd(s)}kN=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Il(t.pendingLanes);r!==0&&(Ey(t,r|1),Br(t,Ct()),!(Be&6)&&(To=Ct()+500,Ti()))}break;case 13:bs(function(){var n=Pa(e,1);if(n!==null){var a=Sr();Un(n,e,1,a)}}),o0(e,1)}};Py=function(e){if(e.tag===13){var t=Pa(e,134217728);if(t!==null){var r=Sr();Un(t,e,134217728,r)}o0(e,134217728)}};CN=function(e){if(e.tag===13){var t=bi(e),r=Pa(e,t);if(r!==null){var n=Sr();Un(r,e,t,n)}o0(e,t)}};EN=function(){return Ge};PN=function(e,t){var r=Ge;try{return Ge=e,t()}finally{Ge=r}};xg=function(e,t,r){switch(t){case"input":if(fg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=ch(n);if(!a)throw Error(re(90));sN(n),fg(n,a)}}}break;case"textarea":lN(e,r);break;case"select":t=r.value,t!=null&&mo(e,!!r.multiple,t,!1)}};mN=r0;gN=bs;var EM={usingClientEntryPoint:!1,Events:[zc,io,ch,hN,pN,r0]},xl={findFiberByHostInstance:ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PM={bundleType:xl.bundleType,version:xl.version,rendererPackageName:xl.rendererPackageName,rendererConfig:xl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:za.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xN(e),e===null?null:e.stateNode},findFiberByHostInstance:xl.findFiberByHostInstance||kM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Iu.isDisabled&&Iu.supportsFiber)try{ih=Iu.inject(PM),sa=Iu}catch{}}ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EM;ln.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c0(t))throw Error(re(200));return NM(e,t,null,r)};ln.createRoot=function(e,t){if(!c0(e))throw Error(re(299));var r=!1,n="",a=Jk;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=s0(e,1,!1,null,null,r,!1,n,a),e[Ea]=t.current,lc(e.nodeType===8?e.parentNode:e),new l0(t)};ln.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(re(188)):(e=Object.keys(e).join(","),Error(re(268,e)));return e=xN(t),e=e===null?null:e.stateNode,e};ln.flushSync=function(e){return bs(e)};ln.hydrate=function(e,t,r){if(!yh(t))throw Error(re(200));return xh(null,e,t,!0,r)};ln.hydrateRoot=function(e,t,r){if(!c0(e))throw Error(re(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",s=Jk;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=Xk(t,null,e,1,r??null,a,!1,i,s),e[Ea]=t.current,lc(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new vh(t)};ln.render=function(e,t,r){if(!yh(t))throw Error(re(200));return xh(null,e,t,!1,r)};ln.unmountComponentAtNode=function(e){if(!yh(e))throw Error(re(40));return e._reactRootContainer?(bs(function(){xh(null,null,e,!1,function(){e._reactRootContainer=null,e[Ea]=null})}),!0):!1};ln.unstable_batchedUpdates=r0;ln.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!yh(r))throw Error(re(200));if(e==null||e._reactInternals===void 0)throw Error(re(38));return xh(e,t,r,!1,n)};ln.version="18.3.1-next-f1338f8080-20240426";function Qk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qk)}catch(e){console.error(e)}}Qk(),QS.exports=ln;var hi=QS.exports,Zk,Aw=hi;Zk=Aw.createRoot,Aw.hydrateRoot;/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Tw="popstate";function OM(e={}){function t(n,a){let{pathname:i,search:s,hash:o}=n.location;return Qg("",{pathname:i,search:s,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:vc(a)}return TM(t,r,null,e)}function dt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function sn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function AM(){return Math.random().toString(36).substring(2,10)}function Dw(e,t){return{usr:e.state,key:e.key,idx:t}}function Qg(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?qo(t):t,state:r,key:t&&t.key||n||AM()}}function vc({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function qo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function TM(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,s=a.history,o="POP",c=null,u=d();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function d(){return(s.state||{idx:null}).idx}function f(){o="POP";let v=d(),x=v==null?null:v-u;u=v,c&&c({action:o,location:y.location,delta:x})}function h(v,x){o="PUSH";let w=Qg(y.location,v,x);u=d()+1;let b=Dw(w,u),_=y.createHref(w);try{s.pushState(b,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(_)}i&&c&&c({action:o,location:y.location,delta:1})}function m(v,x){o="REPLACE";let w=Qg(y.location,v,x);u=d();let b=Dw(w,u),_=y.createHref(w);s.replaceState(b,"",_),i&&c&&c({action:o,location:y.location,delta:0})}function g(v){return DM(v)}let y={get action(){return o},get location(){return e(a,s)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Tw,f),c=v,()=>{a.removeEventListener(Tw,f),c=null}},createHref(v){return t(a,v)},createURL:g,encodeLocation(v){let x=g(v);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:m,go(v){return s.go(v)}};return y}function DM(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),dt(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:vc(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function e2(e,t,r="/"){return IM(e,t,r,!1)}function IM(e,t,r,n){let a=typeof t=="string"?qo(t):t,i=Aa(a.pathname||"/",r);if(i==null)return null;let s=t2(e);RM(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=qM(i);o=KM(s[c],u,n)}return o}function t2(e,t=[],r=[],n="",a=!1){let i=(s,o,c=a,u)=>{let d={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;dt(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let f=Sa([n,d.relativePath]),h=r.concat(d);s.children&&s.children.length>0&&(dt(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),t2(s.children,t,h,f,c)),!(s.path==null&&!s.index)&&t.push({path:f,score:zM(f,s.index),routesMeta:h})};return e.forEach((s,o)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))i(s,o);else for(let u of r2(s.path))i(s,o,!0,u)}),t}function r2(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let s=r2(n.join("/")),o=[];return o.push(...s.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...s),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function RM(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:WM(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var MM=/^:[\w-]+$/,$M=3,LM=2,FM=1,BM=10,UM=-2,Iw=e=>e==="*";function zM(e,t){let r=e.split("/"),n=r.length;return r.some(Iw)&&(n+=UM),t&&(n+=LM),r.filter(a=>!Iw(a)).reduce((a,i)=>a+(MM.test(i)?$M:i===""?FM:BM),n)}function WM(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function KM(e,t,r=!1){let{routesMeta:n}=e,a={},i="/",s=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=ef({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=ef({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),s.push({params:a,pathname:Sa([i,f.pathname]),pathnameBase:JM(Sa([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=Sa([i,f.pathnameBase]))}return s}function ef(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=HM(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},h)=>{if(d==="*"){let g=o[h]||"";s=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const m=o[h];return f&&!m?u[d]=void 0:u[d]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:s,pattern:e}}function HM(e,t=!1,r=!0){sn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function qM(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return sn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Aa(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var VM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GM=e=>VM.test(e);function YM(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?qo(e):e,i;if(r)if(GM(r))i=r;else{if(r.includes("//")){let s=r;r=r.replace(/\/\/+/g,"/"),sn(!1,`Pathnames cannot have embedded double slashes - normalizing ${s} -> ${r}`)}r.startsWith("/")?i=Rw(r.substring(1),"/"):i=Rw(r,t)}else i=t;return{pathname:i,search:QM(n),hash:ZM(a)}}function Rw(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function vm(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function XM(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function u0(e){let t=XM(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function d0(e,t,r,n=!1){let a;typeof e=="string"?a=qo(e):(a={...e},dt(!a.pathname||!a.pathname.includes("?"),vm("?","pathname","search",a)),dt(!a.pathname||!a.pathname.includes("#"),vm("#","pathname","hash",a)),dt(!a.search||!a.search.includes("#"),vm("#","search","hash",a)));let i=e===""||a.pathname==="",s=i?"/":a.pathname,o;if(s==null)o=r;else{let f=t.length-1;if(!n&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}o=f>=0?t[f]:"/"}let c=YM(a,o),u=s&&s!=="/"&&s.endsWith("/"),d=(i||s===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Sa=e=>e.join("/").replace(/\/\/+/g,"/"),JM=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),QM=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ZM=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function e5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var n2=["POST","PUT","PATCH","DELETE"];new Set(n2);var t5=["GET",...n2];new Set(t5);var Vo=p.createContext(null);Vo.displayName="DataRouter";var bh=p.createContext(null);bh.displayName="DataRouterState";p.createContext(!1);var a2=p.createContext({isTransitioning:!1});a2.displayName="ViewTransition";var r5=p.createContext(new Map);r5.displayName="Fetchers";var n5=p.createContext(null);n5.displayName="Await";var Yn=p.createContext(null);Yn.displayName="Navigation";var Kc=p.createContext(null);Kc.displayName="Location";var Xn=p.createContext({outlet:null,matches:[],isDataRoute:!1});Xn.displayName="Route";var f0=p.createContext(null);f0.displayName="RouteError";function a5(e,{relative:t}={}){dt(Go(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=p.useContext(Yn),{hash:a,pathname:i,search:s}=Hc(e,{relative:t}),o=i;return r!=="/"&&(o=i==="/"?r:Sa([r,i])),n.createHref({pathname:o,search:s,hash:a})}function Go(){return p.useContext(Kc)!=null}function ha(){return dt(Go(),"useLocation() may be used only in the context of a <Router> component."),p.useContext(Kc).location}var i2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function s2(e){p.useContext(Yn).static||p.useLayoutEffect(e)}function Yo(){let{isDataRoute:e}=p.useContext(Xn);return e?y5():i5()}function i5(){dt(Go(),"useNavigate() may be used only in the context of a <Router> component.");let e=p.useContext(Vo),{basename:t,navigator:r}=p.useContext(Yn),{matches:n}=p.useContext(Xn),{pathname:a}=ha(),i=JSON.stringify(u0(n)),s=p.useRef(!1);return s2(()=>{s.current=!0}),p.useCallback((c,u={})=>{if(sn(s.current,i2),!s.current)return;if(typeof c=="number"){r.go(c);return}let d=d0(c,JSON.parse(i),a,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Sa([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,i,a,e])}p.createContext(null);function s5(){let{matches:e}=p.useContext(Xn),t=e[e.length-1];return t?t.params:{}}function Hc(e,{relative:t}={}){let{matches:r}=p.useContext(Xn),{pathname:n}=ha(),a=JSON.stringify(u0(r));return p.useMemo(()=>d0(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function o5(e,t){return o2(e,t)}function o2(e,t,r,n,a){var w;dt(Go(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=p.useContext(Yn),{matches:s}=p.useContext(Xn),o=s[s.length-1],c=o?o.params:{},u=o?o.pathname:"/",d=o?o.pathnameBase:"/",f=o&&o.route;{let b=f&&f.path||"";l2(u,!f||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let h=ha(),m;if(t){let b=typeof t=="string"?qo(t):t;dt(d==="/"||((w=b.pathname)==null?void 0:w.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${b.pathname}" was given in the \`location\` prop.`),m=b}else m=h;let g=m.pathname||"/",y=g;if(d!=="/"){let b=d.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=e2(e,{pathname:y});sn(f||v!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),sn(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=f5(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:Sa([d,i.encodeLocation?i.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?d:Sa([d,i.encodeLocation?i.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),s,r,n,a);return t&&x?p.createElement(Kc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},x):x}function l5(){let e=v5(),t=e5(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=p.createElement(p.Fragment,null,p.createElement("p",null," Hey developer "),p.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",p.createElement("code",{style:i},"ErrorBoundary")," or"," ",p.createElement("code",{style:i},"errorElement")," prop on your route.")),p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:a},r):null,s)}var c5=p.createElement(l5,null),u5=class extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?p.createElement(Xn.Provider,{value:this.props.routeContext},p.createElement(f0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function d5({routeContext:e,match:t,children:r}){let n=p.useContext(Vo);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),p.createElement(Xn.Provider,{value:e},r)}function f5(e,t=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,s=r==null?void 0:r.errors;if(s!=null){let d=i.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);dt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let o=!1,c=-1;if(r)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:h,errors:m}=r,g=f.route.loader&&!h.hasOwnProperty(f.route.id)&&(!m||m[f.route.id]===void 0);if(f.route.lazy||g){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let u=r&&n?(d,f)=>{var h,m;n(d,{location:r.location,params:((m=(h=r.matches)==null?void 0:h[0])==null?void 0:m.params)??{},errorInfo:f})}:void 0;return i.reduceRight((d,f,h)=>{let m,g=!1,y=null,v=null;r&&(m=s&&f.route.id?s[f.route.id]:void 0,y=f.route.errorElement||c5,o&&(c<0&&h===0?(l2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,v=null):c===h&&(g=!0,v=f.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,h+1)),w=()=>{let b;return m?b=y:g?b=v:f.route.Component?b=p.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,p.createElement(d5,{match:f,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?p.createElement(u5,{location:r.location,revalidation:r.revalidation,component:y,error:m,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0},onError:u}):w()},null)}function h0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function h5(e){let t=p.useContext(Vo);return dt(t,h0(e)),t}function p5(e){let t=p.useContext(bh);return dt(t,h0(e)),t}function m5(e){let t=p.useContext(Xn);return dt(t,h0(e)),t}function p0(e){let t=m5(e),r=t.matches[t.matches.length-1];return dt(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function g5(){return p0("useRouteId")}function v5(){var n;let e=p.useContext(f0),t=p5("useRouteError"),r=p0("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function y5(){let{router:e}=h5("useNavigate"),t=p0("useNavigate"),r=p.useRef(!1);return s2(()=>{r.current=!0}),p.useCallback(async(a,i={})=>{sn(r.current,i2),r.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var Mw={};function l2(e,t,r){!t&&!Mw[e]&&(Mw[e]=!0,sn(!1,r))}p.memo(x5);function x5({routes:e,future:t,state:r,unstable_onError:n}){return o2(e,void 0,r,n,t)}function tf({to:e,replace:t,state:r,relative:n}){dt(Go(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=p.useContext(Yn);sn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=p.useContext(Xn),{pathname:s}=ha(),o=Yo(),c=d0(e,u0(i),s,n==="path"),u=JSON.stringify(c);return p.useEffect(()=>{o(JSON.parse(u),{replace:t,state:r,relative:n})},[o,u,n,t,r]),null}function qr(e){dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function b5({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:i=!1}){dt(!Go(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=e.replace(/^\/*/,"/"),o=p.useMemo(()=>({basename:s,navigator:a,static:i,future:{}}),[s,a,i]);typeof r=="string"&&(r=qo(r));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:h="default"}=r,m=p.useMemo(()=>{let g=Aa(c,s);return g==null?null:{location:{pathname:g,search:u,hash:d,state:f,key:h},navigationType:n}},[s,c,u,d,f,h,n]);return sn(m!=null,`<Router basename="${s}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:p.createElement(Yn.Provider,{value:o},p.createElement(Kc.Provider,{children:t,value:m}))}function w5({children:e,location:t}){return o5(Zg(e),t)}function Zg(e,t=[]){let r=[];return p.Children.forEach(e,(n,a)=>{if(!p.isValidElement(n))return;let i=[...t,a];if(n.type===p.Fragment){r.push.apply(r,Zg(n.props.children,i));return}dt(n.type===qr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let s={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=Zg(n.props.children,i)),r.push(s)}),r}var Sd="get",Nd="application/x-www-form-urlencoded";function wh(e){return e!=null&&typeof e.tagName=="string"}function _5(e){return wh(e)&&e.tagName.toLowerCase()==="button"}function j5(e){return wh(e)&&e.tagName.toLowerCase()==="form"}function S5(e){return wh(e)&&e.tagName.toLowerCase()==="input"}function N5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function k5(e,t){return e.button===0&&(!t||t==="_self")&&!N5(e)}function ev(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function C5(e,t){let r=ev(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}var Ru=null;function E5(){if(Ru===null)try{new FormData(document.createElement("form"),0),Ru=!1}catch{Ru=!0}return Ru}var P5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ym(e){return e!=null&&!P5.has(e)?(sn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Nd}"`),null):e}function O5(e,t){let r,n,a,i,s;if(j5(e)){let o=e.getAttribute("action");n=o?Aa(o,t):null,r=e.getAttribute("method")||Sd,a=ym(e.getAttribute("enctype"))||Nd,i=new FormData(e)}else if(_5(e)||S5(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||o.getAttribute("action");if(n=c?Aa(c,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||Sd,a=ym(e.getAttribute("formenctype"))||ym(o.getAttribute("enctype"))||Nd,i=new FormData(o,e),!E5()){let{name:u,type:d,value:f}=e;if(d==="image"){let h=u?`${u}.`:"";i.append(`${h}x`,"0"),i.append(`${h}y`,"0")}else u&&i.append(u,f)}}else{if(wh(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Sd,n=null,a=Nd,s=e}return i&&a==="text/plain"&&(s=i,i=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:i,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function m0(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function A5(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Aa(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function T5(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function D5(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function I5(e,t,r){let n=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let s=await T5(i,r);return s.links?s.links():[]}return[]}));return L5(n.flat(1).filter(D5).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function $w(e,t,r,n,a,i){let s=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,o=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return i==="assets"?t.filter((c,u)=>s(c,u)||o(c,u)):i==="data"?t.filter((c,u)=>{var f;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(s(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function R5(e,t,{includeHydrateFallback:r}={}){return M5(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function M5(e){return[...new Set(e)]}function $5(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function L5(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let i=JSON.stringify($5(a));return r.has(i)||(r.add(i),n.push({key:i,link:a})),n},[])}function c2(){let e=p.useContext(Vo);return m0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function F5(){let e=p.useContext(bh);return m0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var g0=p.createContext(void 0);g0.displayName="FrameworkContext";function u2(){let e=p.useContext(g0);return m0(e,"You must render this element inside a <HydratedRouter> element"),e}function B5(e,t){let r=p.useContext(g0),[n,a]=p.useState(!1),[i,s]=p.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,h=p.useRef(null);p.useEffect(()=>{if(e==="render"&&s(!0),e==="viewport"){let y=x=>{x.forEach(w=>{s(w.isIntersecting)})},v=new IntersectionObserver(y,{threshold:.5});return h.current&&v.observe(h.current),()=>{v.disconnect()}}},[e]),p.useEffect(()=>{if(n){let y=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(y)}}},[n]);let m=()=>{a(!0)},g=()=>{a(!1),s(!1)};return r?e!=="intent"?[i,h,{}]:[i,h,{onFocus:bl(o,m),onBlur:bl(c,g),onMouseEnter:bl(u,m),onMouseLeave:bl(d,g),onTouchStart:bl(f,m)}]:[!1,h,{}]}function bl(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function U5({page:e,...t}){let{router:r}=c2(),n=p.useMemo(()=>e2(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?p.createElement(W5,{page:e,matches:n,...t}):null}function z5(e){let{manifest:t,routeModules:r}=u2(),[n,a]=p.useState([]);return p.useEffect(()=>{let i=!1;return I5(e,t,r).then(s=>{i||a(s)}),()=>{i=!0}},[e,t,r]),n}function W5({page:e,matches:t,...r}){let n=ha(),{manifest:a,routeModules:i}=u2(),{basename:s}=c2(),{loaderData:o,matches:c}=F5(),u=p.useMemo(()=>$w(e,t,c,a,n,"data"),[e,t,c,a,n]),d=p.useMemo(()=>$w(e,t,c,a,n,"assets"),[e,t,c,a,n]),f=p.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let g=new Set,y=!1;if(t.forEach(x=>{var b;let w=a.routes[x.route.id];!w||!w.hasLoader||(!u.some(_=>_.route.id===x.route.id)&&x.route.id in o&&((b=i[x.route.id])!=null&&b.shouldRevalidate)||w.hasClientLoader?y=!0:g.add(x.route.id))}),g.size===0)return[];let v=A5(e,s,"data");return y&&g.size>0&&v.searchParams.set("_routes",t.filter(x=>g.has(x.route.id)).map(x=>x.route.id).join(",")),[v.pathname+v.search]},[s,o,n,a,u,t,e,i]),h=p.useMemo(()=>R5(d,a),[d,a]),m=z5(d);return p.createElement(p.Fragment,null,f.map(g=>p.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),h.map(g=>p.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),m.map(({key:g,link:y})=>p.createElement("link",{key:g,nonce:r.nonce,...y})))}function K5(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var d2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{d2&&(window.__reactRouterVersion="7.9.6")}catch{}function H5({basename:e,children:t,window:r}){let n=p.useRef();n.current==null&&(n.current=OM({window:r,v5Compat:!0}));let a=n.current,[i,s]=p.useState({action:a.action,location:a.location}),o=p.useCallback(c=>{p.startTransition(()=>s(c))},[s]);return p.useLayoutEffect(()=>a.listen(o),[a,o]),p.createElement(b5,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:a})}var f2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,h2=p.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:i,replace:s,state:o,target:c,to:u,preventScrollReset:d,viewTransition:f,...h},m){let{basename:g}=p.useContext(Yn),y=typeof u=="string"&&f2.test(u),v,x=!1;if(typeof u=="string"&&y&&(v=u,d2))try{let C=new URL(window.location.href),E=u.startsWith("//")?new URL(C.protocol+u):new URL(u),O=Aa(E.pathname,g);E.origin===C.origin&&O!=null?u=O+E.search+E.hash:x=!0}catch{sn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=a5(u,{relative:a}),[b,_,j]=B5(n,h),S=Y5(u,{replace:s,state:o,target:c,preventScrollReset:d,relative:a,viewTransition:f});function N(C){t&&t(C),C.defaultPrevented||S(C)}let k=p.createElement("a",{...h,...j,href:v||w,onClick:x||i?t:N,ref:K5(m,_),target:c,"data-discover":!y&&r==="render"?"true":void 0});return b&&!y?p.createElement(p.Fragment,null,k,p.createElement(U5,{page:w})):k});h2.displayName="Link";var q5=p.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:i,to:s,viewTransition:o,children:c,...u},d){let f=Hc(s,{relative:u.relative}),h=ha(),m=p.useContext(bh),{navigator:g,basename:y}=p.useContext(Yn),v=m!=null&&e4(f)&&o===!0,x=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=h.pathname,b=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(w=w.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&y&&(b=Aa(b,y)||b);const _=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let j=w===x||!a&&w.startsWith(x)&&w.charAt(_)==="/",S=b!=null&&(b===x||!a&&b.startsWith(x)&&b.charAt(x.length)==="/"),N={isActive:j,isPending:S,isTransitioning:v},k=j?t:void 0,C;typeof n=="function"?C=n(N):C=[n,j?"active":null,S?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let E=typeof i=="function"?i(N):i;return p.createElement(h2,{...u,"aria-current":k,className:C,ref:d,style:E,to:s,viewTransition:o},typeof c=="function"?c(N):c)});q5.displayName="NavLink";var V5=p.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:i,method:s=Sd,action:o,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...h},m)=>{let g=Q5(),y=Z5(o,{relative:u}),v=s.toLowerCase()==="get"?"get":"post",x=typeof o=="string"&&f2.test(o),w=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let _=b.nativeEvent.submitter,j=(_==null?void 0:_.getAttribute("formmethod"))||s;g(_||b.currentTarget,{fetcherKey:t,method:j,navigate:r,replace:a,state:i,relative:u,preventScrollReset:d,viewTransition:f})};return p.createElement("form",{ref:m,method:v,action:y,onSubmit:n?c:w,...h,"data-discover":!x&&e==="render"?"true":void 0})});V5.displayName="Form";function G5(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function p2(e){let t=p.useContext(Vo);return dt(t,G5(e)),t}function Y5(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:i,viewTransition:s}={}){let o=Yo(),c=ha(),u=Hc(e,{relative:i});return p.useCallback(d=>{if(k5(d,t)){d.preventDefault();let f=r!==void 0?r:vc(c)===vc(u);o(e,{replace:f,state:n,preventScrollReset:a,relative:i,viewTransition:s})}},[c,o,u,r,n,t,e,a,i,s])}function m2(e){sn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=p.useRef(ev(e)),r=p.useRef(!1),n=ha(),a=p.useMemo(()=>C5(n.search,r.current?null:t.current),[n.search]),i=Yo(),s=p.useCallback((o,c)=>{const u=ev(typeof o=="function"?o(new URLSearchParams(a)):o);r.current=!0,i("?"+u,c)},[i,a]);return[a,s]}var X5=0,J5=()=>`__${String(++X5)}__`;function Q5(){let{router:e}=p2("useSubmit"),{basename:t}=p.useContext(Yn),r=g5();return p.useCallback(async(n,a={})=>{let{action:i,method:s,encType:o,formData:c,body:u}=O5(n,t);if(a.navigate===!1){let d=a.fetcherKey||J5();await e.fetch(d,r,a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||s,formEncType:a.encType||o,flushSync:a.flushSync})}else await e.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||s,formEncType:a.encType||o,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,r])}function Z5(e,{relative:t}={}){let{basename:r}=p.useContext(Yn),n=p.useContext(Xn);dt(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...Hc(e||".",{relative:t})},s=ha();if(e==null){i.search=s.search;let o=new URLSearchParams(i.search),c=o.getAll("index");if(c.some(d=>d==="")){o.delete("index"),c.filter(f=>f).forEach(f=>o.append("index",f));let d=o.toString();i.search=d?`?${d}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Sa([r,i.pathname])),vc(i)}function e4(e,{relative:t}={}){let r=p.useContext(a2);dt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=p2("useViewTransitionState"),a=Hc(e,{relative:t});if(!r.isTransitioning)return!1;let i=Aa(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=Aa(r.nextLocation.pathname,n)||r.nextLocation.pathname;return ef(a.pathname,s)!=null||ef(a.pathname,i)!=null}var tv=function(e,t){return tv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},tv(e,t)};function g2(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");tv(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var rf=function(){return rf=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},rf.apply(this,arguments)};function Xo(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function v2(e,t,r,n){var a=arguments.length,i=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(a<3?s(i):a>3?s(t,r,i):s(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function y2(e,t){return function(r,n){t(r,n,e)}}function x2(e,t,r,n,a,i){function s(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=n.kind,c=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f,h=!1,m=r.length-1;m>=0;m--){var g={};for(var y in n)g[y]=y==="access"?{}:n[y];for(var y in n.access)g.access[y]=n.access[y];g.addInitializer=function(x){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(x||null))};var v=(0,r[m])(o==="accessor"?{get:d.get,set:d.set}:d[c],g);if(o==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(f=s(v.get))&&(d.get=f),(f=s(v.set))&&(d.set=f),(f=s(v.init))&&a.unshift(f)}else(f=s(v))&&(o==="field"?a.unshift(f):d[c]=f)}u&&Object.defineProperty(u,n.name,d),h=!0}function b2(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function w2(e){return typeof e=="symbol"?e:"".concat(e)}function _2(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function j2(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function be(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})}function S2(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var _h=Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function N2(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&_h(t,e,r)}function nf(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v0(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function k2(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v0(arguments[t]));return e}function C2(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var i=arguments[t],s=0,o=i.length;s<o;s++,a++)n[a]=i[s];return n}function E2(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Do(e){return this instanceof Do?(this.v=e,this):new Do(e)}function P2(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",s),a[Symbol.asyncIterator]=function(){return this},a;function s(m){return function(g){return Promise.resolve(g).then(m,f)}}function o(m,g){n[m]&&(a[m]=function(y){return new Promise(function(v,x){i.push([m,y,v,x])>1||c(m,y)})},g&&(a[m]=g(a[m])))}function c(m,g){try{u(n[m](g))}catch(y){h(i[0][3],y)}}function u(m){m.value instanceof Do?Promise.resolve(m.value.v).then(d,f):h(i[0][2],m)}function d(m){c("next",m)}function f(m){c("throw",m)}function h(m,g){m(g),i.shift(),i.length&&c(i[0][0],i[0][1])}}function O2(e){var t,r;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,i){t[a]=e[a]?function(s){return(r=!r)?{value:Do(e[a](s)),done:!1}:i?i(s):s}:i}}function A2(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof nf=="function"?nf(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(s){return new Promise(function(o,c){s=e[i](s),a(o,c,s.done,s.value)})}}function a(i,s,o,c){Promise.resolve(c).then(function(u){i({value:u,done:o})},s)}}function T2(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var t4=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},rv=function(e){return rv=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},rv(e)};function D2(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=rv(e),n=0;n<r.length;n++)r[n]!=="default"&&_h(t,e,r[n]);return t4(t,e),t}function I2(e){return e&&e.__esModule?e:{default:e}}function R2(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function M2(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function $2(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function L2(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var r4=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function F2(e){function t(i){e.error=e.hasError?new r4(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function a(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(a,function(s){return t(s),a()})}else n|=1}catch(s){t(s)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function B2(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,i,s){return n?t?".jsx":".js":a&&(!i||!s)?r:a+i+"."+s.toLowerCase()+"js"}):e}const n4={__extends:g2,__assign:rf,__rest:Xo,__decorate:v2,__param:y2,__esDecorate:x2,__runInitializers:b2,__propKey:w2,__setFunctionName:_2,__metadata:j2,__awaiter:be,__generator:S2,__createBinding:_h,__exportStar:N2,__values:nf,__read:v0,__spread:k2,__spreadArrays:C2,__spreadArray:E2,__await:Do,__asyncGenerator:P2,__asyncDelegator:O2,__asyncValues:A2,__makeTemplateObject:T2,__importStar:D2,__importDefault:I2,__classPrivateFieldGet:R2,__classPrivateFieldSet:M2,__classPrivateFieldIn:$2,__addDisposableResource:L2,__disposeResources:F2,__rewriteRelativeImportExtension:B2},a4=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:L2,get __assign(){return rf},__asyncDelegator:O2,__asyncGenerator:P2,__asyncValues:A2,__await:Do,__awaiter:be,__classPrivateFieldGet:R2,__classPrivateFieldIn:$2,__classPrivateFieldSet:M2,__createBinding:_h,__decorate:v2,__disposeResources:F2,__esDecorate:x2,__exportStar:N2,__extends:g2,__generator:S2,__importDefault:I2,__importStar:D2,__makeTemplateObject:T2,__metadata:j2,__param:y2,__propKey:w2,__read:v0,__rest:Xo,__rewriteRelativeImportExtension:B2,__runInitializers:b2,__setFunctionName:_2,__spread:k2,__spreadArray:E2,__spreadArrays:C2,__values:nf,default:n4},Symbol.toStringTag,{value:"Module"})),i4=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class y0 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class s4 extends y0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Lw extends y0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Fw extends y0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var nv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(nv||(nv={}));class o4{constructor(t,{headers:r={},customFetch:n,region:a=nv.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=i4(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return be(this,arguments,void 0,function*(r,n={}){var a;let i,s;try{const{headers:o,method:c,body:u,signal:d,timeout:f}=n;let h={},{region:m}=n;m||(m=this.region);const g=new URL(`${this.url}/${r}`);m&&m!=="any"&&(h["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let y;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(h["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(h["Content-Type"]="application/json",y=JSON.stringify(u)):y=u;let v=d;f&&(s=new AbortController,i=setTimeout(()=>s.abort(),f),d?(v=s.signal,d.addEventListener("abort",()=>s.abort())):v=s.signal);const x=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),o),body:y,signal:v}).catch(j=>{throw new s4(j)}),w=x.headers.get("x-relay-error");if(w&&w==="true")throw new Lw(x);if(!x.ok)throw new Fw(x);let b=((a=x.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),_;return b==="application/json"?_=yield x.json():b==="application/octet-stream"||b==="application/pdf"?_=yield x.blob():b==="text/event-stream"?_=x:b==="multipart/form-data"?_=yield x.formData():_=yield x.text(),{data:_,error:null,response:x}}catch(o){return{data:null,error:o,response:o instanceof Fw||o instanceof Lw?o.context:void 0}}finally{i&&clearTimeout(i)}})}}var wr={};const Jo=nI(a4);var Mu={},$u={},Lu={},Fu={},Bu={},Uu={},Bw;function U2(){if(Bw)return Uu;Bw=1,Object.defineProperty(Uu,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Uu.default=e,Uu}var Uw;function z2(){if(Uw)return Bu;Uw=1,Object.defineProperty(Bu,"__esModule",{value:!0});const t=Jo.__importDefault(U2());class r{constructor(a){var i,s;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(i=a.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=a.signal,this.isMaybeSingle=(s=a.isMaybeSingle)!==null&&s!==void 0?s:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=new Headers(this.headers),this.headers.set(a,i),this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let o=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,f,h;let m=null,g=null,y=null,v=c.status,x=c.statusText;if(c.ok){if(this.method!=="HEAD"){const j=await c.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?g=j:g=JSON.parse(j))}const b=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),_=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");b&&_&&_.length>1&&(y=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(m={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,y=null,v=406,x="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const b=await c.text();try{m=JSON.parse(b),Array.isArray(m)&&c.status===404&&(g=[],m=null,v=200,x="OK")}catch{c.status===404&&b===""?(v=204,x="No Content"):m={message:b}}if(m&&this.isMaybeSingle&&(!((h=m==null?void 0:m.details)===null||h===void 0)&&h.includes("0 rows"))&&(m=null,v=200,x="OK"),m&&this.shouldThrowOnError)throw new t.default(m)}return{error:m,data:g,count:y,status:v,statusText:x}});return this.shouldThrowOnError||(o=o.catch(c=>{var u,d,f,h,m,g;let y="";const v=c==null?void 0:c.cause;if(v){const x=(u=v==null?void 0:v.message)!==null&&u!==void 0?u:"",w=(d=v==null?void 0:v.code)!==null&&d!==void 0?d:"";y=`${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"FetchError"}: ${c==null?void 0:c.message}`,y+=`

Caused by: ${(h=v==null?void 0:v.name)!==null&&h!==void 0?h:"Error"}: ${x}`,w&&(y+=` (${w})`),v!=null&&v.stack&&(y+=`
${v.stack}`)}else y=(m=c==null?void 0:c.stack)!==null&&m!==void 0?m:"";return{error:{message:`${(g=c==null?void 0:c.name)!==null&&g!==void 0?g:"FetchError"}: ${c==null?void 0:c.message}`,details:y,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(a,i)}returns(){return this}overrideTypes(){return this}}return Bu.default=r,Bu}var zw;function W2(){if(zw)return Fu;zw=1,Object.defineProperty(Fu,"__esModule",{value:!0});const t=Jo.__importDefault(z2());class r extends t.default{select(a){let i=!1;const s=(a??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:s,foreignTable:o,referencedTable:c=o}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${a}.${i?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:s=i}={}){const o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${a}`),this}range(a,i,{foreignTable:s,referencedTable:o=s}={}){const c=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(u,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:s=!1,buffers:o=!1,wal:c=!1,format:u="text"}={}){var d;const f=[a?"analyze":null,i?"verbose":null,s?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),h=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${h}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Fu.default=r,Fu}var Ww;function x0(){if(Ww)return Lu;Ww=1,Object.defineProperty(Lu,"__esModule",{value:!0});const t=Jo.__importDefault(W2()),r=new RegExp("[,()]");class n extends t.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${u}fts${d}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return Lu.default=n,Lu}var Kw;function K2(){if(Kw)return $u;Kw=1,Object.defineProperty($u,"__esModule",{value:!0});const t=Jo.__importDefault(x0());class r{constructor(a,{headers:i={},schema:s,fetch:o}){this.url=a,this.headers=new Headers(i),this.schema=s,this.fetch=o}select(a,i){const{head:s=!1,count:o}=i??{},c=s?"HEAD":"GET";let u=!1;const d=(a??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",d),o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:s=!0}={}){var o;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const u=a.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:s=!1,count:o,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const f=a.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(f.length>0){const h=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(a,{count:i}={}){var s;const o="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:a}={}){var i;const s="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return $u.default=r,$u}var Hw;function l4(){if(Hw)return Mu;Hw=1,Object.defineProperty(Mu,"__esModule",{value:!0});const e=Jo,t=e.__importDefault(K2()),r=e.__importDefault(x0());class n{constructor(i,{headers:s={},schema:o,fetch:c}={}){this.url=i,this.headers=new Headers(s),this.schemaName=o,this.fetch=c}from(i){const s=new URL(`${this.url}/${i}`);return new t.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,s={},{head:o=!1,get:c=!1,count:u}={}){var d;let f;const h=new URL(`${this.url}/rpc/${i}`);let m;o||c?(f=o?"HEAD":"GET",Object.entries(s).filter(([y,v])=>v!==void 0).map(([y,v])=>[y,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([y,v])=>{h.searchParams.append(y,v)})):(f="POST",m=s);const g=new Headers(this.headers);return u&&g.set("Prefer",`count=${u}`),new r.default({method:f,url:h,headers:g,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Mu.default=n,Mu}Object.defineProperty(wr,"__esModule",{value:!0});var H2=wr.PostgrestError=tC=wr.PostgrestBuilder=Z2=wr.PostgrestTransformBuilder=J2=wr.PostgrestFilterBuilder=Y2=wr.PostgrestQueryBuilder=V2=wr.PostgrestClient=void 0;const Qo=Jo,q2=Qo.__importDefault(l4());var V2=wr.PostgrestClient=q2.default;const G2=Qo.__importDefault(K2());var Y2=wr.PostgrestQueryBuilder=G2.default;const X2=Qo.__importDefault(x0());var J2=wr.PostgrestFilterBuilder=X2.default;const Q2=Qo.__importDefault(W2());var Z2=wr.PostgrestTransformBuilder=Q2.default;const eC=Qo.__importDefault(z2());var tC=wr.PostgrestBuilder=eC.default;const rC=Qo.__importDefault(U2());H2=wr.PostgrestError=rC.default;var nC=wr.default={PostgrestClient:q2.default,PostgrestQueryBuilder:G2.default,PostgrestFilterBuilder:X2.default,PostgrestTransformBuilder:Q2.default,PostgrestBuilder:eC.default,PostgrestError:rC.default};const c4=BS({__proto__:null,get PostgrestBuilder(){return tC},get PostgrestClient(){return V2},get PostgrestError(){return H2},get PostgrestFilterBuilder(){return J2},get PostgrestQueryBuilder(){return Y2},get PostgrestTransformBuilder(){return Z2},default:nC},[wr]),{PostgrestClient:u4,PostgrestQueryBuilder:Aee,PostgrestFilterBuilder:Tee,PostgrestTransformBuilder:Dee,PostgrestBuilder:Iee,PostgrestError:Ree}=nC||c4;class d4{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const f4="2.83.0",h4=`realtime-js/${f4}`,aC="1.0.0",p4="2.0.0",qw=aC,av=1e4,m4=1e3,g4=100;var es;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(es||(es={}));var $t;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})($t||($t={}));var pn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(pn||(pn={}));var iv;(function(e){e.websocket="websocket"})(iv||(iv={}));var ts;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ts||(ts={}));class v4{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(t,r){if(this._isArrayBuffer(t.payload))return r(this._binaryEncodePush(t));if(t.event===this.BROADCAST&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodePush(t){var r,n;const{event:a,topic:i,payload:s}=t,o=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",u=this.META_LENGTH+c.length+o.length+i.length+a.length,d=new ArrayBuffer(this.HEADER_LENGTH+u);let f=new DataView(d),h=0;f.setUint8(h++,this.KINDS.push),f.setUint8(h++,c.length),f.setUint8(h++,o.length),f.setUint8(h++,i.length),f.setUint8(h++,a.length),Array.from(c,g=>f.setUint8(h++,g.charCodeAt(0))),Array.from(o,g=>f.setUint8(h++,g.charCodeAt(0))),Array.from(i,g=>f.setUint8(h++,g.charCodeAt(0))),Array.from(a,g=>f.setUint8(h++,g.charCodeAt(0)));var m=new Uint8Array(d.byteLength+s.byteLength);return m.set(new Uint8Array(d),0),m.set(new Uint8Array(s),d.byteLength),m.buffer}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n,a,i;const s=t.topic,o=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",u=t.payload.event,d=(i=(a=t.payload)===null||a===void 0?void 0:a.payload)!==null&&i!==void 0?i:new ArrayBuffer(0),f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+s.length+u.length,h=new ArrayBuffer(this.HEADER_LENGTH+f);let m=new DataView(h),g=0;m.setUint8(g++,this.KINDS.userBroadcastPush),m.setUint8(g++,c.length),m.setUint8(g++,o.length),m.setUint8(g++,s.length),m.setUint8(g++,u.length),m.setUint8(g++,this.BINARY_ENCODING),Array.from(c,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(o,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(s,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(u,v=>m.setUint8(g++,v.charCodeAt(0)));var y=new Uint8Array(h.byteLength+d.byteLength);return y.set(new Uint8Array(h),0),y.set(new Uint8Array(d),h.byteLength),y.buffer}_encodeJsonUserBroadcastPush(t){var r,n,a,i;const s=t.topic,o=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",u=t.payload.event,d=(i=(a=t.payload)===null||a===void 0?void 0:a.payload)!==null&&i!==void 0?i:{},h=new TextEncoder().encode(JSON.stringify(d)).buffer,m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+s.length+u.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let y=new DataView(g),v=0;y.setUint8(v++,this.KINDS.userBroadcastPush),y.setUint8(v++,c.length),y.setUint8(v++,o.length),y.setUint8(v++,s.length),y.setUint8(v++,u.length),y.setUint8(v++,this.JSON_ENCODING),Array.from(c,w=>y.setUint8(v++,w.charCodeAt(0))),Array.from(o,w=>y.setUint8(v++,w.charCodeAt(0))),Array.from(s,w=>y.setUint8(v++,w.charCodeAt(0))),Array.from(u,w=>y.setUint8(v++,w.charCodeAt(0)));var x=new Uint8Array(g.byteLength+h.byteLength);return x.set(new Uint8Array(g),0),x.set(new Uint8Array(h),g.byteLength),x.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,i,s,o,c]=n;return r({join_ref:a,ref:i,topic:s,event:o,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.push:return this._decodePush(t,r,a);case this.KINDS.reply:return this._decodeReply(t,r,a);case this.KINDS.broadcast:return this._decodeBroadcast(t,r,a);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodePush(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),s=r.getUint8(3);let o=this.HEADER_LENGTH+this.META_LENGTH-1;const c=n.decode(t.slice(o,o+a));o=o+a;const u=n.decode(t.slice(o,o+i));o=o+i;const d=n.decode(t.slice(o,o+s));o=o+s;const f=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{join_ref:c,ref:null,topic:u,event:d,payload:f}}_decodeReply(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),s=r.getUint8(3),o=r.getUint8(4);let c=this.HEADER_LENGTH+this.META_LENGTH;const u=n.decode(t.slice(c,c+a));c=c+a;const d=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+s));c=c+s;const h=n.decode(t.slice(c,c+o));c=c+o;const m=JSON.parse(n.decode(t.slice(c,t.byteLength))),g={status:h,response:m};return{join_ref:u,ref:d,topic:f,event:pn.reply,payload:g}}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let s=this.HEADER_LENGTH+2;const o=n.decode(t.slice(s,s+a));s=s+a;const c=n.decode(t.slice(s,s+i));s=s+i;const u=JSON.parse(n.decode(t.slice(s,t.byteLength)));return{join_ref:null,ref:null,topic:o,event:c,payload:u}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),s=r.getUint8(3),o=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+a));c=c+a;const d=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+s));c=c+s;const h=t.slice(c,t.byteLength),m=o===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,g={type:this.BROADCAST,event:d,payload:m};return s>0&&(g.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST,payload:g}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class iC{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var et;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(et||(et={}));const Vw=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,s)=>(i[s]=y4(s,e,t,a),i),{}):{}},y4=(e,t,r,n)=>{const a=t.find(o=>o.name===e),i=a==null?void 0:a.type,s=r[e];return i&&!n.includes(i)?sC(i,s):sv(s)},sC=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return _4(t,r)}switch(e){case et.bool:return x4(t);case et.float4:case et.float8:case et.int2:case et.int4:case et.int8:case et.numeric:case et.oid:return b4(t);case et.json:case et.jsonb:return w4(t);case et.timestamp:return j4(t);case et.abstime:case et.date:case et.daterange:case et.int4range:case et.int8range:case et.money:case et.reltime:case et.text:case et.time:case et.timestamptz:case et.timetz:case et.tsrange:case et.tstzrange:return sv(t);default:return sv(t)}},sv=e=>e,x4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},b4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},w4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},_4=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const s=e.slice(1,r);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(o=>sC(t,o))}return e},j4=e=>typeof e=="string"?e.replace(" ","T"):e,oC=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class xm{constructor(t,r,n={},a=av){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Gw;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Gw||(Gw={}));class Gl{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:s,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gl.syncState(this.state,a,i,s),this.pendingDiffs.forEach(c=>{this.state=Gl.syncDiff(this.state,c,i,s)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:s,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Gl.syncDiff(this.state,a,i,s),o())}),this.onJoin((a,i,s)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:s})}),this.onLeave((a,i,s)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),s=this.transformState(r),o={},c={};return this.map(i,(u,d)=>{s[u]||(c[u]=d)}),this.map(s,(u,d)=>{const f=i[u];if(f){const h=d.map(v=>v.presence_ref),m=f.map(v=>v.presence_ref),g=d.filter(v=>m.indexOf(v.presence_ref)<0),y=f.filter(v=>h.indexOf(v.presence_ref)<0);g.length>0&&(o[u]=g),y.length>0&&(c[u]=y)}else o[u]=d}),this.syncDiff(i,{joins:o,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(o,c)=>{var u;const d=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(c),d.length>0){const f=t[o].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[o].unshift(...h)}n(o,d,c)}),this.map(s,(o,c)=>{let u=t[o];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[o]=u,a(o,u,c),u.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Yw;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Yw||(Yw={}));var Yl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Yl||(Yl={}));var ma;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ma||(ma={}));class b0{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=$t.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new xm(this,pn.join,this.params,this.timeout),this.rejoinTimer=new iC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=$t.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=$t.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pn.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Gl(this),this.broadcastEndpointURL=oC(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==$t.closed){const{config:{broadcast:s,presence:o,private:c}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[Yl.PRESENCE]&&this.bindings[Yl.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},h={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(ma.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(ma.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket.setAuth(),m===void 0){t==null||t(ma.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,v=(g=y==null?void 0:y.length)!==null&&g!==void 0?g:0,x=[];for(let w=0;w<v;w++){const b=y[w],{filter:{event:_,schema:j,table:S,filter:N}}=b,k=m&&m[w];if(k&&k.event===_&&k.schema===j&&k.table===S&&k.filter===N)x.push(Object.assign(Object.assign({},b),{id:k.id}));else{this.unsubscribe(),this.state=$t.errored,t==null||t(ma.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(ma.SUBSCRIBED);return}}).receive("error",m=>{this.state=$t.errored,t==null||t(ma.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ma.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===$t.joined&&t===Yl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const u=await o.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:s}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var s,o,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(s=this.params)===null||s===void 0?void 0:s.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=$t.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new xm(this,pn.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=$t.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),s=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),s}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new xm(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>g4){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const s=t.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=pn;if(n&&[o,c,u,d].indexOf(s)>=0&&n!==this._joinRef())return;let h=this._onMessage(s,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var g,y,v;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((v=(y=m.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===s}).map(m=>m.callback(h,n)):(i=this.bindings[s])===null||i===void 0||i.filter(m=>{var g,y,v,x,w,b;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in m){const _=m.id,j=(g=m.filter)===null||g===void 0?void 0:g.event;return _&&((y=r.ids)===null||y===void 0?void 0:y.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const _=(w=(x=m==null?void 0:m.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return _==="*"||_===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===s}).map(m=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:y,table:v,commit_timestamp:x,type:w,errors:b}=g;h=Object.assign(Object.assign({},{schema:y,table:v,commit_timestamp:x,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(g))}m.callback(h,n)})}_isClosed(){return this.state===$t.closed}_isJoined(){return this.state===$t.joined}_isJoining(){return this.state===$t.joining}_isLeaving(){return this.state===$t.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&b0.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(pn.close,{},t)}_onError(t){this._on(pn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=$t.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Vw(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Vw(t.columns,t.old_record)),r}}const bm=()=>{},zu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},S4=[1e3,2e3,5e3,1e4],N4=1e4,k4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class C4{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=av,this.transport=null,this.heartbeatIntervalMs=zu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=bm,this.ref=0,this.reconnectTimer=null,this.vsn=qw,this.logger=bm,this.conn=null,this.sendBuffer=[],this.serializer=new v4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${iv.websocket}`,this.httpEndpoint=oC(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=d4.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case es.connecting:return ts.Connecting;case es.open:return ts.Open;case es.closing:return ts.Closing;default:return ts.Closed}}isConnected(){return this.connectionState()===ts.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new b0(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,s=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(m4,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},zu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:s}=r,o=s?`(${s})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${o}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,s)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===es.open||this.conn.readyState===es.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(pn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([k4],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:h4};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(pn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new iC(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},zu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,s,o,c,u,d,f,h,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:av,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:zu.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:bm,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:qw,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:g=>S4[g-1]||N4,this.vsn){case aC:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(g,y)=>y(JSON.stringify(g)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(g,y)=>y(JSON.parse(g));break;case p4:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class w0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function vt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class E4 extends w0{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ov extends w0{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const _0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),P4=()=>Response,lv=e=>{if(Array.isArray(e))return e.map(r=>lv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=lv(n)}),t},O4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},wm=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},A4=(e,t,r)=>be(void 0,void 0,void 0,function*(){const n=yield P4();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,s=(a==null?void 0:a.statusCode)||i+"";t(new E4(wm(a),i,s))}).catch(a=>{t(new ov(wm(a),a))}):t(new ov(wm(e),e))}),T4=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(O4(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function qc(e,t,r,n,a,i){return be(this,void 0,void 0,function*(){return new Promise((s,o)=>{e(r,T4(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>A4(c,o,n))})})}function yc(e,t,r,n){return be(this,void 0,void 0,function*(){return qc(e,"GET",t,r,n)})}function Rn(e,t,r,n,a){return be(this,void 0,void 0,function*(){return qc(e,"POST",t,n,a,r)})}function cv(e,t,r,n,a){return be(this,void 0,void 0,function*(){return qc(e,"PUT",t,n,a,r)})}function D4(e,t,r,n){return be(this,void 0,void 0,function*(){return qc(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function j0(e,t,r,n,a){return be(this,void 0,void 0,function*(){return qc(e,"DELETE",t,n,a,r)})}class I4{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return be(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vt(t))return{data:null,error:t};throw t}})}}var lC;class R4{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[lC]="BlobDownloadBuilder",this.promise=null}asStream(){return new I4(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return be(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vt(t))return{data:null,error:t};throw t}})}}lC=Symbol.toStringTag;const M4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Xw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $4{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=_0(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return be(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},Xw),a);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",s.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=n,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!s.duplex&&(s.duplex="half")),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(t=="PUT"?cv:Rn)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:o},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vt(i))return{data:null,error:i};throw i}})}upload(t,r,n){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return be(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),s=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${s}`);o.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Xw.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield cv(this.fetch,o.toString(),c,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(vt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return be(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield Rn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),s=new URL(this.url+i.url),o=s.searchParams.get("token");if(!o)throw new w0("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}update(t,r,n){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return be(this,void 0,void 0,function*(){try{return{data:yield Rn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(vt(a))return{data:null,error:a};throw a}})}copy(t,r,n){return be(this,void 0,void 0,function*(){try{return{data:{path:(yield Rn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(vt(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return be(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Rn(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(vt(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return be(this,void 0,void 0,function*(){try{const a=yield Rn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(vt(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),s=i?`?${i}`:"",o=this._getFinalPath(t),c=()=>yc(this.fetch,`${this.url}/${a}/${o}${s}`,{headers:this.headers,noResolveJson:!0});return new R4(c,this.shouldThrowOnError)}info(t){return be(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield yc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:lv(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}exists(t){return be(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield D4(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n)&&n instanceof ov){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(t){return be(this,void 0,void 0,function*(){try{return{data:yield j0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vt(r))return{data:null,error:r};throw r}})}list(t,r,n){return be(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},M4),r),{prefix:t||""});return{data:yield Rn(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(vt(a))return{data:null,error:a};throw a}})}listV2(t,r){return be(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Rn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const cC="2.83.0",uC={"X-Client-Info":`storage-js/${cC}`};class L4{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uC),r),this.fetch=_0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return be(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield yc(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vt(r))return{data:null,error:r};throw r}})}getBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield yc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vt(r))return{data:null,error:r};throw r}})}createBucket(t){return be(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Rn(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(vt(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return be(this,void 0,void 0,function*(){try{return{data:yield cv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield Rn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield j0(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vt(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class F4{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uC),r),this.fetch=_0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield Rn(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vt(r))return{data:null,error:r};throw r}})}listBuckets(t){return be(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield yc(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield j0(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vt(r))return{data:null,error:r};throw r}})}}const S0={"X-Client-Info":`storage-js/${cC}`,"Content-Type":"application/json"};class dC extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Qr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class _m extends dC{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class B4 extends dC{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var Jw;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Jw||(Jw={}));const N0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),U4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Qw=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),z4=(e,t,r)=>be(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e.status||500,i=e;if(typeof i.json=="function")i.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||a+"";t(new _m(Qw(s),a,o))}).catch(()=>{const s=a+"",o=i.statusText||`HTTP ${a} error`;t(new _m(o,a,s))});else{const s=a+"",o=i.statusText||`HTTP ${a} error`;t(new _m(o,a,s))}}else t(new B4(Qw(e),e))}),W4=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(U4(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function K4(e,t,r,n,a,i){return be(this,void 0,void 0,function*(){return new Promise((s,o)=>{e(r,W4(t,n,a,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>s(c)).catch(c=>z4(c,o,n))})})}function Zr(e,t,r,n,a){return be(this,void 0,void 0,function*(){return K4(e,"POST",t,n,a,r)})}class H4{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},S0),r),this.fetch=N0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return be(this,void 0,void 0,function*(){try{return{data:(yield Zr(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qr(r))return{data:null,error:r};throw r}})}getIndex(t,r){return be(this,void 0,void 0,function*(){try{return{data:yield Zr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qr(n))return{data:null,error:n};throw n}})}listIndexes(t){return be(this,void 0,void 0,function*(){try{return{data:yield Zr(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qr(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return be(this,void 0,void 0,function*(){try{return{data:(yield Zr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qr(n))return{data:null,error:n};throw n}})}}class q4{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},S0),r),this.fetch=N0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return be(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Zr(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qr(r))return{data:null,error:r};throw r}})}getVectors(t){return be(this,void 0,void 0,function*(){try{return{data:yield Zr(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qr(r))return{data:null,error:r};throw r}})}listVectors(t){return be(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Zr(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qr(r))return{data:null,error:r};throw r}})}queryVectors(t){return be(this,void 0,void 0,function*(){try{return{data:yield Zr(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qr(r))return{data:null,error:r};throw r}})}deleteVectors(t){return be(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Zr(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qr(r))return{data:null,error:r};throw r}})}}class V4{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},S0),r),this.fetch=N0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return be(this,void 0,void 0,function*(){try{return{data:(yield Zr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qr(r))return{data:null,error:r};throw r}})}getBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield Zr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qr(r))return{data:null,error:r};throw r}})}listBuckets(){return be(this,arguments,void 0,function*(t={}){try{return{data:yield Zr(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return be(this,void 0,void 0,function*(){try{return{data:(yield Zr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qr(r))return{data:null,error:r};throw r}})}}class G4 extends V4{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new Y4(this.url,this.headers,t,this.fetch)}}class Y4 extends H4{constructor(t,r,n,a){super(t,r,a),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return be(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return be(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return be(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return be(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new X4(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class X4 extends q4{constructor(t,r,n,a,i){super(t,r,i),this.vectorBucketName=n,this.indexName=a}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return be(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return be(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return be(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return be(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return be(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class J4 extends L4{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new $4(this.url,this.headers,t,this.fetch)}get vectors(){return new G4(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new F4(this.url+"/iceberg",this.headers,this.fetch)}}const Q4="2.83.0";let Ml="";typeof Deno<"u"?Ml="deno":typeof document<"u"?Ml="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ml="react-native":Ml="node";const Z4={"X-Client-Info":`supabase-js-${Ml}/${Q4}`},e$={headers:Z4},t$={schema:"public"},r$={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},n$={},a$=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),i$=()=>Headers,s$=(e,t,r)=>{const n=a$(r),a=i$();return async(i,s)=>{var o;const c=(o=await t())!==null&&o!==void 0?o:e;let u=new a(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},s),{headers:u}))}};function o$(e){return e.endsWith("/")?e:e+"/"}function l$(e,t){var r,n;const{db:a,auth:i,realtime:s,global:o}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),s),storage:{},global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function c$(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(o$(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const fC="2.83.0",Js=30*1e3,uv=3,jm=uv*Js,u$="http://localhost:9999",d$="supabase.auth.token",f$={"X-Client-Info":`gotrue-js/${fC}`},dv="X-Supabase-Api-Version",hC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},h$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,p$=10*60*1e3;class xc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function je(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class m$ extends xc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function g$(e){return je(e)&&e.name==="AuthApiError"}class rs extends xc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Di extends xc{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Vr extends Di{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function v$(e){return je(e)&&e.name==="AuthSessionMissingError"}class Fs extends Di{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Wu extends Di{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ku extends Di{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function y$(e){return je(e)&&e.name==="AuthImplicitGrantRedirectError"}class Zw extends Di{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fv extends Di{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Sm(e){return je(e)&&e.name==="AuthRetryableFetchError"}class e_ extends Di{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class hv extends Di{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const af="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),t_=` 	
\r=`.split(""),x$=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<t_.length;t+=1)e[t_[t].charCodeAt(0)]=-2;for(let t=0;t<af.length;t+=1)e[af[t].charCodeAt(0)]=t;return e})();function r_(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(af[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(af[n]),t.queuedBits-=6}}function pC(e,t,r){const n=x$[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function n_(e){const t=[],r=s=>{t.push(String.fromCodePoint(s))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=s=>{_$(s,n,r)};for(let s=0;s<e.length;s+=1)pC(e.charCodeAt(s),a,i);return t.join("")}function b$(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function w$(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}b$(n,t)}}function _$(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function wo(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)pC(e.charCodeAt(a),r,n);return new Uint8Array(t)}function j$(e){const t=[];return w$(e,r=>t.push(r)),new Uint8Array(t)}function ss(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>r_(a,r,n)),r_(null,r,n),t.join("")}function S$(e){return Math.round(Date.now()/1e3)+e}function N$(){return Symbol("auth-callback")}const ar=()=>typeof window<"u"&&typeof document<"u",Ki={tested:!1,writable:!1},mC=()=>{if(!ar())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ki.tested)return Ki.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ki.tested=!0,Ki.writable=!0}catch{Ki.tested=!0,Ki.writable=!1}return Ki.writable};function k$(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const gC=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),C$=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Qs=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Hi=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ti=async(e,t)=>{await e.removeItem(t)};class jh{constructor(){this.promise=new jh.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}jh.promiseConstructor=Promise;function Nm(e){const t=e.split(".");if(t.length!==3)throw new hv("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!h$.test(t[n]))throw new hv("JWT not in base64url format");return{header:JSON.parse(n_(t[0])),payload:JSON.parse(n_(t[1])),signature:wo(t[2]),raw:{header:t[0],payload:t[1]}}}async function E$(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function P$(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const s=await e(i);if(!t(i,null,s)){n(s);return}}catch(s){if(!t(i,s)){a(s);return}}})()})}function O$(e){return("0"+e.toString(16)).substr(-2)}function A$(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,O$).join("")}async function T$(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function D$(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await T$(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bs(e,t,r=!1){const n=A$();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Qs(e,`${t}-code-verifier`,a);const i=await D$(n);return[i,n===i?"plain":"s256"]}const I$=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function R$(e){const t=e.headers.get(dv);if(!t||!t.match(I$))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function M$(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function $$(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const L$=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Us(e){if(!L$.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function km(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function F$(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function a_(e){return JSON.parse(JSON.stringify(e))}const Xi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),B$=[502,503,504];async function i_(e){var t;if(!C$(e))throw new fv(Xi(e),0);if(B$.includes(e.status))throw new fv(Xi(e),e.status);let r;try{r=await e.json()}catch(i){throw new rs(Xi(i),i)}let n;const a=R$(e);if(a&&a.getTime()>=hC["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new e_(Xi(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Vr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0))throw new e_(Xi(r),e.status,r.weak_password.reasons);throw new m$(Xi(r),e.status||500,n)}const U$=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Ae(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[dv]||(i[dv]=hC["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const s=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(s.redirect_to=n.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await z$(e,t,r+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function z$(e,t,r,n,a,i){const s=U$(t,n,a,i);let o;try{o=await e(r,Object.assign({},s))}catch(c){throw console.error(c),new fv(Xi(c),0)}if(o.ok||await i_(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await i_(c)}}function Dn(e){var t;let r=null;H$(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=S$(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function s_(e){const t=Dn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ci(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function W$(e){return{data:e,error:null}}function K$(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,s=Xo(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},s);return{data:{properties:o,user:c},error:null}}function o_(e){return e}function H$(e){return e.access_token&&e.refresh_token&&e.expires_in}const Cm=["global","local","others"];class q${constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=gC(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Cm[0]){if(Cm.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Cm.join(", ")}`);try{return await Ae(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ci})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Xo(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:K$,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(je(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Ae(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ci})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,s,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:o_});if(d.error)throw d.error;const f=await d.json(),h=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,m=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=y}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(je(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Us(t);try{return await Ae(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ci})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Us(t);try{return await Ae(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:ci})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Us(t);try{return await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:ci})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Us(t.userId);try{const{data:r,error:n}=await Ae(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(je(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Us(t.userId),Us(t.id);try{return{data:await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,s,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ae(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:o_});if(d.error)throw d.error;const f=await d.json(),h=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,m=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=y}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(je(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Ae(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(je(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Ae(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(je(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Ae(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(je(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ae(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Ae(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(je(r))return{data:null,error:r};throw r}}}function l_(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const zs={debug:!!(globalThis&&mC()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class vC extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class V$ extends vC{}async function G$(e,t,r){zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),zs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new V$(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(zs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Y$(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function yC(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function X$(e){return parseInt(e,16)}function J$(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function Q$(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:s,notBefore:o,requestId:c,resources:u,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=yC(e.address),g=d?`${d}://${n}`:n,y=e.statement?`${e.statement}
`:"",v=`${g} wants you to sign in with your Ethereum account:
${m}

${y}`;let x=`URI: ${f}
Version: ${h}
Chain ID: ${r}${s?`
Nonce: ${s}`:""}
Issued At: ${i.toISOString()}`;if(a&&(x+=`
Expiration Time: ${a.toISOString()}`),o&&(x+=`
Not Before: ${o.toISOString()}`),c&&(x+=`
Request ID: ${c}`),u){let w=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);w+=`
- ${b}`}x+=w}return`${v}
${x}`}class Tt extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class sf extends Tt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function Z$({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Tt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Tt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Tt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Tt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Tt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Tt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new Tt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Tt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(xC(s)){if(i.rp.id!==s)return new Tt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Tt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Tt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Tt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Tt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function e3({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Tt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Tt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(xC(n)){if(r.rpId!==n)return new Tt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Tt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Tt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Tt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class t3{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const r3=new t3;function n3(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=Xo(e,["challenge","user","excludeCredentials"]),i=wo(t).buffer,s=Object.assign(Object.assign({},r),{id:wo(r.id).buffer}),o=Object.assign(Object.assign({},a),{challenge:i,user:s});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];o.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:wo(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function a3(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Xo(e,["challenge","allowCredentials"]),a=wo(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let s=0;s<r.length;s++){const o=r[s];i.allowCredentials[s]=Object.assign(Object.assign({},o),{id:wo(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return i}function i3(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:ss(new Uint8Array(e.response.attestationObject)),clientDataJSON:ss(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function s3(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ss(new Uint8Array(a.authenticatorData)),clientDataJSON:ss(new Uint8Array(a.clientDataJSON)),signature:ss(new Uint8Array(a.signature)),userHandle:a.userHandle?ss(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function xC(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function c_(){var e,t;return!!(ar()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function o3(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new sf("Browser returned unexpected credential type",t)}:{data:null,error:new sf("Empty credential response",t)}}catch(t){return{data:null,error:Z$({error:t,options:e})}}}async function l3(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new sf("Browser returned unexpected credential type",t)}:{data:null,error:new sf("Empty credential response",t)}}catch(t){return{data:null,error:e3({error:t,options:e})}}}const c3={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},u3={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function of(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const s=a[i];if(s!==void 0)if(Array.isArray(s))n[i]=s;else if(r(s))n[i]=s;else if(t(s)){const o=n[i];t(o)?n[i]=of(o,s):n[i]=of(s)}else n[i]=s}return n}function d3(e,t){return of(c3,e,t||{})}function f3(e,t){return of(u3,e,t||{})}class h3{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){try{const{data:s,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!s)return{data:null,error:o};const c=a??r3.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=d3(s.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:f}=await o3({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=f3(s.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:f}=await l3(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(s){return je(s)?{data:null,error:s}:{data:null,error:new rs("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new xc("rpId is required for WebAuthn authentication")};try{if(!c_())return{data:null,error:new rs("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!s)return{data:null,error:o};const{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(s){return je(s)?{data:null,error:s}:{data:null,error:new rs("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new xc("rpId is required for WebAuthn registration")};try{if(!c_())return{data:null,error:new rs("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:o};const{data:c,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(s){return je(s)?{data:null,error:s}:{data:null,error:new rs("Unexpected error in register",s)}}}}Y$();const p3={url:u$,storageKey:d$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:f$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function u_(e,t,r){return await r()}const Ws={};class bc{get jwks(){var t,r;return(r=(t=Ws[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ws[this.storageKey]=Object.assign(Object.assign({},Ws[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ws[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ws[this.storageKey]=Object.assign(Object.assign({},Ws[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},p3),t);if(this.storageKey=i.storageKey,this.instanceID=(r=bc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,bc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&ar()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new q$({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=gC(i.fetch),this.lock=i.lock||u_,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:ar()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=G$:this.lock=u_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new h3(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:mC()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=l_(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=l_(this.memoryStorage)),ar()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${fC}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(ar()&&(r=k$(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),ar()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),y$(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:s,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return je(r)?this._returnResult({error:r}):this._returnResult({error:new rs("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Dn}),{data:s,error:o}=i;if(o||!s)return this._returnResult({data:{user:null,session:null},error:o});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(je(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await Bs(this.storage,this.storageKey)),i=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:g},xform:Dn})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Dn})}else throw new Wu("You must provide either an email or phone number and a password");const{data:s,error:o}=i;if(o||!s)return this._returnResult({data:{user:null,session:null},error:o});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(je(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:s,options:o}=t;r=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:s_})}else if("phone"in t){const{phone:i,password:s,options:o}=t;r=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:s_})}else throw new Wu("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new Fs;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,s,o,c,u,d,f,h;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:y,wallet:v,statement:x,options:w}=t;let b;if(ar())if(typeof v=="object")b=v;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")b=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=v}const _=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href),j=await b.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=yC(j[0]);let N=(n=w==null?void 0:w.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!N){const C=await b.request({method:"eth_chainId"});N=X$(C)}const k={domain:_.host,address:S,statement:x,uri:_.href,version:"1",chainId:N,nonce:(a=w==null?void 0:w.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(s=(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(o=w==null?void 0:w.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=w==null?void 0:w.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=w==null?void 0:w.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=w==null?void 0:w.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=Q$(k),g=await b.request({method:"personal_sign",params:[J$(m),S]})}try{const{data:y,error:v}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:g},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Dn});if(v)throw v;if(!y||!y.session||!y.user){const x=new Fs;return this._returnResult({data:{user:null,session:null},error:x})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:v})}catch(y){if(je(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(t){var r,n,a,i,s,o,c,u,d,f,h,m;let g,y;if("message"in t)g=t.message,y=t.signature;else{const{chain:v,wallet:x,statement:w,options:b}=t;let _;if(ar())if(typeof x=="object")_=x;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=x}const j=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),w?{statement:w}:null));let N;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")N=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)N=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)g=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),y=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=S}}try{const{data:v,error:x}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:ss(y)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Dn});if(x)throw x;if(!v||!v.session||!v.user){const w=new Fs;return this._returnResult({data:{user:null,session:null},error:w})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:x})}catch(v){if(je(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(t){const r=await Hi(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:s}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Dn});if(await ti(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!i||!i.session||!i.user){const o=new Fs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:s})}catch(i){if(je(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:s}=t,o=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Dn}),{data:c,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Fs;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,i,s;try{if("email"in t){const{email:o,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Bs(this.storage,this.storageKey));const{error:f}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:o,options:c}=t,{data:u,error:d}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(s=c==null?void 0:c.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Wu("You must provide either an email or phone number.")}catch(o){if(je(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:o}=await Ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Dn});if(o)throw o;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,u=s.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(je(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,i,s;try{let o=null,c=null;this.flowType==="pkce"&&([o,c]=await Bs(this.storage,this.storageKey));const u=await Ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:W$});return!((i=u.data)===null||i===void 0)&&i.url&&ar()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if(je(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Vr;const{error:a}=await Ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(je(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:s}=await Ae(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:s,error:o}=await Ae(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:o})}throw new Wu("You must provide either an email or phone number and a type")}catch(r){if(je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Hi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<jm:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const s=await Hi(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=km()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=F$(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ci}):await this._useSession(async r=>{var n,a,i;const{data:s,error:o}=r;if(o)throw o;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vr}:await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:ci})})}catch(r){if(je(r))return v$(r)&&(await this._removeSession(),await ti(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Vr;const s=a.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await Bs(this.storage,this.storageKey));const{data:u,error:d}=await Ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:s.access_token,xform:ci});if(d)throw d;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(n){if(je(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Vr;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:s}=Nm(t.access_token);if(s.exp&&(n=s.exp,a=n<=r),a){const{data:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(je(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:s,error:o}=r;if(o)throw o;t=(n=s.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Vr;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!ar())throw new Ku("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ku(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Zw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ku("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Zw("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:s,expires_in:o,expires_at:c,token_type:u}=t;if(!i||!o||!s||!u)throw new Ku("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let h=d+f;c&&(h=parseInt(c));const m=h-d;m*1e3<=Js&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const g=h-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:y,error:v}=await this._getUser(i);if(v)throw v;const x={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:s,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:t.type},error:null})}catch(n){if(je(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Hi(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const s=(n=a.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:o}=await this.admin.signOut(s,t);if(o&&!(g$(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await ti(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=N$(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Bs(this.storage,this.storageKey,!0));try{return await Ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(je(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var s,o,c,u,d;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ae(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return ar()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(je(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:s,provider:o,token:c,access_token:u,nonce:d}=t,f=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Dn}),{data:h,error:m}=f;return m?this._returnResult({data:{user:null,session:null},error:m}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new Fs}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:m}))}catch(a){if(je(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)throw s;return await Ae(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await P$(async a=>(a>0&&await E$(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Dn})),(a,i)=>{const s=200*Math.pow(2,a);return i&&Sm(i)&&Date.now()+s-n<Js})}catch(n){if(this._debug(r,"error",n),je(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ar()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Hi(this.storage,this.storageKey);if(a&&this.userStorage){let s=await Hi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:a.user},await Qs(this.userStorage,this.storageKey+"-user",s)),a.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:km()}else if(a&&!a.user&&!a.user){const s=await Hi(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(a.user=s.user,await ti(this.storage,this.storageKey+"-user"),await Qs(this.storage,this.storageKey,a)):a.user=km()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<jm;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${jm}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:s}=await this._callRefreshToken(a.refresh_token);s&&(console.error(s),Sm(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:o}=await this._getUser(a.access_token);!o&&(s!=null&&s.user)?(a.user=s.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Vr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new jh;const{data:i,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!i.session)throw new Vr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={data:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),je(i)){const s={data:null,error:i};return Sm(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],s=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(s),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Qs(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=a_(a);await Qs(this.storage,this.storageKey,i)}else{const a=a_(r);await Qs(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await ti(this.storage,this.storageKey),await ti(this.storage,this.storageKey+"-code-verifier"),await ti(this.storage,this.storageKey+"-user"),this.userStorage&&await ti(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ar()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Js);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Js);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Js}ms, refresh threshold is ${uv} ticks`),a<=uv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof vC)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ar()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,s]=await Bs(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(s)}`});a.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await Ae(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await Ae(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?i3(t.webauthn.credential_response):s3(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:c}=await Ae(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const s=await Ae(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(s.error)return s;const{data:o}=s;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:n3(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:a3(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Nm(n.access_token);let s=null;i.aal&&(s=i.aal);let o=s;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const u=i.amr||[];return{data:{currentLevel:s,nextLevel:o,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Ae(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Vr})})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Vr});const s=await Ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&ar()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(je(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Vr});const s=await Ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&ar()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(je(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Ae(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Vr})})}catch(t){if(je(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Ae(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Vr})})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+p$>a)return n;const{data:i,error:s}=await Ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:g}=await this.getSession();if(g||!m.session)return this._returnResult({data:null,error:g});n=m.session.access_token}const{header:a,payload:i,signature:s,raw:{header:o,payload:c}}=Nm(n);r!=null&&r.allowExpired||M$(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:a,signature:s},error:null}}const d=$$(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,s,j$(`${o}.${c}`)))throw new hv("Invalid JWT signature");return{data:{claims:i,header:a,signature:s},error:null}}catch(n){if(je(n))return this._returnResult({data:null,error:n});throw n}}}bc.nextInstanceID={};const m3=bc;class g3 extends m3{constructor(t){super(t)}}class v3{constructor(t,r,n){var a,i,s;this.supabaseUrl=t,this.supabaseKey=r;const o=c$(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:t$,realtime:n$,auth:Object.assign(Object.assign({},r$),{storageKey:c}),global:e$},d=l$(n??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=d.auth)!==null&&s!==void 0?s:{},this.headers,d.global.fetch),this.fetch=s$(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new u4(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new J4(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new o4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:s,flowType:o,lock:c,debug:u,throwOnError:d},f,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new g3({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),f),storageKey:s,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:o,lock:c,debug:u,throwOnError:d,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new C4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const y3=(e,t,r)=>new v3(e,t,r);function x3(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}x3()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const bC="https://gomwhbewjdcllejifdyf.supabase.co",wC="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdvbXdoYmV3amRjbGxlamlmZHlmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM1MTUzNjYsImV4cCI6MjA3OTA5MTM2Nn0.fvIW61htbjtfkT5ZP4FGBTw96KSGZbr9qxSJiMDp-qQ",Em=[!bC,!wC].filter(Boolean);if(Em.length>0){const e=`Missing Supabase environment variable${Em.length>1?"s":""}: ${Em.join(", ")}. Copy .env.example to .env and provide your Supabase project credentials.`;throw new Error(e)}const Y=y3(bC,wC);async function d_(e){const{data:t}=await Y.from("user_settings").select("global_role, workspace_id").eq("user_id",e).maybeSingle(),{data:r}=await Y.from("user_teams").select("team_id, role").eq("user_id",e).maybeSingle();return t?{userId:e,globalRole:t.global_role,teamId:(r==null?void 0:r.team_id)||null,teamRole:(r==null?void 0:r.role)||null,workspaceId:t.workspace_id||null,isActive:t.is_active??!0}:null}async function la(e){const{data:t,error:r}=await Y.rpc("get_accessible_agents");if(!r&&t){const n=t.map(a=>a.user_id);if(n.length)return n}if(e.globalRole==="admin"||e.globalRole==="sales_manager"){const{data:n}=await Y.from("user_settings").select("user_id"),a=n==null?void 0:n.map(i=>i.user_id).filter(Boolean);if(a&&a.length)return a}return[e.userId]}function _C(e){return(e==null?void 0:e.globalRole)==="admin"}function b3(e){return(e==null?void 0:e.teamRole)==="team_lead"||(e==null?void 0:e.globalRole)==="team_lead"}function w3(e){return(e==null?void 0:e.globalRole)==="sales_manager"||(e==null?void 0:e.globalRole)==="admin"}function f_(e){return!!e&&e.globalRole==="admin"}function Ni(e){if(!e)return"";switch(e){case"admin":return"Admin";case"sales_manager":return"Sales Manager";case"team_lead":return"Team Lead";case"agent":return"Agent";default:return""}}function jC(e){return e?["admin","sales_manager","team_lead"].includes(e.globalRole):!1}function _3(e){return(e==null?void 0:e.globalRole)==="admin"}function SC(e){return(e==null?void 0:e.globalRole)==="admin"}const NC=p.createContext(void 0);function j3({children:e}){const[t,r]=p.useState(null),[n,a]=p.useState(null),[i,s]=p.useState(!0);p.useEffect(()=>{Y.auth.getSession().then(async({data:{session:f}})=>{if(r((f==null?void 0:f.user)??null),f!=null&&f.user){const h=await d_(f.user.id);a(h)}s(!1)});const{data:{subscription:d}}=Y.auth.onAuthStateChange((f,h)=>{(async()=>{if(r((h==null?void 0:h.user)??null),h!=null&&h.user){const m=await d_(h.user.id);a(m)}else a(null)})()});return()=>d.unsubscribe()},[]);const o=async(d,f,h,m)=>{if(!m)return{error:{message:"An invite code is required to create an account"}};const{data:g,error:y}=await Y.auth.signUp({email:d,password:f,options:{data:{name:h}}});if(y||!g.user)return{error:y};const{error:v}=await Y.rpc("accept_workspace_invite",{invite_token:m});return v?{error:{message:v.message}}:{error:null}},c=async(d,f)=>{const{error:h}=await Y.auth.signInWithPassword({email:d,password:f});return{error:h}},u=async()=>{await Y.auth.signOut()};return l.jsx(NC.Provider,{value:{user:t,roleInfo:n,loading:i,signUp:o,signIn:c,signOut:u},children:e})}function St(){const e=p.useContext(NC);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var S3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ge=(e,t)=>{const r=p.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:o="",children:c,...u},d)=>p.createElement("svg",{ref:d,...S3,width:a,height:a,stroke:n,strokeWidth:s?Number(i)*24/Number(a):i,className:["lucide",`lucide-${N3(e)}`,o].join(" "),...u},[...t.map(([f,h])=>p.createElement(f,h)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=ge("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=ge("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=ge("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=ge("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=ge("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=ge("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=ge("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=ge("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=ge("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=ge("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=ge("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=ge("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=ge("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=ge("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=ge("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=ge("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=ge("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=ge("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=ge("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=ge("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=ge("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=ge("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=ge("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=ge("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=ge("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=ge("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=ge("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=ge("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=ge("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=ge("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=ge("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=ge("MailPlus",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M16 19h6",key:"xwg31i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=ge("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=ge("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=ge("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=ge("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=ge("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=ge("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=ge("PlugZap",[["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m18 3-4 4h6l-4 4",key:"16psg9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=ge("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=ge("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=ge("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=ge("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=ge("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=ge("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=ge("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=ge("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=ge("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=ge("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=ge("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=ge("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=ge("Trello",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["rect",{width:"3",height:"9",x:"7",y:"7",key:"14n3xi"}],["rect",{width:"3",height:"5",x:"14",y:"7",key:"s4azjd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=ge("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=ge("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=ge("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function tL(){const{user:e,roleInfo:t}=St(),r=Yo(),[n,a]=p.useState(!1),[i,s]=p.useState(""),[o,c]=p.useState([]),[u,d]=p.useState(!1),[f,h]=p.useState(!1),m=p.useRef(null),[g,y]=p.useState([]),[v,x]=p.useState(!1),[w,b]=p.useState(!1),[_,j]=p.useState({}),[S,N]=p.useState([]),[k,C]=p.useState(new Date(0)),[E,O]=p.useState(new Date(0)),[A,q]=p.useState([]),J=p.useCallback(async()=>{let P=Y.from("activity_events").select("id, event_type, actor_id, target_user_id, deal_id, task_id, payload, created_at").order("created_at",{ascending:!1}).limit(10);if(S.length>0){const $=S.join(",");P=P.or(`target_user_id.in.(${$}),actor_id.in.(${$})`)}const{data:V,error:te}=await P;if(!te&&V){const $=V.map(X=>({id:X.id,eventType:X.event_type,actorId:X.actor_id,targetUserId:X.target_user_id,dealId:X.deal_id,taskId:X.task_id,payload:X.payload||{},timestamp:new Date(X.created_at)})).filter(X=>X.timestamp.getTime()>E.getTime());y($),$.some(X=>X.timestamp.getTime()>k.getTime())&&b(!0)}},[S,k,E]);p.useEffect(()=>{(async()=>{if(!t)return;const V=await la(t);q(V.length?V:e?[e.id]:[])})()},[t,e]),p.useEffect(()=>{const P=V=>{m.current&&!m.current.contains(V.target)&&d(!1),V.target.closest("#notification-popover")||x(!1)};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]),p.useEffect(()=>{const V=setTimeout(async()=>{if(!i.trim()||i.length<2){c([]),d(!1);return}h(!0),d(!0);try{let te=Y.from("deals").select("id, client_name, property_address, client_email, client_phone, status, expected_sale_price, user_id").or(`client_name.ilike.%${i}%,property_address.ilike.%${i}%,client_email.ilike.%${i}%,client_phone.ilike.%${i}%`).limit(8);A.length===1?te=te.eq("user_id",A[0]):A.length>1?te=te.in("user_id",A):e!=null&&e.id&&(te=te.eq("user_id",e.id));const{data:$,error:X}=await te;if(X)throw X;c($||[])}catch(te){console.error("Search error:",te),c([])}finally{h(!1)}},300);return()=>clearTimeout(V)},[i,e==null?void 0:e.id,A]),p.useEffect(()=>{(async()=>{try{const{data:V,error:te}=await Y.rpc("get_accessible_agents");if(!te&&V){const $={};V.forEach(X=>{$[X.user_id]=X.display_name||X.email||"Agent"}),j($)}}catch(V){console.error("Error loading agents for notifications",V)}})()},[]),p.useEffect(()=>{if(!t||t.globalRole!=="sales_manager"&&t.globalRole!=="team_lead"&&t.globalRole!=="admin")return;let P=null;return(async()=>{const te=await la(t);N(te),await J(),P=Y.channel("activity-events"),P.on("postgres_changes",{event:"*",schema:"public",table:"activity_events"},$=>{const X=$.new;X&&(te.length&&!te.includes(X.target_user_id)&&!te.includes(X.actor_id)||new Date(X.created_at).getTime()<=E.getTime()||(y(T=>[{id:X.id,eventType:X.event_type,actorId:X.actor_id,targetUserId:X.target_user_id,dealId:X.deal_id,taskId:X.task_id,payload:X.payload||{},timestamp:new Date(X.created_at)},...T].slice(0,10)),b(!0)))}).subscribe()})(),()=>{P&&Y.removeChannel(P)}},[t,J]);const Z=P=>{s(""),d(!1),r(`/pipeline?dealId=${P}`)},B=()=>{s(""),c([]),d(!1)},K=async()=>{await Y.auth.signOut(),r("/login")},D=()=>{r("/pipeline?newDeal=true")},M=Ni(t==null?void 0:t.globalRole),L=Date.now(),oe=g.some(P=>L-P.timestamp.getTime()<=60*60*1e3&&P.timestamp.getTime()>k.getTime());p.useEffect(()=>{g.some(P=>P.timestamp.getTime()>k.getTime())&&b(!0)},[g,k]),p.useEffect(()=>{if(!t||t.globalRole!=="sales_manager"&&t.globalRole!=="team_lead"&&t.globalRole!=="admin")return;const P=setInterval(()=>{J()},45e3);return()=>clearInterval(P)},[t,J]);const ee=P=>P?P==="dead"?"Archived":P==="closed"?"Closed Won":P.replace(/_/g," "):"",ye=P=>{var te,$,X,T,H,Q,F,ve,R,ie;const V=_[P.actorId]||"An agent";switch(P.eventType){case"deal_status_change":{const ne=(($=(te=P.payload)==null?void 0:te.from_status)==null?void 0:$.replace(/_/g," "))||"previous stage",Ne=((T=(X=P.payload)==null?void 0:X.to_status)==null?void 0:T.replace(/_/g," "))||"new stage",Ie=((H=P.payload)==null?void 0:H.client_name)||"a client",Ot=((Q=P.payload)==null?void 0:Q.property_address)||"deal";return`${V} moved the ${Ie}  ${Ot} deal from ${ne} to ${Ne}.`}case"deal_deleted":{const ne=((F=P.payload)==null?void 0:F.client_name)||"a client",Ne=((ve=P.payload)==null?void 0:ve.property_address)||"deal";return`${V} deleted the ${ne}  ${Ne} deal.`}case"task_created":{const ne=((R=P.payload)==null?void 0:R.title)||"a task",Ne=(ie=P.payload)!=null&&ie.due_date?` with a due date of ${new Date(P.payload.due_date).toLocaleDateString()}`:"";return`${V} created a new task "${ne}"${Ne}.`}default:return`${V} made an update.`}};return l.jsx("header",{className:"sticky top-0 z-50 border-b border-white/30 bg-white/75 backdrop-blur-2xl shadow-[0_12px_30px_rgba(15,23,42,0.08)]",children:l.jsxs("div",{className:"mx-auto flex h-16 w-full items-center gap-4 px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:()=>r("/"),className:"flex items-center gap-2 rounded-2xl border border-white/40 bg-white/80 px-3 py-2 text-sm font-semibold text-gray-900 shadow-[0_2px_8px_rgba(15,23,42,0.08)]",children:l.jsx("img",{src:"/PipelineIQ.png",alt:"PipelineIQ",className:"h-8 w-auto"})}),l.jsx("div",{className:"hidden lg:flex w-96",ref:m,children:l.jsxs("div",{className:"relative w-full",children:[l.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-3 flex items-center",children:l.jsx(C0,{className:"h-4 w-4 text-gray-400"})}),l.jsx("input",{type:"text",value:i,onChange:P=>s(P.target.value),placeholder:"Search deals, people, addresses...",className:"w-full rounded-2xl border border-white/60 bg-white/90 py-2 pl-10 pr-10 text-sm text-gray-900 shadow-inner focus:border-[var(--app-accent)]/40 focus:ring-2 focus:ring-[var(--app-accent)]/15"}),i&&l.jsx("button",{onClick:B,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l.jsx(_s,{className:"h-4 w-4"})}),u&&l.jsx("div",{className:"absolute top-full left-0 right-0 z-50 mt-3 rounded-2xl border border-white/70 bg-white/95 shadow-[0_15px_40px_rgba(15,23,42,0.16)]",children:f?l.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"Searching"}):o.length>0?o.map(P=>l.jsxs("button",{onClick:()=>Z(P.id),className:"flex w-full items-start justify-between px-4 py-3 text-left hover:bg-gray-50",children:[l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("p",{className:"truncate text-sm font-medium text-gray-900",children:P.client_name}),l.jsx("p",{className:"truncate text-xs text-gray-500",children:P.property_address}),(P.client_email||P.client_phone)&&l.jsx("p",{className:"truncate text-xs text-gray-400",children:P.client_email||P.client_phone})]}),l.jsxs("div",{className:"ml-3 flex flex-col items-end gap-1",children:[l.jsx("span",{className:"rounded-full bg-blue-50 px-2 py-0.5 text-xs font-medium text-blue-700",children:ee(P.status)}),l.jsxs("span",{className:"text-xs text-gray-500",children:["$",P.expected_sale_price.toLocaleString()]})]})]},P.id)):l.jsxs("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:["No deals found matching ",i,"."]})})]})})]}),l.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[l.jsxs("button",{onClick:D,className:"hidden sm:inline-flex items-center gap-2 rounded-2xl border border-white/40 bg-white/80 px-3 py-2 text-sm font-medium text-gray-700 shadow-[0_2px_8px_rgba(15,23,42,0.08)] transition hover:border-[var(--app-accent)]/40 hover:text-[var(--app-accent)]",children:[l.jsx(Da,{className:"h-4 w-4"}),"New deal"]}),((t==null?void 0:t.globalRole)==="sales_manager"||(t==null?void 0:t.globalRole)==="team_lead"||(t==null?void 0:t.globalRole)==="admin")&&l.jsxs("div",{className:"relative",id:"notification-popover",children:[l.jsxs("button",{onClick:()=>{v||J(),x(P=>!P),b(!1),C(new Date)},className:"relative inline-flex items-center gap-2 rounded-2xl border border-white/50 bg-white/80 px-2.5 py-1.5 shadow-[0_2px_8px_rgba(15,23,42,0.08)] transition hover:border-[var(--app-accent)]/30",children:[l.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-gray-100 text-gray-700",children:l.jsx(EC,{className:"h-4 w-4"})}),l.jsxs("div",{className:"hidden text-left sm:block",children:[l.jsx("p",{className:"text-xs font-semibold text-gray-900",children:"Notifications"}),l.jsx("p",{className:"text-[11px] text-gray-500",children:"Team activity"})]}),w&&l.jsx("span",{className:"absolute -right-0.5 -top-0.5 h-2.5 w-2.5 rounded-full bg-[rgb(0,122,255)] shadow-[0_0_0_4px_rgba(0,122,255,0.14)]"}),!w&&oe&&l.jsx("span",{className:"absolute -right-0.5 -top-0.5 h-2.5 w-2.5 rounded-full bg-gray-300 shadow-[0_0_0_4px_rgba(148,163,184,0.25)]"})]}),v&&l.jsxs("div",{className:"absolute right-0 mt-3 w-96 max-w-[90vw] rounded-2xl border border-white/70 bg-white/95 p-3 shadow-[0_20px_60px_rgba(15,23,42,0.16)]",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Recent activity"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Latest 10 actions"})]}),l.jsx("button",{onClick:()=>{const P=new Date;y([]),b(!1),C(P),O(P)},className:"text-[11px] font-semibold text-[var(--app-accent)] hover:underline",children:"Clear"})]}),l.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2",children:g.length===0?l.jsx("div",{className:"rounded-xl border border-dashed border-gray-200 bg-gray-50/80 px-3 py-2 text-sm text-gray-500",children:"Nothing yet  team updates will appear here."}):g.map(P=>l.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white/90 px-3 py-2 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-900",children:ye(P)}),l.jsxs("div",{className:"mt-1 flex items-center gap-1 text-[11px] text-gray-500",children:[l.jsx(Io,{className:"h-3.5 w-3.5"}),l.jsx("span",{children:P.timestamp.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})})]})]},P.id))})]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>a(P=>!P),className:"flex items-center gap-2 rounded-2xl border border-white/50 bg-white/80 px-2.5 py-1.5 shadow-[0_2px_8px_rgba(15,23,42,0.08)] transition hover:border-[var(--app-accent)]/30",children:[l.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-[var(--app-accent)] text-white",children:l.jsx(kh,{className:"h-4 w-4"})}),l.jsxs("div",{className:"hidden text-left sm:block",children:[l.jsx("p",{className:"text-xs font-semibold text-gray-900",children:e==null?void 0:e.email}),l.jsx("p",{className:"text-[11px] text-gray-500",children:M})]})]}),n&&l.jsxs("div",{className:"absolute right-0 mt-3 w-64 rounded-2xl border border-white/70 bg-white/95 shadow-[0_25px_60px_rgba(15,23,42,0.16)]",children:[l.jsxs("div",{className:"border-b border-gray-100 px-4 py-3 space-y-1",children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e==null?void 0:e.email}),l.jsxs("p",{className:"text-xs font-medium text-gray-500 flex items-center gap-2",children:[l.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-[10px] uppercase tracking-wide text-gray-600",children:M}),"Signed in"]})]}),l.jsxs("button",{onClick:()=>{a(!1),r("/settings")},className:"flex w-full items-center gap-3 px-4 py-2 text-sm text-gray-700 transition hover:bg-gray-50",children:[l.jsx(Nh,{className:"h-4 w-4"}),l.jsx("span",{children:"Personal Settings"})]}),l.jsxs("button",{onClick:K,className:"flex w-full items-center gap-3 px-4 py-2 text-sm text-red-600 transition hover:bg-red-50",children:[l.jsx(B3,{className:"h-4 w-4"}),l.jsx("span",{children:"Sign out"})]})]})]})]})]})})}const rL=[{icon:M3,label:"Dashboard",path:"/"},{icon:Z3,label:"Pipeline",path:"/pipeline"},{icon:pv,label:"Tasks",path:"/tasks"},{icon:P3,label:"Analytics",path:"/analytics"}],nL=[{icon:ws,label:"Luma AI",path:"/luma"}],aL=[{icon:Nh,label:"Settings",path:"/workspace-settings"}];function iL({isCollapsed:e,onToggle:t}){const r=ha(),n=Yo(),a=(i,s)=>l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:`flex items-center gap-3 px-2 ${e?"justify-center":"justify-start"}`,children:[l.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-[var(--app-accent)]","aria-hidden":!0}),!e&&l.jsx("span",{className:"text-[12px] font-semibold uppercase tracking-[0.28em] text-gray-500",children:i})]}),l.jsx("div",{className:"space-y-1",children:s.map(o=>{const c=o.icon,u=r.pathname===o.path,d=e?"justify-center px-2":"gap-3 px-4 text-left";return l.jsxs("button",{onClick:()=>n(o.path),"aria-label":o.label,title:o.label,className:`group flex w-full items-center rounded-2xl border border-transparent py-3 text-[15px] font-semibold transition-all duration-200 ${d} ${u?"bg-[rgba(10,132,255,0.12)] text-[var(--app-accent)] shadow-[inset_0_0_0_1px_rgba(10,132,255,0.2)] border-[rgba(10,132,255,0.2)]":"text-gray-600 hover:-translate-y-[1px] hover:border-[rgba(10,132,255,0.25)] hover:bg-[rgba(10,132,255,0.06)] hover:text-[var(--app-accent)] hover:shadow-[0_12px_30px_rgba(15,23,42,0.08)]"} focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[rgba(10,132,255,0.35)]`,children:[l.jsx("span",{className:`flex h-10 w-10 items-center justify-center rounded-2xl border ${u?"border-[rgba(10,132,255,0.3)] bg-white/80 text-[var(--app-accent)]":"border-white/60 bg-white/90 text-gray-700 group-hover:border-[rgba(10,132,255,0.25)] group-hover:bg-white group-hover:text-[var(--app-accent)]"}`,children:l.jsx(c,{className:"h-[18px] w-[18px]",strokeWidth:2})}),!e&&l.jsx("span",{className:"whitespace-nowrap",children:o.label})]},o.path)})})]});return l.jsx("nav",{className:`sticky top-24 rounded-[var(--app-radius)] border border-[var(--app-border)] bg-white/80 shadow-[0_15px_40px_rgba(15,23,42,0.12)] transition-all duration-300 ${e?"p-3":"p-4"}`,children:l.jsxs("div",{className:"space-y-6",children:[a("Primary",rL),a("Intelligence",nL),l.jsx("div",{className:`pt-4 ${e?"":"border-t border-[var(--app-border)]"}`,children:a("Workspace",aL)}),l.jsx("div",{className:`pt-4 ${e?"":"border-t border-[var(--app-border)]"}`,children:l.jsxs("button",{type:"button",onClick:t,"aria-pressed":!e,"aria-expanded":!e,"aria-label":e?"Expand sidebar":"Collapse sidebar",className:`group flex w-full items-center rounded-2xl py-3 text-[15px] font-semibold transition ${e?"justify-center px-2":"gap-3 px-4 text-left"} text-gray-700 hover:bg-white/70 hover:text-[var(--app-accent)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[var(--app-accent)]`,children:[l.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-2xl border border-white/70 bg-white/95 shadow-[inset_0_0_0_1px_rgba(255,255,255,0.5)] transition-colors group-hover:border-[rgba(10,132,255,0.3)] group-hover:text-[var(--app-accent)]",children:e?l.jsx(PC,{className:"h-5 w-5 transition group-hover:text-[var(--app-accent)]"}):l.jsx(A3,{className:"h-5 w-5 transition group-hover:text-[var(--app-accent)]"})}),!e&&l.jsx("span",{className:"whitespace-nowrap",children:"Hide"})]})})]})})}function sL({children:e}){const[t,r]=p.useState(!1);return l.jsxs("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_var(--app-bg-start),_var(--app-bg-mid)_45%,_var(--app-bg-end))] text-[var(--app-text-primary)] overflow-x-hidden",children:[l.jsx(tL,{}),l.jsxs("div",{className:"relative mx-auto flex w-full flex-col gap-6 px-4 pb-10 pt-6 lg:flex-row lg:px-8",children:[l.jsx("div",{className:`transition-[width] duration-300 ease-in-out w-full lg:flex-shrink-0 ${t?"lg:w-20":"lg:w-64"}`,children:l.jsx(iL,{isCollapsed:t,onToggle:()=>r(n=>!n)})}),l.jsx("main",{className:"flex-1 overflow-x-hidden transition-[margin] duration-300 ease-in-out",children:l.jsx("div",{className:"min-h-[calc(100vh-10rem)] rounded-[var(--app-radius)] border border-[var(--app-border)] bg-white/85 p-4 shadow-[0_10px_50px_rgba(15,23,42,0.08)] sm:p-6 lg:p-8",children:e})})]})]})}function oL({onToggle:e}){const[t,r]=p.useState(""),[n,a]=p.useState(""),[i,s]=p.useState(!1),[o,c]=p.useState(""),u=async d=>{d.preventDefault(),s(!0),c("");const{error:f}=await Y.auth.signInWithPassword({email:t,password:n});f&&c(f.message),s(!1)};return l.jsxs("div",{className:"min-h-screen bg-[rgb(var(--color-app-bg))] flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[l.jsx("div",{className:"flex justify-center mb-8",children:l.jsx("img",{src:"/PipelineIQ.png",alt:"PipelineIQ",className:"h-16"})}),l.jsx("h2",{className:"text-center text-2xl font-semibold text-gray-900 mb-2",children:"Sign in to PipelineIQ"}),l.jsx("p",{className:"text-center hig-text-caption",children:"Welcome back! Please sign in to continue."})]}),l.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:l.jsxs("div",{className:"hig-card p-8",children:[l.jsxs("form",{onSubmit:u,className:"space-y-5",children:[o&&l.jsx("div",{className:"bg-red-50 border border-red-200/60 text-red-700 px-4 py-3 rounded-xl text-sm",children:o}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"hig-label",children:"Email address"}),l.jsx("input",{id:"email",type:"email",required:!0,value:t,onChange:d=>r(d.target.value),className:"hig-input",placeholder:"you@example.com"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"hig-label",children:"Password"}),l.jsx("input",{id:"password",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"hig-input",placeholder:"Enter your password"})]}),l.jsx("button",{type:"submit",disabled:i,className:"hig-btn-primary w-full",children:i?"Signing in...":"Sign in"})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-200/60"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-2 bg-white text-gray-500",children:"New to PipelineIQ?"})})]}),l.jsx("div",{className:"mt-6",children:l.jsx("button",{onClick:e,className:"hig-btn-secondary w-full",children:"Create an account"})})]})]})})]})}function zC({onToggle:e,presetToken:t}){const{signUp:r}=St(),[n]=m2(),[a,i]=p.useState(""),[s,o]=p.useState(t||n.get("invite")||""),[c,u]=p.useState(null),[d,f]=p.useState(""),[h,m]=p.useState(""),[g,y]=p.useState(""),[v,x]=p.useState(""),[w,b]=p.useState(!1),[_,j]=p.useState(!1);p.useEffect(()=>{t&&t!==s&&o(t)},[t]);const S=c&&!_&&!w,N=async E=>{if(!E){u(null),f(""),m("");return}j(!0),f(""),u(null),x("");const{data:O,error:A}=await Y.rpc("get_invite_preview",{invite_token:E});if(A){f("Unable to validate invite. Please check the code or contact your admin."),j(!1);return}const q=Array.isArray(O)?O[0]:O;if(!q){f("No invitation found for this code."),j(!1);return}if(q.status!=="pending"){f("This invitation has already been used or canceled."),j(!1);return}if(new Date(q.expires_at).getTime()<Date.now()){f("This invitation has expired. Please ask your admin to resend."),j(!1);return}u(q),m(q.email),f(""),j(!1)};p.useEffect(()=>{const E=setTimeout(()=>{s&&s.length>=6?N(s.trim()):(u(null),m(""))},300);return()=>clearTimeout(E)},[s]);const k=async E=>{if(E.preventDefault(),x(""),b(!0),!c||!s){x("A valid invite code is required to join the workspace."),b(!1);return}if(g.length<6){x("Password must be at least 6 characters"),b(!1);return}const{error:O}=await r(h,g,a,s.trim());O&&x(O.message),b(!1)},C=p.useMemo(()=>c?c.workspace_name||"Workspace":"",[c]);return l.jsxs("div",{className:"min-h-screen bg-[rgb(var(--color-app-bg))] flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[l.jsx("div",{className:"flex justify-center mb-8",children:l.jsx("img",{src:"/PipelineIQ.png",alt:"PipelineIQ",className:"h-16"})}),l.jsx("h2",{className:"text-center text-2xl font-semibold text-gray-900 mb-2",children:"Accept your invitation"}),l.jsx("p",{className:"text-center hig-text-caption",children:"PipelineIQ access is invite-only. Paste the invite code from your email to continue."})]}),l.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:l.jsxs("div",{className:"hig-card p-8",children:[l.jsxs("form",{onSubmit:k,className:"space-y-5",children:[v&&l.jsx("div",{className:"bg-red-50 border border-red-200/60 text-red-700 px-4 py-3 rounded-xl text-sm",children:v}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"invite",className:"hig-label flex items-center justify-between",children:["Invitation code",t&&l.jsx("span",{className:"text-[11px] text-gray-500",children:"Autofilled from your link"})]}),l.jsx("input",{id:"invite",type:"text",required:!0,value:s,onChange:E=>o(E.target.value),className:"hig-input uppercase tracking-[0.3em]",placeholder:"Paste your invite code"}),d&&l.jsx("p",{className:"text-xs text-red-600 mt-1",children:d})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Email"}),l.jsx("input",{type:"email",value:h,readOnly:!0,className:"hig-input bg-gray-50 text-gray-600",placeholder:"Invite required"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Role"}),l.jsx("input",{type:"text",value:c?Ni(c.intended_role):"",readOnly:!0,className:"hig-input bg-gray-50 text-gray-600",placeholder:"Invite required"})]})]}),c&&l.jsxs("div",{className:"rounded-2xl border border-gray-200/70 bg-gray-50/70 px-4 py-3 text-sm text-gray-600",children:["Joining ",l.jsx("span",{className:"font-semibold text-gray-900",children:C})," as"," ",l.jsx("span",{className:"font-semibold text-gray-900",children:Ni(c.intended_role)})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"hig-label",children:"Full name"}),l.jsx("input",{id:"name",type:"text",required:!0,value:a,onChange:E=>i(E.target.value),className:"hig-input",placeholder:"John Doe",disabled:!c})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"hig-label",children:"Password"}),l.jsx("input",{id:"password",type:"password",required:!0,value:g,onChange:E=>y(E.target.value),className:"hig-input",placeholder:"At least 6 characters",disabled:!c})]}),l.jsx("button",{type:"submit",disabled:!S,className:"hig-btn-primary w-full",children:w?"Creating account...":"Join workspace"})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-200/60"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Already have an account?"})})]}),l.jsxs("div",{className:"mt-6",children:[l.jsx("button",{onClick:e,className:"hig-btn-secondary w-full",children:"Back to sign in"}),l.jsx("p",{className:"mt-3 text-center text-xs text-gray-500",children:"Dont have an invite? Contact an admin in your workspace."})]})]})]})})]})}function lL(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return p.useMemo(()=>n=>{t.forEach(a=>a(n))},t)}const Ch=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Zo(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function E0(e){return"nodeType"in e}function Er(e){var t,r;return e?Zo(e)?e:E0(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function P0(e){const{Document:t}=Er(e);return e instanceof t}function Vc(e){return Zo(e)?!1:e instanceof Er(e).HTMLElement}function WC(e){return e instanceof Er(e).SVGElement}function el(e){return e?Zo(e)?e.document:E0(e)?P0(e)?e:Vc(e)||WC(e)?e.ownerDocument:document:document:document}const Wn=Ch?p.useLayoutEffect:p.useEffect;function Eh(e){const t=p.useRef(e);return Wn(()=>{t.current=e}),p.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t.current==null?void 0:t.current(...n)},[])}function cL(){const e=p.useRef(null),t=p.useCallback((n,a)=>{e.current=setInterval(n,a)},[]),r=p.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function jc(e,t){t===void 0&&(t=[e]);const r=p.useRef(e);return Wn(()=>{r.current!==e&&(r.current=e)},t),r}function Gc(e,t){const r=p.useRef();return p.useMemo(()=>{const n=e(r.current);return r.current=n,n},[...t])}function lf(e){const t=Eh(e),r=p.useRef(null),n=p.useCallback(a=>{a!==r.current&&(t==null||t(a,r.current)),r.current=a},[]);return[r,n]}function cf(e){const t=p.useRef();return p.useEffect(()=>{t.current=e},[e]),t.current}let Pm={};function Yc(e,t){return p.useMemo(()=>{if(t)return t;const r=Pm[e]==null?0:Pm[e]+1;return Pm[e]=r,e+"-"+r},[e,t])}function KC(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((i,s)=>{const o=Object.entries(s);for(const[c,u]of o){const d=i[c];d!=null&&(i[c]=d+e*u)}return i},{...t})}}const _o=KC(1),uf=KC(-1);function uL(e){return"clientX"in e&&"clientY"in e}function Ph(e){if(!e)return!1;const{KeyboardEvent:t}=Er(e.target);return t&&e instanceof t}function dL(e){if(!e)return!1;const{TouchEvent:t}=Er(e.target);return t&&e instanceof t}function df(e){if(dL(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return uL(e)?{x:e.clientX,y:e.clientY}:null}const Kn=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Kn.Translate.toString(e),Kn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),p_="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function fL(e){return e.matches(p_)?e:e.querySelector(p_)}const hL={display:"none"};function pL(e){let{id:t,value:r}=e;return lt.createElement("div",{id:t,style:hL},r)}function mL(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return lt.createElement("div",{id:t,style:a,role:"status","aria-live":n,"aria-atomic":!0},r)}function gL(){const[e,t]=p.useState("");return{announce:p.useCallback(n=>{n!=null&&t(n)},[]),announcement:e}}const HC=p.createContext(null);function vL(e){const t=p.useContext(HC);p.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function yL(){const[e]=p.useState(()=>new Set),t=p.useCallback(n=>(e.add(n),()=>e.delete(n)),[e]);return[p.useCallback(n=>{let{type:a,event:i}=n;e.forEach(s=>{var o;return(o=s[a])==null?void 0:o.call(s,i)})},[e]),t]}const xL={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},bL={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function wL(e){let{announcements:t=bL,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=xL}=e;const{announce:i,announcement:s}=gL(),o=Yc("DndLiveRegion"),[c,u]=p.useState(!1);if(p.useEffect(()=>{u(!0)},[]),vL(p.useMemo(()=>({onDragStart(f){let{active:h}=f;i(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:m}=f;t.onDragMove&&i(t.onDragMove({active:h,over:m}))},onDragOver(f){let{active:h,over:m}=f;i(t.onDragOver({active:h,over:m}))},onDragEnd(f){let{active:h,over:m}=f;i(t.onDragEnd({active:h,over:m}))},onDragCancel(f){let{active:h,over:m}=f;i(t.onDragCancel({active:h,over:m}))}}),[i,t])),!c)return null;const d=lt.createElement(lt.Fragment,null,lt.createElement(pL,{id:n,value:a.draggable}),lt.createElement(mL,{id:o,announcement:s}));return r?hi.createPortal(d,r):d}var Bt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Bt||(Bt={}));function ff(){}function Oh(e,t){return p.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Ah(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return p.useMemo(()=>[...t].filter(n=>n!=null),[...t])}const Hn=Object.freeze({x:0,y:0});function qC(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function _L(e,t){const r=df(e);if(!r)return"0 0";const n={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return n.x+"% "+n.y+"%"}function VC(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function jL(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function SL(e){let{left:t,top:r,height:n,width:a}=e;return[{x:t,y:r},{x:t+a,y:r},{x:t,y:r+n},{x:t+a,y:r+n}]}function NL(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function m_(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const O0=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=m_(t,t.left,t.top),i=[];for(const s of n){const{id:o}=s,c=r.get(o);if(c){const u=qC(m_(c),a);i.push({id:o,data:{droppableContainer:s,value:u}})}}return i.sort(VC)};function kL(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),s=a-n,o=i-r;if(n<a&&r<i){const c=t.width*t.height,u=e.width*e.height,d=s*o,f=d/(c+u-d);return Number(f.toFixed(4))}return 0}const CL=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=[];for(const i of n){const{id:s}=i,o=r.get(s);if(o){const c=kL(o,t);c>0&&a.push({id:s,data:{droppableContainer:i,value:c}})}}return a.sort(jL)};function EL(e,t){const{top:r,left:n,bottom:a,right:i}=t;return r<=e.y&&e.y<=a&&n<=e.x&&e.x<=i}const PL=e=>{let{droppableContainers:t,droppableRects:r,pointerCoordinates:n}=e;if(!n)return[];const a=[];for(const i of t){const{id:s}=i,o=r.get(s);if(o&&EL(n,o)){const u=SL(o).reduce((f,h)=>f+qC(n,h),0),d=Number((u/4).toFixed(4));a.push({id:s,data:{droppableContainer:i,value:d}})}}return a.sort(VC)};function OL(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function GC(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Hn}function AL(e){return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((s,o)=>({...s,top:s.top+e*o.y,bottom:s.bottom+e*o.y,left:s.left+e*o.x,right:s.right+e*o.x}),{...r})}}const TL=AL(1);function YC(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function DL(e,t,r){const n=YC(t);if(!n)return e;const{scaleX:a,scaleY:i,x:s,y:o}=n,c=e.left-s-(1-a)*parseFloat(r),u=e.top-o-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),d=a?e.width/a:e.width,f=i?e.height/i:e.height;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c}}const IL={ignoreTransform:!1};function tl(e,t){t===void 0&&(t=IL);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=Er(e).getComputedStyle(e);u&&(r=DL(r,u,d))}const{top:n,left:a,width:i,height:s,bottom:o,right:c}=r;return{top:n,left:a,width:i,height:s,bottom:o,right:c}}function g_(e){return tl(e,{ignoreTransform:!0})}function RL(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function ML(e,t){return t===void 0&&(t=Er(e).getComputedStyle(e)),t.position==="fixed"}function $L(e,t){t===void 0&&(t=Er(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?r.test(i):!1})}function A0(e,t){const r=[];function n(a){if(t!=null&&r.length>=t||!a)return r;if(P0(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!Vc(a)||WC(a)||r.includes(a))return r;const i=Er(e).getComputedStyle(a);return a!==e&&$L(a,i)&&r.push(a),ML(a,i)?r:n(a.parentNode)}return e?n(e):r}function XC(e){const[t]=A0(e,1);return t??null}function Om(e){return!Ch||!e?null:Zo(e)?e:E0(e)?P0(e)||e===el(e).scrollingElement?window:Vc(e)?e:null:null}function JC(e){return Zo(e)?e.scrollX:e.scrollLeft}function QC(e){return Zo(e)?e.scrollY:e.scrollTop}function gv(e){return{x:JC(e),y:QC(e)}}var Xt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Xt||(Xt={}));function ZC(e){return!Ch||!e?!1:e===document.scrollingElement}function eE(e){const t={x:0,y:0},r=ZC(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,s=e.scrollTop>=n.y,o=e.scrollLeft>=n.x;return{isTop:a,isLeft:i,isBottom:s,isRight:o,maxScroll:n,minScroll:t}}const LL={x:.2,y:.2};function FL(e,t,r,n,a){let{top:i,left:s,right:o,bottom:c}=r;n===void 0&&(n=10),a===void 0&&(a=LL);const{isTop:u,isBottom:d,isLeft:f,isRight:h}=eE(e),m={x:0,y:0},g={x:0,y:0},y={height:t.height*a.y,width:t.width*a.x};return!u&&i<=t.top+y.height?(m.y=Xt.Backward,g.y=n*Math.abs((t.top+y.height-i)/y.height)):!d&&c>=t.bottom-y.height&&(m.y=Xt.Forward,g.y=n*Math.abs((t.bottom-y.height-c)/y.height)),!h&&o>=t.right-y.width?(m.x=Xt.Forward,g.x=n*Math.abs((t.right-y.width-o)/y.width)):!f&&s<=t.left+y.width&&(m.x=Xt.Backward,g.x=n*Math.abs((t.left+y.width-s)/y.width)),{direction:m,speed:g}}function BL(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}const{top:t,left:r,right:n,bottom:a}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:a,width:e.clientWidth,height:e.clientHeight}}function tE(e){return e.reduce((t,r)=>_o(t,gv(r)),Hn)}function UL(e){return e.reduce((t,r)=>t+JC(r),0)}function zL(e){return e.reduce((t,r)=>t+QC(r),0)}function rE(e,t){if(t===void 0&&(t=tl),!e)return;const{top:r,left:n,bottom:a,right:i}=t(e);XC(e)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const WL=[["x",["left","right"],UL],["y",["top","bottom"],zL]];class T0{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=A0(r),a=tE(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,s,o]of WL)for(const c of s)Object.defineProperty(this,c,{get:()=>{const u=o(n),d=a[i]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Xl{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=t}add(t,r,n){var a;(a=this.target)==null||a.addEventListener(t,r,n),this.listeners.push([t,r,n])}}function KL(e){const{EventTarget:t}=Er(e);return e instanceof t?e:el(e)}function Am(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t?n>t.y:!1}var mn;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(mn||(mn={}));function v_(e){e.preventDefault()}function HL(e){e.stopPropagation()}var We;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(We||(We={}));const nE={start:[We.Space,We.Enter],cancel:[We.Esc],end:[We.Space,We.Enter,We.Tab]},qL=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case We.Right:return{...r,x:r.x+25};case We.Left:return{...r,x:r.x-25};case We.Down:return{...r,y:r.y+25};case We.Up:return{...r,y:r.y-25}}};class aE{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new Xl(el(r)),this.windowListeners=new Xl(Er(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(mn.Resize,this.handleCancel),this.windowListeners.add(mn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(mn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,n=t.node.current;n&&rE(n),r(Hn)}handleKeyDown(t){if(Ph(t)){const{active:r,context:n,options:a}=this.props,{keyboardCodes:i=nE,coordinateGetter:s=qL,scrollBehavior:o="smooth"}=a,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=n.current,d=u?{x:u.left,y:u.top}:Hn;this.referenceCoordinates||(this.referenceCoordinates=d);const f=s(t,{active:r,context:n.current,currentCoordinates:d});if(f){const h=uf(f,d),m={x:0,y:0},{scrollableAncestors:g}=n.current;for(const y of g){const v=t.code,{isTop:x,isRight:w,isLeft:b,isBottom:_,maxScroll:j,minScroll:S}=eE(y),N=BL(y),k={x:Math.min(v===We.Right?N.right-N.width/2:N.right,Math.max(v===We.Right?N.left:N.left+N.width/2,f.x)),y:Math.min(v===We.Down?N.bottom-N.height/2:N.bottom,Math.max(v===We.Down?N.top:N.top+N.height/2,f.y))},C=v===We.Right&&!w||v===We.Left&&!b,E=v===We.Down&&!_||v===We.Up&&!x;if(C&&k.x!==f.x){const O=y.scrollLeft+h.x,A=v===We.Right&&O<=j.x||v===We.Left&&O>=S.x;if(A&&!h.y){y.scrollTo({left:O,behavior:o});return}A?m.x=y.scrollLeft-O:m.x=v===We.Right?y.scrollLeft-j.x:y.scrollLeft-S.x,m.x&&y.scrollBy({left:-m.x,behavior:o});break}else if(E&&k.y!==f.y){const O=y.scrollTop+h.y,A=v===We.Down&&O<=j.y||v===We.Up&&O>=S.y;if(A&&!h.x){y.scrollTo({top:O,behavior:o});return}A?m.y=y.scrollTop-O:m.y=v===We.Down?y.scrollTop-j.y:y.scrollTop-S.y,m.y&&y.scrollBy({top:-m.y,behavior:o});break}}this.handleMove(t,_o(uf(f,this.referenceCoordinates),m))}}}handleMove(t,r){const{onMove:n}=this.props;t.preventDefault(),n(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}aE.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=nE,onActivation:a}=t,{active:i}=r;const{code:s}=e.nativeEvent;if(n.start.includes(s)){const o=i.activatorNode.current;return o&&e.target!==o?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function y_(e){return!!(e&&"distance"in e)}function x_(e){return!!(e&&"delay"in e)}class D0{constructor(t,r,n){var a;n===void 0&&(n=KL(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:i}=t,{target:s}=i;this.props=t,this.events=r,this.document=el(s),this.documentListeners=new Xl(this.document),this.listeners=new Xl(n),this.windowListeners=new Xl(Er(s)),this.initialCoordinates=(a=df(i))!=null?a:Hn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(mn.Resize,this.handleCancel),this.windowListeners.add(mn.DragStart,v_),this.windowListeners.add(mn.VisibilityChange,this.handleCancel),this.windowListeners.add(mn.ContextMenu,v_),this.documentListeners.add(mn.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(x_(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(y_(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:n,onPending:a}=this.props;a(n,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(mn.Click,HL,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(mn.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:n,initialCoordinates:a,props:i}=this,{onMove:s,options:{activationConstraint:o}}=i;if(!a)return;const c=(r=df(t))!=null?r:Hn,u=uf(a,c);if(!n&&o){if(y_(o)){if(o.tolerance!=null&&Am(u,o.tolerance))return this.handleCancel();if(Am(u,o.distance))return this.handleStart()}if(x_(o)&&Am(u,o.tolerance))return this.handleCancel();this.handlePending(o,u);return}t.cancelable&&t.preventDefault(),s(c)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===We.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const VL={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class rl extends D0{constructor(t){const{event:r}=t,n=el(r.target);super(t,VL,n)}}rl.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const GL={move:{name:"mousemove"},end:{name:"mouseup"}};var vv;(function(e){e[e.RightClick=2]="RightClick"})(vv||(vv={}));class YL extends D0{constructor(t){super(t,GL,el(t.event.target))}}YL.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button===vv.RightClick?!1:(n==null||n({event:r}),!0)}}];const Tm={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class XL extends D0{constructor(t){super(t,Tm)}static setup(){return window.addEventListener(Tm.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Tm.move.name,t)};function t(){}}}XL.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:a}=r;return a.length>1?!1:(n==null||n({event:r}),!0)}}];var Jl;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Jl||(Jl={}));var hf;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(hf||(hf={}));function JL(e){let{acceleration:t,activator:r=Jl.Pointer,canScroll:n,draggingRect:a,enabled:i,interval:s=5,order:o=hf.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:h}=e;const m=ZL({delta:f,disabled:!i}),[g,y]=cL(),v=p.useRef({x:0,y:0}),x=p.useRef({x:0,y:0}),w=p.useMemo(()=>{switch(r){case Jl.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Jl.DraggableRect:return a}},[r,a,c]),b=p.useRef(null),_=p.useCallback(()=>{const S=b.current;if(!S)return;const N=v.current.x*x.current.x,k=v.current.y*x.current.y;S.scrollBy(N,k)},[]),j=p.useMemo(()=>o===hf.TreeOrder?[...u].reverse():u,[o,u]);p.useEffect(()=>{if(!i||!u.length||!w){y();return}for(const S of j){if((n==null?void 0:n(S))===!1)continue;const N=u.indexOf(S),k=d[N];if(!k)continue;const{direction:C,speed:E}=FL(S,k,w,t,h);for(const O of["x","y"])m[O][C[O]]||(E[O]=0,C[O]=0);if(E.x>0||E.y>0){y(),b.current=S,g(_,s),v.current=E,x.current=C;return}}v.current={x:0,y:0},x.current={x:0,y:0},y()},[t,_,n,y,i,s,JSON.stringify(w),JSON.stringify(m),g,u,j,d,JSON.stringify(h)])}const QL={x:{[Xt.Backward]:!1,[Xt.Forward]:!1},y:{[Xt.Backward]:!1,[Xt.Forward]:!1}};function ZL(e){let{delta:t,disabled:r}=e;const n=cf(t);return Gc(a=>{if(r||!n||!a)return QL;const i={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[Xt.Backward]:a.x[Xt.Backward]||i.x===-1,[Xt.Forward]:a.x[Xt.Forward]||i.x===1},y:{[Xt.Backward]:a.y[Xt.Backward]||i.y===-1,[Xt.Forward]:a.y[Xt.Forward]||i.y===1}}},[r,t,n])}function e6(e,t){const r=t!=null?e.get(t):void 0,n=r?r.node.current:null;return Gc(a=>{var i;return t==null?null:(i=n??a)!=null?i:null},[n,t])}function t6(e,t){return p.useMemo(()=>e.reduce((r,n)=>{const{sensor:a}=n,i=a.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,n)}));return[...r,...i]},[]),[e,t])}var Sc;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Sc||(Sc={}));var yv;(function(e){e.Optimized="optimized"})(yv||(yv={}));const b_=new Map;function r6(e,t){let{dragging:r,dependencies:n,config:a}=t;const[i,s]=p.useState(null),{frequency:o,measure:c,strategy:u}=a,d=p.useRef(e),f=v(),h=jc(f),m=p.useCallback(function(x){x===void 0&&(x=[]),!h.current&&s(w=>w===null?x:w.concat(x.filter(b=>!w.includes(b))))},[h]),g=p.useRef(null),y=Gc(x=>{if(f&&!r)return b_;if(!x||x===b_||d.current!==e||i!=null){const w=new Map;for(let b of e){if(!b)continue;if(i&&i.length>0&&!i.includes(b.id)&&b.rect.current){w.set(b.id,b.rect.current);continue}const _=b.node.current,j=_?new T0(c(_),_):null;b.rect.current=j,j&&w.set(b.id,j)}return w}return x},[e,i,r,f,c]);return p.useEffect(()=>{d.current=e},[e]),p.useEffect(()=>{f||m()},[r,f]),p.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),p.useEffect(()=>{f||typeof o!="number"||g.current!==null||(g.current=setTimeout(()=>{m(),g.current=null},o))},[o,f,m,...n]),{droppableRects:y,measureDroppableContainers:m,measuringScheduled:i!=null};function v(){switch(u){case Sc.Always:return!1;case Sc.BeforeDragging:return r;default:return!r}}}function I0(e,t){return Gc(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function n6(e,t){return I0(e,t)}function a6(e){let{callback:t,disabled:r}=e;const n=Eh(t),a=p.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return p.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Th(e){let{callback:t,disabled:r}=e;const n=Eh(t),a=p.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return p.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function i6(e){return new T0(tl(e),e)}function w_(e,t,r){t===void 0&&(t=i6);const[n,a]=p.useState(null);function i(){a(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??r)!=null?u:null}const d=t(e);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const s=a6({callback(c){if(e)for(const u of c){const{type:d,target:f}=u;if(d==="childList"&&f instanceof HTMLElement&&f.contains(e)){i();break}}}}),o=Th({callback:i});return Wn(()=>{i(),e?(o==null||o.observe(e),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),s==null||s.disconnect())},[e]),n}function s6(e){const t=I0(e);return GC(e,t)}const __=[];function o6(e){const t=p.useRef(e),r=Gc(n=>e?n&&n!==__&&e&&t.current&&e.parentNode===t.current.parentNode?n:A0(e):__,[e]);return p.useEffect(()=>{t.current=e},[e]),r}function l6(e){const[t,r]=p.useState(null),n=p.useRef(e),a=p.useCallback(i=>{const s=Om(i.target);s&&r(o=>o?(o.set(s,gv(s)),new Map(o)):null)},[]);return p.useEffect(()=>{const i=n.current;if(e!==i){s(i);const o=e.map(c=>{const u=Om(c);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,gv(u)]):null}).filter(c=>c!=null);r(o.length?new Map(o):null),n.current=e}return()=>{s(e),s(i)};function s(o){o.forEach(c=>{const u=Om(c);u==null||u.removeEventListener("scroll",a)})}},[a,e]),p.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,s)=>_o(i,s),Hn):tE(e):Hn,[e,t])}function j_(e,t){t===void 0&&(t=[]);const r=p.useRef(null);return p.useEffect(()=>{r.current=null},t),p.useEffect(()=>{const n=e!==Hn;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?uf(e,r.current):Hn}function c6(e){p.useEffect(()=>{if(!Ch)return;const t=e.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function u6(e,t){return p.useMemo(()=>e.reduce((r,n)=>{let{eventName:a,handler:i}=n;return r[a]=s=>{i(s,t)},r},{}),[e,t])}function iE(e){return p.useMemo(()=>e?RL(e):null,[e])}const S_=[];function d6(e,t){t===void 0&&(t=tl);const[r]=e,n=iE(r?Er(r):null),[a,i]=p.useState(S_);function s(){i(()=>e.length?e.map(c=>ZC(c)?n:new T0(t(c),c)):S_)}const o=Th({callback:s});return Wn(()=>{o==null||o.disconnect(),s(),e.forEach(c=>o==null?void 0:o.observe(c))},[e]),a}function sE(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Vc(t)?t:e}function f6(e){let{measure:t}=e;const[r,n]=p.useState(null),a=p.useCallback(u=>{for(const{target:d}of u)if(Vc(d)){n(f=>{const h=t(d);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),i=Th({callback:a}),s=p.useCallback(u=>{const d=sE(u);i==null||i.disconnect(),d&&(i==null||i.observe(d)),n(d?t(d):null)},[t,i]),[o,c]=lf(s);return p.useMemo(()=>({nodeRef:o,rect:r,setRef:c}),[r,o,c])}const h6=[{sensor:rl,options:{}},{sensor:aE,options:{}}],p6={current:{}},kd={draggable:{measure:g_},droppable:{measure:g_,strategy:Sc.WhileDragging,frequency:yv.Optimized},dragOverlay:{measure:tl}};class Ql extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,n;return(r=(n=this.get(t))==null?void 0:n.node.current)!=null?r:void 0}}const m6={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ql,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ff},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:kd,measureDroppableContainers:ff,windowRect:null,measuringScheduled:!1},oE={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ff,draggableNodes:new Map,over:null,measureDroppableContainers:ff},Xc=p.createContext(oE),lE=p.createContext(m6);function g6(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ql}}}function v6(e,t){switch(t.type){case Bt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Bt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Bt.DragEnd:case Bt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Bt.RegisterDroppable:{const{element:r}=t,{id:n}=r,a=new Ql(e.droppable.containers);return a.set(n,r),{...e,droppable:{...e.droppable,containers:a}}}case Bt.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;const s=new Ql(e.droppable.containers);return s.set(r,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:s}}}case Bt.UnregisterDroppable:{const{id:r,key:n}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;const i=new Ql(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function y6(e){let{disabled:t}=e;const{active:r,activatorEvent:n,draggableNodes:a}=p.useContext(Xc),i=cf(n),s=cf(r==null?void 0:r.id);return p.useEffect(()=>{if(!t&&!n&&i&&s!=null){if(!Ph(i)||document.activeElement===i.target)return;const o=a.get(s);if(!o)return;const{activatorNode:c,node:u}=o;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const f=fL(d);if(f){f.focus();break}}})}},[n,t,a,s,i]),null}function cE(e,t){let{transform:r,...n}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...n}),r):r}function x6(e){return p.useMemo(()=>({draggable:{...kd.draggable,...e==null?void 0:e.draggable},droppable:{...kd.droppable,...e==null?void 0:e.droppable},dragOverlay:{...kd.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function b6(e){let{activeNode:t,measure:r,initialRect:n,config:a=!0}=e;const i=p.useRef(!1),{x:s,y:o}=typeof a=="boolean"?{x:a,y:a}:a;Wn(()=>{if(!s&&!o||!t){i.current=!1;return}if(i.current||!n)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=r(u),f=GC(d,n);if(s||(f.x=0),o||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=XC(u);h&&h.scrollBy({top:f.y,left:f.x})}},[t,s,o,n,r])}const Dh=p.createContext({...Hn,scaleX:1,scaleY:1});var ai;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ai||(ai={}));const Ih=p.memo(function(t){var r,n,a,i;let{id:s,accessibility:o,autoScroll:c=!0,children:u,sensors:d=h6,collisionDetection:f=CL,measuring:h,modifiers:m,...g}=t;const y=p.useReducer(v6,void 0,g6),[v,x]=y,[w,b]=yL(),[_,j]=p.useState(ai.Uninitialized),S=_===ai.Initialized,{draggable:{active:N,nodes:k,translate:C},droppable:{containers:E}}=v,O=N!=null?k.get(N):null,A=p.useRef({initial:null,translated:null}),q=p.useMemo(()=>{var Fe;return N!=null?{id:N,data:(Fe=O==null?void 0:O.data)!=null?Fe:p6,rect:A}:null},[N,O]),J=p.useRef(null),[Z,B]=p.useState(null),[K,D]=p.useState(null),M=jc(g,Object.values(g)),L=Yc("DndDescribedBy",s),oe=p.useMemo(()=>E.getEnabled(),[E]),ee=x6(h),{droppableRects:ye,measureDroppableContainers:P,measuringScheduled:V}=r6(oe,{dragging:S,dependencies:[C.x,C.y],config:ee.droppable}),te=e6(k,N),$=p.useMemo(()=>K?df(K):null,[K]),X=Qa(),T=n6(te,ee.draggable.measure);b6({activeNode:N!=null?k.get(N):null,config:X.layoutShiftCompensation,initialRect:T,measure:ee.draggable.measure});const H=w_(te,ee.draggable.measure,T),Q=w_(te?te.parentElement:null),F=p.useRef({activatorEvent:null,active:null,activeNode:te,collisionRect:null,collisions:null,droppableRects:ye,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:E,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ve=E.getNodeFor((r=F.current.over)==null?void 0:r.id),R=f6({measure:ee.dragOverlay.measure}),ie=(n=R.nodeRef.current)!=null?n:te,ne=S?(a=R.rect)!=null?a:H:null,Ne=!!(R.nodeRef.current&&R.rect),Ie=s6(Ne?null:H),Ot=iE(ie?Er(ie):null),Me=o6(S?ve??te:null),z=d6(Me),Le=cE(m,{transform:{x:C.x-Ie.x,y:C.y-Ie.y,scaleX:1,scaleY:1},activatorEvent:K,active:q,activeNodeRect:H,containerNodeRect:Q,draggingNodeRect:ne,over:F.current.over,overlayNodeRect:R.rect,scrollableAncestors:Me,scrollableAncestorRects:z,windowRect:Ot}),Ce=$?_o($,C):null,He=l6(Me),At=j_(He),Ya=j_(He,[H]),un=_o(Le,At),Qn=ne?TL(ne,Le):null,Pn=q&&Qn?f({active:q,collisionRect:Qn,droppableRects:ye,droppableContainers:oe,pointerCoordinates:Ce}):null,Rs=NL(Pn,"id"),[yr,Xa]=p.useState(null),Li=Ne?Le:_o(Le,Ya),Fi=OL(Li,(i=yr==null?void 0:yr.rect)!=null?i:null,H),Bi=p.useRef(null),Ui=p.useCallback((Fe,ht)=>{let{sensor:Je,options:pt}=ht;if(J.current==null)return;const ur=k.get(J.current);if(!ur)return;const rr=Fe.nativeEvent,Ar=new Je({active:J.current,activeNode:ur,event:rr,options:pt,context:F,onAbort(Ye){if(!k.get(Ye))return;const{onDragAbort:xr}=M.current,Wr={id:Ye};xr==null||xr(Wr),w({type:"onDragAbort",event:Wr})},onPending(Ye,Vt,xr,Wr){if(!k.get(Ye))return;const{onDragPending:An}=M.current,mt={id:Ye,constraint:Vt,initialCoordinates:xr,offset:Wr};An==null||An(mt),w({type:"onDragPending",event:mt})},onStart(Ye){const Vt=J.current;if(Vt==null)return;const xr=k.get(Vt);if(!xr)return;const{onDragStart:Wr}=M.current,On={activatorEvent:rr,active:{id:Vt,data:xr.data,rect:A}};hi.unstable_batchedUpdates(()=>{Wr==null||Wr(On),j(ai.Initializing),x({type:Bt.DragStart,initialCoordinates:Ye,active:Vt}),w({type:"onDragStart",event:On}),B(Bi.current),D(rr)})},onMove(Ye){x({type:Bt.DragMove,coordinates:Ye})},onEnd:zr(Bt.DragEnd),onCancel:zr(Bt.DragCancel)});Bi.current=Ar;function zr(Ye){return async function(){const{active:xr,collisions:Wr,over:On,scrollAdjustedTranslate:An}=F.current;let mt=null;if(xr&&An){const{cancelDrop:Kr}=M.current;mt={activatorEvent:rr,active:xr,collisions:Wr,delta:An,over:On},Ye===Bt.DragEnd&&typeof Kr=="function"&&await Promise.resolve(Kr(mt))&&(Ye=Bt.DragCancel)}J.current=null,hi.unstable_batchedUpdates(()=>{x({type:Ye}),j(ai.Uninitialized),Xa(null),B(null),D(null),Bi.current=null;const Kr=Ye===Bt.DragEnd?"onDragEnd":"onDragCancel";if(mt){const ea=M.current[Kr];ea==null||ea(mt),w({type:Kr,event:mt})}})}}},[k]),zi=p.useCallback((Fe,ht)=>(Je,pt)=>{const ur=Je.nativeEvent,rr=k.get(pt);if(J.current!==null||!rr||ur.dndKit||ur.defaultPrevented)return;const Ar={active:rr};Fe(Je,ht.options,Ar)===!0&&(ur.dndKit={capturedBy:ht.sensor},J.current=pt,Ui(Je,ht))},[k,Ui]),Zn=t6(d,zi);c6(d),Wn(()=>{H&&_===ai.Initializing&&j(ai.Initialized)},[H,_]),p.useEffect(()=>{const{onDragMove:Fe}=M.current,{active:ht,activatorEvent:Je,collisions:pt,over:ur}=F.current;if(!ht||!Je)return;const rr={active:ht,activatorEvent:Je,collisions:pt,delta:{x:un.x,y:un.y},over:ur};hi.unstable_batchedUpdates(()=>{Fe==null||Fe(rr),w({type:"onDragMove",event:rr})})},[un.x,un.y]),p.useEffect(()=>{const{active:Fe,activatorEvent:ht,collisions:Je,droppableContainers:pt,scrollAdjustedTranslate:ur}=F.current;if(!Fe||J.current==null||!ht||!ur)return;const{onDragOver:rr}=M.current,Ar=pt.get(Rs),zr=Ar&&Ar.rect.current?{id:Ar.id,rect:Ar.rect.current,data:Ar.data,disabled:Ar.disabled}:null,Ye={active:Fe,activatorEvent:ht,collisions:Je,delta:{x:ur.x,y:ur.y},over:zr};hi.unstable_batchedUpdates(()=>{Xa(zr),rr==null||rr(Ye),w({type:"onDragOver",event:Ye})})},[Rs]),Wn(()=>{F.current={activatorEvent:K,active:q,activeNode:te,collisionRect:Qn,collisions:Pn,droppableRects:ye,draggableNodes:k,draggingNode:ie,draggingNodeRect:ne,droppableContainers:E,over:yr,scrollableAncestors:Me,scrollAdjustedTranslate:un},A.current={initial:ne,translated:Qn}},[q,te,Pn,Qn,k,ie,ne,ye,E,yr,Me,un]),JL({...X,delta:C,draggingRect:Qn,pointerCoordinates:Ce,scrollableAncestors:Me,scrollableAncestorRects:z});const Ja=p.useMemo(()=>({active:q,activeNode:te,activeNodeRect:H,activatorEvent:K,collisions:Pn,containerNodeRect:Q,dragOverlay:R,draggableNodes:k,droppableContainers:E,droppableRects:ye,over:yr,measureDroppableContainers:P,scrollableAncestors:Me,scrollableAncestorRects:z,measuringConfiguration:ee,measuringScheduled:V,windowRect:Ot}),[q,te,H,K,Pn,Q,R,k,E,ye,yr,P,Me,z,ee,V,Ot]),Wi=p.useMemo(()=>({activatorEvent:K,activators:Zn,active:q,activeNodeRect:H,ariaDescribedById:{draggable:L},dispatch:x,draggableNodes:k,over:yr,measureDroppableContainers:P}),[K,Zn,q,H,x,L,k,yr,P]);return lt.createElement(HC.Provider,{value:b},lt.createElement(Xc.Provider,{value:Wi},lt.createElement(lE.Provider,{value:Ja},lt.createElement(Dh.Provider,{value:Fi},u)),lt.createElement(y6,{disabled:(o==null?void 0:o.restoreFocus)===!1})),lt.createElement(wL,{...o,hiddenTextDescribedById:L}));function Qa(){const Fe=(Z==null?void 0:Z.autoScrollEnabled)===!1,ht=typeof c=="object"?c.enabled===!1:c===!1,Je=S&&!Fe&&!ht;return typeof c=="object"?{...c,enabled:Je}:{enabled:Je}}}),w6=p.createContext(null),N_="button",_6="Draggable";function j6(e){let{id:t,data:r,disabled:n=!1,attributes:a}=e;const i=Yc(_6),{activators:s,activatorEvent:o,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:h}=p.useContext(Xc),{role:m=N_,roleDescription:g="draggable",tabIndex:y=0}=a??{},v=(c==null?void 0:c.id)===t,x=p.useContext(v?Dh:w6),[w,b]=lf(),[_,j]=lf(),S=u6(s,t),N=jc(r);Wn(()=>(f.set(t,{id:t,key:i,node:w,activatorNode:_,data:N}),()=>{const C=f.get(t);C&&C.key===i&&f.delete(t)}),[f,t]);const k=p.useMemo(()=>({role:m,tabIndex:y,"aria-disabled":n,"aria-pressed":v&&m===N_?!0:void 0,"aria-roledescription":g,"aria-describedby":d.draggable}),[n,m,y,v,g,d.draggable]);return{active:c,activatorEvent:o,activeNodeRect:u,attributes:k,isDragging:v,listeners:n?void 0:S,node:w,over:h,setNodeRef:b,setActivatorNodeRef:j,transform:x}}function uE(){return p.useContext(lE)}const S6="Droppable",N6={timeout:25};function dE(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:a}=e;const i=Yc(S6),{active:s,dispatch:o,over:c,measureDroppableContainers:u}=p.useContext(Xc),d=p.useRef({disabled:r}),f=p.useRef(!1),h=p.useRef(null),m=p.useRef(null),{disabled:g,updateMeasurementsFor:y,timeout:v}={...N6,...a},x=jc(y??n),w=p.useCallback(()=>{if(!f.current){f.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),m.current=null},v)},[v]),b=Th({callback:w,disabled:g||!s}),_=p.useCallback((k,C)=>{b&&(C&&(b.unobserve(C),f.current=!1),k&&b.observe(k))},[b]),[j,S]=lf(_),N=jc(t);return p.useEffect(()=>{!b||!j.current||(b.disconnect(),f.current=!1,b.observe(j.current))},[j,b]),p.useEffect(()=>(o({type:Bt.RegisterDroppable,element:{id:n,key:i,disabled:r,node:j,rect:h,data:N}}),()=>o({type:Bt.UnregisterDroppable,key:i,id:n})),[n]),p.useEffect(()=>{r!==d.current.disabled&&(o({type:Bt.SetDroppableDisabled,id:n,key:i,disabled:r}),d.current.disabled=r)},[n,i,r,o]),{active:s,rect:h,isOver:(c==null?void 0:c.id)===n,node:j,over:c,setNodeRef:S}}function k6(e){let{animation:t,children:r}=e;const[n,a]=p.useState(null),[i,s]=p.useState(null),o=cf(r);return!r&&!n&&o&&a(o),Wn(()=>{if(!i)return;const c=n==null?void 0:n.key,u=n==null?void 0:n.props.id;if(c==null||u==null){a(null);return}Promise.resolve(t(u,i)).then(()=>{a(null)})},[t,n,i]),lt.createElement(lt.Fragment,null,r,n?p.cloneElement(n,{ref:s}):null)}const C6={x:0,y:0,scaleX:1,scaleY:1};function E6(e){let{children:t}=e;return lt.createElement(Xc.Provider,{value:oE},lt.createElement(Dh.Provider,{value:C6},t))}const P6={position:"fixed",touchAction:"none"},O6=e=>Ph(e)?"transform 250ms ease":void 0,A6=p.forwardRef((e,t)=>{let{as:r,activatorEvent:n,adjustScale:a,children:i,className:s,rect:o,style:c,transform:u,transition:d=O6}=e;if(!o)return null;const f=a?u:{...u,scaleX:1,scaleY:1},h={...P6,width:o.width,height:o.height,top:o.top,left:o.left,transform:Kn.Transform.toString(f),transformOrigin:a&&n?_L(n,o):void 0,transition:typeof d=="function"?d(n):d,...c};return lt.createElement(r,{className:s,style:h,ref:t},i)}),T6=e=>t=>{let{active:r,dragOverlay:n}=t;const a={},{styles:i,className:s}=e;if(i!=null&&i.active)for(const[o,c]of Object.entries(i.active))c!==void 0&&(a[o]=r.node.style.getPropertyValue(o),r.node.style.setProperty(o,c));if(i!=null&&i.dragOverlay)for(const[o,c]of Object.entries(i.dragOverlay))c!==void 0&&n.node.style.setProperty(o,c);return s!=null&&s.active&&r.node.classList.add(s.active),s!=null&&s.dragOverlay&&n.node.classList.add(s.dragOverlay),function(){for(const[c,u]of Object.entries(a))r.node.style.setProperty(c,u);s!=null&&s.active&&r.node.classList.remove(s.active)}},D6=e=>{let{transform:{initial:t,final:r}}=e;return[{transform:Kn.Transform.toString(t)},{transform:Kn.Transform.toString(r)}]},I6={duration:250,easing:"ease",keyframes:D6,sideEffects:T6({styles:{active:{opacity:"0"}}})};function R6(e){let{config:t,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=e;return Eh((i,s)=>{if(t===null)return;const o=r.get(i);if(!o)return;const c=o.node.current;if(!c)return;const u=sE(s);if(!u)return;const{transform:d}=Er(s).getComputedStyle(s),f=YC(d);if(!f)return;const h=typeof t=="function"?t:M6(t);return rE(c,a.draggable.measure),h({active:{id:i,data:o.data,node:c,rect:a.draggable.measure(c)},draggableNodes:r,dragOverlay:{node:s,rect:a.dragOverlay.measure(u)},droppableContainers:n,measuringConfiguration:a,transform:f})})}function M6(e){const{duration:t,easing:r,sideEffects:n,keyframes:a}={...I6,...e};return i=>{let{active:s,dragOverlay:o,transform:c,...u}=i;if(!t)return;const d={x:o.rect.left-s.rect.left,y:o.rect.top-s.rect.top},f={scaleX:c.scaleX!==1?s.rect.width*c.scaleX/o.rect.width:1,scaleY:c.scaleY!==1?s.rect.height*c.scaleY/o.rect.height:1},h={x:c.x-d.x,y:c.y-d.y,...f},m=a({...u,active:s,dragOverlay:o,transform:{initial:c,final:h}}),[g]=m,y=m[m.length-1];if(JSON.stringify(g)===JSON.stringify(y))return;const v=n==null?void 0:n({active:s,dragOverlay:o,...u}),x=o.node.animate(m,{duration:t,easing:r,fill:"forwards"});return new Promise(w=>{x.onfinish=()=>{v==null||v(),w()}})}}let k_=0;function $6(e){return p.useMemo(()=>{if(e!=null)return k_++,k_},[e])}const fE=lt.memo(e=>{let{adjustScale:t=!1,children:r,dropAnimation:n,style:a,transition:i,modifiers:s,wrapperElement:o="div",className:c,zIndex:u=999}=e;const{activatorEvent:d,active:f,activeNodeRect:h,containerNodeRect:m,draggableNodes:g,droppableContainers:y,dragOverlay:v,over:x,measuringConfiguration:w,scrollableAncestors:b,scrollableAncestorRects:_,windowRect:j}=uE(),S=p.useContext(Dh),N=$6(f==null?void 0:f.id),k=cE(s,{activatorEvent:d,active:f,activeNodeRect:h,containerNodeRect:m,draggingNodeRect:v.rect,over:x,overlayNodeRect:v.rect,scrollableAncestors:b,scrollableAncestorRects:_,transform:S,windowRect:j}),C=I0(h),E=R6({config:n,draggableNodes:g,droppableContainers:y,measuringConfiguration:w}),O=C?v.setRef:void 0;return lt.createElement(E6,null,lt.createElement(k6,{animation:E},f&&N?lt.createElement(A6,{key:N,id:f.id,ref:O,as:o,activatorEvent:d,adjustScale:t,className:c,transition:i,rect:C,style:{zIndex:u,...a},transform:k},r):null))});function Rh(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function L6(e,t){return e.reduce((r,n,a)=>{const i=t.get(n);return i&&(r[a]=i),r},Array(e.length))}function Hu(e){return e!==null&&e>=0}function F6(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function B6(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Mh=e=>{let{rects:t,activeIndex:r,overIndex:n,index:a}=e;const i=Rh(t,n,r),s=t[a],o=i[a];return!o||!s?null:{x:o.left-s.left,y:o.top-s.top,scaleX:o.width/s.width,scaleY:o.height/s.height}},qu={scaleX:1,scaleY:1},hE=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:a,rects:i,overIndex:s}=e;const o=(t=i[r])!=null?t:n;if(!o)return null;if(a===r){const u=i[s];return u?{x:0,y:r<s?u.top+u.height-(o.top+o.height):u.top-o.top,...qu}:null}const c=U6(i,a,r);return a>r&&a<=s?{x:0,y:-o.height-c,...qu}:a<r&&a>=s?{x:0,y:o.height+c,...qu}:{x:0,y:0,...qu}};function U6(e,t,r){const n=e[t],a=e[t-1],i=e[t+1];return n?r<t?a?n.top-(a.top+a.height):i?i.top-(n.top+n.height):0:i?i.top-(n.top+n.height):a?n.top-(a.top+a.height):0:0}const pE="Sortable",mE=lt.createContext({activeIndex:-1,containerId:pE,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Mh,disabled:{draggable:!1,droppable:!1}});function $h(e){let{children:t,id:r,items:n,strategy:a=Mh,disabled:i=!1}=e;const{active:s,dragOverlay:o,droppableRects:c,over:u,measureDroppableContainers:d}=uE(),f=Yc(pE,r),h=o.rect!==null,m=p.useMemo(()=>n.map(S=>typeof S=="object"&&"id"in S?S.id:S),[n]),g=s!=null,y=s?m.indexOf(s.id):-1,v=u?m.indexOf(u.id):-1,x=p.useRef(m),w=!F6(m,x.current),b=v!==-1&&y===-1||w,_=B6(i);Wn(()=>{w&&g&&d(m)},[w,m,g,d]),p.useEffect(()=>{x.current=m},[m]);const j=p.useMemo(()=>({activeIndex:y,containerId:f,disabled:_,disableTransforms:b,items:m,overIndex:v,useDragOverlay:h,sortedRects:L6(m,c),strategy:a}),[y,f,_.draggable,_.droppable,b,m,v,c,h,a]);return lt.createElement(mE.Provider,{value:j},t)}const z6=e=>{let{id:t,items:r,activeIndex:n,overIndex:a}=e;return Rh(r,n,a).indexOf(t)},W6=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:a,items:i,newIndex:s,previousItems:o,previousContainerId:c,transition:u}=e;return!u||!n||o!==i&&a===s?!1:r?!0:s!==a&&t===c},K6={duration:200,easing:"ease"},gE="transform",H6=Kn.Transition.toString({property:gE,duration:0,easing:"linear"}),q6={roleDescription:"sortable"};function V6(e){let{disabled:t,index:r,node:n,rect:a}=e;const[i,s]=p.useState(null),o=p.useRef(r);return Wn(()=>{if(!t&&r!==o.current&&n.current){const c=a.current;if(c){const u=tl(n.current,{ignoreTransform:!0}),d={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(d.x||d.y)&&s(d)}}r!==o.current&&(o.current=r)},[t,r,n,a]),p.useEffect(()=>{i&&s(null)},[i]),i}function Lh(e){let{animateLayoutChanges:t=W6,attributes:r,disabled:n,data:a,getNewIndex:i=z6,id:s,strategy:o,resizeObserverConfig:c,transition:u=K6}=e;const{items:d,containerId:f,activeIndex:h,disabled:m,disableTransforms:g,sortedRects:y,overIndex:v,useDragOverlay:x,strategy:w}=p.useContext(mE),b=G6(n,m),_=d.indexOf(s),j=p.useMemo(()=>({sortable:{containerId:f,index:_,items:d},...a}),[f,a,_,d]),S=p.useMemo(()=>d.slice(d.indexOf(s)),[d,s]),{rect:N,node:k,isOver:C,setNodeRef:E}=dE({id:s,data:j,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...c}}),{active:O,activatorEvent:A,activeNodeRect:q,attributes:J,setNodeRef:Z,listeners:B,isDragging:K,over:D,setActivatorNodeRef:M,transform:L}=j6({id:s,data:j,attributes:{...q6,...r},disabled:b.draggable}),oe=lL(E,Z),ee=!!O,ye=ee&&!g&&Hu(h)&&Hu(v),P=!x&&K,V=P&&ye?L:null,$=ye?V??(o??w)({rects:y,activeNodeRect:q,activeIndex:h,overIndex:v,index:_}):null,X=Hu(h)&&Hu(v)?i({id:s,items:d,activeIndex:h,overIndex:v}):_,T=O==null?void 0:O.id,H=p.useRef({activeId:T,items:d,newIndex:X,containerId:f}),Q=d!==H.current.items,F=t({active:O,containerId:f,isDragging:K,isSorting:ee,id:s,index:_,items:d,newIndex:H.current.newIndex,previousItems:H.current.items,previousContainerId:H.current.containerId,transition:u,wasDragging:H.current.activeId!=null}),ve=V6({disabled:!F,index:_,node:k,rect:N});return p.useEffect(()=>{ee&&H.current.newIndex!==X&&(H.current.newIndex=X),f!==H.current.containerId&&(H.current.containerId=f),d!==H.current.items&&(H.current.items=d)},[ee,X,f,d]),p.useEffect(()=>{if(T===H.current.activeId)return;if(T!=null&&H.current.activeId==null){H.current.activeId=T;return}const ie=setTimeout(()=>{H.current.activeId=T},50);return()=>clearTimeout(ie)},[T]),{active:O,activeIndex:h,attributes:J,data:j,rect:N,index:_,newIndex:X,items:d,isOver:C,isSorting:ee,isDragging:K,listeners:B,node:k,overIndex:v,over:D,setNodeRef:oe,setActivatorNodeRef:M,setDroppableNodeRef:E,setDraggableNodeRef:Z,transform:ve??$,transition:R()};function R(){if(ve||Q&&H.current.newIndex===_)return H6;if(!(P&&!Ph(A)||!u)&&(ee||F))return Kn.Transition.toString({...u,property:gE})}}function G6(e,t){var r,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(n=e==null?void 0:e.droppable)!=null?n:t.droppable}}We.Down,We.Right,We.Up,We.Left;function Tr(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function Vu(e){return`${(e*100).toFixed(1)}%`}function C_(e,t){const r=new Date().getHours(),n=r<12?"Good morning":r<18?"Good afternoon":"Good evening",a=["Let's close some deals","Time to crush your goals","Ready to dominate the market","Another day, another opportunity","Let's make it a winning day","Time to turn leads into gold","Your next closing is waiting","Great things happen to closers","Let's build your empire","Success is calling your name","Time to level up your game","Let's make today count"],i=["Rally the team to a strong finish","Spot the blockers and clear the way","Guide the pipeline to momentum","Coach for better follow-through today","Keep your team sharp and focused","Measure, adjust, and push the pace"],s=["Lead from the frontshow them the way","Tee up the right opportunities for the team","Mentor and keep the cadence tight","Keep your squad synced and confident","Set the tone and celebrate small wins","Align the team to the next milestones"],o=["Keep operations humming smoothly","Check the pulse and anticipate needs","Steady hands keep the flywheel spinning","Align the org and let the teams run","Remove friction and raise the bar","Your oversight keeps momentum steady"],c=e?e.split(" ")[0]:"",u=c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",d=u?`, ${u}`:"";let f=a;t==="sales_manager"?f=i:t==="team_lead"?f=s:t==="admin"&&(f=o);const h=f[Math.floor(Math.random()*f.length)];return`${n}${d}. ${h}!`}function Y6(){return new Intl.DateTimeFormat("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}).format(new Date)}function X6(e,t,r){const n=new Date,a=n.getFullYear(),i=n.getMonth(),s=Math.floor(i/3);switch(e){case"this_month":return{start:new Date(a,i,1),end:new Date(a,i+1,0,23,59,59)};case"last_30_days":const o=new Date(n);return o.setDate(o.getDate()-30),{start:o,end:n};case"this_quarter":return{start:new Date(a,s*3,1),end:new Date(a,(s+1)*3,0,23,59,59)};case"ytd":return{start:new Date(a,0,1),end:n};case"custom":return{start:t||new Date(a,0,1),end:r||n};default:return{start:new Date(a,0,1),end:n}}}function qi(e){const n=(e.actual_sale_price||e.expected_sale_price)*e.gross_commission_rate*(1-e.brokerage_split_rate);return(e.referral_out_rate?n*(1-e.referral_out_rate):n)-e.transaction_fee}function vE(e){const t=new Date(e),n=new Date().getTime()-t.getTime();return Math.floor(n/(1e3*60*60*24))}function E_(e,t=30){return vE(e)>t}function J6(e){if(!e||!e.startsWith("hsl("))return null;const t=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);return t?{h:parseInt(t[1],10),s:parseInt(t[2],10),l:parseInt(t[3],10)}:null}function Q6(e){if(!e||!e.toLowerCase().startsWith("rgb("))return null;const t=e.match(/rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)/i);if(!t)return null;const[r,n,a]=t.slice(1).map(i=>parseInt(i,10));return[r,n,a].some(i=>Number.isNaN(i)||i<0||i>255)?null:{r,g:n,b:a}}function Z6(e){if(!e||!e.startsWith("#"))return null;const r=e.trim().match(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i);if(!r)return null;let n=r[1];n.length===3&&(n=n.split("").map(o=>o+o).join(""));const a=parseInt(n.slice(0,2),16),i=parseInt(n.slice(2,4),16),s=parseInt(n.slice(4,6),16);return{r:a,g:i,b:s}}function eF(e){if(!e)return"#ffffff";const t=Z6(e);if(t)return(.2126*t.r+.7152*t.g+.0722*t.b)/255>.6?"#000000":"#ffffff";const r=J6(e);if(r)return r.l>60?"#000000":"#ffffff";const n=Q6(e);return n&&(.2126*n.r+.7152*n.g+.0722*n.b)/255>.6?"#000000":"#ffffff"}function Fh(e){if(!e)return"hsl(220, 70%, 50%)";const t=e.toLowerCase(),r=e.match(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i);return r?r[0]:t.startsWith("hsl(")||t.startsWith("rgb(")?e:{blue:"hsl(220, 70%, 50%)",cyan:"hsl(190, 65%, 48%)",teal:"hsl(165, 60%, 45%)",green:"hsl(145, 65%, 45%)",lime:"hsl(80, 60%, 50%)",yellow:"hsl(45, 100%, 50%)",orange:"hsl(25, 95%, 55%)",red:"hsl(5, 75%, 55%)",pink:"hsl(340, 70%, 55%)",purple:"hsl(280, 65%, 55%)",violet:"hsl(260, 60%, 55%)",indigo:"hsl(240, 65%, 55%)",slate:"hsl(200, 20%, 50%)",gray:"hsl(0, 0%, 50%)",brown:"hsl(30, 40%, 45%)",amber:"hsl(40, 95%, 50%)",emerald:"hsl(160, 70%, 45%)",sky:"hsl(200, 90%, 50%)",rose:"hsl(350, 80%, 55%)",mint:"hsl(175, 60%, 45%)"}[t]||"hsl(220, 70%, 50%)"}function Bh(e){const t=Fh(e),r=eF(t);return{bg:t,text:r}}function yE(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=yE(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Xe(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=yE(e))&&(n&&(n+=" "),n+=t);return n}var tF=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function R0(e){if(typeof e!="string")return!1;var t=tF;return t.includes(e)}var rF=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function xE(e){if(typeof e!="string")return!1;var t=rF;return t.includes(e)}function bE(e){return typeof e=="string"&&e.startsWith("data-")}function qn(e){var t=Object.entries(e).filter(r=>{var[n]=r;return xE(n)||bE(n)});return Object.fromEntries(t)}function Jc(e){if(e==null)return null;if(p.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return qn(t)}return typeof e=="object"&&!Array.isArray(e)?qn(e):null}function Nr(e){var t=Object.entries(e).filter(r=>{var[n]=r;return xE(n)||bE(n)||R0(n)});return Object.fromEntries(t)}function nF(e){return e==null?null:p.isValidElement(e)?Nr(e.props):typeof e=="object"&&!Array.isArray(e)?Nr(e):null}var aF=["children","width","height","viewBox","className","style","title","desc"];function xv(){return xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xv.apply(null,arguments)}function iF(e,t){if(e==null)return{};var r,n,a=sF(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function sF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var wE=p.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:i,className:s,style:o,title:c,desc:u}=e,d=iF(e,aF),f=i||{width:n,height:a,x:0,y:0},h=Xe("recharts-surface",s);return p.createElement("svg",xv({},Nr(d),{className:h,width:n,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),p.createElement("title",null,c),p.createElement("desc",null,u),r)}),oF=["children","className"];function bv(){return bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bv.apply(null,arguments)}function lF(e,t){if(e==null)return{};var r,n,a=cF(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function cF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var jn=p.forwardRef((e,t)=>{var{children:r,className:n}=e,a=lF(e,oF),i=Xe("recharts-layer",n);return p.createElement("g",bv({className:i},Nr(a),{ref:t}),r)}),uF=p.createContext(null);function tt(e){return function(){return e}}const _E=Math.cos,pf=Math.sin,Jn=Math.sqrt,mf=Math.PI,Uh=2*mf,wv=Math.PI,_v=2*wv,Ji=1e-6,dF=_v-Ji;function jE(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function fF(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return jE;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class hF{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?jE:fF(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,s){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,o=this._y1,c=n-t,u=a-r,d=s-t,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Ji)if(!(Math.abs(f*c-u*d)>Ji)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-s,g=a-o,y=c*c+u*u,v=m*m+g*g,x=Math.sqrt(y),w=Math.sqrt(h),b=i*Math.tan((wv-Math.acos((y+h-v)/(2*x*w)))/2),_=b/w,j=b/x;Math.abs(_-1)>Ji&&this._append`L${t+_*d},${r+_*f}`,this._append`A${i},${i},0,0,${+(f*m>d*g)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,a,i,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),c=n*Math.sin(a),u=t+o,d=r+c,f=1^s,h=s?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Ji||Math.abs(this._y1-d)>Ji)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%_v+_v),h>dF?this._append`A${n},${n},0,1,${f},${t-o},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Ji&&this._append`A${n},${n},0,${+(h>=wv)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function M0(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new hF(t)}function $0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function SE(e){this._context=e}SE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function zh(e){return new SE(e)}function NE(e){return e[0]}function kE(e){return e[1]}function CE(e,t){var r=tt(!0),n=null,a=zh,i=null,s=M0(o);e=typeof e=="function"?e:e===void 0?NE:tt(e),t=typeof t=="function"?t:t===void 0?kE:tt(t);function o(c){var u,d=(c=$0(c)).length,f,h=!1,m;for(n==null&&(i=a(m=s())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,c),+t(f,u,c));if(m)return i=null,m+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:tt(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:tt(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:tt(!!c),o):r},o.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),o):a},o.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),o):n},o}function Gu(e,t,r){var n=null,a=tt(!0),i=null,s=zh,o=null,c=M0(u);e=typeof e=="function"?e:e===void 0?NE:tt(+e),t=typeof t=="function"?t:tt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?kE:tt(+r);function u(f){var h,m,g,y=(f=$0(f)).length,v,x=!1,w,b=new Array(y),_=new Array(y);for(i==null&&(o=s(w=c())),h=0;h<=y;++h){if(!(h<y&&a(v=f[h],h,f))===x)if(x=!x)m=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=h-1;g>=m;--g)o.point(b[g],_[g]);o.lineEnd(),o.areaEnd()}x&&(b[h]=+e(v,h,f),_[h]=+t(v,h,f),o.point(n?+n(v,h,f):b[h],r?+r(v,h,f):_[h]))}if(w)return o=null,w+""||null}function d(){return CE().defined(a).curve(s).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:tt(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:tt(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:tt(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:tt(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:tt(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:tt(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:tt(!!f),u):a},u.curve=function(f){return arguments.length?(s=f,i!=null&&(o=s(i)),u):s},u.context=function(f){return arguments.length?(f==null?i=o=null:o=s(i=f),u):i},u}class EE{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function pF(e){return new EE(e,!0)}function mF(e){return new EE(e,!1)}const L0={draw(e,t){const r=Jn(t/mf);e.moveTo(r,0),e.arc(0,0,r,0,Uh)}},gF={draw(e,t){const r=Jn(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},PE=Jn(1/3),vF=PE*2,yF={draw(e,t){const r=Jn(t/vF),n=r*PE;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},xF={draw(e,t){const r=Jn(t),n=-r/2;e.rect(n,n,r,r)}},bF=.8908130915292852,OE=pf(mf/10)/pf(7*mf/10),wF=pf(Uh/10)*OE,_F=-_E(Uh/10)*OE,jF={draw(e,t){const r=Jn(t*bF),n=wF*r,a=_F*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const s=Uh*i/5,o=_E(s),c=pf(s);e.lineTo(c*r,-o*r),e.lineTo(o*n-c*a,c*n+o*a)}e.closePath()}},Dm=Jn(3),SF={draw(e,t){const r=-Jn(t/(Dm*3));e.moveTo(0,r*2),e.lineTo(-Dm*r,-r),e.lineTo(Dm*r,-r),e.closePath()}},dn=-.5,fn=Jn(3)/2,jv=1/Jn(12),NF=(jv/2+1)*3,kF={draw(e,t){const r=Jn(t/NF),n=r/2,a=r*jv,i=n,s=r*jv+r,o=-i,c=s;e.moveTo(n,a),e.lineTo(i,s),e.lineTo(o,c),e.lineTo(dn*n-fn*a,fn*n+dn*a),e.lineTo(dn*i-fn*s,fn*i+dn*s),e.lineTo(dn*o-fn*c,fn*o+dn*c),e.lineTo(dn*n+fn*a,dn*a-fn*n),e.lineTo(dn*i+fn*s,dn*s-fn*i),e.lineTo(dn*o+fn*c,dn*c-fn*o),e.closePath()}};function CF(e,t){let r=null,n=M0(a);e=typeof e=="function"?e:tt(e||L0),t=typeof t=="function"?t:tt(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:tt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:tt(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function gf(){}function vf(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function AE(e){this._context=e}AE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:vf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:vf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function EF(e){return new AE(e)}function TE(e){this._context=e}TE.prototype={areaStart:gf,areaEnd:gf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:vf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function PF(e){return new TE(e)}function DE(e){this._context=e}DE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:vf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function OF(e){return new DE(e)}function IE(e){this._context=e}IE.prototype={areaStart:gf,areaEnd:gf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function AF(e){return new IE(e)}function P_(e){return e<0?-1:1}function O_(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),s=(r-e._y1)/(a||n<0&&-0),o=(i*a+s*n)/(n+a);return(P_(i)+P_(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(o))||0}function A_(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Im(e,t,r){var n=e._x0,a=e._y0,i=e._x1,s=e._y1,o=(i-n)/3;e._context.bezierCurveTo(n+o,a+o*t,i-o,s-o*r,i,s)}function yf(e){this._context=e}yf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Im(this,this._t0,A_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Im(this,A_(this,r=O_(this,e,t)),r);break;default:Im(this,this._t0,r=O_(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function RE(e){this._context=new ME(e)}(RE.prototype=Object.create(yf.prototype)).point=function(e,t){yf.prototype.point.call(this,t,e)};function ME(e){this._context=e}ME.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function TF(e){return new yf(e)}function DF(e){return new RE(e)}function $E(e){this._context=e}$E.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=T_(e),a=T_(t),i=0,s=1;s<r;++i,++s)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function T_(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),s=new Array(r);for(a[0]=0,i[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,s[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,s[t]-=n*s[t-1];for(a[r-1]=s[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(s[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function IF(e){return new $E(e)}function Wh(e,t){this._context=e,this._t=t}Wh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function RF(e){return new Wh(e,.5)}function MF(e){return new Wh(e,0)}function $F(e){return new Wh(e,1)}function Ro(e,t){if((s=e.length)>1)for(var r=1,n,a,i=e[t[0]],s,o=i.length;r<s;++r)for(a=i,i=e[t[r]],n=0;n<o;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Sv(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function LF(e,t){return e[t]}function FF(e){const t=[];return t.key=e,t}function BF(){var e=tt([]),t=Sv,r=Ro,n=LF;function a(i){var s=Array.from(e.apply(this,arguments),FF),o,c=s.length,u=-1,d;for(const f of i)for(o=0,++u;o<c;++o)(s[o][u]=[0,+n(f,s[o].key,u,i)]).data=f;for(o=0,d=$0(t(s));o<c;++o)s[d[o]].index=o;return r(s,d),s}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:tt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:tt(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?Sv:typeof i=="function"?i:tt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Ro,a):r},a}function UF(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,s;a<i;++a){for(s=r=0;r<n;++r)s+=e[r][a][1]||0;if(s)for(r=0;r<n;++r)e[r][a][1]/=s}Ro(e,t)}}function zF(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var s=0,o=0;s<a;++s)o+=e[s][r][1]||0;n[r][1]+=n[r][0]=-o/2}Ro(e,t)}}function WF(e,t){if(!(!((s=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,s;n<i;++n){for(var o=0,c=0,u=0;o<s;++o){for(var d=e[t[o]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,g=0;g<o;++g){var y=e[t[g]],v=y[n][1]||0,x=y[n-1][1]||0;m+=v-x}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Ro(e,t)}}var Kh={},LE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(LE);var F0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(F0);var Hh={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Hh);var qh={},FE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(FE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FE,r=Hh;function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=t.toString(a);const i=[],s=a.length;if(s===0)return i;let o=0,c="",u="",d=!1;for(a.charCodeAt(0)===46&&(i.push(""),o++);o<s;){const f=a[o];u?f==="\\"&&o+1<s?(o++,c+=a[o]):f===u?u="":c+=f:d?f==='"'||f==="'"?u=f:f==="]"?(d=!1,i.push(c),c=""):c+=f:f==="["?(d=!0,c&&(i.push(c),c="")):f==="."?c&&(i.push(c),c=""):c+=f,o++}return c&&i.push(c),i}e.toPath=n})(qh);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LE,r=F0,n=Hh,a=qh;function i(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?r.isDeepKey(c)?i(o,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=o[c];return d===void 0?u:d}default:{if(Array.isArray(c))return s(o,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?u:d}}}function s(o,c,u){if(c.length===0)return u;let d=o;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=i})(Kh);var KF=Kh.get;const Mo=Ua(KF);var Mr=e=>e===0?0:e>0?1:-1,Vn=e=>typeof e=="number"&&e!=+e,Ia=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,we=e=>(typeof e=="number"||e instanceof Number)&&!Vn(e),ua=e=>we(e)||typeof e=="string",HF=0,Nc=e=>{var t=++HF;return"".concat(e||"").concat(t)},Gn=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!we(t)&&typeof t!="string")return n;var i;if(Ia(t)){if(r==null)return n;var s=t.indexOf("%");i=r*parseFloat(t.slice(0,s))/100}else i=+t;return Vn(i)&&(i=n),a&&r!=null&&i>r&&(i=r),i},BE=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function jt(e,t,r){return we(e)&&we(t)?e+r*(t-e):t}function UE(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Mo(n,t))===r)}var ft=e=>e===null||typeof e>"u",Qc=e=>ft(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function qF(e){return e!=null}function nl(){}var VF=["type","size","sizeType"];function Nv(){return Nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nv.apply(null,arguments)}function D_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function I_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D_(Object(r),!0).forEach(function(n){GF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GF(e,t,r){return(t=YF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YF(e){var t=XF(e,"string");return typeof t=="symbol"?t:t+""}function XF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JF(e,t){if(e==null)return{};var r,n,a=QF(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function QF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zE={symbolCircle:L0,symbolCross:gF,symbolDiamond:yF,symbolSquare:xF,symbolStar:jF,symbolTriangle:SF,symbolWye:kF},ZF=Math.PI/180,eB=e=>{var t="symbol".concat(Qc(e));return zE[t]||L0},tB=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*ZF;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},rB=(e,t)=>{zE["symbol".concat(Qc(e))]=t},WE=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=JF(e,VF),i=I_(I_({},a),{},{type:t,size:r,sizeType:n}),s="circle";typeof t=="string"&&(s=t);var o=()=>{var h=eB(s),m=CF().type(h).size(tB(r,n,s)),g=m();if(g!==null)return g},{className:c,cx:u,cy:d}=i,f=Nr(i);return we(u)&&we(d)&&we(r)?p.createElement("path",Nv({},f,{className:Xe("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:o()})):null};WE.registerSymbol=rB;var KE=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,B0=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(p.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{R0(a)&&(n[a]=i=>r[a](r,i))}),n},nB=(e,t,r)=>n=>(e(t,r,n),null),U0=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var i=e[a];R0(a)&&typeof i=="function"&&(n||(n={}),n[a]=nB(i,t,r))}),n};function R_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function aB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R_(Object(r),!0).forEach(function(n){iB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iB(e,t,r){return(t=sB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sB(e){var t=oB(e,"string");return typeof t=="symbol"?t:t+""}function oB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pr(e,t){var r=aB({},e),n=t,a=Object.keys(t),i=a.reduce((s,o)=>(s[o]===void 0&&n[o]!==void 0&&(s[o]=n[o]),s),r);return i}var HE={},qE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let i=0;i<r.length;i++){const s=r[i],o=n(s);a.has(o)||a.set(o,s)}return Array.from(a.values())}e.uniqBy=t})(qE);var z0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(z0);var VE={},Vh={},GE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(GE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GE;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Vh);var YE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(YE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Vh,r=YE;function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(VE);var XE={},JE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kh;function r(n){return function(a){return t.get(a,n)}}e.property=r})(JE);var QE={},W0={},ZE={},K0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(K0);var H0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(H0);var q0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(q0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=K0,r=H0,n=q0;function a(d,f,h){return typeof h!="function"?a(d,f,()=>{}):i(d,f,function m(g,y,v,x,w,b){const _=h(g,y,v,x,w,b);return _!==void 0?!!_:i(g,y,m,b)},new Map)}function i(d,f,h,m){if(f===d)return!0;switch(typeof f){case"object":return s(d,f,h,m);case"function":return Object.keys(f).length>0?i(d,{...f},h,m):n.eq(d,f);default:return t.isObject(d)?typeof f=="string"?f==="":!0:n.eq(d,f)}}function s(d,f,h,m){if(f==null)return!0;if(Array.isArray(f))return c(d,f,h,m);if(f instanceof Map)return o(d,f,h,m);if(f instanceof Set)return u(d,f,h,m);const g=Object.keys(f);if(d==null)return g.length===0;if(g.length===0)return!0;if(m!=null&&m.has(f))return m.get(f)===d;m==null||m.set(f,d);try{for(let y=0;y<g.length;y++){const v=g[y];if(!r.isPrimitive(d)&&!(v in d)||f[v]===void 0&&d[v]!==void 0||f[v]===null&&d[v]!==null||!h(d[v],f[v],v,d,f,m))return!1}return!0}finally{m==null||m.delete(f)}}function o(d,f,h,m){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[g,y]of f.entries()){const v=d.get(g);if(h(v,y,g,d,f,m)===!1)return!1}return!0}function c(d,f,h,m){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const g=new Set;for(let y=0;y<f.length;y++){const v=f[y];let x=!1;for(let w=0;w<d.length;w++){if(g.has(w))continue;const b=d[w];let _=!1;if(h(b,v,y,d,f,m)&&(_=!0),_){g.add(w),x=!0;break}}if(!x)return!1}return!0}function u(d,f,h,m){return f.size===0?!0:d instanceof Set?c([...d],[...f],h,m):!1}e.isMatchWith=a,e.isSetMatch=u})(ZE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZE;function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r})(W0);var eP={},V0={},tP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(tP);var G0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(G0);var Y0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",i="[object Arguments]",s="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",m="[object Object]",g="[object Error]",y="[object DataView]",v="[object Uint8Array]",x="[object Uint8ClampedArray]",w="[object Uint16Array]",b="[object Uint32Array]",_="[object BigUint64Array]",j="[object Int8Array]",S="[object Int16Array]",N="[object Int32Array]",k="[object BigInt64Array]",C="[object Float32Array]",E="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=k,e.bigUint64ArrayTag=_,e.booleanTag=a,e.dataViewTag=y,e.dateTag=o,e.errorTag=g,e.float32ArrayTag=C,e.float64ArrayTag=E,e.functionTag=f,e.int16ArrayTag=S,e.int32ArrayTag=N,e.int8ArrayTag=j,e.mapTag=c,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=s,e.uint16ArrayTag=w,e.uint32ArrayTag=b,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=x})(Y0);var rP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(rP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tP,r=G0,n=Y0,a=H0,i=rP;function s(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,m=new Map,g=void 0){const y=g==null?void 0:g(d,f,h,m);if(y!==void 0)return y;if(a.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const v=new Array(d.length);m.set(d,v);for(let x=0;x<d.length;x++)v[x]=o(d[x],x,h,m,g);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;m.set(d,v);for(const[x,w]of d)v.set(x,o(w,x,h,m,g));return v}if(d instanceof Set){const v=new Set;m.set(d,v);for(const x of d)v.add(o(x,void 0,h,m,g));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,v);for(let x=0;x<d.length;x++)v[x]=o(d[x],x,h,m,g);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,v),c(v,d,h,m,g),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(typeof Blob<"u"&&d instanceof Blob){const v=new Blob([d],{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Error){const v=new d.constructor;return m.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,c(v,d,h,m,g),v}if(d instanceof Boolean){const v=new Boolean(d.valueOf());return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Number){const v=new Number(d.valueOf());return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof String){const v=new String(d.valueOf());return m.set(d,v),c(v,d,h,m,g),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return m.set(d,v),c(v,d,h,m,g),v}return d}function c(d,f,h=d,m,g){const y=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<y.length;v++){const x=y[v],w=Object.getOwnPropertyDescriptor(d,x);(w==null||w.writable)&&(d[x]=o(f[x],x,h,m,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=s,e.cloneDeepWithImpl=o,e.copyProperties=c})(V0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=V0;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(eP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=W0,r=eP;function n(a){return a=r.cloneDeep(a),i=>t.isMatch(i,a)}e.matches=n})(QE);var nP={},aP={},iP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=V0,r=Y0;function n(a,i){return t.cloneDeepWith(a,(s,o,c,u)=>{const d=i==null?void 0:i(s,o,c,u);if(d!==void 0)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(iP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iP;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(aP);var sP={},X0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(X0);var oP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G0;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(oP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=F0,r=X0,n=oP,a=qh;function i(s,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&(s==null?void 0:s[o])==null?c=a.toPath(o):c=[o],c.length===0)return!1;let u=s;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=i})(sP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=W0,r=Hh,n=aP,a=Kh,i=sP;function s(o,c){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,o);return d===void 0?i.has(u,o):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=s})(nP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=z0,r=JE,n=QE,a=nP;function i(s){if(s==null)return t.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?a.matchesProperty(s[0],s[1]):n.matches(s);case"string":case"symbol":case"number":return r.property(s)}}e.iteratee=i})(XE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qE,r=z0,n=VE,a=XE;function i(s,o=r.identity){return n.isArrayLikeObject(s)?t.uniqBy(Array.from(s),a.iteratee(o)):[]}e.uniqBy=i})(HE);var lB=HE.uniqBy;const M_=Ua(lB);function cB(e,t,r){return t===!0?M_(e,r):typeof t=="function"?M_(e,t):e}var lP={exports:{}},cP={},uP={exports:{}},dP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $o=p;function uB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dB=typeof Object.is=="function"?Object.is:uB,fB=$o.useState,hB=$o.useEffect,pB=$o.useLayoutEffect,mB=$o.useDebugValue;function gB(e,t){var r=t(),n=fB({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return pB(function(){a.value=r,a.getSnapshot=t,Rm(a)&&i({inst:a})},[e,r,t]),hB(function(){return Rm(a)&&i({inst:a}),e(function(){Rm(a)&&i({inst:a})})},[e]),mB(r),r}function Rm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!dB(e,r)}catch{return!0}}function vB(e,t){return t()}var yB=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?vB:gB;dP.useSyncExternalStore=$o.useSyncExternalStore!==void 0?$o.useSyncExternalStore:yB;uP.exports=dP;var xB=uP.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gh=p,bB=xB;function wB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _B=typeof Object.is=="function"?Object.is:wB,jB=bB.useSyncExternalStore,SB=Gh.useRef,NB=Gh.useEffect,kB=Gh.useMemo,CB=Gh.useDebugValue;cP.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=SB(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=kB(function(){function c(m){if(!u){if(u=!0,d=m,m=n(m),a!==void 0&&s.hasValue){var g=s.value;if(a(g,m))return f=g}return f=m}if(g=f,_B(d,m))return g;var y=n(m);return a!==void 0&&a(g,y)?(d=m,g):(d=m,f=y)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,a]);var o=jB(e,i[0],i[1]);return NB(function(){s.hasValue=!0,s.value=o},[o]),CB(o),o};lP.exports=cP;var EB=lP.exports,J0=p.createContext(null),PB=e=>e,Pt=()=>{var e=p.useContext(J0);return e?e.store.dispatch:PB},Cd=()=>{},OB=()=>Cd,AB=(e,t)=>e===t;function Se(e){var t=p.useContext(J0);return EB.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:OB,t?t.store.getState:Cd,t?t.store.getState:Cd,t?e:Cd,AB)}function TB(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function DB(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function IB(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var $_=e=>Array.isArray(e)?e:[e];function RB(e){const t=Array.isArray(e[0])?e[0]:e;return IB(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function MB(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var $B=class{constructor(e){this.value=e}deref(){return this.value}},LB=typeof WeakRef<"u"?WeakRef:$B,FB=0,L_=1;function Yu(){return{s:FB,v:void 0,o:null,p:null}}function fP(e,t={}){let r=Yu();const{resultEqualityCheck:n}=t;let a,i=0;function s(){var f;let o=r;const{length:c}=arguments;for(let h=0,m=c;h<m;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let y=o.o;y===null&&(o.o=y=new WeakMap);const v=y.get(g);v===void 0?(o=Yu(),y.set(g,o)):o=v}else{let y=o.p;y===null&&(o.p=y=new Map);const v=y.get(g);v===void 0?(o=Yu(),y.set(g,o)):o=v}}const u=o;let d;if(o.s===L_)d=o.v;else if(d=e.apply(null,arguments),i++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,i!==0&&i--),a=typeof d=="object"&&d!==null||typeof d=="function"?new LB(d):d}return u.s=L_,u.v=d,d}return s.clearCache=()=>{r=Yu(),s.resetResultsCount()},s.resultsCount=()=>i,s.resetResultsCount=()=>{i=0},s}function BB(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let i=0,s=0,o,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),TB(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:m=fP,argsMemoizeOptions:g=[]}=d,y=$_(h),v=$_(g),x=RB(a),w=f(function(){return i++,u.apply(null,arguments)},...y),b=m(function(){s++;const j=MB(x,arguments);return o=w.apply(null,j),o},...v);return Object.assign(b,{resultFunc:u,memoizedResultFunc:w,dependencies:x,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var U=BB(fP),UB=Object.assign((e,t=U)=>{DB(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((s,o,c)=>(s[r[c]]=o,s),{}))},{withTypes:()=>UB}),hP={},pP={},mP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,i)=>{if(n!==a){const s=t(n),o=t(a);if(s===o&&s===0){if(n<a)return i==="desc"?1:-1;if(n>a)return i==="desc"?-1:1}return i==="desc"?o-s:s-o}return 0};e.compareValues=r})(mP);var gP={},Q0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(Q0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Q0,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,s){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||s!=null&&Object.hasOwn(s,i)}e.isKey=a})(gP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mP,r=gP,n=qh;function a(i,s,o,c){if(i==null)return[];o=c?void 0:o,Array.isArray(i)||(i=Object.values(i)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(m=>String(m));const u=(m,g)=>{let y=m;for(let v=0;v<g.length&&y!=null;++v)y=y[g[v]];return y},d=(m,g)=>g==null||m==null?g:typeof m=="object"&&"key"in m?Object.hasOwn(g,m.key)?g[m.key]:u(g,m.path):typeof m=="function"?m(g):Array.isArray(m)?u(g,m):typeof g=="object"?g[m]:g,f=s.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return i.map(m=>({original:m,criteria:f.map(g=>d(g,m))})).slice().sort((m,g)=>{for(let y=0;y<f.length;y++){const v=t.compareValues(m.criteria[y],g.criteria[y],o[y]);if(v!==0)return v}return 0}).map(m=>m.original)}e.orderBy=a})(pP);var vP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],i=Math.floor(n),s=(o,c)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&c<i?s(d,c+1):a.push(d)}};return s(r,0),a}e.flatten=t})(vP);var Z0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X0,r=Vh,n=K0,a=q0;function i(s,o,c){return n.isObject(c)&&(typeof o=="number"&&r.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?a.eq(c[o],s):!1}e.isIterateeCall=i})(Z0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pP,r=vP,n=Z0;function a(i,...s){const o=s.length;return o>1&&n.isIterateeCall(i,s[0],s[1])?s=[]:o>2&&n.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),t.orderBy(i,r.flatten(s),["asc"])}e.sortBy=a})(hP);var zB=hP.sortBy;const Yh=Ua(zB);var yP=e=>e.legend.settings,WB=e=>e.legend.size,KB=e=>e.legend.payload;U([KB,yP],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Yh(n,r):n});var Xu=1;function HB(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=p.useState({height:0,left:0,top:0,width:0}),n=p.useCallback(a=>{if(a!=null){var i=a.getBoundingClientRect(),s={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(s.height-t.height)>Xu||Math.abs(s.left-t.left)>Xu||Math.abs(s.top-t.top)>Xu||Math.abs(s.width-t.width)>Xu)&&r({height:s.height,left:s.left,top:s.top,width:s.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function ir(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var qB=typeof Symbol=="function"&&Symbol.observable||"@@observable",F_=qB,Mm=()=>Math.random().toString(36).substring(7).split("").join("."),VB={INIT:`@@redux/INIT${Mm()}`,REPLACE:`@@redux/REPLACE${Mm()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Mm()}`},xf=VB;function ex(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function xP(e,t,r){if(typeof e!="function")throw new Error(ir(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ir(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ir(1));return r(xP)(e,t)}let n=e,a=t,i=new Map,s=i,o=0,c=!1;function u(){s===i&&(s=new Map,i.forEach((v,x)=>{s.set(x,v)}))}function d(){if(c)throw new Error(ir(3));return a}function f(v){if(typeof v!="function")throw new Error(ir(4));if(c)throw new Error(ir(5));let x=!0;u();const w=o++;return s.set(w,v),function(){if(x){if(c)throw new Error(ir(6));x=!1,u(),s.delete(w),i=null}}}function h(v){if(!ex(v))throw new Error(ir(7));if(typeof v.type>"u")throw new Error(ir(8));if(typeof v.type!="string")throw new Error(ir(17));if(c)throw new Error(ir(9));try{c=!0,a=n(a,v)}finally{c=!1}return(i=s).forEach(w=>{w()}),v}function m(v){if(typeof v!="function")throw new Error(ir(10));n=v,h({type:xf.REPLACE})}function g(){const v=f;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(ir(11));function w(){const _=x;_.next&&_.next(d())}return w(),{unsubscribe:v(w)}},[F_](){return this}}}return h({type:xf.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:m,[F_]:g}}function GB(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:xf.INIT})>"u")throw new Error(ir(12));if(typeof r(void 0,{type:xf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ir(13))})}function bP(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const s=t[i];typeof e[s]=="function"&&(r[s]=e[s])}const n=Object.keys(r);let a;try{GB(r)}catch(i){a=i}return function(s={},o){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],m=s[f],g=h(m,o);if(typeof g>"u")throw o&&o.type,new Error(ir(14));u[f]=g,c=c||g!==m}return c=c||n.length!==Object.keys(s).length,c?u:s}}function bf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function YB(...e){return t=>(r,n)=>{const a=t(r,n);let i=()=>{throw new Error(ir(15))};const s={getState:a.getState,dispatch:(c,...u)=>i(c,...u)},o=e.map(c=>c(s));return i=bf(...o)(a.dispatch),{...a,dispatch:i}}}function wP(e){return ex(e)&&"type"in e&&typeof e.type=="string"}var _P=Symbol.for("immer-nothing"),B_=Symbol.for("immer-draftable"),on=Symbol.for("immer-state");function Ln(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var kc=Object.getPrototypeOf;function js(e){return!!e&&!!e[on]}function Ra(e){var t;return e?jP(e)||Array.isArray(e)||!!e[B_]||!!((t=e.constructor)!=null&&t[B_])||Zc(e)||Jh(e):!1}var XB=Object.prototype.constructor.toString(),U_=new WeakMap;function jP(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=U_.get(r);return n===void 0&&(n=Function.toString.call(r),U_.set(r,n)),n===XB}function wf(e,t,r=!0){Xh(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function Xh(e){const t=e[on];return t?t.type_:Array.isArray(e)?1:Zc(e)?2:Jh(e)?3:0}function kv(e,t){return Xh(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function SP(e,t,r){const n=Xh(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function JB(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Zc(e){return e instanceof Map}function Jh(e){return e instanceof Set}function Qi(e){return e.copy_||e.base_}function Cv(e,t){if(Zc(e))return new Map(e);if(Jh(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=jP(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[on];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){const s=a[i],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(kc(e),n)}else{const n=kc(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function tx(e,t=!1){return Qh(e)||js(e)||!Ra(e)||(Xh(e)>1&&Object.defineProperties(e,{set:Ju,add:Ju,clear:Ju,delete:Ju}),Object.freeze(e),t&&Object.values(e).forEach(r=>tx(r,!0))),e}function QB(){Ln(2)}var Ju={value:QB};function Qh(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var ZB={};function Ss(e){const t=ZB[e];return t||Ln(0,e),t}var Cc;function NP(){return Cc}function eU(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function z_(e,t){t&&(Ss("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ev(e){Pv(e),e.drafts_.forEach(tU),e.drafts_=null}function Pv(e){e===Cc&&(Cc=e.parent_)}function W_(e){return Cc=eU(Cc,e)}function tU(e){const t=e[on];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function K_(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[on].modified_&&(Ev(t),Ln(4)),Ra(e)&&(e=_f(t,e),t.parent_||jf(t,e)),t.patches_&&Ss("Patches").generateReplacementPatches_(r[on].base_,e,t.patches_,t.inversePatches_)):e=_f(t,r,[]),Ev(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==_P?e:void 0}function _f(e,t,r){if(Qh(t))return t;const n=e.immer_.shouldUseStrictIteration(),a=t[on];if(!a)return wf(t,(i,s)=>H_(e,a,t,i,s,r),n),t;if(a.scope_!==e)return t;if(!a.modified_)return jf(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const i=a.copy_;let s=i,o=!1;a.type_===3&&(s=new Set(i),i.clear(),o=!0),wf(s,(c,u)=>H_(e,a,i,c,u,r,o),n),jf(e,i,!1),r&&e.patches_&&Ss("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function H_(e,t,r,n,a,i,s){if(a==null||typeof a!="object"&&!s)return;const o=Qh(a);if(!(o&&!s)){if(js(a)){const c=i&&t&&t.type_!==3&&!kv(t.assigned_,n)?i.concat(n):void 0,u=_f(e,a,c);if(SP(r,n,u),js(u))e.canAutoFreeze_=!1;else return}else s&&r.add(a);if(Ra(a)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===a&&o)return;_f(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Zc(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&jf(e,a)}}}function jf(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&tx(t,r)}function rU(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:NP(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=rx;r&&(a=[n],i=Ec);const{revoke:s,proxy:o}=Proxy.revocable(a,i);return n.draft_=o,n.revoke_=s,o}var rx={get(e,t){if(t===on)return e;const r=Qi(e);if(!kv(r,t))return nU(e,r,t);const n=r[t];return e.finalized_||!Ra(n)?n:n===$m(e.base_,t)?(Lm(e),e.copy_[t]=Av(n,e)):n},has(e,t){return t in Qi(e)},ownKeys(e){return Reflect.ownKeys(Qi(e))},set(e,t,r){const n=kP(Qi(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=$m(Qi(e),t),i=a==null?void 0:a[on];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(JB(r,a)&&(r!==void 0||kv(e.base_,t)))return!0;Lm(e),Ov(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return $m(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Lm(e),Ov(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Qi(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Ln(11)},getPrototypeOf(e){return kc(e.base_)},setPrototypeOf(){Ln(12)}},Ec={};wf(rx,(e,t)=>{Ec[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ec.deleteProperty=function(e,t){return Ec.set.call(this,e,t,void 0)};Ec.set=function(e,t,r){return rx.set.call(this,e[0],t,r,e[0])};function $m(e,t){const r=e[on];return(r?Qi(r):e)[t]}function nU(e,t,r){var a;const n=kP(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function kP(e,t){if(!(t in e))return;let r=kc(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=kc(r)}}function Ov(e){e.modified_||(e.modified_=!0,e.parent_&&Ov(e.parent_))}function Lm(e){e.copy_||(e.copy_=Cv(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var aU=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const s=this;return function(c=i,...u){return s.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Ln(6),n!==void 0&&typeof n!="function"&&Ln(7);let a;if(Ra(t)){const i=W_(this),s=Av(t,void 0);let o=!0;try{a=r(s),o=!1}finally{o?Ev(i):Pv(i)}return z_(i,n),K_(a,i)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===_P&&(a=void 0),this.autoFreeze_&&tx(a,!0),n){const i=[],s=[];Ss("Patches").generateReplacementPatches_(t,a,i,s),n(i,s)}return a}else Ln(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(s,...o)=>this.produceWithPatches(s,c=>t(c,...o));let n,a;return[this.produce(t,r,(s,o)=>{n=s,a=o}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ra(e)||Ln(8),js(e)&&(e=Na(e));const t=W_(this),r=Av(e,void 0);return r[on].isManual_=!0,Pv(t),r}finishDraft(e,t){const r=e&&e[on];(!r||!r.isManual_)&&Ln(9);const{scope_:n}=r;return z_(n,t),K_(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Ss("Patches").applyPatches_;return js(e)?n(e,t):this.produce(e,a=>n(a,t))}};function Av(e,t){const r=Zc(e)?Ss("MapSet").proxyMap_(e,t):Jh(e)?Ss("MapSet").proxySet_(e,t):rU(e,t);return(t?t.scope_:NP()).drafts_.push(r),r}function Na(e){return js(e)||Ln(10,e),CP(e)}function CP(e){if(!Ra(e)||Qh(e))return e;const t=e[on];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Cv(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Cv(e,!0);return wf(r,(a,i)=>{SP(r,a,CP(i))},n),t&&(t.finalized_=!1),r}var Tv=new aU,EP=Tv.produce,iU=Tv.setUseStrictIteration.bind(Tv);function PP(e){return({dispatch:r,getState:n})=>a=>i=>typeof i=="function"?i(r,n,e):a(i)}var sU=PP(),oU=PP,lU=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?bf:bf.apply(null,arguments)};function Sn(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(nn(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>wP(n)&&n.type===e,r}var OP=class $l extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,$l.prototype)}static get[Symbol.species](){return $l}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new $l(...t[0].concat(this)):new $l(...t.concat(this))}};function q_(e){return Ra(e)?EP(e,()=>{}):e}function Qu(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function cU(e){return typeof e=="boolean"}var uU=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t??{};let s=new OP;return r&&(cU(r)?s.push(sU):s.push(oU(r.extraArgument))),s},AP="RTK_autoBatch",Ut=()=>e=>({payload:e,meta:{[AP]:!0}}),V_=e=>t=>{setTimeout(t,e)},TP=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,i=!1,s=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:V_(10):e.type==="callback"?e.queueNotification:V_(e.timeout),u=()=>{s=!1,i&&(i=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[AP]),i=!a,i&&(s||(s=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},dU=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new OP(e);return n&&a.push(TP(typeof n=="object"?n:void 0)),a};function fU(e){const t=uU(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:i=void 0,enhancers:s=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(ex(r))o=bP(r);else throw new Error(nn(1));let c;typeof n=="function"?c=n(t):c=t();let u=bf;a&&(u=lU({trace:!1,...typeof a=="object"&&a}));const d=YB(...c),f=dU(d);let h=typeof s=="function"?s(f):f();const m=u(...h);return xP(o,i,m)}function DP(e){const t={},r=[];let n;const a={addCase(i,s){const o=typeof i=="string"?i:i.type;if(!o)throw new Error(nn(28));if(o in t)throw new Error(nn(29));return t[o]=s,a},addAsyncThunk(i,s){return s.pending&&(t[i.pending.type]=s.pending),s.rejected&&(t[i.rejected.type]=s.rejected),s.fulfilled&&(t[i.fulfilled.type]=s.fulfilled),s.settled&&r.push({matcher:i.settled,reducer:s.settled}),a},addMatcher(i,s){return r.push({matcher:i,reducer:s}),a},addDefaultCase(i){return n=i,a}};return e(a),[t,r,n]}iU(!1);function hU(e){return typeof e=="function"}function pU(e,t){let[r,n,a]=DP(t),i;if(hU(e))i=()=>q_(e());else{const o=q_(e);i=()=>o}function s(o=i(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(js(d)){const m=f(d,c);return m===void 0?d:m}else{if(Ra(d))return EP(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return s.getInitialState=i,s}var mU="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",gU=(e=21)=>{let t="",r=e;for(;r--;)t+=mU[Math.random()*64|0];return t},vU=Symbol.for("rtk-slice-createasyncthunk");function yU(e,t){return`${e}/${t}`}function xU({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[vU];return function(a){const{name:i,reducerPath:s=i}=a;if(!i)throw new Error(nn(11));const o=(typeof a.reducers=="function"?a.reducers(wU()):a.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(_,j){const S=typeof _=="string"?_:_.type;if(!S)throw new Error(nn(12));if(S in u.sliceCaseReducersByType)throw new Error(nn(13));return u.sliceCaseReducersByType[S]=j,d},addMatcher(_,j){return u.sliceMatchers.push({matcher:_,reducer:j}),d},exposeAction(_,j){return u.actionCreators[_]=j,d},exposeCaseReducer(_,j){return u.sliceCaseReducersByName[_]=j,d}};c.forEach(_=>{const j=o[_],S={reducerName:_,type:yU(i,_),createNotation:typeof a.reducers=="function"};jU(j)?NU(S,j,d,t):_U(S,j,d)});function f(){const[_={},j=[],S=void 0]=typeof a.extraReducers=="function"?DP(a.extraReducers):[a.extraReducers],N={..._,...u.sliceCaseReducersByType};return pU(a.initialState,k=>{for(let C in N)k.addCase(C,N[C]);for(let C of u.sliceMatchers)k.addMatcher(C.matcher,C.reducer);for(let C of j)k.addMatcher(C.matcher,C.reducer);S&&k.addDefaultCase(S)})}const h=_=>_,m=new Map,g=new WeakMap;let y;function v(_,j){return y||(y=f()),y(_,j)}function x(){return y||(y=f()),y.getInitialState()}function w(_,j=!1){function S(k){let C=k[_];return typeof C>"u"&&j&&(C=Qu(g,S,x)),C}function N(k=h){const C=Qu(m,j,()=>new WeakMap);return Qu(C,k,()=>{const E={};for(const[O,A]of Object.entries(a.selectors??{}))E[O]=bU(A,k,()=>Qu(g,k,x),j);return E})}return{reducerPath:_,getSelectors:N,get selectors(){return N(S)},selectSlice:S}}const b={name:i,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:x,...w(s),injectInto(_,{reducerPath:j,...S}={}){const N=j??s;return _.inject({reducerPath:N,reducer:v},S),{...b,...w(N,!0)}}};return b}}function bU(e,t,r,n){function a(i,...s){let o=t(i);return typeof o>"u"&&n&&(o=r()),e(o,...s)}return a.unwrapped=e,a}var Ur=xU();function wU(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function _U({type:e,reducerName:t,createNotation:r},n,a){let i,s;if("reducer"in n){if(r&&!SU(n))throw new Error(nn(17));i=n.reducer,s=n.prepare}else i=n;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,s?Sn(e,s):Sn(e))}function jU(e){return e._reducerDefinitionType==="asyncThunk"}function SU(e){return e._reducerDefinitionType==="reducerWithPrepare"}function NU({type:e,reducerName:t},r,n,a){if(!a)throw new Error(nn(18));const{payloadCreator:i,fulfilled:s,pending:o,rejected:c,settled:u,options:d}=r,f=a(e,i,d);n.exposeAction(t,f),s&&n.addCase(f.fulfilled,s),o&&n.addCase(f.pending,o),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:s||Zu,pending:o||Zu,rejected:c||Zu,settled:u||Zu})}function Zu(){}var kU="task",IP="listener",RP="completed",nx="cancelled",CU=`task-${nx}`,EU=`task-${RP}`,Dv=`${IP}-${nx}`,PU=`${IP}-${RP}`,Zh=class{constructor(e){Kp(this,"name","TaskAbortError");Kp(this,"message");this.code=e,this.message=`${kU} ${nx} (reason: ${e})`}},ax=(e,t)=>{if(typeof e!="function")throw new TypeError(nn(32))},Sf=()=>{},MP=(e,t=Sf)=>(e.catch(t),e),$P=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),fs=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},hs=e=>{if(e.aborted){const{reason:t}=e;throw new Zh(t)}};function LP(e,t){let r=Sf;return new Promise((n,a)=>{const i=()=>a(new Zh(e.reason));if(e.aborted){i();return}r=$P(e,i),t.finally(()=>r()).then(n,a)}).finally(()=>{r=Sf})}var OU=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Zh?"cancelled":"rejected",error:r}}finally{t==null||t()}},Nf=e=>t=>MP(LP(e,t).then(r=>(hs(e),r))),FP=e=>{const t=Nf(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:jo}=Object,G_={},ep="listenerMiddleware",AU=(e,t)=>{const r=n=>$P(e,()=>fs(n,e.reason));return(n,a)=>{ax(n);const i=new AbortController;r(i);const s=OU(async()=>{hs(e),hs(i.signal);const o=await n({pause:Nf(i.signal),delay:FP(i.signal),signal:i.signal});return hs(i.signal),o},()=>fs(i,EU));return a!=null&&a.autoJoin&&t.push(s.catch(Sf)),{result:Nf(e)(s),cancel(){fs(i,CU)}}}},TU=(e,t)=>{const r=async(n,a)=>{hs(t);let i=()=>{};const o=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});i=()=>{d(),u()}})];a!=null&&o.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await LP(t,Promise.race(o));return hs(t),c}finally{i()}};return(n,a)=>MP(r(n,a))},BP=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:i}=e;if(t)a=Sn(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(nn(21));return ax(i),{predicate:a,type:t,effect:i}},UP=jo(e=>{const{type:t,predicate:r,effect:n}=BP(e);return{id:gU(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(nn(22))}}},{withTypes:()=>UP}),Y_=(e,t)=>{const{type:r,effect:n,predicate:a}=BP(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===a)&&i.effect===n)},Iv=e=>{e.pending.forEach(t=>{fs(t,Dv)})},DU=(e,t)=>()=>{for(const r of t.keys())Iv(r);e.clear()},X_=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},zP=jo(Sn(`${ep}/add`),{withTypes:()=>zP}),IU=Sn(`${ep}/removeAll`),WP=jo(Sn(`${ep}/remove`),{withTypes:()=>WP}),RU=(...e)=>{console.error(`${ep}/error`,...e)},eu=(e={})=>{const t=new Map,r=new Map,n=m=>{const g=r.get(m)??0;r.set(m,g+1)},a=m=>{const g=r.get(m)??1;g===1?r.delete(m):r.set(m,g-1)},{extra:i,onError:s=RU}=e;ax(s);const o=m=>(m.unsubscribe=()=>t.delete(m.id),t.set(m.id,m),g=>{m.unsubscribe(),g!=null&&g.cancelActive&&Iv(m)}),c=m=>{const g=Y_(t,m)??UP(m);return o(g)};jo(c,{withTypes:()=>c});const u=m=>{const g=Y_(t,m);return g&&(g.unsubscribe(),m.cancelActive&&Iv(g)),!!g};jo(u,{withTypes:()=>u});const d=async(m,g,y,v)=>{const x=new AbortController,w=TU(c,x.signal),b=[];try{m.pending.add(x),n(m),await Promise.resolve(m.effect(g,jo({},y,{getOriginalState:v,condition:(_,j)=>w(_,j).then(Boolean),take:w,delay:FP(x.signal),pause:Nf(x.signal),extra:i,signal:x.signal,fork:AU(x.signal,b),unsubscribe:m.unsubscribe,subscribe:()=>{t.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((_,j,S)=>{_!==x&&(fs(_,Dv),S.delete(_))})},cancel:()=>{fs(x,Dv),m.pending.delete(x)},throwIfCancelled:()=>{hs(x.signal)}})))}catch(_){_ instanceof Zh||X_(s,_,{raisedBy:"effect"})}finally{await Promise.all(b),fs(x,PU),a(m),m.pending.delete(x)}},f=DU(t,r);return{middleware:m=>g=>y=>{if(!wP(y))return g(y);if(zP.match(y))return c(y.payload);if(IU.match(y)){f();return}if(WP.match(y))return u(y.payload);let v=m.getState();const x=()=>{if(v===G_)throw new Error(nn(23));return v};let w;try{if(w=g(y),t.size>0){const b=m.getState(),_=Array.from(t.values());for(const j of _){let S=!1;try{S=j.predicate(y,b,v)}catch(N){S=!1,X_(s,N,{raisedBy:"predicate"})}S&&d(j,y,m,x)}}}finally{v=G_}return w},startListening:c,stopListening:u,clearListeners:f}};function nn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var MU={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},KP=Ur({name:"chartLayout",initialState:MU,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,a,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(a=t.payload.bottom)!==null&&a!==void 0?a:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:$U,setLayout:LU,setChartSize:FU,setScale:BU}=KP.actions,UU=KP.reducer;function HP(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function J_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ho(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J_(Object(r),!0).forEach(function(n){zU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zU(e,t,r){return(t=WU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WU(e){var t=KU(e,"string");return typeof t=="symbol"?t:t+""}function KU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zt(e,t,r){return ft(e)||ft(t)?r:ua(t)?Mo(e,t,r):typeof t=="function"?t(e):r}var HU=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:i,verticalAlign:s,layout:o}=t;if((o==="vertical"||o==="horizontal"&&s==="middle")&&i!=="center"&&we(e[i]))return ho(ho({},e),{},{[i]:e[i]+(n||0)});if((o==="horizontal"||o==="vertical"&&i==="center")&&s!=="middle"&&we(e[s]))return ho(ho({},e),{},{[s]:e[s]+(a||0)})}return e},Ii=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",qP=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var a,i,s=e.map(o=>(o.coordinate===t&&(a=!0),o.coordinate===r&&(i=!0),o.coordinate));return a||s.push(t),i||s.push(r),s},VP=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:i,scale:s,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:m}=e;if(!s)return null;var g=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,y=a==="category"&&s.bandwidth?s.bandwidth()/g:0;if(y=m==="angleAxis"&&i&&i.length>=2?Mr(i[0]-i[1])*2*y:y,f||h){var v=(f||h||[]).map((x,w)=>{var b=n?n.indexOf(x):x;return{coordinate:s(b)+y,value:x,offset:y,index:w}});return v.filter(x=>!Vn(x.coordinate))}return c&&u?u.map((x,w)=>({coordinate:s(x)+y,value:x,index:w,offset:y})):s.ticks&&d!=null?s.ticks(d).map((x,w)=>({coordinate:s(x)+y,value:x,offset:y,index:w})):s.domain().map((x,w)=>({coordinate:s(x)+y,value:n?n[x]:x,index:w,offset:y}))},Q_=1e-4,qU=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-Q_,i=Math.max(n[0],n[1])+Q_,s=e(t[0]),o=e(t[r-1]);(s<a||s>i||o<a||o>i)&&e.domain([t[0],t[r-1]])}},VU=(e,t)=>{if(!t||t.length!==2||!we(t[0])||!we(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!we(e[0])||e[0]<r)&&(a[0]=r),(!we(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},GU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0,s=0;s<t;++s){var o=Vn(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=i,e[s][r][1]=i+o,i=e[s][r][1])}},YU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0;i<t;++i){var s=Vn(e[i][r][1])?e[i][r][0]:e[i][r][1];s>=0?(e[i][r][0]=a,e[i][r][1]=a+s,a=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},XU={sign:GU,expand:UF,none:Ro,silhouette:zF,wiggle:WF,positive:YU},JU=(e,t,r)=>{var n=XU[r],a=BF().keys(t).value((i,s)=>Number(Zt(i,s,0))).order(Sv).offset(n);return a(e)};function QU(e){return e==null?void 0:String(e)}function Z_(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:i,dataKey:s}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ft(a[t.dataKey])){var o=UE(r,"value",a[t.dataKey]);if(o)return o.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Zt(a,ft(s)?t.dataKey:s);return ft(c)?null:t.scale(c)}var e1=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:i,index:s}=e;if(t.type==="category")return r[s]?r[s].coordinate+n:null;var o=Zt(i,t.dataKey,t.scale.domain()[s]);return ft(o)?null:t.scale(o)-a/2+n},ZU=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},ez=e=>{var t=e.flat(2).filter(we);return[Math.min(...t),Math.max(...t)]},tz=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],rz=(e,t,r)=>{if(e!=null)return tz(Object.keys(e).reduce((n,a)=>{var i=e[a],{stackedData:s}=i,o=s.reduce((c,u)=>{var d=HP(u,t,r),f=ez(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},t1=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,r1=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Lo=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=Yh(t,d=>d.coordinate),i=1/0,s=1,o=a.length;s<o;s++){var c=a[s],u=a[s-1];i=Math.min((c.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function n1(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:i}=e;return ho(ho({},t),{},{dataKey:r,payload:n,value:a,name:i})}function tp(e,t){if(e)return String(e);if(typeof t=="string")return t}var nz=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},az=(e,t)=>t==="centric"?e.angle:e.radius,Wa=e=>e.layout.width,Ka=e=>e.layout.height,iz=e=>e.layout.scale,GP=e=>e.layout.margin,rp=U(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),np=U(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),sz="data-recharts-item-index",oz="data-recharts-item-data-key",tu=60;function a1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ed(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a1(Object(r),!0).forEach(function(n){lz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lz(e,t,r){return(t=cz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cz(e){var t=uz(e,"string");return typeof t=="symbol"?t:t+""}function uz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dz=e=>e.brush.height;function fz(e){var t=np(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:tu;return r+a}return r},0)}function hz(e){var t=np(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:tu;return r+a}return r},0)}function pz(e){var t=rp(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function mz(e){var t=rp(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var er=U([Wa,Ka,GP,dz,fz,hz,pz,mz,yP,WB],(e,t,r,n,a,i,s,o,c,u)=>{var d={left:(r.left||0)+a,right:(r.right||0)+i},f={top:(r.top||0)+s,bottom:(r.bottom||0)+o},h=ed(ed({},f),d),m=h.bottom;h.bottom+=n,h=HU(h,c,u);var g=e-h.left-h.right,y=t-h.top-h.bottom;return ed(ed({brushBottom:m},h),{},{width:Math.max(g,0),height:Math.max(y,0)})}),gz=U(er,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),ix=U(Wa,Ka,(e,t)=>({x:0,y:0,width:e,height:t})),vz=p.createContext(null),vr=()=>p.useContext(vz)!=null,ap=e=>e.brush,ip=U([ap,er,GP],(e,t,r)=>({height:e.height,x:we(e.x)?e.x:t.left,y:we(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:we(e.width)?e.width:t.width})),YP={},XP={},JP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:i}={}){let s,o=null;const c=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),d=()=>{o!==null&&(r.apply(s,o),s=void 0,o=null)},f=()=>{u&&d(),y()};let h=null;const m=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},g=()=>{h!==null&&(clearTimeout(h),h=null)},y=()=>{g(),s=void 0,o=null},v=()=>{d()},x=function(...w){if(a!=null&&a.aborted)return;s=this,o=w;const b=h==null;m(),c&&b&&d()};return x.schedule=m,x.cancel=y,x.flush=v,a==null||a.addEventListener("abort",y,{once:!0}),x}e.debounce=t})(JP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JP;function r(n,a=0,i={}){typeof i!="object"&&(i={});const{leading:s=!1,trailing:o=!0,maxWait:c}=i,u=Array(2);s&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...y){d=n.apply(this,y),f=null},a,{edges:u}),m=function(...y){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,y),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,y),d)},g=()=>(h.flush(),d);return m.cancel=h.cancel,m.flush=g,m}e.debounce=r})(XP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XP;function r(n,a=0,i={}){const{leading:s=!0,trailing:o=!0}=i;return t.debounce(n,a,{leading:s,maxWait:a,trailing:o})}e.throttle=r})(YP);var yz=YP.throttle;const xz=Ua(yz);var kf=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},QP=(e,t,r)=>{var{width:n="100%",height:a="100%",aspect:i,maxHeight:s}=r,o=Ia(n)?e:Number(n),c=Ia(a)?t:Number(a);return i&&i>0&&(o?c=o/i:c&&(o=c*i),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:o,calculatedHeight:c}},bz={width:0,height:0,overflow:"visible"},wz={width:0,overflowX:"visible"},_z={height:0,overflowY:"visible"},jz={},Sz=e=>{var{width:t,height:r}=e,n=Ia(t),a=Ia(r);return n&&a?bz:n?wz:a?_z:jz};function Nz(e){var{width:t,height:r,aspect:n}=e,a=t,i=r;return a===void 0&&i===void 0?(a="100%",i="100%"):a===void 0?a=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:a,height:i}}function Et(e){return Number.isFinite(e)}function da(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Rv(){return Rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rv.apply(null,arguments)}function i1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function s1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i1(Object(r),!0).forEach(function(n){kz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kz(e,t,r){return(t=Cz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cz(e){var t=Ez(e,"string");return typeof t=="symbol"?t:t+""}function Ez(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZP=p.createContext({width:-1,height:-1});function Pz(e){return da(e.width)&&da(e.height)}function eO(e){var{children:t,width:r,height:n}=e,a=p.useMemo(()=>({width:r,height:n}),[r,n]);return Pz(a)?p.createElement(ZP.Provider,{value:a},t):null}var sx=()=>p.useContext(ZP),Oz=p.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:i,minWidth:s=0,minHeight:o,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:m,style:g={}}=e,y=p.useRef(null),v=p.useRef();v.current=m,p.useImperativeHandle(t,()=>y.current);var[x,w]=p.useState({containerWidth:n.width,containerHeight:n.height}),b=p.useCallback((k,C)=>{w(E=>{var O=Math.round(k),A=Math.round(C);return E.containerWidth===O&&E.containerHeight===A?E:{containerWidth:O,containerHeight:A}})},[]);p.useEffect(()=>{if(y.current==null||typeof ResizeObserver>"u")return nl;var k=A=>{var q,{width:J,height:Z}=A[0].contentRect;b(J,Z),(q=v.current)===null||q===void 0||q.call(v,J,Z)};d>0&&(k=xz(k,d,{trailing:!0,leading:!1}));var C=new ResizeObserver(k),{width:E,height:O}=y.current.getBoundingClientRect();return b(E,O),C.observe(y.current),()=>{C.disconnect()}},[b,d]);var{containerWidth:_,containerHeight:j}=x;kf(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:S,calculatedHeight:N}=QP(_,j,{width:a,height:i,aspect:r,maxHeight:c});return kf(S!=null&&S>0||N!=null&&N>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,S,N,a,i,s,o,r),p.createElement("div",{id:f?"".concat(f):void 0,className:Xe("recharts-responsive-container",h),style:s1(s1({},g),{},{width:a,height:i,minWidth:s,minHeight:o,maxHeight:c}),ref:y},p.createElement("div",{style:Sz({width:a,height:i})},p.createElement(eO,{width:S,height:N},u)))}),o1=p.forwardRef((e,t)=>{var r=sx();if(da(r.width)&&da(r.height))return e.children;var{width:n,height:a}=Nz({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:s}=QP(void 0,void 0,{width:n,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return we(i)&&we(s)?p.createElement(eO,{width:i,height:s},e.children):p.createElement(Oz,Rv({},e,{width:n,height:a,ref:t}))});function tO(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var sp=()=>{var e,t=vr(),r=Se(gz),n=Se(ip),a=(e=Se(ap))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},Az={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},rO=()=>{var e;return(e=Se(er))!==null&&e!==void 0?e:Az},nO=()=>Se(Wa),aO=()=>Se(Ka),Ke=e=>e.layout.layoutType,ru=()=>Se(Ke),Tz=()=>{var e=ru();return e!==void 0},op=e=>{var t=Pt(),r=vr(),{width:n,height:a}=e,i=sx(),s=n,o=a;return i&&(s=i.width>0?i.width:n,o=i.height>0?i.height:a),p.useEffect(()=>{!r&&da(s)&&da(o)&&t(FU({width:s,height:o}))},[t,r,s,o]),null},Dz={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},iO=Ur({name:"legend",initialState:Dz,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Ut()},removeLegendPayload:{reducer(e,t){var r=Na(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Ut()}}}),{setLegendSize:Mee,setLegendSettings:$ee,addLegendPayload:Iz,removeLegendPayload:Rz}=iO.actions,Mz=iO.reducer;function Mv(){return Mv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mv.apply(null,arguments)}function l1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l1(Object(r),!0).forEach(function(n){$z(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $z(e,t,r){return(t=Lz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lz(e){var t=Fz(e,"string");return typeof t=="symbol"?t:t+""}function Fz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bz(e){return Array.isArray(e)&&ua(e[0])&&ua(e[1])?e.join(" ~ "):e}var Uz=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:i,formatter:s,itemSorter:o,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,m=()=>{if(i&&i.length){var j={padding:0,margin:0},S=(o?Yh(i,o):i).map((N,k)=>{if(N.type==="none")return null;var C=N.formatter||s||Bz,{value:E,name:O}=N,A=E,q=O;if(C){var J=C(E,O,N,k,i);if(Array.isArray(J))[A,q]=J;else if(J!=null)A=J;else return null}var Z=Fm({display:"block",paddingTop:4,paddingBottom:4,color:N.color||"#000"},n);return p.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(k),style:Z},ua(q)?p.createElement("span",{className:"recharts-tooltip-item-name"},q):null,ua(q)?p.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,p.createElement("span",{className:"recharts-tooltip-item-value"},A),p.createElement("span",{className:"recharts-tooltip-item-unit"},N.unit||""))});return p.createElement("ul",{className:"recharts-tooltip-item-list",style:j},S)}return null},g=Fm({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),y=Fm({margin:0},a),v=!ft(d),x=v?d:"",w=Xe("recharts-default-tooltip",c),b=Xe("recharts-tooltip-label",u);v&&f&&i!==void 0&&i!==null&&(x=f(d,i));var _=h?{role:"status","aria-live":"assertive"}:{};return p.createElement("div",Mv({className:w,style:g},_),p.createElement("p",{className:b,style:y},p.isValidElement(x)?x:"".concat(x)),m())},wl="recharts-tooltip-wrapper",zz={visibility:"hidden"};function Wz(e){var{coordinate:t,translateX:r,translateY:n}=e;return Xe(wl,{["".concat(wl,"-right")]:we(r)&&t&&we(t.x)&&r>=t.x,["".concat(wl,"-left")]:we(r)&&t&&we(t.x)&&r<t.x,["".concat(wl,"-bottom")]:we(n)&&t&&we(t.y)&&n>=t.y,["".concat(wl,"-top")]:we(n)&&t&&we(t.y)&&n<t.y})}function c1(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=e;if(i&&we(i[n]))return i[n];var d=r[n]-o-(a>0?a:0),f=r[n]+a;if(t[n])return s[n]?d:f;var h=c[n];if(h==null)return 0;if(s[n]){var m=d,g=h;return m<g?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var y=f+o,v=h+u;return y>v?Math.max(d,h):Math.max(f,h)}function Kz(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Hz(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:i,tooltipBox:s,useTranslate3d:o,viewBox:c}=e,u,d,f;return s.height>0&&s.width>0&&r?(d=c1({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),f=c1({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=Kz({translateX:d,translateY:f,useTranslate3d:o})):u=zz,{cssProperties:u,cssClasses:Wz({translateX:d,translateY:f,coordinate:r})}}function u1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function td(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u1(Object(r),!0).forEach(function(n){$v(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $v(e,t,r){return(t=qz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qz(e){var t=Vz(e,"string");return typeof t=="symbol"?t:t+""}function Vz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Gz extends p.PureComponent{constructor(){super(...arguments),$v(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),$v(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:i,coordinate:s,hasPayload:o,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:m,wrapperStyle:g,lastBoundingBox:y,innerRef:v,hasPortalFromProps:x}=this.props,{cssClasses:w,cssProperties:b}=Hz({allowEscapeViewBox:r,coordinate:s,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:y.height,width:y.width},useTranslate3d:h,viewBox:m}),_=x?{}:td(td({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),j=td(td({},_),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},g);return p.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:j,ref:v},i)}}var Yz=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ts={devToolsEnabled:!1,isSsr:Yz()},sO=()=>{var e;return(e=Se(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Lv(){return Lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lv.apply(null,arguments)}function d1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function f1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d1(Object(r),!0).forEach(function(n){Xz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xz(e,t,r){return(t=Jz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jz(e){var t=Qz(e,"string");return typeof t=="symbol"?t:t+""}function Qz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var h1={curveBasisClosed:PF,curveBasisOpen:OF,curveBasis:EF,curveBumpX:pF,curveBumpY:mF,curveLinearClosed:AF,curveLinear:zh,curveMonotoneX:TF,curveMonotoneY:DF,curveNatural:IF,curveStep:RF,curveStepAfter:$F,curveStepBefore:MF},Cf=e=>Et(e.x)&&Et(e.y),p1=e=>e.base!=null&&Cf(e.base)&&Cf(e),_l=e=>e.x,jl=e=>e.y,Zz=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Qc(e));return(r==="curveMonotone"||r==="curveBump")&&t?h1["".concat(r).concat(t==="vertical"?"Y":"X")]:h1[r]||zh},e8=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:i=!1}=e,s=Zz(t,a),o=i?r.filter(Cf):r,c;if(Array.isArray(n)){var u=r.map((m,g)=>f1(f1({},m),{},{base:n[g]}));a==="vertical"?c=Gu().y(jl).x1(_l).x0(m=>m.base.x):c=Gu().x(_l).y1(jl).y0(m=>m.base.y);var d=c.defined(p1).curve(s),f=i?u.filter(p1):u;return d(f)}a==="vertical"&&we(n)?c=Gu().y(jl).x1(_l).x0(n):we(n)?c=Gu().x(_l).y1(jl).y0(n):c=CE().x(_l).y(jl);var h=c.defined(Cf).curve(s);return h(o)},oO=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?e8(e):n;return p.createElement("path",Lv({},qn(e),B0(e),{className:Xe("recharts-curve",t),d:i===null?void 0:i,ref:a}))},t8=["x","y","top","left","width","height","className"];function Fv(){return Fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fv.apply(null,arguments)}function m1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function r8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m1(Object(r),!0).forEach(function(n){n8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function n8(e,t,r){return(t=a8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a8(e){var t=i8(e,"string");return typeof t=="symbol"?t:t+""}function i8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s8(e,t){if(e==null)return{};var r,n,a=o8(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function o8(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var l8=(e,t,r,n,a,i)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),c8=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:i=0,height:s=0,className:o}=e,c=s8(e,t8),u=r8({x:t,y:r,top:n,left:a,width:i,height:s},c);return!we(t)||!we(r)||!we(i)||!we(s)||!we(n)||!we(a)?null:p.createElement("path",Fv({},Nr(u),{className:Xe("recharts-cross",o),d:l8(t,r,i,s,n,a)}))};function u8(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function g1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function v1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g1(Object(r),!0).forEach(function(n){d8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d8(e,t,r){return(t=f8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f8(e){var t=h8(e,"string");return typeof t=="symbol"?t:t+""}function h8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var p8=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),lO=(e,t,r)=>e.map(n=>"".concat(p8(n)," ").concat(t,"ms ").concat(r)).join(","),m8=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),Pc=(e,t)=>Object.keys(t).reduce((r,n)=>v1(v1({},r),{},{[n]:e(n,t[n])}),{});function y1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ft(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y1(Object(r),!0).forEach(function(n){g8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g8(e,t,r){return(t=v8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v8(e){var t=y8(e,"string");return typeof t=="symbol"?t:t+""}function y8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ef=(e,t,r)=>e+(t-e)*r,Bv=e=>{var{from:t,to:r}=e;return t!==r},cO=(e,t,r)=>{var n=Pc((a,i)=>{if(Bv(i)){var[s,o]=e(i.from,i.to,i.velocity);return Ft(Ft({},i),{},{from:s,velocity:o})}return i},t);return r<1?Pc((a,i)=>Bv(i)?Ft(Ft({},i),{},{velocity:Ef(i.velocity,n[a].velocity,r),from:Ef(i.from,n[a].from,r)}):i,t):cO(e,n,r-1)};function x8(e,t,r,n,a,i){var s,o=n.reduce((h,m)=>Ft(Ft({},h),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>Pc((h,m)=>m.from,o),u=()=>!Object.values(o).filter(Bv).length,d=null,f=h=>{s||(s=h);var m=h-s,g=m/r.dt;o=cO(r,o,g),a(Ft(Ft(Ft({},e),t),c())),s=h,u()||(d=i.setTimeout(f))};return()=>(d=i.setTimeout(f),()=>{var h;(h=d)===null||h===void 0||h()})}function b8(e,t,r,n,a,i,s){var o=null,c=a.reduce((f,h)=>Ft(Ft({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,m=Pc((y,v)=>Ef(...v,r(h)),c);if(i(Ft(Ft(Ft({},e),t),m)),h<1)o=s.setTimeout(d);else{var g=Pc((y,v)=>Ef(...v,r(1)),c);i(Ft(Ft(Ft({},e),t),g))}};return()=>(o=s.setTimeout(d),()=>{var f;(f=o)===null||f===void 0||f()})}const w8=(e,t,r,n,a,i)=>{var s=m8(e,t);return r==null?()=>(a(Ft(Ft({},e),t)),()=>{}):r.isStepper===!0?x8(e,t,r,s,a,i):b8(e,t,r,n,s,a,i)};var Pf=1e-4,uO=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],dO=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),x1=(e,t)=>r=>{var n=uO(e,t);return dO(n,r)},_8=(e,t)=>r=>{var n=uO(e,t),a=[...n.map((i,s)=>i*s).slice(1),0];return dO(a,r)},j8=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a,i=r[0].split("(");if(i[0]==="cubic-bezier"&&((a=i[1])===null||a===void 0?void 0:a.split(")")[0].split(",").length)===4){var s=i[1].split(")")[0].split(",").map(o=>parseFloat(o));return[s[0],s[1],s[2],s[3]]}}}return r.length===4?r:[0,0,1,1]},S8=(e,t,r,n)=>{var a=x1(e,r),i=x1(t,n),s=_8(e,r),o=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,f=d,h=0;h<8;++h){var m=a(f)-d,g=s(f);if(Math.abs(m-d)<Pf||g<Pf)return i(f);f=o(f-m/g)}return i(f)};return c.isStepper=!1,c},b1=function(){return S8(...j8(...arguments))},N8=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,i=(s,o,c)=>{var u=-(s-o)*r,d=c*n,f=c+(u-d)*a/1e3,h=c*a/1e3+s;return Math.abs(h-o)<Pf&&Math.abs(f)<Pf?[o,0]:[h,f]};return i.isStepper=!0,i.dt=a,i},k8=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return b1(e);case"spring":return N8();default:if(e.split("(")[0]==="cubic-bezier")return b1(e)}return typeof e=="function"?e:null};function C8(e){var t,r=()=>null,n=!1,a=null,i=s=>{if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,[c,...u]=o;if(typeof c=="number"){a=e.setTimeout(i.bind(null,u),c);return}i(c),a=e.setTimeout(i.bind(null,u));return}typeof s=="string"&&(t=s,r(t)),typeof s=="object"&&(t=s,r(t)),typeof s=="function"&&s()}};return{stop:()=>{n=!0},start:s=>{n=!1,a&&(a(),a=null),i(s)},subscribe:s=>(r=s,()=>{r=()=>null}),getTimeoutController:()=>e}}class E8{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,i=s=>{s-n>=r?t(s):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(i))};return a=requestAnimationFrame(i),()=>{a!=null&&cancelAnimationFrame(a)}}}function P8(){return C8(new E8)}var O8=p.createContext(P8);function A8(e,t){var r=p.useContext(O8);return p.useMemo(()=>t??r(e),[e,t,r])}var T8={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},w1={t:0},Bm={t:1};function lp(e){var t=Pr(e,T8),{isActive:r,canBegin:n,duration:a,easing:i,begin:s,onAnimationEnd:o,onAnimationStart:c,children:u}=t,d=A8(t.animationId,t.animationManager),[f,h]=p.useState(r?w1:Bm),m=p.useRef(null);return p.useEffect(()=>{r||h(Bm)},[r]),p.useEffect(()=>{if(!r||!n)return nl;var g=w8(w1,Bm,k8(i),a,h,d.getTimeoutController()),y=()=>{m.current=g()};return d.start([c,s,y,a,o]),()=>{d.stop(),m.current&&m.current(),o()}},[r,n,a,i,s,c,o,d]),u(f.t)}function cp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=p.useRef(Nc(t)),n=p.useRef(e);return n.current!==e&&(r.current=Nc(t),n.current=e),r.current}var D8=["radius"],I8=["radius"];function _1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function j1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_1(Object(r),!0).forEach(function(n){R8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R8(e,t,r){return(t=M8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M8(e){var t=$8(e,"string");return typeof t=="symbol"?t:t+""}function $8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Of(){return Of=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Of.apply(null,arguments)}function S1(e,t){if(e==null)return{};var r,n,a=L8(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function L8(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var N1=(e,t,r,n,a)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),s=n>=0?1:-1,o=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(i>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=a[f]>i?i:a[f];u="M".concat(e,",").concat(t+s*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+s*d[1])),u+="L ".concat(e+r,",").concat(t+n-s*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-s*d[3])),u+="Z"}else if(i>0&&a===+a&&a>0){var m=Math.min(i,a);u="M ".concat(e,",").concat(t+s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+o*m,",").concat(t,`
            L `).concat(e+r-o*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+s*m,`
            L `).concat(e+r,",").concat(t+n-s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-o*m,",").concat(t+n,`
            L `).concat(e+o*m,",").concat(t+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+n-s*m," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},k1={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},fO=e=>{var t=Pr(e,k1),r=p.useRef(null),[n,a]=p.useState(-1);p.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var K=r.current.getTotalLength();K&&a(K)}catch{}},[]);var{x:i,y:s,width:o,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isAnimationActive:g,isUpdateAnimationActive:y}=t,v=p.useRef(o),x=p.useRef(c),w=p.useRef(i),b=p.useRef(s),_=p.useMemo(()=>({x:i,y:s,width:o,height:c,radius:u}),[i,s,o,c,u]),j=cp(_,"rectangle-");if(i!==+i||s!==+s||o!==+o||c!==+c||o===0||c===0)return null;var S=Xe("recharts-rectangle",d);if(!y){var N=Nr(t),{radius:k}=N,C=S1(N,D8);return p.createElement("path",Of({},C,{radius:typeof u=="number"?u:void 0,className:S,d:N1(i,s,o,c,u)}))}var E=v.current,O=x.current,A=w.current,q=b.current,J="0px ".concat(n===-1?1:n,"px"),Z="".concat(n,"px 0px"),B=lO(["strokeDasharray"],h,typeof f=="string"?f:k1.animationEasing);return p.createElement(lp,{animationId:j,key:j,canBegin:n>0,duration:h,easing:f,isActive:y,begin:m},K=>{var D=jt(E,o,K),M=jt(O,c,K),L=jt(A,i,K),oe=jt(q,s,K);r.current&&(v.current=D,x.current=M,w.current=L,b.current=oe);var ee;g?K>0?ee={transition:B,strokeDasharray:Z}:ee={strokeDasharray:J}:ee={strokeDasharray:Z};var ye=Nr(t),{radius:P}=ye,V=S1(ye,I8);return p.createElement("path",Of({},V,{radius:typeof u=="number"?u:void 0,className:S,d:N1(L,oe,D,M,u),ref:r,style:j1(j1({},ee),t.style)}))})};function C1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function E1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C1(Object(r),!0).forEach(function(n){F8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F8(e,t,r){return(t=B8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B8(e){var t=U8(e,"string");return typeof t=="symbol"?t:t+""}function U8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Af=Math.PI/180,z8=e=>e*180/Math.PI,or=(e,t,r,n)=>({x:e+Math.cos(-Af*n)*r,y:t+Math.sin(-Af*n)*r}),W8=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},K8=(e,t)=>{var{x:r,y:n}=e,{x:a,y:i}=t;return Math.sqrt((r-a)**2+(n-i)**2)},H8=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:i}=t,s=K8({x:r,y:n},{x:a,y:i});if(s<=0)return{radius:s,angle:0};var o=(r-a)/s,c=Math.acos(o);return n>i&&(c=2*Math.PI-c),{radius:s,angle:z8(c),angleInRadian:c}},q8=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),i=Math.min(n,a);return{startAngle:t-i*360,endAngle:r-i*360}},V8=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),i=Math.floor(n/360),s=Math.min(a,i);return e+s*360},G8=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:a,angle:i}=H8({x:r,y:n},t),{innerRadius:s,outerRadius:o}=t;if(a<s||a>o||a===0)return null;var{startAngle:c,endAngle:u}=q8(t),d=i,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?E1(E1({},t),{},{radius:a,angle:V8(d,t)}):null};function hO(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:i}=e,s=or(t,r,n,a),o=or(t,r,n,i);return{points:[s,o],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function Uv(){return Uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uv.apply(null,arguments)}var Y8=(e,t)=>{var r=Mr(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},rd=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:i,isExternal:s,cornerRadius:o,cornerIsExternal:c}=e,u=o*(s?1:-1)+n,d=Math.asin(o/u)/Af,f=c?a:a+i*d,h=or(t,r,u,f),m=or(t,r,n,f),g=c?a-i*d:a,y=or(t,r,u*Math.cos(d*Af),g);return{center:h,circleTangency:m,lineTangency:y,theta:d}},pO=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:i,endAngle:s}=e,o=Y8(i,s),c=i+o,u=or(t,r,a,i),d=or(t,r,a,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(i>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=or(t,r,n,i),m=or(t,r,n,c);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(i<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},X8=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:i,forceCornerRadius:s,cornerIsExternal:o,startAngle:c,endAngle:u}=e,d=Mr(u-c),{circleTangency:f,lineTangency:h,theta:m}=rd({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:i,cornerIsExternal:o}),{circleTangency:g,lineTangency:y,theta:v}=rd({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:o}),x=o?Math.abs(c-u):Math.abs(c-u)-m-v;if(x<0)return s?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):pO({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(x>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(n>0){var{circleTangency:b,lineTangency:_,theta:j}=rd({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),{circleTangency:S,lineTangency:N,theta:k}=rd({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),C=o?Math.abs(c-u):Math.abs(c-u)-j-k;if(C<0&&i===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(N.x,",").concat(N.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(S.x,",").concat(S.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(C>180),",").concat(+(d>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},J8={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},mO=e=>{var t=Pr(e,J8),{cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(i<a||u===d)return null;var h=Xe("recharts-sector",f),m=i-a,g=Gn(s,m,0,!0),y;return g>0&&Math.abs(u-d)<360?y=X8({cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:Math.min(g,m/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d}):y=pO({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d}),p.createElement("path",Uv({},Nr(t),{className:h,d:y}))};function Q8(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(KE(t)){if(e==="centric"){var{cx:n,cy:a,innerRadius:i,outerRadius:s,angle:o}=t,c=or(n,a,i,o),u=or(n,a,s,o);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return hO(t)}}var gO={},vO={},yO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Q0;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(yO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yO;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(vO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z0,r=vO;function n(a,i,s){s&&typeof s!="number"&&t.isIterateeCall(a,i,s)&&(i=s=void 0),a=r.toFinite(a),i===void 0?(i=a,a=0):i=r.toFinite(i),s=s===void 0?a<i?1:-1:r.toFinite(s);const o=Math.max(Math.ceil((i-a)/(s||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=a,a+=s;return c}e.range=n})(gO);var Z8=gO.range;const xO=Ua(Z8);function _i(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function e9(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ox(e){let t,r,n;e.length!==2?(t=_i,r=(o,c)=>_i(e(o),c),n=(o,c)=>e(o)-c):(t=e===_i||e===e9?e:t9,r=e,n=e);function a(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function s(o,c,u=0,d=o.length){const f=a(o,c,u,d-1);return f>u&&n(o[f-1],c)>-n(o[f],c)?f-1:f}return{left:a,center:s,right:i}}function t9(){return 0}function bO(e){return e===null?NaN:+e}function*r9(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const n9=ox(_i),nu=n9.right;ox(bO).center;class P1 extends Map{constructor(t,r=s9){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(O1(this,t))}has(t){return super.has(O1(this,t))}set(t,r){return super.set(a9(this,t),r)}delete(t){return super.delete(i9(this,t))}}function O1({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function a9({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function i9({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function s9(e){return e!==null&&typeof e=="object"?e.valueOf():e}function o9(e=_i){if(e===_i)return wO;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function wO(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const l9=Math.sqrt(50),c9=Math.sqrt(10),u9=Math.sqrt(2);function Tf(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),s=i>=l9?10:i>=c9?5:i>=u9?2:1;let o,c,u;return a<0?(u=Math.pow(10,-a)/s,o=Math.round(e*u),c=Math.round(t*u),o/u<e&&++o,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*s,o=Math.round(e/u),c=Math.round(t/u),o*u<e&&++o,c*u>t&&--c),c<o&&.5<=r&&r<2?Tf(e,t,r*2):[o,c,u]}function zv(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,s]=n?Tf(t,e,r):Tf(e,t,r);if(!(i>=a))return[];const o=i-a+1,c=new Array(o);if(n)if(s<0)for(let u=0;u<o;++u)c[u]=(i-u)/-s;else for(let u=0;u<o;++u)c[u]=(i-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(a+u)/-s;else for(let u=0;u<o;++u)c[u]=(a+u)*s;return c}function Wv(e,t,r){return t=+t,e=+e,r=+r,Tf(e,t,r)[2]}function Kv(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?Wv(t,e,r):Wv(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function A1(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function T1(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function _O(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?wO:o9(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(n,Math.floor(t+(c-u)*f/c+h));_O(e,t,m,g,a)}const i=e[t];let s=r,o=n;for(Sl(e,r,t),a(e[n],i)>0&&Sl(e,r,n);s<o;){for(Sl(e,s,o),++s,--o;a(e[s],i)<0;)++s;for(;a(e[o],i)>0;)--o}a(e[r],i)===0?Sl(e,r,o):(++o,Sl(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function Sl(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function d9(e,t,r){if(e=Float64Array.from(r9(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return T1(e);if(t>=1)return A1(e);var n,a=(n-1)*t,i=Math.floor(a),s=A1(_O(e,i).subarray(0,i+1)),o=T1(e.subarray(i+1));return s+(o-s)*(a-i)}}function f9(e,t,r=bO){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),s=+r(e[i],i,e),o=+r(e[i+1],i+1,e);return s+(o-s)*(a-i)}}function h9(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function kn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ha(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Hv=Symbol("implicit");function lx(){var e=new P1,t=[],r=[],n=Hv;function a(i){let s=e.get(i);if(s===void 0){if(n!==Hv)return n;e.set(i,s=t.push(i)-1)}return r[s%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new P1;for(const s of i)e.has(s)||e.set(s,t.push(s)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return lx(t,r).unknown(n)},kn.apply(a,arguments),a}function cx(){var e=lx().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,s,o=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<n,g=m?a:n,y=m?n:a;i=(y-g)/Math.max(1,h-c+u*2),o&&(i=Math.floor(i)),g+=(y-g-i*(h-c))*d,s=i*(1-c),o&&(g=Math.round(g),s=Math.round(s));var v=h9(h).map(function(x){return g+i*x});return r(m?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,o=!0,f()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return cx(t(),[n,a]).round(o).paddingInner(c).paddingOuter(u).align(d)},kn.apply(f(),arguments)}function jO(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return jO(t())},e}function p9(){return jO(cx.apply(null,arguments).paddingInner(1))}function ux(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function SO(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function au(){}var Oc=.7,Df=1/Oc,So="\\s*([+-]?\\d+)\\s*",Ac="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ca="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",m9=/^#([0-9a-f]{3,8})$/,g9=new RegExp(`^rgb\\(${So},${So},${So}\\)$`),v9=new RegExp(`^rgb\\(${ca},${ca},${ca}\\)$`),y9=new RegExp(`^rgba\\(${So},${So},${So},${Ac}\\)$`),x9=new RegExp(`^rgba\\(${ca},${ca},${ca},${Ac}\\)$`),b9=new RegExp(`^hsl\\(${Ac},${ca},${ca}\\)$`),w9=new RegExp(`^hsla\\(${Ac},${ca},${ca},${Ac}\\)$`),D1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ux(au,Tc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:I1,formatHex:I1,formatHex8:_9,formatHsl:j9,formatRgb:R1,toString:R1});function I1(){return this.rgb().formatHex()}function _9(){return this.rgb().formatHex8()}function j9(){return NO(this).formatHsl()}function R1(){return this.rgb().formatRgb()}function Tc(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=m9.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?M1(t):r===3?new $r(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?nd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?nd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=g9.exec(e))?new $r(t[1],t[2],t[3],1):(t=v9.exec(e))?new $r(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=y9.exec(e))?nd(t[1],t[2],t[3],t[4]):(t=x9.exec(e))?nd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=b9.exec(e))?F1(t[1],t[2]/100,t[3]/100,1):(t=w9.exec(e))?F1(t[1],t[2]/100,t[3]/100,t[4]):D1.hasOwnProperty(e)?M1(D1[e]):e==="transparent"?new $r(NaN,NaN,NaN,0):null}function M1(e){return new $r(e>>16&255,e>>8&255,e&255,1)}function nd(e,t,r,n){return n<=0&&(e=t=r=NaN),new $r(e,t,r,n)}function S9(e){return e instanceof au||(e=Tc(e)),e?(e=e.rgb(),new $r(e.r,e.g,e.b,e.opacity)):new $r}function qv(e,t,r,n){return arguments.length===1?S9(e):new $r(e,t,r,n??1)}function $r(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}ux($r,qv,SO(au,{brighter(e){return e=e==null?Df:Math.pow(Df,e),new $r(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Oc:Math.pow(Oc,e),new $r(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $r(ps(this.r),ps(this.g),ps(this.b),If(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$1,formatHex:$1,formatHex8:N9,formatRgb:L1,toString:L1}));function $1(){return`#${os(this.r)}${os(this.g)}${os(this.b)}`}function N9(){return`#${os(this.r)}${os(this.g)}${os(this.b)}${os((isNaN(this.opacity)?1:this.opacity)*255)}`}function L1(){const e=If(this.opacity);return`${e===1?"rgb(":"rgba("}${ps(this.r)}, ${ps(this.g)}, ${ps(this.b)}${e===1?")":`, ${e})`}`}function If(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ps(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function os(e){return e=ps(e),(e<16?"0":"")+e.toString(16)}function F1(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Fn(e,t,r,n)}function NO(e){if(e instanceof Fn)return new Fn(e.h,e.s,e.l,e.opacity);if(e instanceof au||(e=Tc(e)),!e)return new Fn;if(e instanceof Fn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),s=NaN,o=i-a,c=(i+a)/2;return o?(t===i?s=(r-n)/o+(r<n)*6:r===i?s=(n-t)/o+2:s=(t-r)/o+4,o/=c<.5?i+a:2-i-a,s*=60):o=c>0&&c<1?0:s,new Fn(s,o,c,e.opacity)}function k9(e,t,r,n){return arguments.length===1?NO(e):new Fn(e,t,r,n??1)}function Fn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}ux(Fn,k9,SO(au,{brighter(e){return e=e==null?Df:Math.pow(Df,e),new Fn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Oc:Math.pow(Oc,e),new Fn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new $r(Um(e>=240?e-240:e+120,a,n),Um(e,a,n),Um(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Fn(B1(this.h),ad(this.s),ad(this.l),If(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=If(this.opacity);return`${e===1?"hsl(":"hsla("}${B1(this.h)}, ${ad(this.s)*100}%, ${ad(this.l)*100}%${e===1?")":`, ${e})`}`}}));function B1(e){return e=(e||0)%360,e<0?e+360:e}function ad(e){return Math.max(0,Math.min(1,e||0))}function Um(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const dx=e=>()=>e;function C9(e,t){return function(r){return e+r*t}}function E9(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function P9(e){return(e=+e)==1?kO:function(t,r){return r-t?E9(t,r,e):dx(isNaN(t)?r:t)}}function kO(e,t){var r=t-e;return r?C9(e,r):dx(isNaN(e)?t:e)}const U1=function e(t){var r=P9(t);function n(a,i){var s=r((a=qv(a)).r,(i=qv(i)).r),o=r(a.g,i.g),c=r(a.b,i.b),u=kO(a.opacity,i.opacity);return function(d){return a.r=s(d),a.g=o(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function O9(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function A9(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function T9(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),s;for(s=0;s<n;++s)a[s]=al(e[s],t[s]);for(;s<r;++s)i[s]=t[s];return function(o){for(s=0;s<n;++s)i[s]=a[s](o);return i}}function D9(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Rf(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function I9(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=al(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var Vv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zm=new RegExp(Vv.source,"g");function R9(e){return function(){return e}}function M9(e){return function(t){return e(t)+""}}function $9(e,t){var r=Vv.lastIndex=zm.lastIndex=0,n,a,i,s=-1,o=[],c=[];for(e=e+"",t=t+"";(n=Vv.exec(e))&&(a=zm.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),o[s]?o[s]+=i:o[++s]=i),(n=n[0])===(a=a[0])?o[s]?o[s]+=a:o[++s]=a:(o[++s]=null,c.push({i:s,x:Rf(n,a)})),r=zm.lastIndex;return r<t.length&&(i=t.slice(r),o[s]?o[s]+=i:o[++s]=i),o.length<2?c[0]?M9(c[0].x):R9(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function al(e,t){var r=typeof t,n;return t==null||r==="boolean"?dx(t):(r==="number"?Rf:r==="string"?(n=Tc(t))?(t=n,U1):$9:t instanceof Tc?U1:t instanceof Date?D9:A9(t)?O9:Array.isArray(t)?T9:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?I9:Rf)(e,t)}function fx(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function L9(e,t){t===void 0&&(t=e,e=al);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return i[o](s-o)}}function F9(e){return function(){return e}}function Mf(e){return+e}var z1=[0,1];function jr(e){return e}function Gv(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:F9(isNaN(t)?NaN:.5)}function B9(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function U9(e,t,r){var n=e[0],a=e[1],i=t[0],s=t[1];return a<n?(n=Gv(a,n),i=r(s,i)):(n=Gv(n,a),i=r(i,s)),function(o){return i(n(o))}}function z9(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)a[s]=Gv(e[s],e[s+1]),i[s]=r(t[s],t[s+1]);return function(o){var c=nu(e,o,1,n)-1;return i[c](a[c](o))}}function iu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function up(){var e=z1,t=z1,r=al,n,a,i,s=jr,o,c,u;function d(){var h=Math.min(e.length,t.length);return s!==jr&&(s=B9(e[0],e[h-1])),o=h>2?z9:U9,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=o(e.map(n),t,r)))(n(s(h)))}return f.invert=function(h){return s(a((u||(u=o(t,e.map(n),Rf)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Mf),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=fx,d()},f.clamp=function(h){return arguments.length?(s=h?!0:jr,d()):s!==jr},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,m){return n=h,a=m,d()}}function hx(){return up()(jr,jr)}function W9(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function $f(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Fo(e){return e=$f(Math.abs(e)),e?e[1]:NaN}function K9(e,t){return function(r,n){for(var a=r.length,i=[],s=0,o=e[0],c=0;a>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),i.push(r.substring(a-=o,a+o)),!((c+=o+1)>n));)o=e[s=(s+1)%e.length];return i.reverse().join(t)}}function H9(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var q9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Dc(e){if(!(t=q9.exec(e)))throw new Error("invalid format: "+e);var t;return new px({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Dc.prototype=px.prototype;function px(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}px.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function V9(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var CO;function G9(e,t){var r=$f(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(CO=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=n.length;return i===s?n:i>s?n+new Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+$f(e,Math.max(0,t+i-1))[0]}function W1(e,t){var r=$f(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const K1={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:W9,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>W1(e*100,t),r:W1,s:G9,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function H1(e){return e}var q1=Array.prototype.map,V1=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Y9(e){var t=e.grouping===void 0||e.thousands===void 0?H1:K9(q1.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?H1:H9(q1.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Dc(f);var h=f.fill,m=f.align,g=f.sign,y=f.symbol,v=f.zero,x=f.width,w=f.comma,b=f.precision,_=f.trim,j=f.type;j==="n"?(w=!0,j="g"):K1[j]||(b===void 0&&(b=12),_=!0,j="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var S=y==="$"?r:y==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",N=y==="$"?n:/[%p]/.test(j)?s:"",k=K1[j],C=/[defgprs%]/.test(j);b=b===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function E(O){var A=S,q=N,J,Z,B;if(j==="c")q=k(O)+q,O="";else{O=+O;var K=O<0||1/O<0;if(O=isNaN(O)?c:k(Math.abs(O),b),_&&(O=V9(O)),K&&+O==0&&g!=="+"&&(K=!1),A=(K?g==="("?g:o:g==="-"||g==="("?"":g)+A,q=(j==="s"?V1[8+CO/3]:"")+q+(K&&g==="("?")":""),C){for(J=-1,Z=O.length;++J<Z;)if(B=O.charCodeAt(J),48>B||B>57){q=(B===46?a+O.slice(J+1):O.slice(J))+q,O=O.slice(0,J);break}}}w&&!v&&(O=t(O,1/0));var D=A.length+O.length+q.length,M=D<x?new Array(x-D+1).join(h):"";switch(w&&v&&(O=t(M+O,M.length?x-q.length:1/0),M=""),m){case"<":O=A+O+q+M;break;case"=":O=A+M+O+q;break;case"^":O=M.slice(0,D=M.length>>1)+A+O+q+M.slice(D);break;default:O=M+A+O+q;break}return i(O)}return E.toString=function(){return f+""},E}function d(f,h){var m=u((f=Dc(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Fo(h)/3)))*3,y=Math.pow(10,-g),v=V1[8+g/3];return function(x){return m(y*x)+v}}return{format:u,formatPrefix:d}}var id,mx,EO;X9({thousands:",",grouping:[3],currency:["$",""]});function X9(e){return id=Y9(e),mx=id.format,EO=id.formatPrefix,id}function J9(e){return Math.max(0,-Fo(Math.abs(e)))}function Q9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Fo(t)/3)))*3-Fo(Math.abs(e)))}function Z9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Fo(t)-Fo(e))+1}function PO(e,t,r,n){var a=Kv(e,t,r),i;switch(n=Dc(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=Q9(a,s))&&(n.precision=i),EO(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Z9(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=J9(a))&&(n.precision=i-(n.type==="%")*2);break}}return mx(n)}function Ri(e){var t=e.domain;return e.ticks=function(r){var n=t();return zv(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return PO(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,s=n[a],o=n[i],c,u,d=10;for(o<s&&(u=s,s=o,o=u,u=a,a=i,i=u);d-- >0;){if(u=Wv(s,o,r),u===c)return n[a]=s,n[i]=o,t(n);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return e},e}function OO(){var e=hx();return e.copy=function(){return iu(e,OO())},kn.apply(e,arguments),Ri(e)}function AO(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Mf),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return AO(e).unknown(t)},e=arguments.length?Array.from(e,Mf):[0,1],Ri(r)}function TO(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],s;return i<a&&(s=r,r=n,n=s,s=a,a=i,i=s),e[r]=t.floor(a),e[n]=t.ceil(i),e}function G1(e){return Math.log(e)}function Y1(e){return Math.exp(e)}function e7(e){return-Math.log(-e)}function t7(e){return-Math.exp(-e)}function r7(e){return isFinite(e)?+("1e"+e):e<0?0:e}function n7(e){return e===10?r7:e===Math.E?Math.exp:t=>Math.pow(e,t)}function a7(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function X1(e){return(t,r)=>-e(-t,r)}function gx(e){const t=e(G1,Y1),r=t.domain;let n=10,a,i;function s(){return a=a7(n),i=n7(n),r()[0]<0?(a=X1(a),i=X1(i),e(e7,t7)):e(G1,Y1),t}return t.base=function(o){return arguments.length?(n=+o,s()):n},t.domain=function(o){return arguments.length?(r(o),s()):r()},t.ticks=o=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),g,y;const v=o==null?10:+o;let x=[];if(!(n%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<n;++g)if(y=h<0?g/i(-h):g*i(h),!(y<u)){if(y>d)break;x.push(y)}}else for(;h<=m;++h)for(g=n-1;g>=1;--g)if(y=h>0?g/i(-h):g*i(h),!(y<u)){if(y>d)break;x.push(y)}x.length*2<v&&(x=zv(u,d,v))}else x=zv(h,m,Math.min(m-h,v)).map(i);return f?x.reverse():x},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Dc(c)).precision==null&&(c.trim=!0),c=mx(c)),o===1/0)return c;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(TO(r(),{floor:o=>i(Math.floor(a(o))),ceil:o=>i(Math.ceil(a(o)))})),t}function DO(){const e=gx(up()).domain([1,10]);return e.copy=()=>iu(e,DO()).base(e.base()),kn.apply(e,arguments),e}function J1(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Q1(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function vx(e){var t=1,r=e(J1(t),Q1(t));return r.constant=function(n){return arguments.length?e(J1(t=+n),Q1(t)):t},Ri(r)}function IO(){var e=vx(up());return e.copy=function(){return iu(e,IO()).constant(e.constant())},kn.apply(e,arguments)}function Z1(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function i7(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function s7(e){return e<0?-e*e:e*e}function yx(e){var t=e(jr,jr),r=1;function n(){return r===1?e(jr,jr):r===.5?e(i7,s7):e(Z1(r),Z1(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Ri(t)}function xx(){var e=yx(up());return e.copy=function(){return iu(e,xx()).exponent(e.exponent())},kn.apply(e,arguments),e}function o7(){return xx.apply(null,arguments).exponent(.5)}function ej(e){return Math.sign(e)*e*e}function l7(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function RO(){var e=hx(),t=[0,1],r=!1,n;function a(i){var s=l7(e(i));return isNaN(s)?n:r?Math.round(s):s}return a.invert=function(i){return e.invert(ej(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,Mf)).map(ej)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return RO(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},kn.apply(a,arguments),Ri(a)}function MO(){var e=[],t=[],r=[],n;function a(){var s=0,o=Math.max(1,t.length);for(r=new Array(o-1);++s<o;)r[s-1]=f9(e,s/o);return i}function i(s){return s==null||isNaN(s=+s)?n:t[nu(r,s)]}return i.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},i.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(_i),a()},i.range=function(s){return arguments.length?(t=Array.from(s),a()):t.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return MO().domain(e).range(t).unknown(n)},kn.apply(i,arguments)}function $O(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function s(c){return c!=null&&c<=c?a[nu(n,c,0,r)]:i}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},s.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,o()):a.slice()},s.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},s.unknown=function(c){return arguments.length&&(i=c),s},s.thresholds=function(){return n.slice()},s.copy=function(){return $O().domain([e,t]).range(a).unknown(i)},kn.apply(Ri(s),arguments)}function LO(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[nu(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var s=t.indexOf(i);return[e[s-1],e[s]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return LO().domain(e).range(t).unknown(r)},kn.apply(a,arguments)}const Wm=new Date,Km=new Date;function Wt(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const s=a(i),o=a.ceil(i);return i-s<o-i?s:o},a.offset=(i,s)=>(t(i=new Date(+i),s==null?1:Math.floor(s)),i),a.range=(i,s,o)=>{const c=[];if(i=a.ceil(i),o=o==null?1:Math.floor(o),!(i<s)||!(o>0))return c;let u;do c.push(u=new Date(+i)),t(i,o),e(i);while(u<i&&i<s);return c},a.filter=i=>Wt(s=>{if(s>=s)for(;e(s),!i(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!i(s););else for(;--o>=0;)for(;t(s,1),!i(s););}),r&&(a.count=(i,s)=>(Wm.setTime(+i),Km.setTime(+s),e(Wm),e(Km),Math.floor(r(Wm,Km))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?s=>n(s)%i===0:s=>a.count(0,s)%i===0):a)),a}const Lf=Wt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Lf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Wt(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Lf);Lf.range;const wa=1e3,xn=wa*60,_a=xn*60,Ma=_a*24,bx=Ma*7,tj=Ma*30,Hm=Ma*365,ls=Wt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*wa)},(e,t)=>(t-e)/wa,e=>e.getUTCSeconds());ls.range;const wx=Wt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*wa)},(e,t)=>{e.setTime(+e+t*xn)},(e,t)=>(t-e)/xn,e=>e.getMinutes());wx.range;const _x=Wt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*xn)},(e,t)=>(t-e)/xn,e=>e.getUTCMinutes());_x.range;const jx=Wt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*wa-e.getMinutes()*xn)},(e,t)=>{e.setTime(+e+t*_a)},(e,t)=>(t-e)/_a,e=>e.getHours());jx.range;const Sx=Wt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*_a)},(e,t)=>(t-e)/_a,e=>e.getUTCHours());Sx.range;const su=Wt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*xn)/Ma,e=>e.getDate()-1);su.range;const dp=Wt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ma,e=>e.getUTCDate()-1);dp.range;const FO=Wt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ma,e=>Math.floor(e/Ma));FO.range;function Ds(e){return Wt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*xn)/bx)}const fp=Ds(0),Ff=Ds(1),c7=Ds(2),u7=Ds(3),Bo=Ds(4),d7=Ds(5),f7=Ds(6);fp.range;Ff.range;c7.range;u7.range;Bo.range;d7.range;f7.range;function Is(e){return Wt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/bx)}const hp=Is(0),Bf=Is(1),h7=Is(2),p7=Is(3),Uo=Is(4),m7=Is(5),g7=Is(6);hp.range;Bf.range;h7.range;p7.range;Uo.range;m7.range;g7.range;const Nx=Wt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Nx.range;const kx=Wt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());kx.range;const $a=Wt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());$a.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Wt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});$a.range;const La=Wt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());La.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Wt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});La.range;function BO(e,t,r,n,a,i){const s=[[ls,1,wa],[ls,5,5*wa],[ls,15,15*wa],[ls,30,30*wa],[i,1,xn],[i,5,5*xn],[i,15,15*xn],[i,30,30*xn],[a,1,_a],[a,3,3*_a],[a,6,6*_a],[a,12,12*_a],[n,1,Ma],[n,2,2*Ma],[r,1,bx],[t,1,tj],[t,3,3*tj],[e,1,Hm]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,m=ox(([,,v])=>v).right(s,h);if(m===s.length)return e.every(Kv(u/Hm,d/Hm,f));if(m===0)return Lf.every(Math.max(Kv(u,d,f),1));const[g,y]=s[h/s[m-1][2]<s[m][2]/h?m-1:m];return g.every(y)}return[o,c]}const[v7,y7]=BO(La,kx,hp,FO,Sx,_x),[x7,b7]=BO($a,Nx,fp,su,jx,wx);function qm(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Vm(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Nl(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function w7(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,s=e.shortDays,o=e.months,c=e.shortMonths,u=kl(a),d=Cl(a),f=kl(i),h=Cl(i),m=kl(s),g=Cl(s),y=kl(o),v=Cl(o),x=kl(c),w=Cl(c),b={a:K,A:D,b:M,B:L,c:null,d:oj,e:oj,f:K7,g:eW,G:rW,H:U7,I:z7,j:W7,L:UO,m:H7,M:q7,p:oe,q:ee,Q:uj,s:dj,S:V7,u:G7,U:Y7,V:X7,w:J7,W:Q7,x:null,X:null,y:Z7,Y:tW,Z:nW,"%":cj},_={a:ye,A:P,b:V,B:te,c:null,d:lj,e:lj,f:oW,g:vW,G:xW,H:aW,I:iW,j:sW,L:WO,m:lW,M:cW,p:$,q:X,Q:uj,s:dj,S:uW,u:dW,U:fW,V:hW,w:pW,W:mW,x:null,X:null,y:gW,Y:yW,Z:bW,"%":cj},j={a:E,A:O,b:A,B:q,c:J,d:ij,e:ij,f:$7,g:aj,G:nj,H:sj,I:sj,j:D7,L:M7,m:T7,M:I7,p:C,q:A7,Q:F7,s:B7,S:R7,u:k7,U:C7,V:E7,w:N7,W:P7,x:Z,X:B,y:aj,Y:nj,Z:O7,"%":L7};b.x=S(r,b),b.X=S(n,b),b.c=S(t,b),_.x=S(r,_),_.X=S(n,_),_.c=S(t,_);function S(T,H){return function(Q){var F=[],ve=-1,R=0,ie=T.length,ne,Ne,Ie;for(Q instanceof Date||(Q=new Date(+Q));++ve<ie;)T.charCodeAt(ve)===37&&(F.push(T.slice(R,ve)),(Ne=rj[ne=T.charAt(++ve)])!=null?ne=T.charAt(++ve):Ne=ne==="e"?" ":"0",(Ie=H[ne])&&(ne=Ie(Q,Ne)),F.push(ne),R=ve+1);return F.push(T.slice(R,ve)),F.join("")}}function N(T,H){return function(Q){var F=Nl(1900,void 0,1),ve=k(F,T,Q+="",0),R,ie;if(ve!=Q.length)return null;if("Q"in F)return new Date(F.Q);if("s"in F)return new Date(F.s*1e3+("L"in F?F.L:0));if(H&&!("Z"in F)&&(F.Z=0),"p"in F&&(F.H=F.H%12+F.p*12),F.m===void 0&&(F.m="q"in F?F.q:0),"V"in F){if(F.V<1||F.V>53)return null;"w"in F||(F.w=1),"Z"in F?(R=Vm(Nl(F.y,0,1)),ie=R.getUTCDay(),R=ie>4||ie===0?Bf.ceil(R):Bf(R),R=dp.offset(R,(F.V-1)*7),F.y=R.getUTCFullYear(),F.m=R.getUTCMonth(),F.d=R.getUTCDate()+(F.w+6)%7):(R=qm(Nl(F.y,0,1)),ie=R.getDay(),R=ie>4||ie===0?Ff.ceil(R):Ff(R),R=su.offset(R,(F.V-1)*7),F.y=R.getFullYear(),F.m=R.getMonth(),F.d=R.getDate()+(F.w+6)%7)}else("W"in F||"U"in F)&&("w"in F||(F.w="u"in F?F.u%7:"W"in F?1:0),ie="Z"in F?Vm(Nl(F.y,0,1)).getUTCDay():qm(Nl(F.y,0,1)).getDay(),F.m=0,F.d="W"in F?(F.w+6)%7+F.W*7-(ie+5)%7:F.w+F.U*7-(ie+6)%7);return"Z"in F?(F.H+=F.Z/100|0,F.M+=F.Z%100,Vm(F)):qm(F)}}function k(T,H,Q,F){for(var ve=0,R=H.length,ie=Q.length,ne,Ne;ve<R;){if(F>=ie)return-1;if(ne=H.charCodeAt(ve++),ne===37){if(ne=H.charAt(ve++),Ne=j[ne in rj?H.charAt(ve++):ne],!Ne||(F=Ne(T,Q,F))<0)return-1}else if(ne!=Q.charCodeAt(F++))return-1}return F}function C(T,H,Q){var F=u.exec(H.slice(Q));return F?(T.p=d.get(F[0].toLowerCase()),Q+F[0].length):-1}function E(T,H,Q){var F=m.exec(H.slice(Q));return F?(T.w=g.get(F[0].toLowerCase()),Q+F[0].length):-1}function O(T,H,Q){var F=f.exec(H.slice(Q));return F?(T.w=h.get(F[0].toLowerCase()),Q+F[0].length):-1}function A(T,H,Q){var F=x.exec(H.slice(Q));return F?(T.m=w.get(F[0].toLowerCase()),Q+F[0].length):-1}function q(T,H,Q){var F=y.exec(H.slice(Q));return F?(T.m=v.get(F[0].toLowerCase()),Q+F[0].length):-1}function J(T,H,Q){return k(T,t,H,Q)}function Z(T,H,Q){return k(T,r,H,Q)}function B(T,H,Q){return k(T,n,H,Q)}function K(T){return s[T.getDay()]}function D(T){return i[T.getDay()]}function M(T){return c[T.getMonth()]}function L(T){return o[T.getMonth()]}function oe(T){return a[+(T.getHours()>=12)]}function ee(T){return 1+~~(T.getMonth()/3)}function ye(T){return s[T.getUTCDay()]}function P(T){return i[T.getUTCDay()]}function V(T){return c[T.getUTCMonth()]}function te(T){return o[T.getUTCMonth()]}function $(T){return a[+(T.getUTCHours()>=12)]}function X(T){return 1+~~(T.getUTCMonth()/3)}return{format:function(T){var H=S(T+="",b);return H.toString=function(){return T},H},parse:function(T){var H=N(T+="",!1);return H.toString=function(){return T},H},utcFormat:function(T){var H=S(T+="",_);return H.toString=function(){return T},H},utcParse:function(T){var H=N(T+="",!0);return H.toString=function(){return T},H}}}var rj={"-":"",_:" ",0:"0"},tr=/^\s*\d+/,_7=/^%/,j7=/[\\^$*+?|[\]().{}]/g;function Ue(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function S7(e){return e.replace(j7,"\\$&")}function kl(e){return new RegExp("^(?:"+e.map(S7).join("|")+")","i")}function Cl(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function N7(e,t,r){var n=tr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function k7(e,t,r){var n=tr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function C7(e,t,r){var n=tr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function E7(e,t,r){var n=tr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function P7(e,t,r){var n=tr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function nj(e,t,r){var n=tr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function aj(e,t,r){var n=tr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function O7(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function A7(e,t,r){var n=tr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function T7(e,t,r){var n=tr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function ij(e,t,r){var n=tr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function D7(e,t,r){var n=tr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function sj(e,t,r){var n=tr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function I7(e,t,r){var n=tr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function R7(e,t,r){var n=tr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function M7(e,t,r){var n=tr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function $7(e,t,r){var n=tr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function L7(e,t,r){var n=_7.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function F7(e,t,r){var n=tr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function B7(e,t,r){var n=tr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function oj(e,t){return Ue(e.getDate(),t,2)}function U7(e,t){return Ue(e.getHours(),t,2)}function z7(e,t){return Ue(e.getHours()%12||12,t,2)}function W7(e,t){return Ue(1+su.count($a(e),e),t,3)}function UO(e,t){return Ue(e.getMilliseconds(),t,3)}function K7(e,t){return UO(e,t)+"000"}function H7(e,t){return Ue(e.getMonth()+1,t,2)}function q7(e,t){return Ue(e.getMinutes(),t,2)}function V7(e,t){return Ue(e.getSeconds(),t,2)}function G7(e){var t=e.getDay();return t===0?7:t}function Y7(e,t){return Ue(fp.count($a(e)-1,e),t,2)}function zO(e){var t=e.getDay();return t>=4||t===0?Bo(e):Bo.ceil(e)}function X7(e,t){return e=zO(e),Ue(Bo.count($a(e),e)+($a(e).getDay()===4),t,2)}function J7(e){return e.getDay()}function Q7(e,t){return Ue(Ff.count($a(e)-1,e),t,2)}function Z7(e,t){return Ue(e.getFullYear()%100,t,2)}function eW(e,t){return e=zO(e),Ue(e.getFullYear()%100,t,2)}function tW(e,t){return Ue(e.getFullYear()%1e4,t,4)}function rW(e,t){var r=e.getDay();return e=r>=4||r===0?Bo(e):Bo.ceil(e),Ue(e.getFullYear()%1e4,t,4)}function nW(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ue(t/60|0,"0",2)+Ue(t%60,"0",2)}function lj(e,t){return Ue(e.getUTCDate(),t,2)}function aW(e,t){return Ue(e.getUTCHours(),t,2)}function iW(e,t){return Ue(e.getUTCHours()%12||12,t,2)}function sW(e,t){return Ue(1+dp.count(La(e),e),t,3)}function WO(e,t){return Ue(e.getUTCMilliseconds(),t,3)}function oW(e,t){return WO(e,t)+"000"}function lW(e,t){return Ue(e.getUTCMonth()+1,t,2)}function cW(e,t){return Ue(e.getUTCMinutes(),t,2)}function uW(e,t){return Ue(e.getUTCSeconds(),t,2)}function dW(e){var t=e.getUTCDay();return t===0?7:t}function fW(e,t){return Ue(hp.count(La(e)-1,e),t,2)}function KO(e){var t=e.getUTCDay();return t>=4||t===0?Uo(e):Uo.ceil(e)}function hW(e,t){return e=KO(e),Ue(Uo.count(La(e),e)+(La(e).getUTCDay()===4),t,2)}function pW(e){return e.getUTCDay()}function mW(e,t){return Ue(Bf.count(La(e)-1,e),t,2)}function gW(e,t){return Ue(e.getUTCFullYear()%100,t,2)}function vW(e,t){return e=KO(e),Ue(e.getUTCFullYear()%100,t,2)}function yW(e,t){return Ue(e.getUTCFullYear()%1e4,t,4)}function xW(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Uo(e):Uo.ceil(e),Ue(e.getUTCFullYear()%1e4,t,4)}function bW(){return"+0000"}function cj(){return"%"}function uj(e){return+e}function dj(e){return Math.floor(+e/1e3)}var Ks,HO,qO;wW({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wW(e){return Ks=w7(e),HO=Ks.format,Ks.parse,qO=Ks.utcFormat,Ks.utcParse,Ks}function _W(e){return new Date(e)}function jW(e){return e instanceof Date?+e:+new Date(+e)}function Cx(e,t,r,n,a,i,s,o,c,u){var d=hx(),f=d.invert,h=d.domain,m=u(".%L"),g=u(":%S"),y=u("%I:%M"),v=u("%I %p"),x=u("%a %d"),w=u("%b %d"),b=u("%B"),_=u("%Y");function j(S){return(c(S)<S?m:o(S)<S?g:s(S)<S?y:i(S)<S?v:n(S)<S?a(S)<S?x:w:r(S)<S?b:_)(S)}return d.invert=function(S){return new Date(f(S))},d.domain=function(S){return arguments.length?h(Array.from(S,jW)):h().map(_W)},d.ticks=function(S){var N=h();return e(N[0],N[N.length-1],S??10)},d.tickFormat=function(S,N){return N==null?j:u(N)},d.nice=function(S){var N=h();return(!S||typeof S.range!="function")&&(S=t(N[0],N[N.length-1],S??10)),S?h(TO(N,S)):d},d.copy=function(){return iu(d,Cx(e,t,r,n,a,i,s,o,c,u))},d}function SW(){return kn.apply(Cx(x7,b7,$a,Nx,fp,su,jx,wx,ls,HO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function NW(){return kn.apply(Cx(v7,y7,La,kx,hp,dp,Sx,_x,ls,qO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function pp(){var e=0,t=1,r,n,a,i,s=jr,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:s(a===0?.5:(f=(i(f)-r)*a,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(h){var m,g;return arguments.length?([m,g]=h,s=f(m,g),u):[s(0),s(1)]}}return u.range=d(al),u.rangeRound=d(fx),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Mi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function VO(){var e=Ri(pp()(jr));return e.copy=function(){return Mi(e,VO())},Ha.apply(e,arguments)}function GO(){var e=gx(pp()).domain([1,10]);return e.copy=function(){return Mi(e,GO()).base(e.base())},Ha.apply(e,arguments)}function YO(){var e=vx(pp());return e.copy=function(){return Mi(e,YO()).constant(e.constant())},Ha.apply(e,arguments)}function Ex(){var e=yx(pp());return e.copy=function(){return Mi(e,Ex()).exponent(e.exponent())},Ha.apply(e,arguments)}function kW(){return Ex.apply(null,arguments).exponent(.5)}function XO(){var e=[],t=jr;function r(n){if(n!=null&&!isNaN(n=+n))return t((nu(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(_i),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>d9(e,i/n))},r.copy=function(){return XO(t).domain(e)},Ha.apply(r,arguments)}function mp(){var e=0,t=.5,r=1,n=1,a,i,s,o,c,u=jr,d,f=!1,h;function m(y){return isNaN(y=+y)?h:(y=.5+((y=+d(y))-i)*(n*y<n*i?o:c),u(f?Math.max(0,Math.min(1,y)):y))}m.domain=function(y){return arguments.length?([e,t,r]=y,a=d(e=+e),i=d(t=+t),s=d(r=+r),o=a===i?0:.5/(i-a),c=i===s?0:.5/(s-i),n=i<a?-1:1,m):[e,t,r]},m.clamp=function(y){return arguments.length?(f=!!y,m):f},m.interpolator=function(y){return arguments.length?(u=y,m):u};function g(y){return function(v){var x,w,b;return arguments.length?([x,w,b]=v,u=L9(y,[x,w,b]),m):[u(0),u(.5),u(1)]}}return m.range=g(al),m.rangeRound=g(fx),m.unknown=function(y){return arguments.length?(h=y,m):h},function(y){return d=y,a=y(e),i=y(t),s=y(r),o=a===i?0:.5/(i-a),c=i===s?0:.5/(s-i),n=i<a?-1:1,m}}function JO(){var e=Ri(mp()(jr));return e.copy=function(){return Mi(e,JO())},Ha.apply(e,arguments)}function QO(){var e=gx(mp()).domain([.1,1,10]);return e.copy=function(){return Mi(e,QO()).base(e.base())},Ha.apply(e,arguments)}function ZO(){var e=vx(mp());return e.copy=function(){return Mi(e,ZO()).constant(e.constant())},Ha.apply(e,arguments)}function Px(){var e=yx(mp());return e.copy=function(){return Mi(e,Px()).exponent(e.exponent())},Ha.apply(e,arguments)}function CW(){return Px.apply(null,arguments).exponent(.5)}const Ll=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:cx,scaleDiverging:JO,scaleDivergingLog:QO,scaleDivergingPow:Px,scaleDivergingSqrt:CW,scaleDivergingSymlog:ZO,scaleIdentity:AO,scaleImplicit:Hv,scaleLinear:OO,scaleLog:DO,scaleOrdinal:lx,scalePoint:p9,scalePow:xx,scaleQuantile:MO,scaleQuantize:$O,scaleRadial:RO,scaleSequential:VO,scaleSequentialLog:GO,scaleSequentialPow:Ex,scaleSequentialQuantile:XO,scaleSequentialSqrt:kW,scaleSequentialSymlog:YO,scaleSqrt:o7,scaleSymlog:IO,scaleThreshold:LO,scaleTime:SW,scaleUtc:NW,tickFormat:PO},Symbol.toStringTag,{value:"Module"}));var $i=e=>e.chartData,EW=U([$i],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),gp=(e,t,r,n)=>n?EW(e):$i(e);function Ns(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Et(t)&&Et(r))return!0}return!1}function fj(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function eA(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,i;if(Et(r))a=r;else if(typeof r=="function")return;if(Et(n))i=n;else if(typeof n=="function")return;var s=[a,i];if(Ns(s))return s}}function PW(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Ns(n))return fj(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,i]=e,s,o;if(a==="auto")t!=null&&(s=Math.min(...t));else if(we(a))s=a;else if(typeof a=="function")try{t!=null&&(s=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&t1.test(a)){var c=t1.exec(a);if(c==null||t==null)s=void 0;else{var u=+c[1];s=t[0]-u}}else s=t==null?void 0:t[0];if(i==="auto")t!=null&&(o=Math.max(...t));else if(we(i))o=i;else if(typeof i=="function")try{t!=null&&(o=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&r1.test(i)){var d=r1.exec(i);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var h=[s,o];if(Ns(h))return t==null?h:fj(h,t,r)}}}var il=1e9,OW={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Ax,ut=!0,Nn="[DecimalError] ",ms=Nn+"Invalid argument: ",Ox=Nn+"Exponent out of range: ",sl=Math.floor,Zi=Math.pow,AW=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,en,Gt=1e7,it=7,tA=9007199254740991,Uf=sl(tA/it),me={};me.absoluteValue=me.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};me.comparedTo=me.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};me.decimalPlaces=me.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*it;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};me.dividedBy=me.div=function(e){return ka(this,new this.constructor(e))};me.dividedToIntegerBy=me.idiv=function(e){var t=this,r=t.constructor;return Qe(ka(t,new r(e),0,1),r.precision)};me.equals=me.eq=function(e){return!this.cmp(e)};me.exponent=function(){return Rt(this)};me.greaterThan=me.gt=function(e){return this.cmp(e)>0};me.greaterThanOrEqualTo=me.gte=function(e){return this.cmp(e)>=0};me.isInteger=me.isint=function(){return this.e>this.d.length-2};me.isNegative=me.isneg=function(){return this.s<0};me.isPositive=me.ispos=function(){return this.s>0};me.isZero=function(){return this.s===0};me.lessThan=me.lt=function(e){return this.cmp(e)<0};me.lessThanOrEqualTo=me.lte=function(e){return this.cmp(e)<1};me.logarithm=me.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(en))throw Error(Nn+"NaN");if(r.s<1)throw Error(Nn+(r.s?"NaN":"-Infinity"));return r.eq(en)?new n(0):(ut=!1,t=ka(Ic(r,i),Ic(e,i),i),ut=!0,Qe(t,a))};me.minus=me.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?aA(t,e):rA(t,(e.s=-e.s,e))};me.modulo=me.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Nn+"NaN");return r.s?(ut=!1,t=ka(r,e,0,1).times(e),ut=!0,r.minus(t)):Qe(new n(r),a)};me.naturalExponential=me.exp=function(){return nA(this)};me.naturalLogarithm=me.ln=function(){return Ic(this)};me.negated=me.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};me.plus=me.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?rA(t,e):aA(t,(e.s=-e.s,e))};me.precision=me.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ms+e);if(t=Rt(a)+1,n=a.d.length-1,r=n*it+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};me.squareRoot=me.sqrt=function(){var e,t,r,n,a,i,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Nn+"NaN")}for(e=Rt(o),ut=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=ia(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=sl((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=s=r+3;;)if(i=n,n=i.plus(ka(o,i,s+2)).times(.5),ia(i.d).slice(0,s)===(t=ia(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),a==s&&t=="4999"){if(Qe(i,r+1,0),i.times(i).eq(o)){n=i;break}}else if(t!="9999")break;s+=4}return ut=!0,Qe(n,r)};me.times=me.mul=function(e){var t,r,n,a,i,s,o,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(i=h,h=m,m=i,s=c,c=u,u=s),i=[],s=c+u,n=s;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)o=i[a]+m[n]*h[a-n-1]+t,i[a--]=o%Gt|0,t=o/Gt|0;i[a]=(i[a]+t)%Gt|0}for(;!i[--s];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,ut?Qe(e,f.precision):e};me.toDecimalPlaces=me.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(fa(e,0,il),t===void 0?t=n.rounding:fa(t,0,8),Qe(r,e+Rt(r)+1,t))};me.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=ks(n,!0):(fa(e,0,il),t===void 0?t=a.rounding:fa(t,0,8),n=Qe(new a(n),e+1,t),r=ks(n,!0,e+1)),r};me.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?ks(a):(fa(e,0,il),t===void 0?t=i.rounding:fa(t,0,8),n=Qe(new i(a),e+Rt(a)+1,t),r=ks(n.abs(),!1,e+Rt(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};me.toInteger=me.toint=function(){var e=this,t=e.constructor;return Qe(new t(e),Rt(e)+1,t.rounding)};me.toNumber=function(){return+this};me.toPower=me.pow=function(e){var t,r,n,a,i,s,o=this,c=o.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(en);if(o=new c(o),!o.s){if(e.s<1)throw Error(Nn+"Infinity");return o}if(o.eq(en))return o;if(n=c.precision,e.eq(en))return Qe(o,n);if(t=e.e,r=e.d.length-1,s=t>=r,i=o.s,s){if((r=d<0?-d:d)<=tA){for(a=new c(en),t=Math.ceil(n/it+4),ut=!1;r%2&&(a=a.times(o),pj(a.d,t)),r=sl(r/2),r!==0;)o=o.times(o),pj(o.d,t);return ut=!0,e.s<0?new c(en).div(a):Qe(a,n)}}else if(i<0)throw Error(Nn+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,ut=!1,a=e.times(Ic(o,n+u)),ut=!0,a=nA(a),a.s=i,a};me.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Rt(a),n=ks(a,r<=i.toExpNeg||r>=i.toExpPos)):(fa(e,1,il),t===void 0?t=i.rounding:fa(t,0,8),a=Qe(new i(a),e,t),r=Rt(a),n=ks(a,e<=r||r<=i.toExpNeg,e)),n};me.toSignificantDigits=me.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(fa(e,1,il),t===void 0?t=n.rounding:fa(t,0,8)),Qe(new n(r),e,t)};me.toString=me.valueOf=me.val=me.toJSON=me[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Rt(e),r=e.constructor;return ks(e,t<=r.toExpNeg||t>=r.toExpPos)};function rA(e,t){var r,n,a,i,s,o,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),ut?Qe(t,f):t;if(c=e.d,u=t.d,s=e.e,a=t.e,c=c.slice(),i=s-a,i){for(i<0?(n=c,i=-i,o=u.length):(n=u,a=s,o=c.length),s=Math.ceil(f/it),o=s>o?s+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=c.length,i=u.length,o-i<0&&(i=o,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Gt|0,c[i]%=Gt;for(r&&(c.unshift(r),++a),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=a,ut?Qe(t,f):t}function fa(e,t,r){if(e!==~~e||e<t||e>r)throw Error(ms+e)}function ia(e){var t,r,n,a=e.length-1,i="",s=e[0];if(a>0){for(i+=s,t=1;t<a;t++)n=e[t]+"",r=it-n.length,r&&(i+=ii(r)),i+=n;s=e[t],n=s+"",r=it-n.length,r&&(i+=ii(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}var ka=function(){function e(n,a){var i,s=0,o=n.length;for(n=n.slice();o--;)i=n[o]*a+s,n[o]=i%Gt|0,s=i/Gt|0;return s&&n.unshift(s),n}function t(n,a,i,s){var o,c;if(i!=s)c=i>s?1:-1;else for(o=c=0;o<i;o++)if(n[o]!=a[o]){c=n[o]>a[o]?1:-1;break}return c}function r(n,a,i){for(var s=0;i--;)n[i]-=s,s=n[i]<a[i]?1:0,n[i]=s*Gt+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,s){var o,c,u,d,f,h,m,g,y,v,x,w,b,_,j,S,N,k,C=n.constructor,E=n.s==a.s?1:-1,O=n.d,A=a.d;if(!n.s)return new C(n);if(!a.s)throw Error(Nn+"Division by zero");for(c=n.e-a.e,N=A.length,j=O.length,m=new C(E),g=m.d=[],u=0;A[u]==(O[u]||0);)++u;if(A[u]>(O[u]||0)&&--c,i==null?w=i=C.precision:s?w=i+(Rt(n)-Rt(a))+1:w=i,w<0)return new C(0);if(w=w/it+2|0,u=0,N==1)for(d=0,A=A[0],w++;(u<j||d)&&w--;u++)b=d*Gt+(O[u]||0),g[u]=b/A|0,d=b%A|0;else{for(d=Gt/(A[0]+1)|0,d>1&&(A=e(A,d),O=e(O,d),N=A.length,j=O.length),_=N,y=O.slice(0,N),v=y.length;v<N;)y[v++]=0;k=A.slice(),k.unshift(0),S=A[0],A[1]>=Gt/2&&++S;do d=0,o=t(A,y,N,v),o<0?(x=y[0],N!=v&&(x=x*Gt+(y[1]||0)),d=x/S|0,d>1?(d>=Gt&&(d=Gt-1),f=e(A,d),h=f.length,v=y.length,o=t(f,y,h,v),o==1&&(d--,r(f,N<h?k:A,h))):(d==0&&(o=d=1),f=A.slice()),h=f.length,h<v&&f.unshift(0),r(y,f,v),o==-1&&(v=y.length,o=t(A,y,N,v),o<1&&(d++,r(y,N<v?k:A,v))),v=y.length):o===0&&(d++,y=[0]),g[u++]=d,o&&y[0]?y[v++]=O[_]||0:(y=[O[_]],v=1);while((_++<j||y[0]!==void 0)&&w--)}return g[0]||g.shift(),m.e=c,Qe(m,s?i+Rt(m)+1:i)}}();function nA(e,t){var r,n,a,i,s,o,c=0,u=0,d=e.constructor,f=d.precision;if(Rt(e)>16)throw Error(Ox+Rt(e));if(!e.s)return new d(en);for(ut=!1,o=f,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),u+=5;for(n=Math.log(Zi(2,u))/Math.LN10*2+5|0,o+=n,r=a=i=new d(en),d.precision=o;;){if(a=Qe(a.times(e),o),r=r.times(++c),s=i.plus(ka(a,r,o)),ia(s.d).slice(0,o)===ia(i.d).slice(0,o)){for(;u--;)i=Qe(i.times(i),o);return d.precision=f,t==null?(ut=!0,Qe(i,f)):i}i=s}}function Rt(e){for(var t=e.e*it,r=e.d[0];r>=10;r/=10)t++;return t}function Gm(e,t,r){if(t>e.LN10.sd())throw ut=!0,r&&(e.precision=r),Error(Nn+"LN10 precision limit exceeded");return Qe(new e(e.LN10),t)}function ii(e){for(var t="";e--;)t+="0";return t}function Ic(e,t){var r,n,a,i,s,o,c,u,d,f=1,h=10,m=e,g=m.d,y=m.constructor,v=y.precision;if(m.s<1)throw Error(Nn+(m.s?"NaN":"-Infinity"));if(m.eq(en))return new y(0);if(t==null?(ut=!1,u=v):u=t,m.eq(10))return t==null&&(ut=!0),Gm(y,u);if(u+=h,y.precision=u,r=ia(g),n=r.charAt(0),i=Rt(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=ia(m.d),n=r.charAt(0),f++;i=Rt(m),n>1?(m=new y("0."+r),i++):m=new y(n+"."+r.slice(1))}else return c=Gm(y,u+2,v).times(i+""),m=Ic(new y(n+"."+r.slice(1)),u-h).plus(c),y.precision=v,t==null?(ut=!0,Qe(m,v)):m;for(o=s=m=ka(m.minus(en),m.plus(en),u),d=Qe(m.times(m),u),a=3;;){if(s=Qe(s.times(d),u),c=o.plus(ka(s,new y(a),u)),ia(c.d).slice(0,u)===ia(o.d).slice(0,u))return o=o.times(2),i!==0&&(o=o.plus(Gm(y,u+2,v).times(i+""))),o=ka(o,new y(f),u),y.precision=v,t==null?(ut=!0,Qe(o,v)):o;o=c,a+=2}}function hj(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=sl(r/it),e.d=[],n=(r+1)%it,r<0&&(n+=it),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=it;n<a;)e.d.push(+t.slice(n,n+=it));t=t.slice(n),n=it-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),ut&&(e.e>Uf||e.e<-Uf))throw Error(Ox+r)}else e.s=0,e.e=0,e.d=[0];return e}function Qe(e,t,r){var n,a,i,s,o,c,u,d,f=e.d;for(s=1,i=f[0];i>=10;i/=10)s++;if(n=t-s,n<0)n+=it,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/it),i=f.length,d>=i)return e;for(u=i=f[d],s=1;i>=10;i/=10)s++;n%=it,a=n-it+s}if(r!==void 0&&(i=Zi(10,s-a-1),o=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?a>0?u/Zi(10,s-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=Rt(e),f.length=1,t=t-i-1,f[0]=Zi(10,(it-t%it)%it),e.e=sl(-t/it)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=Zi(10,it-n),f[d]=a>0?(u/Zi(10,s-a)%Zi(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==Gt&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=Gt)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(ut&&(e.e>Uf||e.e<-Uf))throw Error(Ox+Rt(e));return e}function aA(e,t){var r,n,a,i,s,o,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),ut?Qe(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),s=u-n,s){for(d=s<0,d?(r=c,s=-s,o=f.length):(r=f,n=u,o=c.length),a=Math.max(Math.ceil(m/it),o)+2,s>a&&(s=a,r.length=1),r.reverse(),a=s;a--;)r.push(0);r.reverse()}else{for(a=c.length,o=f.length,d=a<o,d&&(o=a),a=0;a<o;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}s=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),o=c.length,a=f.length-o;a>0;--a)c[o++]=0;for(a=f.length;a>s;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=Gt-1;--c[i],c[a]+=Gt}c[a]-=f[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,ut?Qe(t,m):t):new h(0)}function ks(e,t,r){var n,a=Rt(e),i=ia(e.d),s=i.length;return t?(r&&(n=r-s)>0?i=i.charAt(0)+"."+i.slice(1)+ii(n):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+ii(-a-1)+i,r&&(n=r-s)>0&&(i+=ii(n))):a>=s?(i+=ii(a+1-s),r&&(n=r-a-1)>0&&(i=i+"."+ii(n))):((n=a+1)<s&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-s)>0&&(a+1===s&&(i+="."),i+=ii(n))),e.s<0?"-"+i:i}function pj(e,t){if(e.length>t)return e.length=t,!0}function iA(e){var t,r,n;function a(i){var s=this;if(!(s instanceof a))return new a(i);if(s.constructor=a,i instanceof a){s.s=i.s,s.e=i.e,s.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(ms+i);if(i>0)s.s=1;else if(i<0)i=-i,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(i===~~i&&i<1e7){s.e=0,s.d=[i];return}return hj(s,i.toString())}else if(typeof i!="string")throw Error(ms+i);if(i.charCodeAt(0)===45?(i=i.slice(1),s.s=-1):s.s=1,AW.test(i))hj(s,i);else throw Error(ms+i)}if(a.prototype=me,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=iA,a.config=a.set=TW,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function TW(e){if(!e||typeof e!="object")throw Error(Nn+"Object expected");var t,r,n,a=["precision",1,il,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(sl(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(ms+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(ms+r+": "+n);return this}var Ax=iA(OW);en=new Ax(1);const Ve=Ax;var DW=e=>e,sA={},oA=e=>e===sA,mj=e=>function t(){return arguments.length===0||arguments.length===1&&oA(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},lA=(e,t)=>e===1?t:mj(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n.filter(s=>s!==sA).length;return i>=e?t(...n):lA(e-i,mj(function(){for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];var u=n.map(d=>oA(d)?o.shift():d);return t(...u,...o)}))}),vp=e=>lA(e.length,e),Yv=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},IW=vp((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),RW=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return DW;var a=r.reverse(),i=a[0],s=a.slice(1);return function(){return s.reduce((o,c)=>c(o),i(...arguments))}},Xv=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),cA=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t&&a.every((s,o)=>{var c;return s===((c=t)===null||c===void 0?void 0:c[o])})||(t=a,r=e(...a)),r}};function uA(e){var t;return e===0?t=1:t=Math.floor(new Ve(e).abs().log(10).toNumber())+1,t}function dA(e,t,r){for(var n=new Ve(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}vp((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});vp((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});vp((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var fA=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},hA=(e,t,r)=>{if(e.lte(0))return new Ve(0);var n=uA(e.toNumber()),a=new Ve(10).pow(n),i=e.div(a),s=n!==1?.05:.1,o=new Ve(Math.ceil(i.div(s).toNumber())).add(r).mul(s),c=o.mul(a);return t?new Ve(c.toNumber()):new Ve(Math.ceil(c.toNumber()))},MW=(e,t,r)=>{var n=new Ve(1),a=new Ve(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Ve(10).pow(uA(e)-1),a=new Ve(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Ve(Math.floor(e)))}else e===0?a=new Ve(Math.floor((t-1)/2)):r||(a=new Ve(Math.floor(e)));var s=Math.floor((t-1)/2),o=RW(IW(c=>a.add(new Ve(c-s).mul(n)).toNumber()),Yv);return o(0,t)},pA=function(t,r,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Ve(0),tickMin:new Ve(0),tickMax:new Ve(0)};var s=hA(new Ve(r).sub(t).div(n-1),a,i),o;t<=0&&r>=0?o=new Ve(0):(o=new Ve(t).add(r).div(2),o=o.sub(new Ve(o).mod(s)));var c=Math.ceil(o.sub(t).div(s).toNumber()),u=Math.ceil(new Ve(r).sub(o).div(s).toNumber()),d=c+u+1;return d>n?pA(t,r,n,a,i+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:s,tickMin:o.sub(new Ve(c).mul(s)),tickMax:o.add(new Ve(u).mul(s))})};function $W(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[s,o]=fA([t,r]);if(s===-1/0||o===1/0){var c=o===1/0?[s,...Yv(0,n-1).map(()=>1/0)]:[...Yv(0,n-1).map(()=>-1/0),o];return t>r?Xv(c):c}if(s===o)return MW(s,n,a);var{step:u,tickMin:d,tickMax:f}=pA(s,o,i,a,0),h=dA(d,f.add(new Ve(.1).mul(u)),u);return t>r?Xv(h):h}function LW(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,s]=fA([r,n]);if(i===-1/0||s===1/0)return[r,n];if(i===s)return[i];var o=Math.max(t,2),c=hA(new Ve(s).sub(i).div(o-1),a,0),u=[...dA(new Ve(i),new Ve(s),c),s];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?Xv(u):u}var FW=cA($W),BW=cA(LW),mA=e=>e.rootProps.maxBarSize,UW=e=>e.rootProps.barGap,gA=e=>e.rootProps.barCategoryGap,zW=e=>e.rootProps.barSize,yp=e=>e.rootProps.stackOffset,Tx=e=>e.options.chartName,Dx=e=>e.rootProps.syncId,vA=e=>e.rootProps.syncMethod,Ix=e=>e.options.eventEmitter,Jt={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},va={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Jr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},xp=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},WW={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:va.angleAxisId,includeHidden:!1,name:void 0,reversed:va.reversed,scale:va.scale,tick:va.tick,tickCount:void 0,ticks:void 0,type:va.type,unit:void 0},KW={allowDataOverflow:Jr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Jr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Jr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Jr.scale,tick:Jr.tick,tickCount:Jr.tickCount,ticks:void 0,type:Jr.type,unit:void 0},HW={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:va.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:va.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:va.scale,tick:va.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},qW={allowDataOverflow:Jr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Jr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Jr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Jr.scale,tick:Jr.tick,tickCount:Jr.tickCount,ticks:void 0,type:"category",unit:void 0},Rx=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?HW:WW,Mx=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?qW:KW,bp=e=>e.polarOptions,$x=U([Wa,Ka,er],W8),yA=U([bp,$x],(e,t)=>{if(e!=null)return Gn(e.innerRadius,t,0)}),xA=U([bp,$x],(e,t)=>{if(e!=null)return Gn(e.outerRadius,t,t*.8)}),VW=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},bA=U([bp],VW);U([Rx,bA],xp);var wA=U([$x,yA,xA],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});U([Mx,wA],xp);var _A=U([Ke,bp,yA,xA,Wa,Ka],(e,t,r,n,a,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:s,cy:o,startAngle:c,endAngle:u}=t;return{cx:Gn(s,a,a/2),cy:Gn(o,i,i/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Kt=(e,t)=>t,wp=(e,t,r)=>r;function Lx(e){return e==null?void 0:e.id}function jA(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:a,dataKey:i}=r,s=new Map;return e.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=Lx(o);u.forEach((f,h)=>{var m=i==null||a?h:String(Zt(f,i,null)),g=Zt(f,o.dataKey,0),y;s.has(m)?y=s.get(m):y={},Object.assign(y,{[d]:g}),s.set(m,y)})}}),Array.from(s.values())}function _p(e){return e.stackId!=null&&e.dataKey!=null}var jp=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Sp(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function GW(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Ht=e=>{var t=Ke(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},ol=e=>e.tooltip.settings.axisId;function gj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gj(Object(r),!0).forEach(function(n){YW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YW(e,t,r){return(t=XW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XW(e){var t=JW(e,"string");return typeof t=="symbol"?t:t+""}function JW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jv=[0,"auto"],Gr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},SA=(e,t)=>e.cartesianAxis.xAxis[t],qa=(e,t)=>{var r=SA(e,t);return r??Gr},Yr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Jv,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:tu},NA=(e,t)=>e.cartesianAxis.yAxis[t],Va=(e,t)=>{var r=NA(e,t);return r??Yr},QW={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Fx=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??QW},Or=(e,t,r)=>{switch(t){case"xAxis":return qa(e,r);case"yAxis":return Va(e,r);case"zAxis":return Fx(e,r);case"angleAxis":return Rx(e,r);case"radiusAxis":return Mx(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},ZW=(e,t,r)=>{switch(t){case"xAxis":return qa(e,r);case"yAxis":return Va(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},ou=(e,t,r)=>{switch(t){case"xAxis":return qa(e,r);case"yAxis":return Va(e,r);case"angleAxis":return Rx(e,r);case"radiusAxis":return Mx(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},kA=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function CA(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Np=e=>e.graphicalItems.cartesianItems,eK=U([Kt,wp],CA),EA=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),lu=U([Np,Or,eK],EA,{memoizeOptions:{resultEqualityCheck:Sp}}),PA=U([lu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(_p)),OA=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),tK=U([lu],OA),AA=e=>e.map(t=>t.data).filter(Boolean).flat(1),rK=U([lu],AA,{memoizeOptions:{resultEqualityCheck:Sp}}),TA=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},Bx=U([rK,gp],TA),DA=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Zt(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Zt(a,n)}))):e.map(n=>({value:n})),kp=U([Bx,Or,lu],DA);function IA(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Ed(e){if(ua(e)||e instanceof Date){var t=Number(e);if(Et(t))return t}}function vj(e){if(Array.isArray(e)){var t=[Ed(e[0]),Ed(e[1])];return Ns(t)?t:void 0}var r=Ed(e);if(r!=null)return[r,r]}function Fa(e){return e.map(Ed).filter(qF)}function nK(e,t,r){return!r||typeof t!="number"||Vn(t)?[]:r.length?Fa(r.flatMap(n=>{var a=Zt(e,n.dataKey),i,s;if(Array.isArray(a)?[i,s]=a:i=s=a,!(!Et(i)||!Et(s)))return[t-i,t+s]})):[]}var qt=e=>{var t=Ht(e),r=ol(e);return ou(e,t,r)},RA=U([qt],e=>e==null?void 0:e.dataKey),aK=U([PA,gp,qt],jA),MA=(e,t,r)=>{var n={},a=t.reduce((i,s)=>(s.stackId==null||(i[s.stackId]==null&&(i[s.stackId]=[]),i[s.stackId].push(s)),i),n);return Object.fromEntries(Object.entries(a).map(i=>{var[s,o]=i,c=o.map(Lx);return[s,{stackedData:JU(e,c,r),graphicalItems:o}]}))},Qv=U([aK,PA,yp],MA),$A=(e,t,r,n)=>{var{dataStartIndex:a,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var s=rz(e,a,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},iK=U([Or],e=>e.allowDataOverflow),Ux=e=>{var t;if(e==null||!("domain"in e))return Jv;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Fa(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:Jv},LA=U([Or],Ux),FA=U([LA,iK],eA),sK=U([Qv,$i,Kt,FA],$A,{memoizeOptions:{resultEqualityCheck:jp}}),zx=e=>e.errorBars,oK=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>IA(r,n)),Wf=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var i=a.flat(),s=Math.min(...i),o=Math.max(...i);return[s,o]}},BA=(e,t,r,n,a)=>{var i,s;if(r.length>0&&e.forEach(o=>{r.forEach(c=>{var u,d,f=(u=n[c.id])===null||u===void 0?void 0:u.filter(x=>IA(a,x)),h=Zt(o,(d=t.dataKey)!==null&&d!==void 0?d:c.dataKey),m=nK(o,h,f);if(m.length>=2){var g=Math.min(...m),y=Math.max(...m);(i==null||g<i)&&(i=g),(s==null||y>s)&&(s=y)}var v=vj(h);v!=null&&(i=i==null?v[0]:Math.min(i,v[0]),s=s==null?v[1]:Math.max(s,v[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(o=>{var c=vj(Zt(o,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),Et(i)&&Et(s))return[i,s]},lK=U([Bx,Or,tK,zx,Kt],BA,{memoizeOptions:{resultEqualityCheck:jp}});function cK(e){var{value:t}=e;if(ua(t)||t instanceof Date)return t}var uK=(e,t,r)=>{var n=e.map(cK).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&BE(n))?xO(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},UA=e=>e.referenceElements.dots,ll=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),dK=U([UA,Kt,wp],ll),zA=e=>e.referenceElements.areas,fK=U([zA,Kt,wp],ll),WA=e=>e.referenceElements.lines,hK=U([WA,Kt,wp],ll),KA=(e,t)=>{var r=Fa(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},pK=U(dK,Kt,KA),HA=(e,t)=>{var r=Fa(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},mK=U([fK,Kt],HA);function gK(e){var t;if(e.x!=null)return Fa([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:Fa(r)}function vK(e){var t;if(e.y!=null)return Fa([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:Fa(r)}var qA=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?gK(n):vK(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},yK=U([hK,Kt],qA),xK=U(pK,yK,mK,(e,t,r)=>Wf(e,r,t)),VA=(e,t,r,n,a,i,s,o)=>{if(r!=null)return r;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?Wf(n,i,a):Wf(i,a);return PW(t,u,e.allowDataOverflow)},bK=U([Or,LA,FA,sK,lK,xK,Ke,Kt],VA,{memoizeOptions:{resultEqualityCheck:jp}}),wK=[0,1],GA=(e,t,r,n,a,i,s)=>{if(!((e==null||r==null||r.length===0)&&s===void 0)){var{dataKey:o,type:c}=e,u=Ii(t,i);if(u&&o==null){var d;return xO(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?uK(n,e,u):a==="expand"?wK:s}},Wx=U([Or,Ke,Bx,kp,yp,Kt,bK],GA),YA=(e,t,r,n,a)=>{if(e!=null){var{scale:i,type:s}=e;if(i==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":s==="category"?"band":"linear";if(typeof i=="string"){var o="scale".concat(Qc(i));return o in Ll?o:"point"}}},cu=U([Or,Ke,kA,Tx,Kt],YA);function _K(e){if(e!=null){if(e in Ll)return Ll[e]();var t="scale".concat(Qc(e));if(t in Ll)return Ll[t]()}}function Kx(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=_K(t);if(a!=null){var i=a.domain(r).range(n);return qU(i),i}}}var XA=(e,t,r)=>{var n=Ux(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Ns(e))return FW(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Ns(e))return BW(e,t.tickCount,t.allowDecimals)}},Hx=U([Wx,ou,cu],XA),JA=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Ns(t)&&Array.isArray(r)&&r.length>0){var a=t[0],i=r[0],s=t[1],o=r[r.length-1];return[Math.min(a,i),Math.max(s,o)]}return t},jK=U([Or,Wx,Hx,Kt],JA),SK=U(kp,Or,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Fa(e.map(o=>o.value))).sort((o,c)=>o-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var i=0;i<n.length-1;i++){var s=n[i+1]-n[i];r=Math.min(r,s)}return r/a}}),QA=U(SK,Ke,gA,er,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Et(e))return 0;var i=t==="vertical"?n.height:n.width;if(a==="gap")return e*i/2;if(a==="no-gap"){var s=Gn(r,e*i),o=e*i/2;return o-s-(o-s)/i*s}return 0}),NK=(e,t)=>{var r=qa(e,t);return r==null||typeof r.padding!="string"?0:QA(e,"xAxis",t,r.padding)},kK=(e,t)=>{var r=Va(e,t);return r==null||typeof r.padding!="string"?0:QA(e,"yAxis",t,r.padding)},CK=U(qa,NK,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),EK=U(Va,kK,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),PK=U([er,CK,ip,ap,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:i}=n;return a?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),OK=U([er,Ke,EK,ip,ap,(e,t,r)=>r],(e,t,r,n,a,i)=>{var{padding:s}=a;return i?[n.height-s.bottom,s.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),uu=(e,t,r,n)=>{var a;switch(t){case"xAxis":return PK(e,r,n);case"yAxis":return OK(e,r,n);case"zAxis":return(a=Fx(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return bA(e);case"radiusAxis":return wA(e,r);default:return}},ZA=U([Or,uu],xp),cl=U([Or,cu,jK,ZA],Kx);U([lu,zx,Kt],oK);function eT(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Cp=(e,t)=>t,Ep=(e,t,r)=>r,AK=U(rp,Cp,Ep,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(eT)),TK=U(np,Cp,Ep,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(eT)),tT=(e,t)=>({width:e.width,height:t.height}),DK=(e,t)=>{var r=typeof t.width=="number"?t.width:tu;return{width:r,height:e.height}},rT=U(er,qa,tT),IK=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},RK=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},MK=U(Ka,er,AK,Cp,Ep,(e,t,r,n,a)=>{var i={},s;return r.forEach(o=>{var c=tT(t,o);s==null&&(s=IK(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;i[o.id]=s-Number(u)*c.height,s+=(u?-1:1)*c.height}),i}),$K=U(Wa,er,TK,Cp,Ep,(e,t,r,n,a)=>{var i={},s;return r.forEach(o=>{var c=DK(t,o);s==null&&(s=RK(t,n,e));var u=n==="left"&&!a||n==="right"&&a;i[o.id]=s-Number(u)*c.width,s+=(u?-1:1)*c.width}),i}),LK=(e,t)=>{var r=qa(e,t);if(r!=null)return MK(e,r.orientation,r.mirror)},FK=U([er,qa,LK,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:e.left,y:0}:{x:e.left,y:a}}}),BK=(e,t)=>{var r=Va(e,t);if(r!=null)return $K(e,r.orientation,r.mirror)},UK=U([er,Va,BK,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:e.top}:{x:a,y:e.top}}}),nT=U(er,Va,(e,t)=>{var r=typeof t.width=="number"?t.width:tu;return{width:r,height:e.height}}),yj=(e,t,r)=>{switch(t){case"xAxis":return rT(e,r).width;case"yAxis":return nT(e,r).height;default:return}},aT=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:i,dataKey:s}=r,o=Ii(e,n),c=t.map(u=>u.value);if(s&&o&&i==="category"&&a&&BE(c))return c}},qx=U([Ke,kp,Or,Kt],aT),iT=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:i}=r,s=Ii(e,n);if(s&&(a==="number"||i!=="auto"))return t.map(o=>o.value)}},Vx=U([Ke,kp,ou,Kt],iT),xj=U([Ke,ZW,cu,cl,qx,Vx,uu,Hx,Kt],(e,t,r,n,a,i,s,o,c)=>{if(t!=null){var u=Ii(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:a,isCategorical:u,niceTicks:o,range:s,realScaleType:r,scale:n}}}),zK=(e,t,r,n,a,i,s,o,c)=>{if(!(t==null||n==null)){var u=Ii(e,c),{type:d,ticks:f,tickCount:h}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/m:0;g=c==="angleAxis"&&i!=null&&i.length>=2?Mr(i[0]-i[1])*2*g:g;var y=f||a;if(y){var v=y.map((x,w)=>{var b=s?s.indexOf(x):x;return{index:w,coordinate:n(b)+g,value:x,offset:g}});return v.filter(x=>Et(x.coordinate))}return u&&o?o.map((x,w)=>({coordinate:n(x)+g,value:x,index:w,offset:g})).filter(x=>Et(x.coordinate)):n.ticks?n.ticks(h).map(x=>({coordinate:n(x)+g,value:x,offset:g})):n.domain().map((x,w)=>({coordinate:n(x)+g,value:s?s[x]:x,index:w,offset:g}))}},sT=U([Ke,ou,cu,cl,Hx,uu,qx,Vx,Kt],zK),WK=(e,t,r,n,a,i,s)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=Ii(e,s),{tickCount:c}=t,u=0;return u=s==="angleAxis"&&(n==null?void 0:n.length)>=2?Mr(n[0]-n[1])*2*u:u,o&&i?i.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},Ei=U([Ke,ou,cl,uu,qx,Vx,Kt],WK),Pi=U(Or,cl,(e,t)=>{if(!(e==null||t==null))return zf(zf({},e),{},{scale:t})}),KK=U([Or,cu,Wx,ZA],Kx);U((e,t,r)=>Fx(e,r),KK,(e,t)=>{if(!(e==null||t==null))return zf(zf({},e),{},{scale:t})});var HK=U([Ke,rp,np],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),oT=e=>e.options.defaultTooltipEventType,lT=e=>e.options.validateTooltipEventTypes;function cT(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Gx(e,t){var r=oT(e),n=lT(e);return cT(t,r,n)}function qK(e){return Se(t=>Gx(t,e))}var uT=(e,t)=>{var r,n=Number(t);if(!(Vn(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},VK=e=>e.tooltip.settings,ui={active:!1,index:null,dataKey:void 0,coordinate:void 0},GK={itemInteraction:{click:ui,hover:ui},axisInteraction:{click:ui,hover:ui},keyboardInteraction:ui,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},dT=Ur({name:"tooltip",initialState:GK,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Ut()},removeTooltipEntrySettings:{reducer(e,t){var r=Na(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Ut()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:YK,removeTooltipEntrySettings:XK,setTooltipSettingsState:JK,setActiveMouseOverItemIndex:fT,mouseLeaveItem:QK,mouseLeaveChart:hT,setActiveClickItemIndex:ZK,setMouseOverAxisIndex:pT,setMouseClickAxisIndex:eH,setSyncInteraction:Zv,setKeyboardInteraction:ey}=dT.actions,tH=dT.reducer;function bj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bj(Object(r),!0).forEach(function(n){rH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rH(e,t,r){return(t=nH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nH(e){var t=aH(e,"string");return typeof t=="symbol"?t:t+""}function aH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iH(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function sH(e){return e.index!=null}var mT=(e,t,r,n)=>{if(t==null)return ui;var a=iH(e,t,r);if(a==null)return ui;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(sH(a)){if(i)return sd(sd({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return sd(sd({},ui),{},{coordinate:a.coordinate})},Yx=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Et(n))return r;var a=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(a,Math.min(n,i)))},gT=(e,t,r,n,a,i,s,o)=>{if(!(i==null||o==null)){var c=s[0],u=c==null?void 0:o(c.positions,i);if(u!=null)return u;var d=a==null?void 0:a[Number(i)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},vT=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var s;return((s=i.settings)===null||s===void 0?void 0:s.dataKey)===a})},du=e=>e.options.tooltipPayloadSearcher,ul=e=>e.tooltip;function wj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _j(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wj(Object(r),!0).forEach(function(n){oH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oH(e,t,r){return(t=lH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lH(e){var t=cH(e,"string");return typeof t=="symbol"?t:t+""}function cH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uH(e,t){return e??t}var yT=(e,t,r,n,a,i,s)=>{if(!(t==null||i==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,m)=>{var g,{dataDefinedOnItem:y,settings:v}=m,x=uH(y,o),w=Array.isArray(x)?HP(x,u,d):x,b=(g=v==null?void 0:v.dataKey)!==null&&g!==void 0?g:n,_=v==null?void 0:v.nameKey,j;if(n&&Array.isArray(w)&&!Array.isArray(w[0])&&s==="axis"?j=UE(w,n,a):j=i(w,t,c,_),Array.isArray(j))j.forEach(N=>{var k=_j(_j({},v),{},{name:N.name,unit:N.unit,color:void 0,fill:void 0});h.push(n1({tooltipEntrySettings:k,dataKey:N.dataKey,payload:N.payload,value:Zt(N.payload,N.dataKey),name:N.name}))});else{var S;h.push(n1({tooltipEntrySettings:v,dataKey:b,payload:j,value:Zt(j,b),name:(S=Zt(j,_))!==null&&S!==void 0?S:v==null?void 0:v.name}))}return h},f)}},Xx=U([qt,Ke,kA,Tx,Ht],YA),dH=U([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),fH=U([Ht,ol],CA),fu=U([dH,qt,fH],EA,{memoizeOptions:{resultEqualityCheck:Sp}}),hH=U([fu],e=>e.filter(_p)),pH=U([fu],AA,{memoizeOptions:{resultEqualityCheck:Sp}}),dl=U([pH,$i],TA),mH=U([hH,$i,qt],jA),Jx=U([dl,qt,fu],DA),xT=U([qt],Ux),gH=U([qt],e=>e.allowDataOverflow),bT=U([xT,gH],eA),vH=U([fu],e=>e.filter(_p)),yH=U([mH,vH,yp],MA),xH=U([yH,$i,Ht,bT],$A),bH=U([fu],OA),wH=U([dl,qt,bH,zx,Ht],BA,{memoizeOptions:{resultEqualityCheck:jp}}),_H=U([UA,Ht,ol],ll),jH=U([_H,Ht],KA),SH=U([zA,Ht,ol],ll),NH=U([SH,Ht],HA),kH=U([WA,Ht,ol],ll),CH=U([kH,Ht],qA),EH=U([jH,CH,NH],Wf),PH=U([qt,xT,bT,xH,wH,EH,Ke,Ht],VA),wT=U([qt,Ke,dl,Jx,yp,Ht,PH],GA),OH=U([wT,qt,Xx],XA),AH=U([qt,wT,OH,Ht],JA),_T=e=>{var t=Ht(e),r=ol(e),n=!1;return uu(e,t,r,n)},jT=U([qt,_T],xp),ST=U([qt,Xx,AH,jT],Kx),TH=U([Ke,Jx,qt,Ht],aT),DH=U([Ke,Jx,qt,Ht],iT),IH=(e,t,r,n,a,i,s,o)=>{if(t){var{type:c}=t,u=Ii(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Mr(a[0]-a[1])*2*f:f,u&&s?s.map((h,m)=>({coordinate:n(h)+f,value:h,index:m,offset:f})):n.domain().map((h,m)=>({coordinate:n(h)+f,value:i?i[h]:h,index:m,offset:f}))}}},Ga=U([Ke,qt,Xx,ST,_T,TH,DH,Ht],IH),Qx=U([oT,lT,VK],(e,t,r)=>cT(r.shared,e,t)),NT=e=>e.tooltip.settings.trigger,Zx=e=>e.tooltip.settings.defaultIndex,Pp=U([ul,Qx,NT,Zx],mT),Cs=U([Pp,dl],Yx),kT=U([Ga,Cs],uT),CT=U([Pp],e=>{if(e)return e.dataKey}),ET=U([ul,Qx,NT,Zx],vT),RH=U([Wa,Ka,Ke,er,Ga,Zx,ET,du],gT),MH=U([Pp,RH],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),$H=U([Pp],e=>e.active),LH=U([ET,Cs,$i,RA,kT,du,Qx],yT),FH=U([LH],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function jj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Sj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jj(Object(r),!0).forEach(function(n){BH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BH(e,t,r){return(t=UH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UH(e){var t=zH(e,"string");return typeof t=="symbol"?t:t+""}function zH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WH=()=>Se(qt),KH=()=>{var e=WH(),t=Se(Ga),r=Se(ST);return Lo(!e||!r?void 0:Sj(Sj({},e),{},{scale:r}),t)};function Nj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Hs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nj(Object(r),!0).forEach(function(n){HH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HH(e,t,r){return(t=qH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qH(e){var t=VH(e,"string");return typeof t=="symbol"?t:t+""}function VH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GH=(e,t,r,n)=>{var a=t.find(i=>i&&i.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},YH=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="centric"){var i=a.coordinate,{radius:s}=n;return Hs(Hs(Hs({},n),or(n.cx,n.cy,s,i)),{},{angle:i,radius:s})}var o=a.coordinate,{angle:c}=n;return Hs(Hs(Hs({},n),or(n.cx,n.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function XH(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var PT=(e,t,r,n,a)=>{var i,s=-1,o=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<o;c++){var u=c>0?r[c-1].coordinate:r[o-1].coordinate,d=r[c].coordinate,f=c>=o-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(Mr(d-u)!==Mr(f-d)){var m=[];if(Mr(f-d)===Mr(a[1]-a[0])){h=f;var g=d+a[1]-a[0];m[0]=Math.min(g,(g+u)/2),m[1]=Math.max(g,(g+u)/2)}else{h=u;var y=f+a[1]-a[0];m[0]=Math.min(d,(y+d)/2),m[1]=Math.max(d,(y+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=m[0]&&e<=m[1]){({index:s}=r[c]);break}}else{var x=Math.min(u,f),w=Math.max(u,f);if(e>(x+d)/2&&e<=(w+d)/2){({index:s}=r[c]);break}}}else if(t){for(var b=0;b<o;b++)if(b===0&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:s}=t[b]);break}}return s},JH=()=>Se(Tx),eb=(e,t)=>t,OT=(e,t,r)=>r,tb=(e,t,r,n)=>n,QH=U(Ga,e=>Yh(e,t=>t.coordinate)),rb=U([ul,eb,OT,tb],mT),AT=U([rb,dl],Yx),ZH=(e,t,r)=>{if(t!=null){var n=ul(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},TT=U([ul,eb,OT,tb],vT),Kf=U([Wa,Ka,Ke,er,Ga,tb,TT,du],gT),eq=U([rb,Kf],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),DT=U([Ga,AT],uT),tq=U([TT,AT,$i,RA,DT,du,eb],yT),rq=U([rb],e=>({isActive:e.active,activeIndex:e.index})),nq=(e,t,r,n,a,i,s)=>{if(!(!e||!r||!n||!a)&&XH(e,s)){var o=nz(e,t),c=PT(o,i,a,r,n),u=GH(t,a,c,e);return{activeIndex:String(c),activeCoordinate:u}}},aq=(e,t,r,n,a,i,s)=>{if(!(!e||!n||!a||!i||!r)){var o=G8(e,r);if(o){var c=az(o,t),u=PT(c,s,i,n,a),d=YH(t,i,u,o);return{activeIndex:String(u),activeCoordinate:d}}}},iq=(e,t,r,n,a,i,s,o)=>{if(!(!e||!t||!n||!a||!i))return t==="horizontal"||t==="vertical"?nq(e,t,n,a,i,s,o):aq(e,t,r,n,a,i,s)},sq=U(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),oq=U(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(Jt)),r=Array.from(new Set(t));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:GW}});function kj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kj(Object(r),!0).forEach(function(n){lq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lq(e,t,r){return(t=cq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cq(e){var t=uq(e,"string");return typeof t=="symbol"?t:t+""}function uq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dq={},fq={zIndexMap:Object.values(Jt).reduce((e,t)=>Cj(Cj({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),dq)},hq=new Set(Object.values(Jt));function pq(e){return hq.has(e)}var IT=Ur({name:"zIndex",initialState:fq,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Ut()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!pq(r)&&delete e.zIndexMap[r])},prepare:Ut()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:a}=t.payload;e.zIndexMap[r]?a?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:a?void 0:n,panoramaElementId:a?n:void 0}},prepare:Ut()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Ut()}}}),{registerZIndexPortal:mq,unregisterZIndexPortal:gq,registerZIndexPortalId:vq,unregisterZIndexPortalId:yq}=IT.actions,xq=IT.reducer;function Cn(e){var{zIndex:t,children:r}=e,n=Tz(),a=n&&t!==void 0&&t!==0,i=vr(),s=Pt();p.useLayoutEffect(()=>a?(s(mq({zIndex:t})),()=>{s(gq({zIndex:t}))}):nl,[s,t,a]);var o=Se(u=>sq(u,t,i));if(!a)return r;if(!o)return null;var c=document.getElementById(o);return c?hi.createPortal(r,c):null}function ty(){return ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ty.apply(null,arguments)}function Ej(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function od(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ej(Object(r),!0).forEach(function(n){bq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ej(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bq(e,t,r){return(t=wq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wq(e){var t=_q(e,"string");return typeof t=="symbol"?t:t+""}function _q(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jq(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return p.isValidElement(t)?p.cloneElement(t,n):p.createElement(r,n)}function Sq(e){var t,{coordinate:r,payload:n,index:a,offset:i,tooltipAxisBandSize:s,layout:o,cursor:c,tooltipEventType:u,chartName:d}=e,f=r,h=n,m=a;if(!c||!f||d!=="ScatterChart"&&u!=="axis")return null;var g,y,v;if(d==="ScatterChart")g=f,y=c8,v=Jt.cursorLine;else if(d==="BarChart")g=u8(o,f,i,s),y=fO,v=Jt.cursorRectangle;else if(o==="radial"&&KE(f)){var{cx:x,cy:w,radius:b,startAngle:_,endAngle:j}=hO(f);g={cx:x,cy:w,startAngle:_,endAngle:j,innerRadius:b,outerRadius:b},y=mO,v=Jt.cursorLine}else g={points:Q8(o,f,i)},y=oO,v=Jt.cursorLine;var S=typeof c=="object"&&"className"in c?c.className:void 0,N=od(od(od(od({stroke:"#ccc",pointerEvents:"none"},i),g),Jc(c)),{},{payload:h,payloadIndex:m,className:Xe("recharts-tooltip-cursor",S)});return p.createElement(Cn,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:v},p.createElement(jq,{cursor:c,cursorComp:y,cursorProps:N}))}function Nq(e){var t=KH(),r=rO(),n=ru(),a=JH();return t==null||r==null||n==null||a==null?null:p.createElement(Sq,ty({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var RT=p.createContext(null),kq=()=>p.useContext(RT),MT={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,g=new Array(m);h<m;h++)g[h]=f[h].fn;return g},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,m,g){var y=r?r+u:u;if(!this._events[y])return!1;var v=this._events[y],x=arguments.length,w,b;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),x){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,m),!0;case 6:return v.fn.call(v.context,d,f,h,m,g),!0}for(b=1,w=new Array(x-1);b<x;b++)w[b-1]=arguments[b];v.fn.apply(v.context,w)}else{var _=v.length,j;for(b=0;b<_;b++)switch(v[b].once&&this.removeListener(u,v[b].fn,void 0,!0),x){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,d);break;case 3:v[b].fn.call(v[b].context,d,f);break;case 4:v[b].fn.call(v[b].context,d,f,h);break;default:if(!w)for(j=1,w=new Array(x-1);j<x;j++)w[j-1]=arguments[j];v[b].fn.apply(v[b].context,w)}}return!0},o.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return s(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&s(this,m);else{for(var y=0,v=[],x=g.length;y<x;y++)(g[y].fn!==d||h&&!g[y].once||f&&g[y].context!==f)&&v.push(g[y]);v.length?this._events[m]=v.length===1?v[0]:v:s(this,m)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&s(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(MT);var Cq=MT.exports;const Eq=Ua(Cq);var Rc=new Eq,ry="recharts.syncEvent.tooltip",Pj="recharts.syncEvent.brush";function $T(e,t){if(t){var r=Number.parseInt(t,10);if(!Vn(r))return e==null?void 0:e[r]}}var Pq={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},LT=Ur({name:"options",initialState:Pq,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Oq=LT.reducer,{createEventEmitter:Aq}=LT.actions;function Tq(e){return e.tooltip.syncInteraction}var Dq={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},FT=Ur({name:"chartData",initialState:Dq,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:Oj,setDataStartEndIndexes:Iq,setComputedData:Lee}=FT.actions,Rq=FT.reducer,Mq=["x","y"];function Aj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Aj(Object(r),!0).forEach(function(n){$q(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Aj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $q(e,t,r){return(t=Lq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lq(e){var t=Fq(e,"string");return typeof t=="symbol"?t:t+""}function Fq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bq(e,t){if(e==null)return{};var r,n,a=Uq(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Uq(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zq(){var e=Se(Dx),t=Se(Ix),r=Pt(),n=Se(vA),a=Se(Ga),i=ru(),s=sp(),o=Se(c=>c.rootProps.className);p.useEffect(()=>{if(e==null)return nl;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){var h;if(s&&d!==null&&d!==void 0&&(h=d.payload)!==null&&h!==void 0&&h.coordinate&&d.payload.sourceViewBox){var m=d.payload.coordinate,{x:g,y}=m,v=Bq(m,Mq),{x,y:w,width:b,height:_}=d.payload.sourceViewBox,j=qs(qs({},v),{},{x:s.x+(b?(g-x)/b:0)*s.width,y:s.y+(_?(y-w)/_:0)*s.height});r(qs(qs({},d),{},{payload:qs(qs({},d.payload),{},{coordinate:j})}))}else r(d);return}if(a!=null){var S;if(typeof n=="function"){var N={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},k=n(a,N);S=a[k]}else n==="value"&&(S=a.find(B=>String(B.value)===d.payload.label));var{coordinate:C}=d.payload;if(S==null||d.payload.active===!1||C==null||s==null){r(Zv({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:E,y:O}=C,A=Math.min(E,s.x+s.width),q=Math.min(O,s.y+s.height),J={x:i==="horizontal"?S.coordinate:A,y:i==="horizontal"?q:S.coordinate},Z=Zv({active:d.payload.active,coordinate:J,dataKey:d.payload.dataKey,index:String(S.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox});r(Z)}}};return Rc.on(ry,c),()=>{Rc.off(ry,c)}},[o,r,t,e,n,a,i,s])}function Wq(){var e=Se(Dx),t=Se(Ix),r=Pt();p.useEffect(()=>{if(e==null)return nl;var n=(a,i,s)=>{t!==s&&e===a&&r(Iq(i))};return Rc.on(Pj,n),()=>{Rc.off(Pj,n)}},[r,t,e])}function Kq(){var e=Pt();p.useEffect(()=>{e(Aq())},[e]),zq(),Wq()}function Hq(e,t,r,n,a,i){var s=Se(m=>ZH(m,e,t)),o=Se(Ix),c=Se(Dx),u=Se(vA),d=Se(Tq),f=d==null?void 0:d.active,h=sp();p.useEffect(()=>{if(!f&&c!=null&&o!=null){var m=Zv({active:i,coordinate:r,dataKey:s,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:h});Rc.emit(ry,c,m,o)}},[f,r,s,a,n,o,c,u,i,h])}function Tj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Dj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tj(Object(r),!0).forEach(function(n){qq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qq(e,t,r){return(t=Vq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vq(e){var t=Gq(e,"string");return typeof t=="symbol"?t:t+""}function Gq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yq(e){return e.dataKey}function Xq(e,t){return p.isValidElement(e)?p.cloneElement(e,t):typeof e=="function"?p.createElement(e,t):p.createElement(Uz,t)}var Ij=[],Jq={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Ts.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Rj(e){var t,r,n=Pr(e,Jq),{active:a,allowEscapeViewBox:i,animationDuration:s,animationEasing:o,content:c,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:h,position:m,reverseDirection:g,useTranslate3d:y,wrapperStyle:v,cursor:x,shared:w,trigger:b,defaultIndex:_,portal:j,axisId:S}=n,N=Pt(),k=typeof _=="number"?String(_):_;p.useEffect(()=>{N(JK({shared:w,trigger:b,axisId:S,active:a,defaultIndex:k}))},[N,w,b,S,a,k]);var C=sp(),E=sO(),O=qK(w),{activeIndex:A,isActive:q}=(t=Se($=>rq($,O,b,k)))!==null&&t!==void 0?t:{},J=Se($=>tq($,O,b,k)),Z=Se($=>DT($,O,b,k)),B=Se($=>eq($,O,b,k)),K=J,D=kq(),M=(r=a??q)!==null&&r!==void 0?r:!1,[L,oe]=HB([K,M]),ee=O==="axis"?Z:void 0;Hq(O,b,B,ee,A,M);var ye=j??D;if(ye==null||C==null||O==null)return null;var P=K??Ij;M||(P=Ij),u&&P.length&&(P=cB(P.filter($=>$.value!=null&&($.hide!==!0||n.includeHidden)),h,Yq));var V=P.length>0,te=p.createElement(Gz,{allowEscapeViewBox:i,animationDuration:s,animationEasing:o,isAnimationActive:d,active:M,coordinate:B,hasPayload:V,offset:f,position:m,reverseDirection:g,useTranslate3d:y,viewBox:C,wrapperStyle:v,lastBoundingBox:L,innerRef:oe,hasPortalFromProps:!!j},Xq(c,Dj(Dj({},n),{},{payload:P,label:ee,active:M,activeIndex:A,coordinate:B,accessibilityLayer:E})));return p.createElement(p.Fragment,null,hi.createPortal(te,ye),M&&p.createElement(Nq,{cursor:x,tooltipEventType:O,coordinate:B,payload:P,index:A}))}var BT=e=>null;BT.displayName="Cell";function Qq(e,t,r){return(t=Zq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zq(e){var t=eV(e,"string");return typeof t=="symbol"?t:t+""}function eV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class tV{constructor(t){Qq(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function Mj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mj(Object(r),!0).forEach(function(n){nV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nV(e,t,r){return(t=aV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aV(e){var t=iV(e,"string");return typeof t=="symbol"?t:t+""}function iV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sV={cacheSize:2e3,enableCache:!0},UT=rV({},sV),$j=new tV(UT.cacheSize),oV={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Lj="recharts_measurement_span";function lV(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",i=t.fontStyle||"",s=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(i,"|").concat(s,"|").concat(o)}var Fj=(e,t)=>{try{var r=document.getElementById(Lj);r||(r=document.createElement("span"),r.setAttribute("id",Lj),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,oV,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Zl=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ts.isSsr)return{width:0,height:0};if(!UT.enableCache)return Fj(t,r);var n=lV(t,r),a=$j.get(n);if(a)return a;var i=Fj(t,r);return $j.set(n,i),i},Bj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Uj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,cV=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,uV=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,zT={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},dV=Object.keys(zT),po="NaN";function fV(e,t){return e*zT[t]}class Dr{static parse(t){var r,[,n,a]=(r=uV.exec(t))!==null&&r!==void 0?r:[];return new Dr(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Vn(t)&&(this.unit=""),r!==""&&!cV.test(r)&&(this.num=NaN,this.unit=""),dV.includes(r)&&(this.num=fV(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Dr(NaN,""):new Dr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Dr(NaN,""):new Dr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Dr(NaN,""):new Dr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Dr(NaN,""):new Dr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Vn(this.num)}}function WT(e){if(e.includes(po))return po;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,i]=(r=Bj.exec(t))!==null&&r!==void 0?r:[],s=Dr.parse(n??""),o=Dr.parse(i??""),c=a==="*"?s.multiply(o):s.divide(o);if(c.isNaN())return po;t=t.replace(Bj,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=Uj.exec(t))!==null&&u!==void 0?u:[],m=Dr.parse(d??""),g=Dr.parse(h??""),y=f==="+"?m.add(g):m.subtract(g);if(y.isNaN())return po;t=t.replace(Uj,y.toString())}return t}var zj=/\(([^()]*)\)/;function hV(e){for(var t=e,r;(r=zj.exec(t))!=null;){var[,n]=r;t=t.replace(zj,WT(n))}return t}function pV(e){var t=e.replace(/\s+/g,"");return t=hV(t),t=WT(t),t}function mV(e){try{return pV(e)}catch{return po}}function Ym(e){var t=mV(e.slice(5,-1));return t===po?"":t}var gV=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],vV=["dx","dy","angle","className","breakAll"];function ny(){return ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ny.apply(null,arguments)}function Wj(e,t){if(e==null)return{};var r,n,a=yV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function yV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var KT=/[ \f\n\r\t\v\u2028\u2029]+/,HT=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];ft(t)||(r?a=t.toString().split(""):a=t.toString().split(KT));var i=a.map(o=>({word:o,width:Zl(o,n).width})),s=r?0:Zl("",n).width;return{wordsWithComputedWidth:i,spaceWidth:s}}catch{return null}};function xV(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var qT=(e,t,r,n)=>e.reduce((a,i)=>{var{word:s,width:o}=i,c=a[a.length-1];if(c&&o!=null&&(t==null||n||c.width+o+r<Number(t)))c.words.push(s),c.width+=o+r;else{var u={words:[s],width:o};a.push(u)}return a},[]),VT=e=>e.reduce((t,r)=>t.width>r.width?t:r),bV="",Kj=(e,t,r,n,a,i,s,o)=>{var c=e.slice(0,t),u=HT({breakAll:r,style:n,children:c+bV});if(!u)return[!1,[]];var d=qT(u.wordsWithComputedWidth,i,s,o),f=d.length>a||VT(d).width>Number(i);return[f,d]},wV=(e,t,r,n,a)=>{var{maxLines:i,children:s,style:o,breakAll:c}=e,u=we(i),d=String(s),f=qT(t,n,r,a);if(!u||a)return f;var h=f.length>i||VT(f).width>Number(n);if(!h)return f;for(var m=0,g=d.length-1,y=0,v;m<=g&&y<=d.length-1;){var x=Math.floor((m+g)/2),w=x-1,[b,_]=Kj(d,w,c,o,i,n,r,a),[j]=Kj(d,x,c,o,i,n,r,a);if(!b&&!j&&(m=x+1),b&&j&&(g=x-1),!b&&j){v=_;break}y++}return v||f},Hj=e=>{var t=ft(e)?[]:e.toString().split(KT);return[{words:t,width:void 0}]},_V=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:i,maxLines:s}=e;if((t||r)&&!Ts.isSsr){var o,c,u=HT({breakAll:i,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,c=f}else return Hj(n);return wV({breakAll:i,children:n,maxLines:s,style:a},o,c,t,!!r)}return Hj(n)},GT="#808080",jV={breakAll:!1,capHeight:"0.71em",fill:GT,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},nb=p.forwardRef((e,t)=>{var r=Pr(e,jV),{x:n,y:a,lineHeight:i,capHeight:s,fill:o,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,f=Wj(r,gV),h=p.useMemo(()=>_V({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:m,dy:g,angle:y,className:v,breakAll:x}=f,w=Wj(f,vV);if(!ua(n)||!ua(a)||h.length===0)return null;var b=Number(n)+(we(m)?m:0),_=Number(a)+(we(g)?g:0);if(!Et(b)||!Et(_))return null;var j;switch(d){case"start":j=Ym("calc(".concat(s,")"));break;case"middle":j=Ym("calc(".concat((h.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:j=Ym("calc(".concat(h.length-1," * -").concat(i,")"));break}var S=[];if(c){var N=h[0].width,{width:k}=f;S.push("scale(".concat(we(k)&&we(N)?k/N:1,")"))}return y&&S.push("rotate(".concat(y,", ").concat(b,", ").concat(_,")")),S.length&&(w.transform=S.join(" ")),p.createElement("text",ny({},Nr(w),{ref:t,x:b,y:_,className:Xe("recharts-text",v),textAnchor:u,fill:o.includes("url")?GT:o}),h.map((C,E)=>{var O=C.words.join(x?"":" ");return p.createElement("tspan",{x:b,dy:E===0?j:i,key:"".concat(O,"-").concat(E)},O)}))});nb.displayName="Text";var SV=["labelRef"];function NV(e,t){if(e==null)return{};var r,n,a=kV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function kV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function qj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qj(Object(r),!0).forEach(function(n){CV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CV(e,t,r){return(t=EV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EV(e){var t=PV(e,"string");return typeof t=="symbol"?t:t+""}function PV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ya(){return ya=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ya.apply(null,arguments)}var YT=p.createContext(null),OV=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:a,width:i,height:s,children:o}=e,c=p.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:a,width:i,height:s}),[t,r,n,a,i,s]);return p.createElement(YT.Provider,{value:c},o)},XT=()=>{var e=p.useContext(YT),t=sp();return e||tO(t)},AV=p.createContext(null),TV=()=>{var e=p.useContext(AV),t=Se(_A);return e||t},DV=e=>{var{value:t,formatter:r}=e,n=ft(e.children)?t:e.children;return typeof r=="function"?r(n):n},ab=e=>e!=null&&typeof e=="function",IV=(e,t)=>{var r=Mr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},RV=(e,t,r,n,a)=>{var{offset:i,className:s}=e,{cx:o,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:m}=a,g=(u+d)/2,y=IV(f,h),v=y>=0?1:-1,x,w;switch(t){case"insideStart":x=f+v*i,w=m;break;case"insideEnd":x=h-v*i,w=!m;break;case"end":x=h+v*i,w=m;break;default:throw new Error("Unsupported position ".concat(t))}w=y<=0?w:!w;var b=or(o,c,g,x),_=or(o,c,g,x+(w?1:-1)*359),j="M".concat(b.x,",").concat(b.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(_.x,",").concat(_.y),S=ft(e.id)?Nc("recharts-radial-line-"):e.id;return p.createElement("text",ya({},n,{dominantBaseline:"central",className:Xe("recharts-radial-bar-label",s)}),p.createElement("defs",null,p.createElement("path",{id:S,d:j})),p.createElement("textPath",{xlinkHref:"#".concat(S)},r))},MV=(e,t,r)=>{var{cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:o,endAngle:c}=e,u=(o+c)/2;if(r==="outside"){var{x:d,y:f}=or(n,a,s+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(i+s)/2,{x:m,y:g}=or(n,a,h,u);return{x:m,y:g,textAnchor:"middle",verticalAnchor:"middle"}},ay=e=>"cx"in e&&we(e.cx),$V=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,i;r!=null&&!ay(r)&&(i=r);var{x:s,y:o,upperWidth:c,lowerWidth:u,height:d}=t,f=s,h=s+(c-u)/2,m=(f+h)/2,g=(c+u)/2,y=f+c/2,v=d>=0?1:-1,x=v*n,w=v>0?"end":"start",b=v>0?"start":"end",_=c>=0?1:-1,j=_*n,S=_>0?"end":"start",N=_>0?"start":"end";if(a==="top"){var k={x:f+c/2,y:o-x,textAnchor:"middle",verticalAnchor:w};return kt(kt({},k),i?{height:Math.max(o-i.y,0),width:c}:{})}if(a==="bottom"){var C={x:h+u/2,y:o+d+x,textAnchor:"middle",verticalAnchor:b};return kt(kt({},C),i?{height:Math.max(i.y+i.height-(o+d),0),width:u}:{})}if(a==="left"){var E={x:m-j,y:o+d/2,textAnchor:S,verticalAnchor:"middle"};return kt(kt({},E),i?{width:Math.max(E.x-i.x,0),height:d}:{})}if(a==="right"){var O={x:m+g+j,y:o+d/2,textAnchor:N,verticalAnchor:"middle"};return kt(kt({},O),i?{width:Math.max(i.x+i.width-O.x,0),height:d}:{})}var A=i?{width:g,height:d}:{};return a==="insideLeft"?kt({x:m+j,y:o+d/2,textAnchor:N,verticalAnchor:"middle"},A):a==="insideRight"?kt({x:m+g-j,y:o+d/2,textAnchor:S,verticalAnchor:"middle"},A):a==="insideTop"?kt({x:f+c/2,y:o+x,textAnchor:"middle",verticalAnchor:b},A):a==="insideBottom"?kt({x:h+u/2,y:o+d-x,textAnchor:"middle",verticalAnchor:w},A):a==="insideTopLeft"?kt({x:f+j,y:o+x,textAnchor:N,verticalAnchor:b},A):a==="insideTopRight"?kt({x:f+c-j,y:o+x,textAnchor:S,verticalAnchor:b},A):a==="insideBottomLeft"?kt({x:h+j,y:o+d-x,textAnchor:N,verticalAnchor:w},A):a==="insideBottomRight"?kt({x:h+u-j,y:o+d-x,textAnchor:S,verticalAnchor:w},A):a&&typeof a=="object"&&(we(a.x)||Ia(a.x))&&(we(a.y)||Ia(a.y))?kt({x:s+Gn(a.x,g),y:o+Gn(a.y,d),textAnchor:"end",verticalAnchor:"end"},A):kt({x:y,y:o+d/2,textAnchor:"middle",verticalAnchor:"middle"},A)},LV={offset:5,zIndex:Jt.label};function si(e){var t=Pr(e,LV),{viewBox:r,position:n,value:a,children:i,content:s,className:o="",textBreakAll:c,labelRef:u}=t,d=TV(),f=XT(),h=n==="center"?f:d??f,m,g,y;if(r==null?m=h:ay(r)?m=r:m=tO(r),!m||ft(a)&&ft(i)&&!p.isValidElement(s)&&typeof s!="function")return null;var v=kt(kt({},t),{},{viewBox:m});if(p.isValidElement(s)){var{labelRef:x}=v,w=NV(v,SV);return p.cloneElement(s,w)}if(typeof s=="function"){if(g=p.createElement(s,v),p.isValidElement(g))return g}else g=DV(t);var b=Nr(t);if(ay(m)){if(n==="insideStart"||n==="insideEnd"||n==="end")return RV(t,n,g,b,m);y=MV(m,t.offset,t.position)}else y=$V(t,m);return p.createElement(Cn,{zIndex:t.zIndex},p.createElement(nb,ya({ref:u,className:Xe("recharts-label",o)},b,y,{textAnchor:xV(b.textAnchor)?b.textAnchor:y.textAnchor,breakAll:c}),g))}si.displayName="Label";var FV=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?p.createElement(si,ya({key:"label-implicit"},n)):ua(e)?p.createElement(si,ya({key:"label-implicit",value:e},n)):p.isValidElement(e)?e.type===si?p.cloneElement(e,kt({key:"label-implicit"},n)):p.createElement(si,ya({key:"label-implicit",content:e},n)):ab(e)?p.createElement(si,ya({key:"label-implicit",content:e},n)):e&&typeof e=="object"?p.createElement(si,ya({},e,{key:"label-implicit"},n)):null};function BV(e){var{label:t,labelRef:r}=e,n=XT();return FV(t,n,r)||null}var JT={},QT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(QT);var ZT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(ZT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QT,r=ZT,n=Vh;function a(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=a})(JT);var UV=JT.last;const zV=Ua(UV);var WV=["valueAccessor"],KV=["dataKey","clockWise","id","textBreakAll","zIndex"];function Hf(){return Hf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hf.apply(null,arguments)}function Vj(e,t){if(e==null)return{};var r,n,a=HV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function HV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var qV=e=>Array.isArray(e.value)?zV(e.value):e.value,eD=p.createContext(void 0),tD=eD.Provider,rD=p.createContext(void 0);rD.Provider;function VV(){return p.useContext(eD)}function GV(){return p.useContext(rD)}function Pd(e){var{valueAccessor:t=qV}=e,r=Vj(e,WV),{dataKey:n,clockWise:a,id:i,textBreakAll:s,zIndex:o}=r,c=Vj(r,KV),u=VV(),d=GV(),f=u||d;return!f||!f.length?null:p.createElement(Cn,{zIndex:o??Jt.label},p.createElement(jn,{className:"recharts-label-list"},f.map((h,m)=>{var g,y=ft(n)?t(h,m):Zt(h&&h.payload,n),v=ft(i)?{}:{id:"".concat(i,"-").concat(m)};return p.createElement(si,Hf({key:"label-".concat(m)},Nr(h),c,v,{fill:(g=r.fill)!==null&&g!==void 0?g:h.fill,parentViewBox:h.parentViewBox,value:y,textBreakAll:s,viewBox:h.viewBox,index:m,zIndex:0}))})))}Pd.displayName="LabelList";function nD(e){var{label:t}=e;return t?t===!0?p.createElement(Pd,{key:"labelList-implicit"}):p.isValidElement(t)||ab(t)?p.createElement(Pd,{key:"labelList-implicit",content:t}):typeof t=="object"?p.createElement(Pd,Hf({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function iy(){return iy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iy.apply(null,arguments)}var aD=e=>{var{cx:t,cy:r,r:n,className:a}=e,i=Xe("recharts-dot",a);return we(t)&&we(r)&&we(n)?p.createElement("circle",iy({},qn(e),B0(e),{className:i,cx:t,cy:r,r:n})):null},YV={radiusAxis:{},angleAxis:{}},iD=Ur({name:"polarAxis",initialState:YV,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Fee,removeRadiusAxis:Bee,addAngleAxis:Uee,removeAngleAxis:zee}=iD.actions,XV=iD.reducer,sD={exports:{}},Ze={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ib=Symbol.for("react.transitional.element"),sb=Symbol.for("react.portal"),Op=Symbol.for("react.fragment"),Ap=Symbol.for("react.strict_mode"),Tp=Symbol.for("react.profiler"),Dp=Symbol.for("react.consumer"),Ip=Symbol.for("react.context"),Rp=Symbol.for("react.forward_ref"),Mp=Symbol.for("react.suspense"),$p=Symbol.for("react.suspense_list"),Lp=Symbol.for("react.memo"),Fp=Symbol.for("react.lazy"),JV=Symbol.for("react.view_transition"),QV=Symbol.for("react.client.reference");function En(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case ib:switch(e=e.type,e){case Op:case Tp:case Ap:case Mp:case $p:case JV:return e;default:switch(e=e&&e.$$typeof,e){case Ip:case Rp:case Fp:case Lp:return e;case Dp:return e;default:return t}}case sb:return t}}}Ze.ContextConsumer=Dp;Ze.ContextProvider=Ip;Ze.Element=ib;Ze.ForwardRef=Rp;Ze.Fragment=Op;Ze.Lazy=Fp;Ze.Memo=Lp;Ze.Portal=sb;Ze.Profiler=Tp;Ze.StrictMode=Ap;Ze.Suspense=Mp;Ze.SuspenseList=$p;Ze.isContextConsumer=function(e){return En(e)===Dp};Ze.isContextProvider=function(e){return En(e)===Ip};Ze.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===ib};Ze.isForwardRef=function(e){return En(e)===Rp};Ze.isFragment=function(e){return En(e)===Op};Ze.isLazy=function(e){return En(e)===Fp};Ze.isMemo=function(e){return En(e)===Lp};Ze.isPortal=function(e){return En(e)===sb};Ze.isProfiler=function(e){return En(e)===Tp};Ze.isStrictMode=function(e){return En(e)===Ap};Ze.isSuspense=function(e){return En(e)===Mp};Ze.isSuspenseList=function(e){return En(e)===$p};Ze.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Op||e===Tp||e===Ap||e===Mp||e===$p||typeof e=="object"&&e!==null&&(e.$$typeof===Fp||e.$$typeof===Lp||e.$$typeof===Ip||e.$$typeof===Dp||e.$$typeof===Rp||e.$$typeof===QV||e.getModuleId!==void 0)};Ze.typeOf=En;sD.exports=Ze;var ZV=sD.exports,Gj=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",Yj=null,Xm=null,oD=e=>{if(e===Yj&&Array.isArray(Xm))return Xm;var t=[];return p.Children.forEach(e,r=>{ft(r)||(ZV.isFragment(r)?t=t.concat(oD(r.props.children)):t.push(r))}),Xm=t,Yj=e,t};function eG(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>Gj(a)):n=[Gj(t)],oD(e).forEach(a=>{var i=Mo(a,"type.displayName")||Mo(a,"type.name");i&&n.indexOf(i)!==-1&&r.push(a)}),r}var lD=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,cD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(cD);var tG=cD.isPlainObject;const rG=Ua(tG);function Xj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xj(Object(r),!0).forEach(function(n){nG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nG(e,t,r){return(t=aG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aG(e){var t=iG(e,"string");return typeof t=="symbol"?t:t+""}function iG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qf(){return qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qf.apply(null,arguments)}var Qj=(e,t,r,n,a)=>{var i=r-n,s;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-i/2,",").concat(t+a),s+="L ".concat(e+r-i/2-n,",").concat(t+a),s+="L ".concat(e,",").concat(t," Z"),s},sG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oG=e=>{var t=Pr(e,sG),{x:r,y:n,upperWidth:a,lowerWidth:i,height:s,className:o}=t,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:f}=t,h=p.useRef(null),[m,g]=p.useState(-1),y=p.useRef(a),v=p.useRef(i),x=p.useRef(s),w=p.useRef(r),b=p.useRef(n),_=cp(e,"trapezoid-");if(p.useEffect(()=>{if(h.current&&h.current.getTotalLength)try{var J=h.current.getTotalLength();J&&g(J)}catch{}},[]),r!==+r||n!==+n||a!==+a||i!==+i||s!==+s||a===0&&i===0||s===0)return null;var j=Xe("recharts-trapezoid",o);if(!f)return p.createElement("g",null,p.createElement("path",qf({},Nr(t),{className:j,d:Qj(r,n,a,i,s)})));var S=y.current,N=v.current,k=x.current,C=w.current,E=b.current,O="0px ".concat(m===-1?1:m,"px"),A="".concat(m,"px 0px"),q=lO(["strokeDasharray"],u,c);return p.createElement(lp,{animationId:_,key:_,canBegin:m>0,duration:u,easing:c,isActive:f,begin:d},J=>{var Z=jt(S,a,J),B=jt(N,i,J),K=jt(k,s,J),D=jt(C,r,J),M=jt(E,n,J);h.current&&(y.current=Z,v.current=B,x.current=K,w.current=D,b.current=M);var L=J>0?{transition:q,strokeDasharray:A}:{strokeDasharray:O};return p.createElement("path",qf({},Nr(t),{className:j,d:Qj(D,M,Z,B,K),ref:h,style:Jj(Jj({},L),t.style)}))})},lG=["option","shapeType","propTransformer","activeClassName","isActive"];function cG(e,t){if(e==null)return{};var r,n,a=uG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function uG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Zj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zj(Object(r),!0).forEach(function(n){dG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dG(e,t,r){return(t=fG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fG(e){var t=hG(e,"string");return typeof t=="symbol"?t:t+""}function hG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pG(e,t){return Vf(Vf({},t),e)}function mG(e,t){return e==="symbols"}function eS(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return p.createElement(fO,r);case"trapezoid":return p.createElement(oG,r);case"sector":return p.createElement(mO,r);case"symbols":if(mG(t))return p.createElement(WE,r);break;case"curve":return p.createElement(oO,r);default:return null}}function gG(e){return p.isValidElement(e)?e.props:e}function uD(e){var{option:t,shapeType:r,propTransformer:n=pG,activeClassName:a="recharts-active-shape",isActive:i}=e,s=cG(e,lG),o;if(p.isValidElement(t))o=p.cloneElement(t,Vf(Vf({},s),gG(t)));else if(typeof t=="function")o=t(s);else if(rG(t)&&typeof t!="boolean"){var c=n(t,s);o=p.createElement(eS,{shapeType:r,elementProps:c})}else{var u=s;o=p.createElement(eS,{shapeType:r,elementProps:u})}return i?p.createElement(jn,{className:a},o):o}var dD=(e,t)=>{var r=Pt();return(n,a)=>i=>{e==null||e(n,a,i),r(fT({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},fD=e=>{var t=Pt();return(r,n)=>a=>{e==null||e(r,n,a),t(QK())}},hD=(e,t)=>{var r=Pt();return(n,a)=>i=>{e==null||e(n,a,i),r(ZK({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function pD(e){var{fn:t,args:r}=e,n=Pt(),a=vr();return p.useLayoutEffect(()=>{if(!a){var i=t(r);return n(YK(i)),()=>{n(XK(i))}}},[t,r,n,a]),null}function mD(e){var{legendPayload:t}=e,r=Pt(),n=vr();return p.useLayoutEffect(()=>n?nl:(r(Iz(t)),()=>{r(Rz(t))}),[r,n,t]),null}var Jm,vG=()=>{var[e]=p.useState(()=>Nc("uid-"));return e},yG=(Jm=xI.useId)!==null&&Jm!==void 0?Jm:vG;function gD(e,t){var r=yG();return t||(e?"".concat(e,"-").concat(r):r)}var xG=p.createContext(void 0),vD=e=>{var{id:t,type:r,children:n}=e,a=gD("recharts-".concat(r),t);return p.createElement(xG.Provider,{value:a},n(a))},bG={cartesianItems:[],polarItems:[]},yD=Ur({name:"graphicalItems",initialState:bG,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Ut()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,a=Na(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},prepare:Ut()},removeCartesianGraphicalItem:{reducer(e,t){var r=Na(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Ut()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Ut()},removePolarGraphicalItem:{reducer(e,t){var r=Na(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Ut()}}}),{addCartesianGraphicalItem:wG,replaceCartesianGraphicalItem:_G,removeCartesianGraphicalItem:jG,addPolarGraphicalItem:Wee,removePolarGraphicalItem:Kee}=yD.actions,SG=yD.reducer;function xD(e){var t=Pt(),r=p.useRef(null);return p.useLayoutEffect(()=>{r.current===null?t(wG(e)):r.current!==e&&t(_G({prev:r.current,next:e})),r.current=e},[t,e]),p.useLayoutEffect(()=>()=>{r.current&&(t(jG(r.current)),r.current=null)},[t]),null}var NG=["points"];function tS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tS(Object(r),!0).forEach(function(n){kG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kG(e,t,r){return(t=CG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CG(e){var t=EG(e,"string");return typeof t=="symbol"?t:t+""}function EG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gf(){return Gf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gf.apply(null,arguments)}function PG(e,t){if(e==null)return{};var r,n,a=OG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function OG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function AG(e){var{option:t,dotProps:r,className:n}=e;if(p.isValidElement(t))return p.cloneElement(t,r);if(typeof t=="function")return t(r);var a=Xe(n,typeof t!="boolean"?t.className:""),i=r??{},{points:s}=i,o=PG(i,NG);return p.createElement(aD,Gf({},o,{className:a}))}function TG(e,t){return e==null?!1:t?!0:e.length===1}function DG(e){var{points:t,dot:r,className:n,dotClassName:a,dataKey:i,baseProps:s,needClip:o,clipPathId:c,zIndex:u=Jt.scatter}=e;if(!TG(t,r))return null;var d=lD(r),f=nF(r),h=t.map((g,y)=>{var v,x,w=Qm(Qm(Qm({r:3},s),f),{},{index:y,cx:(v=g.x)!==null&&v!==void 0?v:void 0,cy:(x=g.y)!==null&&x!==void 0?x:void 0,dataKey:i,value:g.value,payload:g.payload,points:t});return p.createElement(AG,{key:"dot-".concat(y),option:r,dotProps:w,className:a})}),m={};return o&&c!=null&&(m.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(c,")")),p.createElement(Cn,{zIndex:u},p.createElement(jn,Gf({className:n},m),h))}function rS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rS(Object(r),!0).forEach(function(n){IG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IG(e,t,r){return(t=RG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RG(e){var t=MG(e,"string");return typeof t=="symbol"?t:t+""}function MG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $G={xAxis:{},yAxis:{},zAxis:{}},bD=Ur({name:"cartesianAxis",initialState:$G,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Ut()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Ut()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Ut()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Ut()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Ut()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Ut()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,a=e.yAxis[r];if(a){var i=a.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==a.width&&Math.abs(n-i[0])<=1)return;var s=[...i,n].slice(-3);e.yAxis[r]=nS(nS({},e.yAxis[r]),{},{width:n,widthHistory:s})}}}}),{addXAxis:LG,removeXAxis:FG,addYAxis:BG,removeYAxis:UG,addZAxis:Hee,removeZAxis:qee,updateYAxisWidth:zG}=bD.actions,WG=bD.reducer,KG=U([er],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),HG=U([KG,Wa,Ka],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),ob=()=>Se(HG),qG=()=>Se(FH);function aS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aS(Object(r),!0).forEach(function(n){VG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VG(e,t,r){return(t=GG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GG(e){var t=YG(e,"string");return typeof t=="symbol"?t:t+""}function YG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XG=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:i}=e;if(a===!1||t.x==null||t.y==null)return null;var s={index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},o=Zm(Zm(Zm({},s),Jc(a)),B0(a)),c;return p.isValidElement(a)?c=p.cloneElement(a,o):typeof a=="function"?c=a(o):c=p.createElement(aD,o),p.createElement(jn,{className:"recharts-active-dot"},c)};function JG(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a,zIndex:i=Jt.activeDot}=e,s=Se(Cs),o=qG();if(t==null||o==null)return null;var c=t.find(u=>o.includes(u.payload));return ft(c)?null:p.createElement(Cn,{zIndex:i},p.createElement(XG,{point:c,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n}))}var QG="Invariant failed";function ZG(e,t){throw new Error(QG)}var eY=["x","y"];function sy(){return sy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sy.apply(null,arguments)}function iS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function El(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iS(Object(r),!0).forEach(function(n){tY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tY(e,t,r){return(t=rY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rY(e){var t=nY(e,"string");return typeof t=="symbol"?t:t+""}function nY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aY(e,t){if(e==null)return{};var r,n,a=iY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function iY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function sY(e,t){var{x:r,y:n}=e,a=aY(e,eY),i="".concat(r),s=parseInt(i,10),o="".concat(n),c=parseInt(o,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return El(El(El(El(El({},t),a),s?{x:s}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function Yf(e){return p.createElement(uD,sy({shapeType:"rectangle",propTransformer:sY,activeClassName:"recharts-active-bar"},e))}var oY=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(we(t))return t;var i=we(n)||ft(n);return i?t(n,a):(i||ZG(),r)}},lY={},wD=Ur({name:"errorBars",initialState:lY,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:a}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?a:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:Vee,replaceErrorBar:Gee,removeErrorBar:Yee}=wD.actions,cY=wD.reducer,uY=["children"];function dY(e,t){if(e==null)return{};var r,n,a=fY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function fY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hY={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},pY=p.createContext(hY);function _D(e){var{children:t}=e,r=dY(e,uY);return p.createElement(pY.Provider,{value:r},t)}function lb(e,t){var r,n,a=Se(u=>qa(u,e)),i=Se(u=>Va(u,t)),s=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Gr.allowDataOverflow,o=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Yr.allowDataOverflow,c=s||o;return{needClip:c,needClipX:s,needClipY:o}}function jD(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=ob(),{needClipX:i,needClipY:s,needClip:o}=lb(t,r);if(!o||!a)return null;var{x:c,y:u,width:d,height:f}=a;return p.createElement("clipPath",{id:"clipPath-".concat(n)},p.createElement("rect",{x:i?c:c-d/2,y:s?u:u-f/2,width:i?d:d*2,height:s?f:f*2}))}function mY(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Et(e.zIndex)?e.zIndex:t}var gY=["onMouseEnter","onMouseLeave","onClick"],vY=["value","background","tooltipPosition"],yY=["id"],xY=["onMouseEnter","onClick","onMouseLeave"];function Ba(){return Ba=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ba.apply(null,arguments)}function sS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _r(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sS(Object(r),!0).forEach(function(n){bY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bY(e,t,r){return(t=wY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wY(e){var t=_Y(e,"string");return typeof t=="symbol"?t:t+""}function _Y(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xf(e,t){if(e==null)return{};var r,n,a=jY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function jY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var SY=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:tp(r,t),payload:e}]};function NY(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:i,hide:s,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:tp(i,t),hide:s,type:e.tooltipType,color:e.fill,unit:o}}}function kY(e){var t=Se(Cs),{data:r,dataKey:n,background:a,allOtherBarProps:i}=e,{onMouseEnter:s,onMouseLeave:o,onClick:c}=i,u=Xf(i,gY),d=dD(s,n),f=fD(o),h=hD(c,n);if(!a||r==null)return null;var m=Jc(a);return p.createElement(Cn,{zIndex:mY(a,Jt.barBackground)},r.map((g,y)=>{var{value:v,background:x,tooltipPosition:w}=g,b=Xf(g,vY);if(!x)return null;var _=d(g,y),j=f(g,y),S=h(g,y),N=_r(_r(_r(_r(_r({option:a,isActive:String(y)===t},b),{},{fill:"#eee"},x),m),U0(u,g,y)),{},{onMouseEnter:_,onMouseLeave:j,onClick:S,dataKey:n,index:y,className:"recharts-bar-background-rectangle"});return p.createElement(Yf,Ba({key:"background-bar-".concat(y)},N))}))}function CY(e){var{showLabels:t,children:r,rects:n}=e,a=n==null?void 0:n.map(i=>{var s={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return _r(_r({},s),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:s,fill:i.fill})});return p.createElement(tD,{value:t?a:void 0},r)}function EY(e){var{shape:t,activeBar:r,baseProps:n,entry:a,index:i,dataKey:s}=e,o=Se(Cs),c=Se(CT),u=r&&String(i)===o&&(c==null||s===c),d=u?r:t;return u?p.createElement(Cn,{zIndex:Jt.activeBar},p.createElement(Yf,Ba({},n,{name:String(n.name)},a,{isActive:u,option:d,index:i,dataKey:s}))):p.createElement(Yf,Ba({},n,{name:String(n.name)},a,{isActive:u,option:d,index:i,dataKey:s}))}function PY(e){var{shape:t,baseProps:r,entry:n,index:a,dataKey:i}=e;return p.createElement(Yf,Ba({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:a,dataKey:i}))}function OY(e){var t,{data:r,props:n}=e,a=(t=qn(n))!==null&&t!==void 0?t:{},{id:i}=a,s=Xf(a,yY),{shape:o,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:f,onMouseLeave:h}=n,m=Xf(n,xY),g=dD(d,c),y=fD(h),v=hD(f,c);return r?p.createElement(p.Fragment,null,r.map((x,w)=>p.createElement(jn,Ba({key:"rectangle-".concat(x==null?void 0:x.x,"-").concat(x==null?void 0:x.y,"-").concat(x==null?void 0:x.value,"-").concat(w),className:"recharts-bar-rectangle"},U0(m,x,w),{onMouseEnter:g(x,w),onMouseLeave:y(x,w),onClick:v(x,w)}),u?p.createElement(EY,{shape:o,activeBar:u,baseProps:s,entry:x,index:w,dataKey:c}):p.createElement(PY,{shape:o,baseProps:s,entry:x,index:w,dataKey:c})))):null}function AY(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:i,animationBegin:s,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=cp(t,"recharts-bar-"),[m,g]=p.useState(!1),y=!m,v=p.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),x=p.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return p.createElement(CY,{showLabels:y,rects:n},p.createElement(lp,{animationId:h,begin:s,duration:o,isActive:i,easing:c,onAnimationEnd:v,onAnimationStart:x,key:h},w=>{var b=w===1?n:n==null?void 0:n.map((_,j)=>{var S=f&&f[j];if(S)return _r(_r({},_),{},{x:jt(S.x,_.x,w),y:jt(S.y,_.y,w),width:jt(S.width,_.width,w),height:jt(S.height,_.height,w)});if(a==="horizontal"){var N=jt(0,_.height,w),k=jt(_.stackedBarStart,_.y,w);return _r(_r({},_),{},{y:k,height:N})}var C=jt(0,_.width,w),E=jt(_.stackedBarStart,_.x,w);return _r(_r({},_),{},{width:C,x:E})});return w>0&&(r.current=b??null),b==null?null:p.createElement(jn,null,p.createElement(OY,{props:t,data:b}))}),p.createElement(nD,{label:t.label}),t.children)}function TY(e){var t=p.useRef(null);return p.createElement(AY,{previousRectanglesRef:t,props:e})}var SD=0,DY=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Zt(e,t)}};class IY extends p.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:i,yAxisId:s,needClip:o,background:c,id:u}=this.props;if(t||r==null)return null;var d=Xe("recharts-bar",a),f=u;return p.createElement(jn,{className:d,id:u},o&&p.createElement("defs",null,p.createElement(jD,{clipPathId:f,xAxisId:i,yAxisId:s})),p.createElement(jn,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},p.createElement(kY,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),p.createElement(TY,this.props)))}}var RY={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Ts.isSsr,legendType:"rect",minPointSize:SD,xAxisId:0,yAxisId:0,zIndex:Jt.bar};function MY(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:i,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=lb(t,r),h=ru(),m=vr(),g=eG(e.children,BT),y=Se(w=>uX(w,t,r,m,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var v,x=y==null?void 0:y[0];return x==null||x.height==null||x.width==null?v=0:v=h==="vertical"?x.height/2:x.width/2,p.createElement(_D,{xAxisId:t,yAxisId:r,data:y,dataPointFormatter:DY,errorBarOffset:v},p.createElement(IY,Ba({},e,{layout:h,needClip:f,data:y,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:i,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function $Y(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:i,xAxis:s,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:m,parentViewBox:g,dataStartIndex:y}=e,v=t==="horizontal"?o:s,x=d?v.scale.domain():null,w=ZU({numericAxis:v}),b=v.scale(w);return f.map((_,j)=>{var S,N,k,C,E,O;d?S=VU(d[j+y],x):(S=Zt(_,r),Array.isArray(S)||(S=[w,S]));var A=oY(n,SD)(S[1],j);if(t==="horizontal"){var q,[J,Z]=[o.scale(S[0]),o.scale(S[1])];N=e1({axis:s,ticks:c,bandSize:i,offset:a.offset,entry:_,index:j}),k=(q=Z??J)!==null&&q!==void 0?q:void 0,C=a.size;var B=J-Z;if(E=Vn(B)?0:B,O={x:N,y:h.top,width:C,height:h.height},Math.abs(A)>0&&Math.abs(E)<Math.abs(A)){var K=Mr(E||A)*(Math.abs(A)-Math.abs(E));k-=K,E+=K}}else{var[D,M]=[s.scale(S[0]),s.scale(S[1])];if(N=D,k=e1({axis:o,ticks:u,bandSize:i,offset:a.offset,entry:_,index:j}),C=M-D,E=a.size,O={x:h.left,y:k,width:h.width,height:E},Math.abs(A)>0&&Math.abs(C)<Math.abs(A)){var L=Mr(C||A)*(Math.abs(A)-Math.abs(C));C+=L}}if(N==null||k==null||C==null||E==null)return null;var oe=_r(_r({},_),{},{stackedBarStart:b,x:N,y:k,width:C,height:E,value:d?S:S[1],payload:_,background:O,tooltipPosition:{x:N+C/2,y:k+E/2},parentViewBox:g},m&&m[j]&&m[j].props);return oe}).filter(Boolean)}function LY(e){var t=Pr(e,RY),r=vr();return p.createElement(vD,{id:t.id,type:"bar"},n=>p.createElement(p.Fragment,null,p.createElement(mD,{legendPayload:SY(t)}),p.createElement(pD,{fn:NY,args:t}),p.createElement(xD,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:QU(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),p.createElement(Cn,{zIndex:t.zIndex},p.createElement(MY,Ba({},t,{id:n})))))}var ND=p.memo(LY);ND.displayName="Bar";function oS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ld(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oS(Object(r),!0).forEach(function(n){FY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FY(e,t,r){return(t=BY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BY(e){var t=UY(e,"string");return typeof t=="symbol"?t:t+""}function UY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zY=(e,t)=>t,WY=(e,t,r)=>r,KY=(e,t,r,n)=>n,HY=(e,t,r,n,a)=>a,hu=U([Np,HY],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),qY=U([hu],e=>e==null?void 0:e.maxBarSize),VY=(e,t,r,n,a,i)=>i,lS=(e,t,r)=>{var n=r??e;if(!ft(n))return Gn(n,t,0)},GY=U([Ke,Np,zY,WY,KY],(e,t,r,n,a)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===a).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),YY=(e,t,r,n)=>{var a=Ke(e);return a==="horizontal"?Qv(e,"yAxis",r,n):Qv(e,"xAxis",t,n)},XY=(e,t,r)=>{var n=Ke(e);return n==="horizontal"?yj(e,"xAxis",t):yj(e,"yAxis",r)},JY=(e,t,r)=>{var n={},a=e.filter(_p),i=e.filter(u=>u.stackId==null),s=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),o=Object.entries(s).map(u=>{var[d,f]=u,h=f.map(g=>g.dataKey),m=lS(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:m}}),c=i.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=lS(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...c]},QY=U([GY,zW,XY],JY),ZY=(e,t,r,n,a)=>{var i,s,o=hu(e,t,r,n,a);if(o!=null){var c=Ke(e),u=mA(e),{maxBarSize:d}=o,f=ft(d)?u:d,h,m;return c==="horizontal"?(h=Pi(e,"xAxis",t,n),m=Ei(e,"xAxis",t,n)):(h=Pi(e,"yAxis",r,n),m=Ei(e,"yAxis",r,n)),(i=(s=Lo(h,m,!0))!==null&&s!==void 0?s:f)!==null&&i!==void 0?i:0}},kD=(e,t,r,n)=>{var a=Ke(e),i,s;return a==="horizontal"?(i=Pi(e,"xAxis",t,n),s=Ei(e,"xAxis",t,n)):(i=Pi(e,"yAxis",r,n),s=Ei(e,"yAxis",r,n)),Lo(i,s)};function eX(e,t,r,n,a){var i=n.length;if(!(i<1)){var s=Gn(e,r,0,!0),o,c=[];if(Et(n[0].barSize)){var u=!1,d=r/i,f=n.reduce((x,w)=>x+(w.barSize||0),0);f+=(i-1)*s,f>=r&&(f-=(i-1)*s,s=0),f>=r&&d>0&&(u=!0,d*=.9,f=i*d);var h=(r-f)/2>>0,m={offset:h-s,size:0};o=n.reduce((x,w)=>{var b,_={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:m.offset+m.size+s,size:u?d:(b=w.barSize)!==null&&b!==void 0?b:0}},j=[...x,_];return m=j[j.length-1].position,j},c)}else{var g=Gn(t,r,0,!0);r-2*g-(i-1)*s<=0&&(s=0);var y=(r-2*g-(i-1)*s)/i;y>1&&(y>>=0);var v=Et(a)?Math.min(y,a):y;o=n.reduce((x,w,b)=>[...x,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:g+(y+s)*b+(y-v)/2,size:v}}],c)}return o}}var tX=(e,t,r,n,a,i,s)=>{var o=ft(s)?t:s,c=eX(r,n,a!==i?a:i,e,o);return a!==i&&c!=null&&(c=c.map(u=>ld(ld({},u),{},{position:ld(ld({},u.position),{},{offset:u.position.offset-a/2})}))),c},rX=U([QY,mA,UW,gA,ZY,kD,qY],tX),nX=(e,t,r,n)=>Pi(e,"xAxis",t,n),aX=(e,t,r,n)=>Pi(e,"yAxis",r,n),iX=(e,t,r,n)=>Ei(e,"xAxis",t,n),sX=(e,t,r,n)=>Ei(e,"yAxis",r,n),oX=U([rX,hu],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),lX=(e,t)=>{var r=Lx(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:i}=a;if(i)return i.find(s=>s.key===r)}}}},cX=U([YY,hu],lX),uX=U([er,ix,nX,aX,iX,sX,oX,Ke,gp,kD,cX,hu,VY],(e,t,r,n,a,i,s,o,c,u,d,f,h)=>{var{chartData:m,dataStartIndex:g,dataEndIndex:y}=c;if(!(f==null||s==null||t==null||o!=="horizontal"&&o!=="vertical"||r==null||n==null||a==null||i==null||u==null)){var{data:v}=f,x;if(v!=null&&v.length>0?x=v:x=m==null?void 0:m.slice(g,y+1),x!=null)return $Y({layout:o,barSettings:f,pos:s,parentViewBox:t,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,stackedData:d,displayedData:x,offset:e,cells:h,dataStartIndex:g})}}),dX=e=>{var{chartData:t}=e,r=Pt(),n=vr();return p.useEffect(()=>n?()=>{}:(r(Oj(t)),()=>{r(Oj(void 0))}),[t,r,n]),null},cS={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},CD=Ur({name:"brush",initialState:cS,reducers:{setBrushSettings(e,t){return t.payload==null?cS:t.payload}}}),{setBrushSettings:Xee}=CD.actions,fX=CD.reducer;function hX(e,t,r){return(t=pX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pX(e){var t=mX(e,"string");return typeof t=="symbol"?t:t+""}function mX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class cb{static create(t){return new cb(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}hX(cb,"EPS",1e-4);function gX(e){return(e%180+180)%180}var vX=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=gX(a),s=i*Math.PI/180,o=Math.atan(n/r),c=s>o&&s<Math.PI-o?n/Math.sin(s):r/Math.cos(s);return Math.abs(c)},yX={dots:[],areas:[],lines:[]},ED=Ur({name:"referenceElements",initialState:yX,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Na(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Na(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Na(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Jee,removeDot:Qee,addArea:Zee,removeArea:ete,addLine:tte,removeLine:rte}=ED.actions,xX=ED.reducer,bX=p.createContext(void 0),wX=e=>{var{children:t}=e,[r]=p.useState("".concat(Nc("recharts"),"-clip")),n=ob();if(n==null)return null;var{x:a,y:i,width:s,height:o}=n;return p.createElement(bX.Provider,{value:r},p.createElement("defs",null,p.createElement("clipPath",{id:r},p.createElement("rect",{x:a,y:i,height:o,width:s}))),t)};function zo(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function PD(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function _X(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return vX(n,r)}function jX(e,t,r){var n=r==="width",{x:a,y:i,width:s,height:o}=e;return t===1?{start:n?a:i,end:n?a+s:i+o}:{start:n?a+s:i+o,end:n?a:i}}function Jf(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function SX(e,t){return PD(e,t+1)}function NX(e,t,r,n,a){for(var i=(n||[]).slice(),{start:s,end:o}=t,c=0,u=1,d=s,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:PD(n,u)};var y=c,v,x=()=>(v===void 0&&(v=r(g,y)),v),w=g.coordinate,b=c===0||Jf(e,w,x,d,o);b||(c=0,d=s,u+=1),b&&(d=w+e*(x()/2+a),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function uS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uS(Object(r),!0).forEach(function(n){kX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kX(e,t,r){return(t=CX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CX(e){var t=EX(e,"string");return typeof t=="symbol"?t:t+""}function EX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PX(e,t,r,n,a){for(var i=(n||[]).slice(),s=i.length,{start:o}=t,{end:c}=t,u=function(h){var m=i[h],g,y=()=>(g===void 0&&(g=r(m,h)),g);if(h===s-1){var v=e*(m.coordinate+e*y()/2-c);i[h]=m=hr(hr({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else i[h]=m=hr(hr({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var x=Jf(e,m.tickCoord,y,o,c);x&&(c=m.tickCoord-e*(y()/2+a),i[h]=hr(hr({},m),{},{isShow:!0}))}},d=s-1;d>=0;d--)u(d);return i}function OX(e,t,r,n,a,i){var s=(n||[]).slice(),o=s.length,{start:c,end:u}=t;if(i){var d=n[o-1],f=r(d,o-1),h=e*(d.coordinate+e*f/2-u);if(s[o-1]=d=hr(hr({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate}),d.tickCoord!=null){var m=Jf(e,d.tickCoord,()=>f,c,u);m&&(u=d.tickCoord-e*(f/2+a),s[o-1]=hr(hr({},d),{},{isShow:!0}))}}for(var g=i?o-1:o,y=function(w){var b=s[w],_,j=()=>(_===void 0&&(_=r(b,w)),_);if(w===0){var S=e*(b.coordinate-e*j()/2-c);s[w]=b=hr(hr({},b),{},{tickCoord:S<0?b.coordinate-S*e:b.coordinate})}else s[w]=b=hr(hr({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var N=Jf(e,b.tickCoord,j,c,u);N&&(c=b.tickCoord+e*(j()/2+a),s[w]=hr(hr({},b),{},{isShow:!0}))}},v=0;v<g;v++)y(v);return s}function ub(e,t,r){var{tick:n,ticks:a,viewBox:i,minTickGap:s,orientation:o,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(we(c)||Ts.isSsr){var h;return(h=SX(a,we(c)?c:0))!==null&&h!==void 0?h:[]}var m=[],g=o==="top"||o==="bottom"?"width":"height",y=d&&g==="width"?Zl(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(b,_)=>{var j=typeof u=="function"?u(b.value,_):b.value;return g==="width"?_X(Zl(j,{fontSize:t,letterSpacing:r}),y,f):Zl(j,{fontSize:t,letterSpacing:r})[g]},x=a.length>=2?Mr(a[1].coordinate-a[0].coordinate):1,w=jX(i,x,g);return c==="equidistantPreserveStart"?NX(x,w,v,a,s):(c==="preserveStart"||c==="preserveStartEnd"?m=OX(x,w,v,a,s,c==="preserveStartEnd"):m=PX(x,w,v,a,s),m.filter(b=>b.isShow))}var AX=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:i=0}=e,s=0;if(t){Array.from(t).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>s&&(s=f.width)}});var o=r?r.getBoundingClientRect().width:0,c=a+i,u=s+c+o+(r?n:0);return Math.round(u)}return 0},TX=["axisLine","width","height","className","hide","ticks","axisType"],DX=["viewBox"],IX=["viewBox"];function oy(e,t){if(e==null)return{};var r,n,a=RX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function RX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Es(){return Es=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Es.apply(null,arguments)}function dS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dS(Object(r),!0).forEach(function(n){MX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MX(e,t,r){return(t=$X(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $X(e){var t=LX(e,"string");return typeof t=="symbol"?t:t+""}function LX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var db={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Jt.axis};function FX(e){var{x:t,y:r,width:n,height:a,orientation:i,mirror:s,axisLine:o,otherSvgProps:c}=e;if(!o)return null;var u=Dt(Dt(Dt({},c),qn(o)),{},{fill:"none"});if(i==="top"||i==="bottom"){var d=+(i==="top"&&!s||i==="bottom"&&s);u=Dt(Dt({},u),{},{x1:t,y1:r+d*a,x2:t+n,y2:r+d*a})}else{var f=+(i==="left"&&!s||i==="right"&&s);u=Dt(Dt({},u),{},{x1:t+f*n,y1:r,x2:t+f*n,y2:r+a})}return p.createElement("line",Es({},u,{className:Xe("recharts-cartesian-axis-line",Mo(o,"className"))}))}function BX(e,t,r,n,a,i,s,o,c){var u,d,f,h,m,g,y=o?-1:1,v=e.tickSize||s,x=we(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":u=d=e.coordinate,h=r+ +!o*a,f=h-y*v,g=f-y*c,m=x;break;case"left":f=h=e.coordinate,d=t+ +!o*n,u=d-y*v,m=u-y*c,g=x;break;case"right":f=h=e.coordinate,d=t+ +o*n,u=d+y*v,m=u+y*c,g=x;break;default:u=d=e.coordinate,h=r+ +o*a,f=h+y*v,g=f+y*c,m=x;break}return{line:{x1:u,y1:f,x2:d,y2:h},tick:{x:m,y:g}}}function UX(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function zX(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function WX(e){var{option:t,tickProps:r,value:n}=e,a,i=Xe(r.className,"recharts-cartesian-axis-tick-value");if(p.isValidElement(t))a=p.cloneElement(t,Dt(Dt({},r),{},{className:i}));else if(typeof t=="function")a=t(Dt(Dt({},r),{},{className:i}));else{var s="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(s=Xe(s,t==null?void 0:t.className)),a=p.createElement(nb,Es({},r,{className:s}),n)}return a}var KX=p.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:i,tickFormatter:s,unit:o,padding:c,tickTextProps:u,orientation:d,mirror:f,x:h,y:m,width:g,height:y,tickSize:v,tickMargin:x,fontSize:w,letterSpacing:b,getTicksConfig:_,events:j,axisType:S}=e,N=ub(Dt(Dt({},_),{},{ticks:r}),w,b),k=UX(d,f),C=zX(d,f),E=qn(_),O=Jc(n),A={};typeof a=="object"&&(A=a);var q=Dt(Dt({},E),{},{fill:"none"},A),J=N.map(K=>Dt({entry:K},BX(K,h,m,g,y,d,v,f,x))),Z=J.map(K=>{var{entry:D,line:M}=K;return p.createElement(jn,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(D.value,"-").concat(D.coordinate,"-").concat(D.tickCoord)},a&&p.createElement("line",Es({},q,M,{className:Xe("recharts-cartesian-axis-tick-line",Mo(a,"className"))})))}),B=J.map((K,D)=>{var{entry:M,tick:L}=K,oe=Dt(Dt(Dt(Dt({textAnchor:k,verticalAnchor:C},E),{},{stroke:"none",fill:i},O),L),{},{index:D,payload:M,visibleTicksCount:N.length,tickFormatter:s,padding:c},u);return p.createElement(jn,Es({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(M.value,"-").concat(M.coordinate,"-").concat(M.tickCoord)},U0(j,M,D)),n&&p.createElement(WX,{option:n,tickProps:oe,value:"".concat(typeof s=="function"?s(M.value,D):M.value).concat(o||"")}))});return p.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(S,"-ticks")},B.length>0&&p.createElement(Cn,{zIndex:Jt.label},p.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(S,"-tick-labels"),ref:t},B)),Z.length>0&&p.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(S,"-tick-lines")},Z))}),HX=p.forwardRef((e,t)=>{var{axisLine:r,width:n,height:a,className:i,hide:s,ticks:o,axisType:c}=e,u=oy(e,TX),[d,f]=p.useState(""),[h,m]=p.useState(""),g=p.useRef(null);p.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var v;return AX({ticks:g.current,label:(v=e.labelRef)===null||v===void 0?void 0:v.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var y=p.useCallback(v=>{if(v){var x=v.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=x;var w=x[0];if(w){var b=window.getComputedStyle(w),_=b.fontSize,j=b.letterSpacing;(_!==d||j!==h)&&(f(_),m(j))}}},[d,h]);return s||n!=null&&n<=0||a!=null&&a<=0?null:p.createElement(Cn,{zIndex:e.zIndex},p.createElement(jn,{className:Xe("recharts-cartesian-axis",i)},p.createElement(FX,{x:e.x,y:e.y,width:n,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:qn(e)}),p.createElement(KX,{ref:y,axisType:c,events:u,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:h,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:o,unit:e.unit,width:e.width,x:e.x,y:e.y}),p.createElement(OV,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},p.createElement(BV,{label:e.label,labelRef:e.labelRef}),e.children)))}),qX=p.memo(HX,(e,t)=>{var{viewBox:r}=e,n=oy(e,DX),{viewBox:a}=t,i=oy(t,IX);return zo(r,a)&&zo(n,i)}),fb=p.forwardRef((e,t)=>{var r=Pr(e,db);return p.createElement(qX,Es({},r,{ref:t}))});fb.displayName="CartesianAxis";var VX=["x1","y1","x2","y2","key"],GX=["offset"],YX=["xAxisId","yAxisId"],XX=["xAxisId","yAxisId"];function fS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fS(Object(r),!0).forEach(function(n){JX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JX(e,t,r){return(t=QX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QX(e){var t=ZX(e,"string");return typeof t=="symbol"?t:t+""}function ZX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cs(){return cs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cs.apply(null,arguments)}function Qf(e,t){if(e==null)return{};var r,n,a=eJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function eJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var tJ=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:i,height:s,ry:o}=e;return p.createElement("rect",{x:n,y:a,ry:o,width:i,height:s,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function OD(e){var{option:t,lineItemProps:r}=e,n;if(p.isValidElement(t))n=p.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var a,{x1:i,y1:s,x2:o,y2:c,key:u}=r,d=Qf(r,VX),f=(a=qn(d))!==null&&a!==void 0?a:{},{offset:h}=f,m=Qf(f,GX);n=p.createElement("line",cs({},m,{x1:i,y1:s,x2:o,y2:c,fill:"none",key:u}))}return n}function rJ(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:s}=e,o=Qf(e,YX),c=a.map((u,d)=>{var f=mr(mr({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return p.createElement(OD,{key:"line-".concat(d),option:n,lineItemProps:f})});return p.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function nJ(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:s}=e,o=Qf(e,XX),c=a.map((u,d)=>{var f=mr(mr({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return p.createElement(OD,{option:n,lineItemProps:f,key:"line-".concat(d)})});return p.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function aJ(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:i,height:s,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length||o==null)return null;var u=o.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],g=m?a+s-f:u[h+1]-f;if(g<=0)return null;var y=h%t.length;return p.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:g,width:i,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return p.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function iJ(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:i,width:s,height:o,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],g=m?a+s-f:u[h+1]-f;if(g<=0)return null;var y=h%r.length;return p.createElement("rect",{key:"react-".concat(h),x:f,y:i,width:g,height:o,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return p.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var sJ=(e,t)=>{var{xAxis:r,width:n,height:a,offset:i}=e;return qP(ub(mr(mr(mr({},db),r),{},{ticks:VP(r),viewBox:{x:0,y:0,width:n,height:a}})),i.left,i.left+i.width,t)},oJ=(e,t)=>{var{yAxis:r,width:n,height:a,offset:i}=e;return qP(ub(mr(mr(mr({},db),r),{},{ticks:VP(r),viewBox:{x:0,y:0,width:n,height:a}})),i.top,i.top+i.height,t)},lJ={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Jt.grid};function ly(e){var t=nO(),r=aO(),n=rO(),a=mr(mr({},Pr(e,lJ)),{},{x:we(e.x)?e.x:n.left,y:we(e.y)?e.y:n.top,width:we(e.width)?e.width:n.width,height:we(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:s,x:o,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:m}=a,g=vr(),y=Se(C=>xj(C,"xAxis",i,g)),v=Se(C=>xj(C,"yAxis",s,g));if(!da(u)||!da(d)||!we(o)||!we(c))return null;var x=a.verticalCoordinatesGenerator||sJ,w=a.horizontalCoordinatesGenerator||oJ,{horizontalPoints:b,verticalPoints:_}=a;if((!b||!b.length)&&typeof w=="function"){var j=h&&h.length,S=w({yAxis:v?mr(mr({},v),{},{ticks:j?h:v.ticks}):void 0,width:t??u,height:r??d,offset:n},j?!0:f);kf(Array.isArray(S),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof S,"]")),Array.isArray(S)&&(b=S)}if((!_||!_.length)&&typeof x=="function"){var N=m&&m.length,k=x({xAxis:y?mr(mr({},y),{},{ticks:N?m:y.ticks}):void 0,width:t??u,height:r??d,offset:n},N?!0:f);kf(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(_=k)}return p.createElement(Cn,{zIndex:a.zIndex},p.createElement("g",{className:"recharts-cartesian-grid"},p.createElement(tJ,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),p.createElement(aJ,cs({},a,{horizontalPoints:b})),p.createElement(iJ,cs({},a,{verticalPoints:_})),p.createElement(rJ,cs({},a,{offset:n,horizontalPoints:b,xAxis:y,yAxis:v})),p.createElement(nJ,cs({},a,{offset:n,verticalPoints:_,xAxis:y,yAxis:v}))))}ly.displayName="CartesianGrid";var AD=(e,t,r,n)=>Pi(e,"xAxis",t,n),TD=(e,t,r,n)=>Ei(e,"xAxis",t,n),DD=(e,t,r,n)=>Pi(e,"yAxis",r,n),ID=(e,t,r,n)=>Ei(e,"yAxis",r,n),cJ=U([Ke,AD,DD,TD,ID],(e,t,r,n,a)=>Ii(e,"xAxis")?Lo(t,n,!1):Lo(r,a,!1)),uJ=(e,t,r,n,a)=>a;function dJ(e){return e.type==="line"}var fJ=U([Np,uJ],(e,t)=>e.filter(dJ).find(r=>r.id===t)),hJ=U([Ke,AD,DD,TD,ID,fJ,cJ,gp],(e,t,r,n,a,i,s,o)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=o;if(!(i==null||t==null||r==null||n==null||a==null||n.length===0||a.length===0||s==null)){var{dataKey:f,data:h}=i,m;if(h!=null&&h.length>0?m=h:m=c==null?void 0:c.slice(u,d+1),m!=null)return IJ({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:f,bandSize:s,displayedData:m})}});function pJ(e){var t=Jc(e),r=3,n=2;if(t!=null){var{r:a,strokeWidth:i}=t,s=Number(a),o=Number(i);return(Number.isNaN(s)||s<0)&&(s=r),(Number.isNaN(o)||o<0)&&(o=n),{r:s,strokeWidth:o}}return{r,strokeWidth:n}}var mJ=["id"],gJ=["type","layout","connectNulls","needClip","shape"],vJ=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Mc(){return Mc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mc.apply(null,arguments)}function hS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function na(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hS(Object(r),!0).forEach(function(n){yJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yJ(e,t,r){return(t=xJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xJ(e){var t=bJ(e,"string");return typeof t=="symbol"?t:t+""}function bJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hb(e,t){if(e==null)return{};var r,n,a=wJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _J=e=>{var{dataKey:t,name:r,stroke:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:tp(r,t),payload:e}]};function jJ(e){var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:i,name:s,hide:o,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:tp(s,t),hide:o,type:e.tooltipType,color:e.stroke,unit:c}}}var RD=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function SJ(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],a=0;a<t;++a)n=[...n,...r];return n}var NJ=(e,t,r)=>{var n=r.reduce((f,h)=>f+h);if(!n)return RD(t,e);for(var a=Math.floor(e/n),i=e%n,s=t-e,o=[],c=0,u=0;c<r.length;u+=r[c],++c)if(u+r[c]>i){o=[...r.slice(0,c),i-u];break}var d=o.length%2===0?[0,s]:[s];return[...SJ(r,a),...o,...d].map(f=>"".concat(f,"px")).join(", ")};function kJ(e){var{clipPathId:t,points:r,props:n}=e,{dot:a,dataKey:i,needClip:s}=n,{id:o}=n,c=hb(n,mJ),u=qn(c);return p.createElement(DG,{points:r,dot:a,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:u,needClip:s,clipPathId:t})}function CJ(e){var{showLabels:t,children:r,points:n}=e,a=p.useMemo(()=>n==null?void 0:n.map(i=>{var s,o,c={x:(s=i.x)!==null&&s!==void 0?s:0,y:(o=i.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return na(na({},c),{},{value:i.value,payload:i.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[n]);return p.createElement(tD,{value:t?a:void 0},r)}function pS(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:a,props:i}=e,{type:s,layout:o,connectNulls:c,needClip:u,shape:d}=i,f=hb(i,gJ),h=na(na({},Nr(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:s,layout:o,connectNulls:c,strokeDasharray:a??i.strokeDasharray});return p.createElement(p.Fragment,null,(n==null?void 0:n.length)>1&&p.createElement(uD,Mc({shapeType:"curve",option:d},h,{pathRef:r})),p.createElement(kJ,{points:n,clipPathId:t,props:i}))}function EJ(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function PJ(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:a,longestAnimatedLengthRef:i}=e,{points:s,strokeDasharray:o,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:h,width:m,height:g,onAnimationEnd:y,onAnimationStart:v}=r,x=a.current,w=cp(r,"recharts-line-"),[b,_]=p.useState(!1),j=!b,S=p.useCallback(()=>{typeof y=="function"&&y(),_(!1)},[y]),N=p.useCallback(()=>{typeof v=="function"&&v(),_(!0)},[v]),k=EJ(n.current),C=i.current;return p.createElement(CJ,{points:s,showLabels:j},r.children,p.createElement(lp,{animationId:w,begin:u,duration:d,isActive:c,easing:f,onAnimationEnd:S,onAnimationStart:N,key:w},E=>{var O=jt(C,k+C,E),A=Math.min(O,k),q;if(c)if(o){var J="".concat(o).split(/[,\s]+/gim).map(K=>parseFloat(K));q=NJ(A,k,J)}else q=RD(k,A);else q=o==null?void 0:String(o);if(x){var Z=x.length/s.length,B=E===1?s:s.map((K,D)=>{var M=Math.floor(D*Z);if(x[M]){var L=x[M];return na(na({},K),{},{x:jt(L.x,K.x,E),y:jt(L.y,K.y,E)})}return h?na(na({},K),{},{x:jt(m*2,K.x,E),y:jt(g/2,K.y,E)}):na(na({},K),{},{x:K.x,y:K.y})});return a.current=B,p.createElement(pS,{props:r,points:B,clipPathId:t,pathRef:n,strokeDasharray:q})}return E>0&&k>0&&(a.current=s,i.current=A),p.createElement(pS,{props:r,points:s,clipPathId:t,pathRef:n,strokeDasharray:q})}),p.createElement(nD,{label:r.label}))}function OJ(e){var{clipPathId:t,props:r}=e,n=p.useRef(null),a=p.useRef(0),i=p.useRef(null);return p.createElement(PJ,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:a,pathRef:i})}var AJ=(e,t)=>{var r,n;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(n=e.y)!==null&&n!==void 0?n:void 0,value:e.value,errorVal:Zt(e.payload,t)}};class TJ extends p.Component{render(){var{hide:t,dot:r,points:n,className:a,xAxisId:i,yAxisId:s,top:o,left:c,width:u,height:d,id:f,needClip:h,zIndex:m}=this.props;if(t)return null;var g=Xe("recharts-line",a),y=f,{r:v,strokeWidth:x}=pJ(r),w=lD(r),b=v*2+x;return p.createElement(Cn,{zIndex:m},p.createElement(jn,{className:g},h&&p.createElement("defs",null,p.createElement(jD,{clipPathId:y,xAxisId:i,yAxisId:s}),!w&&p.createElement("clipPath",{id:"clipPath-dots-".concat(y)},p.createElement("rect",{x:c-b/2,y:o-b/2,width:u+b,height:d+b}))),p.createElement(_D,{xAxisId:i,yAxisId:s,data:n,dataPointFormatter:AJ,errorBarOffset:0},p.createElement(OJ,{props:this.props,clipPathId:y}))),p.createElement(JG,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var MD={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Ts.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Jt.line};function DJ(e){var t=Pr(e,MD),{activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:s,connectNulls:o,dot:c,hide:u,isAnimationActive:d,label:f,legendType:h,xAxisId:m,yAxisId:g,id:y}=t,v=hb(t,vJ),{needClip:x}=lb(m,g),w=ob(),b=ru(),_=vr(),j=Se(E=>hJ(E,m,g,_,y));if(b!=="horizontal"&&b!=="vertical"||j==null||w==null)return null;var{height:S,width:N,x:k,y:C}=w;return p.createElement(TJ,Mc({},v,{id:y,connectNulls:o,dot:c,activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:s,isAnimationActive:d,hide:u,label:f,legendType:h,xAxisId:m,yAxisId:g,points:j,layout:b,height:S,width:N,left:k,top:C,needClip:x}))}function IJ(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,dataKey:s,bandSize:o,displayedData:c}=e;return c.map((u,d)=>{var f=Zt(u,s);if(t==="horizontal"){var h=Z_({axis:r,ticks:a,bandSize:o,entry:u,index:d}),m=ft(f)?null:n.scale(f);return{x:h,y:m,value:f,payload:u}}var g=ft(f)?null:r.scale(f),y=Z_({axis:n,ticks:i,bandSize:o,entry:u,index:d});return g==null||y==null?null:{x:g,y,value:f,payload:u}}).filter(Boolean)}function RJ(e){var t=Pr(e,MD),r=vr();return p.createElement(vD,{id:t.id,type:"line"},n=>p.createElement(p.Fragment,null,p.createElement(mD,{legendPayload:_J(t)}),p.createElement(pD,{fn:jJ,args:t}),p.createElement(xD,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),p.createElement(DJ,Mc({},t,{id:n}))))}var cy=p.memo(RJ);cy.displayName="Line";var MJ=["dangerouslySetInnerHTML","ticks"],$J=["id"],LJ=["domain"],FJ=["domain"];function uy(){return uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uy.apply(null,arguments)}function Zf(e,t){if(e==null)return{};var r,n,a=BJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function BJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function UJ(e){var t=Pt();return p.useLayoutEffect(()=>(t(LG(e)),()=>{t(FG(e))}),[e,t]),null}var zJ=e=>{var{xAxisId:t,className:r}=e,n=Se(ix),a=vr(),i="xAxis",s=Se(v=>cl(v,i,t,a)),o=Se(v=>sT(v,i,t,a)),c=Se(v=>rT(v,t)),u=Se(v=>FK(v,t)),d=Se(v=>SA(v,t));if(c==null||u==null||d==null)return null;var{dangerouslySetInnerHTML:f,ticks:h}=e,m=Zf(e,MJ),{id:g}=d,y=Zf(d,$J);return p.createElement(fb,uy({},m,y,{scale:s,x:u.x,y:u.y,width:c.width,height:c.height,className:Xe("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:o,axisType:i}))},WJ={allowDataOverflow:Gr.allowDataOverflow,allowDecimals:Gr.allowDecimals,allowDuplicatedCategory:Gr.allowDuplicatedCategory,height:Gr.height,hide:!1,mirror:Gr.mirror,orientation:Gr.orientation,padding:Gr.padding,reversed:Gr.reversed,scale:Gr.scale,tickCount:Gr.tickCount,type:Gr.type,xAxisId:0},KJ=e=>{var t,r,n,a,i,s=Pr(e,WJ);return p.createElement(p.Fragment,null,p.createElement(UJ,{interval:(t=s.interval)!==null&&t!==void 0?t:"preserveEnd",id:s.xAxisId,scale:s.scale,type:s.type,padding:s.padding,allowDataOverflow:s.allowDataOverflow,domain:s.domain,dataKey:s.dataKey,allowDuplicatedCategory:s.allowDuplicatedCategory,allowDecimals:s.allowDecimals,tickCount:s.tickCount,includeHidden:(r=s.includeHidden)!==null&&r!==void 0?r:!1,reversed:s.reversed,ticks:s.ticks,height:s.height,orientation:s.orientation,mirror:s.mirror,hide:s.hide,unit:s.unit,name:s.name,angle:(n=s.angle)!==null&&n!==void 0?n:0,minTickGap:(a=s.minTickGap)!==null&&a!==void 0?a:5,tick:(i=s.tick)!==null&&i!==void 0?i:!0,tickFormatter:s.tickFormatter}),p.createElement(zJ,s))},HJ=(e,t)=>{var{domain:r}=e,n=Zf(e,LJ),{domain:a}=t,i=Zf(t,FJ);return zo(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(a)&&a.length===2?r[0]===a[0]&&r[1]===a[1]:zo({domain:r},{domain:a}):!1},dy=p.memo(KJ,HJ);dy.displayName="XAxis";var qJ=["dangerouslySetInnerHTML","ticks"],VJ=["id"],GJ=["domain"],YJ=["domain"];function fy(){return fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fy.apply(null,arguments)}function eh(e,t){if(e==null)return{};var r,n,a=XJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function XJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function JJ(e){var t=Pt();return p.useLayoutEffect(()=>(t(BG(e)),()=>{t(UG(e))}),[e,t]),null}var QJ=e=>{var{yAxisId:t,className:r,width:n,label:a}=e,i=p.useRef(null),s=p.useRef(null),o=Se(ix),c=vr(),u=Pt(),d="yAxis",f=Se(j=>cl(j,d,t,c)),h=Se(j=>nT(j,t)),m=Se(j=>UK(j,t)),g=Se(j=>sT(j,d,t,c)),y=Se(j=>NA(j,t));if(p.useLayoutEffect(()=>{if(!(n!=="auto"||!h||ab(a)||p.isValidElement(a)||y==null)){var j=i.current;if(j){var S=j.getCalculatedWidth();Math.round(h.width)!==Math.round(S)&&u(zG({id:t,width:S}))}}},[g,h,u,a,t,n,y]),h==null||m==null||y==null)return null;var{dangerouslySetInnerHTML:v,ticks:x}=e,w=eh(e,qJ),{id:b}=y,_=eh(y,VJ);return p.createElement(fb,fy({},w,_,{ref:i,labelRef:s,scale:f,x:m.x,y:m.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:h.width,height:h.height,className:Xe("recharts-".concat(d," ").concat(d),r),viewBox:o,ticks:g,axisType:d}))},ZJ={allowDataOverflow:Yr.allowDataOverflow,allowDecimals:Yr.allowDecimals,allowDuplicatedCategory:Yr.allowDuplicatedCategory,hide:!1,mirror:Yr.mirror,orientation:Yr.orientation,padding:Yr.padding,reversed:Yr.reversed,scale:Yr.scale,tickCount:Yr.tickCount,type:Yr.type,width:Yr.width,yAxisId:0},eQ=e=>{var t,r,n,a,i,s=Pr(e,ZJ);return p.createElement(p.Fragment,null,p.createElement(JJ,{interval:(t=s.interval)!==null&&t!==void 0?t:"preserveEnd",id:s.yAxisId,scale:s.scale,type:s.type,domain:s.domain,allowDataOverflow:s.allowDataOverflow,dataKey:s.dataKey,allowDuplicatedCategory:s.allowDuplicatedCategory,allowDecimals:s.allowDecimals,tickCount:s.tickCount,padding:s.padding,includeHidden:(r=s.includeHidden)!==null&&r!==void 0?r:!1,reversed:s.reversed,ticks:s.ticks,width:s.width,orientation:s.orientation,mirror:s.mirror,hide:s.hide,unit:s.unit,name:s.name,angle:(n=s.angle)!==null&&n!==void 0?n:0,minTickGap:(a=s.minTickGap)!==null&&a!==void 0?a:5,tick:(i=s.tick)!==null&&i!==void 0?i:!0,tickFormatter:s.tickFormatter}),p.createElement(QJ,s))},tQ=(e,t)=>{var{domain:r}=e,n=eh(e,GJ),{domain:a}=t,i=eh(t,YJ);return zo(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(a)&&a.length===2?r[0]===a[0]&&r[1]===a[1]:zo({domain:r},{domain:a}):!1},hy=p.memo(eQ,tQ);hy.displayName="YAxis";var rQ={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pu=p;function nQ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var aQ=typeof Object.is=="function"?Object.is:nQ,iQ=pu.useSyncExternalStore,sQ=pu.useRef,oQ=pu.useEffect,lQ=pu.useMemo,cQ=pu.useDebugValue;rQ.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=sQ(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=lQ(function(){function c(m){if(!u){if(u=!0,d=m,m=n(m),a!==void 0&&s.hasValue){var g=s.value;if(a(g,m))return f=g}return f=m}if(g=f,aQ(d,m))return g;var y=n(m);return a!==void 0&&a(g,y)?(d=m,g):(d=m,f=y)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,a]);var o=iQ(e,i[0],i[1]);return oQ(function(){s.hasValue=!0,s.value=o},[o]),cQ(o),o};function uQ(e){e()}function dQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){uQ(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var mS={notify(){},get:()=>[]};function fQ(e,t){let r,n=mS,a=0,i=!1;function s(y){d();const v=n.subscribe(y);let x=!1;return()=>{x||(x=!0,v(),f())}}function o(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return i}function d(){a++,r||(r=e.subscribe(c),n=dQ())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=mS)}function h(){i||(i=!0,d())}function m(){i&&(i=!1,f())}const g={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>n};return g}var hQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pQ=hQ(),mQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",gQ=mQ(),vQ=()=>pQ||gQ?p.useLayoutEffect:p.useEffect,yQ=vQ(),eg=Symbol.for("react-redux-context"),tg=typeof globalThis<"u"?globalThis:{};function xQ(){if(!p.createContext)return{};const e=tg[eg]??(tg[eg]=new Map);let t=e.get(p.createContext);return t||(t=p.createContext(null),e.set(p.createContext,t)),t}var bQ=xQ();function wQ(e){const{children:t,context:r,serverState:n,store:a}=e,i=p.useMemo(()=>{const c=fQ(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),s=p.useMemo(()=>a.getState(),[a]);yQ(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,s]);const o=r||bQ;return p.createElement(o.Provider,{value:i},t)}var _Q=wQ,jQ=(e,t)=>t,pb=U([jQ,Ke,_A,Ht,jT,Ga,QH,er],iq),mb=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},$D=Sn("mouseClick"),LD=eu();LD.startListening({actionCreator:$D,effect:(e,t)=>{var r=e.payload,n=pb(t.getState(),mb(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(eH({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var py=Sn("mouseMove"),FD=eu();FD.startListening({actionCreator:py,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=Gx(n,n.tooltip.settings.shared),i=pb(n,mb(r));a==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(pT({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(hT()))}});var gS={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},BD=Ur({name:"rootProps",initialState:gS,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:gS.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue}}}),SQ=BD.reducer,{updateOptions:NQ}=BD.actions,UD=Ur({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:nte}=UD.actions,kQ=UD.reducer,zD=Sn("keyDown"),WD=Sn("focus"),gb=eu();gb.startListening({actionCreator:zD,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var s=Number(Yx(a,dl(r))),o=Ga(r);if(i==="Enter"){var c=Kf(r,"axis","hover",String(a.index));t.dispatch(ey({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var u=HK(r),d=u==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,h=s+f*d;if(!(o==null||h>=o.length||h<0)){var m=Kf(r,"axis","hover",String(h));t.dispatch(ey({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});gb.startListening({actionCreator:WD,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var i="0",s=Kf(r,"axis","hover",String(i));t.dispatch(ey({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:s}))}}}});var hn=Sn("externalEvent"),KD=eu();KD.startListening({actionCreator:hn,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:MH(r),activeDataKey:CT(r),activeIndex:Cs(r),activeLabel:kT(r),activeTooltipIndex:Cs(r),isTooltipActive:$H(r)};e.payload.handler(n,e.payload.reactEvent)}}});var CQ=U([ul],e=>e.tooltipItemPayloads),EQ=U([CQ,du,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(o=>o.settings.dataKey===n);if(a!=null){var{positions:i}=a;if(i!=null){var s=t(i,r);return s}}}),HD=Sn("touchMove"),qD=eu();qD.startListening({actionCreator:HD,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),a=Gx(n,n.tooltip.settings.shared);if(a==="axis"){var i=pb(n,mb({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(pT({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var s,o=r.touches[0];if(document.elementFromPoint==null)return;var c=document.elementFromPoint(o.clientX,o.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(sz),d=(s=c.getAttribute(oz))!==null&&s!==void 0?s:void 0,f=EQ(t.getState(),u,d);t.dispatch(fT({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}}});var PQ=bP({brush:fX,cartesianAxis:WG,chartData:Rq,errorBars:cY,graphicalItems:SG,layout:UU,legend:Mz,options:Oq,polarAxis:XV,polarOptions:kQ,referenceElements:xX,rootProps:SQ,tooltip:tH,zIndex:xq}),OQ=function(t){return fU({reducer:PQ,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([LD.middleware,FD.middleware,gb.middleware,KD.middleware,qD.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(TP({type:"raf"}))},devTools:Ts.devToolsEnabled})};function AQ(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=vr(),i=p.useRef(null);if(a)return r;i.current==null&&(i.current=OQ(t));var s=J0;return p.createElement(_Q,{context:s,store:i.current},r)}function TQ(e){var{layout:t,margin:r}=e,n=Pt(),a=vr();return p.useEffect(()=>{a||(n(LU(t)),n($U(r)))},[n,a,t,r]),null}function DQ(e){var t=Pt();return p.useEffect(()=>{t(NQ(e))},[t,e]),null}function vS(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",a=gD("".concat(n).concat(t)),i=Pt();return p.useLayoutEffect(()=>(i(vq({zIndex:t,elementId:a,isPanorama:r})),()=>{i(yq({zIndex:t,isPanorama:r}))}),[i,t,a,r]),p.createElement("g",{id:a})}function yS(e){var{children:t,isPanorama:r}=e,n=Se(oq);if(!n||n.length===0)return t;var a=n.filter(s=>s<0),i=n.filter(s=>s>0);return p.createElement(p.Fragment,null,a.map(s=>p.createElement(vS,{key:s,zIndex:s,isPanorama:r})),t,i.map(s=>p.createElement(vS,{key:s,zIndex:s,isPanorama:r})))}var IQ=["children"];function RQ(e,t){if(e==null)return{};var r,n,a=MQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function MQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function th(){return th=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},th.apply(null,arguments)}var $Q={width:"100%",height:"100%",display:"block"},LQ=p.forwardRef((e,t)=>{var r=nO(),n=aO(),a=sO();if(!da(r)||!da(n))return null;var{children:i,otherAttributes:s,title:o,desc:c}=e,u,d;return s!=null&&(typeof s.tabIndex=="number"?u=s.tabIndex:u=a?0:void 0,typeof s.role=="string"?d=s.role:d=a?"application":void 0),p.createElement(wE,th({},s,{title:o,desc:c,role:d,tabIndex:u,width:r,height:n,style:$Q,ref:t}),i)}),FQ=e=>{var{children:t}=e,r=Se(ip);if(!r)return null;var{width:n,height:a,y:i,x:s}=r;return p.createElement(wE,{width:n,height:a,x:s,y:i},t)},xS=p.forwardRef((e,t)=>{var{children:r}=e,n=RQ(e,IQ),a=vr();return a?p.createElement(FQ,null,p.createElement(yS,{isPanorama:!0},r)):p.createElement(LQ,th({ref:t},n),p.createElement(yS,{isPanorama:!1},r))});function BQ(){var e=Pt(),[t,r]=p.useState(null),n=Se(iz);return p.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),i=a.width/t.offsetWidth;Et(i)&&i!==n&&e(BU(i))}},[t,e,n]),r}function bS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function UQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bS(Object(r),!0).forEach(function(n){zQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zQ(e,t,r){return(t=WQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WQ(e){var t=KQ(e,"string");return typeof t=="symbol"?t:t+""}function KQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ps(){return Ps=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ps.apply(null,arguments)}var HQ=()=>(Kq(),null);function rh(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var qQ=p.forwardRef((e,t)=>{var r,n,a=p.useRef(null),[i,s]=p.useState({containerWidth:rh((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:rh((n=e.style)===null||n===void 0?void 0:n.height)}),o=p.useCallback((u,d)=>{s(f=>{var h=Math.round(u),m=Math.round(d);return f.containerWidth===h&&f.containerHeight===m?f:{containerWidth:h,containerHeight:m}})},[]),c=p.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=u.getBoundingClientRect();o(d,f);var h=g=>{var{width:y,height:v}=g[0].contentRect;o(y,v)},m=new ResizeObserver(h);m.observe(u),a.current=m}},[t,o]);return p.useEffect(()=>()=>{var u=a.current;u!=null&&u.disconnect()},[o]),p.createElement(p.Fragment,null,p.createElement(op,{width:i.containerWidth,height:i.containerHeight}),p.createElement("div",Ps({ref:c},e)))}),VQ=p.forwardRef((e,t)=>{var{width:r,height:n}=e,[a,i]=p.useState({containerWidth:rh(r),containerHeight:rh(n)}),s=p.useCallback((c,u)=>{i(d=>{var f=Math.round(c),h=Math.round(u);return d.containerWidth===f&&d.containerHeight===h?d:{containerWidth:f,containerHeight:h}})},[]),o=p.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();s(u,d)}},[t,s]);return p.createElement(p.Fragment,null,p.createElement(op,{width:a.containerWidth,height:a.containerHeight}),p.createElement("div",Ps({ref:o},e)))}),GQ=p.forwardRef((e,t)=>{var{width:r,height:n}=e;return p.createElement(p.Fragment,null,p.createElement(op,{width:r,height:n}),p.createElement("div",Ps({ref:t},e)))}),YQ=p.forwardRef((e,t)=>{var{width:r,height:n}=e;return Ia(r)||Ia(n)?p.createElement(VQ,Ps({},e,{ref:t})):p.createElement(GQ,Ps({},e,{ref:t}))});function XQ(e){return e===!0?qQ:YQ}var JQ=p.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:i,onContextMenu:s,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:m,onTouchMove:g,onTouchStart:y,style:v,width:x,responsive:w,dispatchTouchEvents:b=!0}=e,_=p.useRef(null),j=Pt(),[S,N]=p.useState(null),[k,C]=p.useState(null),E=BQ(),O=sx(),A=(O==null?void 0:O.width)>0?O.width:x,q=(O==null?void 0:O.height)>0?O.height:a,J=p.useCallback(T=>{E(T),typeof t=="function"&&t(T),N(T),C(T),T!=null&&(_.current=T)},[E,t,N,C]),Z=p.useCallback(T=>{j($D(T)),j(hn({handler:i,reactEvent:T}))},[j,i]),B=p.useCallback(T=>{j(py(T)),j(hn({handler:u,reactEvent:T}))},[j,u]),K=p.useCallback(T=>{j(hT()),j(hn({handler:d,reactEvent:T}))},[j,d]),D=p.useCallback(T=>{j(py(T)),j(hn({handler:f,reactEvent:T}))},[j,f]),M=p.useCallback(()=>{j(WD())},[j]),L=p.useCallback(T=>{j(zD(T.key))},[j]),oe=p.useCallback(T=>{j(hn({handler:s,reactEvent:T}))},[j,s]),ee=p.useCallback(T=>{j(hn({handler:o,reactEvent:T}))},[j,o]),ye=p.useCallback(T=>{j(hn({handler:c,reactEvent:T}))},[j,c]),P=p.useCallback(T=>{j(hn({handler:h,reactEvent:T}))},[j,h]),V=p.useCallback(T=>{j(hn({handler:y,reactEvent:T}))},[j,y]),te=p.useCallback(T=>{b&&j(HD(T)),j(hn({handler:g,reactEvent:T}))},[j,b,g]),$=p.useCallback(T=>{j(hn({handler:m,reactEvent:T}))},[j,m]),X=XQ(w);return p.createElement(RT.Provider,{value:S},p.createElement(uF.Provider,{value:k},p.createElement(X,{width:A??(v==null?void 0:v.width),height:q??(v==null?void 0:v.height),className:Xe("recharts-wrapper",n),style:UQ({position:"relative",cursor:"default",width:A,height:q},v),onClick:Z,onContextMenu:oe,onDoubleClick:ee,onFocus:M,onKeyDown:L,onMouseDown:ye,onMouseEnter:B,onMouseLeave:K,onMouseMove:D,onMouseUp:P,onTouchEnd:$,onTouchMove:te,onTouchStart:V,ref:J},p.createElement(HQ,null),r)))}),QQ=["width","height","responsive","children","className","style","compact","title","desc"];function ZQ(e,t){if(e==null)return{};var r,n,a=eZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function eZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var tZ=p.forwardRef((e,t)=>{var{width:r,height:n,responsive:a,children:i,className:s,style:o,compact:c,title:u,desc:d}=e,f=ZQ(e,QQ),h=qn(f);return c?p.createElement(p.Fragment,null,p.createElement(op,{width:r,height:n}),p.createElement(xS,{otherAttributes:h,title:u,desc:d},i)):p.createElement(JQ,{className:s,style:o,width:r,height:n,responsive:a??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},p.createElement(xS,{otherAttributes:h,title:u,desc:d,ref:t},p.createElement(wX,null,i)))});function my(){return my=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},my.apply(null,arguments)}var rZ={top:5,right:5,bottom:5,left:5},nZ={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:rZ,reverseStackOrder:!1,syncMethod:"index",responsive:!1},VD=p.forwardRef(function(t,r){var n,a=Pr(t.categoricalChartProps,nZ),{chartName:i,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:u}=t,d={chartName:i,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return p.createElement(AQ,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:i},p.createElement(dX,{chartData:u.data}),p.createElement(TQ,{layout:a.layout,margin:a.margin}),p.createElement(DQ,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),p.createElement(tZ,my({},a,{ref:r})))}),aZ=["axis"],iZ=p.forwardRef((e,t)=>p.createElement(VD,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:aZ,tooltipPayloadSearcher:$T,categoricalChartProps:e,ref:t})),sZ=["axis","item"],oZ=p.forwardRef((e,t)=>p.createElement(VD,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:sZ,tooltipPayloadSearcher:$T,categoricalChartProps:e,ref:t}));function GD({options:e,value:t,onChange:r,className:n=""}){return l.jsx("div",{className:`inline-flex rounded-2xl border border-gray-200/80 bg-white p-1 shadow-sm ${n}`,children:e.map(a=>l.jsx("button",{onClick:()=>r(a.value),className:`px-4 py-2 text-sm font-semibold rounded-xl transition-all duration-150 min-h-[40px] ${t===a.value?"bg-[rgb(0,122,255)] text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:a.label},a.value))})}const wS={new_lead:"New Lead",contacted:"Contacted",showing_scheduled:"Showing Scheduled",offer_submitted:"Offer Submitted",under_contract:"Under Contract",pending:"Pending",closed:"Closed",dead:"Lost"},_S=["under_contract","pending"],lZ=["closed","dead"],cZ=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],uZ=new Date().getFullYear(),Vs={buyer:"Buyer",seller:"Seller",buyer_and_seller:"Buyer & Seller",renter:"Renter",landlord:"Landlord"},jS=30*60*1e3,dZ=60*1e3,nh=["luma-insights","pipeline-health","alerts-actions","monthly-momentum","deal-type-mix","lead-source","upcoming-deals"],fZ=e=>{const t=e.map(s=>s==="monthly-gci"?"monthly-momentum":s),r=t.filter((s,o)=>t.indexOf(s)===o),n=new Set(nh),a=r.filter(s=>n.has(s)),i=nh.filter(s=>!a.includes(s));return[...a,...i]},hZ=/^\d{4}-\d{2}-\d{2}$/,$c=e=>{if(!e)return null;const t=e.trim();if(!t)return null;const r=t.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(r){const i=Number(r[1]),s=Number(r[2])-1,o=Number(r[3]);if(Number.isNaN(i)||Number.isNaN(s)||Number.isNaN(o)||s<0||s>11||o<1||o>31)return null;const c=new Date(Date.UTC(i,s,o));return{year:i,month:s,date:c}}const n=t.replace(" ","T").replace(/(\+\d{2})(\d{2})$/,"$1:$2").replace(/(-\d{2})(\d{2})$/,"$1:$2"),a=new Date(n);return Number.isNaN(a.getTime())?null:{year:a.getUTCFullYear(),month:a.getUTCMonth(),date:a}},SS=e=>{if(!e)return null;const t=$c(e);if(!t)return null;const r=e.trim();if(hZ.test(r)){const a=t.date.getUTCDate();return new Date(t.year,t.month,a,23,59,59,999).getTime()}return t.date.getTime()},rg=(e,t)=>{const r=e.split("T")[0],n=t.split("T")[0];return[`and(close_date.gte.${r},close_date.lte.${n})`,`and(close_date.is.null,closed_at.gte.${e},closed_at.lte.${t})`].join(",")},NS=(e,t,r)=>{const n=$c(e.close_date)||$c(e.closed_at);if(!n)return!1;const a=n.date.getTime();return a>=t.getTime()&&a<=r.getTime()};function pZ({id:e,children:t}){const{attributes:r,listeners:n,setNodeRef:a,transform:i,transition:s,isDragging:o}=Lh({id:e}),c={transform:Kn.Transform.toString(i),transition:s,opacity:o?.5:1,position:"relative"};return l.jsxs("div",{ref:a,style:c,className:"relative group",children:[l.jsx("div",{...r,...n,className:"absolute -top-2 -right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing bg-white rounded-lg shadow-lg p-2",children:l.jsx(k0,{className:"w-4 h-4 text-gray-400"})}),t]})}function mZ(){var ot,wt;const{user:e,roleInfo:t}=St(),[r,n]=p.useState({ytdGCI:0,ytdDeals:0,ytdVolume:0,avgCommission:0,closingNext7Days:0,conversionRate:0}),[a,i]=p.useState([]),[s,o]=p.useState([]),[c,u]=p.useState([]),[d,f]=p.useState([]),[h,m]=p.useState([]),[g,y]=p.useState(!0),[v,x]=p.useState(!1),[w,b]=p.useState([]),[_,j]=p.useState(null),[S,N]=p.useState(null),[k,C]=p.useState(!1),E=p.useRef(!1),[O,A]=p.useState(0),[q,J]=p.useState(""),Z=p.useRef(null),[B,K]=p.useState([]),[D,M]=p.useState([...nh]),[L,oe]=p.useState(null),[ee,ye]=p.useState([]),[P,V]=p.useState([]),[te,$]=p.useState([]),[X,T]=p.useState([]),[H,Q]=p.useState([]),[F,ve]=p.useState([]),[R,ie]=p.useState([]),[ne,Ne]=p.useState([]),[Ie,Ot]=p.useState("ytd"),Me=p.useMemo(()=>X6(Ie),[Ie]),z=Ah(Oh(rl,{activationConstraint:{distance:8}})),Le=[{value:"this_month",label:"MTD"},{value:"last_30_days",label:"30D"},{value:"this_quarter",label:"QTD"},{value:"ytd",label:"YTD"}];p.useEffect(()=>{if(!e)return;(async()=>{var Oe;const G={id:e.id,label:((Oe=e.user_metadata)==null?void 0:Oe.name)||e.email||"You",email:e.email||""},se=async()=>{if(!(t!=null&&t.teamId))return[];const{data:ae,error:fe}=await Y.from("user_teams").select("user_id").eq("team_id",t.teamId);return fe?(console.error("Unable to load team members",fe),[]):(ae||[]).map(ue=>ue.user_id)},de=async()=>{if(!t)return[e.id];switch(t.globalRole){case"admin":return await la(t);case"sales_manager":{const ae=await se();return ae.length?ae:await la(t)}case"team_lead":return await la(t);default:return[t.userId]}};if(!t||t.globalRole==="agent"){ye([G]),V([e.id]);return}const ce=await de();let le=[];const{data:Pe,error:he}=await Y.rpc("get_accessible_agents");if(he)console.error("Unable to load accessible agents",he);else if(Pe){const ae=Pe,fe=new Set(ae.filter(Ee=>Ee.global_role==="admin"||Ee.global_role==="sales_manager").map(Ee=>Ee.user_id)),ue=ae.filter(Ee=>Ee.global_role!=="admin"&&Ee.global_role!=="sales_manager").map(Ee=>({id:Ee.user_id,label:Ee.display_name||Ee.email||"Agent",email:Ee.email||""}));if(le=(ce.length?ue.filter(Ee=>ce.includes(Ee.id)):ue).filter((Ee,ze,gt)=>gt.findIndex(Nt=>Nt.id===Ee.id)===ze),fe.size)for(const Ee of fe){const ze=ce.indexOf(Ee);ze!==-1&&ce.splice(ze,1)}}const xe=ae=>{var fe;return ae===e.id?((fe=e.user_metadata)==null?void 0:fe.name)||e.email||"You":`Agent ${ae.slice(0,8)}`};if(!le.length)le=ce.map(ae=>({id:ae,label:xe(ae),email:""}));else{const ae=new Set(le.map(ue=>ue.id)),fe=ce.filter(ue=>!ae.has(ue));fe.length&&(le=[...le,...fe.map(ue=>({id:ue,label:xe(ue),email:""}))])}ye(le),ce.length||le.map(ae=>ae.id),V([])})()},[e,t==null?void 0:t.globalRole,t==null?void 0:t.teamId]);const Ce=p.useMemo(()=>P.length?[...P].sort().join("|"):"",[P]),He=p.useMemo(()=>F.length?[...F].sort().join("|"):"",[F]),At=p.useMemo(()=>R.length?[...R].sort().join("|"):"",[R]),Ya=p.useMemo(()=>ne.length?[...ne].sort().join("|"):"",[ne]),un=!!e&&((t==null?void 0:t.globalRole)==="team_lead"||(t==null?void 0:t.teamRole)==="team_lead"),Qn=un&&P.length===1&&P[0]===e.id,Pn=P.length===0||P.length===ee.length,Rs=p.useMemo(()=>{const I=(Te,Hr)=>Te.length===0?Hr:Te.length===1?Te[0]:Te.length===2?`${Te[0]} and ${Te[1]}`:Te.length===3?`${Te[0]}, ${Te[1]} and ${Te[2]}`:`multiple ${Hr}`,G=Te=>Te.endsWith("s")?`${Te}'`:`${Te}'s`,se=ee.filter(Te=>P.includes(Te.id)).map(Te=>Te.label||Te.email||"Agent"),de=Pn||se.length===0,ce=!de&&se.length===1,le=ce?G(se[0]):"",Pe=R.length===0||X.length>0&&R.length===X.length,he=ne.length===0||H.length>0&&ne.length===H.length,xe=F.length===0||te.length>0&&F.length===te.length,Oe=X.filter(Te=>R.includes(Te.id)).map(Te=>Te.label),ae=ne.map(Te=>Vs[Te]??Te.replace(/_/g," ")),fe=te.filter(Te=>F.includes(Te.id)).map(Te=>Te.name),ue=Pe?"all pipeline stages":I(Oe,"pipeline stages"),ke=he?"all deal types":I(ae,"deal types"),Ee=xe?"all lead sources":I(fe,"lead sources");if(Pe&&he&&xe)return ce?`Viewing ${le} deals across all pipeline stages, deal types, and lead sources.`:de?"Viewing all deals across all agents, pipeline stages, deal types, and lead sources.":"Viewing deals for multiple agents across all pipeline stages, deal types, and lead sources.";const gt=de?"all agents":ce?le:se.length===2?`${se[0]} and ${se[1]}`:se.length===3?`${se[0]}, ${se[1]} and ${se[2]}`:"multiple agents",Nt=[];if(ue&&Nt.push(ue),ke){const Te=he?`across ${ke}`:`${ke} deals`;Nt.push(Te)}Ee&&Nt.push(`from ${Ee}`),Nt.length===0&&Nt.push("deals");const nt=Nt.join(", ");return`Viewing ${gt} ${nt}`.replace(/\s+/g," ").trim()+"."},[ee,H,te,X,Pn,P,ne,F,R]),yr=()=>{e&&V([e.id])},Xa=()=>{V([])},Li=I=>{const G=Array.from(I.target.selectedOptions).map(se=>se.value);V(G)};p.useEffect(()=>{H.length&&Ne(I=>I.filter(G=>H.includes(G)))},[H]);const Fi=I=>{const G=Array.from(I.target.selectedOptions).map(se=>se.value);ie(G)},Bi=I=>{const G=Array.from(I.target.selectedOptions).map(se=>se.value);ve(G)},Ui=I=>{const G=Array.from(I.target.selectedOptions).map(se=>se.value);Ne(G)},zi=t&&t.globalRole!=="agent"||ee.length>1,Zn=p.useMemo(()=>a.reduce((I,G)=>I+G.count,0),[a]),Ja=p.useMemo(()=>a.reduce((I,G)=>I+G.expectedGCI,0),[a]),Wi=p.useMemo(()=>a.reduce((I,G)=>I+G.stalledCount,0),[a]),Qa=p.useMemo(()=>{const I=new Date;I.setHours(0,0,0,0);const G=new Date(I);G.setDate(G.getDate()+29),G.setHours(23,59,59,999);const se=I.getTime(),de=G.getTime();return d.map(ce=>{const le=SS(ce.close_date)??SS(ce.closed_at);return le===null?null:{deal:ce,closeTime:le}}).filter(ce=>ce?ce.closeTime>=se&&ce.closeTime<=de:!1).sort((ce,le)=>ce.closeTime-le.closeTime).map(({deal:ce})=>ce)},[d]),Fe=p.useMemo(()=>Qa.reduce((I,G)=>I+qi(G),0),[Qa]);p.useEffect(()=>{e&&ee.length&&ur()},[e==null?void 0:e.id,Ce,He,At,Ya,Ie,ee.length]),p.useEffect(()=>{e&&On()},[e]),p.useEffect(()=>{const I=P.length?P:ee.map(G=>G.id);!e||!I.length||pt(I)},[P,ee]),p.useEffect(()=>{g||E.current||rr()},[g,O]),p.useEffect(()=>{if(!e)return;const I=()=>{var de;const G=Date.now();(O===0||G-O>=jS||!q)&&(J(C_((de=e.user_metadata)==null?void 0:de.name,t==null?void 0:t.globalRole)),A(G))};return I(),Z.current&&clearInterval(Z.current),Z.current=setInterval(I,dZ),()=>{Z.current&&clearInterval(Z.current)}},[(ot=e==null?void 0:e.user_metadata)==null?void 0:ot.name]);const ht=(I,G)=>G.length?G.length===1?I.eq("user_id",G[0]):I.in("user_id",G):I,Je=(I,G)=>{if(I=ht(I,G),F.length&&(I=I.in("lead_source_id",F)),R.length){const se=R.filter(Boolean);se.length&&(I=I.in("pipeline_status_id",se))}return ne.length&&(I=I.in("deal_type",ne)),I},pt=async I=>{const G=I.length?I:ee.map(Oe=>Oe.id);if(!G.length)return;let se=Y.from("deals").select(`
        id,
        user_id,
        deal_type,
        lead_source_id,
        lead_sources (id, name),
        pipeline_status_id,
        pipeline_statuses (id, name, color, sort_order)
      `).order("created_at",{ascending:!1}).limit(1e3);se=ht(se,G);const{data:de,error:ce}=await se;if(ce){console.error("Unable to load filter context",ce);return}const le=new Map,Pe=new Map,he=new Set;(de||[]).forEach(Oe=>{var ae,fe;(ae=Oe.lead_sources)!=null&&ae.id&&le.set(Oe.lead_sources.id,{id:Oe.lead_sources.id,name:Oe.lead_sources.name||"Unknown"}),(fe=Oe.pipeline_statuses)!=null&&fe.id&&Pe.set(Oe.pipeline_statuses.id,{id:Oe.pipeline_statuses.id,label:Oe.pipeline_statuses.name,color:Oe.pipeline_statuses.color,sortOrder:Oe.pipeline_statuses.sort_order}),Oe.deal_type&&he.add(Oe.deal_type)}),$(Array.from(le.values()).sort((Oe,ae)=>Oe.name.localeCompare(ae.name))),T(Array.from(Pe.values()).sort((Oe,ae)=>{const fe=Oe.sortOrder??999,ue=ae.sortOrder??999;return fe===ue?Oe.label.localeCompare(ae.label):fe-ue}));const xe=Array.from(he).sort((Oe,ae)=>{const fe=Vs[Oe]??Oe,ue=Vs[ae]??ae;return fe.localeCompare(ue)});Q(xe.length?xe:Object.keys(Vs))},ur=async()=>{if(!e)return;const I=P.length?P:ee.map(ce=>ce.id);if(!I.length)return;const G=g;G?y(!0):x(!0);const se=Me.start.toISOString(),de=Me.end.toISOString();try{await Promise.all([Ar(I,se,de),zr(I),Ye(I),Vt(I,se,de),xr(I),Wr(I)])}catch(ce){console.error("Error loading dashboard data",ce)}finally{G&&y(!1),x(!1)}},rr=async()=>{if(!E.current&&e){C(!0);try{const{data:{session:I}}=await Y.auth.getSession();if(!I)return;const G="https://gomwhbewjdcllejifdyf.supabase.co/functions/v1/luma-insights",se={...r,closingThisMonth:r.closingNext7Days},de=await fetch(G,{method:"POST",headers:{Authorization:`Bearer ${I.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({stats:se,pipelineHealth:a.map(Pe=>({id:Pe.id,name:Pe.name,count:Pe.count,expectedGCI:Pe.expectedGCI,stalledCount:Pe.stalledCount})),leadSourceData:c,monthlyData:s,upcomingDealsCount:d.length,projectedGCI:Fe})});if(!de.ok){const Pe=await de.text();console.error("Failed to fetch AI insights:",Pe);return}const le=(await de.json()).insights||[];b(le),!_&&le.length&&(j(le),E.current=!0)}catch(I){console.error("Error loading AI insights:",I)}finally{C(!1)}}},Ar=async(I,G,se)=>{const de=rg(G,se);let ce=Y.from("deals").select("*").eq("status","closed").or(de);ce=Je(ce,I);const{data:le,error:Pe}=await ce;Pe&&console.error("loadStats closedDeals error",Pe);let he=Y.from("deals").select("*").gte("created_at",G).lte("created_at",se);he=Je(he,I);const{data:xe,error:Oe}=await he;Oe&&console.error("loadStats allDeals error",Oe);const ae=new Date;ae.setHours(0,0,0,0);const fe=new Date(ae);fe.setDate(fe.getDate()+6),fe.setHours(23,59,59,999);let ue=Y.from("deals").select("id").in("status",_S).gte("close_date",ae.toISOString()).lte("close_date",fe.toISOString());ue=Je(ue,I);const{data:ke,error:Ee}=await ue;Ee&&console.error("loadStats closingSoon error",Ee);let ze=0,gt=0;const Nt=(le||[]).filter($s=>NS($s,Me.start,Me.end));Nt.forEach($s=>{const zp=$s.actual_sale_price||0;ze+=zp,gt+=qi($s)});const nt=Nt.length,Te=nt>0?gt/nt:0,Hr=(xe==null?void 0:xe.length)||0,mu=Hr>0?nt/Hr:0;n({ytdGCI:gt,ytdDeals:nt,ytdVolume:ze,avgCommission:Te,closingNext7Days:(ke==null?void 0:ke.length)||0,conversionRate:mu})},zr=async I=>{let G=Y.from("deals").select(`
        *,
        pipeline_statuses (id, name, color, sort_order),
        lead_sources (id, name)
      `).not("status","in",`(${lZ.join(",")})`);G=Je(G,I);const{data:se,error:de}=await G;if(de){console.error("loadPipelineHealth deals error",de);return}if(!se){i([]),K([]);return}const ce=new Map;se.forEach(ae=>{var gt,Nt,nt,Te;const fe=((gt=ae.pipeline_statuses)==null?void 0:gt.id)||ae.pipeline_status_id||`status:${ae.status}`,ue=((Nt=ae.pipeline_statuses)==null?void 0:Nt.name)||wS[ae.status]||ae.status,ke=((nt=ae.pipeline_statuses)==null?void 0:nt.color)||null,Ee=((Te=ae.pipeline_statuses)==null?void 0:Te.sort_order)??null,ze=ce.get(fe)||{id:fe,name:ue,color:ke,sortOrder:Ee,count:0,expectedGCI:0,stalledCount:0};ze.count+=1,ze.expectedGCI+=qi(ae),E_(ae.stage_entered_at,30)&&(ze.stalledCount+=1),ce.set(fe,ze)});const Pe=Array.from(ce.values()).sort((ae,fe)=>{const ue=ae.sortOrder??999,ke=fe.sortOrder??999;return ue===ke?ae.name.localeCompare(fe.name):ue-ke}).map(ae=>({id:ae.id,name:ae.name,color:ae.color,count:ae.count,expectedGCI:ae.expectedGCI,stalledCount:ae.stalledCount}));i(Pe);const he=new Map;se.forEach(ae=>{const fe=he.get(ae.deal_type)??{count:0,gci:0,statusCounts:{}};fe.count+=1,fe.gci+=qi(ae);const ue=fe.statusCounts[ae.status]||0;fe.statusCounts[ae.status]=ue+1,he.set(ae.deal_type,fe)});const xe=se.length,Oe=Array.from(he.entries()).map(([ae,fe])=>({dealType:ae,count:fe.count,gci:fe.gci,percentage:xe>0?fe.count/xe:0,statusCounts:fe.statusCounts})).sort((ae,fe)=>fe.count-ae.count);K(Oe)},Ye=async I=>{const G=Me!=null&&Me.start?Me.start.getFullYear():uZ,se=rg(Me.start.toISOString(),Me.end.toISOString());let de=Y.from("deals").select("*").eq("status","closed").or(se);de=Je(de,I);const{data:ce,error:le}=await de;if(le){console.error("loadMonthlyTrends error",le);return}if(!ce){o([]);return}const Pe=cZ.map(he=>({month:he,gci:0,deals:0}));ce.forEach(he=>{const xe=$c(he.close_date)||$c(he.closed_at);if(!xe||xe.year!==G)return;const Oe=xe.month,ae=Pe[Oe];ae.gci+=qi(he),ae.deals+=1}),o(Pe.map(he=>({month:he.month,gci:Math.round(he.gci),deals:he.deals})))},Vt=async(I,G,se)=>{const de=rg(G,se);let ce=Y.from("deals").select("*, lead_sources(*)").eq("status","closed").or(de);ce=Je(ce,I);const{data:le,error:Pe}=await ce;if(Pe){console.error("loadLeadSourcePerformance error",Pe);return}if(!le){u([]);return}const he=le.filter(ae=>NS(ae,Me.start,Me.end)),xe=new Map;he.forEach(ae=>{var ke;const fe=((ke=ae.lead_sources)==null?void 0:ke.name)||"Unknown",ue=xe.get(fe)||{deals:0,gci:0};ue.deals+=1,ue.gci+=qi(ae),xe.set(fe,ue)});const Oe=Array.from(xe.entries()).map(([ae,fe])=>({name:ae,deals:fe.deals,gci:Math.round(fe.gci)})).sort((ae,fe)=>fe.gci-ae.gci).slice(0,5);u(Oe)},xr=async I=>{let G=Y.from("deals").select("*").in("status",_S).order("close_date",{ascending:!0,nullsLast:!0}).limit(200);G=Je(G,I);const{data:se,error:de}=await G;if(de){console.error("loadUpcomingDeals error",de),f([]);return}f(se||[])},Wr=async I=>{let G=Y.from("deals").select("*").neq("status","closed").neq("status","dead").order("stage_entered_at",{ascending:!0});G=Je(G,I);const{data:se,error:de}=await G;if(de){console.error("loadStalledDeals error",de),m([]);return}const ce=(se||[]).filter(le=>E_(le.stage_entered_at,30)).slice(0,5);m(ce)},On=async()=>{if(e)try{const{data:I,error:G}=await Y.from("dashboard_layouts").select("widget_order").eq("user_id",e.id).maybeSingle();if(G){console.error("Error loading widget layout:",G);return}I&&I.widget_order?M(fZ(I.widget_order)):M([...nh])}catch(I){console.error("Error loading widget layout:",I)}},An=async I=>{if(e)try{const{error:G}=await Y.from("dashboard_layouts").upsert({user_id:e.id,widget_order:I,updated_at:new Date().toISOString()},{onConflict:"user_id"});G&&console.error("Error saving widget layout:",G)}catch(G){console.error("Error saving widget layout:",G)}},mt=I=>{const{active:G,over:se}=I;if(!se||G.id===se.id){oe(null);return}const de=D.indexOf(G.id),ce=D.indexOf(se.id),le=[...D],[Pe]=le.splice(de,1);le.splice(ce,0,Pe),M(le),An(le),oe(null)},Kr=()=>{window.location.href="/pipeline"},ea=()=>{window.location.href="/pipeline"},Ms=()=>{window.location.href="/luma"},Za=p.useMemo(()=>{const I=[];if(s.length>=2){const se=s.slice(-2);if(se.length===2){const[de,ce]=se;if(ce.gci>de.gci){const le=(ce.gci-de.gci)/de.gci*100;I.push(`You're on track to beat last month by ${le.toFixed(0)}% in GCI.`)}else if(ce.gci<de.gci&&de.gci>0){const le=(de.gci-ce.gci)/de.gci*100;I.push(`GCI is down ${le.toFixed(0)}% compared to last month.`)}}}const G=new Map;if(a.forEach(se=>{se.stalledCount>0&&G.set(se.name,se.stalledCount)}),G.size>0){const se=Array.from(G.entries()).sort((de,ce)=>ce[1]-de[1])[0];I.push(`${se[1]} deal${se[1]>1?"s have":" has"} been stalled in '${se[0]}' for 30+ days.`)}if(c.length>0){const se=c[0];I.push(`${se.name} is your top performing lead source with ${Tr(se.gci)} in closed deals.`)}return r.conversionRate>0&&(r.conversionRate>=.3?I.push(`Strong ${Vu(r.conversionRate)} conversion rate - keep up the momentum!`):r.conversionRate<.15&&I.push(`Conversion rate at ${Vu(r.conversionRate)} - consider focusing on lead quality.`)),d.length>0&&Fe>0&&I.push(`${d.length} deals projected to close soon with ${Tr(Fe)} potential GCI.`),I.length===0&&I.push("Keep adding deals to your pipeline to get personalized insights."),I},[r,a,c,s,d,Fe]);p.useEffect(()=>{if(g)return;const I=Date.now();!(O===0||I-O>=jS)&&S||(N(Za),A(I),j(null),E.current=!1)},[Za,g,O]);const yb=I=>{switch(I){case"luma-insights":return Bp();case"pipeline-health":return Up();case"alerts-actions":return W();case"monthly-momentum":return _e();case"deal-type-mix":return De();case"lead-source":return qe();case"upcoming-deals":return d.length>0?$e():null;default:return null}},Bp=()=>l.jsx("div",{className:"hig-card p-6 bg-gradient-to-br from-blue-50 to-white border-blue-200/60",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-12 h-12 rounded-2xl bg-[rgb(0,122,255)] flex items-center justify-center shadow-lg",children:l.jsx(ws,{className:"w-6 h-6 text-white",strokeWidth:2})})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"hig-text-heading",children:"Luma Insights"}),k&&l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[rgb(0,122,255)]"})]}),(_||w).length>0?l.jsx("div",{className:"space-y-3",children:(_||w).slice(0,3).map((I,G)=>l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[rgb(0,122,255)] mt-2 flex-shrink-0"}),l.jsx("p",{className:"text-[15px] text-gray-700 leading-relaxed",children:I})]},G))}):l.jsx("div",{className:"space-y-3",children:(S||Za).slice(0,3).map((I,G)=>l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[rgb(0,122,255)] mt-2 flex-shrink-0"}),l.jsx("p",{className:"text-[15px] text-gray-700 leading-relaxed",children:I})]},G))})]})]})}),Up=()=>l.jsxs("div",{className:"hig-card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"hig-text-heading",children:"Pipeline Health"}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:Zn}),l.jsx("div",{className:"text-xs text-gray-500",children:"Active Deals"})]})]}),a.length===0?l.jsx("div",{className:"text-sm text-gray-500",children:"No active deals in your pipeline yet. Add a deal to see health metrics here."}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-xl",children:l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Total Pipeline Value"}),l.jsx("span",{className:"text-lg font-semibold text-[rgb(0,122,255)]",children:Tr(Ja)})]})}),l.jsx("div",{className:"space-y-3",children:a.map(I=>{if(I.count===0)return null;const G=Zn>0?I.count/Zn*100:0;return l.jsxs("div",{className:"group p-4 rounded-xl border border-gray-200/60 hover:border-gray-300 hover:shadow-sm transition-all cursor-pointer",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Fh(I.color)}}),l.jsx("span",{className:"font-medium text-gray-900",children:I.name})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[I.stalledCount>0&&l.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-orange-50 rounded-full",children:[l.jsx(Io,{className:"w-3.5 h-3.5 text-orange-600",strokeWidth:2}),l.jsxs("span",{className:"text-xs font-medium text-orange-700",children:[I.stalledCount," stalled"]})]}),l.jsx("span",{className:"text-lg font-semibold text-gray-900",children:I.count})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-sm text-[rgb(0,122,255)] font-medium",children:Tr(I.expectedGCI)}),l.jsxs("div",{className:"text-xs text-gray-500",children:[G.toFixed(0),"% of pipeline"]})]})]},I.id)})}),Wi>0&&l.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200/60",children:l.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-orange-50 rounded-xl border border-orange-200/60",children:[l.jsx(Ta,{className:"w-4 h-4 text-orange-600",strokeWidth:2}),l.jsxs("span",{className:"text-sm font-medium text-orange-700",children:[Wi," deals need attention (30+ days)"]})]})})]})]}),W=()=>l.jsxs("div",{className:"hig-card p-6",children:[l.jsx("div",{className:"flex items-center justify-between mb-6",children:l.jsx("h2",{className:"hig-text-heading",children:"Alerts & Actions"})}),h.length>0?l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2 text-orange-600 mb-3",children:[l.jsx(Ta,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:"Stalled Deals Requiring Attention"})]}),l.jsx("div",{className:"space-y-2",children:h.slice(0,3).map(I=>l.jsx("div",{className:"p-3 bg-orange-50 rounded-xl border border-orange-200/60 hover:shadow-sm transition-all cursor-pointer",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium text-gray-900 text-sm",children:I.client_name}),l.jsx("div",{className:"text-xs text-gray-600 mt-1",children:I.property_address})]}),l.jsx("div",{className:"ml-3 px-2 py-1 bg-orange-100 rounded-lg",children:l.jsxs("div",{className:"text-xs text-orange-700 font-semibold",children:[vE(I.stage_entered_at),"d"]})})]})},I.id))})]}):l.jsx("div",{className:"mb-6 p-4 bg-green-50 rounded-xl border border-green-200/60",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ki,{className:"w-4 h-4 text-green-600",strokeWidth:2}),l.jsx("span",{className:"text-sm text-green-700",children:"All deals are moving smoothly!"})]})}),l.jsxs("div",{className:"pt-4 border-t border-gray-200/60",children:[l.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Quick Actions"}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{className:"hig-btn-secondary py-3 text-sm flex items-center justify-center gap-2",onClick:Kr,children:[l.jsx(UC,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"New Client"})]}),l.jsxs("button",{className:"hig-btn-secondary py-3 text-sm flex items-center justify-center gap-2",onClick:ea,children:[l.jsx(OC,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"New Task"})]}),l.jsxs("button",{className:"hig-btn-primary py-3 text-sm flex items-center justify-center gap-2",onClick:Ms,children:[l.jsx(ws,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Ask Luma"})]})]})]})]}),_e=()=>{const I=s.some(xe=>xe.gci>0||xe.deals>0),G=s.filter(xe=>xe.gci>0||xe.deals>0),se=G.length>0?G[G.length-1]:null,de=G.length>=2?G[G.length-2]:null,ce=se&&de&&de.gci>0?(se.gci-de.gci)/de.gci*100:null,le=G.reduce((xe,Oe)=>Oe.gci>((xe==null?void 0:xe.gci)??0)?Oe:xe,null),Pe=s.map((xe,Oe,ae)=>{const fe=Math.max(0,Oe-2),ue=ae.slice(fe,Oe+1),ke=ue.reduce((Ee,ze)=>Ee+ze.gci,0);return ue.length?ke/ue.length:xe.gci}),he=s.map((xe,Oe)=>({...xe,trend:Pe[Oe]??xe.gci}));return l.jsxs("div",{className:"hig-card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"hig-text-heading",children:"Monthly Momentum"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Track production pace and deal count across recent months."})]}),ce!==null&&l.jsxs("div",{className:`inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-semibold ${ce>=0?"bg-emerald-50 text-emerald-600":"bg-rose-50 text-rose-600"}`,children:[ce>=0?l.jsx(CC,{className:"w-3.5 h-3.5"}):l.jsx(C3,{className:"w-3.5 h-3.5"}),ce>=0?"+":"",ce.toFixed(1),"% vs prev. month"]})]}),I?l.jsxs(l.Fragment,{children:[l.jsx(o1,{width:"100%",height:180,children:l.jsxs(iZ,{data:he,children:[l.jsx(ly,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),l.jsx(dy,{dataKey:"month",tick:{fontSize:11},stroke:"#94a3b8"}),l.jsx(hy,{tick:{fontSize:11},stroke:"#94a3b8",tickFormatter:xe=>`$${(xe/1e3).toFixed(0)}K`}),l.jsx(Rj,{formatter:xe=>Tr(xe),labelFormatter:xe=>`Month: ${xe}`,contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb"}}),l.jsx(cy,{type:"monotone",dataKey:"gci",stroke:"#0ea5e9",strokeWidth:2,dot:{r:3,fill:"#0ea5e9"},activeDot:{r:5}}),l.jsx(cy,{type:"monotone",dataKey:"trend",stroke:"#ef4444",strokeWidth:1.5,dot:!1,strokeDasharray:"4 4"})]})}),l.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2 text-xs text-gray-600",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"h-1.5 w-6 rounded-full bg-[#0ea5e9]"}),l.jsx("span",{children:"Monthly GCI"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"h-1.5 w-6 rounded-full bg-[#ef4444]"}),l.jsx("span",{children:"3-month trailing mean"})]})]}),le&&l.jsxs("div",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:["Top month: ",le.month,"  ",Tr(le.gci)]})]})]}):l.jsx("div",{className:"text-sm text-gray-500",children:"No closed deals yet in this period. Close your first deal to surface momentum insights."})]})},De=()=>l.jsxs("div",{className:"hig-card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"hig-text-heading",children:"Deal Type Mix"}),l.jsx("div",{className:"text-xs text-gray-500",children:"Share of active deals by type & status"})]}),B.length>0?l.jsx("div",{className:"space-y-4",children:B.map(I=>l.jsxs("div",{className:"rounded-2xl border border-gray-100 p-4",children:[l.jsxs("div",{className:"flex items-start justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-base font-semibold text-gray-900",children:Vs[I.dealType]}),l.jsxs("p",{className:"text-sm text-gray-500",children:[I.count," active ",I.count===1?"deal":"deals"]}),l.jsxs("p",{className:"text-sm text-gray-500",children:[Tr(I.gci)," expected GCI"]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Vu(I.percentage)}),l.jsx("p",{className:"text-xs text-gray-500",children:"of pipeline"})]})]}),l.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:Object.entries(I.statusCounts).sort((G,se)=>se[1]-G[1]).map(([G,se])=>l.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-gray-100 px-3 py-1 text-xs font-medium text-gray-700",children:[l.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-gray-400"}),wS[G]??G.replace(/_/g," "),l.jsxs("span",{className:"text-gray-500",children:["(",se,")"]})]},G))})]},I.dealType))}):l.jsx("div",{className:"text-sm text-gray-500",children:"No active deals in your pipeline. Add a deal to see the deal-type mix."})]}),qe=()=>l.jsxs("div",{className:"hig-card p-6",children:[l.jsx("h2",{className:"hig-text-heading mb-6",children:"Lead Source Performance"}),c.length>0?l.jsx(o1,{width:"100%",height:250,children:l.jsxs(oZ,{data:c,layout:"vertical",children:[l.jsx(ly,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),l.jsx(dy,{type:"number",tick:{fontSize:12},stroke:"#6b7280",tickFormatter:I=>`$${(I/1e3).toFixed(0)}K`}),l.jsx(hy,{type:"category",dataKey:"name",tick:{fontSize:12},stroke:"#6b7280",width:100}),l.jsx(Rj,{formatter:I=>Tr(I),contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb"}}),l.jsx(ND,{dataKey:"gci",fill:"#0ea5e9",radius:[0,4,4,0]})]})}):l.jsx("div",{className:"text-sm text-gray-500",children:"No closed deals in this period, so lead source performance is not available yet."})]}),$e=()=>l.jsxs("div",{className:"hig-card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"hig-text-heading",children:"Forecasted Closings (Next 30 Days)"}),l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsx("span",{className:"font-medium text-gray-900",children:Tr(Fe)})," ","projected GCI"]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Qa.map(I=>l.jsxs("div",{className:"p-4 border border-gray-200/60 rounded-xl hover:shadow-sm hover:border-gray-300 transition-all cursor-pointer",children:[l.jsx("div",{className:"font-medium text-gray-900",children:I.client_name}),l.jsx("div",{className:"text-sm text-gray-600 mt-1",children:I.property_address}),l.jsxs("div",{className:"flex items-center justify-between mt-3",children:[l.jsx("div",{className:"text-sm font-semibold text-[rgb(0,122,255)]",children:Tr(qi(I))}),l.jsx(PC,{className:"w-4 h-4 text-gray-400",strokeWidth:2})]})]},I.id))})]});return g?l.jsx("div",{className:"flex items-center justify-center h-96",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[rgb(0,122,255)]"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_10px_40px_rgba(15,23,42,0.08)] p-6 space-y-6",children:[l.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-[0.25em]",children:Y6()}),l.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mt-1",children:q||C_((wt=e==null?void 0:e.user_metadata)==null?void 0:wt.name)}),l.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[r.closingNext7Days," deal",r.closingNext7Days===1?"":"s"," closing soon (next 7 days) "," ",Tr(Fe)," projected GCI over the next 30 days."]})]}),v&&l.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-gray-500 lg:ml-auto",children:[l.jsx("span",{className:"h-2 w-2 rounded-full bg-[var(--app-accent)] animate-pulse"}),"Updating"]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"rounded-2xl border border-blue-100/70 bg-blue-50/40 p-4",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-blue-600",children:"Pipeline Value"}),l.jsx("p",{className:"text-2xl font-semibold text-gray-900 mt-2",children:Tr(Ja)}),l.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Active stages only"})]}),l.jsxs("div",{className:"rounded-2xl border border-emerald-100/70 bg-emerald-50/40 p-4",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-emerald-600",children:"Projected GCI"}),l.jsx("p",{className:"text-2xl font-semibold text-gray-900 mt-2",children:Tr(Fe)}),l.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Next 30 days"})]}),l.jsxs("div",{className:"rounded-2xl border border-purple-100/70 bg-purple-50/40 p-4",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-purple-600",children:"Active Deals"}),l.jsx("p",{className:"text-2xl font-semibold text-gray-900 mt-2",children:Zn}),l.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Across pipeline"})]})]})]}),zi&&l.jsxs("div",{className:"rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_6px_30px_rgba(15,23,42,0.08)] p-4 space-y-4",children:[l.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Scope"}),l.jsx("p",{className:"text-sm text-gray-700",children:Rs})]}),l.jsx(GD,{options:Le,value:Ie,onChange:I=>Ot(I)})]}),ee.length>0&&l.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Agents"}),un&&l.jsx("button",{type:"button",onClick:yr,className:`rounded-full px-3 py-1 text-xs font-semibold transition ${Qn?"bg-[var(--app-accent)] text-white shadow-[0_8px_20px_rgba(0,122,255,0.25)]":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,children:"Focus On Me"})]}),l.jsx("div",{className:"flex items-center gap-1.5",children:!Pn&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:Xa,children:"Clear"})})]}),l.jsx("select",{multiple:!0,value:P,onChange:Li,className:"hig-input min-h-[72px] rounded-2xl border-gray-200 bg-white/90 text-sm",children:ee.map(I=>l.jsx("option",{value:I.id,children:I.label},I.id))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Pipeline Stage"}),R.length>0&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:()=>ie([]),children:"Clear"})]}),l.jsx("select",{multiple:!0,value:R,onChange:Fi,className:"hig-input min-h-[64px] mt-2",children:X.map(I=>l.jsx("option",{value:I.id,children:I.label},I.id))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Deal Type"}),ne.length>0&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:()=>Ne([]),children:"Clear"})]}),l.jsx("select",{multiple:!0,value:ne,onChange:Ui,className:"hig-input min-h-[64px] mt-2",children:H.map(I=>l.jsx("option",{value:I,children:Vs[I]??I.replace(/_/g," ")},I))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Lead Source"}),F.length>0&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:()=>ve([]),children:"Clear"})]}),l.jsx("select",{multiple:!0,value:F,onChange:Bi,className:"hig-input min-h-[64px] mt-2",children:te.map(I=>l.jsx("option",{value:I.id,children:I.name},I.id))})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"hig-card p-6",title:"Gross commission income from closed deals in the selected date range.",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"p-2 rounded-xl bg-blue-50",children:l.jsx(T3,{className:"w-5 h-5 text-[rgb(0,122,255)]",strokeWidth:2})}),l.jsx("span",{className:"text-sm text-gray-600",title:"Gross commission income from closed deals in the selected date range.",children:"Total GCI"})]}),l.jsx("div",{className:"text-3xl font-semibold text-gray-900",children:Tr(r.ytdGCI)})]}),l.jsxs("div",{className:"hig-card p-6",title:"Number of deals marked closed within the selected date range.",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"p-2 rounded-xl bg-green-50",children:l.jsx(ki,{className:"w-5 h-5 text-green-600",strokeWidth:2})}),l.jsx("span",{className:"text-sm text-gray-600",title:"Number of deals marked closed within the selected date range.",children:"Closed Deals"})]}),l.jsx("div",{className:"text-3xl font-semibold text-gray-900",children:r.ytdDeals})]}),l.jsxs("div",{className:"hig-card p-6",title:"Active deals scheduled to close in the next 7 days.",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"p-2 rounded-xl bg-orange-50",children:l.jsx(wc,{className:"w-5 h-5 text-orange-600",strokeWidth:2})}),l.jsx("span",{className:"text-sm text-gray-600",title:"Active deals scheduled to close in the next 7 days.",children:"Closing Soon (7d)"})]}),l.jsx("div",{className:"text-3xl font-semibold text-gray-900",children:r.closingNext7Days})]}),l.jsxs("div",{className:"hig-card p-6",title:"Closed deals divided by all deals created in the selected date range.",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"p-2 rounded-xl bg-gray-50",children:l.jsx(k3,{className:"w-5 h-5 text-gray-600",strokeWidth:2})}),l.jsx("span",{className:"text-sm text-gray-600",title:"Closed deals divided by all deals created in the selected date range.",children:"Conv. Rate"})]}),l.jsx("div",{className:"text-3xl font-semibold text-gray-900",children:Vu(r.conversionRate)})]})]}),l.jsx(Ih,{sensors:z,collisionDetection:O0,onDragEnd:mt,onDragStart:I=>oe(I.active.id),children:l.jsx($h,{items:D,strategy:Mh,children:l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:D.map(I=>{const G=yb(I);return G?l.jsx(pZ,{id:I,children:G},I):null})})})})]})}function YD({deal:e,netCommission:t,daysInStage:r,onClick:n,isDragging:a=!1}){const i=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s);return l.jsxs("div",{onClick:n,"data-deal-id":e.id,className:`rounded-2xl border border-gray-100/80 bg-white/95 p-4 shadow-[0_10px_30px_rgba(15,23,42,0.05)] ring-1 ring-black/5 cursor-move transition-transform duration-200 ${a?"opacity-60":"hover:-translate-y-0.5"}`,children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:e.client_name}),l.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[l.jsx(TC,{className:"w-3.5 h-3.5 mr-1 text-gray-400"}),l.jsx("span",{className:"truncate",children:e.property_address})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("span",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:"Expected"}),l.jsx("div",{className:"text-sm font-semibold text-gray-900",children:i(e.actual_sale_price||e.expected_sale_price)})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-xs text-gray-600",children:[l.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[l.jsx(Io,{className:"w-3.5 h-3.5 text-gray-400"}),l.jsxs("span",{children:[r,"d in stage"]})]}),e.lead_sources?l.jsxs("div",{className:"flex items-center gap-1 text-gray-500 justify-end",children:[l.jsx(BC,{className:"w-3.5 h-3.5 text-gray-400"}),l.jsx("span",{className:"truncate",children:e.lead_sources.name})]}):l.jsx("div",{})]}),l.jsxs("div",{className:"mt-4 flex items-center justify-between rounded-xl bg-gray-50 px-3 py-2 text-xs",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:"Net Commission"}),l.jsx("div",{className:"text-sm font-semibold text-emerald-600",children:i(t)})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:"Close Date"}),l.jsx("div",{className:"text-sm font-semibold text-gray-900",children:e.close_date?new Date(e.close_date).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""})]})]})]})}const gZ=["buyer","seller","buyer_and_seller","renter","landlord"],Pl={buyer:{label:"Buyer",accentDot:"bg-blue-400",labelClass:"text-blue-900",panelBg:"bg-blue-50/60",panelBorder:"border-blue-100"},seller:{label:"Seller",accentDot:"bg-emerald-400",labelClass:"text-emerald-900",panelBg:"bg-emerald-50/60",panelBorder:"border-emerald-100"},buyer_and_seller:{label:"Buyer & Seller",accentDot:"bg-purple-400",labelClass:"text-purple-900",panelBg:"bg-purple-50/60",panelBorder:"border-purple-100"},renter:{label:"Renter",accentDot:"bg-orange-400",labelClass:"text-orange-900",panelBg:"bg-orange-50/60",panelBorder:"border-orange-100"},landlord:{label:"Landlord",accentDot:"bg-teal-400",labelClass:"text-teal-900",panelBg:"bg-teal-50/60",panelBorder:"border-teal-100"}};function vZ({status:e,label:t,color:r,deals:n,onDealClick:a,calculateNetCommission:i,getDaysInStage:s}){const{setNodeRef:o,isOver:c}=dE({id:e}),u=Bh(r),d=gZ.map(f=>({type:f,label:Pl[f].label,accentDot:Pl[f].accentDot,labelClass:Pl[f].labelClass,deals:n.filter(h=>h.deal_type===f),panelBg:Pl[f].panelBg,panelBorder:Pl[f].panelBorder})).filter(f=>f.deals.length>0);return l.jsxs("div",{className:"flex-shrink-0 w-72 sm:w-80 flex flex-col",children:[l.jsxs("div",{className:"rounded-lg p-2.5 sm:p-3 mb-2 sm:mb-3 flex-shrink-0",style:{backgroundColor:u.bg,color:u.text},children:[l.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:t}),l.jsxs("span",{className:"text-xs sm:text-sm opacity-80",children:[n.length," deal",n.length!==1?"s":""]})]}),l.jsx("div",{ref:o,className:`flex-1 min-h-[600px] rounded-lg p-3 transition overflow-y-auto ${c?"bg-blue-50 ring-2 ring-blue-400":"bg-gray-50"}`,style:{minHeight:"600px"},children:n.length===0?l.jsx("div",{className:"h-full min-h-[560px] flex items-center justify-center",children:l.jsxs("div",{className:"text-center text-gray-400",children:[l.jsx("div",{className:"text-sm font-medium mb-1",children:"Drop deals here"}),l.jsx("div",{className:"text-xs",children:"Drag cards to this column"})]})}):l.jsx("div",{className:"space-y-6",children:d.map((f,h)=>l.jsxs("div",{className:`rounded-2xl border px-3 py-3 sm:px-4 sm:py-4 ${f.panelBg} ${f.panelBorder} ${h>0?"mt-1":""}`,children:[l.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${f.accentDot}`}),l.jsx("span",{className:`text-xs font-semibold ${f.labelClass}`,children:f.label})]}),l.jsxs("span",{className:"text-[11px] font-medium text-gray-400",children:[f.deals.length," deal",f.deals.length!==1?"s":""]})]}),l.jsx($h,{items:f.deals.map(m=>m.id),strategy:hE,children:l.jsx("div",{className:"mt-3 space-y-2 sm:space-y-3",children:f.deals.map(m=>l.jsx(yZ,{deal:m,onDealClick:a,calculateNetCommission:i,getDaysInStage:s},m.id))})})]},f.type))})})]})}function yZ({deal:e,onDealClick:t,calculateNetCommission:r,getDaysInStage:n}){const{attributes:a,listeners:i,setNodeRef:s,transform:o,transition:c,isDragging:u}=Lh({id:e.id,data:{type:"deal"}}),d={transform:Kn.Transform.toString(o),transition:c,zIndex:u?50:void 0};return l.jsx("div",{ref:s,style:d,...a,...i,children:l.jsx(YD,{deal:e,netCommission:r(e),daysInStage:n(e.stage_entered_at),onClick:()=>t(e),isDragging:u})})}const xZ={jan:1,january:1,feb:2,february:2,mar:3,march:3,apr:4,april:4,may:5,jun:6,june:6,jul:7,july:7,aug:8,august:8,sep:9,sept:9,september:9,oct:10,october:10,nov:11,november:11,dec:12,december:12};function kS(e){return e.toString().padStart(2,"0")}function bZ(e,t,r){const n=new Date(Date.UTC(e,t-1,r));return n.getUTCFullYear()===e&&n.getUTCMonth()+1===t&&n.getUTCDate()===r}function Ol(e,t,r){return bZ(e,t,r)?`${e}-${kS(t)}-${kS(r)}`:null}function wZ(e){return e<100?e>=70?1900+e:2e3+e:e}function CS(e){const t=e.toLowerCase();return xZ[t]||null}function _Z(e){if(!e)return null;const t=e.trim();if(!t)return null;const r=t.replace(/\s+/g," "),n=r.match(/^(\d{4})[\/-](\d{1,2})[\/-](\d{1,2})$/);if(n){const[c,u,d,f]=n;return Ol(parseInt(u,10),parseInt(d,10),parseInt(f,10))}const a=r.match(/^(\d{1,2})[\/\.\-](\d{1,2})[\/\.\-](\d{2}|\d{4})$/);if(a){const[c,u,d,f]=a,h=wZ(parseInt(f,10));return Ol(h,parseInt(u,10),parseInt(d,10))}const i=r.match(/^(\d{4})\.(\d{1,2})\.(\d{1,2})$/);if(i){const[c,u,d,f]=i;return Ol(parseInt(u,10),parseInt(d,10),parseInt(f,10))}const s=r.match(/^([A-Za-z]+)[\s\-](\d{1,2}),?[\s\-]*(\d{4})$/);if(s){const c=CS(s[1]);if(c)return Ol(parseInt(s[3],10),c,parseInt(s[2],10))}const o=r.match(/^(\d{1,2})[\s\-]([A-Za-z]+),?[\s\-]*(\d{4})$/);if(o){const c=CS(o[2]);if(c)return Ol(parseInt(o[3],10),c,parseInt(o[1],10))}return null}function jZ(e=[]){const t=["client_name","client_phone","client_email","property_address","city","state","zip","deal_type","lead_source_name","pipeline_status","expected_sale_price","actual_sale_price","gross_commission_rate","brokerage_split_rate","referral_out_rate","referral_in_rate","transaction_fee","close_date"].join(","),r=["New Lead","Contacted","Under Contract"],n=e.length>0?e:r,i=[{client_name:"John Smith",client_phone:"555-123-4567",client_email:"john.smith@example.com",property_address:"123 Main Street",city:"Austin",state:"TX",zip:"78701",deal_type:"buyer",lead_source_name:"Zillow",pipeline_status:n[Math.min(2,n.length-1)]||n[0],expected_sale_price:"450000",actual_sale_price:"",gross_commission_rate:"0.03",brokerage_split_rate:"0.20",referral_out_rate:"",referral_in_rate:"",transaction_fee:"500",close_date:""},{client_name:"Sarah Johnson",client_phone:"555-987-6543",client_email:"sarah.j@example.com",property_address:"456 Oak Avenue",city:"Dallas",state:"TX",zip:"75201",deal_type:"seller",lead_source_name:"Past Client",pipeline_status:n[n.length-1]||n[0],expected_sale_price:"525000",actual_sale_price:"520000",gross_commission_rate:"0.03",brokerage_split_rate:"0.20",referral_out_rate:"0.25",referral_in_rate:"",transaction_fee:"500",close_date:"2024-12-15"},{client_name:"Mike Davis",client_phone:"555-456-7890",client_email:"mike.davis@example.com",property_address:"789 Elm Street",city:"Houston",state:"TX",zip:"77001",deal_type:"renter",lead_source_name:"Referral",pipeline_status:n[Math.min(1,n.length-1)]||n[0],expected_sale_price:"2400",actual_sale_price:"",gross_commission_rate:"0.5",brokerage_split_rate:"0.20",referral_out_rate:"",referral_in_rate:"",transaction_fee:"0",close_date:""}].map(s=>Object.values(s).map(o=>{const c=String(o);return c.includes(",")||c.includes('"')||c.includes(`
`)?`"${c.replace(/"/g,'""')}"`:c}).join(",")).join(`
`);return`${t}
${i}`}function SZ(e,t){const r=new Blob([e],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),a=URL.createObjectURL(r);n.setAttribute("href",a),n.setAttribute("download",t),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function NZ(e){const t=[];let r=[],n="",a=!1;for(let i=0;i<e.length;i++){const s=e[i],o=e[i+1];a?s==='"'&&o==='"'?(n+='"',i++):s==='"'?a=!1:n+=s:s==='"'?a=!0:s===","?(r.push(n.trim()),n=""):s===`
`||s==="\r"?((n||r.length>0)&&(r.push(n.trim()),r.some(c=>c!=="")&&t.push(r),r=[],n=""),s==="\r"&&o===`
`&&i++):n+=s}return(n||r.length>0)&&(r.push(n.trim()),r.some(i=>i!=="")&&t.push(r)),t}function kZ(e,t=[]){const r=[];(!e.client_name||e.client_name.trim()==="")&&r.push("client_name is required"),(!e.lead_source_name||e.lead_source_name.trim()==="")&&r.push("lead_source_name is required");const n=["buyer","seller","buyer_and_seller","renter","landlord"];if((!e.deal_type||!n.includes(e.deal_type))&&r.push(`deal_type must be one of: ${n.join(", ")}`),!e.pipeline_status||e.pipeline_status.trim()==="")r.push("pipeline_status is required");else if(t.length>0){const a=e.pipeline_status.toLowerCase().trim();t.includes(a)||r.push(`pipeline_status must be one of your configured statuses: ${t.join(", ")}`)}return{valid:r.length===0,errors:r}}function CZ(e,t){const r={};return e.forEach((n,a)=>{const i=t[a]||"";r[n]=i}),r}function EZ({onClose:e,onSuccess:t}){const{user:r,roleInfo:n}=St(),a=(n==null?void 0:n.teamId)||null,[i,s]=p.useState(null),[o,c]=p.useState(!1),[u,d]=p.useState(null),f=async()=>{if(!r)return;const{data:g}=a?await Y.from("pipeline_statuses").select("name").eq("team_id",a).order("sort_order"):{data:null},{data:y}=g!=null&&g.length?{data:g}:await Y.from("pipeline_statuses").select("name").eq("user_id",r.id).order("sort_order"),v=(y==null?void 0:y.map(w=>w.name))||[],x=jZ(v);SZ(x,"deals-import-example.csv")},h=g=>{var v;const y=(v=g.target.files)==null?void 0:v[0];y&&y.type==="text/csv"?(s(y),d(null)):alert("Please select a valid CSV file")},m=async()=>{var g,y,v,x,w,b;if(!(!i||!r)){c(!0),d(null);try{const _=await i.text(),j=NZ(_);if(j.length<2){alert("CSV file must contain a header row and at least one data row"),c(!1);return}const S=j[0].map(M=>M.toLowerCase().trim()),N=j.slice(1),{data:k}=a?await Y.from("lead_sources").select("id, name").eq("team_id",a):{data:null},{data:C}=k!=null&&k.length?{data:k}:await Y.from("lead_sources").select("id, name").eq("user_id",r.id),E=new Map((C==null?void 0:C.map(M=>[M.name.toLowerCase(),M.id]))||[]),{data:O}=a?await Y.from("pipeline_statuses").select("id, name").eq("team_id",a):{data:null},{data:A}=O!=null&&O.length?{data:O}:await Y.from("pipeline_statuses").select("id, name").eq("user_id",r.id),q=new Map((A==null?void 0:A.map(M=>[M.name.toLowerCase(),M.id]))||[]),{data:J}=await Y.from("user_settings").select("default_brokerage_split_rate").eq("user_id",r.id).single(),Z=(J==null?void 0:J.default_brokerage_split_rate)||.2;let B=0,K=0;const D=[];for(let M=0;M<N.length;M++){const L=CZ(S,N[M]),oe=kZ(L,Array.from(q.keys()));if(!oe.valid){K++,D.push({row:M+2,errors:oe.errors});continue}const ee=E.get(L.lead_source_name.toLowerCase().trim());if(!ee){K++,D.push({row:M+2,errors:[`Lead source "${L.lead_source_name}" not found. Please create it in Lead Sources settings first.`]});continue}let ye=null,P="new_lead";if(L.pipeline_status&&L.pipeline_status.trim()!==""){ye=q.get(L.pipeline_status.toLowerCase().trim())||null;const X=L.pipeline_status.toLowerCase().trim();X==="closed"?P="closed":X==="dead"&&(P="dead")}let V=null;if(L.close_date&&L.close_date.trim()!==""&&(V=_Z(L.close_date),!V)){K++,D.push({row:M+2,errors:[`Close date "${L.close_date}" is not recognized. Use formats like YYYY-MM-DD, MM/DD/YYYY, or December 15, 2024.`]});continue}const te={user_id:r.id,client_name:L.client_name.trim(),client_phone:((g=L.client_phone)==null?void 0:g.trim())||null,client_email:((y=L.client_email)==null?void 0:y.trim())||null,property_address:((v=L.property_address)==null?void 0:v.trim())||null,city:((x=L.city)==null?void 0:x.trim())||null,state:((w=L.state)==null?void 0:w.trim())||null,zip:((b=L.zip)==null?void 0:b.trim())||null,deal_type:L.deal_type.trim(),lead_source_id:ee,pipeline_status_id:ye,status:P,expected_sale_price:L.expected_sale_price&&L.expected_sale_price.trim()!==""?Number(L.expected_sale_price):null,actual_sale_price:L.actual_sale_price&&L.actual_sale_price.trim()!==""?Number(L.actual_sale_price):null,gross_commission_rate:L.gross_commission_rate&&L.gross_commission_rate.trim()!==""?Number(L.gross_commission_rate):.03,brokerage_split_rate:L.brokerage_split_rate&&L.brokerage_split_rate.trim()!==""?Number(L.brokerage_split_rate):Z,referral_out_rate:L.referral_out_rate&&L.referral_out_rate.trim()!==""?Number(L.referral_out_rate):null,referral_in_rate:L.referral_in_rate&&L.referral_in_rate.trim()!==""?Number(L.referral_in_rate):null,transaction_fee:L.transaction_fee&&L.transaction_fee.trim()!==""?Number(L.transaction_fee):0,close_date:V,stage_entered_at:new Date().toISOString(),closed_at:P==="closed"?new Date().toISOString():null},{error:$}=await Y.from("deals").insert(te);$?(K++,D.push({row:M+2,errors:[$.message]})):B++}d({success:B,failed:K,errors:D})}catch(_){console.error("Import error:",_),alert("An error occurred while importing. Please check your file format.")}finally{c(!1)}}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Import Deals from CSV"}),l.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition",children:l.jsx(_s,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[l.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How to Import Deals"}),l.jsxs("ol",{className:"text-sm text-blue-800 space-y-1 list-decimal list-inside",children:[l.jsx("li",{children:"Download the example CSV file to see the required format"}),l.jsx("li",{children:"Fill in your deal data following the example structure"}),l.jsx("li",{children:"Save your file as CSV format"}),l.jsx("li",{children:"Upload your CSV file using the button below"})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Step 1: Download Example"}),l.jsxs("button",{onClick:f,className:"w-full px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg flex items-center justify-center space-x-2 transition",children:[l.jsx(D3,{className:"w-5 h-5"}),l.jsx("span",{children:"Download Example CSV"})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Step 2: Upload Your CSV"}),l.jsxs("label",{className:"block w-full px-4 py-8 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 cursor-pointer transition text-center",children:[l.jsx("input",{type:"file",accept:".csv",onChange:h,className:"hidden",disabled:o}),l.jsx(mv,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),l.jsx("div",{className:"text-sm text-gray-600",children:i?l.jsx("span",{className:"font-medium text-blue-600",children:i.name}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"font-medium text-blue-600",children:"Click to upload"})," ","or drag and drop"]})}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"CSV files only"})]})]}),i&&!u&&l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Step 3: Import"}),l.jsx("button",{onClick:m,disabled:o,className:"w-full px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg flex items-center justify-center space-x-2 transition",children:o?l.jsxs(l.Fragment,{children:[l.jsx(F3,{className:"w-5 h-5 animate-spin"}),l.jsx("span",{children:"Importing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(mv,{className:"w-5 h-5"}),l.jsx("span",{children:"Import Deals"})]})})]}),u&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Import Results"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-green-50 rounded-lg p-3 flex items-center space-x-3",children:[l.jsx(ki,{className:"w-6 h-6 text-green-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:u.success}),l.jsx("div",{className:"text-xs text-gray-600",children:"Successfully Imported"})]})]}),l.jsxs("div",{className:"bg-red-50 rounded-lg p-3 flex items-center space-x-3",children:[l.jsx(Ta,{className:"w-6 h-6 text-red-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-red-600",children:u.failed}),l.jsx("div",{className:"text-xs text-gray-600",children:"Failed"})]})]})]})]}),u.errors.length>0&&l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-h-64 overflow-y-auto",children:[l.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"Errors"}),l.jsx("div",{className:"space-y-2",children:u.errors.map((g,y)=>l.jsxs("div",{className:"text-sm",children:[l.jsxs("div",{className:"font-medium text-red-800",children:["Row ",g.row,":"]}),l.jsx("ul",{className:"list-disc list-inside text-red-700 ml-2",children:g.errors.map((v,x)=>l.jsx("li",{children:v},x))})]},y))})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{onClick:()=>{s(null),d(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Import Another File"}),l.jsx("button",{onClick:()=>{u.success>0&&t(),e()},className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition",children:"Done"})]})]})]}),l.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Required Fields"}),l.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[l.jsxs("li",{children:[l.jsx("span",{className:"font-medium",children:"client_name:"})," Client's full name"]}),l.jsxs("li",{children:[l.jsx("span",{className:"font-medium",children:"lead_source_name:"})," Must match one of your configured lead sources"]}),l.jsxs("li",{children:[l.jsx("span",{className:"font-medium",children:"deal_type:"})," buyer, seller, buyer_and_seller, renter, or landlord"]}),l.jsxs("li",{children:[l.jsx("span",{className:"font-medium",children:"pipeline_status:"})," Must match one of your configured pipeline statuses"]})]}),l.jsx("div",{className:"mt-3 text-xs text-gray-600",children:"Note: Property address and price are optional. Lead source and pipeline status names must match exactly or the import will fail."})]})]})]})})}const PZ=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),cd=e=>e==null||Number.isNaN(e)?"":PZ.format(e),ud=e=>e==null||Number.isNaN(e)?"":`${(e*100).toFixed(1)}%`,Gs=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},ES=e=>e?e.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "):"",No=[{id:"client",label:"Client",defaultVisible:!0,cellClassName:"px-4 py-4 align-top whitespace-nowrap cursor-pointer",render:({deal:e})=>l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.client_name||""}),e.client_email&&l.jsx("div",{className:"text-xs text-gray-500",children:e.client_email}),e.client_phone&&l.jsx("div",{className:"text-xs text-gray-500",children:e.client_phone})]})},{id:"clientEmail",label:"Client Email",cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>l.jsx("span",{className:e.client_email?"text-gray-700":"text-gray-400",children:e.client_email||""})},{id:"clientPhone",label:"Client Phone",cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>l.jsx("span",{className:e.client_phone?"text-gray-700":"text-gray-400",children:e.client_phone||""})},{id:"property",label:"Property",defaultVisible:!0,cellClassName:"px-4 py-4 text-sm text-gray-900 cursor-pointer min-w-[220px]",render:({deal:e})=>l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(TC,{className:"w-4 h-4 text-gray-400 flex-shrink-0 mt-0.5"}),l.jsxs("div",{children:[l.jsx("div",{children:e.property_address||""}),(e.city||e.state)&&l.jsx("div",{className:"text-xs text-gray-500",children:[e.city,e.state].filter(Boolean).join(", ")})]})]})},{id:"city",label:"City",cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>l.jsx("span",{className:e.city?"text-gray-700":"text-gray-400",children:e.city||""})},{id:"state",label:"State",cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>l.jsx("span",{className:e.state?"text-gray-700":"text-gray-400",children:e.state||""})},{id:"zip",label:"ZIP",cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>l.jsx("span",{className:e.zip?"text-gray-700":"text-gray-400",children:e.zip||""})},{id:"dealType",label:"Deal Type",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap cursor-pointer",render:({deal:e})=>{const t=e.deal_type==="buyer"?"bg-blue-100 text-blue-700":e.deal_type==="seller"?"bg-green-100 text-green-700":e.deal_type==="buyer_and_seller"?"bg-purple-100 text-purple-700":e.deal_type==="renter"?"bg-orange-100 text-orange-700":e.deal_type==="landlord"?"bg-teal-100 text-teal-700":"bg-gray-100 text-gray-700",r=e.deal_type==="buyer"?"Buyer":e.deal_type==="seller"?"Seller":e.deal_type==="buyer_and_seller"?"Both":e.deal_type==="renter"?"Renter":e.deal_type==="landlord"?"Landlord":ES(e.deal_type);return l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${t}`,children:r})}},{id:"pipelineStatus",label:"Pipeline Status",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap cursor-pointer",render:({deal:e,getStatusForDeal:t})=>{const r=t(e);if(!r)return l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-700",children:"No Status"});const n=Bh(r.color);return l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",style:{backgroundColor:n.bg,color:n.text},children:r.name})}},{id:"status",label:"System Status",cellClassName:"px-4 py-4 whitespace-nowrap cursor-pointer",render:({deal:e})=>l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-700",children:ES(e.status)})},{id:"leadSource",label:"Lead Source",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>{var t,r;return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(BC,{className:"w-4 h-4 text-gray-400"}),l.jsx("span",{className:(t=e.lead_sources)!=null&&t.name?"text-gray-900":"text-gray-400",children:((r=e.lead_sources)==null?void 0:r.name)||""})]})}},{id:"expectedPrice",label:"Expected Price",defaultVisible:!0,headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:cd(e.actual_sale_price||e.expected_sale_price)})},{id:"actualPrice",label:"Actual Price",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:cd(e.actual_sale_price)})},{id:"netCommission",label:"Net Commission",defaultVisible:!0,headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm font-semibold text-green-600 cursor-pointer text-right",render:({deal:e,calculateNetCommission:t})=>l.jsx("span",{children:cd(t(e))})},{id:"grossCommissionRate",label:"Commission %",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:ud(e.gross_commission_rate)})},{id:"brokerageSplitRate",label:"Broker Split %",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:ud(e.brokerage_split_rate)})},{id:"referralOutRate",label:"Referral Out %",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:ud(e.referral_out_rate)})},{id:"referralInRate",label:"Referral In %",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:ud(e.referral_in_rate)})},{id:"transactionFee",label:"Transaction Fee",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:cd(e.transaction_fee)})},{id:"daysInStage",label:"Days in Stage",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 cursor-pointer",render:({deal:e,getDaysInStage:t})=>l.jsxs("div",{className:"flex items-center justify-start gap-2",children:[l.jsx(Io,{className:"w-4 h-4 text-gray-400"}),l.jsxs("span",{children:[t(e.stage_entered_at)," days"]})]})},{id:"stageEnteredAt",label:"Stage Entered",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>l.jsx("span",{children:Gs(e.stage_entered_at)})},{id:"closeDate",label:"Close Date",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>l.jsx("span",{children:Gs(e.close_date)})},{id:"closedAt",label:"Closed On",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>l.jsx("span",{children:Gs(e.closed_at)})},{id:"nextTaskDescription",label:"Next Task",cellClassName:"px-4 py-4 text-sm text-gray-700 cursor-pointer min-w-[200px]",render:({deal:e})=>l.jsx("span",{className:e.next_task_description?"text-gray-700":"text-gray-400",children:e.next_task_description||""})},{id:"nextTaskDueDate",label:"Next Task Due",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>l.jsx("span",{children:Gs(e.next_task_due_date)})},{id:"createdAt",label:"Created",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(wc,{className:"w-4 h-4 text-gray-400"}),l.jsx("span",{children:Gs(e.created_at)})]})},{id:"updatedAt",label:"Updated",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>l.jsx("span",{children:Gs(e.updated_at)})}],PS="pipeline-table-columns-v1",OS=new Set(No.map(e=>e.id)),AS=new Map(No.map((e,t)=>[e.id,t])),ng=No.filter(e=>e.defaultVisible).map(e=>e.id),ag=e=>[...e].sort((t,r)=>(AS.get(t)??0)-(AS.get(r)??0));function OZ({deals:e,statuses:t,onDealClick:r,calculateNetCommission:n,getDaysInStage:a,onBulkDelete:i,onBulkEdit:s,onImportSuccess:o}){const[c,u]=p.useState(new Set),[d,f]=p.useState(!1),[h,m]=p.useState(""),[g,y]=p.useState(""),[v,x]=p.useState(!1),[w,b]=p.useState(!1),[_,j]=p.useState({column:"pipelineOrder",direction:"asc"}),[S,N]=p.useState(()=>{if(typeof window>"u")return ng;try{const P=window.localStorage.getItem(PS);if(P){const te=JSON.parse(P).filter($=>OS.has($));if(te.length>0)return ag(te)}}catch{}return ng});p.useEffect(()=>{typeof window>"u"||window.localStorage.setItem(PS,JSON.stringify(S))},[S]);const k=P=>{N(V=>V.includes(P)?V.length===1?V:V.filter(te=>te!==P):ag([...V,P]))},C=()=>N(ag(Array.from(OS))),E=()=>N(ng),O=No.filter(P=>S.includes(P.id)),A=O.length+1,q=P=>{const V=new Set(c);V.has(P)?V.delete(P):V.add(P),u(V)},J=()=>{c.size===L.length?u(new Set):u(new Set(L.map(P=>P.id)))},Z=()=>{i&&c.size>0&&(i(Array.from(c)),u(new Set))},B=()=>{s&&c.size>0&&h&&(s(Array.from(c),{pipeline_status_id:h}),u(new Set),f(!1),m(""))},K=p.useMemo(()=>new Map(t.map((P,V)=>[P.id,V])),[t]),D=P=>t.find(V=>V.id===P.pipeline_status_id),L=p.useMemo(()=>{let P=e;if(g.trim()){const T=g.toLowerCase(),H=Q=>Q?Q.toLowerCase().includes(T):!1;P=P.filter(Q=>{var F;return H(Q.client_name)||H(Q.property_address)||H(Q.city)||H(Q.state)||H(Q.client_email)||H(Q.client_phone)||H((F=Q.lead_sources)==null?void 0:F.name)})}const V=T=>{if(!T.stage_entered_at)return null;const H=new Date(T.stage_entered_at).getTime();return Number.isNaN(H)?null:Date.now()-H},te=(T,H)=>{var F;const Q=ve=>ve?ve.toLowerCase():null;switch(H){case"pipelineOrder":return K.get(T.pipeline_status_id||"")??9999;case"client":return Q(T.client_name);case"clientEmail":return Q(T.client_email);case"clientPhone":return Q(T.client_phone);case"property":return Q(T.property_address);case"city":return Q(T.city);case"state":return Q(T.state);case"zip":return Q(T.zip);case"dealType":return Q(T.deal_type);case"pipelineStatus":return K.get(T.pipeline_status_id||"")??9999;case"status":return Q(T.status);case"leadSource":return Q(((F=T.lead_sources)==null?void 0:F.name)||T.lead_source_name);case"expectedPrice":return T.expected_sale_price??null;case"actualPrice":return T.actual_sale_price??null;case"netCommission":return n(T);case"grossCommissionRate":return T.gross_commission_rate??null;case"brokerageSplitRate":return T.brokerage_split_rate??null;case"referralOutRate":return T.referral_out_rate??null;case"referralInRate":return T.referral_in_rate??null;case"transactionFee":return T.transaction_fee??null;case"daysInStage":return V(T);case"stageEnteredAt":return T.stage_entered_at?new Date(T.stage_entered_at).getTime():null;case"closeDate":return T.close_date?new Date(T.close_date).getTime():null;case"closedAt":return T.closed_at?new Date(T.closed_at).getTime():null;case"nextTaskDueDate":return T.next_task_due_date?new Date(T.next_task_due_date).getTime():null;case"nextTaskDescription":return Q(T.next_task_description);case"createdAt":return T.created_at?new Date(T.created_at).getTime():null;case"updatedAt":return T.updated_at?new Date(T.updated_at).getTime():null;default:return Q(T[H])}},$=(T,H)=>T==null?H==null?0:1:H==null?-1:typeof T=="number"&&typeof H=="number"?T-H:String(T).localeCompare(String(H));return[...P].sort((T,H)=>{const Q=_.column,F=te(T,Q),ve=te(H,Q),R=$(F,ve);if(R!==0)return R*(_.direction==="asc"?1:-1);const ie=new Date(H.created_at).getTime()-new Date(T.created_at).getTime();return _.direction==="asc"?ie:-ie})},[e,g,_,K,n]),oe=_.column==="pipelineOrder"?"pipelineStatus":_.column,ee=P=>{const V=P==="pipelineStatus"?"pipelineOrder":P;j(te=>te.column===V?{column:V,direction:te.direction==="asc"?"desc":"asc"}:{column:V,direction:"asc"})},ye=P=>oe===P||_.column==="pipelineOrder"&&P==="pipelineStatus"?l.jsx("span",{className:"text-[11px] font-semibold text-gray-500",children:_.direction==="asc"?"":""}):l.jsx(E3,{className:"w-3 h-3 text-gray-300"});return l.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[l.jsxs("div",{className:"p-4 border-b border-gray-200 space-y-3",children:[l.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(C0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"text",value:g,onChange:P=>y(P.target.value),placeholder:"Search by client, property, city, or lead source...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>b(P=>!P),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition whitespace-nowrap",children:[l.jsx(LC,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Columns"}),l.jsx("span",{className:"sm:hidden",children:"Cols"})]}),l.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-4 py-2 bg-[rgb(0,122,255)] hover:bg-[rgb(0,110,230)] text-white rounded-lg transition-colors whitespace-nowrap",children:[l.jsx(mv,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Import Deals"}),l.jsx("span",{className:"sm:hidden",children:"Import"})]})]})]}),w&&l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[l.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["Visible Columns (",S.length," of ",No.length,")"]}),l.jsx("p",{className:"text-xs text-gray-500",children:"Choose which deal fields appear in the table."})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:C,className:"px-3 py-1.5 text-xs font-medium text-gray-600 border border-gray-300 rounded-lg hover:bg-white",children:"Select All"}),l.jsx("button",{onClick:E,className:"px-3 py-1.5 text-xs font-medium text-gray-600 border border-gray-300 rounded-lg hover:bg-white",children:"Reset Defaults"}),l.jsx("button",{onClick:()=>b(!1),className:"px-3 py-1.5 text-xs font-medium text-blue-600",children:"Done"})]})]}),l.jsx("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:No.map(P=>l.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 bg-white border border-gray-200 rounded-lg px-3 py-2",children:[l.jsx("input",{type:"checkbox",checked:S.includes(P.id),onChange:()=>k(P.id),className:"text-blue-600 rounded"}),l.jsx("span",{children:P.label})]},P.id))})]})]}),c.size>0&&l.jsxs("div",{className:"bg-sky-50 border-b border-sky-200 px-4 py-3 flex items-center justify-between",children:[l.jsxs("div",{className:"text-sm font-medium text-sky-900",children:[c.size," deal",c.size>1?"s":""," selected"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>f(!d),className:"px-3 py-1.5 bg-white border border-sky-300 text-sky-700 rounded-lg hover:bg-sky-50 transition flex items-center gap-2 text-sm",children:[l.jsx(H3,{className:"w-4 h-4"}),"Update Status"]}),l.jsxs("button",{onClick:Z,className:"px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded-lg transition flex items-center gap-2 text-sm",children:[l.jsx(Ci,{className:"w-4 h-4"}),"Delete"]})]})]}),d&&c.size>0&&l.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center gap-3",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Update status to:"}),l.jsxs("select",{value:h,onChange:P=>m(P.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent text-sm",children:[l.jsx("option",{value:"",children:"Select status..."}),t.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]}),l.jsx("button",{onClick:B,disabled:!h,className:"px-4 py-1.5 bg-sky-600 hover:bg-sky-700 text-white rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Apply"}),l.jsx("button",{onClick:()=>{f(!1),m("")},className:"px-4 py-1.5 text-gray-600 hover:text-gray-800 text-sm",children:"Cancel"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-4 py-3 text-left",children:l.jsx("input",{type:"checkbox",checked:L.length>0&&c.size===L.length,onChange:J,className:"w-4 h-4 text-sky-600 border-gray-300 rounded focus:ring-sky-500 cursor-pointer"})}),O.map(P=>l.jsx("th",{scope:"col",className:`px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider ${P.headerClassName||""}`,children:l.jsxs("button",{type:"button",onClick:()=>ee(P.id),className:"flex items-center gap-1 text-left uppercase tracking-wider text-[11px]",children:[l.jsx("span",{children:P.label}),ye(P.id)]})},P.id))]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:A,className:"px-4 py-8 text-center text-sm text-gray-500",children:"No deals yet. Create your first deal to get started!"})}):L.map(P=>l.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap",onClick:V=>V.stopPropagation(),children:l.jsx("input",{type:"checkbox",checked:c.has(P.id),onChange:()=>q(P.id),className:"w-4 h-4 text-sky-600 border-gray-300 rounded focus:ring-sky-500 cursor-pointer"})}),O.map(V=>l.jsx("td",{className:V.cellClassName||"px-4 py-4 text-sm text-gray-900 cursor-pointer",onClick:()=>!V.disableClick&&r(P),children:V.render({deal:P,onDealClick:r,calculateNetCommission:n,getDaysInStage:a,getStatusForDeal:D})},V.id))]},P.id))})]})}),v&&l.jsx(EZ,{onClose:()=>x(!1),onSuccess:()=>{x(!1),o==null||o()}})]})}function AZ({dealId:e}){const{user:t}=St(),[r,n]=p.useState([]),[a,i]=p.useState(!0),[s,o]=p.useState(!1),[c,u]=p.useState(null),[d,f]=p.useState(!1),[h,m]=p.useState("");p.useEffect(()=>{g()},[e]);const g=async()=>{try{const{data:_,error:j}=await Y.from("deal_notes").select("*").eq("deal_id",e).order("created_at",{ascending:!1});if(j)throw j;const S=(_||[]).map(N=>{var k,C;return{...N,user_email:t==null?void 0:t.email,user_name:N.user_id===(t==null?void 0:t.id)?((k=t==null?void 0:t.user_metadata)==null?void 0:k.name)||((C=t==null?void 0:t.email)==null?void 0:C.split("@")[0])||"You":"Team Member"}});n(S)}catch(_){console.error("Error loading notes:",_)}finally{i(!1)}},y=async()=>{if(!(!t||!h.trim())){o(!0);try{if(c){const{error:_}=await Y.from("deal_notes").update({content:h,updated_at:new Date().toISOString()}).eq("id",c.id);if(_)throw _}else{const{error:_}=await Y.from("deal_notes").insert({deal_id:e,user_id:t.id,content:h});if(_)throw _}m(""),u(null),f(!1),g()}catch(_){console.error("Error saving note:",_)}finally{o(!1)}}},v=async _=>{if(confirm("Are you sure you want to delete this note?"))try{const{error:j}=await Y.from("deal_notes").delete().eq("id",_);if(j)throw j;g()}catch(j){console.error("Error deleting note:",j)}},x=_=>{u(_),m(_.content),f(!0)},w=()=>{u(null),m(""),f(!1)},b=_=>{const j=new Date(_),N=new Date().getTime()-j.getTime(),k=Math.floor(N/6e4),C=Math.floor(N/36e5),E=Math.floor(N/864e5);return k<1?"Just now":k<60?`${k}m ago`:C<24?`${C}h ago`:E<7?`${E}d ago`:j.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};return a?l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsx(Mt,{className:"w-6 h-6 animate-spin text-[rgb(0,122,255)]"})}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(K3,{className:"w-5 h-5 text-gray-600",strokeWidth:2}),l.jsx("h3",{className:"font-semibold text-gray-900",children:"Notes"}),l.jsxs("span",{className:"text-sm text-gray-500",children:["(",r.length,")"]})]}),!d&&l.jsxs("button",{onClick:()=>f(!0),className:"hig-btn-secondary text-sm py-2",children:[l.jsx(Da,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Add Note"})]})]}),d&&l.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200/60",children:[l.jsx("textarea",{value:h,onChange:_=>m(_.target.value),placeholder:"Write a note...",className:"hig-input min-h-[100px] resize-y",autoFocus:!0}),l.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[l.jsx("button",{onClick:w,className:"hig-btn-secondary text-sm py-2",disabled:s,children:"Cancel"}),l.jsx("button",{onClick:y,disabled:s||!h.trim(),className:"hig-btn-primary text-sm py-2",children:s?l.jsxs(l.Fragment,{children:[l.jsx(Mt,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving..."})]}):l.jsxs("span",{children:[c?"Update":"Add"," Note"]})})]})]}),r.length===0?l.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:"No notes yet. Add your first note to track important information."}):l.jsx("div",{className:"space-y-3",children:r.map(_=>l.jsxs("div",{className:"bg-white border border-gray-200/60 rounded-xl p-4 hover:shadow-sm transition-all",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"flex items-center gap-2 text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-gray-900",children:_.user_name}),l.jsx("span",{className:"text-gray-400",children:""}),l.jsx("span",{className:"text-gray-500",children:b(_.created_at)}),_.updated_at!==_.created_at&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-gray-400",children:""}),l.jsx("span",{className:"text-gray-500 text-xs",children:"edited"})]})]})}),_.user_id===(t==null?void 0:t.id)&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:()=>x(_),className:"p-1.5 text-gray-600 hover:text-[rgb(0,122,255)] hover:bg-blue-50 rounded-lg transition",title:"Edit note",children:l.jsx(IC,{className:"w-4 h-4",strokeWidth:2})}),l.jsx("button",{onClick:()=>v(_.id),className:"p-1.5 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete note",children:l.jsx(Ci,{className:"w-4 h-4",strokeWidth:2})})]})]}),l.jsx("p",{className:"text-[15px] text-gray-700 whitespace-pre-wrap leading-relaxed",children:_.content})]},_.id))})]})}function XD({deal:e,onClose:t,onDelete:r}){const{user:n,roleInfo:a}=St(),i=(a==null?void 0:a.teamId)||null,[s,o]=p.useState(!1),[c,u]=p.useState(!1),[d,f]=p.useState([]),[h,m]=p.useState([]),[g,y]=p.useState([]),[v,x]=p.useState(""),[w,b]=p.useState(""),[_,j]=p.useState(!1),[S,N]=p.useState(null),[k,C]=p.useState(""),[E,O]=p.useState(""),[A,q]=p.useState((e==null?void 0:e.status)==="dead"),[J,Z]=p.useState((e==null?void 0:e.archived_reason)||""),[B,K]=p.useState({client_name:(e==null?void 0:e.client_name)||"",client_phone:(e==null?void 0:e.client_phone)||"",client_email:(e==null?void 0:e.client_email)||"",property_address:(e==null?void 0:e.property_address)||"",city:(e==null?void 0:e.city)||"",state:(e==null?void 0:e.state)||"",zip:(e==null?void 0:e.zip)||"",deal_type:(e==null?void 0:e.deal_type)||"buyer",lead_source_id:(e==null?void 0:e.lead_source_id)||"",pipeline_status_id:(e==null?void 0:e.pipeline_status_id)||"",expected_sale_price:(e==null?void 0:e.expected_sale_price)||"",actual_sale_price:(e==null?void 0:e.actual_sale_price)||"",gross_commission_rate:(e==null?void 0:e.gross_commission_rate)||.03,brokerage_split_rate:(e==null?void 0:e.brokerage_split_rate)||.2,referral_out_rate:(e==null?void 0:e.referral_out_rate)||"",referral_in_rate:(e==null?void 0:e.referral_in_rate)||"",transaction_fee:(e==null?void 0:e.transaction_fee)||"",close_date:(e==null?void 0:e.close_date)||""});p.useEffect(()=>{M(),L(),e&&(oe(),D()),q((e==null?void 0:e.status)==="dead"),Z((e==null?void 0:e.archived_reason)||"")},[e,i,n==null?void 0:n.id]),p.useEffect(()=>{A&&K(z=>({...z,pipeline_status_id:""}))},[A]);const D=async()=>{if(!e)return;const{data:z,error:Le}=await Y.from("deal_notes").select("content").eq("deal_id",e.id).ilike("content","Archive reason:%").order("created_at",{ascending:!1}).limit(1);if(!Le&&z&&z.length){const He=(z[0].content||"").replace(/^Archive reason:\s*/i,"").trim();Z(He)}},M=async()=>{if(!n)return;const{data:z,error:Le}=i?await Y.from("lead_sources").select("*").eq("team_id",i).order("name"):{data:null,error:null};if(Le)return;const{data:Ce}=z!=null&&z.length?{data:z}:await Y.from("lead_sources").select("*").eq("user_id",n.id).order("name");Ce&&f(Ce)},L=async()=>{if(!n)return;const{data:z,error:Le}=i?await Y.from("pipeline_statuses").select("*").eq("team_id",i).order("sort_order"):{data:null,error:null};if(Le)return;const{data:Ce}=z!=null&&z.length?{data:z}:await Y.from("pipeline_statuses").select("*").eq("user_id",n.id).order("sort_order");Ce&&(m(Ce),!e&&Ce.length>0&&!B.pipeline_status_id&&K(He=>({...He,pipeline_status_id:Ce[0].id})))},oe=async()=>{if(!e||!n)return;const{data:z}=await Y.from("tasks").select("*").eq("deal_id",e.id).eq("user_id",n.id);if(z){const Le=z.sort((Ce,He)=>!Ce.due_date&&!He.due_date?0:Ce.due_date?He.due_date?new Date(Ce.due_date).getTime()-new Date(He.due_date).getTime():1:-1);y(Le)}},ee=z=>{K({...B,lead_source_id:z});const Le=d.find(Ce=>Ce.id===z);Le&&!e&&K(Ce=>({...Ce,lead_source_id:z,brokerage_split_rate:Le.brokerage_split_rate}))},ye=async z=>{if(z.preventDefault(),!n)return;o(!0);const Le=h.find(At=>At.id===B.pipeline_status_id);if(!B.lead_source_id){alert("Please select a lead source"),o(!1);return}if(A&&!J){alert("Please choose an archive reason."),o(!1);return}const Ce={...B,user_id:n.id,lead_source_id:B.lead_source_id,pipeline_status_id:A?null:B.pipeline_status_id||null,status:A?"dead":Le?(Le.slug||Le.name||"new_lead").toLowerCase():"new_lead",expected_sale_price:Number(B.expected_sale_price)||0,actual_sale_price:B.actual_sale_price?Number(B.actual_sale_price):null,referral_out_rate:B.referral_out_rate?Number(B.referral_out_rate):null,referral_in_rate:B.referral_in_rate?Number(B.referral_in_rate):null,transaction_fee:Number(B.transaction_fee)||0,close_date:B.close_date||null,closed_at:A?new Date().toISOString():(e==null?void 0:e.closed_at)||null,archived_reason:A?J:null};let He=(e==null?void 0:e.id)||null;if(e)await Y.from("deals").update(Ce).eq("id",e.id),He=e.id;else{const{data:At,error:Ya}=await Y.from("deals").insert(Ce).select("id").single();!Ya&&(At!=null&&At.id)&&(He=At.id)}A&&He&&await Y.from("deal_notes").insert({deal_id:He,user_id:n.id,content:`Archive reason: ${J}`}),o(!1),t()},P=async()=>{!v.trim()||!e||!n||(await Y.from("tasks").insert({deal_id:e.id,user_id:n.id,title:v,due_date:w||null,completed:!1}),x(""),b(""),j(!1),oe())},V=async(z,Le)=>{await Y.from("tasks").update({completed:!Le}).eq("id",z),oe()},te=z=>{N(z.id),C(z.title),O(z.due_date||"")},$=async()=>{!k.trim()||!S||(await Y.from("tasks").update({title:k,due_date:E||null}).eq("id",S),N(null),C(""),O(""),oe())},X=async z=>{await Y.from("tasks").delete().eq("id",z),oe()},T=()=>{N(null),C(""),O("")},H=async()=>{e&&(o(!0),await Y.from("deals").delete().eq("id",e.id),o(!1),r&&r(),t())},Q=()=>{if(!e)return;const z={client_name:B.client_name,client_email:B.client_email,client_phone:B.client_phone,property_address:B.property_address,city:B.city,state:B.state,zip:B.zip,deal_type:B.deal_type,expected_sale_price:B.expected_sale_price,actual_sale_price:B.actual_sale_price},Le=new URLSearchParams({source:"pipelineiq",...Object.entries(z).reduce((Ce,[He,At])=>(At!=null&&At!==""&&(Ce[He]=String(At)),Ce),{})});window.open(`/contractscribe?${Le.toString()}`,"_blank","noopener,noreferrer")},ve=(Number(B.actual_sale_price)||Number(B.expected_sale_price)||0)*B.gross_commission_rate,R=ve*(1-B.brokerage_split_rate),ie=Number(B.referral_out_rate)||0,ne=Number(B.referral_in_rate)||0,Ne=Number(B.transaction_fee)||0,Ie=ie?R*(1-ie):R,Me=(ne?Ie*(1+ne):Ie)-Ne;return l.jsxs(l.Fragment,{children:[c&&l.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-[60]",children:l.jsxs("div",{className:"hig-card max-w-md w-full p-6",children:[l.jsx("h3",{className:"hig-text-heading mb-2",children:"Delete Deal"}),l.jsx("p",{className:"hig-text-body text-gray-600 mb-6",children:"Are you sure you want to delete this deal? This action cannot be undone."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>u(!1),className:"hig-btn-secondary",children:"Cancel"}),l.jsx("button",{onClick:H,disabled:s,className:"bg-[rgb(255,59,48)] hover:bg-red-600 active:bg-red-700 text-white font-medium px-5 py-2 rounded-lg transition-colors duration-150 disabled:opacity-40 text-[15px] min-h-[44px] inline-flex items-center justify-center gap-2",children:s?"Deleting...":"Delete"})]})]})}),l.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"hig-card max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200/60 px-6 py-5 flex justify-between items-center backdrop-blur-md bg-white/95",children:[l.jsx("h2",{className:"hig-text-display",children:e?"Edit Deal":"New Deal"}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-150",children:l.jsx(_s,{className:"w-5 h-5 text-gray-600",strokeWidth:2})})]}),l.jsxs("form",{onSubmit:ye,className:"p-6 space-y-8",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"hig-text-heading mb-4",children:"Client Information"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Client Name *"}),l.jsx("input",{type:"text",value:B.client_name,onChange:z=>K({...B,client_name:z.target.value}),className:"hig-input",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Phone"}),l.jsx("input",{type:"tel",value:B.client_phone,onChange:z=>K({...B,client_phone:z.target.value}),className:"hig-input"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Email"}),l.jsx("input",{type:"email",value:B.client_email,onChange:z=>K({...B,client_email:z.target.value}),className:"hig-input"})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"hig-text-heading mb-4",children:"Property Details"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"hig-label",children:"Property Address"}),l.jsx("input",{type:"text",value:B.property_address,onChange:z=>K({...B,property_address:z.target.value}),className:"hig-input",placeholder:"e.g., 123 Main St"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"City"}),l.jsx("input",{type:"text",value:B.city,onChange:z=>K({...B,city:z.target.value}),className:"hig-input"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"State"}),l.jsx("input",{type:"text",value:B.state,onChange:z=>K({...B,state:z.target.value}),className:"hig-input",maxLength:2,placeholder:"CA"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"ZIP"}),l.jsx("input",{type:"text",value:B.zip,onChange:z=>K({...B,zip:z.target.value}),className:"hig-input",maxLength:10})]})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"hig-text-heading mb-4",children:"Deal Configuration"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Deal Type *"}),l.jsxs("select",{value:B.deal_type,onChange:z=>K({...B,deal_type:z.target.value}),className:"hig-input",children:[l.jsx("option",{value:"buyer",children:"Buyer"}),l.jsx("option",{value:"seller",children:"Seller"}),l.jsx("option",{value:"buyer_and_seller",children:"Buyer & Seller"}),l.jsx("option",{value:"renter",children:"Renter"}),l.jsx("option",{value:"landlord",children:"Landlord"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Lead Source *"}),l.jsxs("select",{value:B.lead_source_id,onChange:z=>ee(z.target.value),className:"hig-input",required:!0,children:[l.jsx("option",{value:"",children:"Select a source"}),d.map(z=>l.jsxs("option",{value:z.id,children:[z.name," (",(z.brokerage_split_rate*100).toFixed(0),"% split)"]},z.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Pipeline Status"}),l.jsxs("select",{value:B.pipeline_status_id,onChange:z=>K({...B,pipeline_status_id:z.target.value}),className:"hig-input",children:[l.jsx("option",{value:"",children:"Select a status"}),h.map(z=>l.jsx("option",{value:z.id,children:z.name},z.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Close Date"}),l.jsx("input",{type:"date",value:B.close_date,onChange:z=>K({...B,close_date:z.target.value}),className:"hig-input"})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"hig-text-heading mb-4",children:"Financial Details"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Expected Sale Price *"}),l.jsx("input",{type:"number",value:B.expected_sale_price,onChange:z=>K({...B,expected_sale_price:z.target.value}),className:"hig-input",placeholder:"500,000",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Actual Sale Price"}),l.jsx("input",{type:"number",value:B.actual_sale_price,onChange:z=>K({...B,actual_sale_price:z.target.value}),className:"hig-input",placeholder:"505,000"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Commission Rate (%)"}),l.jsx("input",{type:"number",step:"0.01",value:B.gross_commission_rate*100,onChange:z=>K({...B,gross_commission_rate:parseFloat(z.target.value)/100||0}),className:"hig-input"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Brokerage Split (% to broker)"}),l.jsx("input",{type:"number",step:"0.01",value:B.brokerage_split_rate*100,onChange:z=>K({...B,brokerage_split_rate:parseFloat(z.target.value)/100||0}),className:"hig-input"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Transaction Fee"}),l.jsx("input",{type:"number",value:B.transaction_fee,onChange:z=>K({...B,transaction_fee:z.target.value}),className:"hig-input",placeholder:"500"})]})]})]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 border border-gray-200/60",children:[l.jsx("h3",{className:"hig-text-heading mb-4",children:"Commission Breakdown"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"hig-text-body text-gray-600",children:"Gross Commission"}),l.jsxs("span",{className:"hig-text-body font-medium",children:["$",ve.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"hig-text-body text-gray-600",children:"After Brokerage Split"}),l.jsxs("span",{className:"hig-text-body font-medium",children:["$",R.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"hig-text-body text-gray-600",children:"Transaction Fee"}),l.jsxs("span",{className:"hig-text-body font-medium text-gray-500",children:["-$",Ne.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),l.jsx("div",{className:"hig-divider my-3"}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"hig-text-heading",children:"Net to Agent"}),l.jsxs("span",{className:"text-xl font-semibold text-[rgb(52,199,89)]",children:["$",Me.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),e&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(pv,{className:"w-5 h-5 text-gray-600",strokeWidth:2}),l.jsx("h3",{className:"font-semibold text-gray-900",children:"Tasks"}),l.jsxs("span",{className:"text-sm text-gray-500",children:["(",g.length,")"]})]}),!_&&l.jsxs("button",{type:"button",onClick:()=>j(!0),className:"hig-btn-secondary text-sm py-2",children:[l.jsx(Da,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Add Task"})]})]}),_&&l.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200/60",children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{id:"task-title-input",type:"text",value:v,onChange:z=>x(z.target.value),placeholder:"Task description...",className:"hig-input",autoFocus:!0,onKeyPress:z=>{z.key==="Enter"&&(z.preventDefault(),P())}}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("input",{type:"date",value:w,onChange:z=>b(z.target.value),placeholder:"Due date (optional)",className:"hig-input flex-1"}),l.jsx("button",{type:"button",onClick:()=>{j(!1),x(""),b("")},className:"hig-btn-secondary text-sm py-2",children:"Cancel"}),l.jsx("button",{type:"button",onClick:P,disabled:!v.trim(),className:"hig-btn-primary text-sm py-2",children:l.jsx("span",{children:"Add Task"})})]})]})}),l.jsx("div",{className:"space-y-2",children:g.map(z=>{const Le=z.due_date&&!z.completed&&new Date(z.due_date)<new Date,Ce=z.due_date&&!z.completed&&new Date(z.due_date).toDateString()===new Date().toDateString();return S===z.id?l.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200/60",children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{type:"text",value:k,onChange:He=>C(He.target.value),placeholder:"Task description...",className:"hig-input",autoFocus:!0,onKeyPress:He=>{He.key==="Enter"&&(He.preventDefault(),$())}}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("input",{type:"date",value:E,onChange:He=>O(He.target.value),placeholder:"Due date (optional)",className:"hig-input flex-1"}),l.jsx("button",{type:"button",onClick:T,className:"hig-btn-secondary text-sm py-2",children:"Cancel"}),l.jsx("button",{type:"button",onClick:$,disabled:!k.trim(),className:"hig-btn-primary text-sm py-2",children:"Save"})]})]})},z.id):l.jsx("div",{className:"group flex items-center p-3 bg-white border border-gray-200/60 rounded-xl hover:shadow-sm transition-all",children:l.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[l.jsx("button",{type:"button",onClick:()=>V(z.id,z.completed),className:`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-all duration-150 ${z.completed?"bg-[rgb(52,199,89)] border-[rgb(52,199,89)]":"border-gray-300 hover:border-[rgb(52,199,89)]"}`,children:z.completed&&l.jsx(_c,{className:"w-3 h-3 text-white",strokeWidth:2.5})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("span",{className:z.completed?"line-through text-gray-500 hig-text-body":"text-gray-900 hig-text-body",children:z.title}),z.due_date&&l.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[l.jsx(wc,{className:"w-3.5 h-3.5 text-gray-400",strokeWidth:2}),l.jsxs("span",{className:`hig-text-caption ${Le?"text-[rgb(255,59,48)] font-medium":Ce?"text-[rgb(255,149,0)] font-medium":z.completed?"text-gray-400":"text-gray-500"}`,children:[Le?"Overdue: ":Ce?"Due today: ":"",new Date(z.due_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[l.jsx("button",{type:"button",onClick:()=>te(z),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",title:"Edit task",children:l.jsx(IC,{className:"w-4 h-4 text-gray-600",strokeWidth:2})}),l.jsx("button",{type:"button",onClick:()=>X(z.id),className:"p-1.5 hover:bg-red-50 rounded-lg transition-colors",title:"Delete task",children:l.jsx(Ci,{className:"w-4 h-4 text-red-600",strokeWidth:2})})]})]})},z.id)})})]}),e&&l.jsx("div",{className:"pt-8 border-t border-gray-200/60",children:l.jsx(AZ,{dealId:e.id})}),l.jsx("div",{className:"rounded-xl border border-gray-200/70 bg-white/90 p-5 shadow-sm",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-gray-100 border border-gray-200",children:l.jsx(pv,{className:"h-5 w-5 text-gray-700"})}),l.jsxs("div",{className:"flex-1 space-y-3",children:[l.jsx("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-gray-900",children:"Archive this deal (Closed Lost)"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Use when a deal falls through, goes MIA, or stops responding. Well remove it from the active pipeline and track it for KPIs."})]})}),l.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3 md:items-center",children:[l.jsxs("label",{className:"inline-flex items-center gap-2 md:justify-self-start",children:[l.jsx("span",{className:"text-sm text-gray-700",children:"Archived"}),l.jsx("input",{type:"checkbox",checked:A,onChange:z=>q(z.target.checked),className:"h-5 w-5 rounded border-gray-300 text-[rgb(0,122,255)] focus:ring-[rgb(0,122,255)]"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"hig-label mb-1",children:"Archive reason"}),l.jsxs("select",{value:J,onChange:z=>Z(z.target.value),className:"hig-input",disabled:!A,children:[l.jsx("option",{value:"",children:"Select a reason"}),l.jsx("option",{value:"No Response / Ghosted",children:"No Response / Ghosted"}),l.jsx("option",{value:"Client Not Ready / Timeline Changed",children:"Client Not Ready / Timeline Changed"}),l.jsx("option",{value:"Chose Another Agent",children:"Chose Another Agent"}),l.jsx("option",{value:"Financing Didnt Work Out",children:"Financing Didnt Work Out"}),l.jsx("option",{value:"Deal Fell Through",children:"Deal Fell Through"})]})]})]})]})]})}),l.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200/60",children:[l.jsx("div",{className:"flex gap-3",children:e&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{type:"button",onClick:Q,className:"hig-btn-secondary gap-2",children:[l.jsx(OC,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Generate Offer"})]}),l.jsxs("button",{type:"button",onClick:()=>u(!0),className:"bg-white hover:bg-red-50 active:bg-red-100 text-[rgb(255,59,48)] font-medium px-5 py-2 rounded-lg border border-red-200 transition-colors duration-150 text-[15px] min-h-[44px] inline-flex items-center justify-center gap-2",children:[l.jsx(Ci,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Delete"})]})]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"hig-btn-secondary",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:s,className:"hig-btn-primary",children:s?"Saving...":e?"Update Deal":"Create Deal"})]})]})]})]})})]})}const Lc=[{name:"Snow",value:"#F9FAFB"},{name:"Pearl",value:"#F3F4F6"},{name:"Mist",value:"#E5E7EB"},{name:"Silver Fog",value:"#D1D5DB"},{name:"Ice Blue",value:"#E8F1FF"},{name:"Cloud Blue",value:"#D6E7FF"},{name:"Sky Wash",value:"#C3DBFF"},{name:"Pale Azure",value:"#AECFFF"},{name:"Soft Blue",value:"#98C3FF"},{name:"Bluebell",value:"#87B6F9"},{name:"Foggy Indigo",value:"#AEB8D9"},{name:"Lavender Mist",value:"#F2EDFF"},{name:"Lilac Whisper",value:"#E8E2FF"},{name:"Soft Violet",value:"#D8D0FF"},{name:"Periwinkle Light",value:"#C7C3FF"},{name:"Muted Orchid",value:"#B7B2F2"},{name:"Barely Purple",value:"#DDD6F6"},{name:"Blush Tint",value:"#FFE8F3"},{name:"Pink Dew",value:"#FFD6E8"},{name:"Rosewater",value:"#F9C8DB"},{name:"Petal Pink",value:"#F5B8CD"},{name:"Soft Berry",value:"#E8A7C3"},{name:"Muted Magenta",value:"#D3A6C9"},{name:"Rose Mist",value:"#FFE5E5"},{name:"Pale Coral",value:"#FFD4D4"},{name:"Soft Clay",value:"#F5B8B8"},{name:"Muted Red",value:"#EFA9A9"},{name:"Peach Wash",value:"#FFF1E6"},{name:"Apricot Mist",value:"#FFE3CC"},{name:"Soft Tangerine",value:"#FFD1AE"},{name:"Warm Peach",value:"#F7C39C"},{name:"Muted Orange",value:"#E7B690"},{name:"Sunhaze",value:"#FFF8DD"},{name:"Lemon Tint",value:"#FFF2BB"},{name:"Buttercream",value:"#FFECA1"},{name:"Golden Mist",value:"#FFE38C"},{name:"Muted Amber",value:"#F6D67C"},{name:"Mint Wash",value:"#E6FFF5"},{name:"Soft Mint",value:"#CFF9EA"},{name:"Pale Green",value:"#B7F0D9"},{name:"Seafoam",value:"#A1E8CC"},{name:"Soft Teal",value:"#8EDCC0"},{name:"Muted Green",value:"#7BCDB1"},{name:"Aqua Mist",value:"#E5FAFF"},{name:"Arctic Blue",value:"#CDF2FA"},{name:"Icy Teal",value:"#B5E8F0"},{name:"Soft Cyan",value:"#A1DEEA"},{name:"Muted Teal",value:"#8DCFD9"},{name:"Sandstone",value:"#F7EFE6"},{name:"Driftwood",value:"#EADFD2"},{name:"Clay Neutral",value:"#DDCEBF"},{name:"Soft Taupe",value:"#CFC1B2"}],Zs=Lc[0].value;function TS({value:e,onChange:t}){const r=e?Fh(e):Zs,n=r.toLowerCase(),a=Lc.find(i=>i.value.toLowerCase()===n);return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-gray-200/70 bg-white/80 p-4 shadow-inner",children:[l.jsxs("div",{className:"relative flex h-12 w-12 items-center justify-center rounded-2xl border border-white/40 shadow",children:[l.jsx("span",{className:"absolute inset-0 rounded-2xl",style:{backgroundColor:r}}),l.jsx(_c,{className:"relative h-5 w-5 text-white drop-shadow",strokeWidth:2.5})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Selected color"}),l.jsx("span",{className:"text-xs text-gray-500",children:a?"From palette":"Custom"})]})]}),l.jsx("div",{className:"grid grid-cols-6 gap-3 sm:grid-cols-8",children:Lc.map(i=>{const s=i.value.toLowerCase()===n;return l.jsxs("button",{type:"button",onClick:()=>t(i.value),className:`relative h-10 w-10 rounded-2xl border transition focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--app-accent)]/40 ${s?"border-[var(--app-accent)] shadow-[0_8px_18px_rgba(15,23,42,0.15)]":"border-white/70 shadow-inner hover:border-gray-300"}`,style:{backgroundColor:i.value},"aria-label":`${i.name} color`,children:[s&&l.jsx(_c,{className:"absolute inset-0 m-auto h-4 w-4 text-white drop-shadow",strokeWidth:2.5}),l.jsx("span",{className:"sr-only",children:i.name})]},i.value)})})]})}const TZ=e=>Lc[e%Lc.length].value,DZ={"new lead":"#E8F1FF",contacted:"#AECFFF","warm lead":"#FFF1E6","hot lead":"#FFD1AE","showing scheduled":"#98C3FF","offer submitted":"#87B6F9",inspection:"#B7F0D9",appraisal:"#C3DBFF","under contract":"#8EDCC0",financing:"#FFE38C","title review":"#8DCFD9","clear to close":"#CFF9EA",closed:"#E6FFF5",lost:"#FFE5E5",lead:"#C3DBFF","in progress":"#98C3FF",pending:"#8EDCC0","advanced transaction pipeline":"#E5FAFF"},ig=(e,t)=>{const r=DZ[e.trim().toLowerCase()];return r||TZ(t)},IZ=e=>`pipeline-status-color-overrides:${e}`;function JD(){const{user:e,roleInfo:t}=St(),[r,n]=p.useState([]),[a,i]=p.useState(!0),[s,o]=p.useState(null),[c,u]=p.useState({}),d=p.useRef({}),f=(t==null?void 0:t.teamId)||null,h=e?IZ(e.id):null,m=p.useCallback(()=>{if(typeof window>"u"||!h)return{};try{const C=window.localStorage.getItem(h);if(!C)return{};const E=JSON.parse(C);if(E&&typeof E=="object")return E}catch(C){console.warn("Failed to read status color overrides",C)}return{}},[h]),g=p.useCallback(C=>{typeof window>"u"||!h||window.localStorage.setItem(h,JSON.stringify(C))},[h]),y=p.useCallback((C,E)=>{var A;const O=(A=C.color)==null?void 0:A.trim();return O||ig(C.name,E)},[]),v=p.useCallback(async()=>{if(!e){n([]),i(!1);return}i(!0);try{const{data:C,error:E}=f?await Y.from("pipeline_statuses").select("*").eq("team_id",f).order("sort_order",{ascending:!0}):{data:null,error:null};if(E)throw E;const O=!!(C!=null&&C.length),{data:A,error:q}=O?{data:null,error:null}:await Y.from("pipeline_statuses").select("*").eq("user_id",e.id).order("sort_order",{ascending:!0});if(q)throw q;const J=O?C:A;if(!J)throw new Error("Failed to load pipeline statuses");const Z=J||[],B=[],K=m(),D={},M=Z.map((L,oe)=>{const ee=y(L,oe);D[L.id]=ee;const ye=K[L.id];return!L.color&&ee&&B.push({id:L.id,color:ee}),{...L,color:ye||ee}});B.length>0&&await Promise.all(B.map(L=>Y.from("pipeline_statuses").update({color:L.color}).eq("id",L.id))),d.current=D,u(K),n(M),o(null)}catch(C){console.error("Error loading pipeline statuses:",C),o(C instanceof Error?C.message:"Failed to load statuses")}finally{i(!1)}},[e,f,m,y]);return p.useEffect(()=>{v()},[v]),{statuses:r,loading:a,error:s,colorOverrides:c,addStatus:async(C,E)=>{if(!e)return;const O=Math.max(...r.map(B=>B.sort_order),0),A=C.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),q=(E==null?void 0:E.trim())||ig(C,O),{data:J,error:Z}=await Y.from("pipeline_statuses").insert({user_id:e.id,team_id:f,name:C,slug:A,sort_order:O+1,color:q,is_default:!1}).select().single();if(Z)throw Z;return await v(),J},updateStatus:async(C,E)=>{const{error:O}=await Y.from("pipeline_statuses").update(E).eq("id",C);if(O)throw O;await v()},deleteStatus:async C=>{const{data:E}=await Y.from("deals").select("id",{count:"exact",head:!0}).eq("pipeline_status_id",C);if(E&&E.count>0)throw new Error("Cannot delete status with active deals. Please reassign deals first.");const{error:O}=await Y.from("pipeline_statuses").delete().eq("id",C);if(O)throw O;await v()},reorderStatuses:async C=>{const E=C.map((O,A)=>({id:O.id,sort_order:A+1}));for(const O of E)await Y.from("pipeline_statuses").update({sort_order:O.sort_order}).eq("id",O.id);await v()},applyTemplate:async C=>{if(!e)return;const{error:E}=await Y.rpc("apply_pipeline_template",{p_user_id:e.id,p_template_name:C});if(E)throw E;f&&await Y.from("pipeline_statuses").update({team_id:f}).eq("user_id",e.id).is("team_id",null);const{error:O}=await Y.rpc("migrate_user_deals_to_pipeline_statuses",{p_user_id:e.id});O&&console.error("Error migrating deals:",O),await v()},createCustomWorkflow:async C=>{if(!e)return;const E=C.map(B=>B.trim()).filter(B=>B.length>0);if(E.length===0)throw new Error("Please provide at least one stage.");const O=f?{team_id:f}:{user_id:e.id},{error:A}=await Y.from("pipeline_statuses").delete().match(O);if(A)throw A;const q=E.map((B,K)=>({user_id:e.id,team_id:f,name:B,slug:B.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),sort_order:K+1,color:ig(B,K),is_default:K===0})),{error:J}=await Y.from("pipeline_statuses").insert(q);if(J)throw J;const{error:Z}=await Y.rpc("migrate_user_deals_to_pipeline_statuses",{p_user_id:e.id});Z&&console.error("Error migrating deals after custom workflow:",Z),await v()},reload:v,setPersonalStatusColor:(C,E)=>{if(!h)return;const A={...m(),[C]:E};g(A),u(A),n(q=>q.map(J=>J.id===C?{...J,color:E}:J))},clearPersonalStatusColor:C=>{if(!h)return;const E=m();if(!(C in E))return;const{[C]:O,...A}=E;g(A),u(A),n(q=>q.map(J=>{if(J.id!==C)return J;const Z=d.current[C]||y(J,(J.sort_order||1)-1);return{...J,color:Z}}))}}}function RZ(){const[e,t]=p.useState([]),[r,n]=p.useState(!0);return p.useEffect(()=>{(async()=>{const{data:i,error:s}=await Y.from("pipeline_templates").select("*").eq("is_system",!0).order("name");!s&&i&&t(i),n(!1)})()},[]),{templates:e,loading:r}}const MZ={"Basic Pipeline":{description:"Simple 6-stage pipeline ideal for new agents",stages:["New Lead","Contacted","Showing Scheduled","Offer Submitted","Under Contract","Closed"]},"Advanced Transaction Pipeline":{description:"Comprehensive 13-stage pipeline covering all transaction phases",stages:["New Lead","Warm Lead","Hot Lead","Showing Scheduled","Offer Submitted","Inspection","Appraisal","Under Contract","Financing","Title Review","Clear to Close","Closed","Lost"]},Minimalist:{description:"Streamlined 4-stage pipeline for quick deal tracking",stages:["Lead","In Progress","Pending","Closed"]}};function QD({onClose:e,onSelect:t,onCreateCustomWorkflow:r,title:n="Choose Your Pipeline Workflow"}){const{templates:a}=RZ(),[i,s]=p.useState(null),[o,c]=p.useState(!1),[u,d]=p.useState(["New Lead","Contacted","Closed"]),[f,h]=p.useState(""),[m,g]=p.useState(!1),[y,v]=p.useState(null),x=async()=>{if(o){if(!r){v("Custom workflows are not supported here.");return}if(u.length<2){v("Add at least two stages to create a custom workflow.");return}g(!0),v(null);try{await r(u),e()}catch(w){console.error("Error creating custom workflow:",w),v(w instanceof Error?w.message:"Failed to create workflow")}finally{g(!1)}return}if(i){g(!0),v(null);try{await t(i),e()}catch(w){console.error("Error applying template:",w),v(w instanceof Error?w.message:"Failed to apply template")}finally{g(!1)}}};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:l.jsxs("div",{className:"app-surface w-full max-w-4xl max-h-[92vh] overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 px-6 py-5",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-500",children:"Pipeline"}),l.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:n}),l.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Start from a proven template or create a custom workflow tailored to your team."})]}),l.jsx("button",{onClick:e,className:"rounded-full border border-gray-200/80 bg-white p-2 text-gray-500 hover:text-gray-900",children:l.jsx(_s,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-5 space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Recommended workflows"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Choose the pipeline structure that mirrors your current process."})]}),r&&l.jsxs("button",{onClick:()=>c(w=>!w),className:"inline-flex items-center gap-2 rounded-2xl border border-white/60 bg-white px-4 py-2 text-sm font-semibold text-gray-700 shadow-[0_2px_8px_rgba(15,23,42,0.08)] transition hover:border-[var(--app-accent)]/30 hover:text-[var(--app-accent)]",children:[l.jsx(Da,{className:"h-4 w-4"}),"Custom workflow"]})]}),o?l.jsxs("div",{className:"rounded-2xl border border-[var(--app-border)] bg-white/90 p-5 shadow-inner",children:[l.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Custom workflow"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Define the stages that reflect your teams unique process. Drag to reorder later in settings."}),l.jsxs("div",{className:"mt-4 space-y-3",children:[u.map((w,b)=>l.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-gray-100 bg-gray-50 px-3 py-2",children:[l.jsxs("span",{className:"text-xs font-semibold text-gray-500",children:["Stage ",b+1]}),l.jsx("span",{className:"flex-1 text-sm font-medium text-gray-900",children:w}),l.jsx("button",{onClick:()=>d(_=>_.filter((j,S)=>S!==b)),className:"text-gray-400 hover:text-red-500",type:"button",children:l.jsx(Ci,{className:"h-4 w-4"})})]},w)),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{value:f,onChange:w=>h(w.target.value),placeholder:"Add a stage...",className:"hig-input flex-1 text-sm"}),l.jsx("button",{onClick:()=>{f.trim()&&(d(w=>[...w,f.trim()]),h(""))},className:"hig-btn-primary",type:"button",children:"Add"})]})]})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.filter(w=>w.name!=="Buyer/Seller Split Pipeline").map(w=>{const b=MZ[w.name],_=i===w.name;return l.jsxs("button",{onClick:()=>s(w.name),className:`rounded-2xl border px-5 py-4 text-left transition ${_?"border-[var(--app-accent)]/40 bg-[var(--app-surface-muted)] shadow-[inset_0_0_0_1px_rgba(10,132,255,0.08)]":"border-white/70 bg-white hover:border-[var(--app-accent)]/30"}`,children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:w.name}),l.jsx("p",{className:"text-sm text-gray-600",children:(b==null?void 0:b.description)||w.description})]}),_&&l.jsx("span",{className:"inline-flex h-7 w-7 items-center justify-center rounded-full bg-[var(--app-accent)] text-white",children:l.jsx(_c,{className:"h-4 w-4"})})]}),b&&l.jsxs("div",{className:"mt-3 space-y-1 text-xs text-gray-500",children:[l.jsxs("p",{className:"font-semibold",children:["Stages (",b.stages.length,")"]}),l.jsx("div",{className:"flex flex-wrap gap-1.5",children:b.stages.map((j,S)=>l.jsx("span",{className:"rounded-full border border-gray-200/70 px-2 py-0.5 text-[11px] text-gray-600",children:j},S))})]})]},w.id)})}),y&&l.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:y})]}),l.jsxs("div",{className:"flex items-center justify-between border-t border-gray-100 bg-gray-50/60 px-6 py-4",children:[l.jsx("button",{onClick:e,disabled:m,className:"text-sm font-medium text-gray-600 hover:text-gray-900",children:"Cancel"}),l.jsx("button",{onClick:x,disabled:o&&u.length<2||!o&&!i||m,className:"hig-btn-primary min-w-[140px] justify-center",children:m?"Applying":o?"Create Workflow":"Apply Template"})]})]})})}const $Z="rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_1px_2px_rgba(15,23,42,0.08)]",LZ="inline-flex items-center rounded-full border border-gray-200/70 bg-white px-3 py-1.5 text-sm font-medium text-gray-600 transition",DS="inline-flex items-center rounded-full border px-3 py-1.5 text-xs font-semibold transition",FZ=["buyer","seller","buyer_and_seller","renter","landlord"],IS={buyer:{label:"Buyer",accentClass:"bg-blue-50 text-blue-700 border-blue-200",matches:["buyer","buyer_and_seller"]},seller:{label:"Seller",accentClass:"bg-emerald-50 text-emerald-700 border-emerald-200",matches:["seller","buyer_and_seller"]},buyer_and_seller:{label:"Buyer & Seller",accentClass:"bg-purple-50 text-purple-700 border-purple-200",matches:["buyer_and_seller"]},renter:{label:"Renter",accentClass:"bg-orange-50 text-orange-700 border-orange-200",matches:["renter"]},landlord:{label:"Landlord",accentClass:"bg-teal-50 text-teal-700 border-teal-200",matches:["landlord"]}};function BZ(){const{user:e,roleInfo:t}=St(),{statuses:r,loading:n,applyTemplate:a,createCustomWorkflow:i}=JD(),[s,o]=p.useState([]),[c,u]=p.useState(!0),[d,f]=p.useState(null),[h,m]=p.useState(!1),[g,y]=p.useState(null),[v,x]=p.useState(!1),[w,b]=p.useState("kanban"),[_,j]=p.useState("all"),[S,N]=m2(),k=S.get("newDeal"),C=p.useMemo(()=>{const $=new Map;return r.forEach(X=>{$.set(X.id,X)}),s.forEach(X=>{X.pipeline_statuses&&!$.has(X.pipeline_statuses.id)&&$.set(X.pipeline_statuses.id,X.pipeline_statuses)}),Array.from($.values()).sort((X,T)=>{const H=X.sort_order??999,Q=T.sort_order??999;return H===Q?X.name.localeCompare(T.name):H-Q})},[r,s]),E=Ah(Oh(rl,{activationConstraint:{distance:5}}));p.useEffect(()=>{A()},[e,t]),p.useEffect(()=>{if(k){y(null),m(!0);const $=new URLSearchParams(S);$.delete("newDeal"),N($,{replace:!0})}},[k,S,N]);const O=p.useCallback(async $=>{const X=s.find(Q=>Q.id===$);if(X){y(X),m(!0);return}const{data:T,error:H}=await Y.from("deals").select("*").eq("id",$).maybeSingle();!H&&T&&(y(T),m(!0))},[s]);p.useEffect(()=>{const $=S.get("dealId");$&&O($)},[S,s,O]),p.useEffect(()=>{!n&&C.length===0&&x(!0)},[n,C]);const A=async()=>{if(!(!e||!t)){u(!0);try{const $=async()=>{if(!t.teamId)return[];const{data:F,error:ve}=await Y.from("user_teams").select("user_id").eq("team_id",t.teamId);return ve?(console.error("Error loading team members",ve),[]):(F||[]).map(R=>R.user_id)};let X=[];switch(t.globalRole){case"admin":{X=await la(t);break}case"sales_manager":{const F=await $();X=F.length?F:await la(t);break}case"team_lead":{const F=await $();X=F.length?F:[t.userId];break}default:X=[t.userId]}let T=Y.from("deals").select(`
          *,
          lead_sources (*),
          pipeline_statuses (*)
        `).order("created_at",{ascending:!1});X.length===1?T=T.eq("user_id",X[0]):X.length>1&&(T=T.in("user_id",X));const{data:H,error:Q}=await T;if(Q)console.error("Error loading deals",Q),o([]);else{const F=new Date().getFullYear(),ve=(H||[]).filter(R=>{if(R.status!=="closed")return!0;const ie=R.close_date||R.closed_at;return ie?new Date(ie).getFullYear()>=F:!1});o(ve)}}catch($){console.error("Error resolving visible users",$),o([])}finally{u(!1)}}},q=$=>{const X=s.find(T=>T.id===$.active.id);f(X||null)},J=async $=>{const{active:X,over:T}=$;if(f(null),!T)return;const H=X.id,Q=s.find(Ie=>Ie.id===H);if(!Q)return;const F=s.find(Ie=>Ie.id===T.id),ve=F?F.pipeline_status_id:T.id;if(!ve)return;if(ve===Q.pipeline_status_id){F&&F.id!==Q.id&&F.deal_type===Q.deal_type&&o(Ie=>{const Ot=Ie.findIndex(z=>z.id===Q.id),Me=Ie.findIndex(z=>z.id===F.id);return Ot===-1||Me===-1?Ie:Rh(Ie,Ot,Me)});return}const R=C.find(Ie=>Ie.id===ve);if(!R)return;const ie={pipeline_status_id:ve,status:(R.slug||R.name||"").toLowerCase(),stage_entered_at:new Date().toISOString()};(typeof R.slug=="string"&&R.slug.length>0?R.slug.toLowerCase():(R.name||"").toLowerCase()).includes("closed")&&(ie.closed_at=new Date().toISOString());const{error:Ne}=await Y.from("deals").update(ie).eq("id",H);Ne||A()},Z=$=>{y($),m(!0)},B=()=>{m(!1),y(null);const $=new URLSearchParams(S);$.has("dealId")&&($.delete("dealId"),N($,{replace:!0})),A()},K=(_==="all"?s:s.filter($=>IS[_].matches.includes($.deal_type))).filter($=>$.status!=="dead"),D=$=>K.filter(X=>X.pipeline_status_id===$),M=$=>{const H=($.actual_sale_price||$.expected_sale_price)*$.gross_commission_rate*(1-$.brokerage_split_rate);return($.referral_out_rate?H*(1-$.referral_out_rate):H)-$.transaction_fee},L=$=>{const X=new Date($),H=new Date().getTime()-X.getTime();return Math.floor(H/(1e3*60*60*24))},oe=async $=>{if(!confirm(`Are you sure you want to delete ${$.length} deal${$.length>1?"s":""}?`))return;const{error:X}=await Y.from("deals").delete().in("id",$);X||A()},ee=async($,X)=>{const T={};if(X.pipeline_status_id){T.pipeline_status_id=X.pipeline_status_id,T.stage_entered_at=new Date().toISOString();const Q=C.find(F=>F.id===X.pipeline_status_id);(Q==null?void 0:Q.name.toLowerCase())==="closed"?(T.status="closed",T.closed_at=new Date().toISOString()):(Q==null?void 0:Q.name.toLowerCase())==="dead"&&(T.status="dead")}const{error:H}=await Y.from("deals").update(T).in("id",$);H||A()},ye=$=>{const X=$.filter(ve=>ve.deal_type==="buyer"||ve.deal_type==="buyer_and_seller").length,T=$.filter(ve=>ve.deal_type==="seller"||ve.deal_type==="buyer_and_seller").length,H=$.filter(ve=>ve.deal_type==="renter").length,Q=$.filter(ve=>ve.deal_type==="landlord").length,F=$.reduce((ve,R)=>ve+M(R),0);return{buyers:X,sellers:T,renters:H,landlords:Q,totalCommission:F}},P=$=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format($),V=ye(K),te=[{label:"Buyers",value:V.buyers,display:V.buyers.toString()},{label:"Sellers",value:V.sellers,display:V.sellers.toString()},{label:"Renters",value:V.renters,display:V.renters.toString()},{label:"Landlords",value:V.landlords,display:V.landlords.toString()},{label:"Net Commission",value:V.totalCommission,display:P(V.totalCommission)}].filter($=>$.value>0);return c||n?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):l.jsxs("div",{className:"space-y-6 min-h-full",children:[l.jsxs("div",{className:`${$Z} p-6 space-y-4`,children:[l.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-[0.25em]",children:"Pipeline"}),l.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mt-1",children:"Active deals workspace"}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Monitor every opportunity, shift deals between stages, and launch new work without leaving this view."})]}),l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[l.jsxs("div",{className:"inline-flex items-center rounded-full border border-gray-200/80 bg-white/80 p-1 shadow-inner",children:[l.jsxs("button",{onClick:()=>b("kanban"),className:`inline-flex items-center gap-2 rounded-full px-3 py-1.5 text-sm font-medium ${w==="kanban"?"bg-[var(--app-accent)] text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[l.jsx($3,{className:"w-4 h-4"}),l.jsx("span",{children:"Kanban"})]}),l.jsxs("button",{onClick:()=>b("table"),className:`inline-flex items-center gap-2 rounded-full px-3 py-1.5 text-sm font-medium ${w==="table"?"bg-[var(--app-accent)] text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[l.jsx(DC,{className:"w-4 h-4"}),l.jsx("span",{children:"Table"})]})]}),l.jsxs("button",{onClick:()=>{y(null),m(!0)},className:"inline-flex items-center justify-center gap-2 rounded-2xl border border-white/50 bg-[var(--app-accent)] px-4 py-2 text-sm font-semibold text-white shadow-[0_8px_16px_rgba(15,23,42,0.12)] transition hover:bg-[var(--app-accent-dark,#0052cc)]",children:[l.jsx(Da,{className:"w-4 h-4"}),l.jsx("span",{children:"New Deal"})]})]})]}),te.length>0&&l.jsx("div",{className:"flex flex-wrap gap-3",children:te.map($=>l.jsxs("div",{className:`${LZ} gap-2`,children:[l.jsx("span",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:$.label}),l.jsx("span",{className:"font-semibold text-gray-900",children:$.display})]},$.label))}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Deal types"}),_!=="all"&&l.jsx("button",{onClick:()=>j("all"),className:"text-xs font-medium text-[var(--app-accent)] hover:underline",children:"Reset"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:()=>j("all"),className:`${DS} ${_==="all"?"bg-gray-900 text-white border-gray-900 shadow-sm":"border-gray-200/70 bg-white text-gray-600 hover:text-gray-900"}`,children:"All deals"}),FZ.map($=>{const X=IS[$],T=_===$;return l.jsx("button",{onClick:()=>j($),className:`${DS} ${T?`${X.accentClass} shadow-sm ring-1 ring-black/5`:"border-gray-200/70 bg-white text-gray-600 hover:text-gray-900"}`,children:X.label},$)})]})]})]}),C.length===0?l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsxs("div",{className:"text-center max-w-md",children:[l.jsx(Nh,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Configure Your Pipeline"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Choose a template to get started with your pipeline workflow"}),l.jsx("button",{onClick:()=>x(!0),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition",children:"Choose Pipeline Template"})]})}):w==="kanban"?l.jsxs(Ih,{sensors:E,collisionDetection:PL,onDragStart:q,onDragEnd:J,children:[l.jsx("div",{className:"pb-2 overflow-x-auto",children:l.jsx("div",{className:"flex gap-3 sm:gap-4 pb-4 px-2 sm:px-6 min-w-max",children:C.map($=>l.jsx(vZ,{status:$.id,label:$.name,color:$.color,deals:D($.id),onDealClick:Z,calculateNetCommission:M,getDaysInStage:L},$.id))})}),l.jsx(fE,{children:d?l.jsx(YD,{deal:d,netCommission:M(d),daysInStage:L(d.stage_entered_at),onClick:()=>{},isDragging:!0}):null})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsx(OZ,{deals:K,statuses:C,onDealClick:Z,calculateNetCommission:M,getDaysInStage:L,onBulkDelete:oe,onBulkEdit:ee,onImportSuccess:A})}),h&&l.jsx(XD,{deal:g,onClose:B,onDelete:B}),v&&l.jsx(QD,{onClose:()=>x(!1),onSelect:a,onCreateCustomWorkflow:i})]})}const UZ=["under_contract","pending","closed"],Al={buyer:"Buyer",seller:"Seller",buyer_and_seller:"Buyer & Seller",renter:"Renter",landlord:"Landlord"},zZ=["No Response / Ghosted","Client Not Ready / Timeline Changed","Chose Another Agent","Financing Didnt Work Out","Deal Fell Through"];function WZ(){const{user:e,roleInfo:t}=St(),[,r]=p.useTransition(),[n,a]=p.useState(new Date().getFullYear()),[i,s]=p.useState({closedDeals:0,totalVolume:0,totalGCI:0,avgSalePrice:0,avgCommission:0,buyerDeals:0,sellerDeals:0,avgDaysToClose:0}),[o,c]=p.useState([]),[u,d]=p.useState([]),[f,h]=p.useState({count:0,gci:0}),[m,g]=p.useState(0),[y,v]=p.useState(!0),[x,w]=p.useState(!1),[b,_]=p.useState([]),[j,S]=p.useState([]),[N,k]=p.useState([]),[C,E]=p.useState([]),[O,A]=p.useState([]),[q,J]=p.useState([]),[Z,B]=p.useState([]),[K,D]=p.useState([]),[M,L]=p.useState({total:0,reasons:[]}),[oe,ee]=p.useState([]),ye=p.useMemo(()=>j.length?[...j].sort().join("|"):"",[j]),P=p.useMemo(()=>q.length?[...q].sort().join("|"):"",[q]),V=p.useMemo(()=>Z.length?[...Z].sort().join("|"):"",[Z]),te=p.useMemo(()=>K.length?[...K].sort().join("|"):"",[K]),$=!!e&&((t==null?void 0:t.globalRole)==="team_lead"||(t==null?void 0:t.teamRole)==="team_lead"),X=j.length===0||j.length===b.length,T=$&&j.length===1&&j[0]===(e==null?void 0:e.id),H=p.useMemo(()=>{const W=(ue,ke)=>ue.length===0?ke:ue.length===1?ue[0]:ue.length===2?`${ue[0]} and ${ue[1]}`:ue.length===3?`${ue[0]}, ${ue[1]} and ${ue[2]}`:`multiple ${ke}`,_e=ue=>ue.endsWith("s")?`${ue}'`:`${ue}'s`,De=b.filter(ue=>j.includes(ue.id)).map(ue=>ue.label||ue.email||"Agent"),qe=X||De.length===0,$e=!qe&&De.length===1,ot=$e?_e(De[0]):"",wt=Z.length===0||C.length>0&&Z.length===C.length,I=K.length===0||O.length>0&&K.length===O.length,G=q.length===0||N.length>0&&q.length===N.length,se=C.filter(ue=>Z.includes(ue.id)).map(ue=>ue.label),de=K.map(ue=>Al[ue]??ue.replace(/_/g," ")),ce=N.filter(ue=>q.includes(ue.id)).map(ue=>ue.name),le=wt?"all pipeline stages":W(se,"pipeline stages"),Pe=I?"all deal types":W(de,"deal types"),he=G?"all lead sources":W(ce,"lead sources");if(wt&&I&&G)return $e?`Viewing ${ot} deals across all pipeline stages, deal types, and lead sources.`:qe?"Viewing all deals across all agents, pipeline stages, deal types, and lead sources.":"Viewing deals for multiple agents across all pipeline stages, deal types, and lead sources.";const Oe=qe?"all agents":$e?ot:De.length===2?`${De[0]} and ${De[1]}`:De.length===3?`${De[0]}, ${De[1]} and ${De[2]}`:"multiple agents",ae=[];if(le&&ae.push(le),Pe){const ue=I?`across ${Pe}`:`${Pe} deals`;ae.push(ue)}he&&ae.push(`from ${he}`),ae.length===0&&ae.push("deals");const fe=ae.join(", ");return`Viewing ${Oe} ${fe}`.replace(/\s+/g," ").trim()+"."},[b,O,N,C,X,j,K,q,Z,e==null?void 0:e.id]),Q=()=>{e&&S([e.id])},F=()=>{S([])},ve=W=>{const _e=Array.from(W.target.selectedOptions).map(De=>De.value);S(_e)},R=W=>{const _e=Array.from(W.target.selectedOptions).map(De=>De.value);B(_e)},ie=W=>{const _e=Array.from(W.target.selectedOptions).map(De=>De.value);J(_e)},ne=W=>{const _e=Array.from(W.target.selectedOptions).map(De=>De.value);D(_e)};p.useEffect(()=>{O.length&&D(W=>W.filter(_e=>O.includes(_e)))},[O]);const Ne=(W,_e)=>_e.length?_e.length===1?W.eq("user_id",_e[0]):W.in("user_id",_e):W,Ie=(W,_e)=>{if(W=Ne(W,_e),q.length&&(W=W.in("lead_source_id",q)),Z.length){const De=Z.filter(Boolean);De.length&&(W=W.in("pipeline_status_id",De))}return K.length&&(W=W.in("deal_type",K)),W},Ot=t&&t.globalRole!=="agent"||b.length>1,Me=async(W,_e)=>{const De=W.length?W:b.map(le=>le.id);if(!De.length)return;const qe=new Date(_e,0,1).toISOString(),$e=new Date(_e,11,31,23,59,59).toISOString();let ot=Y.from("deals").select(`
        id,
        deal_type,
        lead_source_id,
        lead_sources (id, name),
        pipeline_status_id,
        pipeline_statuses (id, name, sort_order)
      `).gte("created_at",qe).lte("created_at",$e);ot=Ne(ot,De);const{data:wt,error:I}=await ot;if(I){console.error("Unable to load analytics filter context",I);return}const G=new Map,se=new Map,de=new Set;(wt||[]).forEach(le=>{var Pe,he;(Pe=le.lead_sources)!=null&&Pe.id&&G.set(le.lead_sources.id,{id:le.lead_sources.id,name:le.lead_sources.name||"Unknown"}),(he=le.pipeline_statuses)!=null&&he.id&&se.set(le.pipeline_statuses.id,{id:le.pipeline_statuses.id,label:le.pipeline_statuses.name,sortOrder:le.pipeline_statuses.sort_order}),le.deal_type&&de.add(le.deal_type)}),k(Array.from(G.values()).sort((le,Pe)=>le.name.localeCompare(Pe.name))),E(Array.from(se.values()).sort((le,Pe)=>{const he=le.sortOrder??999,xe=Pe.sortOrder??999;return he===xe?le.label.localeCompare(Pe.label):he-xe}));const ce=Array.from(de).sort((le,Pe)=>{const he=Al[le]??le,xe=Al[Pe]??Pe;return he.localeCompare(xe)});A(ce.length?ce:Object.keys(Al))},z=W=>{if(!W)return null;const _e=W.trim();if(!_e)return null;const De=_e.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(De){const ot=Number(De[1]),wt=Number(De[2])-1,I=Number(De[3]);if(Number.isNaN(ot)||Number.isNaN(wt)||Number.isNaN(I)||wt<0||wt>11||I<1||I>31)return null;const G=new Date(Date.UTC(ot,wt,I));return{year:ot,month:wt,date:G}}const qe=_e.replace(" ","T").replace(/(\+\d{2})(\d{2})$/,"$1:$2").replace(/(-\d{2})(\d{2})$/,"$1:$2"),$e=new Date(qe);return Number.isNaN($e.getTime())?null:{year:$e.getUTCFullYear(),month:$e.getUTCMonth(),date:$e}};p.useEffect(()=>{if(!e)return;(async()=>{var se;const _e={id:e.id,label:((se=e.user_metadata)==null?void 0:se.name)||e.email||"You",email:e.email||""},De=async()=>{if(!t)return[e.id];switch(t.globalRole){case"admin":return await la(t);case"sales_manager":case"team_lead":return await la(t);default:return[t.userId]}};if(!t||t.globalRole==="agent"){_([_e]),S([e.id]);return}const qe=await De();let $e=[];const{data:ot,error:wt}=await Y.rpc("get_accessible_agents");if(wt)console.error("Unable to load accessible agents",wt);else if(ot){const de=ot,ce=new Set(de.filter(he=>he.global_role==="admin"||he.global_role==="sales_manager").map(he=>he.user_id)),le=de.filter(he=>he.global_role!=="admin"&&he.global_role!=="sales_manager").map(he=>({id:he.user_id,label:he.display_name||he.email||"Agent",email:he.email||""}));if($e=(qe.length?le.filter(he=>qe.includes(he.id)):le).filter((he,xe,Oe)=>Oe.findIndex(ae=>ae.id===he.id)===xe),ce.size)for(const he of ce){const xe=qe.indexOf(he);xe!==-1&&qe.splice(xe,1)}}const I=de=>{var ce;return de===e.id?((ce=e.user_metadata)==null?void 0:ce.name)||e.email||"You":`Agent ${de.slice(0,8)}`};if(!$e.length)$e=qe.map(de=>({id:de,label:I(de),email:""}));else{const de=new Set($e.map(le=>le.id)),ce=qe.filter(le=>!de.has(le));ce.length&&($e=[...$e,...ce.map(le=>({id:le,label:I(le),email:""}))])}_($e);const G=$e.map(de=>de.id);S(G.length?[]:[e.id])})()},[e,t==null?void 0:t.globalRole,t==null?void 0:t.teamId]),p.useEffect(()=>{e&&b.length!==0&&Le()},[e==null?void 0:e.id,n,ye,P,V,te,b]),p.useEffect(()=>{const W=j.length?j:b.map(_e=>_e.id);!e||W.length===0||Me(W,n)},[j,n,b]);const Le=async()=>{if(!e||b.length===0)return;const W=j.length?j:b.map(fe=>fe.id);if(!W.length){r(()=>{s({closedDeals:0,totalVolume:0,totalGCI:0,avgSalePrice:0,avgCommission:0,buyerDeals:0,sellerDeals:0,avgDaysToClose:0}),d([]),c([]),h({count:0,gci:0})}),v(!1),w(!1);return}const _e=y;_e?v(!0):w(!0);const De=new Date(n,0,1).toISOString(),qe=new Date(n,11,31,23,59,59).toISOString(),$e=`
      id,
      user_id,
      deal_type,
      status,
      created_at,
      stage_entered_at,
      close_date,
      closed_at,
      expected_sale_price,
      actual_sale_price,
      gross_commission_rate,
      brokerage_split_rate,
      referral_out_rate,
      transaction_fee,
      lead_source_id,
      lead_sources (name),
      pipeline_status_id,
      pipeline_statuses (id, name, sort_order)
    `,ot=Ie(Y.from("deals").select($e).eq("status","closed"),W),wt=Ie(Y.from("deals").select("id, created_at, close_date, closed_at, lead_source_id, pipeline_status_id, archived_reason").eq("status","dead").gte("created_at",De).lte("created_at",qe),W),I=Ie(Y.from("deals").select($e).gte("created_at",De).lte("created_at",qe),W),[G,se,de,ce]=await Promise.all([Y.from("user_settings").select("annual_gci_goal").eq("user_id",e.id).maybeSingle(),ot,wt,I]);G.data&&g(G.data.annual_gci_goal||0);const le=se.data,Pe=de.data,he=ce.data;if(le){const fe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];let ue=0,ke=0,Ee=0,ze=0,gt=0,Nt=0,nt=0;const Te={},Hr={},mu=new Date;mu.getMonth(),mu.getFullYear(),le.forEach(nr=>{const gu=z(nr.close_date)||z(nr.closed_at);if(!gu||gu.year!==n)return;nt+=1;const xb=nr.actual_sale_price||nr.expected_sale_price||0;ue+=xb;const bb=xb*(nr.gross_commission_rate||0)*(1-(nr.brokerage_split_rate||0)),wb=(nr.referral_out_rate?bb*(1-nr.referral_out_rate):bb)-(nr.transaction_fee||0);ke+=wb,nr.deal_type==="buyer"&&Ee++,nr.deal_type==="seller"&&ze++,nr.deal_type==="buyer_and_seller"&&(Ee++,ze++);const _b=z(nr.created_at);if(_b){const Wp=(gu.date.getTime()-_b.date.getTime())/(1e3*60*60*24);!Number.isNaN(Wp)&&Wp>=0&&(gt+=Wp,Nt++)}const eI=gu.month,vu=fe[eI];Te[vu]=(Te[vu]||0)+wb,Hr[vu]=(Hr[vu]||0)+1});const $s=Nt>0?gt/Nt:0;s({closedDeals:nt,totalVolume:ue,totalGCI:ke,avgSalePrice:nt>0?ue/nt:0,avgCommission:nt>0?ke/nt:0,buyerDeals:Ee,sellerDeals:ze,avgDaysToClose:$s});const zp=fe.map(nr=>({month:nr,gci:Te[nr]||0,deals:Hr[nr]||0}));d(zp)}else s(fe=>({...fe,closedDeals:0,totalVolume:0,totalGCI:0,avgSalePrice:0,avgCommission:0,buyerDeals:0,sellerDeals:0,avgDaysToClose:0})),d([]),h({count:0,gci:0});if(Pe){const fe={"No Response / Ghosted":0,"Client Not Ready / Timeline Changed":0,"Chose Another Agent":0,"Financing Didnt Work Out":0,"Deal Fell Through":0,Other:0},ue=Pe.map(ke=>ke.id).filter(Boolean);if(ue.length){Pe.forEach(ze=>{const gt=(ze.archived_reason||"").trim(),nt=zZ.find(Te=>gt&&Te.toLowerCase()===gt.toLowerCase())||"Other";fe[nt]=(fe[nt]||0)+1});const ke=ue.length,Ee=Object.entries(fe).filter(([,ze])=>ze>0).map(([ze,gt])=>({reason:ze,count:gt,percentage:ke>0?gt/ke*100:0})).sort((ze,gt)=>gt.count-ze.count);L({total:ke,reasons:Ee})}else L({total:0,reasons:[]})}else L({total:0,reasons:[]});const xe=new Date,Oe=xe.getFullYear()===n,ae={count:0,gci:0};if(he){Oe&&he.forEach(ke=>{const Ee=z(ke.close_date)||z(ke.closed_at);if(!Ee||!(Ee.year===xe.getFullYear()&&Ee.month===xe.getMonth())||!UZ.includes(ke.status))return;const nt=(ke.actual_sale_price||ke.expected_sale_price||0)*(ke.gross_commission_rate||0)*(1-(ke.brokerage_split_rate||0)),Hr=(ke.referral_out_rate?nt*(1-ke.referral_out_rate):nt)-(ke.transaction_fee||0);ae.count+=1,ae.gci+=Hr});const fe={};he.forEach(ke=>{var ze;const Ee=((ze=ke.lead_sources)==null?void 0:ze.name)||"Unknown";if(fe[Ee]||(fe[Ee]={total:0,closed:0,commission:0}),fe[Ee].total++,ke.status==="closed"){fe[Ee].closed++;const nt=(ke.actual_sale_price||ke.expected_sale_price||0)*(ke.gross_commission_rate||0)*(1-(ke.brokerage_split_rate||0)),Hr=(ke.referral_out_rate?nt*(1-ke.referral_out_rate):nt)-(ke.transaction_fee||0);fe[Ee].commission+=Hr}});const ue=Object.entries(fe).map(([ke,Ee])=>({name:ke,totalDeals:Ee.total,closedDeals:Ee.closed,conversionRate:Ee.total>0?Ee.closed/Ee.total*100:0,totalCommission:Ee.commission}));c(ue.sort((ke,Ee)=>Ee.totalCommission-ke.totalCommission))}else h({count:0,gci:0}),c([]);if(he){const fe=Pn(he,n);ee(fe)}else ee([]);h(ae),_e&&v(!1),w(!1)},Ce=W=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(W),He=W=>new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(W),At={lead:1,in_progress:2,under_contract:3,closed_won:4,archived:5},Ya={lead:"Lead",in_progress:"In Progress",under_contract:"Under Contract",closed_won:"Closed Won",archived:"Archived (Closed Lost)"},un=W=>{switch(W){case"closed":return"closed_won";case"dead":return"archived";case"under_contract":case"pending":return"under_contract";case"offer_submitted":case"showing_scheduled":case"in_progress":case"contacted":return"in_progress";default:return"lead"}},Qn=(W,_e)=>W?W.getFullYear()===_e:!1,Pn=(W,_e)=>{const De=[{from:"lead",to:"in_progress"},{from:"in_progress",to:"under_contract"},{from:"under_contract",to:"closed_won"}],qe=W.filter($e=>{var ot;return Qn(((ot=z($e.created_at))==null?void 0:ot.date)||null,_e)});return De.map(({from:$e,to:ot})=>{const wt=qe.filter(se=>{const de=un(se.status);return At[de]>=At[$e]}).length,I=qe.filter(se=>{const de=un(se.status);return de==="archived"?!1:At[de]>=At[ot]}).length,G=wt>0?I/wt*100:0;return{from:$e,to:ot,entered:wt,advanced:I,rate:G}})},Rs=m>0?i.totalGCI/m*100:0,yr=new Date,Xa=n===yr.getFullYear(),Li=new Date(n,0,1),Fi=new Date(n,11,31,23,59,59),Bi=Xa?Math.max(0,Math.min(yr.getTime(),Fi.getTime())-Li.getTime()):Fi.getTime()-Li.getTime(),Ui=Fi.getTime()-Li.getTime(),zi=Ui>0?Bi/Ui:1,Zn=zi>0?i.totalGCI/zi:i.totalGCI,Ja=Math.max(0,m-i.totalGCI),Wi=Xa&&yr.getFullYear()===n?12-yr.getMonth():0,Qa=m>0&&Wi>0?Ja/Wi:0,{bestMonth:Fe,worstMonth:ht}=p.useMemo(()=>{const W=u.filter(qe=>qe.gci>0);if(W.length===0)return{bestMonth:null,worstMonth:null};const _e=W.reduce((qe,$e)=>$e.gci>qe.gci?$e:qe),De=W.reduce((qe,$e)=>$e.gci<qe.gci?$e:qe);return{bestMonth:_e,worstMonth:De}},[u]),Je=p.useMemo(()=>u.filter(W=>W.gci>0),[u]),pt=Je.length,ur=pt>0?i.totalGCI/pt:0,rr=Je.reduce((W,_e)=>W+_e.deals,0),Ar=pt>0?rr/pt:0,zr=pt>0?Je[pt-1]:null,Ye=pt>1?Je[pt-2]:null,Vt=zr&&Ye?zr.gci-Ye.gci:null,xr=p.useMemo(()=>u.reduce((W,_e)=>Math.max(W,_e.gci),0),[u]),Wr=p.useMemo(()=>u.reduce((W,_e)=>Math.max(W,_e.deals),0),[u]),On=Fe?u.find(W=>W.month===Fe.month):null,An=ht?u.find(W=>W.month===ht.month):null,mt="rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_1px_2px_rgba(15,23,42,0.08)]",Kr="inline-flex items-center rounded-full border border-gray-200/70 bg-white px-2.5 py-0.5 text-[11px] font-medium text-gray-600",ea="rounded-xl border border-gray-100/80 bg-white px-4 py-3",Ms=o[0]||null,Za=o.length>1?[...o].filter(W=>W.totalDeals>=3).sort((W,_e)=>W.conversionRate-_e.conversionRate)[0]:null,Bp=Array.from({length:5},(W,_e)=>new Date().getFullYear()-_e).map(W=>({value:W.toString(),label:W.toString()})),Up=`Jan 1  Dec 31, ${n}${Xa?"  In progress":""}`;return y?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):l.jsxs("div",{className:"space-y-8",children:[l.jsxs("section",{className:`${mt} p-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between relative`,children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-[0.25em]",children:"Analytics"}),l.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mt-1",children:"Year in Review"}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"A cohesive digest of production, pace, and lead-source efficiency for your selected year."})]}),l.jsxs("div",{className:"flex flex-col gap-3 items-start sm:items-end",children:[l.jsxs("div",{className:"flex items-center gap-3 text-left sm:text-right",children:[l.jsx("div",{className:"flex items-center gap-2 text-xs font-semibold text-gray-500 min-h-[20px]",children:x?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"h-2 w-2 rounded-full bg-[var(--app-accent)] animate-pulse"}),"Updating"]}):l.jsx("span",{className:"invisible",children:"Updating"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Timeframe"}),l.jsx("p",{className:"text-sm text-gray-500",children:Up})]})]}),l.jsx(GD,{options:Bp,value:String(n),onChange:W=>a(parseInt(W,10)),className:"self-start sm:self-end w-max"})]})]}),Ot&&l.jsxs("section",{className:`${mt} p-5 space-y-4`,children:[l.jsx("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:l.jsxs("div",{children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Scope"}),l.jsx("p",{className:"text-sm text-gray-700",children:H})]})}),b.length>0&&l.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Agents"}),$&&l.jsx("button",{type:"button",onClick:Q,className:`rounded-full px-3 py-1 text-xs font-semibold transition ${T?"bg-[var(--app-accent)] text-white shadow-[0_8px_20px_rgba(0,122,255,0.25)]":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,children:"Focus On Me"})]}),l.jsx("div",{className:"flex items-center gap-1.5",children:!X&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:F,children:"Clear"})})]}),l.jsx("select",{multiple:!0,value:j,onChange:ve,className:"hig-input min-h-[72px] rounded-2xl border-gray-200 bg-white/90 text-sm analytics-multi-select",children:b.map(W=>l.jsx("option",{value:W.id,children:W.label},W.id))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Pipeline Stage"}),Z.length>0&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:()=>B([]),children:"Clear"})]}),l.jsx("select",{multiple:!0,value:Z,onChange:R,className:"hig-input min-h-[64px] mt-2 analytics-multi-select",children:C.map(W=>l.jsx("option",{value:W.id,children:W.label},W.id))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Deal Type"}),K.length>0&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:()=>D([]),children:"Clear"})]}),l.jsx("select",{multiple:!0,value:K,onChange:ne,className:"hig-input min-h-[64px] mt-2 analytics-multi-select",children:O.map(W=>l.jsx("option",{value:W,children:Al[W]??W.replace(/_/g," ")},W))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Lead Source"}),q.length>0&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:()=>J([]),children:"Clear"})]}),l.jsx("select",{multiple:!0,value:q,onChange:ie,className:"hig-input min-h-[64px] mt-2 analytics-multi-select",children:N.map(W=>l.jsx("option",{value:W.id,children:W.name},W.id))})]})]})]}),l.jsx("section",{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[l.jsxs("div",{className:`${mt} p-5`,children:[l.jsx("p",{className:"text-xs font-semibold text-blue-600 uppercase tracking-wide",children:"Pipeline"}),l.jsx("div",{className:"text-2xl font-semibold text-gray-900 mt-2",children:He(i.closedDeals)}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Closed deals"}),l.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:[i.buyerDeals," buyer  ",i.sellerDeals," seller"]})]}),l.jsxs("div",{className:`${mt} p-5`,children:[l.jsx("p",{className:"text-xs font-semibold text-green-600 uppercase tracking-wide",children:"Volume"}),l.jsx("div",{className:"text-2xl font-semibold text-gray-900 mt-2",children:Ce(i.totalVolume)}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Total sales volume"}),l.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Avg sale price  ",Ce(i.avgSalePrice)]})]}),l.jsxs("div",{className:`${mt} p-5`,children:[l.jsx("p",{className:"text-xs font-semibold text-amber-600 uppercase tracking-wide",children:"Net GCI"}),l.jsx("div",{className:"text-2xl font-semibold text-gray-900 mt-2",children:Ce(i.totalGCI)}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Total earnings after splits"}),l.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Avg commission  ",Ce(i.avgCommission)]})]}),l.jsxs("div",{className:`${mt} p-5`,children:[l.jsx("p",{className:"text-xs font-semibold text-indigo-600 uppercase tracking-wide",children:"Pace"}),l.jsx("div",{className:"text-2xl font-semibold text-gray-900 mt-2",children:He(f.count)}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Deals closing this month"}),l.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["GCI this month  ",Ce(f.gci)]}),i.avgDaysToClose>0&&l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Avg time to close  ",i.avgDaysToClose.toFixed(0)," days"]})]})]})}),l.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:`${mt} p-6`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-5",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Monthly Performance"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How each producing month contributes to pace and income."})]}),l.jsx("div",{className:"text-xs text-gray-500",children:pt>0?l.jsxs("span",{className:Kr,children:[pt," active months"]}):l.jsx("span",{className:"text-gray-400",children:"No closed months yet"})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{className:ea,children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide",children:"Top Month"}),Fe?l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[Fe.month,l.jsxs("span",{className:Kr,children:[(On==null?void 0:On.deals)??0," deals"]})]}),l.jsx("p",{className:"text-sm text-gray-600",children:Ce(Fe.gci)})]}):l.jsx("p",{className:"text-sm text-gray-500",children:"No producing months yet."})]}),l.jsxs("div",{className:ea,children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide",children:"Slow Month"}),ht&&Fe&&ht.month!==Fe.month?l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[ht.month,l.jsxs("span",{className:Kr,children:[(An==null?void 0:An.deals)??0," deals"]})]}),l.jsx("p",{className:"text-sm text-gray-600",children:Ce(ht.gci)})]}):Fe?l.jsx("p",{className:"text-sm text-gray-500",children:"Only one producing month so far."}):l.jsx("p",{className:"text-sm text-gray-500",children:"No data yet."})]}),l.jsxs("div",{className:ea,children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide",children:"Avg Active Month"}),l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:Ce(ur||0)}),l.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[pt||0," active month",pt===1?"":"s",l.jsxs("span",{className:Kr,children:[Ar.toFixed(1)," deals/mo"]})]})]}),l.jsxs("div",{className:ea,children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide",children:"Momentum"}),Vt!==null&&zr?l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:`text-lg font-semibold ${Vt>=0?"text-emerald-600":"text-rose-600"}`,children:[Vt>=0?"+":"-",Ce(Math.abs(Vt))]}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Vs. ",(Ye==null?void 0:Ye.month)??"previous month"," GCI"]})]}):l.jsx("p",{className:"text-sm text-gray-500",children:"Log at least two producing months to see momentum."})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Monthly Ledger"}),l.jsxs("span",{className:"text-xs text-gray-500",children:["Peak GCI: ",xr?Ce(xr):"","  Peak deals:"," ",Wr||""]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-left text-xs uppercase tracking-wide text-gray-500 border-b border-gray-100",children:[l.jsx("th",{className:"pb-2 pr-4",children:"Month"}),l.jsx("th",{className:"pb-2 pr-4",children:"Deals"}),l.jsx("th",{className:"pb-2 pr-4",children:"GCI"}),l.jsx("th",{className:"pb-2 pr-4",children:"Avg / Deal"}),l.jsx("th",{className:"pb-2 text-right",children:"Share"})]})}),l.jsx("tbody",{children:u.map(W=>{const _e=W.deals>0?W.gci/W.deals:0,De=i.totalGCI>0?W.gci/i.totalGCI*100:0;return l.jsxs("tr",{className:"border-b border-gray-50",children:[l.jsx("td",{className:"py-2 pr-4 font-medium text-gray-900",children:W.month}),l.jsx("td",{className:"py-2 pr-4 text-gray-700",children:W.deals}),l.jsx("td",{className:"py-2 pr-4 text-gray-700",children:Ce(W.gci)}),l.jsx("td",{className:"py-2 pr-4 text-gray-700",children:W.deals>0?Ce(_e):""}),l.jsx("td",{className:"py-2 text-right text-gray-700",children:i.totalGCI>0?`${De.toFixed(1)}%`:""})]},W.month)})})]})})]})]}),l.jsxs("div",{className:`${mt} p-6`,children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Momentum & Pace"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Are you ahead or behind last years GCI at this point on the calendar?"})]})}),l.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[l.jsxs("div",{className:"rounded-2xl border border-gray-100/80 bg-gradient-to-br from-white to-[var(--app-bg-start)] p-5 shadow-inner",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Year-over-year pace"}),l.jsxs("div",{className:"mt-3 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Ce(i.totalGCI)}),l.jsx("p",{className:"text-sm text-gray-600",children:"Current GCI"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Pace needed"}),l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:Ce(Zn)})]})]}),l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[l.jsx("span",{children:"Current"}),l.jsx("span",{children:"Goal"})]}),l.jsx("div",{className:"mt-1 h-3 rounded-full bg-gray-100",children:l.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-blue-500 to-cyan-400 transition-all",style:{width:`${Math.min(100,i.totalGCI/(m||1)*100)}%`}})}),l.jsxs("div",{className:"mt-1 text-xs font-semibold text-gray-600",children:[Rs.toFixed(1),"% of goal  year is ",(zi*100).toFixed(1),"% complete"]})]})]}),l.jsxs("div",{className:"rounded-2xl border border-gray-100/80 bg-white/90 p-5",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Active pipeline outlook"}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:He(f.count)}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Deals expected to close this month"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Ce(f.gci)}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Projected monthly GCI"})]})]}),l.jsx("div",{className:"mt-4 rounded-xl bg-[var(--app-surface-muted)] p-4 text-sm text-gray-600",children:Vt!==null&&zr?l.jsxs(l.Fragment,{children:[l.jsxs("span",{className:"font-semibold",children:[Vt>=0?"Ahead":"Trailing"," pace"]})," ","by ",Ce(Math.abs(Vt))," versus ",(Ye==null?void 0:Ye.month)??"previous",". Keep this cadence to end the year at"," ",l.jsx("span",{className:"font-semibold",children:Ce(Zn)}),"."]}):"Once two months close well highlight whether you are accelerating or slowing down."})]})]})]})]}),l.jsxs("section",{className:`${mt} p-6`,children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Stage Conversion (Funnel)"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How many deals advance between key stages; highlights slowdowns and drop-offs."})]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-left text-xs uppercase tracking-wide text-gray-500 border-b border-gray-100",children:[l.jsx("th",{className:"pb-2 pr-4",children:"From  To"}),l.jsx("th",{className:"pb-2 pr-4",children:"Entered"}),l.jsx("th",{className:"pb-2 pr-4",children:"Advanced"}),l.jsx("th",{className:"pb-2 pr-4",children:"Conversion"})]})}),l.jsxs("tbody",{className:"divide-y divide-gray-100",children:[oe.map(W=>l.jsxs("tr",{children:[l.jsxs("td",{className:"py-3 pr-4 font-medium text-gray-900",children:[Ya[W.from],"  ",Ya[W.to]]}),l.jsx("td",{className:"py-3 pr-4 text-gray-700",children:W.entered}),l.jsx("td",{className:"py-3 pr-4 text-gray-700",children:W.advanced}),l.jsxs("td",{className:"py-3 pr-4 text-gray-900 font-semibold",children:[W.rate.toFixed(1),"%"]})]},`${W.from}-${W.to}`)),oe.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"py-4 text-sm text-gray-500",children:"No stage movement recorded in this period."})})]})]})})]}),l.jsxs("section",{className:`${mt} p-6`,children:[l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Closed Lost Reasons"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Why archived deals fell out  fuel pipeline fixes, coaching, and source tuning."})]}),l.jsx("div",{className:"text-sm text-gray-600",children:l.jsxs("span",{className:Kr,children:[M.total," archived"]})})]}),M.total===0?l.jsx("div",{className:"rounded-xl border border-dashed border-gray-200 p-4 text-sm text-gray-600 bg-gray-50/80",children:"No archived deals in this period. When you archive with a reason, well summarize them here."}):l.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3",children:M.reasons.map(W=>l.jsxs("div",{className:"rounded-xl border border-gray-100/80 bg-white px-4 py-3 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:W.reason}),l.jsxs("span",{className:"text-xs font-semibold text-gray-500",children:[W.percentage.toFixed(1),"%"]})]}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[W.count," deal",W.count===1?"":"s"]})]},W.reason))})]}),l.jsxs("section",{className:`${mt} overflow-hidden`,children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:"Lead Source Performance"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Compare volume, conversion, and commissions by source."})]})}),l.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Deals"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Closed"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Conv. Rate"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Commission"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Insight"})]})}),l.jsxs("tbody",{className:"bg-white/70 divide-y divide-gray-100",children:[o.map(W=>{let _e="Solid";return W.conversionRate>=25&&W.totalCommission>(i.totalGCI||0)/4?_e="Power Source":W.conversionRate<10&&W.totalDeals>=3&&(_e="Underperformer"),l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:W.name}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:W.totalDeals}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:W.closedDeals}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[W.conversionRate.toFixed(1),"%"]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600",children:Ce(W.totalCommission)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:l.jsx("span",{className:_e==="Power Source"?"inline-flex px-2 py-1 rounded-full bg-green-50 text-green-700":_e==="Underperformer"?"inline-flex px-2 py-1 rounded-full bg-amber-50 text-amber-700":"inline-flex px-2 py-1 rounded-full bg-gray-50 text-gray-600",children:_e})})]},W.name)}),o.length===0&&l.jsx("tr",{children:l.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:["No data available for ",n]})})]})]})]}),l.jsxs("section",{className:`${mt} p-6`,children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Suggested Focus Areas"}),l.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Practical follow-ups informed by what the data is highlighting this year."}),l.jsxs("ul",{className:"space-y-3 text-sm text-gray-700",children:[m>0&&Ja>0&&l.jsxs("li",{className:"leading-relaxed",children:["You need approximately"," ",l.jsx("span",{className:"font-semibold",children:Ce(Ja)})," ","more GCI to hit your annual goal.",Qa>0&&l.jsxs(l.Fragment,{children:[" ","That's about"," ",l.jsxs("span",{className:"font-semibold",children:[Ce(Qa)," per month"]})," ","for the rest of the year."]})]}),Ms&&l.jsxs("li",{className:"leading-relaxed",children:[l.jsx("span",{className:"font-semibold",children:Ms.name})," continues to be your most profitable channel with"," ",l.jsx("span",{className:"font-semibold",children:Ce(Ms.totalCommission)})," ","in GCI. Consider increasing budget or nurture time here."]}),Za&&l.jsxs("li",{className:"leading-relaxed",children:[l.jsx("span",{className:"font-semibold",children:Za.name})," is converting at"," ",Za.conversionRate.toFixed(1),"%. Revisit the script or pause the spend until it improves."]}),i.avgDaysToClose>0&&l.jsxs("li",{className:"leading-relaxed",children:["Average time from lead to close is"," ",l.jsxs("span",{className:"font-semibold",children:[i.avgDaysToClose.toFixed(0)," days"]}),". Tighten follow-up cadences or pre-qualification steps to reduce the cycle."]}),(!Ms||!Za)&&i.closedDeals===0&&l.jsx("li",{className:"leading-relaxed",children:"Add a few deals to the pipeline this year to unlock richer insight. Once production starts, this dashboard will reveal which channels earn the most."})]})]})]})}const dd="rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_1px_2px_rgba(15,23,42,0.08)]",KZ="inline-flex items-center rounded-full border px-3 py-1.5 text-xs font-semibold transition",HZ=[{label:"All tasks",value:"all",accentClass:"bg-gray-900 text-white border-gray-900 shadow-sm"},{label:"Overdue",value:"overdue",accentClass:"bg-red-50 text-red-700 border-red-200 shadow-sm ring-1 ring-red-100"},{label:"Due today",value:"today",accentClass:"bg-amber-50 text-amber-700 border-amber-200 shadow-sm ring-1 ring-amber-100"},{label:"Upcoming",value:"upcoming",accentClass:"bg-sky-50 text-sky-700 border-sky-200 shadow-sm ring-1 ring-sky-100"}];function qZ(){const{user:e,roleInfo:t}=St(),[r,n]=p.useState([]),[a,i]=p.useState([]),[s,o]=p.useState("all"),[c,u]=p.useState(""),[d,f]=p.useState(!0),[h,m]=p.useState([]),[g,y]=p.useState({}),[v,x]=p.useState(!0),[w,b]=p.useState(null),[_,j]=p.useState(!1),[S,N]=p.useState(null),[k,C]=p.useState(""),[E,O]=p.useState(""),[A,q]=p.useState(""),[J,Z]=p.useState(""),[B,K]=p.useState(!1),[D,M]=p.useState(null),L=R=>{var ie;return g[R]?g[R]:R===(e==null?void 0:e.id)?((ie=e.user_metadata)==null?void 0:ie.name)||e.email||"You":`Agent ${R.slice(0,8)}`},oe=R=>{if(!R)return null;const[ie,ne,Ne]=R.split("-").map(Number);return!ie||!ne||!Ne?null:new Date(ie,ne-1,Ne)},ee=p.useMemo(()=>{const R=new Date;R.setHours(0,0,0,0);let ie=0,ne=0,Ne=0,Ie=0;const Ot=[];return r.forEach(Me=>{const z=oe(Me.due_date);if(!z){Ie+=1;return}z<R?ie+=1:z.getTime()===R.getTime()?ne+=1:Ne+=1,Ot.push(Me)}),Ot.sort((Me,z)=>{const Le=oe(Me.due_date),Ce=oe(z.due_date);return Le?Ce?Le.getTime()-Ce.getTime():-1:1}),{total:r.length,overdue:ie,dueToday:ne,upcoming:Ne,unscheduled:Ie,nextTask:Ot[0]||null}},[r]),ye=p.useMemo(()=>h.find(R=>R.id===E),[h,E]),P=p.useMemo(()=>!!(t&&["sales_manager","team_lead"].includes(t.globalRole)),[t]),V=p.useMemo(()=>P?h.reduce((R,ie)=>{const ne=ie.user_id;return R[ne]||(R[ne]=[]),R[ne].push(ie),R},{}):null,[h,P]);p.useEffect(()=>{e&&te()},[e]),p.useEffect(()=>{if(!e){m([]),x(!1);return}$()},[e,t]),p.useEffect(()=>{let R=[...r];const ie=new Date;if(ie.setHours(0,0,0,0),s==="overdue"?R=R.filter(ne=>{if(!ne.due_date)return!1;const Ne=oe(ne.due_date);return!!Ne&&Ne<ie}):s==="today"?R=R.filter(ne=>{if(!ne.due_date)return!1;const Ne=oe(ne.due_date);return Ne?Ne.getTime()===ie.getTime():!1}):s==="upcoming"&&(R=R.filter(ne=>{if(!ne.due_date)return!1;const Ne=oe(ne.due_date);return!!Ne&&Ne>ie})),c.trim()){const ne=c.toLowerCase();R=R.filter(Ne=>Ne.title.toLowerCase().includes(ne)||Ne.deals.client_name.toLowerCase().includes(ne)||Ne.deals.property_address.toLowerCase().includes(ne))}i(R)},[s,c,r]);const te=async()=>{if(!e)return;f(!0);const{data:R,error:ie}=await Y.from("tasks").select("*, deals(*, lead_sources(*))").eq("user_id",e.id).eq("completed",!1).order("due_date",{ascending:!0});!ie&&R&&n(R.filter(ne=>ne.deals).map(ne=>ne)),f(!1)},$=async()=>{if(e){x(!0);try{let R=[e.id];t&&(R=await la(t),R.length||(R=[e.id]));let ie=Y.from("deals").select("id, user_id, client_name, property_address, city, state, deal_type, status, next_task_due_date, next_task_description").neq("status","closed").neq("status","dead").order("updated_at",{ascending:!1});R.length===1?ie=ie.eq("user_id",R[0]):R.length>1&&(ie=ie.in("user_id",R));const{data:ne,error:Ne}=await ie;if(Ne)console.error("Error loading deals",Ne),m([]);else{m(ne||[]);const Ie={},{data:Ot,error:Me}=await Y.rpc("get_accessible_agents");!Me&&Array.isArray(Ot)&&Ot.forEach(z=>{R.includes(z.user_id)&&(Ie[z.user_id]=z.display_name||z.email||"Agent")}),y(Ie)}}catch(R){console.error("Error resolving visible deals",R),m([]),y({})}finally{x(!1)}}},X=R=>{const ie=oe(R);return ie?ie.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"No due date"},T=R=>{const ie=oe(R.due_date);if(!ie)return l.jsx("span",{className:"text-xs font-medium text-gray-500",children:"No due date"});const ne=new Date;return ne.setHours(0,0,0,0),ie<ne?l.jsx("span",{className:"text-xs font-semibold text-red-600",children:"Overdue"}):ie.getTime()===ne.getTime()?l.jsx("span",{className:"text-xs font-semibold text-orange-600",children:"Due today"}):l.jsx("span",{className:"text-xs font-semibold text-emerald-600",children:"Upcoming"})},H=R=>{N(R.deals),j(!0)},Q=async R=>{if(R.preventDefault(),!!e){if(M(null),!k.trim()||!E){M("Add a task name and choose a deal.");return}K(!0);try{const{error:ie}=await Y.from("tasks").insert({user_id:e.id,deal_id:E,title:k.trim(),description:J.trim()||null,due_date:A||null,completed:!1});if(ie)throw ie;C(""),O(""),q(""),Z(""),o("all"),await te()}catch(ie){console.error("Error creating task",ie),M("Could not add this task. Please try again.")}finally{K(!1)}}},F=async(R,ie)=>{if(ie.stopPropagation(),!!e){b(R.id);try{const{error:ne}=await Y.from("tasks").update({completed:!0}).eq("id",R.id).eq("user_id",e.id);if(ne)throw ne;n(Ne=>Ne.filter(Ie=>Ie.id!==R.id)),i(Ne=>Ne.filter(Ie=>Ie.id!==R.id))}catch(ne){console.error("Error completing task",ne)}finally{b(null)}}},ve=()=>{j(!1),N(null),te()};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:`${dd} p-6 space-y-5`,children:[l.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-[0.25em]",children:"Tasks"}),l.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mt-1",children:"Outstanding work"}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Track every open commitment across all deals in a single, prioritized list."})]}),l.jsx("div",{className:"w-full md:w-auto",children:l.jsx("input",{value:c,onChange:R=>u(R.target.value),placeholder:"Search by client, task, property...",className:"w-full rounded-2xl border border-white/60 bg-white/90 py-2.5 pl-4 pr-4 text-sm text-gray-900 shadow-inner placeholder:text-gray-400 focus:border-[var(--app-accent)]/40 focus:ring-2 focus:ring-[var(--app-accent)]/15 md:min-w-[280px]"})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Task status"}),s!=="all"&&l.jsx("button",{onClick:()=>o("all"),className:"text-xs font-medium text-[var(--app-accent)] hover:underline",children:"Reset"})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:HZ.map(R=>{const ie=s===R.value;return l.jsx("button",{onClick:()=>o(R.value),className:`${KZ} ${ie?R.accentClass:"border-gray-200/70 bg-white text-gray-600 hover:text-gray-900"}`,children:R.label},R.value)})})]})]}),l.jsxs("div",{className:`${dd} p-6 space-y-4`,children:[l.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-[0.25em]",children:"Add a task"}),l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mt-1",children:"Assign the next move"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Attach a next step to any deal without leaving this page. Keep it short, clear, and actionable."})]}),l.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white/90 px-4 py-2 text-xs font-semibold text-gray-700 shadow-inner",children:[l.jsx("span",{className:"h-2 w-2 rounded-full bg-[var(--app-accent)] shadow-[0_0_0_4px_rgba(0,122,255,0.12)]"}),v?"Loading deals":`${h.length} deals available`]})]}),l.jsxs("form",{onSubmit:Q,className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[l.jsxs("div",{className:"lg:col-span-5",children:[l.jsx("label",{className:"hig-label",children:"Task"}),l.jsx("input",{type:"text",value:k,onChange:R=>{C(R.target.value),D&&M(null)},placeholder:"Call lender about pre-approval",className:"hig-input"})]}),l.jsxs("div",{className:"lg:col-span-4",children:[l.jsx("label",{className:"hig-label",children:"Deal"}),l.jsxs("select",{value:E,onChange:R=>{O(R.target.value),D&&M(null)},className:"hig-input task-deal-select",disabled:v||h.length===0,children:[l.jsx("option",{value:"",children:v?"Loading deals":"Choose a deal"}),P&&V?Object.entries(V).sort((R,ie)=>{const ne=L(R[0]),Ne=L(ie[0]);return ne.localeCompare(Ne)}).map(([R,ie])=>l.jsx("optgroup",{label:` ${L(R).toUpperCase()}  ${ie.length} deal${ie.length===1?"":"s"} `,children:ie.map(ne=>l.jsxs("option",{value:ne.id,children:[ne.client_name,"  ",ne.property_address||"Address TBD"]},ne.id))},R)):h.map(R=>l.jsxs("option",{value:R.id,children:[R.client_name,"  ",R.property_address||"Address TBD"]},R.id))]}),ye&&l.jsx("p",{className:"mt-1 text-xs text-gray-500",children:ye.city&&ye.state?`${ye.city}, ${ye.state}`:ye.city||ye.state||"No location on file"})]}),l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("label",{className:"hig-label",children:"Due date"}),l.jsx("input",{type:"date",value:A,onChange:R=>q(R.target.value),className:"hig-input"})]}),l.jsx("div",{className:"lg:col-span-1 flex items-end",children:l.jsx("button",{type:"submit",className:"hig-btn-primary w-full gap-2",disabled:B||v||h.length===0,children:B?"Adding":l.jsxs(l.Fragment,{children:[l.jsx(Da,{className:"h-4 w-4"}),"Add"]})})}),l.jsxs("div",{className:"lg:col-span-9",children:[l.jsx("label",{className:"hig-label",children:"Notes (optional)"}),l.jsx("textarea",{value:J,onChange:R=>Z(R.target.value),placeholder:"Context, prep work, or key talking points",className:"hig-input min-h-[80px]"})]}),l.jsx("div",{className:"lg:col-span-3",children:l.jsxs("div",{className:"h-full rounded-xl border border-gray-200/70 bg-gray-50/80 px-4 py-3 text-sm text-gray-700 shadow-inner",children:[l.jsx("p",{className:"font-semibold text-gray-900",children:"Give it clarity"}),l.jsx("p",{className:"mt-1 text-gray-600",children:"Use short verbs, include the who/where, and set a date so it shows up in the right bucket."})]})}),D&&l.jsx("div",{className:"lg:col-span-12 text-sm text-red-600",children:D})]})]}),l.jsx("div",{className:`${dd} p-0 overflow-hidden`,children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{className:"text-left text-xs uppercase tracking-wide text-gray-500",children:[l.jsx("th",{className:"px-5 py-3",children:"Task"}),l.jsx("th",{className:"px-5 py-3",children:"Due"}),l.jsx("th",{className:"px-5 py-3",children:"Deal"}),l.jsx("th",{className:"px-5 py-3",children:"Status"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100 bg-white/90",children:d?l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"px-5 py-8 text-center text-gray-500 text-sm",children:"Loading tasks"})}):a.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"px-5 py-12 text-center text-gray-500 text-sm",children:"Nothing to show here  take a moment to plan your next steps."})}):a.map(R=>{var ie;return l.jsxs("tr",{className:"hover:bg-[var(--app-surface-muted)]/60 cursor-pointer",onClick:()=>H(R),children:[l.jsx("td",{className:"px-5 py-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("button",{type:"button",className:"pt-1",onClick:ne=>F(R,ne),disabled:w===R.id,"aria-label":"Mark task complete",children:w===R.id?l.jsx(Mt,{className:"h-4 w-4 text-emerald-500 animate-spin"}):R.completed?l.jsx(ki,{className:"h-4 w-4 text-emerald-500"}):l.jsx(h_,{className:"h-4 w-4 text-gray-300"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-gray-900",children:R.title}),((ie=R.deals)==null?void 0:ie.next_task_description)&&l.jsxs("p",{className:"text-xs text-gray-500",children:["Related: ",R.deals.next_task_description]})]})]})}),l.jsx("td",{className:"px-5 py-4 text-sm text-gray-700",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(wc,{className:"h-4 w-4 text-gray-400"}),l.jsx("span",{children:X(R.due_date)})]})}),l.jsx("td",{className:"px-5 py-4 text-sm text-gray-700",children:l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(kh,{className:"h-3.5 w-3.5 text-gray-400"}),l.jsx("span",{className:"font-medium text-gray-900",children:R.deals.client_name})]}),R.deals.property_address&&l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[l.jsx(W3,{className:"h-3 w-3"}),l.jsxs("span",{className:"truncate",children:[R.deals.property_address,R.deals.city?`, ${R.deals.city}`:""]})]})]})}),l.jsx("td",{className:"px-5 py-4 text-sm text-gray-700",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Io,{className:"h-4 w-4 text-gray-400"}),T(R)]})})]},R.id)})})]})})}),l.jsxs("section",{className:`${dd} p-6`,children:[l.jsx("div",{className:"flex items-center justify-between mb-6",children:l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Focus cues"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Where attention is needed"})]})}),l.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[l.jsxs("div",{className:"rounded-2xl border border-red-100/60 bg-red-50/70 p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm font-semibold uppercase tracking-wide",children:[l.jsx(kC,{className:"h-4 w-4"}),"Overdue"]}),l.jsx("p",{className:"mt-2 text-2xl font-semibold text-red-700",children:ee.overdue}),l.jsx("p",{className:"text-xs text-red-600",children:"Tasks waiting on you"})]}),l.jsxs("div",{className:"rounded-2xl border border-amber-100/70 bg-amber-50/60 p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-amber-600 text-sm font-semibold uppercase tracking-wide",children:[l.jsx(Io,{className:"h-4 w-4"}),"Due today"]}),l.jsx("p",{className:"mt-2 text-2xl font-semibold text-amber-700",children:ee.dueToday}),l.jsx("p",{className:"text-xs text-amber-600",children:"Expected before midnight"})]}),l.jsxs("div",{className:"rounded-2xl border border-emerald-100/70 bg-emerald-50/60 p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 text-sm font-semibold uppercase tracking-wide",children:[l.jsx(CC,{className:"h-4 w-4"}),"Upcoming"]}),l.jsx("p",{className:"mt-2 text-2xl font-semibold text-emerald-700",children:ee.upcoming}),l.jsx("p",{className:"text-xs text-emerald-600",children:"On the horizon"})]}),l.jsxs("div",{className:"rounded-2xl border border-gray-100/70 bg-gray-50/80 p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm font-semibold uppercase tracking-wide",children:[l.jsx(h_,{className:"h-4 w-4"}),"Unscheduled"]}),l.jsx("p",{className:"mt-2 text-2xl font-semibold text-gray-700",children:ee.unscheduled}),l.jsx("p",{className:"text-xs text-gray-500",children:"Add due dates to keep momentum"})]})]}),l.jsxs("div",{className:"mt-6 rounded-2xl border border-gray-100/80 bg-[var(--app-surface-muted)] p-5",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Next actionable"}),ee.nextTask?l.jsxs("div",{className:"mt-3 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:ee.nextTask.title}),l.jsx("p",{className:"text-sm text-gray-600",children:ee.nextTask.deals.client_name})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[l.jsx(wc,{className:"h-4 w-4 text-gray-400"}),l.jsx("span",{children:X(ee.nextTask.due_date)})]})]}):l.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"No dated tasks remain. Assign due dates to keep focus on high-leverage work."})]})]}),_&&S&&l.jsx(XD,{deal:S,onClose:ve,onDelete:ve})]})}const RS="rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_8px_20px_rgba(15,23,42,0.08)]",VZ="inline-flex items-center gap-2 rounded-2xl border border-white/80 bg-white/80 px-4 py-1.5 text-sm font-medium text-gray-700 shadow-inner transition hover:-translate-y-0.5 hover:border-[var(--app-accent)]/40 hover:text-gray-900";function GZ(){const[e,t]=p.useState([]),[r,n]=p.useState(""),[a,i]=p.useState(!1),s=["Show me the deals expected to close this month.","Which clients need new activity this week?","Summarize my pipeline stage mix.","How is my projected GCI pacing for Q3?","Who owns the next step on the Torres deal?"],o=async u=>{if(u.preventDefault(),!r.trim()||a)return;const d={role:"user",content:r};t(f=>[...f,d]),n(""),i(!0);try{const{data:{session:f}}=await Y.auth.getSession();if(!f)throw new Error("Not authenticated");const h="https://gomwhbewjdcllejifdyf.supabase.co/functions/v1/luma-query",m={Authorization:`Bearer ${f.access_token}`,"Content-Type":"application/json"},g=e.slice(-6).map(w=>({role:w.role,content:w.content})),v=await(await fetch(h,{method:"POST",headers:m,body:JSON.stringify({query:d.content,conversation_history:g})})).json();if(v.error)throw new Error(v.error);const x={role:"assistant",content:v.answer,supportingData:v.supporting_data};t(w=>[...w,x])}catch(f){console.error("Luma query error:",f);const h={role:"assistant",content:"Sorry, I encountered an error processing your request. Please try again."};t(m=>[...m,h])}finally{i(!1)}},c=u=>{n(u)};return l.jsxs("div",{className:"flex h-full flex-col gap-6",children:[l.jsx("section",{className:`${RS} space-y-4 bg-white/95 px-6 py-6 sm:px-8 sm:py-8`,children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-gray-500",children:"Luma AI"}),l.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Chat with your data-aware copilot"}),l.jsx("p",{className:"max-w-3xl text-sm text-gray-600",children:"Ask natural questions about deals, tasks, lead sources, or performance and get calm answers without breaking your workflow. Luma keeps context from your workspace so you can move quickly."})]})}),l.jsxs("section",{className:`${RS} flex flex-1 flex-col overflow-hidden bg-gradient-to-b from-[#f5f9ff] to-white`,children:[l.jsxs("div",{className:"border-b border-white/60 px-4 py-5 sm:px-6",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-gray-500",children:"Conversation"}),l.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Bring up deals, follow-ups, or performance goalsLuma replies with grounded insight."})]}),l.jsxs("div",{className:"border-b border-white/60 px-4 py-4 sm:px-6",children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-gray-400",children:"Starter prompts"}),l.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:s.map((u,d)=>l.jsxs("button",{type:"button",onClick:()=>c(u),className:VZ,children:[l.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-gray-300"}),u]},d))})]}),l.jsxs("div",{className:"flex-1 space-y-4 overflow-y-auto px-4 py-6 pr-2 sm:px-6",children:[e.map((u,d)=>l.jsx("div",{className:`flex ${u.role==="user"?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:`max-w-3xl rounded-3xl px-5 py-4 ${u.role==="user"?"bg-[var(--app-accent)] text-white shadow-[0_25px_50px_rgba(0,122,255,0.25)]":"border border-white/80 bg-white/90 shadow-[0_15px_30px_rgba(15,23,42,0.08)]"}`,children:[u.role==="assistant"&&l.jsxs("div",{className:"mb-3 flex items-center gap-2 text-gray-500",children:[l.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-[var(--app-accent)]/10 text-[var(--app-accent)]",children:l.jsx(ws,{className:"h-4 w-4",strokeWidth:2})}),l.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Luma"})]}),l.jsx("div",{className:`whitespace-pre-wrap text-sm leading-relaxed ${u.role==="user"?"text-white":"text-gray-900"}`,children:u.content}),u.supportingData&&l.jsx("div",{className:"mt-4 border-t border-gray-100 pt-4",children:l.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[u.supportingData.total_deals!==void 0&&l.jsx(Ys,{label:"Total Deals",value:u.supportingData.total_deals,accent:"blue"}),u.supportingData.total_gci!==void 0&&l.jsx(Ys,{label:"Total GCI",value:`$${u.supportingData.total_gci.toLocaleString("en-US",{maximumFractionDigits:0})}`,accent:"green"}),u.supportingData.closed_deals!==void 0&&l.jsx(Ys,{label:"Closed Deals",value:u.supportingData.closed_deals,accent:"indigo"}),u.supportingData.active_deals!==void 0&&l.jsx(Ys,{label:"Active Deals",value:u.supportingData.active_deals,accent:"orange"}),u.supportingData.under_contract!==void 0&&l.jsx(Ys,{label:"Under Contract",value:u.supportingData.under_contract,accent:"purple"}),u.supportingData.team_members!==void 0&&l.jsx(Ys,{label:"Team Members",value:u.supportingData.team_members,accent:"teal"})]})})]})},d)),a&&l.jsx("div",{className:"flex justify-start",children:l.jsxs("div",{className:"max-w-3xl rounded-3xl border border-white/80 bg-white/90 px-5 py-4 shadow-[0_15px_30px_rgba(15,23,42,0.08)]",children:[l.jsxs("div",{className:"mb-2 flex items-center gap-2 text-gray-500",children:[l.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-[var(--app-accent)]/10 text-[var(--app-accent)]",children:l.jsx(ws,{className:"h-4 w-4"})}),l.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Luma"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400"}),l.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400",style:{animationDelay:"0.1s"}}),l.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400",style:{animationDelay:"0.2s"}})]})]})})]}),l.jsx("form",{onSubmit:o,className:"border-t border-white/60 bg-white/80 px-4 py-4 backdrop-blur sm:px-6",children:l.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end",children:[l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsx("div",{className:"rounded-2xl border border-[#d0e2ff] bg-white px-4 py-3 shadow-inner focus-within:border-[var(--app-accent)]/40 focus-within:ring-2 focus-within:ring-[var(--app-accent)]/15",children:l.jsx("input",{type:"text",value:r,onChange:u=>n(u.target.value),placeholder:"Ask Luma anything about your pipeline...",className:"w-full border-none bg-transparent text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none",disabled:a})}),l.jsx("p",{className:"text-[11px] text-gray-500",children:"Enter to send  Luma respects the same roles as PipelineIQ."})]}),l.jsxs("button",{type:"submit",disabled:a||!r.trim(),className:"inline-flex items-center justify-center gap-2 rounded-2xl bg-[rgb(0,122,255)] px-6 py-3 text-sm font-semibold text-white shadow-[0_20px_40px_rgba(0,122,255,0.35)] transition hover:bg-[rgb(0,100,210)] disabled:opacity-60",children:[l.jsx(X3,{className:"h-4 w-4"}),l.jsx("span",{children:"Send"})]})]})})]})]})}const YZ={blue:"from-blue-50 to-blue-100 text-blue-900",green:"from-emerald-50 to-emerald-100 text-emerald-900",indigo:"from-indigo-50 to-indigo-100 text-indigo-900",orange:"from-orange-50 to-orange-100 text-orange-900",purple:"from-purple-50 to-purple-100 text-purple-900",teal:"from-teal-50 to-teal-100 text-teal-900"};function Ys({label:e,value:t,accent:r}){return l.jsxs("div",{className:`rounded-2xl bg-gradient-to-br ${YZ[r]} px-4 py-3`,children:[l.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-500",children:e}),l.jsx("div",{className:"text-xl font-semibold text-gray-900",children:t})]})}function XZ({status:e,onEdit:t,onDelete:r}){const{attributes:n,listeners:a,setNodeRef:i,transform:s,transition:o,isDragging:c}=Lh({id:e.id}),u={transform:Kn.Transform.toString(s),transition:o,opacity:c?.5:1},d=Bh(e.color);return l.jsxs("div",{ref:i,style:u,className:"bg-white border border-gray-200/60 rounded-xl p-4 flex items-center gap-4 hover:shadow-sm hover:border-gray-300 transition-all",children:[l.jsx("div",{...n,...a,className:"cursor-grab active:cursor-grabbing",children:l.jsx(k0,{className:"w-5 h-5 text-gray-400"})}),l.jsxs("div",{className:"flex-1 flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-4 h-4 rounded-full shadow-sm",style:{backgroundColor:d.bg}}),l.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.name})]}),l.jsxs("span",{className:"text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded-lg",children:["Order: ",e.sort_order]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>t(e),className:"p-2 text-gray-600 hover:text-[rgb(0,122,255)] hover:bg-blue-50 rounded-lg transition",title:"Edit status",children:l.jsx(RC,{className:"w-4 h-4",strokeWidth:2})}),l.jsx("button",{onClick:()=>r(e.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete status",children:l.jsx(Ci,{className:"w-4 h-4",strokeWidth:2})})]})]})}function JZ({status:e,onPersonalize:t,onResetOverride:r,hasPersonalOverride:n}){const a=Bh(e.color);return l.jsxs("div",{className:"bg-white border border-gray-200/60 rounded-xl p-4 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:a.bg}}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.name}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Order ",e.sort_order]}),n&&l.jsx("p",{className:"text-[11px] font-semibold text-[rgb(0,122,255)]",children:"Personalized"})]})]}),t?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>t(e),className:"px-3 py-1.5 text-xs font-semibold text-[rgb(0,122,255)] hover:bg-blue-50 rounded-lg transition",children:"Personalize color"}),n&&r&&l.jsx("button",{onClick:()=>r(e.id),className:"px-3 py-1.5 text-xs font-semibold text-gray-500 hover:bg-gray-100 rounded-lg transition",children:"Reset"})]}):l.jsx("span",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:"View only"})]})}function QZ({canEdit:e=!0}){const{statuses:t,loading:r,addStatus:n,updateStatus:a,deleteStatus:i,reorderStatuses:s,applyTemplate:o,createCustomWorkflow:c,colorOverrides:u,setPersonalStatusColor:d,clearPersonalStatusColor:f}=JD(),[h,m]=p.useState(!1),[g,y]=p.useState(!1),[v,x]=p.useState(null),[w,b]=p.useState(""),[_,j]=p.useState(Zs),[S,N]=p.useState(null),[k,C]=p.useState(!1),[E,O]=p.useState(null),[A,q]=p.useState(null),J=Ah(Oh(rl,{activationConstraint:{distance:8}})),Z=async P=>{const{active:V,over:te}=P;if(!te||V.id===te.id)return;const $=t.findIndex(Q=>Q.id===V.id),X=t.findIndex(Q=>Q.id===te.id),T=[...t],[H]=T.splice($,1);T.splice(X,0,H);try{await s(T)}catch(Q){console.error("Error reordering:",Q),N("Failed to reorder statuses")}},B=async()=>{if(!w.trim()){N("Status name is required");return}C(!0),N(null);try{v?await a(v.id,{name:w.trim(),color:_}):await n(w.trim(),_),K()}catch(P){console.error("Error saving status:",P),N(P instanceof Error?P.message:"Failed to save status")}finally{C(!1)}},K=()=>{y(!1),x(null),b(""),j(Zs),N(null)},D=async P=>{if(confirm("Are you sure you want to delete this status? This action cannot be undone."))try{await i(P)}catch(V){console.error("Error deleting status:",V),N(V instanceof Error?V.message:"Failed to delete status")}},M=P=>{x(P),b(P.name),j(Fh(P.color)||Zs),y(!0)},L=async P=>{try{await o(P)}catch(V){throw console.error("Error applying template:",V),V}},oe=P=>{O(P),q(P.color||Zs)},ee=()=>{!E||!A||(d(E.id,A),O(null))},ye=P=>{if(!E&&!P)return;const V=P||(E==null?void 0:E.id);V&&(f(V),P||O(null))};return r?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx(Mt,{className:"w-8 h-8 animate-spin text-[rgb(0,122,255)]"})}):l.jsxs("div",{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Pipeline Statuses"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Customize your pipeline stages, colors, and workflow order"}),!e&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Viewing workspace stages from your workspace. You can personalize colors without changing the shared setup."})]}),S&&l.jsxs("div",{className:"mb-4 flex items-center gap-3 p-4 rounded-xl bg-red-50 text-red-700 border border-red-200/60",children:[l.jsx(Ta,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:S})]}),e&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-6",children:[l.jsxs("button",{onClick:()=>{b(""),j(Zs),y(!0)},className:"hig-btn-primary",children:[l.jsx(Da,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Add Status"})]}),l.jsxs("button",{onClick:()=>m(!0),className:"hig-btn-secondary",children:[l.jsx(Y3,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Load Template"})]})]}),h&&l.jsx(QD,{onClose:()=>m(!1),onSelect:L,onCreateCustomWorkflow:c})]}),t.length===0?l.jsxs("div",{className:"bg-gray-50 rounded-xl p-12 text-center border border-gray-200/60",children:[l.jsx("p",{className:"text-gray-600 mb-4",children:"No pipeline stages configured"}),e?l.jsx("button",{onClick:()=>m(!0),className:"hig-btn-primary",children:"Load a Template to Get Started"}):l.jsx("p",{className:"text-sm text-gray-500",children:"Ask an admin to configure stages for this workspace."})]}):e?l.jsx(Ih,{sensors:J,collisionDetection:O0,onDragEnd:Z,children:l.jsx($h,{items:t.map(P=>P.id),strategy:hE,children:l.jsx("div",{className:"space-y-3",children:t.map(P=>l.jsx(XZ,{status:P,onEdit:M,onDelete:D},P.id))})})}):l.jsx("div",{className:"space-y-3",children:t.map(P=>l.jsx(JZ,{status:P,hasPersonalOverride:!!u[P.id],onPersonalize:e?void 0:oe,onResetOverride:e?void 0:()=>ye(P.id)},P.id))}),e&&g&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[l.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200/60",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:v?"Edit Status":"Add New Status"}),l.jsx("button",{onClick:K,className:"text-gray-400 hover:text-gray-600 transition p-2 hover:bg-gray-100 rounded-lg",children:l.jsx(_s,{className:"w-5 h-5",strokeWidth:2})})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Status Name"}),l.jsx("input",{type:"text",value:w,onChange:P=>b(P.target.value),className:"hig-input",placeholder:"e.g., Inspection, Appraisal",autoFocus:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:"Color"}),l.jsx(TS,{value:_,onChange:j})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200/60 bg-gray-50/50",children:[l.jsx("button",{onClick:K,className:"hig-btn-secondary",children:"Cancel"}),l.jsx("button",{onClick:B,disabled:k||!w.trim(),className:"hig-btn-primary",children:k?l.jsxs(l.Fragment,{children:[l.jsx(Mt,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving..."})]}):l.jsxs("span",{children:[v?"Update":"Add"," Status"]})})]})]})}),!e&&E&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[l.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200/60",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:['Personalize "',E.name,'"']}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Changes apply only to your view. Workspace defaults stay intact."})]}),l.jsx("button",{onClick:()=>O(null),className:"text-gray-400 hover:text-gray-600 transition p-2 hover:bg-gray-100 rounded-lg",children:l.jsx(_s,{className:"w-5 h-5",strokeWidth:2})})]}),l.jsx("div",{className:"p-6 space-y-6",children:l.jsx(TS,{value:A,onChange:q})}),l.jsxs("div",{className:"flex justify-between items-center gap-3 p-6 border-t border-gray-200/60 bg-gray-50/50",children:[l.jsx("button",{onClick:()=>ye(),className:"text-sm font-semibold text-gray-600 hover:text-gray-800 hover:bg-gray-100 px-3 py-2 rounded-lg transition",children:"Use workspace default"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>O(null),className:"hig-btn-secondary",children:"Cancel"}),l.jsx("button",{onClick:ee,className:"hig-btn-primary",children:"Save for me"})]})]})]})})]})}const Xs=()=>({name:"",brokerage_split_rate:20,payout_structure:"standard",partnership_split_rate:35,partnership_notes:""});function ZZ({canEdit:e=!0}){const{user:t,roleInfo:r}=St(),n=(r==null?void 0:r.teamId)||null,[a,i]=p.useState([]),[s,o]=p.useState(!0),[c,u]=p.useState(!1),[d,f]=p.useState(!1),[h,m]=p.useState(null),[g,y]=p.useState(null),[v,x]=p.useState(Xs()),[w,b]=p.useState(null),[_,j]=p.useState("all"),[S,N]=p.useState("");p.useEffect(()=>{k()},[t==null?void 0:t.id,n]);const k=async()=>{if(t){o(!0);try{const{data:D,error:M}=n?await Y.from("lead_sources").select("*").eq("team_id",n).order("sort_order",{ascending:!0,nullsLast:!0}).order("name",{ascending:!0}):{data:null,error:null};if(M)throw M;const L=!!(D!=null&&D.length),{data:oe,error:ee}=L?{data:D,error:null}:await Y.from("lead_sources").select("*").eq("user_id",t.id).order("sort_order",{ascending:!0,nullsLast:!0}).order("name",{ascending:!0});if(ee)throw ee;if(!oe){i([]),o(!1);return}const ye=[...oe].sort((V,te)=>V.sort_order===te.sort_order?V.name.localeCompare(te.name):(V.sort_order??0)-(te.sort_order??0));if(ye.some((V,te)=>V.sort_order!==te+1)){const V=ye.map((te,$)=>({...te,sort_order:$+1}));i(V),await Promise.all(V.map((te,$)=>Y.from("lead_sources").update({sort_order:$+1}).eq("id",te.id)))}else i(ye)}catch(D){console.error("Error loading lead sources:",D),b(D instanceof Error?D.message:"Failed to load lead sources")}finally{o(!1)}}},C=async D=>{if(D.preventDefault(),!e||!t||!v.name.trim()){b("Lead source name is required");return}if(!(r!=null&&r.workspaceId)){b("Workspace is required to add a lead source.");return}u(!0),b(null);try{const M=parseFloat(v.brokerage_split_rate||""),L=Number.isNaN(M)?0:M,oe=v.partnership_split_rate??0,ee=Number.isNaN(oe)?0:oe,ye={name:v.name,team_id:n,brokerage_split_rate:L/100,payout_structure:v.payout_structure,partnership_split_rate:v.payout_structure==="partnership"?ee/100:null,partnership_notes:v.payout_structure==="partnership"&&v.partnership_notes.trim()||null,workspace_id:r.workspaceId};if(h){const{error:P}=await Y.from("lead_sources").update(ye).eq("id",h.id);if(P)throw P}else{const P=a.reduce((te,$)=>Math.max(te,$.sort_order??0),0),{error:V}=await Y.from("lead_sources").insert({user_id:t.id,sort_order:P+1,...ye});if(V)throw V}f(!1),x(Xs()),m(null),k()}catch(M){console.error("Error saving lead source:",M),b(M instanceof Error?M.message:"Failed to save lead source")}finally{u(!1)}},E=D=>{e&&(m(D),x({name:D.name,brokerage_split_rate:D.brokerage_split_rate*100,payout_structure:D.payout_structure,partnership_split_rate:(D.partnership_split_rate??.35)*100,partnership_notes:D.partnership_notes||""}),f(!0),b(null))},O=async D=>{if(e&&confirm("Are you sure you want to delete this lead source? This action cannot be undone."))try{const{error:M}=await Y.from("lead_sources").delete().eq("id",D);if(M)throw M;k()}catch(M){console.error("Error deleting lead source:",M),b(M instanceof Error?M.message:"Failed to delete lead source")}},A=[{value:"standard",title:"Standard Split",description:"Only your brokerage split applies."},{value:"partnership",title:"Partnership Program",description:"Pay the partner first, then split the remainder with your brokerage."}],q=[{value:"all",label:"All sources"},{value:"standard",label:"Standard"},{value:"partnership",label:"Partnership"}],J=Ah(Oh(rl,{activationConstraint:{distance:3}})),Z=p.useMemo(()=>{const D=S.trim().toLowerCase();return a.filter(M=>{const L=_==="all"||M.payout_structure===_,oe=!D||[M.name,M.partnership_notes||""].some(ee=>ee.toLowerCase().includes(D));return L&&oe})},[a,S,_]),B=e&&_==="all"&&S.trim()==="",K=async D=>{if(y(null),!B)return;const{active:M,over:L}=D;if(!L||M.id===L.id)return;const oe=a.findIndex($=>$.id===M.id),ee=a.findIndex($=>$.id===L.id);if(oe===-1||ee===-1)return;const P=Rh(a,oe,ee).map(($,X)=>({...$,sort_order:X+1}));i(P);const V=new Map(a.map($=>[$.id,$.sort_order])),te=P.filter($=>$.sort_order!==V.get($.id));try{te.length>0&&await Promise.all(te.map($=>Y.from("lead_sources").update({sort_order:$.sort_order}).eq("id",$.id)))}catch($){console.error("Error reordering lead sources:",$),b("Unable to save lead source order. Please try again."),k()}};return s?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx(Mt,{className:"w-8 h-8 animate-spin text-[rgb(0,122,255)]"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"space-y-3",children:l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"hig-text-heading mb-1",children:"Lead Sources"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Track partner programs, portals, and referral channels."}),!e&&l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"You can review workspace lead sources. Only admins can make edits."})]}),e&&l.jsxs("button",{onClick:()=>{f(!0),m(null),x(Xs()),b(null)},className:"hig-btn-primary self-start",children:[l.jsx(Da,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Add Lead Source"})]})]})}),w&&l.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-red-200/70 bg-red-50 px-4 py-3 text-red-700",children:[l.jsx(Ta,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:w})]}),l.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{className:"relative w-full md:w-72",children:[l.jsx(C0,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",value:S,onChange:D=>N(D.target.value),placeholder:"Search lead sources",className:"w-full rounded-2xl border border-gray-200/70 bg-white/90 py-2 pl-9 pr-3 text-sm text-gray-900 shadow-inner focus:border-[var(--app-accent)]/50 focus:ring-2 focus:ring-[var(--app-accent)]/20"})]}),l.jsx("div",{className:"inline-flex flex-wrap gap-2 rounded-2xl border border-gray-200/70 bg-white/80 p-1.5 shadow-inner",children:q.map(D=>{const M=_===D.value;return l.jsx("button",{type:"button",onClick:()=>j(D.value),className:`rounded-xl px-3 py-1.5 text-sm font-medium transition ${M?"bg-gray-900 text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:D.label},D.value)})})]}),e&&l.jsx("p",{className:"text-xs text-gray-400",children:"Drag handles appear when viewing all sources without filters so you can reorder tiles."}),a.length===0?l.jsxs("div",{className:"rounded-2xl border border-dashed border-gray-300 bg-gray-50/80 p-10 text-center",children:[l.jsx(FC,{className:"mx-auto mb-4 h-10 w-10 text-gray-400",strokeWidth:1.5}),l.jsx("p",{className:"text-gray-600 mb-2 font-medium",children:"No lead sources configured"}),l.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Add your first lead source to start tracking where your deals originate."}),e?l.jsxs("button",{onClick:()=>{f(!0),m(null),x(Xs()),b(null)},className:"hig-btn-primary",children:[l.jsx(Da,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Add Lead Source"})]}):l.jsx("p",{className:"text-xs text-gray-500",children:"Ask a workspace admin to configure lead sources."})]}):Z.length===0?l.jsx("div",{className:"rounded-2xl border border-gray-200/70 bg-white/80 p-10 text-center text-sm text-gray-500",children:"No sources match your filters."}):l.jsxs(Ih,{sensors:J,collisionDetection:O0,onDragStart:D=>{const M=a.find(L=>L.id===D.active.id);y(M||null)},onDragEnd:K,onDragCancel:()=>y(null),children:[l.jsx($h,{items:Z.map(D=>D.id),strategy:Mh,children:l.jsx("div",{className:"grid w-full gap-4",style:{gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))"},children:Z.map(D=>l.jsx(eee,{source:D,canEdit:e,disableDrag:!B,onEdit:()=>E(D),onDelete:()=>O(D.id)},D.id))})}),l.jsx(fE,{dropAnimation:{duration:200,easing:"ease"},children:g?l.jsx(tee,{source:g}):null})]}),e&&d&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[l.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200/60",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:h?"Edit Lead Source":"Add Lead Source"}),l.jsx("button",{onClick:()=>{f(!1),m(null),x(Xs()),b(null)},className:"text-gray-400 hover:text-gray-600 transition p-2 hover:bg-gray-100 rounded-lg",children:l.jsx(_s,{className:"w-5 h-5",strokeWidth:2})})]}),l.jsxs("form",{onSubmit:C,className:"p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Source Name"}),l.jsx("input",{type:"text",value:v.name,onChange:D=>x({...v,name:D.target.value}),className:"hig-input",placeholder:"e.g., Zillow, Past Client, Open House",required:!0,autoFocus:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:"Deal Structure"}),l.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:A.map(D=>{const M=v.payout_structure===D.value;return l.jsxs("button",{type:"button",onClick:()=>x({...v,payout_structure:D.value}),className:`text-left rounded-2xl border p-4 transition-all ${M?"border-[rgb(0,122,255)] bg-[rgb(0,122,255)]/5":"border-gray-200 hover:border-gray-300"}`,children:[l.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-1",children:D.title}),l.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:D.description})]},D.value)})}),l.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Choose partnership when working with platforms like Redfin or Zillow that take their fee before your team split."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Brokerage Split Rate"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",step:"0.5",value:v.brokerage_split_rate,onChange:D=>x({...v,brokerage_split_rate:Number.isNaN(parseFloat(D.target.value))?0:parseFloat(D.target.value)}),className:"hig-input pr-8",placeholder:"20",min:"0",max:"100"}),l.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]}),l.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Percentage of the remaining commission that goes to your brokerage/team."})]}),v.payout_structure==="partnership"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Partner Split Rate"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",step:"0.5",value:v.partnership_split_rate,onChange:D=>x({...v,partnership_split_rate:Number.isNaN(parseFloat(D.target.value))?0:parseFloat(D.target.value)}),className:"hig-input pr-8",placeholder:"35",min:"0",max:"100"}),l.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]}),l.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Portion of the gross commission that goes to the partner program before any brokerage split."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Partner Notes"}),l.jsx("textarea",{value:v.partnership_notes,onChange:D=>x({...v,partnership_notes:D.target.value}),className:"hig-input min-h-[88px]",placeholder:"e.g., Pay Redfin 35% within 5 days, then 50/50 split with brokerage"})]})]}),l.jsxs("div",{className:"rounded-2xl border border-gray-200/70 bg-gray-50/60 p-4",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-3",children:"Payout Preview"}),l.jsxs("ol",{className:"space-y-3 text-sm text-gray-800",children:[v.payout_structure==="partnership"&&l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"inline-flex w-7 h-7 items-center justify-center rounded-full bg-[rgb(0,122,255)]/10 text-[rgb(0,122,255)] text-xs font-semibold",children:"1"}),"Pay partner first (",v.partnership_split_rate||0,"% of gross commission)"]}),l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"inline-flex w-7 h-7 items-center justify-center rounded-full bg-[rgb(0,122,255)]/10 text-[rgb(0,122,255)] text-xs font-semibold",children:v.payout_structure==="partnership"?"2":"1"}),"Split the remaining commission with your brokerage (",v.brokerage_split_rate||0,"% to broker)"]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-2 border-t border-gray-200/60",children:[l.jsx("button",{type:"button",onClick:()=>{f(!1),m(null),x(Xs()),b(null)},className:"hig-btn-secondary",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:c||!v.name.trim(),className:"hig-btn-primary",children:c?l.jsxs(l.Fragment,{children:[l.jsx(Mt,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving..."})]}):l.jsxs("span",{children:[h?"Update":"Add"," Source"]})})]})]})]})})]})}function eee({source:e,canEdit:t,disableDrag:r,onEdit:n,onDelete:a}){const{attributes:i,listeners:s,setNodeRef:o,transform:c,transition:u,isDragging:d}=Lh({id:e.id,disabled:r}),f={transform:Kn.Transform.toString(c),transition:u??"transform 200ms ease"},h=e.payout_structure==="partnership",m=`${(e.brokerage_split_rate*100).toFixed(1)}%`,g=h?`${((e.partnership_split_rate??0)*100).toFixed(1)}%`:null;return l.jsxs("div",{ref:o,style:f,className:`w-full rounded-[24px] border border-gray-200/80 bg-white/95 p-4 shadow-[0_14px_40px_rgba(15,23,42,0.08)] transition ${d?"ring-2 ring-[var(--app-accent)]/40 shadow-[0_20px_50px_rgba(15,23,42,0.15)]":"hover:border-gray-300/80 hover:shadow-[0_24px_60px_rgba(15,23,42,0.12)]"}`,children:[l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[t&&l.jsx("button",{type:"button",...i,...s,disabled:r,className:`rounded-full border border-gray-200/70 bg-white/80 p-2 text-gray-400 transition ${r?"cursor-not-allowed opacity-40":"cursor-grab hover:text-gray-700 active:cursor-grabbing"}`,"aria-label":"Drag to reorder lead source",children:l.jsx(k0,{className:"h-4 w-4"})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-1 text-[11px] font-semibold tracking-[0.35em] text-gray-500",children:[h?l.jsx(AC,{className:"h-3 w-3 text-[var(--app-accent)]",strokeWidth:2}):l.jsx(ws,{className:"h-3 w-3 text-gray-500",strokeWidth:2}),l.jsx("span",{className:h?"text-[var(--app-accent)]":"",children:h?"PARTNERSHIP":"STANDARD"})]}),l.jsx("h3",{className:"mt-1 text-base font-semibold text-gray-900",children:e.name})]})]}),t?l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:n,className:"rounded-xl p-1.5 text-gray-600 transition hover:bg-blue-50 hover:text-[var(--app-accent)]",title:"Edit lead source",children:l.jsx(RC,{className:"h-4 w-4",strokeWidth:2})}),l.jsx("button",{onClick:a,className:"rounded-xl p-1.5 text-gray-600 transition hover:bg-red-50 hover:text-red-600",title:"Delete lead source",children:l.jsx(Ci,{className:"h-4 w-4",strokeWidth:2})})]}):l.jsx("span",{className:"text-[11px] uppercase tracking-[0.35em] text-gray-400",children:"View only"})]}),l.jsxs("div",{className:"mt-4 rounded-[20px] border border-gray-100 bg-gray-50/80 px-3 py-3 text-sm",children:[h&&g&&l.jsxs("div",{className:"mb-2 flex items-center justify-between text-gray-600",children:[l.jsx("span",{children:"Partner share"}),l.jsx("span",{className:"font-semibold text-gray-900",children:g})]}),l.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[l.jsx("span",{children:"Broker split"}),l.jsx("span",{className:"font-semibold text-gray-900",children:m})]})]}),e.partnership_notes&&l.jsx("p",{className:"mt-3 rounded-[18px] border border-gray-100 bg-white/80 px-3 py-2 text-[12px] text-gray-600 shadow-inner line-clamp-2",children:e.partnership_notes})]})}function tee({source:e}){const t=e.payout_structure==="partnership",r=`${(e.brokerage_split_rate*100).toFixed(1)}%`,n=t?`${((e.partnership_split_rate??0)*100).toFixed(1)}%`:null;return l.jsxs("div",{className:"w-full rounded-[24px] border border-gray-200/80 bg-white/95 p-4 shadow-[0_18px_40px_rgba(15,23,42,0.15)]",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[11px] font-semibold tracking-[0.35em] text-gray-500",children:[t?l.jsx(AC,{className:"h-3.5 w-3.5 text-[var(--app-accent)]",strokeWidth:2}):l.jsx(ws,{className:"h-3.5 w-3.5 text-gray-500",strokeWidth:2}),l.jsx("span",{className:t?"text-[var(--app-accent)]":"",children:t?"PARTNERSHIP":"STANDARD"})]}),l.jsx("h3",{className:"mt-2 text-base font-semibold text-gray-900",children:e.name}),l.jsxs("div",{className:"mt-4 rounded-[20px] border border-gray-100 bg-gray-50/80 px-3 py-3 text-sm",children:[t&&n&&l.jsxs("div",{className:"mb-2 flex items-center justify-between text-gray-600",children:[l.jsx("span",{children:"Partner share"}),l.jsx("span",{className:"font-semibold text-gray-900",children:n})]}),l.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[l.jsx("span",{children:"Broker split"}),l.jsx("span",{className:"font-semibold text-gray-900",children:r})]})]})]})}function ZD(){const{roleInfo:e}=St(),t=(e==null?void 0:e.workspaceId)||null,[r,n]=p.useState(null),[a,i]=p.useState(!0),[s,o]=p.useState(null),c=p.useCallback(async()=>{if(!t){n(null),i(!1);return}i(!0),o(null);const{data:d,error:f}=await Y.from("workspace_settings").select("*").eq("id",t).maybeSingle();f?(console.error("Error loading workspace settings:",f),o("Unable to load workspace settings.")):n(d),i(!1)},[t]);return p.useEffect(()=>{c()},[c]),{workspace:r,loading:a,error:s,refresh:c,updateWorkspace:async d=>{if(!t)return{error:new Error("Workspace not found")};const{data:f,error:h}=await Y.from("workspace_settings").update({...d,updated_at:new Date().toISOString()}).eq("id",t).select("*").maybeSingle();return h?(console.error("Error updating workspace settings:",h),{error:h}):(f&&n(f),{error:null})}}}function ree({canEdit:e}){const{workspace:t,loading:r,updateWorkspace:n}=ZD(),[a,i]=p.useState({name:"",company_name:"",timezone:"America/Los_Angeles",locale:"en-US"}),[s,o]=p.useState(!1),[c,u]=p.useState(null);p.useEffect(()=>{t&&i({name:t.name||"",company_name:t.company_name||"",timezone:t.timezone||"America/Los_Angeles",locale:t.locale||"en-US"})},[t]);const d=async f=>{if(f.preventDefault(),!e)return;o(!0),u(null);const{error:h}=await n(a);u(h?{type:"error",text:"Unable to update workspace info."}:{type:"success",text:"Workspace updated."}),o(!1)};return r?l.jsx("div",{className:"flex items-center justify-center py-10",children:l.jsx(Mt,{className:"w-6 h-6 animate-spin text-[var(--app-accent)]"})}):l.jsxs("div",{className:"max-w-2xl",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Company Info"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Company identity, locale, and defaults shared with your agents and teams."}),!e&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Workspace details are managed by admins. You can view but not edit."})]}),l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Company Name"}),l.jsx("input",{type:"text",value:a.name,onChange:f=>i(h=>({...h,name:f.target.value})),className:"hig-input",disabled:!e,placeholder:"Luminex Realty Group"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Timezone"}),l.jsxs("select",{value:a.timezone,onChange:f=>i(h=>({...h,timezone:f.target.value})),className:"hig-input",disabled:!e,children:[l.jsx("option",{value:"America/Los_Angeles",children:"Pacific (PT)"}),l.jsx("option",{value:"America/Denver",children:"Mountain (MT)"}),l.jsx("option",{value:"America/Chicago",children:"Central (CT)"}),l.jsx("option",{value:"America/New_York",children:"Eastern (ET)"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Locale"}),l.jsxs("select",{value:a.locale,onChange:f=>i(h=>({...h,locale:f.target.value})),className:"hig-input",disabled:!e,children:[l.jsx("option",{value:"en-US",children:"English (US)"}),l.jsx("option",{value:"en-CA",children:"English (Canada)"}),l.jsx("option",{value:"es-US",children:"Espaol"})]})]})]}),c&&l.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${c.type==="error"?"bg-red-50 text-red-700 border-red-200/60":"bg-green-50 text-green-700 border-green-200/60"}`,children:[c.type==="error"?l.jsx(Ta,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}):l.jsx(ki,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:c.text})]}),e&&l.jsx("button",{type:"submit",className:"hig-btn-primary",disabled:s,children:s?l.jsxs(l.Fragment,{children:[l.jsx(Mt,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving"})]}):l.jsxs(l.Fragment,{children:[l.jsx(Sh,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Save Workspace"})]})})]})]})}const MS={crm:{provider:"Follow Up Boss",description:"Sync contacts + deals bi-directionally.",status:"not_connected"},email:{provider:"Google Workspace",description:"Log emails to deals and trigger automations.",status:"not_connected"},marketing:{provider:"Zapier",description:"Push new leads into PipelineIQ automatically.",status:"not_connected"}};function nee({canEdit:e}){const{workspace:t,updateWorkspace:r}=ZD(),[n,a]=p.useState(MS),[i,s]=p.useState(null);p.useEffect(()=>{if(t!=null&&t.integration_settings){const c=t.integration_settings;a({...MS,...c})}},[t==null?void 0:t.integration_settings]);const o=async c=>{if(!e)return;s(c);const u=n[c].status==="connected"?"not_connected":"connected",d={...n,[c]:{...n[c],status:u,lastSync:u==="connected"?new Date().toISOString():void 0}};a(d),await r({integration_settings:d}),s(null)};return l.jsxs("div",{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Integrations"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Connect your CRM, email, and marketing tools so deals stay in sync."}),!e&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only workspace admins can manage integrations."})]}),l.jsx("div",{className:"space-y-4",children:Object.entries(n).map(([c,u])=>l.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-gray-200/70 bg-white/80 px-4 py-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:u.provider}),l.jsx("p",{className:"text-xs text-gray-500",children:u.description}),u.lastSync&&l.jsxs("p",{className:"text-[11px] text-gray-400 mt-1",children:["Last sync ",new Date(u.lastSync).toLocaleString()]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:`text-xs font-semibold ${u.status==="connected"?"text-emerald-600":"text-gray-500"}`,children:u.status==="connected"?"Connected":"Not connected"}),l.jsx("button",{type:"button",onClick:()=>o(c),disabled:!e||i===c,className:`rounded-full border px-4 py-2 text-sm font-semibold transition ${u.status==="connected"?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-gray-50 text-gray-600 border-gray-200"} ${e?"":"opacity-50 cursor-not-allowed"}`,children:u.status==="connected"?l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(Q3,{className:"w-4 h-4"}),"Disconnect"]}):l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(J3,{className:"w-4 h-4"}),"Connect"]})})]})]},c))})]})}const aee=[{title:"Deal Templates",description:"Define repeatable sets of tasks, stages, and documents for each pipeline type."},{title:"Custom Fields",description:"Capture additional data points (loan type, co-borrower, transaction coordinator) across every deal."},{title:"Default Views",description:"Control which boards, filters, and metrics new team members inherit on first login."}];function iee({canEdit:e}){return l.jsxs("div",{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Shared Configuration"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Templates, custom fields, and default views that keep your workspace aligned."}),!e&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ask an admin to adjust shared templates or defaults for the workspace."})]}),l.jsx("div",{className:"space-y-4",children:aee.map(t=>l.jsx("div",{className:"rounded-2xl border border-gray-200/70 bg-white px-4 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:t.title}),l.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),l.jsx("button",{type:"button",className:`px-4 py-2 rounded-2xl border text-sm font-medium ${e?"border-gray-200 text-gray-700 hover:bg-gray-50":"border-gray-100 text-gray-400 cursor-not-allowed"}`,disabled:!e,children:e?"Configure":"View only"})]})},t.title))})]})}function see(e){const[t,r]=p.useState([]),[n,a]=p.useState(!1),[i,s]=p.useState(null),o=p.useCallback(async()=>{if(!e)return;a(!0),s(null);const{data:u,error:d}=await Y.rpc("get_workspace_members",{p_workspace_id:e});d?(s(d.message),r([])):r(u||[]),a(!1)},[e]);p.useEffect(()=>{o()},[o]);const c=p.useCallback(async(u,d,f)=>{const{error:h}=await Y.rpc("manage_workspace_member",{target_user:u,action:d,new_role:f??null});return h||await o(),{error:h}},[o]);return{members:t,loading:n,error:i,refresh:o,changeRole:(u,d)=>c(u,"update_role",d),deactivate:u=>c(u,"deactivate"),reactivate:u=>c(u,"reactivate"),remove:u=>c(u,"delete"),updateTeam:async(u,d)=>{if(!d)return{error:new Error("Team is required")};const{error:f}=await Y.from("user_teams").delete().eq("user_id",u);if(f)return{error:f};const{error:h}=await Y.from("user_teams").upsert({user_id:u,team_id:d,role:"agent"});return h?{error:h}:(await o(),{error:null})}}}function vb(e){const[t,r]=p.useState([]),[n,a]=p.useState(!1),i=p.useCallback(async()=>{if(!e)return;a(!0);const{data:o,error:c}=await Y.rpc("get_workspace_teams",{p_workspace_id:e});r(c?[]:o||[]),a(!1)},[e]);p.useEffect(()=>{i()},[i]);const s=p.useCallback(async(o,c)=>{if(!e)return{error:new Error("Workspace is required")};const u=o.trim();if(!u)return{error:new Error("Team name is required")};const{data:d,error:f}=await Y.from("teams").insert({name:u}).select("id, name").single();if(f||!d)return{error:f};if(c){const{error:h}=await Y.from("user_teams").upsert({user_id:c,team_id:d.id,role:"team_lead"});if(h)return{error:h}}return await i(),{error:null}},[e,i]);return{teams:t,loading:n,refresh:i,createTeam:s}}const oee=["admin","sales_manager","team_lead","agent"];function lee(){const{roleInfo:e,user:t}=St(),r=(e==null?void 0:e.workspaceId)||null,n=SC(e),[a,i]=p.useState(null),{members:s,loading:o,error:c,changeRole:u,deactivate:d,reactivate:f,remove:h,updateTeam:m}=see(r),{teams:g,loading:y}=vb(r),[v,x]=p.useState(null),w=p.useMemo(()=>s.filter(k=>k.global_role==="admin"&&k.is_active).length,[s]),b=async(k,C)=>{i(k+C),await u(k,C),i(null)},_=async k=>{i(`deactivate-${k}`),await d(k),i(null)},j=async k=>{i(`reactivate-${k}`),await f(k),i(null)},S=async(k,C)=>{confirm(`Delete ${C||"this user"}? This removes their account and access. This cannot be undone.`)&&(i(`delete-${k}`),await h(k),i(null))},N=async(k,C)=>{i(`team-${k}`);const{error:E}=await m(k,C);x((E==null?void 0:E.message)??null),i(null)};return!r||!n?l.jsx("div",{className:"text-sm text-gray-600",children:"Workspace member management is limited to administrators. Contact an admin if you need to add or update teammates."}):o?l.jsx("div",{className:"flex items-center justify-center py-10 text-gray-500",children:l.jsx(Mt,{className:"h-5 w-5 animate-spin"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Workspace Members"}),l.jsxs("p",{className:"text-sm text-gray-500",children:["View and manage everyone in your workspace. You currently have ",w," admin",w===1?"":"s","."]}),c&&l.jsx("div",{className:"mt-3 rounded-xl border border-red-200/70 bg-red-50 px-3 py-2 text-sm text-red-600",children:c}),v&&!c&&l.jsx("div",{className:"mt-3 rounded-xl border border-red-200/70 bg-red-50 px-3 py-2 text-sm text-red-600",children:v}),!c&&y&&l.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 rounded-xl border border-gray-200/70 bg-white px-3 py-1 text-xs text-gray-600",children:[l.jsx(Mt,{className:"h-3.5 w-3.5 animate-spin"}),"Loading teams"]})]}),l.jsx("div",{className:"overflow-hidden rounded-2xl border border-gray-200/70",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[l.jsx("thead",{className:"bg-gray-50/60",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-[0.25em] text-gray-500",children:"Member"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-[0.25em] text-gray-500",children:"Role"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-[0.25em] text-gray-500",children:"Team"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-[0.25em] text-gray-500",children:"Status"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-[0.25em] text-gray-500",children:"Last active"}),l.jsx("th",{className:"px-4 py-3"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100 bg-white/80",children:s.map(k=>{var J;const C=k.user_id===(t==null?void 0:t.id),E=k.is_active,O=a!==null,A=O&&((a==null?void 0:a.includes(k.user_id))??!1),q=O&&!A;return l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-4",children:l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-sm font-semibold text-gray-900",children:k.full_name||k.email||"Member"}),l.jsx("span",{className:"text-xs text-gray-500",children:k.email})]})}),l.jsxs("td",{className:"px-4 py-4",children:[l.jsx("select",{className:"hig-input text-sm",value:k.global_role,disabled:!E||q||C,onChange:Z=>b(k.user_id,Z.target.value),children:oee.map(Z=>l.jsx("option",{value:Z,children:Ni(Z)},Z))}),C&&l.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"You cant change your own role from this screen."})]}),l.jsx("td",{className:"px-4 py-4",children:l.jsx("select",{className:"hig-input text-sm",value:k.team_id||((J=g[0])==null?void 0:J.team_id)||"",disabled:!E||q||y||g.length===0,onChange:Z=>N(k.user_id,Z.target.value),children:g.map(Z=>l.jsx("option",{value:Z.team_id,children:Z.name},Z.team_id))})}),l.jsx("td",{className:"px-4 py-4",children:l.jsx("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${E?"bg-emerald-50 text-emerald-700 border border-emerald-200/70":"bg-gray-100 text-gray-500 border border-gray-200"}`,children:E?"Active":"Inactive"})}),l.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:k.last_sign_in_at?new Date(k.last_sign_in_at).toLocaleDateString():""}),l.jsxs("td",{className:"px-4 py-4 text-right space-x-2",children:[E?l.jsxs("button",{onClick:()=>_(k.user_id),disabled:q||C,className:"inline-flex items-center gap-2 rounded-2xl border border-red-200/70 bg-red-50 px-3 py-1.5 text-sm font-semibold text-red-600 hover:bg-red-100 disabled:opacity-50",children:[l.jsx(G3,{className:"h-4 w-4"}),"Deactivate"]}):l.jsxs("button",{onClick:()=>j(k.user_id),disabled:q,className:"inline-flex items-center gap-2 rounded-2xl border border-blue-200/70 bg-blue-50 px-3 py-1.5 text-sm font-semibold text-blue-600 hover:bg-blue-100 disabled:opacity-50",children:[l.jsx(MC,{className:"h-4 w-4"}),"Reactivate"]}),!C&&l.jsxs("button",{onClick:()=>S(k.user_id,k.email),disabled:q,className:"inline-flex items-center gap-2 rounded-2xl border border-gray-200/70 bg-white px-3 py-1.5 text-sm font-semibold text-gray-700 hover:bg-red-50 hover:border-red-200/70 hover:text-red-700 disabled:opacity-50",title:"Delete user",children:[l.jsx(Ci,{className:"h-4 w-4"}),"Delete"]})]})]},k.user_id)})})]})})]})}function cee(e){const[t,r]=p.useState([]),[n,a]=p.useState(!1),[i,s]=p.useState(null),o=async h=>{try{const{error:m}=await Y.functions.invoke("send-invite-email",{body:{inviteId:h,origin:typeof window<"u"?window.location.origin:void 0}});m&&console.error("Invite email dispatch failed",m)}catch(m){console.error("Invite email dispatch failed",m)}},c=p.useCallback(async()=>{if(!e)return;a(!0),s(null);const{data:h,error:m}=await Y.from("workspace_invitations").select("*").eq("workspace_id",e).eq("status","pending").order("created_at",{ascending:!1});m?(s(m.message),r([])):r(h||[]),a(!1)},[e]);p.useEffect(()=>{c()},[c]),p.useEffect(()=>{if(!e)return;const h=Y.channel(`workspace-invitations-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"workspace_invitations",filter:`workspace_id=eq.${e}`},()=>{c()}).subscribe();return()=>{Y.removeChannel(h)}},[e,c]);const u=p.useCallback(async({email:h,intendedRole:m,teamId:g})=>{if(!e)return{error:new Error("Workspace is required")};if(!g)return{error:new Error("Team is required for invites")};const{data:y,error:v}=await Y.from("workspace_invitations").insert({email:h,intended_role:m,workspace_id:e,team_id:g??null}).select("*").single();return!v&&y&&(await o(y.id),await c()),{error:v}},[e,c]),d=p.useCallback(async h=>{const{error:m}=await Y.from("workspace_invitations").update({status:"canceled"}).eq("id",h);return m||await c(),{error:m}},[c]),f=p.useCallback(async h=>{const{data:m,error:g}=await Y.from("workspace_invitations").update({status:"pending",expires_at:new Date(Date.now()+12096e5).toISOString()}).eq("id",h).select("*").single();return!g&&m&&(await o(m.id),await c()),{error:g}},[c]);return{invites:t,loading:n,error:i,refresh:c,createInvite:u,cancelInvite:d,resendInvite:f}}const $S=[{value:"admin",label:"Admin"},{value:"sales_manager",label:"Sales Manager"},{value:"team_lead",label:"Team Lead"},{value:"agent",label:"Agent"}];function uee(){var O;const{roleInfo:e}=St(),t=(e==null?void 0:e.workspaceId)||null,r=jC(e),n=_3(e),{invites:a,loading:i,createInvite:s,resendInvite:o,cancelInvite:c}=cee(t),{teams:u}=vb(t),[d,f]=p.useState(""),[h,m]=p.useState("agent"),[g,y]=p.useState((e==null?void 0:e.teamId)||null),[v,x]=p.useState(!1),[w,b]=p.useState(null),[_,j]=p.useState(null),S=(O=u.find(A=>A.team_id===(e==null?void 0:e.teamId)))==null?void 0:O.name,N=n?$S:$S.filter(A=>A.value==="agent");p.useEffect(()=>{n||m("agent")},[n]),p.useEffect(()=>{!g&&u.length>0&&y(u[0].team_id)},[u,g]);const k=A=>`${window.location.origin}/invite/${A}`,C=async A=>{if(A.preventDefault(),!d)return;if(!t){b({type:"error",text:"Workspace is required before sending invites. Please refresh or contact an admin."});return}if(!g){b({type:"error",text:"A team is required so pipeline statuses and lead sources stay in sync. Create a team first if none exist."});return}x(!0),b(null);const{error:q}=await s({email:d.trim().toLowerCase(),intendedRole:h,teamId:g});if(x(!1),q){b({type:"error",text:q.message||"Unable to send invite. Please try again."});return}f(""),b({type:"success",text:`Invitation sent to ${d.trim().toLowerCase()}. Share the link or let them check their inbox.`})};if(p.useEffect(()=>{e!=null&&e.teamId&&y(e.teamId)},[e==null?void 0:e.teamId]),!r)return l.jsx("div",{className:"text-sm text-gray-600",children:"Only admins, sales managers, or team leads can invite new members. Contact an admin if you need to add someone to your workspace."});const E=a.filter(A=>A.status==="pending");return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Invitations"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Invite teammates by email and manage pending invitations. Links stay valid for 14 days."})]}),l.jsxs("form",{onSubmit:C,className:"rounded-2xl border border-gray-200/70 bg-white/80 p-5 space-y-4",children:[w&&l.jsx("div",{className:`flex items-center gap-2 rounded-2xl border px-3 py-2 text-sm ${w.type==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-red-200 bg-red-50 text-red-700"}`,children:w.text}),l.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Email"}),l.jsx("input",{type:"email",required:!0,className:"hig-input",placeholder:"newagent@example.com",value:d,onChange:A=>f(A.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Role"}),l.jsx("select",{className:"hig-input",value:h,onChange:A=>m(A.target.value),children:N.map(A=>l.jsx("option",{value:A.value,children:A.label},A.value))})]})]}),l.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Team *"}),(e==null?void 0:e.globalRole)==="agent"||!n&&(e!=null&&e.teamId)?l.jsx("input",{type:"text",className:"hig-input bg-gray-50",value:S||"Assigned automatically",readOnly:!0}):u.length===0?l.jsx("input",{type:"text",className:"hig-input bg-gray-50",value:"Create a team first to send invites",readOnly:!0}):l.jsx("select",{className:"hig-input",value:g||"",onChange:A=>y(A.target.value||null),children:u.map(A=>l.jsx("option",{value:A.team_id,children:A.name},A.team_id))})]})}),l.jsx("button",{type:"submit",disabled:v||!g,className:"hig-btn-primary inline-flex items-center gap-2",children:v?l.jsxs(l.Fragment,{children:[l.jsx(Mt,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):l.jsxs(l.Fragment,{children:[l.jsx(U3,{className:"h-4 w-4"}),"Send invitation"]})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Pending invitations"}),i?l.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm",children:[l.jsx(Mt,{className:"h-4 w-4 animate-spin"}),"Loading invitations"]}):E.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No active invitations."}):l.jsx("div",{className:"space-y-4",children:E.map(A=>{const J=A.status==="pending"&&new Date(A.expires_at).getTime()<Date.now()?"expired":A.status;return l.jsxs("div",{className:"flex flex-col gap-3 rounded-2xl border border-gray-200/70 bg-white/80 p-4 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:A.email}),l.jsxs("p",{className:"text-xs text-gray-500",children:[Ni(A.intended_role),"  expires ",new Date(A.expires_at).toLocaleDateString()]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[A.status==="pending"&&l.jsx("button",{type:"button",onClick:async()=>{await navigator.clipboard.writeText(k(A.token)),j(A.id),setTimeout(()=>j(null),2e3)},className:`inline-flex items-center gap-2 rounded-2xl border px-3 py-1.5 text-xs font-semibold transition shadow-sm ${_===A.id?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-gray-200 text-gray-700 hover:border-emerald-200/80 hover:bg-emerald-50/60 hover:text-emerald-700 hover:shadow-md"}`,children:_===A.id?l.jsxs(l.Fragment,{children:[l.jsx(_c,{className:"h-3.5 w-3.5"}),"Copied"]}):l.jsxs(l.Fragment,{children:[l.jsx(L3,{className:"h-3.5 w-3.5"}),"Copy link"]})}),J==="pending"?l.jsxs("button",{type:"button",onClick:()=>o(A.id),className:"inline-flex items-center gap-2 rounded-2xl border border-blue-200/70 bg-blue-50 px-3 py-1.5 text-xs font-semibold text-blue-600 hover:bg-blue-100",children:[l.jsx(MC,{className:"h-3.5 w-3.5"}),"Resend"]}):l.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-3 py-1 text-xs font-semibold text-gray-600 capitalize",children:J}),A.status==="pending"&&l.jsxs("button",{type:"button",onClick:()=>c(A.id),className:"inline-flex items-center gap-2 rounded-2xl border border-red-200/70 bg-red-50 px-3 py-1.5 text-xs font-semibold text-red-600 hover:bg-red-100",children:[l.jsx(eL,{className:"h-3.5 w-3.5"}),"Cancel"]})]})]},A.id)})})]})]})}function dee(){const{roleInfo:e,user:t}=St(),r=(e==null?void 0:e.workspaceId)||null,n=_C(e),{teams:a,loading:i,createTeam:s}=vb(r),[o,c]=p.useState(""),[u,d]=p.useState(!1),[f,h]=p.useState(null),m=p.useMemo(()=>[...a].sort((y,v)=>y.name.localeCompare(v.name)),[a]),g=async y=>{var x;if(y.preventDefault(),!o.trim())return;d(!0),h(null);const{error:v}=await s(o,t==null?void 0:t.id);if(d(!1),v){const w=(x=v.message)==null?void 0:x.toLowerCase().includes("duplicate");h({type:"error",text:w?"A team with that name already exists.":v.message||"Unable to create team right now."});return}c(""),h({type:"success",text:"Team created. Assign members from the Members tab."})};return!r||!n?l.jsx("div",{className:"text-sm text-gray-600",children:"Only workspace admins can create teams. Ask an admin to set this up if you need a new team."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Teams"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Create lightweight teams to group agents and route invitations. You can add members after creating the team."})]}),l.jsxs("form",{onSubmit:g,className:"space-y-4 rounded-2xl border border-gray-200/70 bg-white/80 p-5",children:[l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-end sm:gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"hig-label",children:"Team name"}),l.jsx("input",{type:"text",className:"hig-input",placeholder:"Example: East Coast Team",value:o,onChange:y=>c(y.target.value),required:!0}),l.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Names must be unique across your workspace."})]}),l.jsx("button",{type:"submit",disabled:u,className:"hig-btn-primary inline-flex items-center justify-center gap-2 px-4",children:u?l.jsxs(l.Fragment,{children:[l.jsx(Mt,{className:"h-4 w-4 animate-spin"}),"Creating"]}):l.jsxs(l.Fragment,{children:[l.jsx(V3,{className:"h-4 w-4"}),"Create team"]})})]}),f&&l.jsx("div",{className:`flex items-center gap-2 rounded-2xl border px-3 py-2 text-sm ${f.type==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-red-200 bg-red-50 text-red-700"}`,children:f.text})]}),l.jsxs("div",{className:"rounded-2xl border border-gray-200/70 bg-white/80 p-5",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Existing teams"}),l.jsx("p",{className:"text-xs text-gray-500",children:i?"Loading teams":`${m.length||"No"} team${m.length===1?"":"s"}`})]}),i&&l.jsx(Mt,{className:"h-4 w-4 animate-spin text-gray-500"})]}),!i&&m.length===0&&l.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"No teams yet. Create one to get started."}),!i&&m.length>0&&l.jsx("div",{className:"mt-4 space-y-3",children:m.map(y=>l.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-gray-100/80 bg-white px-4 py-3 shadow-[inset_0_0_0_1px_rgba(255,255,255,0.6)]",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:y.name}),l.jsx("p",{className:"text-xs text-gray-500",children:"Assign members from the Members tab."})]}),l.jsx("span",{className:"inline-flex items-center rounded-full border border-gray-200 bg-gray-50 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.18em] text-gray-600",children:"Team"})]},y.team_id))})]})]})}const fee=[{id:"workspace.info",label:"Workspace Info",description:"Identity, locale, and defaults",icon:O3},{id:"workspace.pipeline-statuses",label:"Pipeline Statuses",description:"Shared stage definitions",icon:DC},{id:"workspace.lead-sources",label:"Lead Sources",description:"Partner & portal sources",icon:FC},{id:"workspace.integrations",label:"Integrations",description:"CRM & email connections",icon:q3},{id:"workspace.configuration",label:"Shared Configuration",description:"Templates & custom fields",icon:R3}];function hee(){const{user:e,roleInfo:t}=St(),r=Ni(t==null?void 0:t.globalRole),n=f_(t),a=f_(t)||w3(t)||b3(t),i=SC(t),s=jC(t),o=_C(t),[c,u]=p.useState("workspace.info"),d=p.useMemo(()=>{const h=[...fee];return o&&h.push({id:"workspace.teams",label:"Teams",description:"Create teams for routing",icon:I3}),i&&h.push({id:"workspace.members",label:"Members",description:"Roles, status, and access",icon:UC}),s&&h.push({id:"workspace.invites",label:"Invitations",description:"Pending & sent invites",icon:z3}),h},[i,s]),f=()=>{switch(c){case"workspace.info":return l.jsx(ree,{canEdit:n});case"workspace.pipeline-statuses":return l.jsx(QZ,{canEdit:a});case"workspace.lead-sources":return l.jsx(ZZ,{canEdit:a});case"workspace.integrations":return l.jsx(nee,{canEdit:n});case"workspace.teams":return l.jsx(dee,{});case"workspace.members":return l.jsx(lee,{});case"workspace.invites":return l.jsx(uee,{});case"workspace.configuration":default:return l.jsx(iee,{canEdit:n})}};return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"flex flex-col gap-4 rounded-[var(--app-radius)] border border-[var(--app-border)] bg-white/90 p-6 shadow-[0_15px_45px_rgba(15,23,42,0.08)]",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-2xl bg-gray-100",children:l.jsx(Nh,{className:"w-6 h-6 text-gray-700"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Workspace Settings"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Configuration shared across your entire workspace"})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-gray-200/70 bg-white px-3 py-1",children:[l.jsx("span",{className:"text-[10px] uppercase tracking-[0.4em] text-gray-400",children:"Role"}),l.jsx("span",{className:"font-semibold text-gray-900",children:r})]}),!n&&l.jsx("span",{className:"text-xs text-gray-500",children:"Workspace configuration is managed by admins. You have read-only access."})]})]}),l.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[l.jsx("aside",{className:"lg:w-72 space-y-6",children:l.jsxs("div",{children:[l.jsx("p",{className:"px-2 pb-2 text-[11px] font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Workspace"}),l.jsx("div",{className:"space-y-1",children:d.map(h=>{const m=h.icon,g=c===h.id;return l.jsx("button",{onClick:()=>u(h.id),className:`group w-full rounded-2xl border px-4 py-3 text-left transition-all duration-200 ${g?"border-[rgb(0,122,255)] bg-[rgba(0,122,255,0.06)] shadow-[inset_0_0_0_1px_rgba(0,122,255,0.2)]":"border-white/60 bg-white hover:-translate-y-[1px] hover:border-[rgba(0,122,255,0.25)] hover:bg-[rgba(0,122,255,0.04)] hover:shadow-[0_12px_30px_rgba(0,0,0,0.06)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[rgba(0,122,255,0.35)]"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:`rounded-2xl border p-2 ${g?"border-[rgba(0,122,255,0.3)] bg-white":"border-gray-100 bg-gray-50 group-hover:border-[rgba(0,122,255,0.2)] group-hover:bg-white"}`,children:l.jsx(m,{className:`w-4 h-4 ${g?"text-[rgb(0,122,255)]":"text-gray-500 group-hover:text-[rgb(0,122,255)]"}`})}),l.jsxs("div",{children:[l.jsx("p",{className:`text-sm font-semibold ${g?"text-[rgb(0,122,255)]":"text-gray-800"}`,children:h.label}),l.jsx("p",{className:"text-xs text-gray-500",children:h.description})]})]})},h.id)})})]})}),l.jsx("section",{className:"flex-1 hig-card p-6",children:f()})]})]})}function pee(){var f;const{user:e,roleInfo:t}=St(),[r,n]=p.useState(((f=e==null?void 0:e.user_metadata)==null?void 0:f.name)||""),[a,i]=p.useState(!1),[s,o]=p.useState(null),c=async h=>{if(h.preventDefault(),!e)return;i(!0),o(null);const{error:m}=await Y.auth.updateUser({data:{...e.user_metadata,name:r.trim()||e.email}});o(m?{type:"error",text:m.message||"Unable to update profile."}:{type:"success",text:"Profile updated."}),i(!1)},u=(r||(e==null?void 0:e.email)||"PI").split(" ").map(h=>h.charAt(0).toUpperCase()).slice(0,2).join(""),d=Ni(t==null?void 0:t.globalRole);return l.jsxs("div",{className:"max-w-2xl",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Profile"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Manage your display name, login email, and view the role assigned by your workspace admin."})]}),l.jsxs("form",{onSubmit:c,className:"space-y-8",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"h-16 w-16 rounded-2xl bg-[var(--app-accent)] text-white flex items-center justify-center text-xl font-semibold",children:u}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Signed in as"}),l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e==null?void 0:e.email})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Full Name"}),l.jsx("input",{type:"text",value:r,onChange:h=>n(h.target.value),className:"hig-input",placeholder:"Jane Agent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Primary Email"}),l.jsx("input",{type:"email",value:(e==null?void 0:e.email)||"",disabled:!0,className:"hig-input bg-gray-50 text-gray-500"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Contact support to change your login email."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Role"}),l.jsxs("div",{className:"hig-input bg-gray-50 text-gray-700 flex items-center gap-2",children:[l.jsx("span",{className:"inline-flex rounded-full bg-gray-100 px-2 py-0.5 text-[11px] uppercase tracking-wide text-gray-500",children:d}),l.jsx("span",{className:"text-sm text-gray-600",children:"Workspace permissions are managed by your admin."})]})]})]}),s&&l.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${s.type==="error"?"bg-red-50 text-red-700 border-red-200/60":"bg-green-50 text-green-700 border-green-200/60"}`,children:[s.type==="error"?l.jsx(Ta,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}):l.jsx(ki,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:s.text})]}),l.jsx("div",{className:"flex gap-3",children:l.jsx("button",{type:"submit",className:"hig-btn-primary",disabled:a,children:a?l.jsxs(l.Fragment,{children:[l.jsx(Mt,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving"})]}):l.jsxs(l.Fragment,{children:[l.jsx(Sh,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Save Profile"})]})})})]})]})}function mee(){const[e,t]=p.useState({newPassword:"",confirmPassword:""}),[r,n]=p.useState(!1),[a,i]=p.useState(null),s=async o=>{if(o.preventDefault(),!e.newPassword||e.newPassword!==e.confirmPassword){i({type:"error",text:"Passwords must match."});return}n(!0),i(null);const{error:c}=await Y.auth.updateUser({password:e.newPassword});c?i({type:"error",text:c.message||"Unable to update password."}):(i({type:"success",text:"Password updated successfully."}),t({newPassword:"",confirmPassword:""})),n(!1)};return l.jsxs("div",{className:"max-w-xl",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Password & Security"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Update your login password. Changes apply immediately across all PipelineIQ sessions."})]}),l.jsxs("form",{onSubmit:s,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"New Password"}),l.jsx("input",{type:"password",value:e.newPassword,onChange:o=>t(c=>({...c,newPassword:o.target.value})),className:"hig-input",minLength:8,required:!0}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use at least 8 characters including a number or symbol."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Confirm Password"}),l.jsx("input",{type:"password",value:e.confirmPassword,onChange:o=>t(c=>({...c,confirmPassword:o.target.value})),className:"hig-input",required:!0})]}),a&&l.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${a.type==="error"?"bg-red-50 text-red-700 border-red-200/60":"bg-green-50 text-emerald-700 border-emerald-200/60"}`,children:[a.type==="error"?l.jsx(kC,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}):l.jsx($C,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:a.text})]}),l.jsx("button",{type:"submit",className:"hig-btn-primary",disabled:r,children:r?l.jsxs(l.Fragment,{children:[l.jsx(Mt,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Updating"})]}):l.jsx("span",{children:"Update Password"})})]})]})}const gee=[{id:"new_lead",label:"New lead assigned"},{id:"stage_change",label:"Deal moved to a new stage"},{id:"reminders",label:"Task & follow-up reminders"},{id:"analytics",label:"Weekly pipeline summary"}],LS={new_lead:!0,stage_change:!0,reminders:!0,analytics:!1};function vee(){var c;const{user:e}=St(),[t,r]=p.useState(LS),[n,a]=p.useState(!1),[i,s]=p.useState(null);p.useEffect(()=>{var u;(u=e==null?void 0:e.user_metadata)!=null&&u.notifications&&r({...LS,...e.user_metadata.notifications})},[(c=e==null?void 0:e.user_metadata)==null?void 0:c.notifications]);const o=async()=>{if(!e)return;a(!0),s(null);const{error:u}=await Y.auth.updateUser({data:{...e.user_metadata,notifications:t}});s(u?{type:"error",text:u.message||"Unable to update notifications."}:{type:"success",text:"Notification preferences saved."}),a(!1)};return l.jsxs("div",{className:"max-w-2xl",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Notifications"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Choose which alerts to receive. These preferences only affect your PipelineIQ account."})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"space-y-4",children:gee.map(u=>l.jsxs("label",{className:"flex items-center justify-between rounded-2xl border border-gray-200/70 bg-white/90 px-4 py-3",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:u.label}),l.jsx("p",{className:"text-xs text-gray-500",children:"Delivered via email & in-app"})]}),l.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-[var(--app-accent)] focus:ring-[var(--app-accent)]",checked:t[u.id]??!1,onChange:d=>r(f=>({...f,[u.id]:d.target.checked}))})]},u.id))}),i&&l.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${i.type==="error"?"bg-red-50 text-red-700 border-red-200/60":"bg-green-50 text-green-700 border-green-200/60"}`,children:[i.type==="error"?l.jsx(Ta,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}):l.jsx(ki,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:i.text})]}),l.jsx("button",{onClick:o,className:"hig-btn-primary",disabled:n,children:n?l.jsxs(l.Fragment,{children:[l.jsx(Mt,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving"})]}):l.jsxs(l.Fragment,{children:[l.jsx(Sh,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Save Preferences"})]})})]})]})}function yee(){const{user:e}=St(),[t,r]=p.useState(!0),[n,a]=p.useState(!1),[i,s]=p.useState(null),[o,c]=p.useState({annual_gci_goal:0,default_tax_rate:25,default_brokerage_split_rate:20});p.useEffect(()=>{u()},[e]);const u=async()=>{if(!e)return;const{data:f}=await Y.from("user_settings").select("*").eq("user_id",e.id).maybeSingle();f&&c({annual_gci_goal:f.annual_gci_goal,default_tax_rate:f.default_tax_rate*100,default_brokerage_split_rate:f.default_brokerage_split_rate*100}),r(!1)},d=async f=>{if(f.preventDefault(),!e)return;a(!0),s(null);const{error:h}=await Y.from("user_settings").upsert({user_id:e.id,annual_gci_goal:o.annual_gci_goal,default_tax_rate:o.default_tax_rate/100,default_brokerage_split_rate:o.default_brokerage_split_rate/100});h?s({type:"error",text:"Failed to save preferences. Please try again."}):(s({type:"success",text:"Preferences updated!"}),setTimeout(()=>s(null),3e3)),a(!1)};return t?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx(Mt,{className:"w-8 h-8 animate-spin text-[rgb(0,122,255)]"})}):l.jsxs("div",{className:"max-w-2xl",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Personal Preferences"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Set your financial targets and default assumptions. These only apply to your profile."})]}),l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Annual GCI Goal"}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"$"}),l.jsx("input",{type:"number",value:o.annual_gci_goal,onChange:f=>c({...o,annual_gci_goal:parseFloat(f.target.value)||0}),className:"hig-input pl-8",placeholder:"100000",min:"0",step:"1000"})]}),l.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Your personal net commission goal for the year."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Default Tax Allocation"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",step:"0.5",value:o.default_tax_rate,onChange:f=>c({...o,default_tax_rate:parseFloat(f.target.value)||0}),className:"hig-input pr-8",placeholder:"25",min:"0",max:"100"}),l.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]}),l.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Used to forecast take-home pay inside PipelineIQ."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Default Brokerage Split"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",step:"0.5",value:o.default_brokerage_split_rate,onChange:f=>c({...o,default_brokerage_split_rate:parseFloat(f.target.value)||0}),className:"hig-input pr-8",placeholder:"20",min:"0",max:"100"}),l.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]}),l.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Determines what portion of each deal is allocated to your brokerage by default."})]}),i&&l.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${i.type==="error"?"bg-red-50 text-red-700 border-red-200/60":"bg-green-50 text-green-700 border-green-200/60"}`,children:[i.type==="error"?l.jsx(Ta,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}):l.jsx(ki,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:i.text})]}),l.jsx("div",{className:"pt-4 border-t border-gray-200/60 flex flex-wrap gap-3",children:l.jsx("button",{type:"submit",disabled:n,className:"hig-btn-primary px-8",children:n?l.jsxs(l.Fragment,{children:[l.jsx(Mt,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving"})]}):l.jsxs(l.Fragment,{children:[l.jsx(Sh,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Save Preferences"})]})})})]})]})}const xee=[{id:"personal.profile",label:"Profile",description:"Name & identity",icon:kh},{id:"personal.security",label:"Password & Security",description:"Account protection",icon:$C},{id:"personal.notifications",label:"Notifications",description:"Email + in-app alerts",icon:EC},{id:"personal.preferences",label:"Preferences",description:"Goals & defaults",icon:LC}];function bee(){const{user:e,roleInfo:t}=St(),r=Ni(t==null?void 0:t.globalRole),[n,a]=p.useState("personal.profile"),i=()=>{switch(n){case"personal.profile":return l.jsx(pee,{});case"personal.security":return l.jsx(mee,{});case"personal.notifications":return l.jsx(vee,{});case"personal.preferences":default:return l.jsx(yee,{})}};return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"flex flex-col gap-4 rounded-[var(--app-radius)] border border-[var(--app-border)] bg-white/90 p-6 shadow-[0_15px_45px_rgba(15,23,42,0.08)]",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-2xl bg-gray-100",children:l.jsx(kh,{className:"w-6 h-6 text-gray-700"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Account Settings"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Preferences that only apply to your login."})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-gray-200/70 bg-white px-3 py-1",children:[l.jsx("span",{className:"text-[10px] uppercase tracking-[0.4em] text-gray-400",children:"Signed in"}),l.jsx("span",{className:"font-semibold text-gray-900",children:e==null?void 0:e.email})]}),l.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-gray-200/70 bg-white px-3 py-1",children:[l.jsx("span",{className:"text-[10px] uppercase tracking-[0.4em] text-gray-400",children:"Role"}),l.jsx("span",{className:"font-semibold text-gray-900",children:r})]})]})]}),l.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[l.jsx("aside",{className:"lg:w-72 space-y-6",children:l.jsxs("div",{children:[l.jsx("p",{className:"px-2 pb-2 text-[11px] font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Account"}),l.jsx("div",{className:"space-y-1",children:xee.map(s=>{const o=s.icon,c=n===s.id;return l.jsx("button",{onClick:()=>a(s.id),className:`group w-full rounded-2xl border px-4 py-3 text-left transition-all duration-200 ${c?"border-[rgb(0,122,255)] bg-[rgba(0,122,255,0.06)] shadow-[inset_0_0_0_1px_rgba(0,122,255,0.2)]":"border-white/60 bg-white hover:-translate-y-[1px] hover:border-[rgba(0,122,255,0.25)] hover:bg-[rgba(0,122,255,0.04)] hover:shadow-[0_12px_30px_rgba(0,0,0,0.06)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[rgba(0,122,255,0.35)]"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:`rounded-2xl border p-2 ${c?"border-[rgba(0,122,255,0.3)] bg-white":"border-gray-100 bg-gray-50 group-hover:border-[rgba(0,122,255,0.2)] group-hover:bg-white"}`,children:l.jsx(o,{className:`w-4 h-4 ${c?"text-[rgb(0,122,255)]":"text-gray-500 group-hover:text-[rgb(0,122,255)]"}`})}),l.jsxs("div",{children:[l.jsx("p",{className:`text-sm font-semibold ${c?"text-[rgb(0,122,255)]":"text-gray-800"}`,children:s.label}),l.jsx("p",{className:"text-xs text-gray-500",children:s.description})]})]})},s.id)})})]})}),l.jsx("section",{className:"flex-1 hig-card p-6",children:i()})]})]})}const wee=[{title:"AI Contract Drafting",description:"Instinctively assemble Dotloop-ready agreements from natural-language prompts."},{title:"Smart Field Autofill",description:"Pull buyer, seller, property, and financing data directly from your CRM or files."},{title:"Amendments in Seconds",description:"Request edits in plain English and regenerate updated paperwork instantly."},{title:"Compliance Checker",description:"Let AI scan for missing signatures, incorrect clauses, or jurisdictional nuances."},{title:"Team Collaboration Tools",description:"Shared templates, version history, and real-time updates for every stakeholder."}];function _ee(){const[e,t]=p.useState(""),[r,n]=p.useState("idle"),a=i=>{if(i.preventDefault(),!e.trim()){n("error");return}n("loading"),setTimeout(()=>{n("success"),t("")},1200)};return l.jsxs("div",{className:"min-h-screen bg-white text-slate-900 flex flex-col",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#f4f7fb] via-white to-[#eef4fa] pointer-events-none"}),l.jsx("header",{className:"relative z-10 border-b border-slate-200/60",children:l.jsx("div",{className:"max-w-5xl mx-auto px-6 py-6 flex items-center",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(jee,{}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs tracking-[0.3em] text-slate-500 uppercase font-semibold",children:"Contract"}),l.jsx("p",{className:"text-xl font-semibold tracking-tight text-slate-800",children:"Scribe"})]})]})})}),l.jsxs("main",{className:"relative z-10 flex-1",children:[l.jsxs("section",{className:"max-w-4xl mx-auto px-6 py-16 text-center",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.4em] text-slate-500 mb-4",children:"ContractScribe"}),l.jsx("h1",{className:"text-4xl md:text-5xl font-semibold text-slate-900 leading-tight mb-4",children:"ContractScribe is Coming Soon"}),l.jsx("p",{className:"text-lg text-slate-600 mb-8 max-w-3xl mx-auto",children:"The fastest way for real-estate professionals to draft, edit, and manage contracts with AI-powered precision. Automation that feels human, accuracy that feels inevitable."}),l.jsxs("form",{onSubmit:a,className:"flex flex-col sm:flex-row gap-3 justify-center max-w-2xl mx-auto",children:[l.jsx("input",{type:"email",value:e,onChange:i=>{t(i.target.value),r!=="idle"&&n("idle")},placeholder:"Enter your work email",className:"flex-1 rounded-2xl border border-slate-200/80 bg-white/90 px-5 py-3 text-sm shadow-inner focus:outline-none focus:ring-2 focus:ring-[#0E4B72]/20 focus:border-[#0E4B72]/50"}),l.jsx("button",{type:"submit",className:"rounded-2xl bg-[#0E4B72] text-white font-semibold px-6 py-3 text-sm shadow-[0_12px_24px_rgba(14,75,114,0.25)] hover:bg-[#0b3c5b] transition-colors",disabled:r==="loading",children:r==="loading"?"Joining":r==="success"?"Added!":"Join the Waitlist"})]}),r==="success"&&l.jsx("p",{className:"mt-3 text-sm text-emerald-600 animate-fade-in",children:"Thanks! Well be in touch shortly."}),r==="error"&&l.jsx("p",{className:"mt-3 text-sm text-rose-500",children:"Please enter a valid email address."})]}),l.jsx("section",{className:"max-w-6xl mx-auto px-6 pb-16",children:l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:wee.map(i=>l.jsxs("div",{className:"rounded-2xl border border-slate-200/70 bg-white/80 p-6 shadow-[0_12px_30px_rgba(15,23,42,0.08)] hover:-translate-y-1 transition-transform",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-[#0E4B72] mb-3",children:"Coming Feature"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:i.title}),l.jsx("p",{className:"text-sm text-slate-600",children:i.description})]},i.title))})}),l.jsx("section",{className:"max-w-3xl mx-auto px-6 pb-20 text-center",children:l.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"ContractScribe empowers agents, teams, and brokerages with lightning-fast contract workflows so you can spend more time closing dealsnot filling out paperwork."})})]}),l.jsx("footer",{className:"relative z-10 border-t border-slate-200/70 bg-white/80 backdrop-blur",children:l.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-8 flex flex-col md:flex-row items-center justify-between gap-4 text-xs text-slate-500",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("span",{children:[" ",new Date().getFullYear()," ContractScribe"]}),l.jsx("span",{children:"Terms"}),l.jsx("span",{children:"Privacy"}),l.jsx("span",{children:"Security"})]}),l.jsxs("div",{className:"text-xs text-slate-500",children:["Made by ",l.jsx("span",{className:"font-semibold text-slate-700",children:"Luminex Ventures"})]})]})})]})}const jee=()=>l.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 48 56","aria-hidden":"true",className:"drop-shadow-sm",children:[l.jsx("path",{d:"M2 12L22 0L22 32L2 44Z",fill:"#F3C6C5"}),l.jsx("path",{d:"M12 18L32 6V38L12 50Z",fill:"#CF7A7A"}),l.jsx("path",{d:"M22 24L42 12V44L22 56Z",fill:"#C85757"})]});function See(){const{token:e}=s5(),t=Yo();return l.jsx(zC,{onToggle:()=>t("/login"),presetToken:e})}function Vi({children:e}){const{user:t,loading:r,roleInfo:n,signOut:a}=St();return r?l.jsx("div",{className:"min-h-screen bg-[rgb(var(--color-app-bg))] flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[rgb(0,122,255)]"})}):t?n&&n.isActive===!1?l.jsx("div",{className:"min-h-screen bg-[rgb(var(--color-app-bg))] flex items-center justify-center px-4",children:l.jsxs("div",{className:"max-w-md rounded-2xl border border-[var(--app-border)] bg-white/90 p-6 text-center shadow-xl space-y-3",children:[l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"Account deactivated"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Your PipelineIQ access has been suspended. Please reach out to an administrator if you believe this is a mistake."}),l.jsx("button",{onClick:a,className:"hig-btn-secondary mx-auto",children:"Back to login"})]})}):l.jsx(sL,{children:e}):l.jsx(tf,{to:"/login",replace:!0})}function FS({children:e}){const{user:t,loading:r}=St();return r?l.jsx("div",{className:"min-h-screen bg-[rgb(var(--color-app-bg))] flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[rgb(0,122,255)]"})}):t?l.jsx(tf,{to:"/",replace:!0}):l.jsx(l.Fragment,{children:e})}function Nee(){const[e,t]=p.useState(!0);return e?l.jsx(oL,{onToggle:()=>t(!1)}):l.jsx(zC,{onToggle:()=>t(!0)})}function kee(){return l.jsx(j3,{children:l.jsx(H5,{children:l.jsxs(w5,{children:[l.jsx(qr,{path:"/login",element:l.jsx(FS,{children:l.jsx(Nee,{})})}),l.jsx(qr,{path:"/",element:l.jsx(Vi,{children:l.jsx(mZ,{})})}),l.jsx(qr,{path:"/invite/:token",element:l.jsx(FS,{children:l.jsx(See,{})})}),l.jsx(qr,{path:"/pipeline",element:l.jsx(Vi,{children:l.jsx(BZ,{})})}),l.jsx(qr,{path:"/tasks",element:l.jsx(Vi,{children:l.jsx(qZ,{})})}),l.jsx(qr,{path:"/luma",element:l.jsx(Vi,{children:l.jsx(GZ,{})})}),l.jsx(qr,{path:"/analytics",element:l.jsx(Vi,{children:l.jsx(WZ,{})})}),l.jsx(qr,{path:"/workspace-settings",element:l.jsx(Vi,{children:l.jsx(hee,{})})}),l.jsx(qr,{path:"/settings",element:l.jsx(Vi,{children:l.jsx(bee,{})})}),l.jsx(qr,{path:"/lead-sources",element:l.jsx(tf,{to:"/workspace-settings",replace:!0})}),l.jsx(qr,{path:"/pipeline-settings",element:l.jsx(tf,{to:"/workspace-settings",replace:!0})}),l.jsx(qr,{path:"/contractscribe",element:l.jsx(_ee,{})})]})})})}Zk(document.getElementById("root")).render(l.jsx(p.StrictMode,{children:l.jsx(kee,{})}));
