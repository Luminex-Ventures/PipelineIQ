var rI=Object.defineProperty;var nI=(e,t,r)=>t in e?rI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Kp=(e,t,r)=>nI(e,typeof t!="symbol"?t+"":t,r);function US(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function Ka(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function aI(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var zS={exports:{}},ih={},WS={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bc=Symbol.for("react.element"),iI=Symbol.for("react.portal"),sI=Symbol.for("react.fragment"),oI=Symbol.for("react.strict_mode"),lI=Symbol.for("react.profiler"),cI=Symbol.for("react.provider"),uI=Symbol.for("react.context"),dI=Symbol.for("react.forward_ref"),fI=Symbol.for("react.suspense"),hI=Symbol.for("react.memo"),pI=Symbol.for("react.lazy"),Sb=Symbol.iterator;function mI(e){return e===null||typeof e!="object"?null:(e=Sb&&e[Sb]||e["@@iterator"],typeof e=="function"?e:null)}var KS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},HS=Object.assign,qS={};function Ko(e,t,r){this.props=e,this.context=t,this.refs=qS,this.updater=r||KS}Ko.prototype.isReactComponent={};Ko.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ko.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function VS(){}VS.prototype=Ko.prototype;function vy(e,t,r){this.props=e,this.context=t,this.refs=qS,this.updater=r||KS}var yy=vy.prototype=new VS;yy.constructor=vy;HS(yy,Ko.prototype);yy.isPureReactComponent=!0;var Nb=Array.isArray,GS=Object.prototype.hasOwnProperty,xy={current:null},YS={key:!0,ref:!0,__self:!0,__source:!0};function XS(e,t,r){var n,a={},i=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)GS.call(t,n)&&!YS.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:Bc,type:e,key:i,ref:s,props:a,_owner:xy.current}}function gI(e,t){return{$$typeof:Bc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function by(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bc}function vI(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var kb=/\/+/g;function Hp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?vI(""+e.key):t.toString(36)}function hd(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Bc:case iI:s=!0}}if(s)return s=e,a=a(s),e=n===""?"."+Hp(s,0):n,Nb(a)?(r="",e!=null&&(r=e.replace(kb,"$&/")+"/"),hd(a,t,r,"",function(u){return u})):a!=null&&(by(a)&&(a=gI(a,r+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(kb,"$&/")+"/")+e)),t.push(a)),1;if(s=0,n=n===""?".":n+":",Nb(e))for(var o=0;o<e.length;o++){i=e[o];var c=n+Hp(i,o);s+=hd(i,t,r,c,a)}else if(c=mI(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=n+Hp(i,o++),s+=hd(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function xu(e,t,r){if(e==null)return e;var n=[],a=0;return hd(e,n,"","",function(i){return t.call(r,i,a++)}),n}function yI(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Pr={current:null},pd={transition:null},xI={ReactCurrentDispatcher:Pr,ReactCurrentBatchConfig:pd,ReactCurrentOwner:xy};function JS(){throw Error("act(...) is not supported in production builds of React.")}Me.Children={map:xu,forEach:function(e,t,r){xu(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return xu(e,function(){t++}),t},toArray:function(e){return xu(e,function(t){return t})||[]},only:function(e){if(!by(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Me.Component=Ko;Me.Fragment=sI;Me.Profiler=lI;Me.PureComponent=vy;Me.StrictMode=oI;Me.Suspense=fI;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xI;Me.act=JS;Me.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=HS({},e.props),a=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=xy.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)GS.call(t,c)&&!YS.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Bc,type:e.type,key:a,ref:i,props:n,_owner:s}};Me.createContext=function(e){return e={$$typeof:uI,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:cI,_context:e},e.Consumer=e};Me.createElement=XS;Me.createFactory=function(e){var t=XS.bind(null,e);return t.type=e,t};Me.createRef=function(){return{current:null}};Me.forwardRef=function(e){return{$$typeof:dI,render:e}};Me.isValidElement=by;Me.lazy=function(e){return{$$typeof:pI,_payload:{_status:-1,_result:e},_init:yI}};Me.memo=function(e,t){return{$$typeof:hI,type:e,compare:t===void 0?null:t}};Me.startTransition=function(e){var t=pd.transition;pd.transition={};try{e()}finally{pd.transition=t}};Me.unstable_act=JS;Me.useCallback=function(e,t){return Pr.current.useCallback(e,t)};Me.useContext=function(e){return Pr.current.useContext(e)};Me.useDebugValue=function(){};Me.useDeferredValue=function(e){return Pr.current.useDeferredValue(e)};Me.useEffect=function(e,t){return Pr.current.useEffect(e,t)};Me.useId=function(){return Pr.current.useId()};Me.useImperativeHandle=function(e,t,r){return Pr.current.useImperativeHandle(e,t,r)};Me.useInsertionEffect=function(e,t){return Pr.current.useInsertionEffect(e,t)};Me.useLayoutEffect=function(e,t){return Pr.current.useLayoutEffect(e,t)};Me.useMemo=function(e,t){return Pr.current.useMemo(e,t)};Me.useReducer=function(e,t,r){return Pr.current.useReducer(e,t,r)};Me.useRef=function(e){return Pr.current.useRef(e)};Me.useState=function(e){return Pr.current.useState(e)};Me.useSyncExternalStore=function(e,t,r){return Pr.current.useSyncExternalStore(e,t,r)};Me.useTransition=function(){return Pr.current.useTransition()};Me.version="18.3.1";WS.exports=Me;var p=WS.exports;const lt=Ka(p),bI=US({__proto__:null,default:lt},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wI=p,_I=Symbol.for("react.element"),jI=Symbol.for("react.fragment"),SI=Object.prototype.hasOwnProperty,NI=wI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kI={key:!0,ref:!0,__self:!0,__source:!0};function QS(e,t,r){var n,a={},i=null,s=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)SI.call(t,n)&&!kI.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:_I,type:e,key:i,ref:s,props:a,_owner:NI.current}}ih.Fragment=jI;ih.jsx=QS;ih.jsxs=QS;zS.exports=ih;var l=zS.exports,ZS={exports:{}},fn={},eN={exports:{}},tN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,M){var L=I.length;I.push(M);e:for(;0<L;){var oe=L-1>>>1,re=I[oe];if(0<a(re,M))I[oe]=M,I[L]=re,L=oe;else break e}}function r(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var M=I[0],L=I.pop();if(L!==M){I[0]=L;e:for(var oe=0,re=I.length,Ne=re>>>1;oe<Ne;){var O=2*(oe+1)-1,q=I[O],te=O+1,$=I[te];if(0>a(q,L))te<re&&0>a($,q)?(I[oe]=$,I[te]=L,oe=te):(I[oe]=q,I[O]=L,oe=O);else if(te<re&&0>a($,L))I[oe]=$,I[te]=L,oe=te;else break e}}return M}function a(I,M){var L=I.sortIndex-M.sortIndex;return L!==0?L:I.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var c=[],u=[],d=1,f=null,h=3,m=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(I){for(var M=r(u);M!==null;){if(M.callback===null)n(u);else if(M.startTime<=I)n(u),M.sortIndex=M.expirationTime,t(c,M);else break;M=r(u)}}function _(I){if(y=!1,b(I),!g)if(r(c)!==null)g=!0,B(j);else{var M=r(u);M!==null&&W(_,M.startTime-I)}}function j(I,M){g=!1,y&&(y=!1,x(k),k=-1),m=!0;var L=h;try{for(b(M),f=r(c);f!==null&&(!(f.expirationTime>M)||I&&!A());){var oe=f.callback;if(typeof oe=="function"){f.callback=null,h=f.priorityLevel;var re=oe(f.expirationTime<=M);M=e.unstable_now(),typeof re=="function"?f.callback=re:f===r(c)&&n(c),b(M)}else n(c);f=r(c)}if(f!==null)var Ne=!0;else{var O=r(u);O!==null&&W(_,O.startTime-M),Ne=!1}return Ne}finally{f=null,h=L,m=!1}}var S=!1,N=null,k=-1,E=5,P=-1;function A(){return!(e.unstable_now()-P<E)}function D(){if(N!==null){var I=e.unstable_now();P=I;var M=!0;try{M=N(!0,I)}finally{M?H():(S=!1,N=null)}}else S=!1}var H;if(typeof w=="function")H=function(){w(D)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ee=Q.port2;Q.port1.onmessage=D,H=function(){ee.postMessage(null)}}else H=function(){v(D,0)};function B(I){N=I,S||(S=!0,H())}function W(I,M){k=v(function(){I(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,B(j))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(I){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var L=h;h=M;try{return I()}finally{h=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,M){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var L=h;h=I;try{return M()}finally{h=L}},e.unstable_scheduleCallback=function(I,M,L){var oe=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?oe+L:oe):L=oe,I){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=L+re,I={id:d++,callback:M,priorityLevel:I,startTime:L,expirationTime:re,sortIndex:-1},L>oe?(I.sortIndex=L,t(u,I),r(c)===null&&I===r(u)&&(y?(x(k),k=-1):y=!0,W(_,L-oe))):(I.sortIndex=re,t(c,I),g||m||(g=!0,B(j))),I},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(I){var M=h;return function(){var L=h;h=M;try{return I.apply(this,arguments)}finally{h=L}}}})(tN);eN.exports=tN;var CI=eN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EI=p,cn=CI;function ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rN=new Set,tc={};function Ts(e,t){Eo(e,t),Eo(e+"Capture",t)}function Eo(e,t){for(tc[e]=t,e=0;e<t.length;e++)rN.add(t[e])}var Pa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),og=Object.prototype.hasOwnProperty,PI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cb={},Eb={};function OI(e){return og.call(Eb,e)?!0:og.call(Cb,e)?!1:PI.test(e)?Eb[e]=!0:(Cb[e]=!0,!1)}function AI(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function TI(e,t,r,n){if(t===null||typeof t>"u"||AI(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Or(e,t,r,n,a,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var dr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){dr[e]=new Or(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];dr[t]=new Or(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){dr[e]=new Or(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){dr[e]=new Or(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){dr[e]=new Or(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){dr[e]=new Or(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){dr[e]=new Or(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){dr[e]=new Or(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){dr[e]=new Or(e,5,!1,e.toLowerCase(),null,!1,!1)});var wy=/[\-:]([a-z])/g;function _y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(wy,_y);dr[t]=new Or(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(wy,_y);dr[t]=new Or(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(wy,_y);dr[t]=new Or(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){dr[e]=new Or(e,1,!1,e.toLowerCase(),null,!1,!1)});dr.xlinkHref=new Or("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){dr[e]=new Or(e,1,!1,e.toLowerCase(),null,!0,!0)});function jy(e,t,r,n){var a=dr.hasOwnProperty(t)?dr[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(TI(t,r,a,n)&&(r=null),n||a===null?OI(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ha=EI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bu=Symbol.for("react.element"),to=Symbol.for("react.portal"),ro=Symbol.for("react.fragment"),Sy=Symbol.for("react.strict_mode"),lg=Symbol.for("react.profiler"),nN=Symbol.for("react.provider"),aN=Symbol.for("react.context"),Ny=Symbol.for("react.forward_ref"),cg=Symbol.for("react.suspense"),ug=Symbol.for("react.suspense_list"),ky=Symbol.for("react.memo"),ai=Symbol.for("react.lazy"),iN=Symbol.for("react.offscreen"),Pb=Symbol.iterator;function hl(e){return e===null||typeof e!="object"?null:(e=Pb&&e[Pb]||e["@@iterator"],typeof e=="function"?e:null)}var _t=Object.assign,qp;function Dl(e){if(qp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);qp=t&&t[1]||""}return`
`+qp+e}var Vp=!1;function Gp(e,t){if(!e||Vp)return"";Vp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(s!==1||o!==1)do if(s--,o--,0>o||a[s]!==i[o]){var c=`
`+a[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=o);break}}}finally{Vp=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Dl(e):""}function DI(e){switch(e.tag){case 5:return Dl(e.type);case 16:return Dl("Lazy");case 13:return Dl("Suspense");case 19:return Dl("SuspenseList");case 0:case 2:case 15:return e=Gp(e.type,!1),e;case 11:return e=Gp(e.type.render,!1),e;case 1:return e=Gp(e.type,!0),e;default:return""}}function dg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ro:return"Fragment";case to:return"Portal";case lg:return"Profiler";case Sy:return"StrictMode";case cg:return"Suspense";case ug:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case aN:return(e.displayName||"Context")+".Consumer";case nN:return(e._context.displayName||"Context")+".Provider";case Ny:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ky:return t=e.displayName||null,t!==null?t:dg(e.type)||"Memo";case ai:t=e._payload,e=e._init;try{return dg(e(t))}catch{}}return null}function II(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dg(t);case 8:return t===Sy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ni(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sN(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function RI(e){var t=sN(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wu(e){e._valueTracker||(e._valueTracker=RI(e))}function oN(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=sN(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ad(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function fg(e,t){var r=t.checked;return _t({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Ob(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ni(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lN(e,t){t=t.checked,t!=null&&jy(e,"checked",t,!1)}function hg(e,t){lN(e,t);var r=Ni(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?pg(e,t.type,r):t.hasOwnProperty("defaultValue")&&pg(e,t.type,Ni(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ab(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function pg(e,t,r){(t!=="number"||Ad(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Il=Array.isArray;function go(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ni(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function mg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ne(91));return _t({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Tb(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ne(92));if(Il(r)){if(1<r.length)throw Error(ne(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ni(r)}}function cN(e,t){var r=Ni(t.value),n=Ni(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Db(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function uN(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?uN(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var _u,dN=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(_u=_u||document.createElement("div"),_u.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_u.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Bl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MI=["Webkit","ms","Moz","O"];Object.keys(Bl).forEach(function(e){MI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Bl[t]=Bl[e]})});function fN(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Bl.hasOwnProperty(e)&&Bl[e]?(""+t).trim():t+"px"}function hN(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=fN(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var $I=_t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vg(e,t){if(t){if($I[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ne(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ne(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ne(62))}}function yg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xg=null;function Cy(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bg=null,vo=null,yo=null;function Ib(e){if(e=Wc(e)){if(typeof bg!="function")throw Error(ne(280));var t=e.stateNode;t&&(t=uh(t),bg(e.stateNode,e.type,t))}}function pN(e){vo?yo?yo.push(e):yo=[e]:vo=e}function mN(){if(vo){var e=vo,t=yo;if(yo=vo=null,Ib(e),t)for(e=0;e<t.length;e++)Ib(t[e])}}function gN(e,t){return e(t)}function vN(){}var Yp=!1;function yN(e,t,r){if(Yp)return e(t,r);Yp=!0;try{return gN(e,t,r)}finally{Yp=!1,(vo!==null||yo!==null)&&(vN(),mN())}}function nc(e,t){var r=e.stateNode;if(r===null)return null;var n=uh(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ne(231,t,typeof r));return r}var wg=!1;if(Pa)try{var pl={};Object.defineProperty(pl,"passive",{get:function(){wg=!0}}),window.addEventListener("test",pl,pl),window.removeEventListener("test",pl,pl)}catch{wg=!1}function LI(e,t,r,n,a,i,s,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Ul=!1,Td=null,Dd=!1,_g=null,FI={onError:function(e){Ul=!0,Td=e}};function BI(e,t,r,n,a,i,s,o,c){Ul=!1,Td=null,LI.apply(FI,arguments)}function UI(e,t,r,n,a,i,s,o,c){if(BI.apply(this,arguments),Ul){if(Ul){var u=Td;Ul=!1,Td=null}else throw Error(ne(198));Dd||(Dd=!0,_g=u)}}function Ds(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function xN(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Rb(e){if(Ds(e)!==e)throw Error(ne(188))}function zI(e){var t=e.alternate;if(!t){if(t=Ds(e),t===null)throw Error(ne(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Rb(a),e;if(i===n)return Rb(a),t;i=i.sibling}throw Error(ne(188))}if(r.return!==n.return)r=a,n=i;else{for(var s=!1,o=a.child;o;){if(o===r){s=!0,r=a,n=i;break}if(o===n){s=!0,n=a,r=i;break}o=o.sibling}if(!s){for(o=i.child;o;){if(o===r){s=!0,r=i,n=a;break}if(o===n){s=!0,n=i,r=a;break}o=o.sibling}if(!s)throw Error(ne(189))}}if(r.alternate!==n)throw Error(ne(190))}if(r.tag!==3)throw Error(ne(188));return r.stateNode.current===r?e:t}function bN(e){return e=zI(e),e!==null?wN(e):null}function wN(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=wN(e);if(t!==null)return t;e=e.sibling}return null}var _N=cn.unstable_scheduleCallback,Mb=cn.unstable_cancelCallback,WI=cn.unstable_shouldYield,KI=cn.unstable_requestPaint,Ot=cn.unstable_now,HI=cn.unstable_getCurrentPriorityLevel,Ey=cn.unstable_ImmediatePriority,jN=cn.unstable_UserBlockingPriority,Id=cn.unstable_NormalPriority,qI=cn.unstable_LowPriority,SN=cn.unstable_IdlePriority,sh=null,la=null;function VI(e){if(la&&typeof la.onCommitFiberRoot=="function")try{la.onCommitFiberRoot(sh,e,void 0,(e.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:XI,GI=Math.log,YI=Math.LN2;function XI(e){return e>>>=0,e===0?32:31-(GI(e)/YI|0)|0}var ju=64,Su=4194304;function Rl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Rd(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,s=r&268435455;if(s!==0){var o=s&~a;o!==0?n=Rl(o):(i&=s,i!==0&&(n=Rl(i)))}else s=r&~a,s!==0?n=Rl(s):i!==0&&(n=Rl(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Wn(t),a=1<<r,n|=e[r],t&=~a;return n}function JI(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QI(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-Wn(i),o=1<<s,c=a[s];c===-1?(!(o&r)||o&n)&&(a[s]=JI(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function jg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function NN(){var e=ju;return ju<<=1,!(ju&4194240)&&(ju=64),e}function Xp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Uc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Wn(t),e[t]=r}function ZI(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Wn(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Py(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Wn(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Ye=0;function kN(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var CN,Oy,EN,PN,ON,Sg=!1,Nu=[],gi=null,vi=null,yi=null,ac=new Map,ic=new Map,ci=[],eR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $b(e,t){switch(e){case"focusin":case"focusout":gi=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":yi=null;break;case"pointerover":case"pointerout":ac.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ic.delete(t.pointerId)}}function ml(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Wc(t),t!==null&&Oy(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function tR(e,t,r,n,a){switch(t){case"focusin":return gi=ml(gi,e,t,r,n,a),!0;case"dragenter":return vi=ml(vi,e,t,r,n,a),!0;case"mouseover":return yi=ml(yi,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return ac.set(i,ml(ac.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,ic.set(i,ml(ic.get(i)||null,e,t,r,n,a)),!0}return!1}function AN(e){var t=as(e.target);if(t!==null){var r=Ds(t);if(r!==null){if(t=r.tag,t===13){if(t=xN(r),t!==null){e.blockedOn=t,ON(e.priority,function(){EN(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function md(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ng(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);xg=n,r.target.dispatchEvent(n),xg=null}else return t=Wc(r),t!==null&&Oy(t),e.blockedOn=r,!1;t.shift()}return!0}function Lb(e,t,r){md(e)&&r.delete(t)}function rR(){Sg=!1,gi!==null&&md(gi)&&(gi=null),vi!==null&&md(vi)&&(vi=null),yi!==null&&md(yi)&&(yi=null),ac.forEach(Lb),ic.forEach(Lb)}function gl(e,t){e.blockedOn===t&&(e.blockedOn=null,Sg||(Sg=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,rR)))}function sc(e){function t(a){return gl(a,e)}if(0<Nu.length){gl(Nu[0],e);for(var r=1;r<Nu.length;r++){var n=Nu[r];n.blockedOn===e&&(n.blockedOn=null)}}for(gi!==null&&gl(gi,e),vi!==null&&gl(vi,e),yi!==null&&gl(yi,e),ac.forEach(t),ic.forEach(t),r=0;r<ci.length;r++)n=ci[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ci.length&&(r=ci[0],r.blockedOn===null);)AN(r),r.blockedOn===null&&ci.shift()}var xo=Ha.ReactCurrentBatchConfig,Md=!0;function nR(e,t,r,n){var a=Ye,i=xo.transition;xo.transition=null;try{Ye=1,Ay(e,t,r,n)}finally{Ye=a,xo.transition=i}}function aR(e,t,r,n){var a=Ye,i=xo.transition;xo.transition=null;try{Ye=4,Ay(e,t,r,n)}finally{Ye=a,xo.transition=i}}function Ay(e,t,r,n){if(Md){var a=Ng(e,t,r,n);if(a===null)sm(e,t,n,$d,r),$b(e,n);else if(tR(a,e,t,r,n))n.stopPropagation();else if($b(e,n),t&4&&-1<eR.indexOf(e)){for(;a!==null;){var i=Wc(a);if(i!==null&&CN(i),i=Ng(e,t,r,n),i===null&&sm(e,t,n,$d,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else sm(e,t,n,null,r)}}var $d=null;function Ng(e,t,r,n){if($d=null,e=Cy(n),e=as(e),e!==null)if(t=Ds(e),t===null)e=null;else if(r=t.tag,r===13){if(e=xN(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $d=e,null}function TN(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HI()){case Ey:return 1;case jN:return 4;case Id:case qI:return 16;case SN:return 536870912;default:return 16}default:return 16}}var hi=null,Ty=null,gd=null;function DN(){if(gd)return gd;var e,t=Ty,r=t.length,n,a="value"in hi?hi.value:hi.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===a[i-n];n++);return gd=a.slice(e,1<n?1-n:void 0)}function vd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ku(){return!0}function Fb(){return!1}function hn(e){function t(r,n,a,i,s){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ku:Fb,this.isPropagationStopped=Fb,this}return _t(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ku)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ku)},persist:function(){},isPersistent:ku}),t}var Ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dy=hn(Ho),zc=_t({},Ho,{view:0,detail:0}),iR=hn(zc),Jp,Qp,vl,oh=_t({},zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Iy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vl&&(vl&&e.type==="mousemove"?(Jp=e.screenX-vl.screenX,Qp=e.screenY-vl.screenY):Qp=Jp=0,vl=e),Jp)},movementY:function(e){return"movementY"in e?e.movementY:Qp}}),Bb=hn(oh),sR=_t({},oh,{dataTransfer:0}),oR=hn(sR),lR=_t({},zc,{relatedTarget:0}),Zp=hn(lR),cR=_t({},Ho,{animationName:0,elapsedTime:0,pseudoElement:0}),uR=hn(cR),dR=_t({},Ho,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fR=hn(dR),hR=_t({},Ho,{data:0}),Ub=hn(hR),pR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vR(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gR[e])?!!t[e]:!1}function Iy(){return vR}var yR=_t({},zc,{key:function(e){if(e.key){var t=pR[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=vd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Iy,charCode:function(e){return e.type==="keypress"?vd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xR=hn(yR),bR=_t({},oh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zb=hn(bR),wR=_t({},zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Iy}),_R=hn(wR),jR=_t({},Ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),SR=hn(jR),NR=_t({},oh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kR=hn(NR),CR=[9,13,27,32],Ry=Pa&&"CompositionEvent"in window,zl=null;Pa&&"documentMode"in document&&(zl=document.documentMode);var ER=Pa&&"TextEvent"in window&&!zl,IN=Pa&&(!Ry||zl&&8<zl&&11>=zl),Wb=" ",Kb=!1;function RN(e,t){switch(e){case"keyup":return CR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MN(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var no=!1;function PR(e,t){switch(e){case"compositionend":return MN(t);case"keypress":return t.which!==32?null:(Kb=!0,Wb);case"textInput":return e=t.data,e===Wb&&Kb?null:e;default:return null}}function OR(e,t){if(no)return e==="compositionend"||!Ry&&RN(e,t)?(e=DN(),gd=Ty=hi=null,no=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return IN&&t.locale!=="ko"?null:t.data;default:return null}}var AR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!AR[e.type]:t==="textarea"}function $N(e,t,r,n){pN(n),t=Ld(t,"onChange"),0<t.length&&(r=new Dy("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Wl=null,oc=null;function TR(e){GN(e,0)}function lh(e){var t=so(e);if(oN(t))return e}function DR(e,t){if(e==="change")return t}var LN=!1;if(Pa){var em;if(Pa){var tm="oninput"in document;if(!tm){var qb=document.createElement("div");qb.setAttribute("oninput","return;"),tm=typeof qb.oninput=="function"}em=tm}else em=!1;LN=em&&(!document.documentMode||9<document.documentMode)}function Vb(){Wl&&(Wl.detachEvent("onpropertychange",FN),oc=Wl=null)}function FN(e){if(e.propertyName==="value"&&lh(oc)){var t=[];$N(t,oc,e,Cy(e)),yN(TR,t)}}function IR(e,t,r){e==="focusin"?(Vb(),Wl=t,oc=r,Wl.attachEvent("onpropertychange",FN)):e==="focusout"&&Vb()}function RR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return lh(oc)}function MR(e,t){if(e==="click")return lh(t)}function $R(e,t){if(e==="input"||e==="change")return lh(t)}function LR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Hn=typeof Object.is=="function"?Object.is:LR;function lc(e,t){if(Hn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!og.call(t,a)||!Hn(e[a],t[a]))return!1}return!0}function Gb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yb(e,t){var r=Gb(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Gb(r)}}function BN(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?BN(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function UN(){for(var e=window,t=Ad();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ad(e.document)}return t}function My(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function FR(e){var t=UN(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&BN(r.ownerDocument.documentElement,r)){if(n!==null&&My(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Yb(r,i);var s=Yb(r,n);a&&s&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var BR=Pa&&"documentMode"in document&&11>=document.documentMode,ao=null,kg=null,Kl=null,Cg=!1;function Xb(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Cg||ao==null||ao!==Ad(n)||(n=ao,"selectionStart"in n&&My(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Kl&&lc(Kl,n)||(Kl=n,n=Ld(kg,"onSelect"),0<n.length&&(t=new Dy("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ao)))}function Cu(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var io={animationend:Cu("Animation","AnimationEnd"),animationiteration:Cu("Animation","AnimationIteration"),animationstart:Cu("Animation","AnimationStart"),transitionend:Cu("Transition","TransitionEnd")},rm={},zN={};Pa&&(zN=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function ch(e){if(rm[e])return rm[e];if(!io[e])return e;var t=io[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in zN)return rm[e]=t[r];return e}var WN=ch("animationend"),KN=ch("animationiteration"),HN=ch("animationstart"),qN=ch("transitionend"),VN=new Map,Jb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ai(e,t){VN.set(e,t),Ts(t,[e])}for(var nm=0;nm<Jb.length;nm++){var am=Jb[nm],UR=am.toLowerCase(),zR=am[0].toUpperCase()+am.slice(1);Ai(UR,"on"+zR)}Ai(WN,"onAnimationEnd");Ai(KN,"onAnimationIteration");Ai(HN,"onAnimationStart");Ai("dblclick","onDoubleClick");Ai("focusin","onFocus");Ai("focusout","onBlur");Ai(qN,"onTransitionEnd");Eo("onMouseEnter",["mouseout","mouseover"]);Eo("onMouseLeave",["mouseout","mouseover"]);Eo("onPointerEnter",["pointerout","pointerover"]);Eo("onPointerLeave",["pointerout","pointerover"]);Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ml));function Qb(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,UI(n,t,void 0,e),e.currentTarget=null}function GN(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;Qb(a,o,u),i=c}else for(s=0;s<n.length;s++){if(o=n[s],c=o.instance,u=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;Qb(a,o,u),i=c}}}if(Dd)throw e=_g,Dd=!1,_g=null,e}function st(e,t){var r=t[Tg];r===void 0&&(r=t[Tg]=new Set);var n=e+"__bubble";r.has(n)||(YN(t,e,2,!1),r.add(n))}function im(e,t,r){var n=0;t&&(n|=4),YN(r,e,n,t)}var Eu="_reactListening"+Math.random().toString(36).slice(2);function cc(e){if(!e[Eu]){e[Eu]=!0,rN.forEach(function(r){r!=="selectionchange"&&(WR.has(r)||im(r,!1,e),im(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Eu]||(t[Eu]=!0,im("selectionchange",!1,t))}}function YN(e,t,r,n){switch(TN(t)){case 1:var a=nR;break;case 4:a=aR;break;default:a=Ay}r=a.bind(null,t,r,e),a=void 0,!wg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function sm(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(s===4)for(s=n.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;s=s.return}for(;o!==null;){if(s=as(o),s===null)return;if(c=s.tag,c===5||c===6){n=i=s;continue e}o=o.parentNode}}n=n.return}yN(function(){var u=i,d=Cy(r),f=[];e:{var h=VN.get(e);if(h!==void 0){var m=Dy,g=e;switch(e){case"keypress":if(vd(r)===0)break e;case"keydown":case"keyup":m=xR;break;case"focusin":g="focus",m=Zp;break;case"focusout":g="blur",m=Zp;break;case"beforeblur":case"afterblur":m=Zp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Bb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=oR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=_R;break;case WN:case KN:case HN:m=uR;break;case qN:m=SR;break;case"scroll":m=iR;break;case"wheel":m=kR;break;case"copy":case"cut":case"paste":m=fR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=zb}var y=(t&4)!==0,v=!y&&e==="scroll",x=y?h!==null?h+"Capture":null:h;y=[];for(var w=u,b;w!==null;){b=w;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,x!==null&&(_=nc(w,x),_!=null&&y.push(uc(w,_,b)))),v)break;w=w.return}0<y.length&&(h=new m(h,g,null,r,d),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==xg&&(g=r.relatedTarget||r.fromElement)&&(as(g)||g[Oa]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=u,g=g?as(g):null,g!==null&&(v=Ds(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(y=Bb,_="onMouseLeave",x="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(y=zb,_="onPointerLeave",x="onPointerEnter",w="pointer"),v=m==null?h:so(m),b=g==null?h:so(g),h=new y(_,w+"leave",m,r,d),h.target=v,h.relatedTarget=b,_=null,as(d)===u&&(y=new y(x,w+"enter",g,r,d),y.target=b,y.relatedTarget=v,_=y),v=_,m&&g)t:{for(y=m,x=g,w=0,b=y;b;b=Fs(b))w++;for(b=0,_=x;_;_=Fs(_))b++;for(;0<w-b;)y=Fs(y),w--;for(;0<b-w;)x=Fs(x),b--;for(;w--;){if(y===x||x!==null&&y===x.alternate)break t;y=Fs(y),x=Fs(x)}y=null}else y=null;m!==null&&Zb(f,h,m,y,!1),g!==null&&v!==null&&Zb(f,v,g,y,!0)}}e:{if(h=u?so(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var j=DR;else if(Hb(h))if(LN)j=$R;else{j=RR;var S=IR}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=MR);if(j&&(j=j(e,u))){$N(f,j,r,d);break e}S&&S(e,h,u),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&pg(h,"number",h.value)}switch(S=u?so(u):window,e){case"focusin":(Hb(S)||S.contentEditable==="true")&&(ao=S,kg=u,Kl=null);break;case"focusout":Kl=kg=ao=null;break;case"mousedown":Cg=!0;break;case"contextmenu":case"mouseup":case"dragend":Cg=!1,Xb(f,r,d);break;case"selectionchange":if(BR)break;case"keydown":case"keyup":Xb(f,r,d)}var N;if(Ry)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else no?RN(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(IN&&r.locale!=="ko"&&(no||k!=="onCompositionStart"?k==="onCompositionEnd"&&no&&(N=DN()):(hi=d,Ty="value"in hi?hi.value:hi.textContent,no=!0)),S=Ld(u,k),0<S.length&&(k=new Ub(k,e,null,r,d),f.push({event:k,listeners:S}),N?k.data=N:(N=MN(r),N!==null&&(k.data=N)))),(N=ER?PR(e,r):OR(e,r))&&(u=Ld(u,"onBeforeInput"),0<u.length&&(d=new Ub("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=N))}GN(f,t)})}function uc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ld(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=nc(e,r),i!=null&&n.unshift(uc(e,i,a)),i=nc(e,t),i!=null&&n.push(uc(e,i,a))),e=e.return}return n}function Fs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Zb(e,t,r,n,a){for(var i=t._reactName,s=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,a?(c=nc(r,i),c!=null&&s.unshift(uc(r,c,o))):a||(c=nc(r,i),c!=null&&s.push(uc(r,c,o)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var KR=/\r\n?/g,HR=/\u0000|\uFFFD/g;function ew(e){return(typeof e=="string"?e:""+e).replace(KR,`
`).replace(HR,"")}function Pu(e,t,r){if(t=ew(t),ew(e)!==t&&r)throw Error(ne(425))}function Fd(){}var Eg=null,Pg=null;function Og(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ag=typeof setTimeout=="function"?setTimeout:void 0,qR=typeof clearTimeout=="function"?clearTimeout:void 0,tw=typeof Promise=="function"?Promise:void 0,VR=typeof queueMicrotask=="function"?queueMicrotask:typeof tw<"u"?function(e){return tw.resolve(null).then(e).catch(GR)}:Ag;function GR(e){setTimeout(function(){throw e})}function om(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),sc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);sc(t)}function xi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function rw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var qo=Math.random().toString(36).slice(2),sa="__reactFiber$"+qo,dc="__reactProps$"+qo,Oa="__reactContainer$"+qo,Tg="__reactEvents$"+qo,YR="__reactListeners$"+qo,XR="__reactHandles$"+qo;function as(e){var t=e[sa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Oa]||r[sa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=rw(e);e!==null;){if(r=e[sa])return r;e=rw(e)}return t}e=r,r=e.parentNode}return null}function Wc(e){return e=e[sa]||e[Oa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function so(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ne(33))}function uh(e){return e[dc]||null}var Dg=[],oo=-1;function Ti(e){return{current:e}}function ct(e){0>oo||(e.current=Dg[oo],Dg[oo]=null,oo--)}function nt(e,t){oo++,Dg[oo]=e.current,e.current=t}var ki={},xr=Ti(ki),zr=Ti(!1),ys=ki;function Po(e,t){var r=e.type.contextTypes;if(!r)return ki;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Wr(e){return e=e.childContextTypes,e!=null}function Bd(){ct(zr),ct(xr)}function nw(e,t,r){if(xr.current!==ki)throw Error(ne(168));nt(xr,t),nt(zr,r)}function XN(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(ne(108,II(e)||"Unknown",a));return _t({},r,n)}function Ud(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,ys=xr.current,nt(xr,e),nt(zr,zr.current),!0}function aw(e,t,r){var n=e.stateNode;if(!n)throw Error(ne(169));r?(e=XN(e,t,ys),n.__reactInternalMemoizedMergedChildContext=e,ct(zr),ct(xr),nt(xr,e)):ct(zr),nt(zr,r)}var ya=null,dh=!1,lm=!1;function JN(e){ya===null?ya=[e]:ya.push(e)}function JR(e){dh=!0,JN(e)}function Di(){if(!lm&&ya!==null){lm=!0;var e=0,t=Ye;try{var r=ya;for(Ye=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ya=null,dh=!1}catch(a){throw ya!==null&&(ya=ya.slice(e+1)),_N(Ey,Di),a}finally{Ye=t,lm=!1}}return null}var lo=[],co=0,zd=null,Wd=0,xn=[],bn=0,xs=null,wa=1,_a="";function Yi(e,t){lo[co++]=Wd,lo[co++]=zd,zd=e,Wd=t}function QN(e,t,r){xn[bn++]=wa,xn[bn++]=_a,xn[bn++]=xs,xs=e;var n=wa;e=_a;var a=32-Wn(n)-1;n&=~(1<<a),r+=1;var i=32-Wn(t)+a;if(30<i){var s=a-a%5;i=(n&(1<<s)-1).toString(32),n>>=s,a-=s,wa=1<<32-Wn(t)+a|r<<a|n,_a=i+e}else wa=1<<i|r<<a|n,_a=e}function $y(e){e.return!==null&&(Yi(e,1),QN(e,1,0))}function Ly(e){for(;e===zd;)zd=lo[--co],lo[co]=null,Wd=lo[--co],lo[co]=null;for(;e===xs;)xs=xn[--bn],xn[bn]=null,_a=xn[--bn],xn[bn]=null,wa=xn[--bn],xn[bn]=null}var on=null,sn=null,dt=!1,Bn=null;function ZN(e,t){var r=wn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function iw(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,on=e,sn=xi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,on=e,sn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=xs!==null?{id:wa,overflow:_a}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=wn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,on=e,sn=null,!0):!1;default:return!1}}function Ig(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Rg(e){if(dt){var t=sn;if(t){var r=t;if(!iw(e,t)){if(Ig(e))throw Error(ne(418));t=xi(r.nextSibling);var n=on;t&&iw(e,t)?ZN(n,r):(e.flags=e.flags&-4097|2,dt=!1,on=e)}}else{if(Ig(e))throw Error(ne(418));e.flags=e.flags&-4097|2,dt=!1,on=e}}}function sw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;on=e}function Ou(e){if(e!==on)return!1;if(!dt)return sw(e),dt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Og(e.type,e.memoizedProps)),t&&(t=sn)){if(Ig(e))throw ek(),Error(ne(418));for(;t;)ZN(e,t),t=xi(t.nextSibling)}if(sw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){sn=xi(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}sn=null}}else sn=on?xi(e.stateNode.nextSibling):null;return!0}function ek(){for(var e=sn;e;)e=xi(e.nextSibling)}function Oo(){sn=on=null,dt=!1}function Fy(e){Bn===null?Bn=[e]:Bn.push(e)}var QR=Ha.ReactCurrentBatchConfig;function yl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ne(309));var n=r.stateNode}if(!n)throw Error(ne(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var o=a.refs;s===null?delete o[i]:o[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(ne(284));if(!r._owner)throw Error(ne(290,e))}return e}function Au(e,t){throw e=Object.prototype.toString.call(t),Error(ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ow(e){var t=e._init;return t(e._payload)}function tk(e){function t(x,w){if(e){var b=x.deletions;b===null?(x.deletions=[w],x.flags|=16):b.push(w)}}function r(x,w){if(!e)return null;for(;w!==null;)t(x,w),w=w.sibling;return null}function n(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function a(x,w){return x=ji(x,w),x.index=0,x.sibling=null,x}function i(x,w,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<w?(x.flags|=2,w):b):(x.flags|=2,w)):(x.flags|=1048576,w)}function s(x){return e&&x.alternate===null&&(x.flags|=2),x}function o(x,w,b,_){return w===null||w.tag!==6?(w=mm(b,x.mode,_),w.return=x,w):(w=a(w,b),w.return=x,w)}function c(x,w,b,_){var j=b.type;return j===ro?d(x,w,b.props.children,_,b.key):w!==null&&(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ai&&ow(j)===w.type)?(_=a(w,b.props),_.ref=yl(x,w,b),_.return=x,_):(_=Sd(b.type,b.key,b.props,null,x.mode,_),_.ref=yl(x,w,b),_.return=x,_)}function u(x,w,b,_){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=gm(b,x.mode,_),w.return=x,w):(w=a(w,b.children||[]),w.return=x,w)}function d(x,w,b,_,j){return w===null||w.tag!==7?(w=fs(b,x.mode,_,j),w.return=x,w):(w=a(w,b),w.return=x,w)}function f(x,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=mm(""+w,x.mode,b),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case bu:return b=Sd(w.type,w.key,w.props,null,x.mode,b),b.ref=yl(x,null,w),b.return=x,b;case to:return w=gm(w,x.mode,b),w.return=x,w;case ai:var _=w._init;return f(x,_(w._payload),b)}if(Il(w)||hl(w))return w=fs(w,x.mode,b,null),w.return=x,w;Au(x,w)}return null}function h(x,w,b,_){var j=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:o(x,w,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case bu:return b.key===j?c(x,w,b,_):null;case to:return b.key===j?u(x,w,b,_):null;case ai:return j=b._init,h(x,w,j(b._payload),_)}if(Il(b)||hl(b))return j!==null?null:d(x,w,b,_,null);Au(x,b)}return null}function m(x,w,b,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return x=x.get(b)||null,o(w,x,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case bu:return x=x.get(_.key===null?b:_.key)||null,c(w,x,_,j);case to:return x=x.get(_.key===null?b:_.key)||null,u(w,x,_,j);case ai:var S=_._init;return m(x,w,b,S(_._payload),j)}if(Il(_)||hl(_))return x=x.get(b)||null,d(w,x,_,j,null);Au(w,_)}return null}function g(x,w,b,_){for(var j=null,S=null,N=w,k=w=0,E=null;N!==null&&k<b.length;k++){N.index>k?(E=N,N=null):E=N.sibling;var P=h(x,N,b[k],_);if(P===null){N===null&&(N=E);break}e&&N&&P.alternate===null&&t(x,N),w=i(P,w,k),S===null?j=P:S.sibling=P,S=P,N=E}if(k===b.length)return r(x,N),dt&&Yi(x,k),j;if(N===null){for(;k<b.length;k++)N=f(x,b[k],_),N!==null&&(w=i(N,w,k),S===null?j=N:S.sibling=N,S=N);return dt&&Yi(x,k),j}for(N=n(x,N);k<b.length;k++)E=m(N,x,k,b[k],_),E!==null&&(e&&E.alternate!==null&&N.delete(E.key===null?k:E.key),w=i(E,w,k),S===null?j=E:S.sibling=E,S=E);return e&&N.forEach(function(A){return t(x,A)}),dt&&Yi(x,k),j}function y(x,w,b,_){var j=hl(b);if(typeof j!="function")throw Error(ne(150));if(b=j.call(b),b==null)throw Error(ne(151));for(var S=j=null,N=w,k=w=0,E=null,P=b.next();N!==null&&!P.done;k++,P=b.next()){N.index>k?(E=N,N=null):E=N.sibling;var A=h(x,N,P.value,_);if(A===null){N===null&&(N=E);break}e&&N&&A.alternate===null&&t(x,N),w=i(A,w,k),S===null?j=A:S.sibling=A,S=A,N=E}if(P.done)return r(x,N),dt&&Yi(x,k),j;if(N===null){for(;!P.done;k++,P=b.next())P=f(x,P.value,_),P!==null&&(w=i(P,w,k),S===null?j=P:S.sibling=P,S=P);return dt&&Yi(x,k),j}for(N=n(x,N);!P.done;k++,P=b.next())P=m(N,x,k,P.value,_),P!==null&&(e&&P.alternate!==null&&N.delete(P.key===null?k:P.key),w=i(P,w,k),S===null?j=P:S.sibling=P,S=P);return e&&N.forEach(function(D){return t(x,D)}),dt&&Yi(x,k),j}function v(x,w,b,_){if(typeof b=="object"&&b!==null&&b.type===ro&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case bu:e:{for(var j=b.key,S=w;S!==null;){if(S.key===j){if(j=b.type,j===ro){if(S.tag===7){r(x,S.sibling),w=a(S,b.props.children),w.return=x,x=w;break e}}else if(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ai&&ow(j)===S.type){r(x,S.sibling),w=a(S,b.props),w.ref=yl(x,S,b),w.return=x,x=w;break e}r(x,S);break}else t(x,S);S=S.sibling}b.type===ro?(w=fs(b.props.children,x.mode,_,b.key),w.return=x,x=w):(_=Sd(b.type,b.key,b.props,null,x.mode,_),_.ref=yl(x,w,b),_.return=x,x=_)}return s(x);case to:e:{for(S=b.key;w!==null;){if(w.key===S)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){r(x,w.sibling),w=a(w,b.children||[]),w.return=x,x=w;break e}else{r(x,w);break}else t(x,w);w=w.sibling}w=gm(b,x.mode,_),w.return=x,x=w}return s(x);case ai:return S=b._init,v(x,w,S(b._payload),_)}if(Il(b))return g(x,w,b,_);if(hl(b))return y(x,w,b,_);Au(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(r(x,w.sibling),w=a(w,b),w.return=x,x=w):(r(x,w),w=mm(b,x.mode,_),w.return=x,x=w),s(x)):r(x,w)}return v}var Ao=tk(!0),rk=tk(!1),Kd=Ti(null),Hd=null,uo=null,By=null;function Uy(){By=uo=Hd=null}function zy(e){var t=Kd.current;ct(Kd),e._currentValue=t}function Mg(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function bo(e,t){Hd=e,By=uo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Fr=!0),e.firstContext=null)}function Nn(e){var t=e._currentValue;if(By!==e)if(e={context:e,memoizedValue:t,next:null},uo===null){if(Hd===null)throw Error(ne(308));uo=e,Hd.dependencies={lanes:0,firstContext:e}}else uo=uo.next=e;return t}var is=null;function Wy(e){is===null?is=[e]:is.push(e)}function nk(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Wy(t)):(r.next=a.next,a.next=r),t.interleaved=r,Aa(e,n)}function Aa(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ii=!1;function Ky(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ak(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Na(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function bi(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Be&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Aa(e,r)}return a=n.interleaved,a===null?(t.next=t,Wy(n)):(t.next=a.next,a.next=t),n.interleaved=t,Aa(e,r)}function yd(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Py(e,r)}}function lw(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=s:i=i.next=s,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function qd(e,t,r,n){var a=e.updateQueue;ii=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,u=c.next;c.next=null,s===null?i=u:s.next=u,s=c;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==s&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;s=0,d=u=c=null,o=i;do{var h=o.lane,m=o.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,y=o;switch(h=t,m=r,y.tag){case 1:if(g=y.payload,typeof g=="function"){f=g.call(m,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,h=typeof g=="function"?g.call(m,f,h):g,h==null)break e;f=_t({},f,h);break e;case 2:ii=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,s|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do s|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);ws|=s,e.lanes=s,e.memoizedState=f}}function cw(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(ne(191,a));a.call(n)}}}var Kc={},ca=Ti(Kc),fc=Ti(Kc),hc=Ti(Kc);function ss(e){if(e===Kc)throw Error(ne(174));return e}function Hy(e,t){switch(nt(hc,t),nt(fc,e),nt(ca,Kc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:gg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=gg(t,e)}ct(ca),nt(ca,t)}function To(){ct(ca),ct(fc),ct(hc)}function ik(e){ss(hc.current);var t=ss(ca.current),r=gg(t,e.type);t!==r&&(nt(fc,e),nt(ca,r))}function qy(e){fc.current===e&&(ct(ca),ct(fc))}var bt=Ti(0);function Vd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cm=[];function Vy(){for(var e=0;e<cm.length;e++)cm[e]._workInProgressVersionPrimary=null;cm.length=0}var xd=Ha.ReactCurrentDispatcher,um=Ha.ReactCurrentBatchConfig,bs=0,wt=null,Bt=null,Jt=null,Gd=!1,Hl=!1,pc=0,ZR=0;function pr(){throw Error(ne(321))}function Gy(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Hn(e[r],t[r]))return!1;return!0}function Yy(e,t,r,n,a,i){if(bs=i,wt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,xd.current=e===null||e.memoizedState===null?nM:aM,e=r(n,a),Hl){i=0;do{if(Hl=!1,pc=0,25<=i)throw Error(ne(301));i+=1,Jt=Bt=null,t.updateQueue=null,xd.current=iM,e=r(n,a)}while(Hl)}if(xd.current=Yd,t=Bt!==null&&Bt.next!==null,bs=0,Jt=Bt=wt=null,Gd=!1,t)throw Error(ne(300));return e}function Xy(){var e=pc!==0;return pc=0,e}function aa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?wt.memoizedState=Jt=e:Jt=Jt.next=e,Jt}function kn(){if(Bt===null){var e=wt.alternate;e=e!==null?e.memoizedState:null}else e=Bt.next;var t=Jt===null?wt.memoizedState:Jt.next;if(t!==null)Jt=t,Bt=e;else{if(e===null)throw Error(ne(310));Bt=e,e={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Jt===null?wt.memoizedState=Jt=e:Jt=Jt.next=e}return Jt}function mc(e,t){return typeof t=="function"?t(e):t}function dm(e){var t=kn(),r=t.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=e;var n=Bt,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var o=s=null,c=null,u=i;do{var d=u.lane;if((bs&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,s=n):c=c.next=f,wt.lanes|=d,ws|=d}u=u.next}while(u!==null&&u!==i);c===null?s=n:c.next=o,Hn(n,t.memoizedState)||(Fr=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,wt.lanes|=i,ws|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function fm(e){var t=kn(),r=t.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var s=a=a.next;do i=e(i,s.action),s=s.next;while(s!==a);Hn(i,t.memoizedState)||(Fr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function sk(){}function ok(e,t){var r=wt,n=kn(),a=t(),i=!Hn(n.memoizedState,a);if(i&&(n.memoizedState=a,Fr=!0),n=n.queue,Jy(uk.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Jt!==null&&Jt.memoizedState.tag&1){if(r.flags|=2048,gc(9,ck.bind(null,r,n,a,t),void 0,null),er===null)throw Error(ne(349));bs&30||lk(r,t,a)}return a}function lk(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=wt.updateQueue,t===null?(t={lastEffect:null,stores:null},wt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function ck(e,t,r,n){t.value=r,t.getSnapshot=n,dk(t)&&fk(e)}function uk(e,t,r){return r(function(){dk(t)&&fk(e)})}function dk(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Hn(e,r)}catch{return!0}}function fk(e){var t=Aa(e,1);t!==null&&Kn(t,e,1,-1)}function uw(e){var t=aa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mc,lastRenderedState:e},t.queue=e,e=e.dispatch=rM.bind(null,wt,e),[t.memoizedState,e]}function gc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=wt.updateQueue,t===null?(t={lastEffect:null,stores:null},wt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function hk(){return kn().memoizedState}function bd(e,t,r,n){var a=aa();wt.flags|=e,a.memoizedState=gc(1|t,r,void 0,n===void 0?null:n)}function fh(e,t,r,n){var a=kn();n=n===void 0?null:n;var i=void 0;if(Bt!==null){var s=Bt.memoizedState;if(i=s.destroy,n!==null&&Gy(n,s.deps)){a.memoizedState=gc(t,r,i,n);return}}wt.flags|=e,a.memoizedState=gc(1|t,r,i,n)}function dw(e,t){return bd(8390656,8,e,t)}function Jy(e,t){return fh(2048,8,e,t)}function pk(e,t){return fh(4,2,e,t)}function mk(e,t){return fh(4,4,e,t)}function gk(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vk(e,t,r){return r=r!=null?r.concat([e]):null,fh(4,4,gk.bind(null,t,e),r)}function Qy(){}function yk(e,t){var r=kn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Gy(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function xk(e,t){var r=kn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Gy(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function bk(e,t,r){return bs&21?(Hn(r,t)||(r=NN(),wt.lanes|=r,ws|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Fr=!0),e.memoizedState=r)}function eM(e,t){var r=Ye;Ye=r!==0&&4>r?r:4,e(!0);var n=um.transition;um.transition={};try{e(!1),t()}finally{Ye=r,um.transition=n}}function wk(){return kn().memoizedState}function tM(e,t,r){var n=_i(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},_k(e))jk(t,r);else if(r=nk(e,t,r,n),r!==null){var a=Cr();Kn(r,e,n,a),Sk(r,t,n)}}function rM(e,t,r){var n=_i(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(_k(e))jk(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,o=i(s,r);if(a.hasEagerState=!0,a.eagerState=o,Hn(o,s)){var c=t.interleaved;c===null?(a.next=a,Wy(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=nk(e,t,a,n),r!==null&&(a=Cr(),Kn(r,e,n,a),Sk(r,t,n))}}function _k(e){var t=e.alternate;return e===wt||t!==null&&t===wt}function jk(e,t){Hl=Gd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Sk(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Py(e,r)}}var Yd={readContext:Nn,useCallback:pr,useContext:pr,useEffect:pr,useImperativeHandle:pr,useInsertionEffect:pr,useLayoutEffect:pr,useMemo:pr,useReducer:pr,useRef:pr,useState:pr,useDebugValue:pr,useDeferredValue:pr,useTransition:pr,useMutableSource:pr,useSyncExternalStore:pr,useId:pr,unstable_isNewReconciler:!1},nM={readContext:Nn,useCallback:function(e,t){return aa().memoizedState=[e,t===void 0?null:t],e},useContext:Nn,useEffect:dw,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,bd(4194308,4,gk.bind(null,t,e),r)},useLayoutEffect:function(e,t){return bd(4194308,4,e,t)},useInsertionEffect:function(e,t){return bd(4,2,e,t)},useMemo:function(e,t){var r=aa();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=aa();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=tM.bind(null,wt,e),[n.memoizedState,e]},useRef:function(e){var t=aa();return e={current:e},t.memoizedState=e},useState:uw,useDebugValue:Qy,useDeferredValue:function(e){return aa().memoizedState=e},useTransition:function(){var e=uw(!1),t=e[0];return e=eM.bind(null,e[1]),aa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=wt,a=aa();if(dt){if(r===void 0)throw Error(ne(407));r=r()}else{if(r=t(),er===null)throw Error(ne(349));bs&30||lk(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,dw(uk.bind(null,n,i,e),[e]),n.flags|=2048,gc(9,ck.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=aa(),t=er.identifierPrefix;if(dt){var r=_a,n=wa;r=(n&~(1<<32-Wn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=pc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ZR++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},aM={readContext:Nn,useCallback:yk,useContext:Nn,useEffect:Jy,useImperativeHandle:vk,useInsertionEffect:pk,useLayoutEffect:mk,useMemo:xk,useReducer:dm,useRef:hk,useState:function(){return dm(mc)},useDebugValue:Qy,useDeferredValue:function(e){var t=kn();return bk(t,Bt.memoizedState,e)},useTransition:function(){var e=dm(mc)[0],t=kn().memoizedState;return[e,t]},useMutableSource:sk,useSyncExternalStore:ok,useId:wk,unstable_isNewReconciler:!1},iM={readContext:Nn,useCallback:yk,useContext:Nn,useEffect:Jy,useImperativeHandle:vk,useInsertionEffect:pk,useLayoutEffect:mk,useMemo:xk,useReducer:fm,useRef:hk,useState:function(){return fm(mc)},useDebugValue:Qy,useDeferredValue:function(e){var t=kn();return Bt===null?t.memoizedState=e:bk(t,Bt.memoizedState,e)},useTransition:function(){var e=fm(mc)[0],t=kn().memoizedState;return[e,t]},useMutableSource:sk,useSyncExternalStore:ok,useId:wk,unstable_isNewReconciler:!1};function $n(e,t){if(e&&e.defaultProps){t=_t({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function $g(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:_t({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var hh={isMounted:function(e){return(e=e._reactInternals)?Ds(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Cr(),a=_i(e),i=Na(n,a);i.payload=t,r!=null&&(i.callback=r),t=bi(e,i,a),t!==null&&(Kn(t,e,a,n),yd(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Cr(),a=_i(e),i=Na(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=bi(e,i,a),t!==null&&(Kn(t,e,a,n),yd(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Cr(),n=_i(e),a=Na(r,n);a.tag=2,t!=null&&(a.callback=t),t=bi(e,a,n),t!==null&&(Kn(t,e,n,r),yd(t,e,n))}};function fw(e,t,r,n,a,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,s):t.prototype&&t.prototype.isPureReactComponent?!lc(r,n)||!lc(a,i):!0}function Nk(e,t,r){var n=!1,a=ki,i=t.contextType;return typeof i=="object"&&i!==null?i=Nn(i):(a=Wr(t)?ys:xr.current,n=t.contextTypes,i=(n=n!=null)?Po(e,a):ki),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=hh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function hw(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&hh.enqueueReplaceState(t,t.state,null)}function Lg(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Ky(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Nn(i):(i=Wr(t)?ys:xr.current,a.context=Po(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&($g(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&hh.enqueueReplaceState(a,a.state,null),qd(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Do(e,t){try{var r="",n=t;do r+=DI(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function hm(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Fg(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var sM=typeof WeakMap=="function"?WeakMap:Map;function kk(e,t,r){r=Na(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Jd||(Jd=!0,Yg=n),Fg(e,t)},r}function Ck(e,t,r){r=Na(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Fg(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Fg(e,t),typeof n!="function"&&(wi===null?wi=new Set([this]):wi.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function pw(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new sM;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=bM.bind(null,e,t,r),t.then(e,e))}function mw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function gw(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Na(-1,1),t.tag=2,bi(r,t,1))),r.lanes|=1),e)}var oM=Ha.ReactCurrentOwner,Fr=!1;function jr(e,t,r,n){t.child=e===null?rk(t,null,r,n):Ao(t,e.child,r,n)}function vw(e,t,r,n,a){r=r.render;var i=t.ref;return bo(t,a),n=Yy(e,t,r,n,i,a),r=Xy(),e!==null&&!Fr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ta(e,t,a)):(dt&&r&&$y(t),t.flags|=1,jr(e,t,n,a),t.child)}function yw(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!s0(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Ek(e,t,i,n,a)):(e=Sd(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var s=i.memoizedProps;if(r=r.compare,r=r!==null?r:lc,r(s,n)&&e.ref===t.ref)return Ta(e,t,a)}return t.flags|=1,e=ji(i,n),e.ref=t.ref,e.return=t,t.child=e}function Ek(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(lc(i,n)&&e.ref===t.ref)if(Fr=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Fr=!0);else return t.lanes=e.lanes,Ta(e,t,a)}return Bg(e,t,r,n,a)}function Pk(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(ho,en),en|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,nt(ho,en),en|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,nt(ho,en),en|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,nt(ho,en),en|=n;return jr(e,t,a,r),t.child}function Ok(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Bg(e,t,r,n,a){var i=Wr(r)?ys:xr.current;return i=Po(t,i),bo(t,a),r=Yy(e,t,r,n,i,a),n=Xy(),e!==null&&!Fr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ta(e,t,a)):(dt&&n&&$y(t),t.flags|=1,jr(e,t,r,a),t.child)}function xw(e,t,r,n,a){if(Wr(r)){var i=!0;Ud(t)}else i=!1;if(bo(t,a),t.stateNode===null)wd(e,t),Nk(t,r,n),Lg(t,r,n,a),n=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var c=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=Nn(u):(u=Wr(r)?ys:xr.current,u=Po(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==n||c!==u)&&hw(t,s,n,u),ii=!1;var h=t.memoizedState;s.state=h,qd(t,n,s,a),c=t.memoizedState,o!==n||h!==c||zr.current||ii?(typeof d=="function"&&($g(t,r,d,n),c=t.memoizedState),(o=ii||fw(t,r,o,n,h,c,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=u,n=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,ak(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:$n(t.type,o),s.props=u,f=t.pendingProps,h=s.context,c=r.contextType,typeof c=="object"&&c!==null?c=Nn(c):(c=Wr(r)?ys:xr.current,c=Po(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||h!==c)&&hw(t,s,n,c),ii=!1,h=t.memoizedState,s.state=h,qd(t,n,s,a);var g=t.memoizedState;o!==f||h!==g||zr.current||ii?(typeof m=="function"&&($g(t,r,m,n),g=t.memoizedState),(u=ii||fw(t,r,u,n,h,g,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,g,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,g,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),s.props=n,s.state=g,s.context=c,n=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Ug(e,t,r,n,i,a)}function Ug(e,t,r,n,a,i){Ok(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return a&&aw(t,r,!1),Ta(e,t,i);n=t.stateNode,oM.current=t;var o=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=Ao(t,e.child,null,i),t.child=Ao(t,null,o,i)):jr(e,t,o,i),t.memoizedState=n.state,a&&aw(t,r,!0),t.child}function Ak(e){var t=e.stateNode;t.pendingContext?nw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nw(e,t.context,!1),Hy(e,t.containerInfo)}function bw(e,t,r,n,a){return Oo(),Fy(a),t.flags|=256,jr(e,t,r,n),t.child}var zg={dehydrated:null,treeContext:null,retryLane:0};function Wg(e){return{baseLanes:e,cachePool:null,transitions:null}}function Tk(e,t,r){var n=t.pendingProps,a=bt.current,i=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),nt(bt,a&1),e===null)return Rg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,i?(n=t.mode,i=t.child,s={mode:"hidden",children:s},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=gh(s,n,0,null),e=fs(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Wg(r),t.memoizedState=zg,e):Zy(t,s));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return lM(e,t,s,n,o,a,r);if(i){i=n.fallback,s=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(s&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ji(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=ji(o,i):(i=fs(i,s,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,s=e.child.memoizedState,s=s===null?Wg(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~r,t.memoizedState=zg,n}return i=e.child,e=i.sibling,n=ji(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Zy(e,t){return t=gh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Tu(e,t,r,n){return n!==null&&Fy(n),Ao(t,e.child,null,r),e=Zy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lM(e,t,r,n,a,i,s){if(r)return t.flags&256?(t.flags&=-257,n=hm(Error(ne(422))),Tu(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=gh({mode:"visible",children:n.children},a,0,null),i=fs(i,a,s,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Ao(t,e.child,null,s),t.child.memoizedState=Wg(s),t.memoizedState=zg,i);if(!(t.mode&1))return Tu(e,t,s,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(ne(419)),n=hm(i,n,void 0),Tu(e,t,s,n)}if(o=(s&e.childLanes)!==0,Fr||o){if(n=er,n!==null){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|s)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Aa(e,a),Kn(n,e,a,-1))}return i0(),n=hm(Error(ne(421))),Tu(e,t,s,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=wM.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,sn=xi(a.nextSibling),on=t,dt=!0,Bn=null,e!==null&&(xn[bn++]=wa,xn[bn++]=_a,xn[bn++]=xs,wa=e.id,_a=e.overflow,xs=t),t=Zy(t,n.children),t.flags|=4096,t)}function ww(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Mg(e.return,t,r)}function pm(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function Dk(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(jr(e,t,n.children,r),n=bt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ww(e,r,t);else if(e.tag===19)ww(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(nt(bt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Vd(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),pm(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Vd(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}pm(t,!0,r,null,i);break;case"together":pm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ta(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ws|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ne(153));if(t.child!==null){for(e=t.child,r=ji(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ji(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function cM(e,t,r){switch(t.tag){case 3:Ak(t),Oo();break;case 5:ik(t);break;case 1:Wr(t.type)&&Ud(t);break;case 4:Hy(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;nt(Kd,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(nt(bt,bt.current&1),t.flags|=128,null):r&t.child.childLanes?Tk(e,t,r):(nt(bt,bt.current&1),e=Ta(e,t,r),e!==null?e.sibling:null);nt(bt,bt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Dk(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),nt(bt,bt.current),n)break;return null;case 22:case 23:return t.lanes=0,Pk(e,t,r)}return Ta(e,t,r)}var Ik,Kg,Rk,Mk;Ik=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Kg=function(){};Rk=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,ss(ca.current);var i=null;switch(r){case"input":a=fg(e,a),n=fg(e,n),i=[];break;case"select":a=_t({},a,{value:void 0}),n=_t({},n,{value:void 0}),i=[];break;case"textarea":a=mg(e,a),n=mg(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Fd)}vg(r,n);var s;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var o=a[u];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(tc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(o=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&o[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(tc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&st("scroll",e),i||o===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Mk=function(e,t,r,n){r!==n&&(t.flags|=4)};function xl(e,t){if(!dt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function mr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function uM(e,t,r){var n=t.pendingProps;switch(Ly(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mr(t),null;case 1:return Wr(t.type)&&Bd(),mr(t),null;case 3:return n=t.stateNode,To(),ct(zr),ct(xr),Vy(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ou(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bn!==null&&(Qg(Bn),Bn=null))),Kg(e,t),mr(t),null;case 5:qy(t);var a=ss(hc.current);if(r=t.type,e!==null&&t.stateNode!=null)Rk(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ne(166));return mr(t),null}if(e=ss(ca.current),Ou(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[sa]=t,n[dc]=i,e=(t.mode&1)!==0,r){case"dialog":st("cancel",n),st("close",n);break;case"iframe":case"object":case"embed":st("load",n);break;case"video":case"audio":for(a=0;a<Ml.length;a++)st(Ml[a],n);break;case"source":st("error",n);break;case"img":case"image":case"link":st("error",n),st("load",n);break;case"details":st("toggle",n);break;case"input":Ob(n,i),st("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},st("invalid",n);break;case"textarea":Tb(n,i),st("invalid",n)}vg(r,i),a=null;for(var s in i)if(i.hasOwnProperty(s)){var o=i[s];s==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&Pu(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Pu(n.textContent,o,e),a=["children",""+o]):tc.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&st("scroll",n)}switch(r){case"input":wu(n),Ab(n,i,!0);break;case"textarea":wu(n),Db(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Fd)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=uN(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[sa]=t,e[dc]=n,Ik(e,t,!1,!1),t.stateNode=e;e:{switch(s=yg(r,n),r){case"dialog":st("cancel",e),st("close",e),a=n;break;case"iframe":case"object":case"embed":st("load",e),a=n;break;case"video":case"audio":for(a=0;a<Ml.length;a++)st(Ml[a],e);a=n;break;case"source":st("error",e),a=n;break;case"img":case"image":case"link":st("error",e),st("load",e),a=n;break;case"details":st("toggle",e),a=n;break;case"input":Ob(e,n),a=fg(e,n),st("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=_t({},n,{value:void 0}),st("invalid",e);break;case"textarea":Tb(e,n),a=mg(e,n),st("invalid",e);break;default:a=n}vg(r,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?hN(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&dN(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&rc(e,c):typeof c=="number"&&rc(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(tc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&st("scroll",e):c!=null&&jy(e,i,c,s))}switch(r){case"input":wu(e),Ab(e,n,!1);break;case"textarea":wu(e),Db(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ni(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?go(e,!!n.multiple,i,!1):n.defaultValue!=null&&go(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Fd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return mr(t),null;case 6:if(e&&t.stateNode!=null)Mk(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ne(166));if(r=ss(hc.current),ss(ca.current),Ou(t)){if(n=t.stateNode,r=t.memoizedProps,n[sa]=t,(i=n.nodeValue!==r)&&(e=on,e!==null))switch(e.tag){case 3:Pu(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Pu(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[sa]=t,t.stateNode=n}return mr(t),null;case 13:if(ct(bt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(dt&&sn!==null&&t.mode&1&&!(t.flags&128))ek(),Oo(),t.flags|=98560,i=!1;else if(i=Ou(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(ne(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ne(317));i[sa]=t}else Oo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;mr(t),i=!1}else Bn!==null&&(Qg(Bn),Bn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||bt.current&1?Kt===0&&(Kt=3):i0())),t.updateQueue!==null&&(t.flags|=4),mr(t),null);case 4:return To(),Kg(e,t),e===null&&cc(t.stateNode.containerInfo),mr(t),null;case 10:return zy(t.type._context),mr(t),null;case 17:return Wr(t.type)&&Bd(),mr(t),null;case 19:if(ct(bt),i=t.memoizedState,i===null)return mr(t),null;if(n=(t.flags&128)!==0,s=i.rendering,s===null)if(n)xl(i,!1);else{if(Kt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Vd(e),s!==null){for(t.flags|=128,xl(i,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return nt(bt,bt.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ot()>Io&&(t.flags|=128,n=!0,xl(i,!1),t.lanes=4194304)}else{if(!n)if(e=Vd(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),xl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!dt)return mr(t),null}else 2*Ot()-i.renderingStartTime>Io&&r!==1073741824&&(t.flags|=128,n=!0,xl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(r=i.last,r!==null?r.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ot(),t.sibling=null,r=bt.current,nt(bt,n?r&1|2:r&1),t):(mr(t),null);case 22:case 23:return a0(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?en&1073741824&&(mr(t),t.subtreeFlags&6&&(t.flags|=8192)):mr(t),null;case 24:return null;case 25:return null}throw Error(ne(156,t.tag))}function dM(e,t){switch(Ly(t),t.tag){case 1:return Wr(t.type)&&Bd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return To(),ct(zr),ct(xr),Vy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return qy(t),null;case 13:if(ct(bt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ne(340));Oo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ct(bt),null;case 4:return To(),null;case 10:return zy(t.type._context),null;case 22:case 23:return a0(),null;case 24:return null;default:return null}}var Du=!1,vr=!1,fM=typeof WeakSet=="function"?WeakSet:Set,me=null;function fo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){St(e,t,n)}else r.current=null}function Hg(e,t,r){try{r()}catch(n){St(e,t,n)}}var _w=!1;function hM(e,t){if(Eg=Md,e=UN(),My(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var s=0,o=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==r||a!==0&&f.nodeType!==3||(o=s+a),f!==i||n!==0&&f.nodeType!==3||(c=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===r&&++u===a&&(o=s),h===i&&++d===n&&(c=s),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Pg={focusedElem:e,selectionRange:r},Md=!1,me=t;me!==null;)if(t=me,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,me=e;else for(;me!==null;){t=me;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,v=g.memoizedState,x=t.stateNode,w=x.getSnapshotBeforeUpdate(t.elementType===t.type?y:$n(t.type,y),v);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(_){St(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,me=e;break}me=t.return}return g=_w,_w=!1,g}function ql(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Hg(t,r,i)}a=a.next}while(a!==n)}}function ph(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function qg(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function $k(e){var t=e.alternate;t!==null&&(e.alternate=null,$k(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[sa],delete t[dc],delete t[Tg],delete t[YR],delete t[XR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Lk(e){return e.tag===5||e.tag===3||e.tag===4}function jw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Lk(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Fd));else if(n!==4&&(e=e.child,e!==null))for(Vg(e,t,r),e=e.sibling;e!==null;)Vg(e,t,r),e=e.sibling}function Gg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Gg(e,t,r),e=e.sibling;e!==null;)Gg(e,t,r),e=e.sibling}var lr=null,Fn=!1;function ri(e,t,r){for(r=r.child;r!==null;)Fk(e,t,r),r=r.sibling}function Fk(e,t,r){if(la&&typeof la.onCommitFiberUnmount=="function")try{la.onCommitFiberUnmount(sh,r)}catch{}switch(r.tag){case 5:vr||fo(r,t);case 6:var n=lr,a=Fn;lr=null,ri(e,t,r),lr=n,Fn=a,lr!==null&&(Fn?(e=lr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):lr.removeChild(r.stateNode));break;case 18:lr!==null&&(Fn?(e=lr,r=r.stateNode,e.nodeType===8?om(e.parentNode,r):e.nodeType===1&&om(e,r),sc(e)):om(lr,r.stateNode));break;case 4:n=lr,a=Fn,lr=r.stateNode.containerInfo,Fn=!0,ri(e,t,r),lr=n,Fn=a;break;case 0:case 11:case 14:case 15:if(!vr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Hg(r,t,s),a=a.next}while(a!==n)}ri(e,t,r);break;case 1:if(!vr&&(fo(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){St(r,t,o)}ri(e,t,r);break;case 21:ri(e,t,r);break;case 22:r.mode&1?(vr=(n=vr)||r.memoizedState!==null,ri(e,t,r),vr=n):ri(e,t,r);break;default:ri(e,t,r)}}function Sw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new fM),t.forEach(function(n){var a=_M.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Rn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:lr=o.stateNode,Fn=!1;break e;case 3:lr=o.stateNode.containerInfo,Fn=!0;break e;case 4:lr=o.stateNode.containerInfo,Fn=!0;break e}o=o.return}if(lr===null)throw Error(ne(160));Fk(i,s,a),lr=null,Fn=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){St(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Bk(t,e),t=t.sibling}function Bk(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rn(t,e),na(e),n&4){try{ql(3,e,e.return),ph(3,e)}catch(y){St(e,e.return,y)}try{ql(5,e,e.return)}catch(y){St(e,e.return,y)}}break;case 1:Rn(t,e),na(e),n&512&&r!==null&&fo(r,r.return);break;case 5:if(Rn(t,e),na(e),n&512&&r!==null&&fo(r,r.return),e.flags&32){var a=e.stateNode;try{rc(a,"")}catch(y){St(e,e.return,y)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,s=r!==null?r.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&lN(a,i),yg(o,s);var u=yg(o,i);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];d==="style"?hN(a,f):d==="dangerouslySetInnerHTML"?dN(a,f):d==="children"?rc(a,f):jy(a,d,f,u)}switch(o){case"input":hg(a,i);break;case"textarea":cN(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?go(a,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?go(a,!!i.multiple,i.defaultValue,!0):go(a,!!i.multiple,i.multiple?[]:"",!1))}a[dc]=i}catch(y){St(e,e.return,y)}}break;case 6:if(Rn(t,e),na(e),n&4){if(e.stateNode===null)throw Error(ne(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(y){St(e,e.return,y)}}break;case 3:if(Rn(t,e),na(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{sc(t.containerInfo)}catch(y){St(e,e.return,y)}break;case 4:Rn(t,e),na(e);break;case 13:Rn(t,e),na(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(r0=Ot())),n&4&&Sw(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(vr=(u=vr)||d,Rn(t,e),vr=u):Rn(t,e),na(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(me=e,d=e.child;d!==null;){for(f=me=d;me!==null;){switch(h=me,m=h.child,h.tag){case 0:case 11:case 14:case 15:ql(4,h,h.return);break;case 1:fo(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(y){St(n,r,y)}}break;case 5:fo(h,h.return);break;case 22:if(h.memoizedState!==null){kw(f);continue}}m!==null?(m.return=h,me=m):kw(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,c=f.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=fN("display",s))}catch(y){St(e,e.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){St(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Rn(t,e),na(e),n&4&&Sw(e);break;case 21:break;default:Rn(t,e),na(e)}}function na(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Lk(r)){var n=r;break e}r=r.return}throw Error(ne(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(rc(a,""),n.flags&=-33);var i=jw(e);Gg(e,i,a);break;case 3:case 4:var s=n.stateNode.containerInfo,o=jw(e);Vg(e,o,s);break;default:throw Error(ne(161))}}catch(c){St(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pM(e,t,r){me=e,Uk(e)}function Uk(e,t,r){for(var n=(e.mode&1)!==0;me!==null;){var a=me,i=a.child;if(a.tag===22&&n){var s=a.memoizedState!==null||Du;if(!s){var o=a.alternate,c=o!==null&&o.memoizedState!==null||vr;o=Du;var u=vr;if(Du=s,(vr=c)&&!u)for(me=a;me!==null;)s=me,c=s.child,s.tag===22&&s.memoizedState!==null?Cw(a):c!==null?(c.return=s,me=c):Cw(a);for(;i!==null;)me=i,Uk(i),i=i.sibling;me=a,Du=o,vr=u}Nw(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,me=i):Nw(e)}}function Nw(e){for(;me!==null;){var t=me;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:vr||ph(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!vr)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:$n(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&cw(t,i,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}cw(t,s,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&sc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}vr||t.flags&512&&qg(t)}catch(h){St(t,t.return,h)}}if(t===e){me=null;break}if(r=t.sibling,r!==null){r.return=t.return,me=r;break}me=t.return}}function kw(e){for(;me!==null;){var t=me;if(t===e){me=null;break}var r=t.sibling;if(r!==null){r.return=t.return,me=r;break}me=t.return}}function Cw(e){for(;me!==null;){var t=me;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ph(4,t)}catch(c){St(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){St(t,a,c)}}var i=t.return;try{qg(t)}catch(c){St(t,i,c)}break;case 5:var s=t.return;try{qg(t)}catch(c){St(t,s,c)}}}catch(c){St(t,t.return,c)}if(t===e){me=null;break}var o=t.sibling;if(o!==null){o.return=t.return,me=o;break}me=t.return}}var mM=Math.ceil,Xd=Ha.ReactCurrentDispatcher,e0=Ha.ReactCurrentOwner,jn=Ha.ReactCurrentBatchConfig,Be=0,er=null,Mt=null,ur=0,en=0,ho=Ti(0),Kt=0,vc=null,ws=0,mh=0,t0=0,Vl=null,Lr=null,r0=0,Io=1/0,ga=null,Jd=!1,Yg=null,wi=null,Iu=!1,pi=null,Qd=0,Gl=0,Xg=null,_d=-1,jd=0;function Cr(){return Be&6?Ot():_d!==-1?_d:_d=Ot()}function _i(e){return e.mode&1?Be&2&&ur!==0?ur&-ur:QR.transition!==null?(jd===0&&(jd=NN()),jd):(e=Ye,e!==0||(e=window.event,e=e===void 0?16:TN(e.type)),e):1}function Kn(e,t,r,n){if(50<Gl)throw Gl=0,Xg=null,Error(ne(185));Uc(e,r,n),(!(Be&2)||e!==er)&&(e===er&&(!(Be&2)&&(mh|=r),Kt===4&&ui(e,ur)),Kr(e,n),r===1&&Be===0&&!(t.mode&1)&&(Io=Ot()+500,dh&&Di()))}function Kr(e,t){var r=e.callbackNode;QI(e,t);var n=Rd(e,e===er?ur:0);if(n===0)r!==null&&Mb(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Mb(r),t===1)e.tag===0?JR(Ew.bind(null,e)):JN(Ew.bind(null,e)),VR(function(){!(Be&6)&&Di()}),r=null;else{switch(kN(n)){case 1:r=Ey;break;case 4:r=jN;break;case 16:r=Id;break;case 536870912:r=SN;break;default:r=Id}r=Yk(r,zk.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function zk(e,t){if(_d=-1,jd=0,Be&6)throw Error(ne(327));var r=e.callbackNode;if(wo()&&e.callbackNode!==r)return null;var n=Rd(e,e===er?ur:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Zd(e,n);else{t=n;var a=Be;Be|=2;var i=Kk();(er!==e||ur!==t)&&(ga=null,Io=Ot()+500,ds(e,t));do try{yM();break}catch(o){Wk(e,o)}while(!0);Uy(),Xd.current=i,Be=a,Mt!==null?t=0:(er=null,ur=0,t=Kt)}if(t!==0){if(t===2&&(a=jg(e),a!==0&&(n=a,t=Jg(e,a))),t===1)throw r=vc,ds(e,0),ui(e,n),Kr(e,Ot()),r;if(t===6)ui(e,n);else{if(a=e.current.alternate,!(n&30)&&!gM(a)&&(t=Zd(e,n),t===2&&(i=jg(e),i!==0&&(n=i,t=Jg(e,i))),t===1))throw r=vc,ds(e,0),ui(e,n),Kr(e,Ot()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(ne(345));case 2:Xi(e,Lr,ga);break;case 3:if(ui(e,n),(n&130023424)===n&&(t=r0+500-Ot(),10<t)){if(Rd(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Cr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Ag(Xi.bind(null,e,Lr,ga),t);break}Xi(e,Lr,ga);break;case 4:if(ui(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var s=31-Wn(n);i=1<<s,s=t[s],s>a&&(a=s),n&=~i}if(n=a,n=Ot()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*mM(n/1960))-n,10<n){e.timeoutHandle=Ag(Xi.bind(null,e,Lr,ga),n);break}Xi(e,Lr,ga);break;case 5:Xi(e,Lr,ga);break;default:throw Error(ne(329))}}}return Kr(e,Ot()),e.callbackNode===r?zk.bind(null,e):null}function Jg(e,t){var r=Vl;return e.current.memoizedState.isDehydrated&&(ds(e,t).flags|=256),e=Zd(e,t),e!==2&&(t=Lr,Lr=r,t!==null&&Qg(t)),e}function Qg(e){Lr===null?Lr=e:Lr.push.apply(Lr,e)}function gM(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Hn(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ui(e,t){for(t&=~t0,t&=~mh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Wn(t),n=1<<r;e[r]=-1,t&=~n}}function Ew(e){if(Be&6)throw Error(ne(327));wo();var t=Rd(e,0);if(!(t&1))return Kr(e,Ot()),null;var r=Zd(e,t);if(e.tag!==0&&r===2){var n=jg(e);n!==0&&(t=n,r=Jg(e,n))}if(r===1)throw r=vc,ds(e,0),ui(e,t),Kr(e,Ot()),r;if(r===6)throw Error(ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xi(e,Lr,ga),Kr(e,Ot()),null}function n0(e,t){var r=Be;Be|=1;try{return e(t)}finally{Be=r,Be===0&&(Io=Ot()+500,dh&&Di())}}function _s(e){pi!==null&&pi.tag===0&&!(Be&6)&&wo();var t=Be;Be|=1;var r=jn.transition,n=Ye;try{if(jn.transition=null,Ye=1,e)return e()}finally{Ye=n,jn.transition=r,Be=t,!(Be&6)&&Di()}}function a0(){en=ho.current,ct(ho)}function ds(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,qR(r)),Mt!==null)for(r=Mt.return;r!==null;){var n=r;switch(Ly(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Bd();break;case 3:To(),ct(zr),ct(xr),Vy();break;case 5:qy(n);break;case 4:To();break;case 13:ct(bt);break;case 19:ct(bt);break;case 10:zy(n.type._context);break;case 22:case 23:a0()}r=r.return}if(er=e,Mt=e=ji(e.current,null),ur=en=t,Kt=0,vc=null,t0=mh=ws=0,Lr=Vl=null,is!==null){for(t=0;t<is.length;t++)if(r=is[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var s=i.next;i.next=a,n.next=s}r.pending=n}is=null}return e}function Wk(e,t){do{var r=Mt;try{if(Uy(),xd.current=Yd,Gd){for(var n=wt.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Gd=!1}if(bs=0,Jt=Bt=wt=null,Hl=!1,pc=0,e0.current=null,r===null||r.return===null){Kt=1,vc=t,Mt=null;break}e:{var i=e,s=r.return,o=r,c=t;if(t=ur,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=mw(s);if(m!==null){m.flags&=-257,gw(m,s,o,i,t),m.mode&1&&pw(i,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var y=new Set;y.add(c),t.updateQueue=y}else g.add(c);break e}else{if(!(t&1)){pw(i,u,t),i0();break e}c=Error(ne(426))}}else if(dt&&o.mode&1){var v=mw(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),gw(v,s,o,i,t),Fy(Do(c,o));break e}}i=c=Do(c,o),Kt!==4&&(Kt=2),Vl===null?Vl=[i]:Vl.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=kk(i,c,t);lw(i,x);break e;case 1:o=c;var w=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(wi===null||!wi.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=Ck(i,o,t);lw(i,_);break e}}i=i.return}while(i!==null)}qk(r)}catch(j){t=j,Mt===r&&r!==null&&(Mt=r=r.return);continue}break}while(!0)}function Kk(){var e=Xd.current;return Xd.current=Yd,e===null?Yd:e}function i0(){(Kt===0||Kt===3||Kt===2)&&(Kt=4),er===null||!(ws&268435455)&&!(mh&268435455)||ui(er,ur)}function Zd(e,t){var r=Be;Be|=2;var n=Kk();(er!==e||ur!==t)&&(ga=null,ds(e,t));do try{vM();break}catch(a){Wk(e,a)}while(!0);if(Uy(),Be=r,Xd.current=n,Mt!==null)throw Error(ne(261));return er=null,ur=0,Kt}function vM(){for(;Mt!==null;)Hk(Mt)}function yM(){for(;Mt!==null&&!WI();)Hk(Mt)}function Hk(e){var t=Gk(e.alternate,e,en);e.memoizedProps=e.pendingProps,t===null?qk(e):Mt=t,e0.current=null}function qk(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=dM(r,t),r!==null){r.flags&=32767,Mt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Kt=6,Mt=null;return}}else if(r=uM(r,t,en),r!==null){Mt=r;return}if(t=t.sibling,t!==null){Mt=t;return}Mt=t=e}while(t!==null);Kt===0&&(Kt=5)}function Xi(e,t,r){var n=Ye,a=jn.transition;try{jn.transition=null,Ye=1,xM(e,t,r,n)}finally{jn.transition=a,Ye=n}return null}function xM(e,t,r,n){do wo();while(pi!==null);if(Be&6)throw Error(ne(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ne(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(ZI(e,i),e===er&&(Mt=er=null,ur=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Iu||(Iu=!0,Yk(Id,function(){return wo(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=jn.transition,jn.transition=null;var s=Ye;Ye=1;var o=Be;Be|=4,e0.current=null,hM(e,r),Bk(r,e),FR(Pg),Md=!!Eg,Pg=Eg=null,e.current=r,pM(r),KI(),Be=o,Ye=s,jn.transition=i}else e.current=r;if(Iu&&(Iu=!1,pi=e,Qd=a),i=e.pendingLanes,i===0&&(wi=null),VI(r.stateNode),Kr(e,Ot()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Jd)throw Jd=!1,e=Yg,Yg=null,e;return Qd&1&&e.tag!==0&&wo(),i=e.pendingLanes,i&1?e===Xg?Gl++:(Gl=0,Xg=e):Gl=0,Di(),null}function wo(){if(pi!==null){var e=kN(Qd),t=jn.transition,r=Ye;try{if(jn.transition=null,Ye=16>e?16:e,pi===null)var n=!1;else{if(e=pi,pi=null,Qd=0,Be&6)throw Error(ne(331));var a=Be;for(Be|=4,me=e.current;me!==null;){var i=me,s=i.child;if(me.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(me=u;me!==null;){var d=me;switch(d.tag){case 0:case 11:case 15:ql(8,d,i)}var f=d.child;if(f!==null)f.return=d,me=f;else for(;me!==null;){d=me;var h=d.sibling,m=d.return;if($k(d),d===u){me=null;break}if(h!==null){h.return=m,me=h;break}me=m}}}var g=i.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}me=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,me=s;else e:for(;me!==null;){if(i=me,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ql(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,me=x;break e}me=i.return}}var w=e.current;for(me=w;me!==null;){s=me;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,me=b;else e:for(s=w;me!==null;){if(o=me,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ph(9,o)}}catch(j){St(o,o.return,j)}if(o===s){me=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,me=_;break e}me=o.return}}if(Be=a,Di(),la&&typeof la.onPostCommitFiberRoot=="function")try{la.onPostCommitFiberRoot(sh,e)}catch{}n=!0}return n}finally{Ye=r,jn.transition=t}}return!1}function Pw(e,t,r){t=Do(r,t),t=kk(e,t,1),e=bi(e,t,1),t=Cr(),e!==null&&(Uc(e,1,t),Kr(e,t))}function St(e,t,r){if(e.tag===3)Pw(e,e,r);else for(;t!==null;){if(t.tag===3){Pw(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(wi===null||!wi.has(n))){e=Do(r,e),e=Ck(t,e,1),t=bi(t,e,1),e=Cr(),t!==null&&(Uc(t,1,e),Kr(t,e));break}}t=t.return}}function bM(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Cr(),e.pingedLanes|=e.suspendedLanes&r,er===e&&(ur&r)===r&&(Kt===4||Kt===3&&(ur&130023424)===ur&&500>Ot()-r0?ds(e,0):t0|=r),Kr(e,t)}function Vk(e,t){t===0&&(e.mode&1?(t=Su,Su<<=1,!(Su&130023424)&&(Su=4194304)):t=1);var r=Cr();e=Aa(e,t),e!==null&&(Uc(e,t,r),Kr(e,r))}function wM(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Vk(e,r)}function _M(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ne(314))}n!==null&&n.delete(t),Vk(e,r)}var Gk;Gk=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||zr.current)Fr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Fr=!1,cM(e,t,r);Fr=!!(e.flags&131072)}else Fr=!1,dt&&t.flags&1048576&&QN(t,Wd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;wd(e,t),e=t.pendingProps;var a=Po(t,xr.current);bo(t,r),a=Yy(null,t,n,e,a,r);var i=Xy();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Wr(n)?(i=!0,Ud(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Ky(t),a.updater=hh,t.stateNode=a,a._reactInternals=t,Lg(t,n,e,r),t=Ug(null,t,n,!0,i,r)):(t.tag=0,dt&&i&&$y(t),jr(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(wd(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=SM(n),e=$n(n,e),a){case 0:t=Bg(null,t,n,e,r);break e;case 1:t=xw(null,t,n,e,r);break e;case 11:t=vw(null,t,n,e,r);break e;case 14:t=yw(null,t,n,$n(n.type,e),r);break e}throw Error(ne(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$n(n,a),Bg(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$n(n,a),xw(e,t,n,a,r);case 3:e:{if(Ak(t),e===null)throw Error(ne(387));n=t.pendingProps,i=t.memoizedState,a=i.element,ak(e,t),qd(t,n,null,r);var s=t.memoizedState;if(n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Do(Error(ne(423)),t),t=bw(e,t,n,r,a);break e}else if(n!==a){a=Do(Error(ne(424)),t),t=bw(e,t,n,r,a);break e}else for(sn=xi(t.stateNode.containerInfo.firstChild),on=t,dt=!0,Bn=null,r=rk(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Oo(),n===a){t=Ta(e,t,r);break e}jr(e,t,n,r)}t=t.child}return t;case 5:return ik(t),e===null&&Rg(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,s=a.children,Og(n,a)?s=null:i!==null&&Og(n,i)&&(t.flags|=32),Ok(e,t),jr(e,t,s,r),t.child;case 6:return e===null&&Rg(t),null;case 13:return Tk(e,t,r);case 4:return Hy(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ao(t,null,n,r):jr(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$n(n,a),vw(e,t,n,a,r);case 7:return jr(e,t,t.pendingProps,r),t.child;case 8:return jr(e,t,t.pendingProps.children,r),t.child;case 12:return jr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,s=a.value,nt(Kd,n._currentValue),n._currentValue=s,i!==null)if(Hn(i.value,s)){if(i.children===a.children&&!zr.current){t=Ta(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){s=i.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Na(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Mg(i.return,r,t),o.lanes|=r;break}c=c.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(ne(341));s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),Mg(s,r,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}jr(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,bo(t,r),a=Nn(a),n=n(a),t.flags|=1,jr(e,t,n,r),t.child;case 14:return n=t.type,a=$n(n,t.pendingProps),a=$n(n.type,a),yw(e,t,n,a,r);case 15:return Ek(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$n(n,a),wd(e,t),t.tag=1,Wr(n)?(e=!0,Ud(t)):e=!1,bo(t,r),Nk(t,n,a),Lg(t,n,a,r),Ug(null,t,n,!0,e,r);case 19:return Dk(e,t,r);case 22:return Pk(e,t,r)}throw Error(ne(156,t.tag))};function Yk(e,t){return _N(e,t)}function jM(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(e,t,r,n){return new jM(e,t,r,n)}function s0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function SM(e){if(typeof e=="function")return s0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ny)return 11;if(e===ky)return 14}return 2}function ji(e,t){var r=e.alternate;return r===null?(r=wn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Sd(e,t,r,n,a,i){var s=2;if(n=e,typeof e=="function")s0(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case ro:return fs(r.children,a,i,t);case Sy:s=8,a|=8;break;case lg:return e=wn(12,r,t,a|2),e.elementType=lg,e.lanes=i,e;case cg:return e=wn(13,r,t,a),e.elementType=cg,e.lanes=i,e;case ug:return e=wn(19,r,t,a),e.elementType=ug,e.lanes=i,e;case iN:return gh(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nN:s=10;break e;case aN:s=9;break e;case Ny:s=11;break e;case ky:s=14;break e;case ai:s=16,n=null;break e}throw Error(ne(130,e==null?e:typeof e,""))}return t=wn(s,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function fs(e,t,r,n){return e=wn(7,e,n,t),e.lanes=r,e}function gh(e,t,r,n){return e=wn(22,e,n,t),e.elementType=iN,e.lanes=r,e.stateNode={isHidden:!1},e}function mm(e,t,r){return e=wn(6,e,null,t),e.lanes=r,e}function gm(e,t,r){return t=wn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function NM(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xp(0),this.expirationTimes=Xp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xp(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function o0(e,t,r,n,a,i,s,o,c){return e=new NM(e,t,r,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=wn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ky(i),e}function kM(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:to,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Xk(e){if(!e)return ki;e=e._reactInternals;e:{if(Ds(e)!==e||e.tag!==1)throw Error(ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Wr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ne(171))}if(e.tag===1){var r=e.type;if(Wr(r))return XN(e,r,t)}return t}function Jk(e,t,r,n,a,i,s,o,c){return e=o0(r,n,!0,e,a,i,s,o,c),e.context=Xk(null),r=e.current,n=Cr(),a=_i(r),i=Na(n,a),i.callback=t??null,bi(r,i,a),e.current.lanes=a,Uc(e,a,n),Kr(e,n),e}function vh(e,t,r,n){var a=t.current,i=Cr(),s=_i(a);return r=Xk(r),t.context===null?t.context=r:t.pendingContext=r,t=Na(i,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=bi(a,t,s),e!==null&&(Kn(e,a,s,i),yd(e,a,s)),s}function ef(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ow(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function l0(e,t){Ow(e,t),(e=e.alternate)&&Ow(e,t)}function CM(){return null}var Qk=typeof reportError=="function"?reportError:function(e){console.error(e)};function c0(e){this._internalRoot=e}yh.prototype.render=c0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ne(409));vh(e,t,null,null)};yh.prototype.unmount=c0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_s(function(){vh(null,e,null,null)}),t[Oa]=null}};function yh(e){this._internalRoot=e}yh.prototype.unstable_scheduleHydration=function(e){if(e){var t=PN();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ci.length&&t!==0&&t<ci[r].priority;r++);ci.splice(r,0,e),r===0&&AN(e)}};function u0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Aw(){}function EM(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=ef(s);i.call(u)}}var s=Jk(t,n,e,0,null,!1,!1,"",Aw);return e._reactRootContainer=s,e[Oa]=s.current,cc(e.nodeType===8?e.parentNode:e),_s(),s}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var u=ef(c);o.call(u)}}var c=o0(e,0,!1,null,null,!1,!1,"",Aw);return e._reactRootContainer=c,e[Oa]=c.current,cc(e.nodeType===8?e.parentNode:e),_s(function(){vh(t,c,r,n)}),c}function bh(e,t,r,n,a){var i=r._reactRootContainer;if(i){var s=i;if(typeof a=="function"){var o=a;a=function(){var c=ef(s);o.call(c)}}vh(t,s,e,a)}else s=EM(r,t,e,a,n);return ef(s)}CN=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Rl(t.pendingLanes);r!==0&&(Py(t,r|1),Kr(t,Ot()),!(Be&6)&&(Io=Ot()+500,Di()))}break;case 13:_s(function(){var n=Aa(e,1);if(n!==null){var a=Cr();Kn(n,e,1,a)}}),l0(e,1)}};Oy=function(e){if(e.tag===13){var t=Aa(e,134217728);if(t!==null){var r=Cr();Kn(t,e,134217728,r)}l0(e,134217728)}};EN=function(e){if(e.tag===13){var t=_i(e),r=Aa(e,t);if(r!==null){var n=Cr();Kn(r,e,t,n)}l0(e,t)}};PN=function(){return Ye};ON=function(e,t){var r=Ye;try{return Ye=e,t()}finally{Ye=r}};bg=function(e,t,r){switch(t){case"input":if(hg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=uh(n);if(!a)throw Error(ne(90));oN(n),hg(n,a)}}}break;case"textarea":cN(e,r);break;case"select":t=r.value,t!=null&&go(e,!!r.multiple,t,!1)}};gN=n0;vN=_s;var PM={usingClientEntryPoint:!1,Events:[Wc,so,uh,pN,mN,n0]},bl={findFiberByHostInstance:as,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OM={bundleType:bl.bundleType,version:bl.version,rendererPackageName:bl.rendererPackageName,rendererConfig:bl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ha.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=bN(e),e===null?null:e.stateNode},findFiberByHostInstance:bl.findFiberByHostInstance||CM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ru.isDisabled&&Ru.supportsFiber)try{sh=Ru.inject(OM),la=Ru}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PM;fn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u0(t))throw Error(ne(200));return kM(e,t,null,r)};fn.createRoot=function(e,t){if(!u0(e))throw Error(ne(299));var r=!1,n="",a=Qk;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=o0(e,1,!1,null,null,r,!1,n,a),e[Oa]=t.current,cc(e.nodeType===8?e.parentNode:e),new c0(t)};fn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ne(188)):(e=Object.keys(e).join(","),Error(ne(268,e)));return e=bN(t),e=e===null?null:e.stateNode,e};fn.flushSync=function(e){return _s(e)};fn.hydrate=function(e,t,r){if(!xh(t))throw Error(ne(200));return bh(null,e,t,!0,r)};fn.hydrateRoot=function(e,t,r){if(!u0(e))throw Error(ne(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",s=Qk;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=Jk(t,null,e,1,r??null,a,!1,i,s),e[Oa]=t.current,cc(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new yh(t)};fn.render=function(e,t,r){if(!xh(t))throw Error(ne(200));return bh(null,e,t,!1,r)};fn.unmountComponentAtNode=function(e){if(!xh(e))throw Error(ne(40));return e._reactRootContainer?(_s(function(){bh(null,null,e,!1,function(){e._reactRootContainer=null,e[Oa]=null})}),!0):!1};fn.unstable_batchedUpdates=n0;fn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!xh(r))throw Error(ne(200));if(e==null||e._reactInternals===void 0)throw Error(ne(38));return bh(e,t,r,!1,n)};fn.version="18.3.1-next-f1338f8080-20240426";function Zk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zk)}catch(e){console.error(e)}}Zk(),ZS.exports=fn;var mi=ZS.exports,e2,Tw=mi;e2=Tw.createRoot,Tw.hydrateRoot;/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Dw="popstate";function AM(e={}){function t(n,a){let{pathname:i,search:s,hash:o}=n.location;return Zg("",{pathname:i,search:s,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:yc(a)}return DM(t,r,null,e)}function ht(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function un(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function TM(){return Math.random().toString(36).substring(2,10)}function Iw(e,t){return{usr:e.state,key:e.key,idx:t}}function Zg(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Vo(t):t,state:r,key:t&&t.key||n||TM()}}function yc({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Vo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function DM(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,s=a.history,o="POP",c=null,u=d();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function d(){return(s.state||{idx:null}).idx}function f(){o="POP";let v=d(),x=v==null?null:v-u;u=v,c&&c({action:o,location:y.location,delta:x})}function h(v,x){o="PUSH";let w=Zg(y.location,v,x);u=d()+1;let b=Iw(w,u),_=y.createHref(w);try{s.pushState(b,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(_)}i&&c&&c({action:o,location:y.location,delta:1})}function m(v,x){o="REPLACE";let w=Zg(y.location,v,x);u=d();let b=Iw(w,u),_=y.createHref(w);s.replaceState(b,"",_),i&&c&&c({action:o,location:y.location,delta:0})}function g(v){return IM(v)}let y={get action(){return o},get location(){return e(a,s)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Dw,f),c=v,()=>{a.removeEventListener(Dw,f),c=null}},createHref(v){return t(a,v)},createURL:g,encodeLocation(v){let x=g(v);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:m,go(v){return s.go(v)}};return y}function IM(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),ht(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:yc(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function t2(e,t,r="/"){return RM(e,t,r,!1)}function RM(e,t,r,n){let a=typeof t=="string"?Vo(t):t,i=Da(a.pathname||"/",r);if(i==null)return null;let s=r2(e);MM(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=VM(i);o=HM(s[c],u,n)}return o}function r2(e,t=[],r=[],n="",a=!1){let i=(s,o,c=a,u)=>{let d={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;ht(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let f=ka([n,d.relativePath]),h=r.concat(d);s.children&&s.children.length>0&&(ht(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),r2(s.children,t,h,f,c)),!(s.path==null&&!s.index)&&t.push({path:f,score:WM(f,s.index),routesMeta:h})};return e.forEach((s,o)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))i(s,o);else for(let u of n2(s.path))i(s,o,!0,u)}),t}function n2(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let s=n2(n.join("/")),o=[];return o.push(...s.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...s),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function MM(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:KM(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var $M=/^:[\w-]+$/,LM=3,FM=2,BM=1,UM=10,zM=-2,Rw=e=>e==="*";function WM(e,t){let r=e.split("/"),n=r.length;return r.some(Rw)&&(n+=zM),t&&(n+=FM),r.filter(a=>!Rw(a)).reduce((a,i)=>a+($M.test(i)?LM:i===""?BM:UM),n)}function KM(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function HM(e,t,r=!1){let{routesMeta:n}=e,a={},i="/",s=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=tf({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=tf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),s.push({params:a,pathname:ka([i,f.pathname]),pathnameBase:QM(ka([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=ka([i,f.pathnameBase]))}return s}function tf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=qM(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},h)=>{if(d==="*"){let g=o[h]||"";s=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const m=o[h];return f&&!m?u[d]=void 0:u[d]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:s,pattern:e}}function qM(e,t=!1,r=!0){un(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function VM(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return un(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Da(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var GM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YM=e=>GM.test(e);function XM(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Vo(e):e,i;if(r)if(YM(r))i=r;else{if(r.includes("//")){let s=r;r=r.replace(/\/\/+/g,"/"),un(!1,`Pathnames cannot have embedded double slashes - normalizing ${s} -> ${r}`)}r.startsWith("/")?i=Mw(r.substring(1),"/"):i=Mw(r,t)}else i=t;return{pathname:i,search:ZM(n),hash:e5(a)}}function Mw(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function vm(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function JM(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function d0(e){let t=JM(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function f0(e,t,r,n=!1){let a;typeof e=="string"?a=Vo(e):(a={...e},ht(!a.pathname||!a.pathname.includes("?"),vm("?","pathname","search",a)),ht(!a.pathname||!a.pathname.includes("#"),vm("#","pathname","hash",a)),ht(!a.search||!a.search.includes("#"),vm("#","search","hash",a)));let i=e===""||a.pathname==="",s=i?"/":a.pathname,o;if(s==null)o=r;else{let f=t.length-1;if(!n&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}o=f>=0?t[f]:"/"}let c=XM(a,o),u=s&&s!=="/"&&s.endsWith("/"),d=(i||s===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var ka=e=>e.join("/").replace(/\/\/+/g,"/"),QM=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ZM=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,e5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function t5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var a2=["POST","PUT","PATCH","DELETE"];new Set(a2);var r5=["GET",...a2];new Set(r5);var Go=p.createContext(null);Go.displayName="DataRouter";var wh=p.createContext(null);wh.displayName="DataRouterState";p.createContext(!1);var i2=p.createContext({isTransitioning:!1});i2.displayName="ViewTransition";var n5=p.createContext(new Map);n5.displayName="Fetchers";var a5=p.createContext(null);a5.displayName="Await";var Qn=p.createContext(null);Qn.displayName="Navigation";var Hc=p.createContext(null);Hc.displayName="Location";var Zn=p.createContext({outlet:null,matches:[],isDataRoute:!1});Zn.displayName="Route";var h0=p.createContext(null);h0.displayName="RouteError";function i5(e,{relative:t}={}){ht(Yo(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=p.useContext(Qn),{hash:a,pathname:i,search:s}=qc(e,{relative:t}),o=i;return r!=="/"&&(o=i==="/"?r:ka([r,i])),n.createHref({pathname:o,search:s,hash:a})}function Yo(){return p.useContext(Hc)!=null}function pa(){return ht(Yo(),"useLocation() may be used only in the context of a <Router> component."),p.useContext(Hc).location}var s2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function o2(e){p.useContext(Qn).static||p.useLayoutEffect(e)}function Xo(){let{isDataRoute:e}=p.useContext(Zn);return e?x5():s5()}function s5(){ht(Yo(),"useNavigate() may be used only in the context of a <Router> component.");let e=p.useContext(Go),{basename:t,navigator:r}=p.useContext(Qn),{matches:n}=p.useContext(Zn),{pathname:a}=pa(),i=JSON.stringify(d0(n)),s=p.useRef(!1);return o2(()=>{s.current=!0}),p.useCallback((c,u={})=>{if(un(s.current,s2),!s.current)return;if(typeof c=="number"){r.go(c);return}let d=f0(c,JSON.parse(i),a,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:ka([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,i,a,e])}p.createContext(null);function o5(){let{matches:e}=p.useContext(Zn),t=e[e.length-1];return t?t.params:{}}function qc(e,{relative:t}={}){let{matches:r}=p.useContext(Zn),{pathname:n}=pa(),a=JSON.stringify(d0(r));return p.useMemo(()=>f0(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function l5(e,t){return l2(e,t)}function l2(e,t,r,n,a){var w;ht(Yo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=p.useContext(Qn),{matches:s}=p.useContext(Zn),o=s[s.length-1],c=o?o.params:{},u=o?o.pathname:"/",d=o?o.pathnameBase:"/",f=o&&o.route;{let b=f&&f.path||"";c2(u,!f||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let h=pa(),m;if(t){let b=typeof t=="string"?Vo(t):t;ht(d==="/"||((w=b.pathname)==null?void 0:w.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${b.pathname}" was given in the \`location\` prop.`),m=b}else m=h;let g=m.pathname||"/",y=g;if(d!=="/"){let b=d.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=t2(e,{pathname:y});un(f||v!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),un(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=h5(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:ka([d,i.encodeLocation?i.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?d:ka([d,i.encodeLocation?i.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),s,r,n,a);return t&&x?p.createElement(Hc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},x):x}function c5(){let e=y5(),t=t5(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=p.createElement(p.Fragment,null,p.createElement("p",null," Hey developer "),p.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",p.createElement("code",{style:i},"ErrorBoundary")," or"," ",p.createElement("code",{style:i},"errorElement")," prop on your route.")),p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:a},r):null,s)}var u5=p.createElement(c5,null),d5=class extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?p.createElement(Zn.Provider,{value:this.props.routeContext},p.createElement(h0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function f5({routeContext:e,match:t,children:r}){let n=p.useContext(Go);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),p.createElement(Zn.Provider,{value:e},r)}function h5(e,t=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,s=r==null?void 0:r.errors;if(s!=null){let d=i.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);ht(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let o=!1,c=-1;if(r)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:h,errors:m}=r,g=f.route.loader&&!h.hasOwnProperty(f.route.id)&&(!m||m[f.route.id]===void 0);if(f.route.lazy||g){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let u=r&&n?(d,f)=>{var h,m;n(d,{location:r.location,params:((m=(h=r.matches)==null?void 0:h[0])==null?void 0:m.params)??{},errorInfo:f})}:void 0;return i.reduceRight((d,f,h)=>{let m,g=!1,y=null,v=null;r&&(m=s&&f.route.id?s[f.route.id]:void 0,y=f.route.errorElement||u5,o&&(c<0&&h===0?(c2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,v=null):c===h&&(g=!0,v=f.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,h+1)),w=()=>{let b;return m?b=y:g?b=v:f.route.Component?b=p.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,p.createElement(f5,{match:f,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?p.createElement(d5,{location:r.location,revalidation:r.revalidation,component:y,error:m,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0},onError:u}):w()},null)}function p0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function p5(e){let t=p.useContext(Go);return ht(t,p0(e)),t}function m5(e){let t=p.useContext(wh);return ht(t,p0(e)),t}function g5(e){let t=p.useContext(Zn);return ht(t,p0(e)),t}function m0(e){let t=g5(e),r=t.matches[t.matches.length-1];return ht(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function v5(){return m0("useRouteId")}function y5(){var n;let e=p.useContext(h0),t=m5("useRouteError"),r=m0("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function x5(){let{router:e}=p5("useNavigate"),t=m0("useNavigate"),r=p.useRef(!1);return o2(()=>{r.current=!0}),p.useCallback(async(a,i={})=>{un(r.current,s2),r.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var $w={};function c2(e,t,r){!t&&!$w[e]&&($w[e]=!0,un(!1,r))}p.memo(b5);function b5({routes:e,future:t,state:r,unstable_onError:n}){return l2(e,void 0,r,n,t)}function rf({to:e,replace:t,state:r,relative:n}){ht(Yo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=p.useContext(Qn);un(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=p.useContext(Zn),{pathname:s}=pa(),o=Xo(),c=f0(e,d0(i),s,n==="path"),u=JSON.stringify(c);return p.useEffect(()=>{o(JSON.parse(u),{replace:t,state:r,relative:n})},[o,u,n,t,r]),null}function Xr(e){ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function w5({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:i=!1}){ht(!Yo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=e.replace(/^\/*/,"/"),o=p.useMemo(()=>({basename:s,navigator:a,static:i,future:{}}),[s,a,i]);typeof r=="string"&&(r=Vo(r));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:h="default"}=r,m=p.useMemo(()=>{let g=Da(c,s);return g==null?null:{location:{pathname:g,search:u,hash:d,state:f,key:h},navigationType:n}},[s,c,u,d,f,h,n]);return un(m!=null,`<Router basename="${s}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:p.createElement(Qn.Provider,{value:o},p.createElement(Hc.Provider,{children:t,value:m}))}function _5({children:e,location:t}){return l5(ev(e),t)}function ev(e,t=[]){let r=[];return p.Children.forEach(e,(n,a)=>{if(!p.isValidElement(n))return;let i=[...t,a];if(n.type===p.Fragment){r.push.apply(r,ev(n.props.children,i));return}ht(n.type===Xr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ht(!n.props.index||!n.props.children,"An index route cannot have child routes.");let s={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=ev(n.props.children,i)),r.push(s)}),r}var Nd="get",kd="application/x-www-form-urlencoded";function _h(e){return e!=null&&typeof e.tagName=="string"}function j5(e){return _h(e)&&e.tagName.toLowerCase()==="button"}function S5(e){return _h(e)&&e.tagName.toLowerCase()==="form"}function N5(e){return _h(e)&&e.tagName.toLowerCase()==="input"}function k5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function C5(e,t){return e.button===0&&(!t||t==="_self")&&!k5(e)}function tv(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function E5(e,t){let r=tv(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}var Mu=null;function P5(){if(Mu===null)try{new FormData(document.createElement("form"),0),Mu=!1}catch{Mu=!0}return Mu}var O5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ym(e){return e!=null&&!O5.has(e)?(un(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${kd}"`),null):e}function A5(e,t){let r,n,a,i,s;if(S5(e)){let o=e.getAttribute("action");n=o?Da(o,t):null,r=e.getAttribute("method")||Nd,a=ym(e.getAttribute("enctype"))||kd,i=new FormData(e)}else if(j5(e)||N5(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||o.getAttribute("action");if(n=c?Da(c,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||Nd,a=ym(e.getAttribute("formenctype"))||ym(o.getAttribute("enctype"))||kd,i=new FormData(o,e),!P5()){let{name:u,type:d,value:f}=e;if(d==="image"){let h=u?`${u}.`:"";i.append(`${h}x`,"0"),i.append(`${h}y`,"0")}else u&&i.append(u,f)}}else{if(_h(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Nd,n=null,a=kd,s=e}return i&&a==="text/plain"&&(s=i,i=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:i,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function g0(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function T5(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Da(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function D5(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function I5(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function R5(e,t,r){let n=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let s=await D5(i,r);return s.links?s.links():[]}return[]}));return F5(n.flat(1).filter(I5).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Lw(e,t,r,n,a,i){let s=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,o=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return i==="assets"?t.filter((c,u)=>s(c,u)||o(c,u)):i==="data"?t.filter((c,u)=>{var f;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(s(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function M5(e,t,{includeHydrateFallback:r}={}){return $5(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function $5(e){return[...new Set(e)]}function L5(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function F5(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let i=JSON.stringify(L5(a));return r.has(i)||(r.add(i),n.push({key:i,link:a})),n},[])}function u2(){let e=p.useContext(Go);return g0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function B5(){let e=p.useContext(wh);return g0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var v0=p.createContext(void 0);v0.displayName="FrameworkContext";function d2(){let e=p.useContext(v0);return g0(e,"You must render this element inside a <HydratedRouter> element"),e}function U5(e,t){let r=p.useContext(v0),[n,a]=p.useState(!1),[i,s]=p.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,h=p.useRef(null);p.useEffect(()=>{if(e==="render"&&s(!0),e==="viewport"){let y=x=>{x.forEach(w=>{s(w.isIntersecting)})},v=new IntersectionObserver(y,{threshold:.5});return h.current&&v.observe(h.current),()=>{v.disconnect()}}},[e]),p.useEffect(()=>{if(n){let y=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(y)}}},[n]);let m=()=>{a(!0)},g=()=>{a(!1),s(!1)};return r?e!=="intent"?[i,h,{}]:[i,h,{onFocus:wl(o,m),onBlur:wl(c,g),onMouseEnter:wl(u,m),onMouseLeave:wl(d,g),onTouchStart:wl(f,m)}]:[!1,h,{}]}function wl(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function z5({page:e,...t}){let{router:r}=u2(),n=p.useMemo(()=>t2(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?p.createElement(K5,{page:e,matches:n,...t}):null}function W5(e){let{manifest:t,routeModules:r}=d2(),[n,a]=p.useState([]);return p.useEffect(()=>{let i=!1;return R5(e,t,r).then(s=>{i||a(s)}),()=>{i=!0}},[e,t,r]),n}function K5({page:e,matches:t,...r}){let n=pa(),{manifest:a,routeModules:i}=d2(),{basename:s}=u2(),{loaderData:o,matches:c}=B5(),u=p.useMemo(()=>Lw(e,t,c,a,n,"data"),[e,t,c,a,n]),d=p.useMemo(()=>Lw(e,t,c,a,n,"assets"),[e,t,c,a,n]),f=p.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let g=new Set,y=!1;if(t.forEach(x=>{var b;let w=a.routes[x.route.id];!w||!w.hasLoader||(!u.some(_=>_.route.id===x.route.id)&&x.route.id in o&&((b=i[x.route.id])!=null&&b.shouldRevalidate)||w.hasClientLoader?y=!0:g.add(x.route.id))}),g.size===0)return[];let v=T5(e,s,"data");return y&&g.size>0&&v.searchParams.set("_routes",t.filter(x=>g.has(x.route.id)).map(x=>x.route.id).join(",")),[v.pathname+v.search]},[s,o,n,a,u,t,e,i]),h=p.useMemo(()=>M5(d,a),[d,a]),m=W5(d);return p.createElement(p.Fragment,null,f.map(g=>p.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),h.map(g=>p.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),m.map(({key:g,link:y})=>p.createElement("link",{key:g,nonce:r.nonce,...y})))}function H5(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var f2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{f2&&(window.__reactRouterVersion="7.9.6")}catch{}function q5({basename:e,children:t,window:r}){let n=p.useRef();n.current==null&&(n.current=AM({window:r,v5Compat:!0}));let a=n.current,[i,s]=p.useState({action:a.action,location:a.location}),o=p.useCallback(c=>{p.startTransition(()=>s(c))},[s]);return p.useLayoutEffect(()=>a.listen(o),[a,o]),p.createElement(w5,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:a})}var h2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,p2=p.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:i,replace:s,state:o,target:c,to:u,preventScrollReset:d,viewTransition:f,...h},m){let{basename:g}=p.useContext(Qn),y=typeof u=="string"&&h2.test(u),v,x=!1;if(typeof u=="string"&&y&&(v=u,f2))try{let E=new URL(window.location.href),P=u.startsWith("//")?new URL(E.protocol+u):new URL(u),A=Da(P.pathname,g);P.origin===E.origin&&A!=null?u=A+P.search+P.hash:x=!0}catch{un(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=i5(u,{relative:a}),[b,_,j]=U5(n,h),S=X5(u,{replace:s,state:o,target:c,preventScrollReset:d,relative:a,viewTransition:f});function N(E){t&&t(E),E.defaultPrevented||S(E)}let k=p.createElement("a",{...h,...j,href:v||w,onClick:x||i?t:N,ref:H5(m,_),target:c,"data-discover":!y&&r==="render"?"true":void 0});return b&&!y?p.createElement(p.Fragment,null,k,p.createElement(z5,{page:w})):k});p2.displayName="Link";var V5=p.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:i,to:s,viewTransition:o,children:c,...u},d){let f=qc(s,{relative:u.relative}),h=pa(),m=p.useContext(wh),{navigator:g,basename:y}=p.useContext(Qn),v=m!=null&&t4(f)&&o===!0,x=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=h.pathname,b=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(w=w.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&y&&(b=Da(b,y)||b);const _=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let j=w===x||!a&&w.startsWith(x)&&w.charAt(_)==="/",S=b!=null&&(b===x||!a&&b.startsWith(x)&&b.charAt(x.length)==="/"),N={isActive:j,isPending:S,isTransitioning:v},k=j?t:void 0,E;typeof n=="function"?E=n(N):E=[n,j?"active":null,S?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let P=typeof i=="function"?i(N):i;return p.createElement(p2,{...u,"aria-current":k,className:E,ref:d,style:P,to:s,viewTransition:o},typeof c=="function"?c(N):c)});V5.displayName="NavLink";var G5=p.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:i,method:s=Nd,action:o,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...h},m)=>{let g=Z5(),y=e4(o,{relative:u}),v=s.toLowerCase()==="get"?"get":"post",x=typeof o=="string"&&h2.test(o),w=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let _=b.nativeEvent.submitter,j=(_==null?void 0:_.getAttribute("formmethod"))||s;g(_||b.currentTarget,{fetcherKey:t,method:j,navigate:r,replace:a,state:i,relative:u,preventScrollReset:d,viewTransition:f})};return p.createElement("form",{ref:m,method:v,action:y,onSubmit:n?c:w,...h,"data-discover":!x&&e==="render"?"true":void 0})});G5.displayName="Form";function Y5(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function m2(e){let t=p.useContext(Go);return ht(t,Y5(e)),t}function X5(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:i,viewTransition:s}={}){let o=Xo(),c=pa(),u=qc(e,{relative:i});return p.useCallback(d=>{if(C5(d,t)){d.preventDefault();let f=r!==void 0?r:yc(c)===yc(u);o(e,{replace:f,state:n,preventScrollReset:a,relative:i,viewTransition:s})}},[c,o,u,r,n,t,e,a,i,s])}function g2(e){un(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=p.useRef(tv(e)),r=p.useRef(!1),n=pa(),a=p.useMemo(()=>E5(n.search,r.current?null:t.current),[n.search]),i=Xo(),s=p.useCallback((o,c)=>{const u=tv(typeof o=="function"?o(new URLSearchParams(a)):o);r.current=!0,i("?"+u,c)},[i,a]);return[a,s]}var J5=0,Q5=()=>`__${String(++J5)}__`;function Z5(){let{router:e}=m2("useSubmit"),{basename:t}=p.useContext(Qn),r=v5();return p.useCallback(async(n,a={})=>{let{action:i,method:s,encType:o,formData:c,body:u}=A5(n,t);if(a.navigate===!1){let d=a.fetcherKey||Q5();await e.fetch(d,r,a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||s,formEncType:a.encType||o,flushSync:a.flushSync})}else await e.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||s,formEncType:a.encType||o,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,r])}function e4(e,{relative:t}={}){let{basename:r}=p.useContext(Qn),n=p.useContext(Zn);ht(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...qc(e||".",{relative:t})},s=pa();if(e==null){i.search=s.search;let o=new URLSearchParams(i.search),c=o.getAll("index");if(c.some(d=>d==="")){o.delete("index"),c.filter(f=>f).forEach(f=>o.append("index",f));let d=o.toString();i.search=d?`?${d}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:ka([r,i.pathname])),yc(i)}function t4(e,{relative:t}={}){let r=p.useContext(i2);ht(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=m2("useViewTransitionState"),a=qc(e,{relative:t});if(!r.isTransitioning)return!1;let i=Da(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=Da(r.nextLocation.pathname,n)||r.nextLocation.pathname;return tf(a.pathname,s)!=null||tf(a.pathname,i)!=null}var rv=function(e,t){return rv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},rv(e,t)};function v2(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");rv(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var nf=function(){return nf=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},nf.apply(this,arguments)};function Jo(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function y2(e,t,r,n){var a=arguments.length,i=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(a<3?s(i):a>3?s(t,r,i):s(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function x2(e,t){return function(r,n){t(r,n,e)}}function b2(e,t,r,n,a,i){function s(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=n.kind,c=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f,h=!1,m=r.length-1;m>=0;m--){var g={};for(var y in n)g[y]=y==="access"?{}:n[y];for(var y in n.access)g.access[y]=n.access[y];g.addInitializer=function(x){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(x||null))};var v=(0,r[m])(o==="accessor"?{get:d.get,set:d.set}:d[c],g);if(o==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(f=s(v.get))&&(d.get=f),(f=s(v.set))&&(d.set=f),(f=s(v.init))&&a.unshift(f)}else(f=s(v))&&(o==="field"?a.unshift(f):d[c]=f)}u&&Object.defineProperty(u,n.name,d),h=!0}function w2(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function _2(e){return typeof e=="symbol"?e:"".concat(e)}function j2(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function S2(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function be(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})}function N2(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var jh=Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function k2(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&jh(t,e,r)}function af(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y0(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function C2(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y0(arguments[t]));return e}function E2(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var i=arguments[t],s=0,o=i.length;s<o;s++,a++)n[a]=i[s];return n}function P2(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Ro(e){return this instanceof Ro?(this.v=e,this):new Ro(e)}function O2(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",s),a[Symbol.asyncIterator]=function(){return this},a;function s(m){return function(g){return Promise.resolve(g).then(m,f)}}function o(m,g){n[m]&&(a[m]=function(y){return new Promise(function(v,x){i.push([m,y,v,x])>1||c(m,y)})},g&&(a[m]=g(a[m])))}function c(m,g){try{u(n[m](g))}catch(y){h(i[0][3],y)}}function u(m){m.value instanceof Ro?Promise.resolve(m.value.v).then(d,f):h(i[0][2],m)}function d(m){c("next",m)}function f(m){c("throw",m)}function h(m,g){m(g),i.shift(),i.length&&c(i[0][0],i[0][1])}}function A2(e){var t,r;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,i){t[a]=e[a]?function(s){return(r=!r)?{value:Ro(e[a](s)),done:!1}:i?i(s):s}:i}}function T2(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof af=="function"?af(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(s){return new Promise(function(o,c){s=e[i](s),a(o,c,s.done,s.value)})}}function a(i,s,o,c){Promise.resolve(c).then(function(u){i({value:u,done:o})},s)}}function D2(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var r4=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},nv=function(e){return nv=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},nv(e)};function I2(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=nv(e),n=0;n<r.length;n++)r[n]!=="default"&&jh(t,e,r[n]);return r4(t,e),t}function R2(e){return e&&e.__esModule?e:{default:e}}function M2(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function $2(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function L2(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function F2(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var n4=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function B2(e){function t(i){e.error=e.hasError?new n4(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function a(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(a,function(s){return t(s),a()})}else n|=1}catch(s){t(s)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function U2(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,i,s){return n?t?".jsx":".js":a&&(!i||!s)?r:a+i+"."+s.toLowerCase()+"js"}):e}const a4={__extends:v2,__assign:nf,__rest:Jo,__decorate:y2,__param:x2,__esDecorate:b2,__runInitializers:w2,__propKey:_2,__setFunctionName:j2,__metadata:S2,__awaiter:be,__generator:N2,__createBinding:jh,__exportStar:k2,__values:af,__read:y0,__spread:C2,__spreadArrays:E2,__spreadArray:P2,__await:Ro,__asyncGenerator:O2,__asyncDelegator:A2,__asyncValues:T2,__makeTemplateObject:D2,__importStar:I2,__importDefault:R2,__classPrivateFieldGet:M2,__classPrivateFieldSet:$2,__classPrivateFieldIn:L2,__addDisposableResource:F2,__disposeResources:B2,__rewriteRelativeImportExtension:U2},i4=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:F2,get __assign(){return nf},__asyncDelegator:A2,__asyncGenerator:O2,__asyncValues:T2,__await:Ro,__awaiter:be,__classPrivateFieldGet:M2,__classPrivateFieldIn:L2,__classPrivateFieldSet:$2,__createBinding:jh,__decorate:y2,__disposeResources:B2,__esDecorate:b2,__exportStar:k2,__extends:v2,__generator:N2,__importDefault:R2,__importStar:I2,__makeTemplateObject:D2,__metadata:S2,__param:x2,__propKey:_2,__read:y0,__rest:Jo,__rewriteRelativeImportExtension:U2,__runInitializers:w2,__setFunctionName:j2,__spread:C2,__spreadArray:P2,__spreadArrays:E2,__values:af,default:a4},Symbol.toStringTag,{value:"Module"})),s4=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class x0 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class o4 extends x0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Fw extends x0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Bw extends x0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var av;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(av||(av={}));class l4{constructor(t,{headers:r={},customFetch:n,region:a=av.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=s4(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return be(this,arguments,void 0,function*(r,n={}){var a;let i,s;try{const{headers:o,method:c,body:u,signal:d,timeout:f}=n;let h={},{region:m}=n;m||(m=this.region);const g=new URL(`${this.url}/${r}`);m&&m!=="any"&&(h["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let y;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(h["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(h["Content-Type"]="application/json",y=JSON.stringify(u)):y=u;let v=d;f&&(s=new AbortController,i=setTimeout(()=>s.abort(),f),d?(v=s.signal,d.addEventListener("abort",()=>s.abort())):v=s.signal);const x=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),o),body:y,signal:v}).catch(j=>{throw new o4(j)}),w=x.headers.get("x-relay-error");if(w&&w==="true")throw new Fw(x);if(!x.ok)throw new Bw(x);let b=((a=x.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),_;return b==="application/json"?_=yield x.json():b==="application/octet-stream"||b==="application/pdf"?_=yield x.blob():b==="text/event-stream"?_=x:b==="multipart/form-data"?_=yield x.formData():_=yield x.text(),{data:_,error:null,response:x}}catch(o){return{data:null,error:o,response:o instanceof Bw||o instanceof Fw?o.context:void 0}}finally{i&&clearTimeout(i)}})}}var Sr={};const Qo=aI(i4);var $u={},Lu={},Fu={},Bu={},Uu={},zu={},Uw;function z2(){if(Uw)return zu;Uw=1,Object.defineProperty(zu,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return zu.default=e,zu}var zw;function W2(){if(zw)return Uu;zw=1,Object.defineProperty(Uu,"__esModule",{value:!0});const t=Qo.__importDefault(z2());class r{constructor(a){var i,s;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(i=a.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=a.signal,this.isMaybeSingle=(s=a.isMaybeSingle)!==null&&s!==void 0?s:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=new Headers(this.headers),this.headers.set(a,i),this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let o=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,f,h;let m=null,g=null,y=null,v=c.status,x=c.statusText;if(c.ok){if(this.method!=="HEAD"){const j=await c.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?g=j:g=JSON.parse(j))}const b=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),_=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");b&&_&&_.length>1&&(y=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(m={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,y=null,v=406,x="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const b=await c.text();try{m=JSON.parse(b),Array.isArray(m)&&c.status===404&&(g=[],m=null,v=200,x="OK")}catch{c.status===404&&b===""?(v=204,x="No Content"):m={message:b}}if(m&&this.isMaybeSingle&&(!((h=m==null?void 0:m.details)===null||h===void 0)&&h.includes("0 rows"))&&(m=null,v=200,x="OK"),m&&this.shouldThrowOnError)throw new t.default(m)}return{error:m,data:g,count:y,status:v,statusText:x}});return this.shouldThrowOnError||(o=o.catch(c=>{var u,d,f,h,m,g;let y="";const v=c==null?void 0:c.cause;if(v){const x=(u=v==null?void 0:v.message)!==null&&u!==void 0?u:"",w=(d=v==null?void 0:v.code)!==null&&d!==void 0?d:"";y=`${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"FetchError"}: ${c==null?void 0:c.message}`,y+=`

Caused by: ${(h=v==null?void 0:v.name)!==null&&h!==void 0?h:"Error"}: ${x}`,w&&(y+=` (${w})`),v!=null&&v.stack&&(y+=`
${v.stack}`)}else y=(m=c==null?void 0:c.stack)!==null&&m!==void 0?m:"";return{error:{message:`${(g=c==null?void 0:c.name)!==null&&g!==void 0?g:"FetchError"}: ${c==null?void 0:c.message}`,details:y,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(a,i)}returns(){return this}overrideTypes(){return this}}return Uu.default=r,Uu}var Ww;function K2(){if(Ww)return Bu;Ww=1,Object.defineProperty(Bu,"__esModule",{value:!0});const t=Qo.__importDefault(W2());class r extends t.default{select(a){let i=!1;const s=(a??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:s,foreignTable:o,referencedTable:c=o}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${a}.${i?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:s=i}={}){const o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${a}`),this}range(a,i,{foreignTable:s,referencedTable:o=s}={}){const c=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(u,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:s=!1,buffers:o=!1,wal:c=!1,format:u="text"}={}){var d;const f=[a?"analyze":null,i?"verbose":null,s?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),h=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${h}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Bu.default=r,Bu}var Kw;function b0(){if(Kw)return Fu;Kw=1,Object.defineProperty(Fu,"__esModule",{value:!0});const t=Qo.__importDefault(K2()),r=new RegExp("[,()]");class n extends t.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${u}fts${d}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return Fu.default=n,Fu}var Hw;function H2(){if(Hw)return Lu;Hw=1,Object.defineProperty(Lu,"__esModule",{value:!0});const t=Qo.__importDefault(b0());class r{constructor(a,{headers:i={},schema:s,fetch:o}){this.url=a,this.headers=new Headers(i),this.schema=s,this.fetch=o}select(a,i){const{head:s=!1,count:o}=i??{},c=s?"HEAD":"GET";let u=!1;const d=(a??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",d),o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:s=!0}={}){var o;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const u=a.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:s=!1,count:o,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const f=a.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(f.length>0){const h=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(a,{count:i}={}){var s;const o="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:a}={}){var i;const s="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Lu.default=r,Lu}var qw;function c4(){if(qw)return $u;qw=1,Object.defineProperty($u,"__esModule",{value:!0});const e=Qo,t=e.__importDefault(H2()),r=e.__importDefault(b0());class n{constructor(i,{headers:s={},schema:o,fetch:c}={}){this.url=i,this.headers=new Headers(s),this.schemaName=o,this.fetch=c}from(i){const s=new URL(`${this.url}/${i}`);return new t.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,s={},{head:o=!1,get:c=!1,count:u}={}){var d;let f;const h=new URL(`${this.url}/rpc/${i}`);let m;o||c?(f=o?"HEAD":"GET",Object.entries(s).filter(([y,v])=>v!==void 0).map(([y,v])=>[y,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([y,v])=>{h.searchParams.append(y,v)})):(f="POST",m=s);const g=new Headers(this.headers);return u&&g.set("Prefer",`count=${u}`),new r.default({method:f,url:h,headers:g,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return $u.default=n,$u}Object.defineProperty(Sr,"__esModule",{value:!0});var q2=Sr.PostgrestError=rC=Sr.PostgrestBuilder=eC=Sr.PostgrestTransformBuilder=Q2=Sr.PostgrestFilterBuilder=X2=Sr.PostgrestQueryBuilder=G2=Sr.PostgrestClient=void 0;const Zo=Qo,V2=Zo.__importDefault(c4());var G2=Sr.PostgrestClient=V2.default;const Y2=Zo.__importDefault(H2());var X2=Sr.PostgrestQueryBuilder=Y2.default;const J2=Zo.__importDefault(b0());var Q2=Sr.PostgrestFilterBuilder=J2.default;const Z2=Zo.__importDefault(K2());var eC=Sr.PostgrestTransformBuilder=Z2.default;const tC=Zo.__importDefault(W2());var rC=Sr.PostgrestBuilder=tC.default;const nC=Zo.__importDefault(z2());q2=Sr.PostgrestError=nC.default;var aC=Sr.default={PostgrestClient:V2.default,PostgrestQueryBuilder:Y2.default,PostgrestFilterBuilder:J2.default,PostgrestTransformBuilder:Z2.default,PostgrestBuilder:tC.default,PostgrestError:nC.default};const u4=US({__proto__:null,get PostgrestBuilder(){return rC},get PostgrestClient(){return G2},get PostgrestError(){return q2},get PostgrestFilterBuilder(){return Q2},get PostgrestQueryBuilder(){return X2},get PostgrestTransformBuilder(){return eC},default:aC},[Sr]),{PostgrestClient:d4,PostgrestQueryBuilder:Aee,PostgrestFilterBuilder:Tee,PostgrestTransformBuilder:Dee,PostgrestBuilder:Iee,PostgrestError:Ree}=aC||u4;class f4{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const h4="2.83.0",p4=`realtime-js/${h4}`,iC="1.0.0",m4="2.0.0",Vw=iC,iv=1e4,g4=1e3,v4=100;var ts;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ts||(ts={}));var Ft;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ft||(Ft={}));var vn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(vn||(vn={}));var sv;(function(e){e.websocket="websocket"})(sv||(sv={}));var rs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(rs||(rs={}));class y4{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(t,r){if(this._isArrayBuffer(t.payload))return r(this._binaryEncodePush(t));if(t.event===this.BROADCAST&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodePush(t){var r,n;const{event:a,topic:i,payload:s}=t,o=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",u=this.META_LENGTH+c.length+o.length+i.length+a.length,d=new ArrayBuffer(this.HEADER_LENGTH+u);let f=new DataView(d),h=0;f.setUint8(h++,this.KINDS.push),f.setUint8(h++,c.length),f.setUint8(h++,o.length),f.setUint8(h++,i.length),f.setUint8(h++,a.length),Array.from(c,g=>f.setUint8(h++,g.charCodeAt(0))),Array.from(o,g=>f.setUint8(h++,g.charCodeAt(0))),Array.from(i,g=>f.setUint8(h++,g.charCodeAt(0))),Array.from(a,g=>f.setUint8(h++,g.charCodeAt(0)));var m=new Uint8Array(d.byteLength+s.byteLength);return m.set(new Uint8Array(d),0),m.set(new Uint8Array(s),d.byteLength),m.buffer}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n,a,i;const s=t.topic,o=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",u=t.payload.event,d=(i=(a=t.payload)===null||a===void 0?void 0:a.payload)!==null&&i!==void 0?i:new ArrayBuffer(0),f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+s.length+u.length,h=new ArrayBuffer(this.HEADER_LENGTH+f);let m=new DataView(h),g=0;m.setUint8(g++,this.KINDS.userBroadcastPush),m.setUint8(g++,c.length),m.setUint8(g++,o.length),m.setUint8(g++,s.length),m.setUint8(g++,u.length),m.setUint8(g++,this.BINARY_ENCODING),Array.from(c,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(o,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(s,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(u,v=>m.setUint8(g++,v.charCodeAt(0)));var y=new Uint8Array(h.byteLength+d.byteLength);return y.set(new Uint8Array(h),0),y.set(new Uint8Array(d),h.byteLength),y.buffer}_encodeJsonUserBroadcastPush(t){var r,n,a,i;const s=t.topic,o=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",u=t.payload.event,d=(i=(a=t.payload)===null||a===void 0?void 0:a.payload)!==null&&i!==void 0?i:{},h=new TextEncoder().encode(JSON.stringify(d)).buffer,m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+s.length+u.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let y=new DataView(g),v=0;y.setUint8(v++,this.KINDS.userBroadcastPush),y.setUint8(v++,c.length),y.setUint8(v++,o.length),y.setUint8(v++,s.length),y.setUint8(v++,u.length),y.setUint8(v++,this.JSON_ENCODING),Array.from(c,w=>y.setUint8(v++,w.charCodeAt(0))),Array.from(o,w=>y.setUint8(v++,w.charCodeAt(0))),Array.from(s,w=>y.setUint8(v++,w.charCodeAt(0))),Array.from(u,w=>y.setUint8(v++,w.charCodeAt(0)));var x=new Uint8Array(g.byteLength+h.byteLength);return x.set(new Uint8Array(g),0),x.set(new Uint8Array(h),g.byteLength),x.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,i,s,o,c]=n;return r({join_ref:a,ref:i,topic:s,event:o,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.push:return this._decodePush(t,r,a);case this.KINDS.reply:return this._decodeReply(t,r,a);case this.KINDS.broadcast:return this._decodeBroadcast(t,r,a);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodePush(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),s=r.getUint8(3);let o=this.HEADER_LENGTH+this.META_LENGTH-1;const c=n.decode(t.slice(o,o+a));o=o+a;const u=n.decode(t.slice(o,o+i));o=o+i;const d=n.decode(t.slice(o,o+s));o=o+s;const f=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{join_ref:c,ref:null,topic:u,event:d,payload:f}}_decodeReply(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),s=r.getUint8(3),o=r.getUint8(4);let c=this.HEADER_LENGTH+this.META_LENGTH;const u=n.decode(t.slice(c,c+a));c=c+a;const d=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+s));c=c+s;const h=n.decode(t.slice(c,c+o));c=c+o;const m=JSON.parse(n.decode(t.slice(c,t.byteLength))),g={status:h,response:m};return{join_ref:u,ref:d,topic:f,event:vn.reply,payload:g}}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let s=this.HEADER_LENGTH+2;const o=n.decode(t.slice(s,s+a));s=s+a;const c=n.decode(t.slice(s,s+i));s=s+i;const u=JSON.parse(n.decode(t.slice(s,t.byteLength)));return{join_ref:null,ref:null,topic:o,event:c,payload:u}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),s=r.getUint8(3),o=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+a));c=c+a;const d=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+s));c=c+s;const h=t.slice(c,t.byteLength),m=o===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,g={type:this.BROADCAST,event:d,payload:m};return s>0&&(g.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST,payload:g}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class sC{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var tt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(tt||(tt={}));const Gw=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,s)=>(i[s]=x4(s,e,t,a),i),{}):{}},x4=(e,t,r,n)=>{const a=t.find(o=>o.name===e),i=a==null?void 0:a.type,s=r[e];return i&&!n.includes(i)?oC(i,s):ov(s)},oC=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return j4(t,r)}switch(e){case tt.bool:return b4(t);case tt.float4:case tt.float8:case tt.int2:case tt.int4:case tt.int8:case tt.numeric:case tt.oid:return w4(t);case tt.json:case tt.jsonb:return _4(t);case tt.timestamp:return S4(t);case tt.abstime:case tt.date:case tt.daterange:case tt.int4range:case tt.int8range:case tt.money:case tt.reltime:case tt.text:case tt.time:case tt.timestamptz:case tt.timetz:case tt.tsrange:case tt.tstzrange:return ov(t);default:return ov(t)}},ov=e=>e,b4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},w4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},_4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},j4=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const s=e.slice(1,r);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(o=>oC(t,o))}return e},S4=e=>typeof e=="string"?e.replace(" ","T"):e,lC=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class xm{constructor(t,r,n={},a=iv){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Yw;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Yw||(Yw={}));class Yl{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:s,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Yl.syncState(this.state,a,i,s),this.pendingDiffs.forEach(c=>{this.state=Yl.syncDiff(this.state,c,i,s)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:s,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Yl.syncDiff(this.state,a,i,s),o())}),this.onJoin((a,i,s)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:s})}),this.onLeave((a,i,s)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),s=this.transformState(r),o={},c={};return this.map(i,(u,d)=>{s[u]||(c[u]=d)}),this.map(s,(u,d)=>{const f=i[u];if(f){const h=d.map(v=>v.presence_ref),m=f.map(v=>v.presence_ref),g=d.filter(v=>m.indexOf(v.presence_ref)<0),y=f.filter(v=>h.indexOf(v.presence_ref)<0);g.length>0&&(o[u]=g),y.length>0&&(c[u]=y)}else o[u]=d}),this.syncDiff(i,{joins:o,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(o,c)=>{var u;const d=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(c),d.length>0){const f=t[o].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[o].unshift(...h)}n(o,d,c)}),this.map(s,(o,c)=>{let u=t[o];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[o]=u,a(o,u,c),u.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Xw;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Xw||(Xw={}));var Xl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Xl||(Xl={}));var va;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(va||(va={}));class w0{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new xm(this,vn.join,this.params,this.timeout),this.rejoinTimer=new sC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ft.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vn.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Yl(this),this.broadcastEndpointURL=lC(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Ft.closed){const{config:{broadcast:s,presence:o,private:c}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[Xl.PRESENCE]&&this.bindings[Xl.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},h={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(va.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(va.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket.setAuth(),m===void 0){t==null||t(va.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,v=(g=y==null?void 0:y.length)!==null&&g!==void 0?g:0,x=[];for(let w=0;w<v;w++){const b=y[w],{filter:{event:_,schema:j,table:S,filter:N}}=b,k=m&&m[w];if(k&&k.event===_&&k.schema===j&&k.table===S&&k.filter===N)x.push(Object.assign(Object.assign({},b),{id:k.id}));else{this.unsubscribe(),this.state=Ft.errored,t==null||t(va.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(va.SUBSCRIBED);return}}).receive("error",m=>{this.state=Ft.errored,t==null||t(va.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(va.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Ft.joined&&t===Xl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const u=await o.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:s}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var s,o,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(s=this.params)===null||s===void 0?void 0:s.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ft.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new xm(this,vn.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ft.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),s=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),s}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new xm(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>v4){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const s=t.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=vn;if(n&&[o,c,u,d].indexOf(s)>=0&&n!==this._joinRef())return;let h=this._onMessage(s,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var g,y,v;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((v=(y=m.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===s}).map(m=>m.callback(h,n)):(i=this.bindings[s])===null||i===void 0||i.filter(m=>{var g,y,v,x,w,b;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in m){const _=m.id,j=(g=m.filter)===null||g===void 0?void 0:g.event;return _&&((y=r.ids)===null||y===void 0?void 0:y.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const _=(w=(x=m==null?void 0:m.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return _==="*"||_===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===s}).map(m=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:y,table:v,commit_timestamp:x,type:w,errors:b}=g;h=Object.assign(Object.assign({},{schema:y,table:v,commit_timestamp:x,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(g))}m.callback(h,n)})}_isClosed(){return this.state===Ft.closed}_isJoined(){return this.state===Ft.joined}_isJoining(){return this.state===Ft.joining}_isLeaving(){return this.state===Ft.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&w0.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(vn.close,{},t)}_onError(t){this._on(vn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ft.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Gw(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Gw(t.columns,t.old_record)),r}}const bm=()=>{},Wu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},N4=[1e3,2e3,5e3,1e4],k4=1e4,C4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class E4{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=iv,this.transport=null,this.heartbeatIntervalMs=Wu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=bm,this.ref=0,this.reconnectTimer=null,this.vsn=Vw,this.logger=bm,this.conn=null,this.sendBuffer=[],this.serializer=new y4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${sv.websocket}`,this.httpEndpoint=lC(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=f4.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ts.connecting:return rs.Connecting;case ts.open:return rs.Open;case ts.closing:return rs.Closing;default:return rs.Closed}}isConnected(){return this.connectionState()===rs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new w0(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,s=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(g4,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Wu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:s}=r,o=s?`(${s})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${o}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,s)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ts.open||this.conn.readyState===ts.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(vn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([C4],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:p4};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(vn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new sC(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Wu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,s,o,c,u,d,f,h,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:iv,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Wu.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:bm,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Vw,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:g=>N4[g-1]||k4,this.vsn){case iC:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(g,y)=>y(JSON.stringify(g)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(g,y)=>y(JSON.parse(g));break;case m4:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class _0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function xt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class P4 extends _0{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class lv extends _0{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const j0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),O4=()=>Response,cv=e=>{if(Array.isArray(e))return e.map(r=>cv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=cv(n)}),t},A4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},wm=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},T4=(e,t,r)=>be(void 0,void 0,void 0,function*(){const n=yield O4();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,s=(a==null?void 0:a.statusCode)||i+"";t(new P4(wm(a),i,s))}).catch(a=>{t(new lv(wm(a),a))}):t(new lv(wm(e),e))}),D4=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(A4(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Vc(e,t,r,n,a,i){return be(this,void 0,void 0,function*(){return new Promise((s,o)=>{e(r,D4(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>T4(c,o,n))})})}function xc(e,t,r,n){return be(this,void 0,void 0,function*(){return Vc(e,"GET",t,r,n)})}function Ln(e,t,r,n,a){return be(this,void 0,void 0,function*(){return Vc(e,"POST",t,n,a,r)})}function uv(e,t,r,n,a){return be(this,void 0,void 0,function*(){return Vc(e,"PUT",t,n,a,r)})}function I4(e,t,r,n){return be(this,void 0,void 0,function*(){return Vc(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function S0(e,t,r,n,a){return be(this,void 0,void 0,function*(){return Vc(e,"DELETE",t,n,a,r)})}class R4{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return be(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xt(t))return{data:null,error:t};throw t}})}}var cC;class M4{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[cC]="BlobDownloadBuilder",this.promise=null}asStream(){return new R4(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return be(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xt(t))return{data:null,error:t};throw t}})}}cC=Symbol.toStringTag;const $4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Jw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class L4{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=j0(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return be(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},Jw),a);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",s.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=n,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!s.duplex&&(s.duplex="half")),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(t=="PUT"?uv:Ln)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:o},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(xt(i))return{data:null,error:i};throw i}})}upload(t,r,n){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return be(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),s=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${s}`);o.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Jw.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield uv(this.fetch,o.toString(),c,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(xt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return be(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield Ln(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),s=new URL(this.url+i.url),o=s.searchParams.get("token");if(!o)throw new _0("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}update(t,r,n){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return be(this,void 0,void 0,function*(){try{return{data:yield Ln(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(xt(a))return{data:null,error:a};throw a}})}copy(t,r,n){return be(this,void 0,void 0,function*(){try{return{data:{path:(yield Ln(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(xt(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return be(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Ln(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(xt(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return be(this,void 0,void 0,function*(){try{const a=yield Ln(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(xt(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),s=i?`?${i}`:"",o=this._getFinalPath(t),c=()=>xc(this.fetch,`${this.url}/${a}/${o}${s}`,{headers:this.headers,noResolveJson:!0});return new M4(c,this.shouldThrowOnError)}info(t){return be(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield xc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:cv(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}exists(t){return be(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield I4(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n)&&n instanceof lv){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(t){return be(this,void 0,void 0,function*(){try{return{data:yield S0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}list(t,r,n){return be(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},$4),r),{prefix:t||""});return{data:yield Ln(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(xt(a))return{data:null,error:a};throw a}})}listV2(t,r){return be(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Ln(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const uC="2.83.0",dC={"X-Client-Info":`storage-js/${uC}`};class F4{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},dC),r),this.fetch=j0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return be(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield xc(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}getBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield xc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}createBucket(t){return be(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Ln(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(xt(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return be(this,void 0,void 0,function*(){try{return{data:yield uv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield Ln(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield S0(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class B4{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},dC),r),this.fetch=j0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield Ln(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}listBuckets(t){return be(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield xc(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield S0(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}}const N0={"X-Client-Info":`storage-js/${uC}`,"Content-Type":"application/json"};class fC extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function rn(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class _m extends fC{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class U4 extends fC{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var Qw;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Qw||(Qw={}));const k0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),z4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Zw=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),W4=(e,t,r)=>be(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e.status||500,i=e;if(typeof i.json=="function")i.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||a+"";t(new _m(Zw(s),a,o))}).catch(()=>{const s=a+"",o=i.statusText||`HTTP ${a} error`;t(new _m(o,a,s))});else{const s=a+"",o=i.statusText||`HTTP ${a} error`;t(new _m(o,a,s))}}else t(new U4(Zw(e),e))}),K4=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(z4(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function H4(e,t,r,n,a,i){return be(this,void 0,void 0,function*(){return new Promise((s,o)=>{e(r,K4(t,n,a,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>s(c)).catch(c=>W4(c,o,n))})})}function nn(e,t,r,n,a){return be(this,void 0,void 0,function*(){return H4(e,"POST",t,n,a,r)})}class q4{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},N0),r),this.fetch=k0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return be(this,void 0,void 0,function*(){try{return{data:(yield nn(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rn(r))return{data:null,error:r};throw r}})}getIndex(t,r){return be(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}})}listIndexes(t){return be(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rn(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return be(this,void 0,void 0,function*(){try{return{data:(yield nn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}})}}class V4{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},N0),r),this.fetch=k0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return be(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield nn(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rn(r))return{data:null,error:r};throw r}})}getVectors(t){return be(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rn(r))return{data:null,error:r};throw r}})}listVectors(t){return be(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield nn(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rn(r))return{data:null,error:r};throw r}})}queryVectors(t){return be(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rn(r))return{data:null,error:r};throw r}})}deleteVectors(t){return be(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield nn(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rn(r))return{data:null,error:r};throw r}})}}class G4{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},N0),r),this.fetch=k0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return be(this,void 0,void 0,function*(){try{return{data:(yield nn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rn(r))return{data:null,error:r};throw r}})}getBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rn(r))return{data:null,error:r};throw r}})}listBuckets(){return be(this,arguments,void 0,function*(t={}){try{return{data:yield nn(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return be(this,void 0,void 0,function*(){try{return{data:(yield nn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rn(r))return{data:null,error:r};throw r}})}}class Y4 extends G4{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new X4(this.url,this.headers,t,this.fetch)}}class X4 extends q4{constructor(t,r,n,a){super(t,r,a),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return be(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return be(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return be(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return be(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new J4(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class J4 extends V4{constructor(t,r,n,a,i){super(t,r,i),this.vectorBucketName=n,this.indexName=a}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return be(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return be(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return be(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return be(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return be(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Q4 extends F4{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new L4(this.url,this.headers,t,this.fetch)}get vectors(){return new Y4(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new B4(this.url+"/iceberg",this.headers,this.fetch)}}const Z4="2.83.0";let $l="";typeof Deno<"u"?$l="deno":typeof document<"u"?$l="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$l="react-native":$l="node";const e$={"X-Client-Info":`supabase-js-${$l}/${Z4}`},t$={headers:e$},r$={schema:"public"},n$={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},a$={},i$=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),s$=()=>Headers,o$=(e,t,r)=>{const n=i$(r),a=s$();return async(i,s)=>{var o;const c=(o=await t())!==null&&o!==void 0?o:e;let u=new a(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},s),{headers:u}))}};function l$(e){return e.endsWith("/")?e:e+"/"}function c$(e,t){var r,n;const{db:a,auth:i,realtime:s,global:o}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),s),storage:{},global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function u$(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(l$(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const hC="2.83.0",Qs=30*1e3,dv=3,jm=dv*Qs,d$="http://localhost:9999",f$="supabase.auth.token",h$={"X-Client-Info":`gotrue-js/${hC}`},fv="X-Supabase-Api-Version",pC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},p$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,m$=10*60*1e3;class bc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function je(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class g$ extends bc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function v$(e){return je(e)&&e.name==="AuthApiError"}class ns extends bc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ii extends bc{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Jr extends Ii{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function y$(e){return je(e)&&e.name==="AuthSessionMissingError"}class Bs extends Ii{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ku extends Ii{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Hu extends Ii{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function x$(e){return je(e)&&e.name==="AuthImplicitGrantRedirectError"}class e_ extends Ii{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hv extends Ii{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Sm(e){return je(e)&&e.name==="AuthRetryableFetchError"}class t_ extends Ii{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class pv extends Ii{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const sf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),r_=` 	
\r=`.split(""),b$=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<r_.length;t+=1)e[r_[t].charCodeAt(0)]=-2;for(let t=0;t<sf.length;t+=1)e[sf[t].charCodeAt(0)]=t;return e})();function n_(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(sf[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(sf[n]),t.queuedBits-=6}}function mC(e,t,r){const n=b$[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function a_(e){const t=[],r=s=>{t.push(String.fromCodePoint(s))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=s=>{j$(s,n,r)};for(let s=0;s<e.length;s+=1)mC(e.charCodeAt(s),a,i);return t.join("")}function w$(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function _$(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}w$(n,t)}}function j$(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function _o(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)mC(e.charCodeAt(a),r,n);return new Uint8Array(t)}function S$(e){const t=[];return _$(e,r=>t.push(r)),new Uint8Array(t)}function os(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>n_(a,r,n)),n_(null,r,n),t.join("")}function N$(e){return Math.round(Date.now()/1e3)+e}function k$(){return Symbol("auth-callback")}const sr=()=>typeof window<"u"&&typeof document<"u",Hi={tested:!1,writable:!1},gC=()=>{if(!sr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Hi.tested)return Hi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Hi.tested=!0,Hi.writable=!0}catch{Hi.tested=!0,Hi.writable=!1}return Hi.writable};function C$(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const vC=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),E$=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Zs=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},qi=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ni=async(e,t)=>{await e.removeItem(t)};class Sh{constructor(){this.promise=new Sh.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Sh.promiseConstructor=Promise;function Nm(e){const t=e.split(".");if(t.length!==3)throw new pv("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!p$.test(t[n]))throw new pv("JWT not in base64url format");return{header:JSON.parse(a_(t[0])),payload:JSON.parse(a_(t[1])),signature:_o(t[2]),raw:{header:t[0],payload:t[1]}}}async function P$(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function O$(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const s=await e(i);if(!t(i,null,s)){n(s);return}}catch(s){if(!t(i,s)){a(s);return}}})()})}function A$(e){return("0"+e.toString(16)).substr(-2)}function T$(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,A$).join("")}async function D$(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function I$(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await D$(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Us(e,t,r=!1){const n=T$();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Zs(e,`${t}-code-verifier`,a);const i=await I$(n);return[i,n===i?"plain":"s256"]}const R$=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function M$(e){const t=e.headers.get(fv);if(!t||!t.match(R$))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function $$(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function L$(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const F$=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function zs(e){if(!F$.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function km(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function B$(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function i_(e){return JSON.parse(JSON.stringify(e))}const Ji=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),U$=[502,503,504];async function s_(e){var t;if(!E$(e))throw new hv(Ji(e),0);if(U$.includes(e.status))throw new hv(Ji(e),e.status);let r;try{r=await e.json()}catch(i){throw new ns(Ji(i),i)}let n;const a=M$(e);if(a&&a.getTime()>=pC["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new t_(Ji(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Jr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0))throw new t_(Ji(r),e.status,r.weak_password.reasons);throw new g$(Ji(r),e.status||500,n)}const z$=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Oe(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[fv]||(i[fv]=pC["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const s=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(s.redirect_to=n.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await W$(e,t,r+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function W$(e,t,r,n,a,i){const s=z$(t,n,a,i);let o;try{o=await e(r,Object.assign({},s))}catch(c){throw console.error(c),new hv(Ji(c),0)}if(o.ok||await s_(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await s_(c)}}function Mn(e){var t;let r=null;q$(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=N$(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function o_(e){const t=Mn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function di(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function K$(e){return{data:e,error:null}}function H$(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,s=Jo(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},s);return{data:{properties:o,user:c},error:null}}function l_(e){return e}function q$(e){return e.access_token&&e.refresh_token&&e.expires_in}const Cm=["global","local","others"];class V${constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=vC(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Cm[0]){if(Cm.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Cm.join(", ")}`);try{return await Oe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:di})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Jo(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:H$,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(je(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Oe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:di})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,s,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:l_});if(d.error)throw d.error;const f=await d.json(),h=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,m=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=y}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(je(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){zs(t);try{return await Oe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:di})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){zs(t);try{return await Oe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:di})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){zs(t);try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:di})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){zs(t.userId);try{const{data:r,error:n}=await Oe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(je(r))return{data:null,error:r};throw r}}async _deleteFactor(t){zs(t.userId),zs(t.id);try{return{data:await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,s,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:l_});if(d.error)throw d.error;const f=await d.json(),h=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,m=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=y}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(je(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(je(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(je(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Oe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(je(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(je(r))return{data:null,error:r};throw r}}}function c_(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ws={debug:!!(globalThis&&gC()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yC extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class G$ extends yC{}async function Y$(e,t,r){Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new G$(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ws.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function X$(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function xC(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function J$(e){return parseInt(e,16)}function Q$(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function Z$(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:s,notBefore:o,requestId:c,resources:u,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=xC(e.address),g=d?`${d}://${n}`:n,y=e.statement?`${e.statement}
`:"",v=`${g} wants you to sign in with your Ethereum account:
${m}

${y}`;let x=`URI: ${f}
Version: ${h}
Chain ID: ${r}${s?`
Nonce: ${s}`:""}
Issued At: ${i.toISOString()}`;if(a&&(x+=`
Expiration Time: ${a.toISOString()}`),o&&(x+=`
Not Before: ${o.toISOString()}`),c&&(x+=`
Request ID: ${c}`),u){let w=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);w+=`
- ${b}`}x+=w}return`${v}
${x}`}class It extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class of extends It{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function e3({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new It({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new It({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new It({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new It({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new It({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new It({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new It({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new It({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(bC(s)){if(i.rp.id!==s)return new It({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new It({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new It({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new It({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new It({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function t3({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new It({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new It({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(bC(n)){if(r.rpId!==n)return new It({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new It({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new It({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new It({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class r3{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const n3=new r3;function a3(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=Jo(e,["challenge","user","excludeCredentials"]),i=_o(t).buffer,s=Object.assign(Object.assign({},r),{id:_o(r.id).buffer}),o=Object.assign(Object.assign({},a),{challenge:i,user:s});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];o.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:_o(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function i3(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Jo(e,["challenge","allowCredentials"]),a=_o(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let s=0;s<r.length;s++){const o=r[s];i.allowCredentials[s]=Object.assign(Object.assign({},o),{id:_o(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return i}function s3(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:os(new Uint8Array(e.response.attestationObject)),clientDataJSON:os(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function o3(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:os(new Uint8Array(a.authenticatorData)),clientDataJSON:os(new Uint8Array(a.clientDataJSON)),signature:os(new Uint8Array(a.signature)),userHandle:a.userHandle?os(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function bC(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function u_(){var e,t;return!!(sr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function l3(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new of("Browser returned unexpected credential type",t)}:{data:null,error:new of("Empty credential response",t)}}catch(t){return{data:null,error:e3({error:t,options:e})}}}async function c3(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new of("Browser returned unexpected credential type",t)}:{data:null,error:new of("Empty credential response",t)}}catch(t){return{data:null,error:t3({error:t,options:e})}}}const u3={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},d3={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function lf(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const s=a[i];if(s!==void 0)if(Array.isArray(s))n[i]=s;else if(r(s))n[i]=s;else if(t(s)){const o=n[i];t(o)?n[i]=lf(o,s):n[i]=lf(s)}else n[i]=s}return n}function f3(e,t){return lf(u3,e,t||{})}function h3(e,t){return lf(d3,e,t||{})}class p3{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){try{const{data:s,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!s)return{data:null,error:o};const c=a??n3.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=f3(s.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:f}=await l3({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=h3(s.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:f}=await c3(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(s){return je(s)?{data:null,error:s}:{data:null,error:new ns("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new bc("rpId is required for WebAuthn authentication")};try{if(!u_())return{data:null,error:new ns("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!s)return{data:null,error:o};const{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(s){return je(s)?{data:null,error:s}:{data:null,error:new ns("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new bc("rpId is required for WebAuthn registration")};try{if(!u_())return{data:null,error:new ns("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:o};const{data:c,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(s){return je(s)?{data:null,error:s}:{data:null,error:new ns("Unexpected error in register",s)}}}}X$();const m3={url:d$,storageKey:f$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:h$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function d_(e,t,r){return await r()}const Ks={};class wc{get jwks(){var t,r;return(r=(t=Ks[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ks[this.storageKey]=Object.assign(Object.assign({},Ks[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ks[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ks[this.storageKey]=Object.assign(Object.assign({},Ks[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},m3),t);if(this.storageKey=i.storageKey,this.instanceID=(r=wc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,wc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&sr()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new V$({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=vC(i.fetch),this.lock=i.lock||d_,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:sr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Y$:this.lock=d_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new p3(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:gC()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=c_(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=c_(this.memoryStorage)),sr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${hC}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(sr()&&(r=C$(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),sr()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),x$(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:s,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return je(r)?this._returnResult({error:r}):this._returnResult({error:new ns("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Mn}),{data:s,error:o}=i;if(o||!s)return this._returnResult({data:{user:null,session:null},error:o});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(je(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await Us(this.storage,this.storageKey)),i=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:g},xform:Mn})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Mn})}else throw new Ku("You must provide either an email or phone number and a password");const{data:s,error:o}=i;if(o||!s)return this._returnResult({data:{user:null,session:null},error:o});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(je(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:s,options:o}=t;r=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:o_})}else if("phone"in t){const{phone:i,password:s,options:o}=t;r=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:o_})}else throw new Ku("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new Bs;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,s,o,c,u,d,f,h;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:y,wallet:v,statement:x,options:w}=t;let b;if(sr())if(typeof v=="object")b=v;else{const E=window;if("ethereum"in E&&typeof E.ethereum=="object"&&"request"in E.ethereum&&typeof E.ethereum.request=="function")b=E.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=v}const _=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href),j=await b.request({method:"eth_requestAccounts"}).then(E=>E).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=xC(j[0]);let N=(n=w==null?void 0:w.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!N){const E=await b.request({method:"eth_chainId"});N=J$(E)}const k={domain:_.host,address:S,statement:x,uri:_.href,version:"1",chainId:N,nonce:(a=w==null?void 0:w.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(s=(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(o=w==null?void 0:w.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=w==null?void 0:w.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=w==null?void 0:w.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=w==null?void 0:w.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=Z$(k),g=await b.request({method:"personal_sign",params:[Q$(m),S]})}try{const{data:y,error:v}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:g},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Mn});if(v)throw v;if(!y||!y.session||!y.user){const x=new Bs;return this._returnResult({data:{user:null,session:null},error:x})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:v})}catch(y){if(je(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(t){var r,n,a,i,s,o,c,u,d,f,h,m;let g,y;if("message"in t)g=t.message,y=t.signature;else{const{chain:v,wallet:x,statement:w,options:b}=t;let _;if(sr())if(typeof x=="object")_=x;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=x}const j=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),w?{statement:w}:null));let N;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")N=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)N=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)g=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),y=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=S}}try{const{data:v,error:x}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:os(y)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Mn});if(x)throw x;if(!v||!v.session||!v.user){const w=new Bs;return this._returnResult({data:{user:null,session:null},error:w})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:x})}catch(v){if(je(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(t){const r=await qi(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:s}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Mn});if(await ni(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!i||!i.session||!i.user){const o=new Bs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:s})}catch(i){if(je(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:s}=t,o=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Mn}),{data:c,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Bs;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,i,s;try{if("email"in t){const{email:o,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Us(this.storage,this.storageKey));const{error:f}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:o,options:c}=t,{data:u,error:d}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(s=c==null?void 0:c.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Ku("You must provide either an email or phone number.")}catch(o){if(je(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:o}=await Oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Mn});if(o)throw o;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,u=s.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(je(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,i,s;try{let o=null,c=null;this.flowType==="pkce"&&([o,c]=await Us(this.storage,this.storageKey));const u=await Oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:K$});return!((i=u.data)===null||i===void 0)&&i.url&&sr()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if(je(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Jr;const{error:a}=await Oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(je(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:s}=await Oe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:s,error:o}=await Oe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:o})}throw new Ku("You must provide either an email or phone number and a type")}catch(r){if(je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await qi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<jm:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const s=await qi(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=km()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=B$(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:di}):await this._useSession(async r=>{var n,a,i;const{data:s,error:o}=r;if(o)throw o;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Jr}:await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:di})})}catch(r){if(je(r))return y$(r)&&(await this._removeSession(),await ni(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Jr;const s=a.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await Us(this.storage,this.storageKey));const{data:u,error:d}=await Oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:s.access_token,xform:di});if(d)throw d;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(n){if(je(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Jr;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:s}=Nm(t.access_token);if(s.exp&&(n=s.exp,a=n<=r),a){const{data:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(je(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:s,error:o}=r;if(o)throw o;t=(n=s.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Jr;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!sr())throw new Hu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Hu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new e_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new e_("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:s,expires_in:o,expires_at:c,token_type:u}=t;if(!i||!o||!s||!u)throw new Hu("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let h=d+f;c&&(h=parseInt(c));const m=h-d;m*1e3<=Qs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const g=h-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:y,error:v}=await this._getUser(i);if(v)throw v;const x={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:s,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:t.type},error:null})}catch(n){if(je(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await qi(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const s=(n=a.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:o}=await this.admin.signOut(s,t);if(o&&!(v$(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await ni(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=k$(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Us(this.storage,this.storageKey,!0));try{return await Oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(je(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var s,o,c,u,d;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Oe(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return sr()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(je(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:s,provider:o,token:c,access_token:u,nonce:d}=t,f=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Mn}),{data:h,error:m}=f;return m?this._returnResult({data:{user:null,session:null},error:m}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new Bs}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:m}))}catch(a){if(je(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)throw s;return await Oe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await O$(async a=>(a>0&&await P$(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Mn})),(a,i)=>{const s=200*Math.pow(2,a);return i&&Sm(i)&&Date.now()+s-n<Qs})}catch(n){if(this._debug(r,"error",n),je(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),sr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await qi(this.storage,this.storageKey);if(a&&this.userStorage){let s=await qi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:a.user},await Zs(this.userStorage,this.storageKey+"-user",s)),a.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:km()}else if(a&&!a.user&&!a.user){const s=await qi(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(a.user=s.user,await ni(this.storage,this.storageKey+"-user"),await Zs(this.storage,this.storageKey,a)):a.user=km()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<jm;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${jm}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:s}=await this._callRefreshToken(a.refresh_token);s&&(console.error(s),Sm(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:o}=await this._getUser(a.access_token);!o&&(s!=null&&s.user)?(a.user=s.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Jr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Sh;const{data:i,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!i.session)throw new Jr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={data:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),je(i)){const s={data:null,error:i};return Sm(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],s=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(s),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Zs(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=i_(a);await Zs(this.storage,this.storageKey,i)}else{const a=i_(r);await Zs(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await ni(this.storage,this.storageKey),await ni(this.storage,this.storageKey+"-code-verifier"),await ni(this.storage,this.storageKey+"-user"),this.userStorage&&await ni(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&sr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Qs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Qs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Qs}ms, refresh threshold is ${dv} ticks`),a<=dv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof yC)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!sr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,s]=await Us(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(s)}`});a.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await Oe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await Oe(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?s3(t.webauthn.credential_response):o3(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:c}=await Oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const s=await Oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(s.error)return s;const{data:o}=s;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:a3(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:i3(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Nm(n.access_token);let s=null;i.aal&&(s=i.aal);let o=s;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const u=i.amr||[];return{data:{currentLevel:s,nextLevel:o,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Oe(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Jr})})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Jr});const s=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&sr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(je(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Jr});const s=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&sr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(je(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Oe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Jr})})}catch(t){if(je(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Oe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Jr})})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+m$>a)return n;const{data:i,error:s}=await Oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:g}=await this.getSession();if(g||!m.session)return this._returnResult({data:null,error:g});n=m.session.access_token}const{header:a,payload:i,signature:s,raw:{header:o,payload:c}}=Nm(n);r!=null&&r.allowExpired||$$(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:a,signature:s},error:null}}const d=L$(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,s,S$(`${o}.${c}`)))throw new pv("Invalid JWT signature");return{data:{claims:i,header:a,signature:s},error:null}}catch(n){if(je(n))return this._returnResult({data:null,error:n});throw n}}}wc.nextInstanceID={};const g3=wc;class v3 extends g3{constructor(t){super(t)}}class y3{constructor(t,r,n){var a,i,s;this.supabaseUrl=t,this.supabaseKey=r;const o=u$(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:r$,realtime:a$,auth:Object.assign(Object.assign({},n$),{storageKey:c}),global:t$},d=c$(n??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=d.auth)!==null&&s!==void 0?s:{},this.headers,d.global.fetch),this.fetch=o$(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new d4(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Q4(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new l4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:s,flowType:o,lock:c,debug:u,throwOnError:d},f,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new v3({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),f),storageKey:s,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:o,lock:c,debug:u,throwOnError:d,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new E4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const x3=(e,t,r)=>new y3(e,t,r);function b3(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}b3()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const wC="https://gomwhbewjdcllejifdyf.supabase.co",_C="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdvbXdoYmV3amRjbGxlamlmZHlmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM1MTUzNjYsImV4cCI6MjA3OTA5MTM2Nn0.fvIW61htbjtfkT5ZP4FGBTw96KSGZbr9qxSJiMDp-qQ",Em=[!wC,!_C].filter(Boolean);if(Em.length>0){const e=`Missing Supabase environment variable${Em.length>1?"s":""}: ${Em.join(", ")}. Copy .env.example to .env and provide your Supabase project credentials.`;throw new Error(e)}const Y=x3(wC,_C);async function f_(e){const{data:t}=await Y.from("user_settings").select("global_role, workspace_id").eq("user_id",e).maybeSingle(),{data:r}=await Y.from("user_teams").select("team_id, role").eq("user_id",e).maybeSingle();return t?{userId:e,globalRole:t.global_role,teamId:(r==null?void 0:r.team_id)||null,teamRole:(r==null?void 0:r.role)||null,workspaceId:t.workspace_id||null,isActive:t.is_active??!0}:null}async function Sn(e){const{data:t,error:r}=await Y.rpc("get_accessible_agents");if(!r&&t){const n=t.map(a=>a.user_id);if(n.length)return n}if(e.globalRole==="admin"||e.globalRole==="sales_manager"){const{data:n}=await Y.from("user_settings").select("user_id"),a=n==null?void 0:n.map(i=>i.user_id).filter(Boolean);if(a&&a.length)return a}return[e.userId]}function jC(e){return(e==null?void 0:e.globalRole)==="admin"}function w3(e){return(e==null?void 0:e.teamRole)==="team_lead"||(e==null?void 0:e.globalRole)==="team_lead"}function _3(e){return(e==null?void 0:e.globalRole)==="sales_manager"||(e==null?void 0:e.globalRole)==="admin"}function h_(e){return!!e&&e.globalRole==="admin"}function Ci(e){if(!e)return"";switch(e){case"admin":return"Admin";case"sales_manager":return"Sales Manager";case"team_lead":return"Team Lead";case"agent":return"Agent";default:return""}}function SC(e){return e?["admin","sales_manager","team_lead"].includes(e.globalRole):!1}function j3(e){return(e==null?void 0:e.globalRole)==="admin"}function NC(e){return(e==null?void 0:e.globalRole)==="admin"}const kC=p.createContext(void 0);function S3({children:e}){const[t,r]=p.useState(null),[n,a]=p.useState(null),[i,s]=p.useState(!0);p.useEffect(()=>{Y.auth.getSession().then(async({data:{session:f}})=>{if(r((f==null?void 0:f.user)??null),f!=null&&f.user){const h=await f_(f.user.id);a(h)}s(!1)});const{data:{subscription:d}}=Y.auth.onAuthStateChange((f,h)=>{(async()=>{if(r((h==null?void 0:h.user)??null),h!=null&&h.user){const m=await f_(h.user.id);a(m)}else a(null)})()});return()=>d.unsubscribe()},[]);const o=async(d,f,h,m)=>{if(!m)return{error:{message:"An invite code is required to create an account"}};const{data:g,error:y}=await Y.auth.signUp({email:d,password:f,options:{data:{name:h}}});if(y||!g.user)return{error:y};const{error:v}=await Y.rpc("accept_workspace_invite",{invite_token:m});return v?{error:{message:v.message}}:{error:null}},c=async(d,f)=>{const{error:h}=await Y.auth.signInWithPassword({email:d,password:f});return{error:h}},u=async()=>{await Y.auth.signOut()};return l.jsx(kC.Provider,{value:{user:t,roleInfo:n,loading:i,signUp:o,signIn:c,signOut:u},children:e})}function kt(){const e=p.useContext(kC);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var N3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ve=(e,t)=>{const r=p.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:o="",children:c,...u},d)=>p.createElement("svg",{ref:d,...N3,width:a,height:a,stroke:n,strokeWidth:s?Number(i)*24/Number(a):i,className:["lucide",`lucide-${k3(e)}`,o].join(" "),...u},[...t.map(([f,h])=>p.createElement(f,h)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=ve("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=ve("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=ve("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=ve("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=ve("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=ve("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=ve("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=ve("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=ve("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=ve("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=ve("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=ve("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=ve("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=ve("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=ve("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=ve("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=ve("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=ve("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=ve("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=ve("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=ve("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=ve("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=ve("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=ve("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=ve("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=ve("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=ve("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=ve("MailPlus",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M16 19h6",key:"xwg31i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=ve("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=ve("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=ve("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=ve("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=ve("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=ve("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=ve("PlugZap",[["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m18 3-4 4h6l-4 4",key:"16psg9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=ve("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=ve("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=ve("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=ve("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=ve("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=ve("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=ve("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=ve("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=ve("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=ve("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=ve("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=ve("Trello",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["rect",{width:"3",height:"9",x:"7",y:"7",key:"14n3xi"}],["rect",{width:"3",height:"5",x:"14",y:"7",key:"s4azjd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=ve("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function tL(){const{user:e,roleInfo:t}=kt(),r=Xo(),[n,a]=p.useState(!1),[i,s]=p.useState(""),[o,c]=p.useState([]),[u,d]=p.useState(!1),[f,h]=p.useState(!1),m=p.useRef(null),[g,y]=p.useState([]),[v,x]=p.useState(!1),[w,b]=p.useState(!1),[_,j]=p.useState({}),[S,N]=p.useState([]),[k,E]=p.useState(new Date(0)),[P,A]=p.useState(new Date(0)),[D,H]=p.useState([]),Q=p.useCallback(async()=>{let O=Y.from("activity_events").select("id, event_type, actor_id, target_user_id, deal_id, task_id, payload, created_at").order("created_at",{ascending:!1}).limit(10);if(S.length>0){const $=S.join(",");O=O.or(`target_user_id.in.(${$}),actor_id.in.(${$})`)}const{data:q,error:te}=await O;if(!te&&q){const $=q.map(G=>({id:G.id,eventType:G.event_type,actorId:G.actor_id,targetUserId:G.target_user_id,dealId:G.deal_id,taskId:G.task_id,payload:G.payload||{},timestamp:new Date(G.created_at)})).filter(G=>G.timestamp.getTime()>P.getTime());y($),$.some(G=>G.timestamp.getTime()>k.getTime())&&b(!0)}},[S,k,P]);p.useEffect(()=>{(async()=>{if(!t)return;const q=await Sn(t);H(q.length?q:e?[e.id]:[])})()},[t,e]),p.useEffect(()=>{const O=q=>{m.current&&!m.current.contains(q.target)&&d(!1),q.target.closest("#notification-popover")||x(!1)};return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[]),p.useEffect(()=>{const q=setTimeout(async()=>{if(!i.trim()||i.length<2){c([]),d(!1);return}h(!0),d(!0);try{let te=Y.from("deals").select("id, client_name, property_address, client_email, client_phone, status, expected_sale_price, user_id").or(`client_name.ilike.%${i}%,property_address.ilike.%${i}%,client_email.ilike.%${i}%,client_phone.ilike.%${i}%`).limit(8);D.length===1?te=te.eq("user_id",D[0]):D.length>1?te=te.in("user_id",D):e!=null&&e.id&&(te=te.eq("user_id",e.id));const{data:$,error:G}=await te;if(G)throw G;c($||[])}catch(te){console.error("Search error:",te),c([])}finally{h(!1)}},300);return()=>clearTimeout(q)},[i,e==null?void 0:e.id,D]),p.useEffect(()=>{(async()=>{try{const{data:q,error:te}=await Y.rpc("get_accessible_agents");if(!te&&q){const $={};q.forEach(G=>{$[G.user_id]=G.display_name||G.email||"Agent"}),j($)}}catch(q){console.error("Error loading agents for notifications",q)}})()},[]),p.useEffect(()=>{if(!t||t.globalRole!=="sales_manager"&&t.globalRole!=="team_lead"&&t.globalRole!=="admin")return;let O=null;return(async()=>{const te=await Sn(t);N(te),await Q(),O=Y.channel("activity-events"),O.on("postgres_changes",{event:"*",schema:"public",table:"activity_events"},$=>{const G=$.new;G&&(te.length&&!te.includes(G.target_user_id)&&!te.includes(G.actor_id)||new Date(G.created_at).getTime()<=P.getTime()||(y(T=>[{id:G.id,eventType:G.event_type,actorId:G.actor_id,targetUserId:G.target_user_id,dealId:G.deal_id,taskId:G.task_id,payload:G.payload||{},timestamp:new Date(G.created_at)},...T].slice(0,10)),b(!0)))}).subscribe()})(),()=>{O&&Y.removeChannel(O)}},[t,Q]);const ee=O=>{s(""),d(!1),r(`/pipeline?dealId=${O}`)},B=()=>{s(""),c([]),d(!1)},W=async()=>{await Y.auth.signOut(),r("/login")},I=()=>{r("/pipeline?newDeal=true")},M=Ci(t==null?void 0:t.globalRole),L=Date.now(),oe=g.some(O=>L-O.timestamp.getTime()<=60*60*1e3&&O.timestamp.getTime()>k.getTime());p.useEffect(()=>{g.some(O=>O.timestamp.getTime()>k.getTime())&&b(!0)},[g,k]),p.useEffect(()=>{if(!t||t.globalRole!=="sales_manager"&&t.globalRole!=="team_lead"&&t.globalRole!=="admin")return;const O=setInterval(()=>{Q()},45e3);return()=>clearInterval(O)},[t,Q]);const re=O=>O?O==="dead"?"Archived":O==="closed"?"Closed Won":O.replace(/_/g," "):"",Ne=O=>{var te,$,G,T,K,Z,F,ye,le,De;const q=_[O.actorId]||"An agent";switch(O.eventType){case"deal_status_change":{const Ae=(($=(te=O.payload)==null?void 0:te.from_status)==null?void 0:$.replace(/_/g," "))||"previous stage",qe=((T=(G=O.payload)==null?void 0:G.to_status)==null?void 0:T.replace(/_/g," "))||"new stage",Le=((K=O.payload)==null?void 0:K.client_name)||"a client",fr=((Z=O.payload)==null?void 0:Z.property_address)||"deal";return`${q} moved the ${Le}  ${fr} deal from ${Ae} to ${qe}.`}case"deal_deleted":{const Ae=((F=O.payload)==null?void 0:F.client_name)||"a client",qe=((ye=O.payload)==null?void 0:ye.property_address)||"deal";return`${q} deleted the ${Ae}  ${qe} deal.`}case"task_created":{const Ae=((le=O.payload)==null?void 0:le.title)||"a task",qe=(De=O.payload)!=null&&De.due_date?` with a due date of ${new Date(O.payload.due_date).toLocaleDateString()}`:"";return`${q} created a new task "${Ae}"${qe}.`}default:return`${q} made an update.`}};return l.jsx("header",{className:"sticky top-0 z-50 border-b border-white/30 bg-white/75 backdrop-blur-2xl shadow-[0_12px_30px_rgba(15,23,42,0.08)]",children:l.jsxs("div",{className:"mx-auto flex h-16 w-full items-center gap-4 px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:()=>r("/"),className:"flex items-center gap-2 rounded-2xl border border-white/40 bg-white/80 px-3 py-2 text-sm font-semibold text-gray-900 shadow-[0_2px_8px_rgba(15,23,42,0.08)]",children:l.jsx("img",{src:"/PipelineIQ.png",alt:"PipelineIQ",className:"h-8 w-auto"})}),l.jsx("div",{className:"hidden lg:flex w-96",ref:m,children:l.jsxs("div",{className:"relative w-full",children:[l.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-3 flex items-center",children:l.jsx(E0,{className:"h-4 w-4 text-gray-400"})}),l.jsx("input",{type:"text",value:i,onChange:O=>s(O.target.value),placeholder:"Search deals, people, addresses...",className:"w-full rounded-2xl border border-white/60 bg-white/90 py-2 pl-10 pr-10 text-sm text-gray-900 shadow-inner focus:border-[var(--app-accent)]/40 focus:ring-2 focus:ring-[var(--app-accent)]/15"}),i&&l.jsx("button",{onClick:B,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l.jsx(Ss,{className:"h-4 w-4"})}),u&&l.jsx("div",{className:"absolute top-full left-0 right-0 z-50 mt-3 rounded-2xl border border-white/70 bg-white/95 shadow-[0_15px_40px_rgba(15,23,42,0.16)]",children:f?l.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"Searching"}):o.length>0?o.map(O=>l.jsxs("button",{onClick:()=>ee(O.id),className:"flex w-full items-start justify-between px-4 py-3 text-left hover:bg-gray-50",children:[l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("p",{className:"truncate text-sm font-medium text-gray-900",children:O.client_name}),l.jsx("p",{className:"truncate text-xs text-gray-500",children:O.property_address}),(O.client_email||O.client_phone)&&l.jsx("p",{className:"truncate text-xs text-gray-400",children:O.client_email||O.client_phone})]}),l.jsxs("div",{className:"ml-3 flex flex-col items-end gap-1",children:[l.jsx("span",{className:"rounded-full bg-blue-50 px-2 py-0.5 text-xs font-medium text-blue-700",children:re(O.status)}),l.jsxs("span",{className:"text-xs text-gray-500",children:["$",O.expected_sale_price.toLocaleString()]})]})]},O.id)):l.jsxs("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:["No deals found matching ",i,"."]})})]})})]}),l.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[l.jsxs("button",{onClick:I,className:"hidden sm:inline-flex items-center gap-2 rounded-2xl border border-white/40 bg-white/80 px-3 py-2 text-sm font-medium text-gray-700 shadow-[0_2px_8px_rgba(15,23,42,0.08)] transition hover:border-[var(--app-accent)]/40 hover:text-[var(--app-accent)]",children:[l.jsx(Ma,{className:"h-4 w-4"}),"New deal"]}),((t==null?void 0:t.globalRole)==="sales_manager"||(t==null?void 0:t.globalRole)==="team_lead"||(t==null?void 0:t.globalRole)==="admin")&&l.jsxs("div",{className:"relative",id:"notification-popover",children:[l.jsxs("button",{onClick:()=>{v||Q(),x(O=>!O),b(!1),E(new Date)},className:"relative inline-flex items-center gap-2 rounded-2xl border border-white/50 bg-white/80 px-2.5 py-1.5 shadow-[0_2px_8px_rgba(15,23,42,0.08)] transition hover:border-[var(--app-accent)]/30",children:[l.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-gray-100 text-gray-700",children:l.jsx(PC,{className:"h-4 w-4"})}),l.jsxs("div",{className:"hidden text-left sm:block",children:[l.jsx("p",{className:"text-xs font-semibold text-gray-900",children:"Notifications"}),l.jsx("p",{className:"text-[11px] text-gray-500",children:"Team activity"})]}),w&&l.jsx("span",{className:"absolute -right-0.5 -top-0.5 h-2.5 w-2.5 rounded-full bg-[rgb(0,122,255)] shadow-[0_0_0_4px_rgba(0,122,255,0.14)]"}),!w&&oe&&l.jsx("span",{className:"absolute -right-0.5 -top-0.5 h-2.5 w-2.5 rounded-full bg-gray-300 shadow-[0_0_0_4px_rgba(148,163,184,0.25)]"})]}),v&&l.jsxs("div",{className:"absolute right-0 mt-3 w-96 max-w-[90vw] rounded-2xl border border-white/70 bg-white/95 p-3 shadow-[0_20px_60px_rgba(15,23,42,0.16)]",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Recent activity"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Latest 10 actions"})]}),l.jsx("button",{onClick:()=>{const O=new Date;y([]),b(!1),E(O),A(O)},className:"text-[11px] font-semibold text-[var(--app-accent)] hover:underline",children:"Clear"})]}),l.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2",children:g.length===0?l.jsx("div",{className:"rounded-xl border border-dashed border-gray-200 bg-gray-50/80 px-3 py-2 text-sm text-gray-500",children:"Nothing yet  team updates will appear here."}):g.map(O=>l.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white/90 px-3 py-2 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-900",children:Ne(O)}),l.jsxs("div",{className:"mt-1 flex items-center gap-1 text-[11px] text-gray-500",children:[l.jsx(hs,{className:"h-3.5 w-3.5"}),l.jsx("span",{children:O.timestamp.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})})]})]},O.id))})]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>a(O=>!O),className:"flex items-center gap-2 rounded-2xl border border-white/50 bg-white/80 px-2.5 py-1.5 shadow-[0_2px_8px_rgba(15,23,42,0.08)] transition hover:border-[var(--app-accent)]/30",children:[l.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-[var(--app-accent)] text-white",children:l.jsx(jc,{className:"h-4 w-4"})}),l.jsxs("div",{className:"hidden text-left sm:block",children:[l.jsx("p",{className:"text-xs font-semibold text-gray-900",children:e==null?void 0:e.email}),l.jsx("p",{className:"text-[11px] text-gray-500",children:M})]})]}),n&&l.jsxs("div",{className:"absolute right-0 mt-3 w-64 rounded-2xl border border-white/70 bg-white/95 shadow-[0_25px_60px_rgba(15,23,42,0.16)]",children:[l.jsxs("div",{className:"border-b border-gray-100 px-4 py-3 space-y-1",children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e==null?void 0:e.email}),l.jsxs("p",{className:"text-xs font-medium text-gray-500 flex items-center gap-2",children:[l.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-[10px] uppercase tracking-wide text-gray-600",children:M}),"Signed in"]})]}),l.jsxs("button",{onClick:()=>{a(!1),r("/settings")},className:"flex w-full items-center gap-3 px-4 py-2 text-sm text-gray-700 transition hover:bg-gray-50",children:[l.jsx(kh,{className:"h-4 w-4"}),l.jsx("span",{children:"Personal Settings"})]}),l.jsxs("button",{onClick:W,className:"flex w-full items-center gap-3 px-4 py-2 text-sm text-red-600 transition hover:bg-red-50",children:[l.jsx(U3,{className:"h-4 w-4"}),l.jsx("span",{children:"Sign out"})]})]})]})]})]})})}const rL=[{icon:$3,label:"Dashboard",path:"/"},{icon:Z3,label:"Pipeline",path:"/pipeline"},{icon:mv,label:"Tasks",path:"/tasks"},{icon:O3,label:"Analytics",path:"/analytics"}],nL=[{icon:js,label:"Luma AI",path:"/luma"}],aL=[{icon:kh,label:"Settings",path:"/workspace-settings"}];function iL({isCollapsed:e,onToggle:t}){const r=pa(),n=Xo(),a=(i,s)=>l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:`flex items-center gap-3 px-2 ${e?"justify-center":"justify-start"}`,children:[l.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-[var(--app-accent)]","aria-hidden":!0}),!e&&l.jsx("span",{className:"text-[12px] font-semibold uppercase tracking-[0.28em] text-gray-500",children:i})]}),l.jsx("div",{className:"space-y-1",children:s.map(o=>{const c=o.icon,u=r.pathname===o.path,d=e?"justify-center px-2":"gap-3 px-4 text-left";return l.jsxs("button",{onClick:()=>n(o.path),"aria-label":o.label,title:o.label,className:`group flex w-full items-center rounded-2xl border border-transparent py-3 text-[15px] font-semibold transition-all duration-200 ${d} ${u?"bg-[rgba(10,132,255,0.12)] text-[var(--app-accent)] shadow-[inset_0_0_0_1px_rgba(10,132,255,0.2)] border-[rgba(10,132,255,0.2)]":"text-gray-600 hover:-translate-y-[1px] hover:border-[rgba(10,132,255,0.25)] hover:bg-[rgba(10,132,255,0.06)] hover:text-[var(--app-accent)] hover:shadow-[0_12px_30px_rgba(15,23,42,0.08)]"} focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[rgba(10,132,255,0.35)]`,children:[l.jsx("span",{className:`flex h-10 w-10 items-center justify-center rounded-2xl border ${u?"border-[rgba(10,132,255,0.3)] bg-white/80 text-[var(--app-accent)]":"border-white/60 bg-white/90 text-gray-700 group-hover:border-[rgba(10,132,255,0.25)] group-hover:bg-white group-hover:text-[var(--app-accent)]"}`,children:l.jsx(c,{className:"h-[18px] w-[18px]",strokeWidth:2})}),!e&&l.jsx("span",{className:"whitespace-nowrap",children:o.label})]},o.path)})})]});return l.jsx("nav",{className:`sticky top-24 rounded-[var(--app-radius)] border border-[var(--app-border)] bg-white/80 shadow-[0_15px_40px_rgba(15,23,42,0.12)] transition-all duration-300 ${e?"p-3":"p-4"}`,children:l.jsxs("div",{className:"space-y-6",children:[a("Primary",rL),a("Intelligence",nL),l.jsx("div",{className:`pt-4 ${e?"":"border-t border-[var(--app-border)]"}`,children:a("Workspace",aL)}),l.jsx("div",{className:`pt-4 ${e?"":"border-t border-[var(--app-border)]"}`,children:l.jsxs("button",{type:"button",onClick:t,"aria-pressed":!e,"aria-expanded":!e,"aria-label":e?"Expand sidebar":"Collapse sidebar",className:`group flex w-full items-center rounded-2xl py-3 text-[15px] font-semibold transition ${e?"justify-center px-2":"gap-3 px-4 text-left"} text-gray-700 hover:bg-white/70 hover:text-[var(--app-accent)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[var(--app-accent)]`,children:[l.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-2xl border border-white/70 bg-white/95 shadow-[inset_0_0_0_1px_rgba(255,255,255,0.5)] transition-colors group-hover:border-[rgba(10,132,255,0.3)] group-hover:text-[var(--app-accent)]",children:e?l.jsx(OC,{className:"h-5 w-5 transition group-hover:text-[var(--app-accent)]"}):l.jsx(T3,{className:"h-5 w-5 transition group-hover:text-[var(--app-accent)]"})}),!e&&l.jsx("span",{className:"whitespace-nowrap",children:"Hide"})]})})]})})}function sL({children:e}){const[t,r]=p.useState(!1);return l.jsxs("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_var(--app-bg-start),_var(--app-bg-mid)_45%,_var(--app-bg-end))] text-[var(--app-text-primary)] overflow-x-hidden",children:[l.jsx(tL,{}),l.jsxs("div",{className:"relative mx-auto flex w-full flex-col gap-6 px-4 pb-10 pt-6 lg:flex-row lg:px-8",children:[l.jsx("div",{className:`transition-[width] duration-300 ease-in-out w-full lg:flex-shrink-0 ${t?"lg:w-20":"lg:w-64"}`,children:l.jsx(iL,{isCollapsed:t,onToggle:()=>r(n=>!n)})}),l.jsx("main",{className:"flex-1 overflow-x-hidden transition-[margin] duration-300 ease-in-out",children:l.jsx("div",{className:"min-h-[calc(100vh-10rem)] rounded-[var(--app-radius)] border border-[var(--app-border)] bg-white/85 p-4 shadow-[0_10px_50px_rgba(15,23,42,0.08)] sm:p-6 lg:p-8",children:e})})]})]})}function oL({onToggle:e}){const[t,r]=p.useState(""),[n,a]=p.useState(""),[i,s]=p.useState(!1),[o,c]=p.useState(""),u=async d=>{d.preventDefault(),s(!0),c("");const{error:f}=await Y.auth.signInWithPassword({email:t,password:n});f&&c(f.message),s(!1)};return l.jsxs("div",{className:"min-h-screen bg-[rgb(var(--color-app-bg))] flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[l.jsx("div",{className:"flex justify-center mb-8",children:l.jsx("img",{src:"/PipelineIQ.png",alt:"PipelineIQ",className:"h-16"})}),l.jsx("h2",{className:"text-center text-2xl font-semibold text-gray-900 mb-2",children:"Sign in to PipelineIQ"}),l.jsx("p",{className:"text-center hig-text-caption",children:"Welcome back! Please sign in to continue."})]}),l.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:l.jsxs("div",{className:"hig-card p-8",children:[l.jsxs("form",{onSubmit:u,className:"space-y-5",children:[o&&l.jsx("div",{className:"bg-red-50 border border-red-200/60 text-red-700 px-4 py-3 rounded-xl text-sm",children:o}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"hig-label",children:"Email address"}),l.jsx("input",{id:"email",type:"email",required:!0,value:t,onChange:d=>r(d.target.value),className:"hig-input",placeholder:"you@example.com"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"hig-label",children:"Password"}),l.jsx("input",{id:"password",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"hig-input",placeholder:"Enter your password"})]}),l.jsx("button",{type:"submit",disabled:i,className:"hig-btn-primary w-full",children:i?"Signing in...":"Sign in"})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-200/60"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-2 bg-white text-gray-500",children:"New to PipelineIQ?"})})]}),l.jsx("div",{className:"mt-6",children:l.jsx("button",{onClick:e,className:"hig-btn-secondary w-full",children:"Create an account"})})]})]})})]})}function WC({onToggle:e,presetToken:t}){const{signUp:r}=kt(),[n]=g2(),[a,i]=p.useState(""),[s,o]=p.useState(t||n.get("invite")||""),[c,u]=p.useState(null),[d,f]=p.useState(""),[h,m]=p.useState(""),[g,y]=p.useState(""),[v,x]=p.useState(""),[w,b]=p.useState(!1),[_,j]=p.useState(!1);p.useEffect(()=>{t&&t!==s&&o(t)},[t]);const S=c&&!_&&!w,N=async P=>{if(!P){u(null),f(""),m("");return}j(!0),f(""),u(null),x("");const{data:A,error:D}=await Y.rpc("get_invite_preview",{invite_token:P});if(D){f("Unable to validate invite. Please check the code or contact your admin."),j(!1);return}const H=Array.isArray(A)?A[0]:A;if(!H){f("No invitation found for this code."),j(!1);return}if(H.status!=="pending"){f("This invitation has already been used or canceled."),j(!1);return}if(new Date(H.expires_at).getTime()<Date.now()){f("This invitation has expired. Please ask your admin to resend."),j(!1);return}u(H),m(H.email),f(""),j(!1)};p.useEffect(()=>{const P=setTimeout(()=>{s&&s.length>=6?N(s.trim()):(u(null),m(""))},300);return()=>clearTimeout(P)},[s]);const k=async P=>{if(P.preventDefault(),x(""),b(!0),!c||!s){x("A valid invite code is required to join the workspace."),b(!1);return}if(g.length<6){x("Password must be at least 6 characters"),b(!1);return}const{error:A}=await r(h,g,a,s.trim());A&&x(A.message),b(!1)},E=p.useMemo(()=>c?c.workspace_name||"Workspace":"",[c]);return l.jsxs("div",{className:"min-h-screen bg-[rgb(var(--color-app-bg))] flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[l.jsx("div",{className:"flex justify-center mb-8",children:l.jsx("img",{src:"/PipelineIQ.png",alt:"PipelineIQ",className:"h-16"})}),l.jsx("h2",{className:"text-center text-2xl font-semibold text-gray-900 mb-2",children:"Accept your invitation"}),l.jsx("p",{className:"text-center hig-text-caption",children:"PipelineIQ access is invite-only. Paste the invite code from your email to continue."})]}),l.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:l.jsxs("div",{className:"hig-card p-8",children:[l.jsxs("form",{onSubmit:k,className:"space-y-5",children:[v&&l.jsx("div",{className:"bg-red-50 border border-red-200/60 text-red-700 px-4 py-3 rounded-xl text-sm",children:v}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"invite",className:"hig-label flex items-center justify-between",children:["Invitation code",t&&l.jsx("span",{className:"text-[11px] text-gray-500",children:"Autofilled from your link"})]}),l.jsx("input",{id:"invite",type:"text",required:!0,value:s,onChange:P=>o(P.target.value),className:"hig-input uppercase tracking-[0.3em]",placeholder:"Paste your invite code"}),d&&l.jsx("p",{className:"text-xs text-red-600 mt-1",children:d})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Email"}),l.jsx("input",{type:"email",value:h,readOnly:!0,className:"hig-input bg-gray-50 text-gray-600",placeholder:"Invite required"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Role"}),l.jsx("input",{type:"text",value:c?Ci(c.intended_role):"",readOnly:!0,className:"hig-input bg-gray-50 text-gray-600",placeholder:"Invite required"})]})]}),c&&l.jsxs("div",{className:"rounded-2xl border border-gray-200/70 bg-gray-50/70 px-4 py-3 text-sm text-gray-600",children:["Joining ",l.jsx("span",{className:"font-semibold text-gray-900",children:E})," as"," ",l.jsx("span",{className:"font-semibold text-gray-900",children:Ci(c.intended_role)})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"hig-label",children:"Full name"}),l.jsx("input",{id:"name",type:"text",required:!0,value:a,onChange:P=>i(P.target.value),className:"hig-input",placeholder:"John Doe",disabled:!c})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"hig-label",children:"Password"}),l.jsx("input",{id:"password",type:"password",required:!0,value:g,onChange:P=>y(P.target.value),className:"hig-input",placeholder:"At least 6 characters",disabled:!c})]}),l.jsx("button",{type:"submit",disabled:!S,className:"hig-btn-primary w-full",children:w?"Creating account...":"Join workspace"})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-200/60"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Already have an account?"})})]}),l.jsxs("div",{className:"mt-6",children:[l.jsx("button",{onClick:e,className:"hig-btn-secondary w-full",children:"Back to sign in"}),l.jsx("p",{className:"mt-3 text-center text-xs text-gray-500",children:"Dont have an invite? Contact an admin in your workspace."})]})]})]})})]})}function lL(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return p.useMemo(()=>n=>{t.forEach(a=>a(n))},t)}const Ch=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function el(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function P0(e){return"nodeType"in e}function Ar(e){var t,r;return e?el(e)?e:P0(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function O0(e){const{Document:t}=Ar(e);return e instanceof t}function Gc(e){return el(e)?!1:e instanceof Ar(e).HTMLElement}function KC(e){return e instanceof Ar(e).SVGElement}function tl(e){return e?el(e)?e.document:P0(e)?O0(e)?e:Gc(e)||KC(e)?e.ownerDocument:document:document:document}const qn=Ch?p.useLayoutEffect:p.useEffect;function Eh(e){const t=p.useRef(e);return qn(()=>{t.current=e}),p.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t.current==null?void 0:t.current(...n)},[])}function cL(){const e=p.useRef(null),t=p.useCallback((n,a)=>{e.current=setInterval(n,a)},[]),r=p.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function Sc(e,t){t===void 0&&(t=[e]);const r=p.useRef(e);return qn(()=>{r.current!==e&&(r.current=e)},t),r}function Yc(e,t){const r=p.useRef();return p.useMemo(()=>{const n=e(r.current);return r.current=n,n},[...t])}function cf(e){const t=Eh(e),r=p.useRef(null),n=p.useCallback(a=>{a!==r.current&&(t==null||t(a,r.current)),r.current=a},[]);return[r,n]}function uf(e){const t=p.useRef();return p.useEffect(()=>{t.current=e},[e]),t.current}let Om={};function Xc(e,t){return p.useMemo(()=>{if(t)return t;const r=Om[e]==null?0:Om[e]+1;return Om[e]=r,e+"-"+r},[e,t])}function HC(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((i,s)=>{const o=Object.entries(s);for(const[c,u]of o){const d=i[c];d!=null&&(i[c]=d+e*u)}return i},{...t})}}const So=HC(1),df=HC(-1);function uL(e){return"clientX"in e&&"clientY"in e}function Ph(e){if(!e)return!1;const{KeyboardEvent:t}=Ar(e.target);return t&&e instanceof t}function dL(e){if(!e)return!1;const{TouchEvent:t}=Ar(e.target);return t&&e instanceof t}function ff(e){if(dL(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return uL(e)?{x:e.clientX,y:e.clientY}:null}const Vn=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Vn.Translate.toString(e),Vn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),m_="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function fL(e){return e.matches(m_)?e:e.querySelector(m_)}const hL={display:"none"};function pL(e){let{id:t,value:r}=e;return lt.createElement("div",{id:t,style:hL},r)}function mL(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return lt.createElement("div",{id:t,style:a,role:"status","aria-live":n,"aria-atomic":!0},r)}function gL(){const[e,t]=p.useState("");return{announce:p.useCallback(n=>{n!=null&&t(n)},[]),announcement:e}}const qC=p.createContext(null);function vL(e){const t=p.useContext(qC);p.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function yL(){const[e]=p.useState(()=>new Set),t=p.useCallback(n=>(e.add(n),()=>e.delete(n)),[e]);return[p.useCallback(n=>{let{type:a,event:i}=n;e.forEach(s=>{var o;return(o=s[a])==null?void 0:o.call(s,i)})},[e]),t]}const xL={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},bL={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function wL(e){let{announcements:t=bL,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=xL}=e;const{announce:i,announcement:s}=gL(),o=Xc("DndLiveRegion"),[c,u]=p.useState(!1);if(p.useEffect(()=>{u(!0)},[]),vL(p.useMemo(()=>({onDragStart(f){let{active:h}=f;i(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:m}=f;t.onDragMove&&i(t.onDragMove({active:h,over:m}))},onDragOver(f){let{active:h,over:m}=f;i(t.onDragOver({active:h,over:m}))},onDragEnd(f){let{active:h,over:m}=f;i(t.onDragEnd({active:h,over:m}))},onDragCancel(f){let{active:h,over:m}=f;i(t.onDragCancel({active:h,over:m}))}}),[i,t])),!c)return null;const d=lt.createElement(lt.Fragment,null,lt.createElement(pL,{id:n,value:a.draggable}),lt.createElement(mL,{id:o,announcement:s}));return r?mi.createPortal(d,r):d}var zt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(zt||(zt={}));function hf(){}function Oh(e,t){return p.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Ah(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return p.useMemo(()=>[...t].filter(n=>n!=null),[...t])}const Gn=Object.freeze({x:0,y:0});function VC(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function _L(e,t){const r=ff(e);if(!r)return"0 0";const n={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return n.x+"% "+n.y+"%"}function GC(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function jL(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function SL(e){let{left:t,top:r,height:n,width:a}=e;return[{x:t,y:r},{x:t+a,y:r},{x:t,y:r+n},{x:t+a,y:r+n}]}function NL(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function g_(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const A0=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=g_(t,t.left,t.top),i=[];for(const s of n){const{id:o}=s,c=r.get(o);if(c){const u=VC(g_(c),a);i.push({id:o,data:{droppableContainer:s,value:u}})}}return i.sort(GC)};function kL(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),s=a-n,o=i-r;if(n<a&&r<i){const c=t.width*t.height,u=e.width*e.height,d=s*o,f=d/(c+u-d);return Number(f.toFixed(4))}return 0}const CL=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=[];for(const i of n){const{id:s}=i,o=r.get(s);if(o){const c=kL(o,t);c>0&&a.push({id:s,data:{droppableContainer:i,value:c}})}}return a.sort(jL)};function EL(e,t){const{top:r,left:n,bottom:a,right:i}=t;return r<=e.y&&e.y<=a&&n<=e.x&&e.x<=i}const PL=e=>{let{droppableContainers:t,droppableRects:r,pointerCoordinates:n}=e;if(!n)return[];const a=[];for(const i of t){const{id:s}=i,o=r.get(s);if(o&&EL(n,o)){const u=SL(o).reduce((f,h)=>f+VC(n,h),0),d=Number((u/4).toFixed(4));a.push({id:s,data:{droppableContainer:i,value:d}})}}return a.sort(GC)};function OL(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function YC(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Gn}function AL(e){return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((s,o)=>({...s,top:s.top+e*o.y,bottom:s.bottom+e*o.y,left:s.left+e*o.x,right:s.right+e*o.x}),{...r})}}const TL=AL(1);function XC(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function DL(e,t,r){const n=XC(t);if(!n)return e;const{scaleX:a,scaleY:i,x:s,y:o}=n,c=e.left-s-(1-a)*parseFloat(r),u=e.top-o-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),d=a?e.width/a:e.width,f=i?e.height/i:e.height;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c}}const IL={ignoreTransform:!1};function rl(e,t){t===void 0&&(t=IL);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=Ar(e).getComputedStyle(e);u&&(r=DL(r,u,d))}const{top:n,left:a,width:i,height:s,bottom:o,right:c}=r;return{top:n,left:a,width:i,height:s,bottom:o,right:c}}function v_(e){return rl(e,{ignoreTransform:!0})}function RL(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function ML(e,t){return t===void 0&&(t=Ar(e).getComputedStyle(e)),t.position==="fixed"}function $L(e,t){t===void 0&&(t=Ar(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?r.test(i):!1})}function T0(e,t){const r=[];function n(a){if(t!=null&&r.length>=t||!a)return r;if(O0(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!Gc(a)||KC(a)||r.includes(a))return r;const i=Ar(e).getComputedStyle(a);return a!==e&&$L(a,i)&&r.push(a),ML(a,i)?r:n(a.parentNode)}return e?n(e):r}function JC(e){const[t]=T0(e,1);return t??null}function Am(e){return!Ch||!e?null:el(e)?e:P0(e)?O0(e)||e===tl(e).scrollingElement?window:Gc(e)?e:null:null}function QC(e){return el(e)?e.scrollX:e.scrollLeft}function ZC(e){return el(e)?e.scrollY:e.scrollTop}function vv(e){return{x:QC(e),y:ZC(e)}}var Qt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Qt||(Qt={}));function eE(e){return!Ch||!e?!1:e===document.scrollingElement}function tE(e){const t={x:0,y:0},r=eE(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,s=e.scrollTop>=n.y,o=e.scrollLeft>=n.x;return{isTop:a,isLeft:i,isBottom:s,isRight:o,maxScroll:n,minScroll:t}}const LL={x:.2,y:.2};function FL(e,t,r,n,a){let{top:i,left:s,right:o,bottom:c}=r;n===void 0&&(n=10),a===void 0&&(a=LL);const{isTop:u,isBottom:d,isLeft:f,isRight:h}=tE(e),m={x:0,y:0},g={x:0,y:0},y={height:t.height*a.y,width:t.width*a.x};return!u&&i<=t.top+y.height?(m.y=Qt.Backward,g.y=n*Math.abs((t.top+y.height-i)/y.height)):!d&&c>=t.bottom-y.height&&(m.y=Qt.Forward,g.y=n*Math.abs((t.bottom-y.height-c)/y.height)),!h&&o>=t.right-y.width?(m.x=Qt.Forward,g.x=n*Math.abs((t.right-y.width-o)/y.width)):!f&&s<=t.left+y.width&&(m.x=Qt.Backward,g.x=n*Math.abs((t.left+y.width-s)/y.width)),{direction:m,speed:g}}function BL(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}const{top:t,left:r,right:n,bottom:a}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:a,width:e.clientWidth,height:e.clientHeight}}function rE(e){return e.reduce((t,r)=>So(t,vv(r)),Gn)}function UL(e){return e.reduce((t,r)=>t+QC(r),0)}function zL(e){return e.reduce((t,r)=>t+ZC(r),0)}function nE(e,t){if(t===void 0&&(t=rl),!e)return;const{top:r,left:n,bottom:a,right:i}=t(e);JC(e)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const WL=[["x",["left","right"],UL],["y",["top","bottom"],zL]];class D0{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=T0(r),a=rE(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,s,o]of WL)for(const c of s)Object.defineProperty(this,c,{get:()=>{const u=o(n),d=a[i]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Jl{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=t}add(t,r,n){var a;(a=this.target)==null||a.addEventListener(t,r,n),this.listeners.push([t,r,n])}}function KL(e){const{EventTarget:t}=Ar(e);return e instanceof t?e:tl(e)}function Tm(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t?n>t.y:!1}var yn;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(yn||(yn={}));function y_(e){e.preventDefault()}function HL(e){e.stopPropagation()}var Ke;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Ke||(Ke={}));const aE={start:[Ke.Space,Ke.Enter],cancel:[Ke.Esc],end:[Ke.Space,Ke.Enter,Ke.Tab]},qL=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case Ke.Right:return{...r,x:r.x+25};case Ke.Left:return{...r,x:r.x-25};case Ke.Down:return{...r,y:r.y+25};case Ke.Up:return{...r,y:r.y-25}}};class iE{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new Jl(tl(r)),this.windowListeners=new Jl(Ar(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(yn.Resize,this.handleCancel),this.windowListeners.add(yn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(yn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,n=t.node.current;n&&nE(n),r(Gn)}handleKeyDown(t){if(Ph(t)){const{active:r,context:n,options:a}=this.props,{keyboardCodes:i=aE,coordinateGetter:s=qL,scrollBehavior:o="smooth"}=a,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=n.current,d=u?{x:u.left,y:u.top}:Gn;this.referenceCoordinates||(this.referenceCoordinates=d);const f=s(t,{active:r,context:n.current,currentCoordinates:d});if(f){const h=df(f,d),m={x:0,y:0},{scrollableAncestors:g}=n.current;for(const y of g){const v=t.code,{isTop:x,isRight:w,isLeft:b,isBottom:_,maxScroll:j,minScroll:S}=tE(y),N=BL(y),k={x:Math.min(v===Ke.Right?N.right-N.width/2:N.right,Math.max(v===Ke.Right?N.left:N.left+N.width/2,f.x)),y:Math.min(v===Ke.Down?N.bottom-N.height/2:N.bottom,Math.max(v===Ke.Down?N.top:N.top+N.height/2,f.y))},E=v===Ke.Right&&!w||v===Ke.Left&&!b,P=v===Ke.Down&&!_||v===Ke.Up&&!x;if(E&&k.x!==f.x){const A=y.scrollLeft+h.x,D=v===Ke.Right&&A<=j.x||v===Ke.Left&&A>=S.x;if(D&&!h.y){y.scrollTo({left:A,behavior:o});return}D?m.x=y.scrollLeft-A:m.x=v===Ke.Right?y.scrollLeft-j.x:y.scrollLeft-S.x,m.x&&y.scrollBy({left:-m.x,behavior:o});break}else if(P&&k.y!==f.y){const A=y.scrollTop+h.y,D=v===Ke.Down&&A<=j.y||v===Ke.Up&&A>=S.y;if(D&&!h.x){y.scrollTo({top:A,behavior:o});return}D?m.y=y.scrollTop-A:m.y=v===Ke.Down?y.scrollTop-j.y:y.scrollTop-S.y,m.y&&y.scrollBy({top:-m.y,behavior:o});break}}this.handleMove(t,So(df(f,this.referenceCoordinates),m))}}}handleMove(t,r){const{onMove:n}=this.props;t.preventDefault(),n(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}iE.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=aE,onActivation:a}=t,{active:i}=r;const{code:s}=e.nativeEvent;if(n.start.includes(s)){const o=i.activatorNode.current;return o&&e.target!==o?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function x_(e){return!!(e&&"distance"in e)}function b_(e){return!!(e&&"delay"in e)}class I0{constructor(t,r,n){var a;n===void 0&&(n=KL(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:i}=t,{target:s}=i;this.props=t,this.events=r,this.document=tl(s),this.documentListeners=new Jl(this.document),this.listeners=new Jl(n),this.windowListeners=new Jl(Ar(s)),this.initialCoordinates=(a=ff(i))!=null?a:Gn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(yn.Resize,this.handleCancel),this.windowListeners.add(yn.DragStart,y_),this.windowListeners.add(yn.VisibilityChange,this.handleCancel),this.windowListeners.add(yn.ContextMenu,y_),this.documentListeners.add(yn.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(b_(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(x_(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:n,onPending:a}=this.props;a(n,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(yn.Click,HL,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(yn.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:n,initialCoordinates:a,props:i}=this,{onMove:s,options:{activationConstraint:o}}=i;if(!a)return;const c=(r=ff(t))!=null?r:Gn,u=df(a,c);if(!n&&o){if(x_(o)){if(o.tolerance!=null&&Tm(u,o.tolerance))return this.handleCancel();if(Tm(u,o.distance))return this.handleStart()}if(b_(o)&&Tm(u,o.tolerance))return this.handleCancel();this.handlePending(o,u);return}t.cancelable&&t.preventDefault(),s(c)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===Ke.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const VL={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class nl extends I0{constructor(t){const{event:r}=t,n=tl(r.target);super(t,VL,n)}}nl.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const GL={move:{name:"mousemove"},end:{name:"mouseup"}};var yv;(function(e){e[e.RightClick=2]="RightClick"})(yv||(yv={}));class YL extends I0{constructor(t){super(t,GL,tl(t.event.target))}}YL.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button===yv.RightClick?!1:(n==null||n({event:r}),!0)}}];const Dm={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class XL extends I0{constructor(t){super(t,Dm)}static setup(){return window.addEventListener(Dm.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Dm.move.name,t)};function t(){}}}XL.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:a}=r;return a.length>1?!1:(n==null||n({event:r}),!0)}}];var Ql;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ql||(Ql={}));var pf;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(pf||(pf={}));function JL(e){let{acceleration:t,activator:r=Ql.Pointer,canScroll:n,draggingRect:a,enabled:i,interval:s=5,order:o=pf.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:h}=e;const m=ZL({delta:f,disabled:!i}),[g,y]=cL(),v=p.useRef({x:0,y:0}),x=p.useRef({x:0,y:0}),w=p.useMemo(()=>{switch(r){case Ql.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Ql.DraggableRect:return a}},[r,a,c]),b=p.useRef(null),_=p.useCallback(()=>{const S=b.current;if(!S)return;const N=v.current.x*x.current.x,k=v.current.y*x.current.y;S.scrollBy(N,k)},[]),j=p.useMemo(()=>o===pf.TreeOrder?[...u].reverse():u,[o,u]);p.useEffect(()=>{if(!i||!u.length||!w){y();return}for(const S of j){if((n==null?void 0:n(S))===!1)continue;const N=u.indexOf(S),k=d[N];if(!k)continue;const{direction:E,speed:P}=FL(S,k,w,t,h);for(const A of["x","y"])m[A][E[A]]||(P[A]=0,E[A]=0);if(P.x>0||P.y>0){y(),b.current=S,g(_,s),v.current=P,x.current=E;return}}v.current={x:0,y:0},x.current={x:0,y:0},y()},[t,_,n,y,i,s,JSON.stringify(w),JSON.stringify(m),g,u,j,d,JSON.stringify(h)])}const QL={x:{[Qt.Backward]:!1,[Qt.Forward]:!1},y:{[Qt.Backward]:!1,[Qt.Forward]:!1}};function ZL(e){let{delta:t,disabled:r}=e;const n=uf(t);return Yc(a=>{if(r||!n||!a)return QL;const i={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[Qt.Backward]:a.x[Qt.Backward]||i.x===-1,[Qt.Forward]:a.x[Qt.Forward]||i.x===1},y:{[Qt.Backward]:a.y[Qt.Backward]||i.y===-1,[Qt.Forward]:a.y[Qt.Forward]||i.y===1}}},[r,t,n])}function e6(e,t){const r=t!=null?e.get(t):void 0,n=r?r.node.current:null;return Yc(a=>{var i;return t==null?null:(i=n??a)!=null?i:null},[n,t])}function t6(e,t){return p.useMemo(()=>e.reduce((r,n)=>{const{sensor:a}=n,i=a.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,n)}));return[...r,...i]},[]),[e,t])}var Nc;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Nc||(Nc={}));var xv;(function(e){e.Optimized="optimized"})(xv||(xv={}));const w_=new Map;function r6(e,t){let{dragging:r,dependencies:n,config:a}=t;const[i,s]=p.useState(null),{frequency:o,measure:c,strategy:u}=a,d=p.useRef(e),f=v(),h=Sc(f),m=p.useCallback(function(x){x===void 0&&(x=[]),!h.current&&s(w=>w===null?x:w.concat(x.filter(b=>!w.includes(b))))},[h]),g=p.useRef(null),y=Yc(x=>{if(f&&!r)return w_;if(!x||x===w_||d.current!==e||i!=null){const w=new Map;for(let b of e){if(!b)continue;if(i&&i.length>0&&!i.includes(b.id)&&b.rect.current){w.set(b.id,b.rect.current);continue}const _=b.node.current,j=_?new D0(c(_),_):null;b.rect.current=j,j&&w.set(b.id,j)}return w}return x},[e,i,r,f,c]);return p.useEffect(()=>{d.current=e},[e]),p.useEffect(()=>{f||m()},[r,f]),p.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),p.useEffect(()=>{f||typeof o!="number"||g.current!==null||(g.current=setTimeout(()=>{m(),g.current=null},o))},[o,f,m,...n]),{droppableRects:y,measureDroppableContainers:m,measuringScheduled:i!=null};function v(){switch(u){case Nc.Always:return!1;case Nc.BeforeDragging:return r;default:return!r}}}function R0(e,t){return Yc(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function n6(e,t){return R0(e,t)}function a6(e){let{callback:t,disabled:r}=e;const n=Eh(t),a=p.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return p.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Th(e){let{callback:t,disabled:r}=e;const n=Eh(t),a=p.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return p.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function i6(e){return new D0(rl(e),e)}function __(e,t,r){t===void 0&&(t=i6);const[n,a]=p.useState(null);function i(){a(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??r)!=null?u:null}const d=t(e);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const s=a6({callback(c){if(e)for(const u of c){const{type:d,target:f}=u;if(d==="childList"&&f instanceof HTMLElement&&f.contains(e)){i();break}}}}),o=Th({callback:i});return qn(()=>{i(),e?(o==null||o.observe(e),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),s==null||s.disconnect())},[e]),n}function s6(e){const t=R0(e);return YC(e,t)}const j_=[];function o6(e){const t=p.useRef(e),r=Yc(n=>e?n&&n!==j_&&e&&t.current&&e.parentNode===t.current.parentNode?n:T0(e):j_,[e]);return p.useEffect(()=>{t.current=e},[e]),r}function l6(e){const[t,r]=p.useState(null),n=p.useRef(e),a=p.useCallback(i=>{const s=Am(i.target);s&&r(o=>o?(o.set(s,vv(s)),new Map(o)):null)},[]);return p.useEffect(()=>{const i=n.current;if(e!==i){s(i);const o=e.map(c=>{const u=Am(c);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,vv(u)]):null}).filter(c=>c!=null);r(o.length?new Map(o):null),n.current=e}return()=>{s(e),s(i)};function s(o){o.forEach(c=>{const u=Am(c);u==null||u.removeEventListener("scroll",a)})}},[a,e]),p.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,s)=>So(i,s),Gn):rE(e):Gn,[e,t])}function S_(e,t){t===void 0&&(t=[]);const r=p.useRef(null);return p.useEffect(()=>{r.current=null},t),p.useEffect(()=>{const n=e!==Gn;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?df(e,r.current):Gn}function c6(e){p.useEffect(()=>{if(!Ch)return;const t=e.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function u6(e,t){return p.useMemo(()=>e.reduce((r,n)=>{let{eventName:a,handler:i}=n;return r[a]=s=>{i(s,t)},r},{}),[e,t])}function sE(e){return p.useMemo(()=>e?RL(e):null,[e])}const N_=[];function d6(e,t){t===void 0&&(t=rl);const[r]=e,n=sE(r?Ar(r):null),[a,i]=p.useState(N_);function s(){i(()=>e.length?e.map(c=>eE(c)?n:new D0(t(c),c)):N_)}const o=Th({callback:s});return qn(()=>{o==null||o.disconnect(),s(),e.forEach(c=>o==null?void 0:o.observe(c))},[e]),a}function oE(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Gc(t)?t:e}function f6(e){let{measure:t}=e;const[r,n]=p.useState(null),a=p.useCallback(u=>{for(const{target:d}of u)if(Gc(d)){n(f=>{const h=t(d);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),i=Th({callback:a}),s=p.useCallback(u=>{const d=oE(u);i==null||i.disconnect(),d&&(i==null||i.observe(d)),n(d?t(d):null)},[t,i]),[o,c]=cf(s);return p.useMemo(()=>({nodeRef:o,rect:r,setRef:c}),[r,o,c])}const h6=[{sensor:nl,options:{}},{sensor:iE,options:{}}],p6={current:{}},Cd={draggable:{measure:v_},droppable:{measure:v_,strategy:Nc.WhileDragging,frequency:xv.Optimized},dragOverlay:{measure:rl}};class Zl extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,n;return(r=(n=this.get(t))==null?void 0:n.node.current)!=null?r:void 0}}const m6={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Zl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:hf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Cd,measureDroppableContainers:hf,windowRect:null,measuringScheduled:!1},lE={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:hf,draggableNodes:new Map,over:null,measureDroppableContainers:hf},Jc=p.createContext(lE),cE=p.createContext(m6);function g6(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Zl}}}function v6(e,t){switch(t.type){case zt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case zt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case zt.DragEnd:case zt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case zt.RegisterDroppable:{const{element:r}=t,{id:n}=r,a=new Zl(e.droppable.containers);return a.set(n,r),{...e,droppable:{...e.droppable,containers:a}}}case zt.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;const s=new Zl(e.droppable.containers);return s.set(r,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:s}}}case zt.UnregisterDroppable:{const{id:r,key:n}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;const i=new Zl(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function y6(e){let{disabled:t}=e;const{active:r,activatorEvent:n,draggableNodes:a}=p.useContext(Jc),i=uf(n),s=uf(r==null?void 0:r.id);return p.useEffect(()=>{if(!t&&!n&&i&&s!=null){if(!Ph(i)||document.activeElement===i.target)return;const o=a.get(s);if(!o)return;const{activatorNode:c,node:u}=o;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const f=fL(d);if(f){f.focus();break}}})}},[n,t,a,s,i]),null}function uE(e,t){let{transform:r,...n}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...n}),r):r}function x6(e){return p.useMemo(()=>({draggable:{...Cd.draggable,...e==null?void 0:e.draggable},droppable:{...Cd.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Cd.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function b6(e){let{activeNode:t,measure:r,initialRect:n,config:a=!0}=e;const i=p.useRef(!1),{x:s,y:o}=typeof a=="boolean"?{x:a,y:a}:a;qn(()=>{if(!s&&!o||!t){i.current=!1;return}if(i.current||!n)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=r(u),f=YC(d,n);if(s||(f.x=0),o||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=JC(u);h&&h.scrollBy({top:f.y,left:f.x})}},[t,s,o,n,r])}const Dh=p.createContext({...Gn,scaleX:1,scaleY:1});var si;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(si||(si={}));const Ih=p.memo(function(t){var r,n,a,i;let{id:s,accessibility:o,autoScroll:c=!0,children:u,sensors:d=h6,collisionDetection:f=CL,measuring:h,modifiers:m,...g}=t;const y=p.useReducer(v6,void 0,g6),[v,x]=y,[w,b]=yL(),[_,j]=p.useState(si.Uninitialized),S=_===si.Initialized,{draggable:{active:N,nodes:k,translate:E},droppable:{containers:P}}=v,A=N!=null?k.get(N):null,D=p.useRef({initial:null,translated:null}),H=p.useMemo(()=>{var Fe;return N!=null?{id:N,data:(Fe=A==null?void 0:A.data)!=null?Fe:p6,rect:D}:null},[N,A]),Q=p.useRef(null),[ee,B]=p.useState(null),[W,I]=p.useState(null),M=Sc(g,Object.values(g)),L=Xc("DndDescribedBy",s),oe=p.useMemo(()=>P.getEnabled(),[P]),re=x6(h),{droppableRects:Ne,measureDroppableContainers:O,measuringScheduled:q}=r6(oe,{dragging:S,dependencies:[E.x,E.y],config:re.droppable}),te=e6(k,N),$=p.useMemo(()=>W?ff(W):null,[W]),G=ei(),T=n6(te,re.draggable.measure);b6({activeNode:N!=null?k.get(N):null,config:G.layoutShiftCompensation,initialRect:T,measure:re.draggable.measure});const K=__(te,re.draggable.measure,T),Z=__(te?te.parentElement:null),F=p.useRef({activatorEvent:null,active:null,activeNode:te,collisionRect:null,collisions:null,droppableRects:Ne,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ye=P.getNodeFor((r=F.current.over)==null?void 0:r.id),le=f6({measure:re.dragOverlay.measure}),De=(n=le.nodeRef.current)!=null?n:te,Ae=S?(a=le.rect)!=null?a:K:null,qe=!!(le.nodeRef.current&&le.rect),Le=s6(qe?null:K),fr=sE(De?Ar(De):null),ze=o6(S?ye??te:null),C=d6(ze),V=uE(m,{transform:{x:E.x-Le.x,y:E.y-Le.y,scaleX:1,scaleY:1},activatorEvent:W,active:H,activeNodeRect:K,containerNodeRect:Z,draggingNodeRect:Ae,over:F.current.over,overlayNodeRect:le.rect,scrollableAncestors:ze,scrollableAncestorRects:C,windowRect:fr}),J=$?So($,E):null,pe=l6(ze),Re=S_(pe),at=S_(pe,[K]),Lt=So(V,Re),Ct=Ae?TL(Ae,V):null,Ir=H&&Ct?f({active:H,collisionRect:Ct,droppableRects:Ne,droppableContainers:oe,pointerCoordinates:J}):null,ma=NL(Ir,"id"),[wr,Qa]=p.useState(null),Fi=qe?V:So(V,at),Bi=OL(Fi,(i=wr==null?void 0:wr.rect)!=null?i:null,K),Ui=p.useRef(null),zi=p.useCallback((Fe,mt)=>{let{sensor:Qe,options:gt}=mt;if(Q.current==null)return;const hr=k.get(Q.current);if(!hr)return;const ar=Fe.nativeEvent,Rr=new Qe({active:Q.current,activeNode:hr,event:ar,options:gt,context:F,onAbort(Xe){if(!k.get(Xe))return;const{onDragAbort:_r}=M.current,Vr={id:Xe};_r==null||_r(Vr),w({type:"onDragAbort",event:Vr})},onPending(Xe,Yt,_r,Vr){if(!k.get(Xe))return;const{onDragPending:In}=M.current,vt={id:Xe,constraint:Yt,initialCoordinates:_r,offset:Vr};In==null||In(vt),w({type:"onDragPending",event:vt})},onStart(Xe){const Yt=Q.current;if(Yt==null)return;const _r=k.get(Yt);if(!_r)return;const{onDragStart:Vr}=M.current,Dn={activatorEvent:ar,active:{id:Yt,data:_r.data,rect:D}};mi.unstable_batchedUpdates(()=>{Vr==null||Vr(Dn),j(si.Initializing),x({type:zt.DragStart,initialCoordinates:Xe,active:Yt}),w({type:"onDragStart",event:Dn}),B(Ui.current),I(ar)})},onMove(Xe){x({type:zt.DragMove,coordinates:Xe})},onEnd:qr(zt.DragEnd),onCancel:qr(zt.DragCancel)});Ui.current=Rr;function qr(Xe){return async function(){const{active:_r,collisions:Vr,over:Dn,scrollAdjustedTranslate:In}=F.current;let vt=null;if(_r&&In){const{cancelDrop:Gr}=M.current;vt={activatorEvent:ar,active:_r,collisions:Vr,delta:In,over:Dn},Xe===zt.DragEnd&&typeof Gr=="function"&&await Promise.resolve(Gr(vt))&&(Xe=zt.DragCancel)}Q.current=null,mi.unstable_batchedUpdates(()=>{x({type:Xe}),j(si.Uninitialized),Qa(null),B(null),I(null),Ui.current=null;const Gr=Xe===zt.DragEnd?"onDragEnd":"onDragCancel";if(vt){const ra=M.current[Gr];ra==null||ra(vt),w({type:Gr,event:vt})}})}}},[k]),Wi=p.useCallback((Fe,mt)=>(Qe,gt)=>{const hr=Qe.nativeEvent,ar=k.get(gt);if(Q.current!==null||!ar||hr.dndKit||hr.defaultPrevented)return;const Rr={active:ar};Fe(Qe,mt.options,Rr)===!0&&(hr.dndKit={capturedBy:mt.sensor},Q.current=gt,zi(Qe,mt))},[k,zi]),ta=t6(d,Wi);c6(d),qn(()=>{K&&_===si.Initializing&&j(si.Initialized)},[K,_]),p.useEffect(()=>{const{onDragMove:Fe}=M.current,{active:mt,activatorEvent:Qe,collisions:gt,over:hr}=F.current;if(!mt||!Qe)return;const ar={active:mt,activatorEvent:Qe,collisions:gt,delta:{x:Lt.x,y:Lt.y},over:hr};mi.unstable_batchedUpdates(()=>{Fe==null||Fe(ar),w({type:"onDragMove",event:ar})})},[Lt.x,Lt.y]),p.useEffect(()=>{const{active:Fe,activatorEvent:mt,collisions:Qe,droppableContainers:gt,scrollAdjustedTranslate:hr}=F.current;if(!Fe||Q.current==null||!mt||!hr)return;const{onDragOver:ar}=M.current,Rr=gt.get(ma),qr=Rr&&Rr.rect.current?{id:Rr.id,rect:Rr.rect.current,data:Rr.data,disabled:Rr.disabled}:null,Xe={active:Fe,activatorEvent:mt,collisions:Qe,delta:{x:hr.x,y:hr.y},over:qr};mi.unstable_batchedUpdates(()=>{Qa(qr),ar==null||ar(Xe),w({type:"onDragOver",event:Xe})})},[ma]),qn(()=>{F.current={activatorEvent:W,active:H,activeNode:te,collisionRect:Ct,collisions:Ir,droppableRects:Ne,draggableNodes:k,draggingNode:De,draggingNodeRect:Ae,droppableContainers:P,over:wr,scrollableAncestors:ze,scrollAdjustedTranslate:Lt},D.current={initial:Ae,translated:Ct}},[H,te,Ir,Ct,k,De,Ae,Ne,P,wr,ze,Lt]),JL({...G,delta:E,draggingRect:Ct,pointerCoordinates:J,scrollableAncestors:ze,scrollableAncestorRects:C});const Za=p.useMemo(()=>({active:H,activeNode:te,activeNodeRect:K,activatorEvent:W,collisions:Ir,containerNodeRect:Z,dragOverlay:le,draggableNodes:k,droppableContainers:P,droppableRects:Ne,over:wr,measureDroppableContainers:O,scrollableAncestors:ze,scrollableAncestorRects:C,measuringConfiguration:re,measuringScheduled:q,windowRect:fr}),[H,te,K,W,Ir,Z,le,k,P,Ne,wr,O,ze,C,re,q,fr]),Ki=p.useMemo(()=>({activatorEvent:W,activators:ta,active:H,activeNodeRect:K,ariaDescribedById:{draggable:L},dispatch:x,draggableNodes:k,over:wr,measureDroppableContainers:O}),[W,ta,H,K,x,L,k,wr,O]);return lt.createElement(qC.Provider,{value:b},lt.createElement(Jc.Provider,{value:Ki},lt.createElement(cE.Provider,{value:Za},lt.createElement(Dh.Provider,{value:Bi},u)),lt.createElement(y6,{disabled:(o==null?void 0:o.restoreFocus)===!1})),lt.createElement(wL,{...o,hiddenTextDescribedById:L}));function ei(){const Fe=(ee==null?void 0:ee.autoScrollEnabled)===!1,mt=typeof c=="object"?c.enabled===!1:c===!1,Qe=S&&!Fe&&!mt;return typeof c=="object"?{...c,enabled:Qe}:{enabled:Qe}}}),w6=p.createContext(null),k_="button",_6="Draggable";function j6(e){let{id:t,data:r,disabled:n=!1,attributes:a}=e;const i=Xc(_6),{activators:s,activatorEvent:o,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:h}=p.useContext(Jc),{role:m=k_,roleDescription:g="draggable",tabIndex:y=0}=a??{},v=(c==null?void 0:c.id)===t,x=p.useContext(v?Dh:w6),[w,b]=cf(),[_,j]=cf(),S=u6(s,t),N=Sc(r);qn(()=>(f.set(t,{id:t,key:i,node:w,activatorNode:_,data:N}),()=>{const E=f.get(t);E&&E.key===i&&f.delete(t)}),[f,t]);const k=p.useMemo(()=>({role:m,tabIndex:y,"aria-disabled":n,"aria-pressed":v&&m===k_?!0:void 0,"aria-roledescription":g,"aria-describedby":d.draggable}),[n,m,y,v,g,d.draggable]);return{active:c,activatorEvent:o,activeNodeRect:u,attributes:k,isDragging:v,listeners:n?void 0:S,node:w,over:h,setNodeRef:b,setActivatorNodeRef:j,transform:x}}function dE(){return p.useContext(cE)}const S6="Droppable",N6={timeout:25};function fE(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:a}=e;const i=Xc(S6),{active:s,dispatch:o,over:c,measureDroppableContainers:u}=p.useContext(Jc),d=p.useRef({disabled:r}),f=p.useRef(!1),h=p.useRef(null),m=p.useRef(null),{disabled:g,updateMeasurementsFor:y,timeout:v}={...N6,...a},x=Sc(y??n),w=p.useCallback(()=>{if(!f.current){f.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),m.current=null},v)},[v]),b=Th({callback:w,disabled:g||!s}),_=p.useCallback((k,E)=>{b&&(E&&(b.unobserve(E),f.current=!1),k&&b.observe(k))},[b]),[j,S]=cf(_),N=Sc(t);return p.useEffect(()=>{!b||!j.current||(b.disconnect(),f.current=!1,b.observe(j.current))},[j,b]),p.useEffect(()=>(o({type:zt.RegisterDroppable,element:{id:n,key:i,disabled:r,node:j,rect:h,data:N}}),()=>o({type:zt.UnregisterDroppable,key:i,id:n})),[n]),p.useEffect(()=>{r!==d.current.disabled&&(o({type:zt.SetDroppableDisabled,id:n,key:i,disabled:r}),d.current.disabled=r)},[n,i,r,o]),{active:s,rect:h,isOver:(c==null?void 0:c.id)===n,node:j,over:c,setNodeRef:S}}function k6(e){let{animation:t,children:r}=e;const[n,a]=p.useState(null),[i,s]=p.useState(null),o=uf(r);return!r&&!n&&o&&a(o),qn(()=>{if(!i)return;const c=n==null?void 0:n.key,u=n==null?void 0:n.props.id;if(c==null||u==null){a(null);return}Promise.resolve(t(u,i)).then(()=>{a(null)})},[t,n,i]),lt.createElement(lt.Fragment,null,r,n?p.cloneElement(n,{ref:s}):null)}const C6={x:0,y:0,scaleX:1,scaleY:1};function E6(e){let{children:t}=e;return lt.createElement(Jc.Provider,{value:lE},lt.createElement(Dh.Provider,{value:C6},t))}const P6={position:"fixed",touchAction:"none"},O6=e=>Ph(e)?"transform 250ms ease":void 0,A6=p.forwardRef((e,t)=>{let{as:r,activatorEvent:n,adjustScale:a,children:i,className:s,rect:o,style:c,transform:u,transition:d=O6}=e;if(!o)return null;const f=a?u:{...u,scaleX:1,scaleY:1},h={...P6,width:o.width,height:o.height,top:o.top,left:o.left,transform:Vn.Transform.toString(f),transformOrigin:a&&n?_L(n,o):void 0,transition:typeof d=="function"?d(n):d,...c};return lt.createElement(r,{className:s,style:h,ref:t},i)}),T6=e=>t=>{let{active:r,dragOverlay:n}=t;const a={},{styles:i,className:s}=e;if(i!=null&&i.active)for(const[o,c]of Object.entries(i.active))c!==void 0&&(a[o]=r.node.style.getPropertyValue(o),r.node.style.setProperty(o,c));if(i!=null&&i.dragOverlay)for(const[o,c]of Object.entries(i.dragOverlay))c!==void 0&&n.node.style.setProperty(o,c);return s!=null&&s.active&&r.node.classList.add(s.active),s!=null&&s.dragOverlay&&n.node.classList.add(s.dragOverlay),function(){for(const[c,u]of Object.entries(a))r.node.style.setProperty(c,u);s!=null&&s.active&&r.node.classList.remove(s.active)}},D6=e=>{let{transform:{initial:t,final:r}}=e;return[{transform:Vn.Transform.toString(t)},{transform:Vn.Transform.toString(r)}]},I6={duration:250,easing:"ease",keyframes:D6,sideEffects:T6({styles:{active:{opacity:"0"}}})};function R6(e){let{config:t,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=e;return Eh((i,s)=>{if(t===null)return;const o=r.get(i);if(!o)return;const c=o.node.current;if(!c)return;const u=oE(s);if(!u)return;const{transform:d}=Ar(s).getComputedStyle(s),f=XC(d);if(!f)return;const h=typeof t=="function"?t:M6(t);return nE(c,a.draggable.measure),h({active:{id:i,data:o.data,node:c,rect:a.draggable.measure(c)},draggableNodes:r,dragOverlay:{node:s,rect:a.dragOverlay.measure(u)},droppableContainers:n,measuringConfiguration:a,transform:f})})}function M6(e){const{duration:t,easing:r,sideEffects:n,keyframes:a}={...I6,...e};return i=>{let{active:s,dragOverlay:o,transform:c,...u}=i;if(!t)return;const d={x:o.rect.left-s.rect.left,y:o.rect.top-s.rect.top},f={scaleX:c.scaleX!==1?s.rect.width*c.scaleX/o.rect.width:1,scaleY:c.scaleY!==1?s.rect.height*c.scaleY/o.rect.height:1},h={x:c.x-d.x,y:c.y-d.y,...f},m=a({...u,active:s,dragOverlay:o,transform:{initial:c,final:h}}),[g]=m,y=m[m.length-1];if(JSON.stringify(g)===JSON.stringify(y))return;const v=n==null?void 0:n({active:s,dragOverlay:o,...u}),x=o.node.animate(m,{duration:t,easing:r,fill:"forwards"});return new Promise(w=>{x.onfinish=()=>{v==null||v(),w()}})}}let C_=0;function $6(e){return p.useMemo(()=>{if(e!=null)return C_++,C_},[e])}const hE=lt.memo(e=>{let{adjustScale:t=!1,children:r,dropAnimation:n,style:a,transition:i,modifiers:s,wrapperElement:o="div",className:c,zIndex:u=999}=e;const{activatorEvent:d,active:f,activeNodeRect:h,containerNodeRect:m,draggableNodes:g,droppableContainers:y,dragOverlay:v,over:x,measuringConfiguration:w,scrollableAncestors:b,scrollableAncestorRects:_,windowRect:j}=dE(),S=p.useContext(Dh),N=$6(f==null?void 0:f.id),k=uE(s,{activatorEvent:d,active:f,activeNodeRect:h,containerNodeRect:m,draggingNodeRect:v.rect,over:x,overlayNodeRect:v.rect,scrollableAncestors:b,scrollableAncestorRects:_,transform:S,windowRect:j}),E=R0(h),P=R6({config:n,draggableNodes:g,droppableContainers:y,measuringConfiguration:w}),A=E?v.setRef:void 0;return lt.createElement(E6,null,lt.createElement(k6,{animation:P},f&&N?lt.createElement(A6,{key:N,id:f.id,ref:A,as:o,activatorEvent:d,adjustScale:t,className:c,transition:i,rect:E,style:{zIndex:u,...a},transform:k},r):null))});function Rh(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function L6(e,t){return e.reduce((r,n,a)=>{const i=t.get(n);return i&&(r[a]=i),r},Array(e.length))}function qu(e){return e!==null&&e>=0}function F6(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function B6(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Mh=e=>{let{rects:t,activeIndex:r,overIndex:n,index:a}=e;const i=Rh(t,n,r),s=t[a],o=i[a];return!o||!s?null:{x:o.left-s.left,y:o.top-s.top,scaleX:o.width/s.width,scaleY:o.height/s.height}},Vu={scaleX:1,scaleY:1},pE=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:a,rects:i,overIndex:s}=e;const o=(t=i[r])!=null?t:n;if(!o)return null;if(a===r){const u=i[s];return u?{x:0,y:r<s?u.top+u.height-(o.top+o.height):u.top-o.top,...Vu}:null}const c=U6(i,a,r);return a>r&&a<=s?{x:0,y:-o.height-c,...Vu}:a<r&&a>=s?{x:0,y:o.height+c,...Vu}:{x:0,y:0,...Vu}};function U6(e,t,r){const n=e[t],a=e[t-1],i=e[t+1];return n?r<t?a?n.top-(a.top+a.height):i?i.top-(n.top+n.height):0:i?i.top-(n.top+n.height):a?n.top-(a.top+a.height):0:0}const mE="Sortable",gE=lt.createContext({activeIndex:-1,containerId:mE,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Mh,disabled:{draggable:!1,droppable:!1}});function $h(e){let{children:t,id:r,items:n,strategy:a=Mh,disabled:i=!1}=e;const{active:s,dragOverlay:o,droppableRects:c,over:u,measureDroppableContainers:d}=dE(),f=Xc(mE,r),h=o.rect!==null,m=p.useMemo(()=>n.map(S=>typeof S=="object"&&"id"in S?S.id:S),[n]),g=s!=null,y=s?m.indexOf(s.id):-1,v=u?m.indexOf(u.id):-1,x=p.useRef(m),w=!F6(m,x.current),b=v!==-1&&y===-1||w,_=B6(i);qn(()=>{w&&g&&d(m)},[w,m,g,d]),p.useEffect(()=>{x.current=m},[m]);const j=p.useMemo(()=>({activeIndex:y,containerId:f,disabled:_,disableTransforms:b,items:m,overIndex:v,useDragOverlay:h,sortedRects:L6(m,c),strategy:a}),[y,f,_.draggable,_.droppable,b,m,v,c,h,a]);return lt.createElement(gE.Provider,{value:j},t)}const z6=e=>{let{id:t,items:r,activeIndex:n,overIndex:a}=e;return Rh(r,n,a).indexOf(t)},W6=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:a,items:i,newIndex:s,previousItems:o,previousContainerId:c,transition:u}=e;return!u||!n||o!==i&&a===s?!1:r?!0:s!==a&&t===c},K6={duration:200,easing:"ease"},vE="transform",H6=Vn.Transition.toString({property:vE,duration:0,easing:"linear"}),q6={roleDescription:"sortable"};function V6(e){let{disabled:t,index:r,node:n,rect:a}=e;const[i,s]=p.useState(null),o=p.useRef(r);return qn(()=>{if(!t&&r!==o.current&&n.current){const c=a.current;if(c){const u=rl(n.current,{ignoreTransform:!0}),d={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(d.x||d.y)&&s(d)}}r!==o.current&&(o.current=r)},[t,r,n,a]),p.useEffect(()=>{i&&s(null)},[i]),i}function Lh(e){let{animateLayoutChanges:t=W6,attributes:r,disabled:n,data:a,getNewIndex:i=z6,id:s,strategy:o,resizeObserverConfig:c,transition:u=K6}=e;const{items:d,containerId:f,activeIndex:h,disabled:m,disableTransforms:g,sortedRects:y,overIndex:v,useDragOverlay:x,strategy:w}=p.useContext(gE),b=G6(n,m),_=d.indexOf(s),j=p.useMemo(()=>({sortable:{containerId:f,index:_,items:d},...a}),[f,a,_,d]),S=p.useMemo(()=>d.slice(d.indexOf(s)),[d,s]),{rect:N,node:k,isOver:E,setNodeRef:P}=fE({id:s,data:j,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...c}}),{active:A,activatorEvent:D,activeNodeRect:H,attributes:Q,setNodeRef:ee,listeners:B,isDragging:W,over:I,setActivatorNodeRef:M,transform:L}=j6({id:s,data:j,attributes:{...q6,...r},disabled:b.draggable}),oe=lL(P,ee),re=!!A,Ne=re&&!g&&qu(h)&&qu(v),O=!x&&W,q=O&&Ne?L:null,$=Ne?q??(o??w)({rects:y,activeNodeRect:H,activeIndex:h,overIndex:v,index:_}):null,G=qu(h)&&qu(v)?i({id:s,items:d,activeIndex:h,overIndex:v}):_,T=A==null?void 0:A.id,K=p.useRef({activeId:T,items:d,newIndex:G,containerId:f}),Z=d!==K.current.items,F=t({active:A,containerId:f,isDragging:W,isSorting:re,id:s,index:_,items:d,newIndex:K.current.newIndex,previousItems:K.current.items,previousContainerId:K.current.containerId,transition:u,wasDragging:K.current.activeId!=null}),ye=V6({disabled:!F,index:_,node:k,rect:N});return p.useEffect(()=>{re&&K.current.newIndex!==G&&(K.current.newIndex=G),f!==K.current.containerId&&(K.current.containerId=f),d!==K.current.items&&(K.current.items=d)},[re,G,f,d]),p.useEffect(()=>{if(T===K.current.activeId)return;if(T!=null&&K.current.activeId==null){K.current.activeId=T;return}const De=setTimeout(()=>{K.current.activeId=T},50);return()=>clearTimeout(De)},[T]),{active:A,activeIndex:h,attributes:Q,data:j,rect:N,index:_,newIndex:G,items:d,isOver:E,isSorting:re,isDragging:W,listeners:B,node:k,overIndex:v,over:I,setNodeRef:oe,setActivatorNodeRef:M,setDroppableNodeRef:P,setDraggableNodeRef:ee,transform:ye??$,transition:le()};function le(){if(ye||Z&&K.current.newIndex===_)return H6;if(!(O&&!Ph(D)||!u)&&(re||F))return Vn.Transition.toString({...u,property:vE})}}function G6(e,t){var r,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(n=e==null?void 0:e.droppable)!=null?n:t.droppable}}Ke.Down,Ke.Right,Ke.Up,Ke.Left;function Mr(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function Gu(e){return`${(e*100).toFixed(1)}%`}function E_(e,t){const r=new Date().getHours(),n=r<12?"Good morning":r<18?"Good afternoon":"Good evening",a=["Let's close some deals","Time to crush your goals","Ready to dominate the market","Another day, another opportunity","Let's make it a winning day","Time to turn leads into gold","Your next closing is waiting","Great things happen to closers","Let's build your empire","Success is calling your name","Time to level up your game","Let's make today count"],i=["Rally the team to a strong finish","Spot the blockers and clear the way","Guide the pipeline to momentum","Coach for better follow-through today","Keep your team sharp and focused","Measure, adjust, and push the pace"],s=["Lead from the frontshow them the way","Tee up the right opportunities for the team","Mentor and keep the cadence tight","Keep your squad synced and confident","Set the tone and celebrate small wins","Align the team to the next milestones"],o=["Keep operations humming smoothly","Check the pulse and anticipate needs","Steady hands keep the flywheel spinning","Align the org and let the teams run","Remove friction and raise the bar","Your oversight keeps momentum steady"],c=e?e.split(" ")[0]:"",u=c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",d=u?`, ${u}`:"";let f=a;t==="sales_manager"?f=i:t==="team_lead"?f=s:t==="admin"&&(f=o);const h=f[Math.floor(Math.random()*f.length)];return`${n}${d}. ${h}!`}function Y6(){return new Intl.DateTimeFormat("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}).format(new Date)}function X6(e,t,r){const n=new Date,a=n.getFullYear(),i=n.getMonth(),s=Math.floor(i/3);switch(e){case"this_month":return{start:new Date(a,i,1),end:new Date(a,i+1,0,23,59,59)};case"last_30_days":const o=new Date(n);return o.setDate(o.getDate()-30),{start:o,end:n};case"this_quarter":return{start:new Date(a,s*3,1),end:new Date(a,(s+1)*3,0,23,59,59)};case"ytd":return{start:new Date(a,0,1),end:n};case"custom":return{start:t||new Date(a,0,1),end:r||n};default:return{start:new Date(a,0,1),end:n}}}function Vi(e){const n=(e.actual_sale_price||e.expected_sale_price)*e.gross_commission_rate*(1-e.brokerage_split_rate);return(e.referral_out_rate?n*(1-e.referral_out_rate):n)-e.transaction_fee}function yE(e){const t=new Date(e),n=new Date().getTime()-t.getTime();return Math.floor(n/(1e3*60*60*24))}function P_(e,t=30){return yE(e)>t}function J6(e){if(!e||!e.startsWith("hsl("))return null;const t=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);return t?{h:parseInt(t[1],10),s:parseInt(t[2],10),l:parseInt(t[3],10)}:null}function Q6(e){if(!e||!e.toLowerCase().startsWith("rgb("))return null;const t=e.match(/rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)/i);if(!t)return null;const[r,n,a]=t.slice(1).map(i=>parseInt(i,10));return[r,n,a].some(i=>Number.isNaN(i)||i<0||i>255)?null:{r,g:n,b:a}}function Z6(e){if(!e||!e.startsWith("#"))return null;const r=e.trim().match(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i);if(!r)return null;let n=r[1];n.length===3&&(n=n.split("").map(o=>o+o).join(""));const a=parseInt(n.slice(0,2),16),i=parseInt(n.slice(2,4),16),s=parseInt(n.slice(4,6),16);return{r:a,g:i,b:s}}function eF(e){if(!e)return"#ffffff";const t=Z6(e);if(t)return(.2126*t.r+.7152*t.g+.0722*t.b)/255>.6?"#000000":"#ffffff";const r=J6(e);if(r)return r.l>60?"#000000":"#ffffff";const n=Q6(e);return n&&(.2126*n.r+.7152*n.g+.0722*n.b)/255>.6?"#000000":"#ffffff"}function Fh(e){if(!e)return"hsl(220, 70%, 50%)";const t=e.toLowerCase(),r=e.match(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i);return r?r[0]:t.startsWith("hsl(")||t.startsWith("rgb(")?e:{blue:"hsl(220, 70%, 50%)",cyan:"hsl(190, 65%, 48%)",teal:"hsl(165, 60%, 45%)",green:"hsl(145, 65%, 45%)",lime:"hsl(80, 60%, 50%)",yellow:"hsl(45, 100%, 50%)",orange:"hsl(25, 95%, 55%)",red:"hsl(5, 75%, 55%)",pink:"hsl(340, 70%, 55%)",purple:"hsl(280, 65%, 55%)",violet:"hsl(260, 60%, 55%)",indigo:"hsl(240, 65%, 55%)",slate:"hsl(200, 20%, 50%)",gray:"hsl(0, 0%, 50%)",brown:"hsl(30, 40%, 45%)",amber:"hsl(40, 95%, 50%)",emerald:"hsl(160, 70%, 45%)",sky:"hsl(200, 90%, 50%)",rose:"hsl(350, 80%, 55%)",mint:"hsl(175, 60%, 45%)"}[t]||"hsl(220, 70%, 50%)"}function Bh(e){const t=Fh(e),r=eF(t);return{bg:t,text:r}}function xE(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=xE(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Je(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=xE(e))&&(n&&(n+=" "),n+=t);return n}var tF=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function M0(e){if(typeof e!="string")return!1;var t=tF;return t.includes(e)}var rF=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function bE(e){if(typeof e!="string")return!1;var t=rF;return t.includes(e)}function wE(e){return typeof e=="string"&&e.startsWith("data-")}function Yn(e){var t=Object.entries(e).filter(r=>{var[n]=r;return bE(n)||wE(n)});return Object.fromEntries(t)}function Qc(e){if(e==null)return null;if(p.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Yn(t)}return typeof e=="object"&&!Array.isArray(e)?Yn(e):null}function Er(e){var t=Object.entries(e).filter(r=>{var[n]=r;return bE(n)||wE(n)||M0(n)});return Object.fromEntries(t)}function nF(e){return e==null?null:p.isValidElement(e)?Er(e.props):typeof e=="object"&&!Array.isArray(e)?Er(e):null}var aF=["children","width","height","viewBox","className","style","title","desc"];function bv(){return bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bv.apply(null,arguments)}function iF(e,t){if(e==null)return{};var r,n,a=sF(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function sF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _E=p.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:i,className:s,style:o,title:c,desc:u}=e,d=iF(e,aF),f=i||{width:n,height:a,x:0,y:0},h=Je("recharts-surface",s);return p.createElement("svg",bv({},Er(d),{className:h,width:n,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),p.createElement("title",null,c),p.createElement("desc",null,u),r)}),oF=["children","className"];function wv(){return wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wv.apply(null,arguments)}function lF(e,t){if(e==null)return{};var r,n,a=cF(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function cF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Cn=p.forwardRef((e,t)=>{var{children:r,className:n}=e,a=lF(e,oF),i=Je("recharts-layer",n);return p.createElement("g",wv({className:i},Er(a),{ref:t}),r)}),uF=p.createContext(null);function rt(e){return function(){return e}}const jE=Math.cos,mf=Math.sin,ea=Math.sqrt,gf=Math.PI,Uh=2*gf,_v=Math.PI,jv=2*_v,Qi=1e-6,dF=jv-Qi;function SE(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function fF(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return SE;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class hF{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?SE:fF(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,s){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,o=this._y1,c=n-t,u=a-r,d=s-t,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Qi)if(!(Math.abs(f*c-u*d)>Qi)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-s,g=a-o,y=c*c+u*u,v=m*m+g*g,x=Math.sqrt(y),w=Math.sqrt(h),b=i*Math.tan((_v-Math.acos((y+h-v)/(2*x*w)))/2),_=b/w,j=b/x;Math.abs(_-1)>Qi&&this._append`L${t+_*d},${r+_*f}`,this._append`A${i},${i},0,0,${+(f*m>d*g)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,a,i,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),c=n*Math.sin(a),u=t+o,d=r+c,f=1^s,h=s?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Qi||Math.abs(this._y1-d)>Qi)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%jv+jv),h>dF?this._append`A${n},${n},0,1,${f},${t-o},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Qi&&this._append`A${n},${n},0,${+(h>=_v)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function $0(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new hF(t)}function L0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function NE(e){this._context=e}NE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function zh(e){return new NE(e)}function kE(e){return e[0]}function CE(e){return e[1]}function EE(e,t){var r=rt(!0),n=null,a=zh,i=null,s=$0(o);e=typeof e=="function"?e:e===void 0?kE:rt(e),t=typeof t=="function"?t:t===void 0?CE:rt(t);function o(c){var u,d=(c=L0(c)).length,f,h=!1,m;for(n==null&&(i=a(m=s())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,c),+t(f,u,c));if(m)return i=null,m+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:rt(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:rt(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:rt(!!c),o):r},o.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),o):a},o.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),o):n},o}function Yu(e,t,r){var n=null,a=rt(!0),i=null,s=zh,o=null,c=$0(u);e=typeof e=="function"?e:e===void 0?kE:rt(+e),t=typeof t=="function"?t:rt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?CE:rt(+r);function u(f){var h,m,g,y=(f=L0(f)).length,v,x=!1,w,b=new Array(y),_=new Array(y);for(i==null&&(o=s(w=c())),h=0;h<=y;++h){if(!(h<y&&a(v=f[h],h,f))===x)if(x=!x)m=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=h-1;g>=m;--g)o.point(b[g],_[g]);o.lineEnd(),o.areaEnd()}x&&(b[h]=+e(v,h,f),_[h]=+t(v,h,f),o.point(n?+n(v,h,f):b[h],r?+r(v,h,f):_[h]))}if(w)return o=null,w+""||null}function d(){return EE().defined(a).curve(s).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:rt(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:rt(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:rt(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:rt(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:rt(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:rt(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:rt(!!f),u):a},u.curve=function(f){return arguments.length?(s=f,i!=null&&(o=s(i)),u):s},u.context=function(f){return arguments.length?(f==null?i=o=null:o=s(i=f),u):i},u}class PE{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function pF(e){return new PE(e,!0)}function mF(e){return new PE(e,!1)}const F0={draw(e,t){const r=ea(t/gf);e.moveTo(r,0),e.arc(0,0,r,0,Uh)}},gF={draw(e,t){const r=ea(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},OE=ea(1/3),vF=OE*2,yF={draw(e,t){const r=ea(t/vF),n=r*OE;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},xF={draw(e,t){const r=ea(t),n=-r/2;e.rect(n,n,r,r)}},bF=.8908130915292852,AE=mf(gf/10)/mf(7*gf/10),wF=mf(Uh/10)*AE,_F=-jE(Uh/10)*AE,jF={draw(e,t){const r=ea(t*bF),n=wF*r,a=_F*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const s=Uh*i/5,o=jE(s),c=mf(s);e.lineTo(c*r,-o*r),e.lineTo(o*n-c*a,c*n+o*a)}e.closePath()}},Im=ea(3),SF={draw(e,t){const r=-ea(t/(Im*3));e.moveTo(0,r*2),e.lineTo(-Im*r,-r),e.lineTo(Im*r,-r),e.closePath()}},pn=-.5,mn=ea(3)/2,Sv=1/ea(12),NF=(Sv/2+1)*3,kF={draw(e,t){const r=ea(t/NF),n=r/2,a=r*Sv,i=n,s=r*Sv+r,o=-i,c=s;e.moveTo(n,a),e.lineTo(i,s),e.lineTo(o,c),e.lineTo(pn*n-mn*a,mn*n+pn*a),e.lineTo(pn*i-mn*s,mn*i+pn*s),e.lineTo(pn*o-mn*c,mn*o+pn*c),e.lineTo(pn*n+mn*a,pn*a-mn*n),e.lineTo(pn*i+mn*s,pn*s-mn*i),e.lineTo(pn*o+mn*c,pn*c-mn*o),e.closePath()}};function CF(e,t){let r=null,n=$0(a);e=typeof e=="function"?e:rt(e||F0),t=typeof t=="function"?t:rt(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:rt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:rt(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function vf(){}function yf(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function TE(e){this._context=e}TE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function EF(e){return new TE(e)}function DE(e){this._context=e}DE.prototype={areaStart:vf,areaEnd:vf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:yf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function PF(e){return new DE(e)}function IE(e){this._context=e}IE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:yf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function OF(e){return new IE(e)}function RE(e){this._context=e}RE.prototype={areaStart:vf,areaEnd:vf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function AF(e){return new RE(e)}function O_(e){return e<0?-1:1}function A_(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),s=(r-e._y1)/(a||n<0&&-0),o=(i*a+s*n)/(n+a);return(O_(i)+O_(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(o))||0}function T_(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Rm(e,t,r){var n=e._x0,a=e._y0,i=e._x1,s=e._y1,o=(i-n)/3;e._context.bezierCurveTo(n+o,a+o*t,i-o,s-o*r,i,s)}function xf(e){this._context=e}xf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Rm(this,this._t0,T_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Rm(this,T_(this,r=A_(this,e,t)),r);break;default:Rm(this,this._t0,r=A_(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function ME(e){this._context=new $E(e)}(ME.prototype=Object.create(xf.prototype)).point=function(e,t){xf.prototype.point.call(this,t,e)};function $E(e){this._context=e}$E.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function TF(e){return new xf(e)}function DF(e){return new ME(e)}function LE(e){this._context=e}LE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=D_(e),a=D_(t),i=0,s=1;s<r;++i,++s)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function D_(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),s=new Array(r);for(a[0]=0,i[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,s[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,s[t]-=n*s[t-1];for(a[r-1]=s[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(s[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function IF(e){return new LE(e)}function Wh(e,t){this._context=e,this._t=t}Wh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function RF(e){return new Wh(e,.5)}function MF(e){return new Wh(e,0)}function $F(e){return new Wh(e,1)}function Mo(e,t){if((s=e.length)>1)for(var r=1,n,a,i=e[t[0]],s,o=i.length;r<s;++r)for(a=i,i=e[t[r]],n=0;n<o;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Nv(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function LF(e,t){return e[t]}function FF(e){const t=[];return t.key=e,t}function BF(){var e=rt([]),t=Nv,r=Mo,n=LF;function a(i){var s=Array.from(e.apply(this,arguments),FF),o,c=s.length,u=-1,d;for(const f of i)for(o=0,++u;o<c;++o)(s[o][u]=[0,+n(f,s[o].key,u,i)]).data=f;for(o=0,d=L0(t(s));o<c;++o)s[d[o]].index=o;return r(s,d),s}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:rt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:rt(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?Nv:typeof i=="function"?i:rt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Mo,a):r},a}function UF(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,s;a<i;++a){for(s=r=0;r<n;++r)s+=e[r][a][1]||0;if(s)for(r=0;r<n;++r)e[r][a][1]/=s}Mo(e,t)}}function zF(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var s=0,o=0;s<a;++s)o+=e[s][r][1]||0;n[r][1]+=n[r][0]=-o/2}Mo(e,t)}}function WF(e,t){if(!(!((s=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,s;n<i;++n){for(var o=0,c=0,u=0;o<s;++o){for(var d=e[t[o]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,g=0;g<o;++g){var y=e[t[g]],v=y[n][1]||0,x=y[n-1][1]||0;m+=v-x}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Mo(e,t)}}var Kh={},FE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(FE);var B0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(B0);var Hh={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Hh);var qh={},BE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(BE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BE,r=Hh;function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=t.toString(a);const i=[],s=a.length;if(s===0)return i;let o=0,c="",u="",d=!1;for(a.charCodeAt(0)===46&&(i.push(""),o++);o<s;){const f=a[o];u?f==="\\"&&o+1<s?(o++,c+=a[o]):f===u?u="":c+=f:d?f==='"'||f==="'"?u=f:f==="]"?(d=!1,i.push(c),c=""):c+=f:f==="["?(d=!0,c&&(i.push(c),c="")):f==="."?c&&(i.push(c),c=""):c+=f,o++}return c&&i.push(c),i}e.toPath=n})(qh);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FE,r=B0,n=Hh,a=qh;function i(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?r.isDeepKey(c)?i(o,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=o[c];return d===void 0?u:d}default:{if(Array.isArray(c))return s(o,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?u:d}}}function s(o,c,u){if(c.length===0)return u;let d=o;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=i})(Kh);var KF=Kh.get;const $o=Ka(KF);var Br=e=>e===0?0:e>0?1:-1,Xn=e=>typeof e=="number"&&e!=+e,$a=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,we=e=>(typeof e=="number"||e instanceof Number)&&!Xn(e),da=e=>we(e)||typeof e=="string",HF=0,kc=e=>{var t=++HF;return"".concat(e||"").concat(t)},Jn=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!we(t)&&typeof t!="string")return n;var i;if($a(t)){if(r==null)return n;var s=t.indexOf("%");i=r*parseFloat(t.slice(0,s))/100}else i=+t;return Xn(i)&&(i=n),a&&r!=null&&i>r&&(i=r),i},UE=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Nt(e,t,r){return we(e)&&we(t)?e+r*(t-e):t}function zE(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):$o(n,t))===r)}var pt=e=>e===null||typeof e>"u",Zc=e=>pt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function qF(e){return e!=null}function al(){}var VF=["type","size","sizeType"];function kv(){return kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kv.apply(null,arguments)}function I_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function R_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I_(Object(r),!0).forEach(function(n){GF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GF(e,t,r){return(t=YF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YF(e){var t=XF(e,"string");return typeof t=="symbol"?t:t+""}function XF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JF(e,t){if(e==null)return{};var r,n,a=QF(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function QF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var WE={symbolCircle:F0,symbolCross:gF,symbolDiamond:yF,symbolSquare:xF,symbolStar:jF,symbolTriangle:SF,symbolWye:kF},ZF=Math.PI/180,eB=e=>{var t="symbol".concat(Zc(e));return WE[t]||F0},tB=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*ZF;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},rB=(e,t)=>{WE["symbol".concat(Zc(e))]=t},KE=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=JF(e,VF),i=R_(R_({},a),{},{type:t,size:r,sizeType:n}),s="circle";typeof t=="string"&&(s=t);var o=()=>{var h=eB(s),m=CF().type(h).size(tB(r,n,s)),g=m();if(g!==null)return g},{className:c,cx:u,cy:d}=i,f=Er(i);return we(u)&&we(d)&&we(r)?p.createElement("path",kv({},f,{className:Je("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:o()})):null};KE.registerSymbol=rB;var HE=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,U0=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(p.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{M0(a)&&(n[a]=i=>r[a](r,i))}),n},nB=(e,t,r)=>n=>(e(t,r,n),null),z0=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var i=e[a];M0(a)&&typeof i=="function"&&(n||(n={}),n[a]=nB(i,t,r))}),n};function M_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function aB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M_(Object(r),!0).forEach(function(n){iB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iB(e,t,r){return(t=sB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sB(e){var t=oB(e,"string");return typeof t=="symbol"?t:t+""}function oB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tr(e,t){var r=aB({},e),n=t,a=Object.keys(t),i=a.reduce((s,o)=>(s[o]===void 0&&n[o]!==void 0&&(s[o]=n[o]),s),r);return i}var qE={},VE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let i=0;i<r.length;i++){const s=r[i],o=n(s);a.has(o)||a.set(o,s)}return Array.from(a.values())}e.uniqBy=t})(VE);var W0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(W0);var GE={},Vh={},YE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(YE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YE;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Vh);var XE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(XE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Vh,r=XE;function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(GE);var JE={},QE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kh;function r(n){return function(a){return t.get(a,n)}}e.property=r})(QE);var ZE={},K0={},eP={},H0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(H0);var q0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(q0);var V0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(V0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H0,r=q0,n=V0;function a(d,f,h){return typeof h!="function"?a(d,f,()=>{}):i(d,f,function m(g,y,v,x,w,b){const _=h(g,y,v,x,w,b);return _!==void 0?!!_:i(g,y,m,b)},new Map)}function i(d,f,h,m){if(f===d)return!0;switch(typeof f){case"object":return s(d,f,h,m);case"function":return Object.keys(f).length>0?i(d,{...f},h,m):n.eq(d,f);default:return t.isObject(d)?typeof f=="string"?f==="":!0:n.eq(d,f)}}function s(d,f,h,m){if(f==null)return!0;if(Array.isArray(f))return c(d,f,h,m);if(f instanceof Map)return o(d,f,h,m);if(f instanceof Set)return u(d,f,h,m);const g=Object.keys(f);if(d==null)return g.length===0;if(g.length===0)return!0;if(m!=null&&m.has(f))return m.get(f)===d;m==null||m.set(f,d);try{for(let y=0;y<g.length;y++){const v=g[y];if(!r.isPrimitive(d)&&!(v in d)||f[v]===void 0&&d[v]!==void 0||f[v]===null&&d[v]!==null||!h(d[v],f[v],v,d,f,m))return!1}return!0}finally{m==null||m.delete(f)}}function o(d,f,h,m){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[g,y]of f.entries()){const v=d.get(g);if(h(v,y,g,d,f,m)===!1)return!1}return!0}function c(d,f,h,m){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const g=new Set;for(let y=0;y<f.length;y++){const v=f[y];let x=!1;for(let w=0;w<d.length;w++){if(g.has(w))continue;const b=d[w];let _=!1;if(h(b,v,y,d,f,m)&&(_=!0),_){g.add(w),x=!0;break}}if(!x)return!1}return!0}function u(d,f,h,m){return f.size===0?!0:d instanceof Set?c([...d],[...f],h,m):!1}e.isMatchWith=a,e.isSetMatch=u})(eP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eP;function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r})(K0);var tP={},G0={},rP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(rP);var Y0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Y0);var X0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",i="[object Arguments]",s="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",m="[object Object]",g="[object Error]",y="[object DataView]",v="[object Uint8Array]",x="[object Uint8ClampedArray]",w="[object Uint16Array]",b="[object Uint32Array]",_="[object BigUint64Array]",j="[object Int8Array]",S="[object Int16Array]",N="[object Int32Array]",k="[object BigInt64Array]",E="[object Float32Array]",P="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=k,e.bigUint64ArrayTag=_,e.booleanTag=a,e.dataViewTag=y,e.dateTag=o,e.errorTag=g,e.float32ArrayTag=E,e.float64ArrayTag=P,e.functionTag=f,e.int16ArrayTag=S,e.int32ArrayTag=N,e.int8ArrayTag=j,e.mapTag=c,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=s,e.uint16ArrayTag=w,e.uint32ArrayTag=b,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=x})(X0);var nP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(nP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rP,r=Y0,n=X0,a=q0,i=nP;function s(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,m=new Map,g=void 0){const y=g==null?void 0:g(d,f,h,m);if(y!==void 0)return y;if(a.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const v=new Array(d.length);m.set(d,v);for(let x=0;x<d.length;x++)v[x]=o(d[x],x,h,m,g);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;m.set(d,v);for(const[x,w]of d)v.set(x,o(w,x,h,m,g));return v}if(d instanceof Set){const v=new Set;m.set(d,v);for(const x of d)v.add(o(x,void 0,h,m,g));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,v);for(let x=0;x<d.length;x++)v[x]=o(d[x],x,h,m,g);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,v),c(v,d,h,m,g),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(typeof Blob<"u"&&d instanceof Blob){const v=new Blob([d],{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Error){const v=new d.constructor;return m.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,c(v,d,h,m,g),v}if(d instanceof Boolean){const v=new Boolean(d.valueOf());return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Number){const v=new Number(d.valueOf());return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof String){const v=new String(d.valueOf());return m.set(d,v),c(v,d,h,m,g),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return m.set(d,v),c(v,d,h,m,g),v}return d}function c(d,f,h=d,m,g){const y=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<y.length;v++){const x=y[v],w=Object.getOwnPropertyDescriptor(d,x);(w==null||w.writable)&&(d[x]=o(f[x],x,h,m,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=s,e.cloneDeepWithImpl=o,e.copyProperties=c})(G0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G0;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(tP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=K0,r=tP;function n(a){return a=r.cloneDeep(a),i=>t.isMatch(i,a)}e.matches=n})(ZE);var aP={},iP={},sP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G0,r=X0;function n(a,i){return t.cloneDeepWith(a,(s,o,c,u)=>{const d=i==null?void 0:i(s,o,c,u);if(d!==void 0)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(sP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sP;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(iP);var oP={},J0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(J0);var lP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Y0;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(lP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=B0,r=J0,n=lP,a=qh;function i(s,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&(s==null?void 0:s[o])==null?c=a.toPath(o):c=[o],c.length===0)return!1;let u=s;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=i})(oP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=K0,r=Hh,n=iP,a=Kh,i=oP;function s(o,c){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,o);return d===void 0?i.has(u,o):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=s})(aP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=W0,r=QE,n=ZE,a=aP;function i(s){if(s==null)return t.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?a.matchesProperty(s[0],s[1]):n.matches(s);case"string":case"symbol":case"number":return r.property(s)}}e.iteratee=i})(JE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VE,r=W0,n=GE,a=JE;function i(s,o=r.identity){return n.isArrayLikeObject(s)?t.uniqBy(Array.from(s),a.iteratee(o)):[]}e.uniqBy=i})(qE);var lB=qE.uniqBy;const $_=Ka(lB);function cB(e,t,r){return t===!0?$_(e,r):typeof t=="function"?$_(e,t):e}var cP={exports:{}},uP={},dP={exports:{}},fP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lo=p;function uB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dB=typeof Object.is=="function"?Object.is:uB,fB=Lo.useState,hB=Lo.useEffect,pB=Lo.useLayoutEffect,mB=Lo.useDebugValue;function gB(e,t){var r=t(),n=fB({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return pB(function(){a.value=r,a.getSnapshot=t,Mm(a)&&i({inst:a})},[e,r,t]),hB(function(){return Mm(a)&&i({inst:a}),e(function(){Mm(a)&&i({inst:a})})},[e]),mB(r),r}function Mm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!dB(e,r)}catch{return!0}}function vB(e,t){return t()}var yB=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?vB:gB;fP.useSyncExternalStore=Lo.useSyncExternalStore!==void 0?Lo.useSyncExternalStore:yB;dP.exports=fP;var xB=dP.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gh=p,bB=xB;function wB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _B=typeof Object.is=="function"?Object.is:wB,jB=bB.useSyncExternalStore,SB=Gh.useRef,NB=Gh.useEffect,kB=Gh.useMemo,CB=Gh.useDebugValue;uP.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=SB(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=kB(function(){function c(m){if(!u){if(u=!0,d=m,m=n(m),a!==void 0&&s.hasValue){var g=s.value;if(a(g,m))return f=g}return f=m}if(g=f,_B(d,m))return g;var y=n(m);return a!==void 0&&a(g,y)?(d=m,g):(d=m,f=y)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,a]);var o=jB(e,i[0],i[1]);return NB(function(){s.hasValue=!0,s.value=o},[o]),CB(o),o};cP.exports=uP;var EB=cP.exports,Q0=p.createContext(null),PB=e=>e,Dt=()=>{var e=p.useContext(Q0);return e?e.store.dispatch:PB},Ed=()=>{},OB=()=>Ed,AB=(e,t)=>e===t;function Se(e){var t=p.useContext(Q0);return EB.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:OB,t?t.store.getState:Ed,t?t.store.getState:Ed,t?e:Ed,AB)}function TB(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function DB(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function IB(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var L_=e=>Array.isArray(e)?e:[e];function RB(e){const t=Array.isArray(e[0])?e[0]:e;return IB(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function MB(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var $B=class{constructor(e){this.value=e}deref(){return this.value}},LB=typeof WeakRef<"u"?WeakRef:$B,FB=0,F_=1;function Xu(){return{s:FB,v:void 0,o:null,p:null}}function hP(e,t={}){let r=Xu();const{resultEqualityCheck:n}=t;let a,i=0;function s(){var f;let o=r;const{length:c}=arguments;for(let h=0,m=c;h<m;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let y=o.o;y===null&&(o.o=y=new WeakMap);const v=y.get(g);v===void 0?(o=Xu(),y.set(g,o)):o=v}else{let y=o.p;y===null&&(o.p=y=new Map);const v=y.get(g);v===void 0?(o=Xu(),y.set(g,o)):o=v}}const u=o;let d;if(o.s===F_)d=o.v;else if(d=e.apply(null,arguments),i++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,i!==0&&i--),a=typeof d=="object"&&d!==null||typeof d=="function"?new LB(d):d}return u.s=F_,u.v=d,d}return s.clearCache=()=>{r=Xu(),s.resetResultsCount()},s.resultsCount=()=>i,s.resetResultsCount=()=>{i=0},s}function BB(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let i=0,s=0,o,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),TB(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:m=hP,argsMemoizeOptions:g=[]}=d,y=L_(h),v=L_(g),x=RB(a),w=f(function(){return i++,u.apply(null,arguments)},...y),b=m(function(){s++;const j=MB(x,arguments);return o=w.apply(null,j),o},...v);return Object.assign(b,{resultFunc:u,memoizedResultFunc:w,dependencies:x,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var U=BB(hP),UB=Object.assign((e,t=U)=>{DB(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((s,o,c)=>(s[r[c]]=o,s),{}))},{withTypes:()=>UB}),pP={},mP={},gP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,i)=>{if(n!==a){const s=t(n),o=t(a);if(s===o&&s===0){if(n<a)return i==="desc"?1:-1;if(n>a)return i==="desc"?-1:1}return i==="desc"?o-s:s-o}return 0};e.compareValues=r})(gP);var vP={},Z0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(Z0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z0,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,s){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||s!=null&&Object.hasOwn(s,i)}e.isKey=a})(vP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gP,r=vP,n=qh;function a(i,s,o,c){if(i==null)return[];o=c?void 0:o,Array.isArray(i)||(i=Object.values(i)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(m=>String(m));const u=(m,g)=>{let y=m;for(let v=0;v<g.length&&y!=null;++v)y=y[g[v]];return y},d=(m,g)=>g==null||m==null?g:typeof m=="object"&&"key"in m?Object.hasOwn(g,m.key)?g[m.key]:u(g,m.path):typeof m=="function"?m(g):Array.isArray(m)?u(g,m):typeof g=="object"?g[m]:g,f=s.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return i.map(m=>({original:m,criteria:f.map(g=>d(g,m))})).slice().sort((m,g)=>{for(let y=0;y<f.length;y++){const v=t.compareValues(m.criteria[y],g.criteria[y],o[y]);if(v!==0)return v}return 0}).map(m=>m.original)}e.orderBy=a})(mP);var yP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],i=Math.floor(n),s=(o,c)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&c<i?s(d,c+1):a.push(d)}};return s(r,0),a}e.flatten=t})(yP);var ex={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=J0,r=Vh,n=H0,a=V0;function i(s,o,c){return n.isObject(c)&&(typeof o=="number"&&r.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?a.eq(c[o],s):!1}e.isIterateeCall=i})(ex);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mP,r=yP,n=ex;function a(i,...s){const o=s.length;return o>1&&n.isIterateeCall(i,s[0],s[1])?s=[]:o>2&&n.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),t.orderBy(i,r.flatten(s),["asc"])}e.sortBy=a})(pP);var zB=pP.sortBy;const Yh=Ka(zB);var xP=e=>e.legend.settings,WB=e=>e.legend.size,KB=e=>e.legend.payload;U([KB,xP],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Yh(n,r):n});var Ju=1;function HB(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=p.useState({height:0,left:0,top:0,width:0}),n=p.useCallback(a=>{if(a!=null){var i=a.getBoundingClientRect(),s={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(s.height-t.height)>Ju||Math.abs(s.left-t.left)>Ju||Math.abs(s.top-t.top)>Ju||Math.abs(s.width-t.width)>Ju)&&r({height:s.height,left:s.left,top:s.top,width:s.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function or(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var qB=typeof Symbol=="function"&&Symbol.observable||"@@observable",B_=qB,$m=()=>Math.random().toString(36).substring(7).split("").join("."),VB={INIT:`@@redux/INIT${$m()}`,REPLACE:`@@redux/REPLACE${$m()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${$m()}`},bf=VB;function tx(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function bP(e,t,r){if(typeof e!="function")throw new Error(or(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(or(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(or(1));return r(bP)(e,t)}let n=e,a=t,i=new Map,s=i,o=0,c=!1;function u(){s===i&&(s=new Map,i.forEach((v,x)=>{s.set(x,v)}))}function d(){if(c)throw new Error(or(3));return a}function f(v){if(typeof v!="function")throw new Error(or(4));if(c)throw new Error(or(5));let x=!0;u();const w=o++;return s.set(w,v),function(){if(x){if(c)throw new Error(or(6));x=!1,u(),s.delete(w),i=null}}}function h(v){if(!tx(v))throw new Error(or(7));if(typeof v.type>"u")throw new Error(or(8));if(typeof v.type!="string")throw new Error(or(17));if(c)throw new Error(or(9));try{c=!0,a=n(a,v)}finally{c=!1}return(i=s).forEach(w=>{w()}),v}function m(v){if(typeof v!="function")throw new Error(or(10));n=v,h({type:bf.REPLACE})}function g(){const v=f;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(or(11));function w(){const _=x;_.next&&_.next(d())}return w(),{unsubscribe:v(w)}},[B_](){return this}}}return h({type:bf.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:m,[B_]:g}}function GB(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:bf.INIT})>"u")throw new Error(or(12));if(typeof r(void 0,{type:bf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(or(13))})}function wP(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const s=t[i];typeof e[s]=="function"&&(r[s]=e[s])}const n=Object.keys(r);let a;try{GB(r)}catch(i){a=i}return function(s={},o){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],m=s[f],g=h(m,o);if(typeof g>"u")throw o&&o.type,new Error(or(14));u[f]=g,c=c||g!==m}return c=c||n.length!==Object.keys(s).length,c?u:s}}function wf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function YB(...e){return t=>(r,n)=>{const a=t(r,n);let i=()=>{throw new Error(or(15))};const s={getState:a.getState,dispatch:(c,...u)=>i(c,...u)},o=e.map(c=>c(s));return i=wf(...o)(a.dispatch),{...a,dispatch:i}}}function _P(e){return tx(e)&&"type"in e&&typeof e.type=="string"}var jP=Symbol.for("immer-nothing"),U_=Symbol.for("immer-draftable"),dn=Symbol.for("immer-state");function Un(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Cc=Object.getPrototypeOf;function Ns(e){return!!e&&!!e[dn]}function La(e){var t;return e?SP(e)||Array.isArray(e)||!!e[U_]||!!((t=e.constructor)!=null&&t[U_])||eu(e)||Jh(e):!1}var XB=Object.prototype.constructor.toString(),z_=new WeakMap;function SP(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=z_.get(r);return n===void 0&&(n=Function.toString.call(r),z_.set(r,n)),n===XB}function _f(e,t,r=!0){Xh(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function Xh(e){const t=e[dn];return t?t.type_:Array.isArray(e)?1:eu(e)?2:Jh(e)?3:0}function Cv(e,t){return Xh(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function NP(e,t,r){const n=Xh(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function JB(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function eu(e){return e instanceof Map}function Jh(e){return e instanceof Set}function Zi(e){return e.copy_||e.base_}function Ev(e,t){if(eu(e))return new Map(e);if(Jh(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=SP(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[dn];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){const s=a[i],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(Cc(e),n)}else{const n=Cc(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function rx(e,t=!1){return Qh(e)||Ns(e)||!La(e)||(Xh(e)>1&&Object.defineProperties(e,{set:Qu,add:Qu,clear:Qu,delete:Qu}),Object.freeze(e),t&&Object.values(e).forEach(r=>rx(r,!0))),e}function QB(){Un(2)}var Qu={value:QB};function Qh(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var ZB={};function ks(e){const t=ZB[e];return t||Un(0,e),t}var Ec;function kP(){return Ec}function eU(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function W_(e,t){t&&(ks("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Pv(e){Ov(e),e.drafts_.forEach(tU),e.drafts_=null}function Ov(e){e===Ec&&(Ec=e.parent_)}function K_(e){return Ec=eU(Ec,e)}function tU(e){const t=e[dn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function H_(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[dn].modified_&&(Pv(t),Un(4)),La(e)&&(e=jf(t,e),t.parent_||Sf(t,e)),t.patches_&&ks("Patches").generateReplacementPatches_(r[dn].base_,e,t.patches_,t.inversePatches_)):e=jf(t,r,[]),Pv(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==jP?e:void 0}function jf(e,t,r){if(Qh(t))return t;const n=e.immer_.shouldUseStrictIteration(),a=t[dn];if(!a)return _f(t,(i,s)=>q_(e,a,t,i,s,r),n),t;if(a.scope_!==e)return t;if(!a.modified_)return Sf(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const i=a.copy_;let s=i,o=!1;a.type_===3&&(s=new Set(i),i.clear(),o=!0),_f(s,(c,u)=>q_(e,a,i,c,u,r,o),n),Sf(e,i,!1),r&&e.patches_&&ks("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function q_(e,t,r,n,a,i,s){if(a==null||typeof a!="object"&&!s)return;const o=Qh(a);if(!(o&&!s)){if(Ns(a)){const c=i&&t&&t.type_!==3&&!Cv(t.assigned_,n)?i.concat(n):void 0,u=jf(e,a,c);if(NP(r,n,u),Ns(u))e.canAutoFreeze_=!1;else return}else s&&r.add(a);if(La(a)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===a&&o)return;jf(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(eu(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Sf(e,a)}}}function Sf(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&rx(t,r)}function rU(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:kP(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=nx;r&&(a=[n],i=Pc);const{revoke:s,proxy:o}=Proxy.revocable(a,i);return n.draft_=o,n.revoke_=s,o}var nx={get(e,t){if(t===dn)return e;const r=Zi(e);if(!Cv(r,t))return nU(e,r,t);const n=r[t];return e.finalized_||!La(n)?n:n===Lm(e.base_,t)?(Fm(e),e.copy_[t]=Tv(n,e)):n},has(e,t){return t in Zi(e)},ownKeys(e){return Reflect.ownKeys(Zi(e))},set(e,t,r){const n=CP(Zi(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=Lm(Zi(e),t),i=a==null?void 0:a[dn];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(JB(r,a)&&(r!==void 0||Cv(e.base_,t)))return!0;Fm(e),Av(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Lm(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Fm(e),Av(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Zi(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Un(11)},getPrototypeOf(e){return Cc(e.base_)},setPrototypeOf(){Un(12)}},Pc={};_f(nx,(e,t)=>{Pc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Pc.deleteProperty=function(e,t){return Pc.set.call(this,e,t,void 0)};Pc.set=function(e,t,r){return nx.set.call(this,e[0],t,r,e[0])};function Lm(e,t){const r=e[dn];return(r?Zi(r):e)[t]}function nU(e,t,r){var a;const n=CP(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function CP(e,t){if(!(t in e))return;let r=Cc(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Cc(r)}}function Av(e){e.modified_||(e.modified_=!0,e.parent_&&Av(e.parent_))}function Fm(e){e.copy_||(e.copy_=Ev(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var aU=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const s=this;return function(c=i,...u){return s.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Un(6),n!==void 0&&typeof n!="function"&&Un(7);let a;if(La(t)){const i=K_(this),s=Tv(t,void 0);let o=!0;try{a=r(s),o=!1}finally{o?Pv(i):Ov(i)}return W_(i,n),H_(a,i)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===jP&&(a=void 0),this.autoFreeze_&&rx(a,!0),n){const i=[],s=[];ks("Patches").generateReplacementPatches_(t,a,i,s),n(i,s)}return a}else Un(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(s,...o)=>this.produceWithPatches(s,c=>t(c,...o));let n,a;return[this.produce(t,r,(s,o)=>{n=s,a=o}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){La(e)||Un(8),Ns(e)&&(e=Ca(e));const t=K_(this),r=Tv(e,void 0);return r[dn].isManual_=!0,Ov(t),r}finishDraft(e,t){const r=e&&e[dn];(!r||!r.isManual_)&&Un(9);const{scope_:n}=r;return W_(n,t),H_(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=ks("Patches").applyPatches_;return Ns(e)?n(e,t):this.produce(e,a=>n(a,t))}};function Tv(e,t){const r=eu(e)?ks("MapSet").proxyMap_(e,t):Jh(e)?ks("MapSet").proxySet_(e,t):rU(e,t);return(t?t.scope_:kP()).drafts_.push(r),r}function Ca(e){return Ns(e)||Un(10,e),EP(e)}function EP(e){if(!La(e)||Qh(e))return e;const t=e[dn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Ev(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Ev(e,!0);return _f(r,(a,i)=>{NP(r,a,EP(i))},n),t&&(t.finalized_=!1),r}var Dv=new aU,PP=Dv.produce,iU=Dv.setUseStrictIteration.bind(Dv);function OP(e){return({dispatch:r,getState:n})=>a=>i=>typeof i=="function"?i(r,n,e):a(i)}var sU=OP(),oU=OP,lU=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?wf:wf.apply(null,arguments)};function En(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(ln(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>_P(n)&&n.type===e,r}var AP=class Ll extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Ll.prototype)}static get[Symbol.species](){return Ll}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Ll(...t[0].concat(this)):new Ll(...t.concat(this))}};function V_(e){return La(e)?PP(e,()=>{}):e}function Zu(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function cU(e){return typeof e=="boolean"}var uU=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t??{};let s=new AP;return r&&(cU(r)?s.push(sU):s.push(oU(r.extraArgument))),s},TP="RTK_autoBatch",Wt=()=>e=>({payload:e,meta:{[TP]:!0}}),G_=e=>t=>{setTimeout(t,e)},DP=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,i=!1,s=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:G_(10):e.type==="callback"?e.queueNotification:G_(e.timeout),u=()=>{s=!1,i&&(i=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[TP]),i=!a,i&&(s||(s=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},dU=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new AP(e);return n&&a.push(DP(typeof n=="object"?n:void 0)),a};function fU(e){const t=uU(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:i=void 0,enhancers:s=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(tx(r))o=wP(r);else throw new Error(ln(1));let c;typeof n=="function"?c=n(t):c=t();let u=wf;a&&(u=lU({trace:!1,...typeof a=="object"&&a}));const d=YB(...c),f=dU(d);let h=typeof s=="function"?s(f):f();const m=u(...h);return bP(o,i,m)}function IP(e){const t={},r=[];let n;const a={addCase(i,s){const o=typeof i=="string"?i:i.type;if(!o)throw new Error(ln(28));if(o in t)throw new Error(ln(29));return t[o]=s,a},addAsyncThunk(i,s){return s.pending&&(t[i.pending.type]=s.pending),s.rejected&&(t[i.rejected.type]=s.rejected),s.fulfilled&&(t[i.fulfilled.type]=s.fulfilled),s.settled&&r.push({matcher:i.settled,reducer:s.settled}),a},addMatcher(i,s){return r.push({matcher:i,reducer:s}),a},addDefaultCase(i){return n=i,a}};return e(a),[t,r,n]}iU(!1);function hU(e){return typeof e=="function"}function pU(e,t){let[r,n,a]=IP(t),i;if(hU(e))i=()=>V_(e());else{const o=V_(e);i=()=>o}function s(o=i(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(Ns(d)){const m=f(d,c);return m===void 0?d:m}else{if(La(d))return PP(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return s.getInitialState=i,s}var mU="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",gU=(e=21)=>{let t="",r=e;for(;r--;)t+=mU[Math.random()*64|0];return t},vU=Symbol.for("rtk-slice-createasyncthunk");function yU(e,t){return`${e}/${t}`}function xU({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[vU];return function(a){const{name:i,reducerPath:s=i}=a;if(!i)throw new Error(ln(11));const o=(typeof a.reducers=="function"?a.reducers(wU()):a.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(_,j){const S=typeof _=="string"?_:_.type;if(!S)throw new Error(ln(12));if(S in u.sliceCaseReducersByType)throw new Error(ln(13));return u.sliceCaseReducersByType[S]=j,d},addMatcher(_,j){return u.sliceMatchers.push({matcher:_,reducer:j}),d},exposeAction(_,j){return u.actionCreators[_]=j,d},exposeCaseReducer(_,j){return u.sliceCaseReducersByName[_]=j,d}};c.forEach(_=>{const j=o[_],S={reducerName:_,type:yU(i,_),createNotation:typeof a.reducers=="function"};jU(j)?NU(S,j,d,t):_U(S,j,d)});function f(){const[_={},j=[],S=void 0]=typeof a.extraReducers=="function"?IP(a.extraReducers):[a.extraReducers],N={..._,...u.sliceCaseReducersByType};return pU(a.initialState,k=>{for(let E in N)k.addCase(E,N[E]);for(let E of u.sliceMatchers)k.addMatcher(E.matcher,E.reducer);for(let E of j)k.addMatcher(E.matcher,E.reducer);S&&k.addDefaultCase(S)})}const h=_=>_,m=new Map,g=new WeakMap;let y;function v(_,j){return y||(y=f()),y(_,j)}function x(){return y||(y=f()),y.getInitialState()}function w(_,j=!1){function S(k){let E=k[_];return typeof E>"u"&&j&&(E=Zu(g,S,x)),E}function N(k=h){const E=Zu(m,j,()=>new WeakMap);return Zu(E,k,()=>{const P={};for(const[A,D]of Object.entries(a.selectors??{}))P[A]=bU(D,k,()=>Zu(g,k,x),j);return P})}return{reducerPath:_,getSelectors:N,get selectors(){return N(S)},selectSlice:S}}const b={name:i,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:x,...w(s),injectInto(_,{reducerPath:j,...S}={}){const N=j??s;return _.inject({reducerPath:N,reducer:v},S),{...b,...w(N,!0)}}};return b}}function bU(e,t,r,n){function a(i,...s){let o=t(i);return typeof o>"u"&&n&&(o=r()),e(o,...s)}return a.unwrapped=e,a}var Hr=xU();function wU(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function _U({type:e,reducerName:t,createNotation:r},n,a){let i,s;if("reducer"in n){if(r&&!SU(n))throw new Error(ln(17));i=n.reducer,s=n.prepare}else i=n;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,s?En(e,s):En(e))}function jU(e){return e._reducerDefinitionType==="asyncThunk"}function SU(e){return e._reducerDefinitionType==="reducerWithPrepare"}function NU({type:e,reducerName:t},r,n,a){if(!a)throw new Error(ln(18));const{payloadCreator:i,fulfilled:s,pending:o,rejected:c,settled:u,options:d}=r,f=a(e,i,d);n.exposeAction(t,f),s&&n.addCase(f.fulfilled,s),o&&n.addCase(f.pending,o),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:s||ed,pending:o||ed,rejected:c||ed,settled:u||ed})}function ed(){}var kU="task",RP="listener",MP="completed",ax="cancelled",CU=`task-${ax}`,EU=`task-${MP}`,Iv=`${RP}-${ax}`,PU=`${RP}-${MP}`,Zh=class{constructor(e){Kp(this,"name","TaskAbortError");Kp(this,"message");this.code=e,this.message=`${kU} ${ax} (reason: ${e})`}},ix=(e,t)=>{if(typeof e!="function")throw new TypeError(ln(32))},Nf=()=>{},$P=(e,t=Nf)=>(e.catch(t),e),LP=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ps=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ms=e=>{if(e.aborted){const{reason:t}=e;throw new Zh(t)}};function FP(e,t){let r=Nf;return new Promise((n,a)=>{const i=()=>a(new Zh(e.reason));if(e.aborted){i();return}r=LP(e,i),t.finally(()=>r()).then(n,a)}).finally(()=>{r=Nf})}var OU=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Zh?"cancelled":"rejected",error:r}}finally{t==null||t()}},kf=e=>t=>$P(FP(e,t).then(r=>(ms(e),r))),BP=e=>{const t=kf(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:No}=Object,Y_={},ep="listenerMiddleware",AU=(e,t)=>{const r=n=>LP(e,()=>ps(n,e.reason));return(n,a)=>{ix(n);const i=new AbortController;r(i);const s=OU(async()=>{ms(e),ms(i.signal);const o=await n({pause:kf(i.signal),delay:BP(i.signal),signal:i.signal});return ms(i.signal),o},()=>ps(i,EU));return a!=null&&a.autoJoin&&t.push(s.catch(Nf)),{result:kf(e)(s),cancel(){ps(i,CU)}}}},TU=(e,t)=>{const r=async(n,a)=>{ms(t);let i=()=>{};const o=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});i=()=>{d(),u()}})];a!=null&&o.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await FP(t,Promise.race(o));return ms(t),c}finally{i()}};return(n,a)=>$P(r(n,a))},UP=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:i}=e;if(t)a=En(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(ln(21));return ix(i),{predicate:a,type:t,effect:i}},zP=No(e=>{const{type:t,predicate:r,effect:n}=UP(e);return{id:gU(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(ln(22))}}},{withTypes:()=>zP}),X_=(e,t)=>{const{type:r,effect:n,predicate:a}=UP(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===a)&&i.effect===n)},Rv=e=>{e.pending.forEach(t=>{ps(t,Iv)})},DU=(e,t)=>()=>{for(const r of t.keys())Rv(r);e.clear()},J_=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},WP=No(En(`${ep}/add`),{withTypes:()=>WP}),IU=En(`${ep}/removeAll`),KP=No(En(`${ep}/remove`),{withTypes:()=>KP}),RU=(...e)=>{console.error(`${ep}/error`,...e)},tu=(e={})=>{const t=new Map,r=new Map,n=m=>{const g=r.get(m)??0;r.set(m,g+1)},a=m=>{const g=r.get(m)??1;g===1?r.delete(m):r.set(m,g-1)},{extra:i,onError:s=RU}=e;ix(s);const o=m=>(m.unsubscribe=()=>t.delete(m.id),t.set(m.id,m),g=>{m.unsubscribe(),g!=null&&g.cancelActive&&Rv(m)}),c=m=>{const g=X_(t,m)??zP(m);return o(g)};No(c,{withTypes:()=>c});const u=m=>{const g=X_(t,m);return g&&(g.unsubscribe(),m.cancelActive&&Rv(g)),!!g};No(u,{withTypes:()=>u});const d=async(m,g,y,v)=>{const x=new AbortController,w=TU(c,x.signal),b=[];try{m.pending.add(x),n(m),await Promise.resolve(m.effect(g,No({},y,{getOriginalState:v,condition:(_,j)=>w(_,j).then(Boolean),take:w,delay:BP(x.signal),pause:kf(x.signal),extra:i,signal:x.signal,fork:AU(x.signal,b),unsubscribe:m.unsubscribe,subscribe:()=>{t.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((_,j,S)=>{_!==x&&(ps(_,Iv),S.delete(_))})},cancel:()=>{ps(x,Iv),m.pending.delete(x)},throwIfCancelled:()=>{ms(x.signal)}})))}catch(_){_ instanceof Zh||J_(s,_,{raisedBy:"effect"})}finally{await Promise.all(b),ps(x,PU),a(m),m.pending.delete(x)}},f=DU(t,r);return{middleware:m=>g=>y=>{if(!_P(y))return g(y);if(WP.match(y))return c(y.payload);if(IU.match(y)){f();return}if(KP.match(y))return u(y.payload);let v=m.getState();const x=()=>{if(v===Y_)throw new Error(ln(23));return v};let w;try{if(w=g(y),t.size>0){const b=m.getState(),_=Array.from(t.values());for(const j of _){let S=!1;try{S=j.predicate(y,b,v)}catch(N){S=!1,J_(s,N,{raisedBy:"predicate"})}S&&d(j,y,m,x)}}}finally{v=Y_}return w},startListening:c,stopListening:u,clearListeners:f}};function ln(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var MU={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},HP=Hr({name:"chartLayout",initialState:MU,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,a,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(a=t.payload.bottom)!==null&&a!==void 0?a:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:$U,setLayout:LU,setChartSize:FU,setScale:BU}=HP.actions,UU=HP.reducer;function qP(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Q_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function po(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q_(Object(r),!0).forEach(function(n){zU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zU(e,t,r){return(t=WU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WU(e){var t=KU(e,"string");return typeof t=="symbol"?t:t+""}function KU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tr(e,t,r){return pt(e)||pt(t)?r:da(t)?$o(e,t,r):typeof t=="function"?t(e):r}var HU=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:i,verticalAlign:s,layout:o}=t;if((o==="vertical"||o==="horizontal"&&s==="middle")&&i!=="center"&&we(e[i]))return po(po({},e),{},{[i]:e[i]+(n||0)});if((o==="horizontal"||o==="vertical"&&i==="center")&&s!=="middle"&&we(e[s]))return po(po({},e),{},{[s]:e[s]+(a||0)})}return e},Ri=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",VP=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var a,i,s=e.map(o=>(o.coordinate===t&&(a=!0),o.coordinate===r&&(i=!0),o.coordinate));return a||s.push(t),i||s.push(r),s},GP=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:i,scale:s,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:m}=e;if(!s)return null;var g=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,y=a==="category"&&s.bandwidth?s.bandwidth()/g:0;if(y=m==="angleAxis"&&i&&i.length>=2?Br(i[0]-i[1])*2*y:y,f||h){var v=(f||h||[]).map((x,w)=>{var b=n?n.indexOf(x):x;return{coordinate:s(b)+y,value:x,offset:y,index:w}});return v.filter(x=>!Xn(x.coordinate))}return c&&u?u.map((x,w)=>({coordinate:s(x)+y,value:x,index:w,offset:y})):s.ticks&&d!=null?s.ticks(d).map((x,w)=>({coordinate:s(x)+y,value:x,offset:y,index:w})):s.domain().map((x,w)=>({coordinate:s(x)+y,value:n?n[x]:x,index:w,offset:y}))},Z_=1e-4,qU=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-Z_,i=Math.max(n[0],n[1])+Z_,s=e(t[0]),o=e(t[r-1]);(s<a||s>i||o<a||o>i)&&e.domain([t[0],t[r-1]])}},VU=(e,t)=>{if(!t||t.length!==2||!we(t[0])||!we(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!we(e[0])||e[0]<r)&&(a[0]=r),(!we(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},GU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0,s=0;s<t;++s){var o=Xn(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=i,e[s][r][1]=i+o,i=e[s][r][1])}},YU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0;i<t;++i){var s=Xn(e[i][r][1])?e[i][r][0]:e[i][r][1];s>=0?(e[i][r][0]=a,e[i][r][1]=a+s,a=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},XU={sign:GU,expand:UF,none:Mo,silhouette:zF,wiggle:WF,positive:YU},JU=(e,t,r)=>{var n=XU[r],a=BF().keys(t).value((i,s)=>Number(tr(i,s,0))).order(Nv).offset(n);return a(e)};function QU(e){return e==null?void 0:String(e)}function e1(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:i,dataKey:s}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!pt(a[t.dataKey])){var o=zE(r,"value",a[t.dataKey]);if(o)return o.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=tr(a,pt(s)?t.dataKey:s);return pt(c)?null:t.scale(c)}var t1=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:i,index:s}=e;if(t.type==="category")return r[s]?r[s].coordinate+n:null;var o=tr(i,t.dataKey,t.scale.domain()[s]);return pt(o)?null:t.scale(o)-a/2+n},ZU=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},ez=e=>{var t=e.flat(2).filter(we);return[Math.min(...t),Math.max(...t)]},tz=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],rz=(e,t,r)=>{if(e!=null)return tz(Object.keys(e).reduce((n,a)=>{var i=e[a],{stackedData:s}=i,o=s.reduce((c,u)=>{var d=qP(u,t,r),f=ez(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},r1=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,n1=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Fo=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=Yh(t,d=>d.coordinate),i=1/0,s=1,o=a.length;s<o;s++){var c=a[s],u=a[s-1];i=Math.min((c.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function a1(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:i}=e;return po(po({},t),{},{dataKey:r,payload:n,value:a,name:i})}function tp(e,t){if(e)return String(e);if(typeof t=="string")return t}var nz=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},az=(e,t)=>t==="centric"?e.angle:e.radius,qa=e=>e.layout.width,Va=e=>e.layout.height,iz=e=>e.layout.scale,YP=e=>e.layout.margin,rp=U(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),np=U(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),sz="data-recharts-item-index",oz="data-recharts-item-data-key",ru=60;function i1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function td(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i1(Object(r),!0).forEach(function(n){lz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lz(e,t,r){return(t=cz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cz(e){var t=uz(e,"string");return typeof t=="symbol"?t:t+""}function uz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dz=e=>e.brush.height;function fz(e){var t=np(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:ru;return r+a}return r},0)}function hz(e){var t=np(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:ru;return r+a}return r},0)}function pz(e){var t=rp(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function mz(e){var t=rp(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var rr=U([qa,Va,YP,dz,fz,hz,pz,mz,xP,WB],(e,t,r,n,a,i,s,o,c,u)=>{var d={left:(r.left||0)+a,right:(r.right||0)+i},f={top:(r.top||0)+s,bottom:(r.bottom||0)+o},h=td(td({},f),d),m=h.bottom;h.bottom+=n,h=HU(h,c,u);var g=e-h.left-h.right,y=t-h.top-h.bottom;return td(td({brushBottom:m},h),{},{width:Math.max(g,0),height:Math.max(y,0)})}),gz=U(rr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),sx=U(qa,Va,(e,t)=>({x:0,y:0,width:e,height:t})),vz=p.createContext(null),br=()=>p.useContext(vz)!=null,ap=e=>e.brush,ip=U([ap,rr,YP],(e,t,r)=>({height:e.height,x:we(e.x)?e.x:t.left,y:we(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:we(e.width)?e.width:t.width})),XP={},JP={},QP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:i}={}){let s,o=null;const c=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),d=()=>{o!==null&&(r.apply(s,o),s=void 0,o=null)},f=()=>{u&&d(),y()};let h=null;const m=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},g=()=>{h!==null&&(clearTimeout(h),h=null)},y=()=>{g(),s=void 0,o=null},v=()=>{d()},x=function(...w){if(a!=null&&a.aborted)return;s=this,o=w;const b=h==null;m(),c&&b&&d()};return x.schedule=m,x.cancel=y,x.flush=v,a==null||a.addEventListener("abort",y,{once:!0}),x}e.debounce=t})(QP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QP;function r(n,a=0,i={}){typeof i!="object"&&(i={});const{leading:s=!1,trailing:o=!0,maxWait:c}=i,u=Array(2);s&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...y){d=n.apply(this,y),f=null},a,{edges:u}),m=function(...y){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,y),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,y),d)},g=()=>(h.flush(),d);return m.cancel=h.cancel,m.flush=g,m}e.debounce=r})(JP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JP;function r(n,a=0,i={}){const{leading:s=!0,trailing:o=!0}=i;return t.debounce(n,a,{leading:s,maxWait:a,trailing:o})}e.throttle=r})(XP);var yz=XP.throttle;const xz=Ka(yz);var Cf=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},ZP=(e,t,r)=>{var{width:n="100%",height:a="100%",aspect:i,maxHeight:s}=r,o=$a(n)?e:Number(n),c=$a(a)?t:Number(a);return i&&i>0&&(o?c=o/i:c&&(o=c*i),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:o,calculatedHeight:c}},bz={width:0,height:0,overflow:"visible"},wz={width:0,overflowX:"visible"},_z={height:0,overflowY:"visible"},jz={},Sz=e=>{var{width:t,height:r}=e,n=$a(t),a=$a(r);return n&&a?bz:n?wz:a?_z:jz};function Nz(e){var{width:t,height:r,aspect:n}=e,a=t,i=r;return a===void 0&&i===void 0?(a="100%",i="100%"):a===void 0?a=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:a,height:i}}function Tt(e){return Number.isFinite(e)}function fa(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Mv(){return Mv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mv.apply(null,arguments)}function s1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function o1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s1(Object(r),!0).forEach(function(n){kz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kz(e,t,r){return(t=Cz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cz(e){var t=Ez(e,"string");return typeof t=="symbol"?t:t+""}function Ez(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eO=p.createContext({width:-1,height:-1});function Pz(e){return fa(e.width)&&fa(e.height)}function tO(e){var{children:t,width:r,height:n}=e,a=p.useMemo(()=>({width:r,height:n}),[r,n]);return Pz(a)?p.createElement(eO.Provider,{value:a},t):null}var ox=()=>p.useContext(eO),Oz=p.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:i,minWidth:s=0,minHeight:o,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:m,style:g={}}=e,y=p.useRef(null),v=p.useRef();v.current=m,p.useImperativeHandle(t,()=>y.current);var[x,w]=p.useState({containerWidth:n.width,containerHeight:n.height}),b=p.useCallback((k,E)=>{w(P=>{var A=Math.round(k),D=Math.round(E);return P.containerWidth===A&&P.containerHeight===D?P:{containerWidth:A,containerHeight:D}})},[]);p.useEffect(()=>{if(y.current==null||typeof ResizeObserver>"u")return al;var k=D=>{var H,{width:Q,height:ee}=D[0].contentRect;b(Q,ee),(H=v.current)===null||H===void 0||H.call(v,Q,ee)};d>0&&(k=xz(k,d,{trailing:!0,leading:!1}));var E=new ResizeObserver(k),{width:P,height:A}=y.current.getBoundingClientRect();return b(P,A),E.observe(y.current),()=>{E.disconnect()}},[b,d]);var{containerWidth:_,containerHeight:j}=x;Cf(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:S,calculatedHeight:N}=ZP(_,j,{width:a,height:i,aspect:r,maxHeight:c});return Cf(S!=null&&S>0||N!=null&&N>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,S,N,a,i,s,o,r),p.createElement("div",{id:f?"".concat(f):void 0,className:Je("recharts-responsive-container",h),style:o1(o1({},g),{},{width:a,height:i,minWidth:s,minHeight:o,maxHeight:c}),ref:y},p.createElement("div",{style:Sz({width:a,height:i})},p.createElement(tO,{width:S,height:N},u)))}),l1=p.forwardRef((e,t)=>{var r=ox();if(fa(r.width)&&fa(r.height))return e.children;var{width:n,height:a}=Nz({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:s}=ZP(void 0,void 0,{width:n,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return we(i)&&we(s)?p.createElement(tO,{width:i,height:s},e.children):p.createElement(Oz,Mv({},e,{width:n,height:a,ref:t}))});function rO(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var sp=()=>{var e,t=br(),r=Se(gz),n=Se(ip),a=(e=Se(ap))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},Az={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},nO=()=>{var e;return(e=Se(rr))!==null&&e!==void 0?e:Az},aO=()=>Se(qa),iO=()=>Se(Va),He=e=>e.layout.layoutType,nu=()=>Se(He),Tz=()=>{var e=nu();return e!==void 0},op=e=>{var t=Dt(),r=br(),{width:n,height:a}=e,i=ox(),s=n,o=a;return i&&(s=i.width>0?i.width:n,o=i.height>0?i.height:a),p.useEffect(()=>{!r&&fa(s)&&fa(o)&&t(FU({width:s,height:o}))},[t,r,s,o]),null},Dz={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},sO=Hr({name:"legend",initialState:Dz,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Wt()},removeLegendPayload:{reducer(e,t){var r=Ca(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Wt()}}}),{setLegendSize:Mee,setLegendSettings:$ee,addLegendPayload:Iz,removeLegendPayload:Rz}=sO.actions,Mz=sO.reducer;function $v(){return $v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$v.apply(null,arguments)}function c1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Bm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c1(Object(r),!0).forEach(function(n){$z(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $z(e,t,r){return(t=Lz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lz(e){var t=Fz(e,"string");return typeof t=="symbol"?t:t+""}function Fz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bz(e){return Array.isArray(e)&&da(e[0])&&da(e[1])?e.join(" ~ "):e}var Uz=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:i,formatter:s,itemSorter:o,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,m=()=>{if(i&&i.length){var j={padding:0,margin:0},S=(o?Yh(i,o):i).map((N,k)=>{if(N.type==="none")return null;var E=N.formatter||s||Bz,{value:P,name:A}=N,D=P,H=A;if(E){var Q=E(P,A,N,k,i);if(Array.isArray(Q))[D,H]=Q;else if(Q!=null)D=Q;else return null}var ee=Bm({display:"block",paddingTop:4,paddingBottom:4,color:N.color||"#000"},n);return p.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(k),style:ee},da(H)?p.createElement("span",{className:"recharts-tooltip-item-name"},H):null,da(H)?p.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,p.createElement("span",{className:"recharts-tooltip-item-value"},D),p.createElement("span",{className:"recharts-tooltip-item-unit"},N.unit||""))});return p.createElement("ul",{className:"recharts-tooltip-item-list",style:j},S)}return null},g=Bm({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),y=Bm({margin:0},a),v=!pt(d),x=v?d:"",w=Je("recharts-default-tooltip",c),b=Je("recharts-tooltip-label",u);v&&f&&i!==void 0&&i!==null&&(x=f(d,i));var _=h?{role:"status","aria-live":"assertive"}:{};return p.createElement("div",$v({className:w,style:g},_),p.createElement("p",{className:b,style:y},p.isValidElement(x)?x:"".concat(x)),m())},_l="recharts-tooltip-wrapper",zz={visibility:"hidden"};function Wz(e){var{coordinate:t,translateX:r,translateY:n}=e;return Je(_l,{["".concat(_l,"-right")]:we(r)&&t&&we(t.x)&&r>=t.x,["".concat(_l,"-left")]:we(r)&&t&&we(t.x)&&r<t.x,["".concat(_l,"-bottom")]:we(n)&&t&&we(t.y)&&n>=t.y,["".concat(_l,"-top")]:we(n)&&t&&we(t.y)&&n<t.y})}function u1(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=e;if(i&&we(i[n]))return i[n];var d=r[n]-o-(a>0?a:0),f=r[n]+a;if(t[n])return s[n]?d:f;var h=c[n];if(h==null)return 0;if(s[n]){var m=d,g=h;return m<g?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var y=f+o,v=h+u;return y>v?Math.max(d,h):Math.max(f,h)}function Kz(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Hz(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:i,tooltipBox:s,useTranslate3d:o,viewBox:c}=e,u,d,f;return s.height>0&&s.width>0&&r?(d=u1({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),f=u1({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=Kz({translateX:d,translateY:f,useTranslate3d:o})):u=zz,{cssProperties:u,cssClasses:Wz({translateX:d,translateY:f,coordinate:r})}}function d1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d1(Object(r),!0).forEach(function(n){Lv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lv(e,t,r){return(t=qz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qz(e){var t=Vz(e,"string");return typeof t=="symbol"?t:t+""}function Vz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Gz extends p.PureComponent{constructor(){super(...arguments),Lv(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Lv(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:i,coordinate:s,hasPayload:o,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:m,wrapperStyle:g,lastBoundingBox:y,innerRef:v,hasPortalFromProps:x}=this.props,{cssClasses:w,cssProperties:b}=Hz({allowEscapeViewBox:r,coordinate:s,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:y.height,width:y.width},useTranslate3d:h,viewBox:m}),_=x?{}:rd(rd({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),j=rd(rd({},_),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},g);return p.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:j,ref:v},i)}}var Yz=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Is={devToolsEnabled:!1,isSsr:Yz()},oO=()=>{var e;return(e=Se(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Fv(){return Fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fv.apply(null,arguments)}function f1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function h1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f1(Object(r),!0).forEach(function(n){Xz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xz(e,t,r){return(t=Jz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jz(e){var t=Qz(e,"string");return typeof t=="symbol"?t:t+""}function Qz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var p1={curveBasisClosed:PF,curveBasisOpen:OF,curveBasis:EF,curveBumpX:pF,curveBumpY:mF,curveLinearClosed:AF,curveLinear:zh,curveMonotoneX:TF,curveMonotoneY:DF,curveNatural:IF,curveStep:RF,curveStepAfter:$F,curveStepBefore:MF},Ef=e=>Tt(e.x)&&Tt(e.y),m1=e=>e.base!=null&&Ef(e.base)&&Ef(e),jl=e=>e.x,Sl=e=>e.y,Zz=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Zc(e));return(r==="curveMonotone"||r==="curveBump")&&t?p1["".concat(r).concat(t==="vertical"?"Y":"X")]:p1[r]||zh},e8=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:i=!1}=e,s=Zz(t,a),o=i?r.filter(Ef):r,c;if(Array.isArray(n)){var u=r.map((m,g)=>h1(h1({},m),{},{base:n[g]}));a==="vertical"?c=Yu().y(Sl).x1(jl).x0(m=>m.base.x):c=Yu().x(jl).y1(Sl).y0(m=>m.base.y);var d=c.defined(m1).curve(s),f=i?u.filter(m1):u;return d(f)}a==="vertical"&&we(n)?c=Yu().y(Sl).x1(jl).x0(n):we(n)?c=Yu().x(jl).y1(Sl).y0(n):c=EE().x(jl).y(Sl);var h=c.defined(Ef).curve(s);return h(o)},lO=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?e8(e):n;return p.createElement("path",Fv({},Yn(e),U0(e),{className:Je("recharts-curve",t),d:i===null?void 0:i,ref:a}))},t8=["x","y","top","left","width","height","className"];function Bv(){return Bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bv.apply(null,arguments)}function g1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function r8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g1(Object(r),!0).forEach(function(n){n8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function n8(e,t,r){return(t=a8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a8(e){var t=i8(e,"string");return typeof t=="symbol"?t:t+""}function i8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s8(e,t){if(e==null)return{};var r,n,a=o8(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function o8(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var l8=(e,t,r,n,a,i)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),c8=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:i=0,height:s=0,className:o}=e,c=s8(e,t8),u=r8({x:t,y:r,top:n,left:a,width:i,height:s},c);return!we(t)||!we(r)||!we(i)||!we(s)||!we(n)||!we(a)?null:p.createElement("path",Bv({},Er(u),{className:Je("recharts-cross",o),d:l8(t,r,i,s,n,a)}))};function u8(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function v1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function y1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v1(Object(r),!0).forEach(function(n){d8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d8(e,t,r){return(t=f8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f8(e){var t=h8(e,"string");return typeof t=="symbol"?t:t+""}function h8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var p8=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),cO=(e,t,r)=>e.map(n=>"".concat(p8(n)," ").concat(t,"ms ").concat(r)).join(","),m8=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),Oc=(e,t)=>Object.keys(t).reduce((r,n)=>y1(y1({},r),{},{[n]:e(n,t[n])}),{});function x1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ut(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x1(Object(r),!0).forEach(function(n){g8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g8(e,t,r){return(t=v8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v8(e){var t=y8(e,"string");return typeof t=="symbol"?t:t+""}function y8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pf=(e,t,r)=>e+(t-e)*r,Uv=e=>{var{from:t,to:r}=e;return t!==r},uO=(e,t,r)=>{var n=Oc((a,i)=>{if(Uv(i)){var[s,o]=e(i.from,i.to,i.velocity);return Ut(Ut({},i),{},{from:s,velocity:o})}return i},t);return r<1?Oc((a,i)=>Uv(i)?Ut(Ut({},i),{},{velocity:Pf(i.velocity,n[a].velocity,r),from:Pf(i.from,n[a].from,r)}):i,t):uO(e,n,r-1)};function x8(e,t,r,n,a,i){var s,o=n.reduce((h,m)=>Ut(Ut({},h),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>Oc((h,m)=>m.from,o),u=()=>!Object.values(o).filter(Uv).length,d=null,f=h=>{s||(s=h);var m=h-s,g=m/r.dt;o=uO(r,o,g),a(Ut(Ut(Ut({},e),t),c())),s=h,u()||(d=i.setTimeout(f))};return()=>(d=i.setTimeout(f),()=>{var h;(h=d)===null||h===void 0||h()})}function b8(e,t,r,n,a,i,s){var o=null,c=a.reduce((f,h)=>Ut(Ut({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,m=Oc((y,v)=>Pf(...v,r(h)),c);if(i(Ut(Ut(Ut({},e),t),m)),h<1)o=s.setTimeout(d);else{var g=Oc((y,v)=>Pf(...v,r(1)),c);i(Ut(Ut(Ut({},e),t),g))}};return()=>(o=s.setTimeout(d),()=>{var f;(f=o)===null||f===void 0||f()})}const w8=(e,t,r,n,a,i)=>{var s=m8(e,t);return r==null?()=>(a(Ut(Ut({},e),t)),()=>{}):r.isStepper===!0?x8(e,t,r,s,a,i):b8(e,t,r,n,s,a,i)};var Of=1e-4,dO=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],fO=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),b1=(e,t)=>r=>{var n=dO(e,t);return fO(n,r)},_8=(e,t)=>r=>{var n=dO(e,t),a=[...n.map((i,s)=>i*s).slice(1),0];return fO(a,r)},j8=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a,i=r[0].split("(");if(i[0]==="cubic-bezier"&&((a=i[1])===null||a===void 0?void 0:a.split(")")[0].split(",").length)===4){var s=i[1].split(")")[0].split(",").map(o=>parseFloat(o));return[s[0],s[1],s[2],s[3]]}}}return r.length===4?r:[0,0,1,1]},S8=(e,t,r,n)=>{var a=b1(e,r),i=b1(t,n),s=_8(e,r),o=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,f=d,h=0;h<8;++h){var m=a(f)-d,g=s(f);if(Math.abs(m-d)<Of||g<Of)return i(f);f=o(f-m/g)}return i(f)};return c.isStepper=!1,c},w1=function(){return S8(...j8(...arguments))},N8=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,i=(s,o,c)=>{var u=-(s-o)*r,d=c*n,f=c+(u-d)*a/1e3,h=c*a/1e3+s;return Math.abs(h-o)<Of&&Math.abs(f)<Of?[o,0]:[h,f]};return i.isStepper=!0,i.dt=a,i},k8=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return w1(e);case"spring":return N8();default:if(e.split("(")[0]==="cubic-bezier")return w1(e)}return typeof e=="function"?e:null};function C8(e){var t,r=()=>null,n=!1,a=null,i=s=>{if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,[c,...u]=o;if(typeof c=="number"){a=e.setTimeout(i.bind(null,u),c);return}i(c),a=e.setTimeout(i.bind(null,u));return}typeof s=="string"&&(t=s,r(t)),typeof s=="object"&&(t=s,r(t)),typeof s=="function"&&s()}};return{stop:()=>{n=!0},start:s=>{n=!1,a&&(a(),a=null),i(s)},subscribe:s=>(r=s,()=>{r=()=>null}),getTimeoutController:()=>e}}class E8{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,i=s=>{s-n>=r?t(s):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(i))};return a=requestAnimationFrame(i),()=>{a!=null&&cancelAnimationFrame(a)}}}function P8(){return C8(new E8)}var O8=p.createContext(P8);function A8(e,t){var r=p.useContext(O8);return p.useMemo(()=>t??r(e),[e,t,r])}var T8={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},_1={t:0},Um={t:1};function lp(e){var t=Tr(e,T8),{isActive:r,canBegin:n,duration:a,easing:i,begin:s,onAnimationEnd:o,onAnimationStart:c,children:u}=t,d=A8(t.animationId,t.animationManager),[f,h]=p.useState(r?_1:Um),m=p.useRef(null);return p.useEffect(()=>{r||h(Um)},[r]),p.useEffect(()=>{if(!r||!n)return al;var g=w8(_1,Um,k8(i),a,h,d.getTimeoutController()),y=()=>{m.current=g()};return d.start([c,s,y,a,o]),()=>{d.stop(),m.current&&m.current(),o()}},[r,n,a,i,s,c,o,d]),u(f.t)}function cp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=p.useRef(kc(t)),n=p.useRef(e);return n.current!==e&&(r.current=kc(t),n.current=e),r.current}var D8=["radius"],I8=["radius"];function j1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function S1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j1(Object(r),!0).forEach(function(n){R8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R8(e,t,r){return(t=M8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M8(e){var t=$8(e,"string");return typeof t=="symbol"?t:t+""}function $8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Af(){return Af=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Af.apply(null,arguments)}function N1(e,t){if(e==null)return{};var r,n,a=L8(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function L8(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var k1=(e,t,r,n,a)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),s=n>=0?1:-1,o=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(i>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=a[f]>i?i:a[f];u="M".concat(e,",").concat(t+s*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+s*d[1])),u+="L ".concat(e+r,",").concat(t+n-s*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-s*d[3])),u+="Z"}else if(i>0&&a===+a&&a>0){var m=Math.min(i,a);u="M ".concat(e,",").concat(t+s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+o*m,",").concat(t,`
            L `).concat(e+r-o*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+s*m,`
            L `).concat(e+r,",").concat(t+n-s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-o*m,",").concat(t+n,`
            L `).concat(e+o*m,",").concat(t+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+n-s*m," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},C1={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},hO=e=>{var t=Tr(e,C1),r=p.useRef(null),[n,a]=p.useState(-1);p.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var W=r.current.getTotalLength();W&&a(W)}catch{}},[]);var{x:i,y:s,width:o,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isAnimationActive:g,isUpdateAnimationActive:y}=t,v=p.useRef(o),x=p.useRef(c),w=p.useRef(i),b=p.useRef(s),_=p.useMemo(()=>({x:i,y:s,width:o,height:c,radius:u}),[i,s,o,c,u]),j=cp(_,"rectangle-");if(i!==+i||s!==+s||o!==+o||c!==+c||o===0||c===0)return null;var S=Je("recharts-rectangle",d);if(!y){var N=Er(t),{radius:k}=N,E=N1(N,D8);return p.createElement("path",Af({},E,{radius:typeof u=="number"?u:void 0,className:S,d:k1(i,s,o,c,u)}))}var P=v.current,A=x.current,D=w.current,H=b.current,Q="0px ".concat(n===-1?1:n,"px"),ee="".concat(n,"px 0px"),B=cO(["strokeDasharray"],h,typeof f=="string"?f:C1.animationEasing);return p.createElement(lp,{animationId:j,key:j,canBegin:n>0,duration:h,easing:f,isActive:y,begin:m},W=>{var I=Nt(P,o,W),M=Nt(A,c,W),L=Nt(D,i,W),oe=Nt(H,s,W);r.current&&(v.current=I,x.current=M,w.current=L,b.current=oe);var re;g?W>0?re={transition:B,strokeDasharray:ee}:re={strokeDasharray:Q}:re={strokeDasharray:ee};var Ne=Er(t),{radius:O}=Ne,q=N1(Ne,I8);return p.createElement("path",Af({},q,{radius:typeof u=="number"?u:void 0,className:S,d:k1(L,oe,I,M,u),ref:r,style:S1(S1({},re),t.style)}))})};function E1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function P1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E1(Object(r),!0).forEach(function(n){F8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F8(e,t,r){return(t=B8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B8(e){var t=U8(e,"string");return typeof t=="symbol"?t:t+""}function U8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tf=Math.PI/180,z8=e=>e*180/Math.PI,cr=(e,t,r,n)=>({x:e+Math.cos(-Tf*n)*r,y:t+Math.sin(-Tf*n)*r}),W8=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},K8=(e,t)=>{var{x:r,y:n}=e,{x:a,y:i}=t;return Math.sqrt((r-a)**2+(n-i)**2)},H8=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:i}=t,s=K8({x:r,y:n},{x:a,y:i});if(s<=0)return{radius:s,angle:0};var o=(r-a)/s,c=Math.acos(o);return n>i&&(c=2*Math.PI-c),{radius:s,angle:z8(c),angleInRadian:c}},q8=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),i=Math.min(n,a);return{startAngle:t-i*360,endAngle:r-i*360}},V8=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),i=Math.floor(n/360),s=Math.min(a,i);return e+s*360},G8=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:a,angle:i}=H8({x:r,y:n},t),{innerRadius:s,outerRadius:o}=t;if(a<s||a>o||a===0)return null;var{startAngle:c,endAngle:u}=q8(t),d=i,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?P1(P1({},t),{},{radius:a,angle:V8(d,t)}):null};function pO(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:i}=e,s=cr(t,r,n,a),o=cr(t,r,n,i);return{points:[s,o],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function zv(){return zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zv.apply(null,arguments)}var Y8=(e,t)=>{var r=Br(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},nd=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:i,isExternal:s,cornerRadius:o,cornerIsExternal:c}=e,u=o*(s?1:-1)+n,d=Math.asin(o/u)/Tf,f=c?a:a+i*d,h=cr(t,r,u,f),m=cr(t,r,n,f),g=c?a-i*d:a,y=cr(t,r,u*Math.cos(d*Tf),g);return{center:h,circleTangency:m,lineTangency:y,theta:d}},mO=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:i,endAngle:s}=e,o=Y8(i,s),c=i+o,u=cr(t,r,a,i),d=cr(t,r,a,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(i>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=cr(t,r,n,i),m=cr(t,r,n,c);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(i<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},X8=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:i,forceCornerRadius:s,cornerIsExternal:o,startAngle:c,endAngle:u}=e,d=Br(u-c),{circleTangency:f,lineTangency:h,theta:m}=nd({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:i,cornerIsExternal:o}),{circleTangency:g,lineTangency:y,theta:v}=nd({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:o}),x=o?Math.abs(c-u):Math.abs(c-u)-m-v;if(x<0)return s?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):mO({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(x>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(n>0){var{circleTangency:b,lineTangency:_,theta:j}=nd({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),{circleTangency:S,lineTangency:N,theta:k}=nd({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),E=o?Math.abs(c-u):Math.abs(c-u)-j-k;if(E<0&&i===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(N.x,",").concat(N.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(S.x,",").concat(S.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(E>180),",").concat(+(d>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},J8={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},gO=e=>{var t=Tr(e,J8),{cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(i<a||u===d)return null;var h=Je("recharts-sector",f),m=i-a,g=Jn(s,m,0,!0),y;return g>0&&Math.abs(u-d)<360?y=X8({cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:Math.min(g,m/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d}):y=mO({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d}),p.createElement("path",zv({},Er(t),{className:h,d:y}))};function Q8(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(HE(t)){if(e==="centric"){var{cx:n,cy:a,innerRadius:i,outerRadius:s,angle:o}=t,c=cr(n,a,i,o),u=cr(n,a,s,o);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return pO(t)}}var vO={},yO={},xO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z0;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(xO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xO;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(yO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ex,r=yO;function n(a,i,s){s&&typeof s!="number"&&t.isIterateeCall(a,i,s)&&(i=s=void 0),a=r.toFinite(a),i===void 0?(i=a,a=0):i=r.toFinite(i),s=s===void 0?a<i?1:-1:r.toFinite(s);const o=Math.max(Math.ceil((i-a)/(s||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=a,a+=s;return c}e.range=n})(vO);var Z8=vO.range;const bO=Ka(Z8);function Si(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function e9(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function lx(e){let t,r,n;e.length!==2?(t=Si,r=(o,c)=>Si(e(o),c),n=(o,c)=>e(o)-c):(t=e===Si||e===e9?e:t9,r=e,n=e);function a(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function s(o,c,u=0,d=o.length){const f=a(o,c,u,d-1);return f>u&&n(o[f-1],c)>-n(o[f],c)?f-1:f}return{left:a,center:s,right:i}}function t9(){return 0}function wO(e){return e===null?NaN:+e}function*r9(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const n9=lx(Si),au=n9.right;lx(wO).center;class O1 extends Map{constructor(t,r=s9){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(A1(this,t))}has(t){return super.has(A1(this,t))}set(t,r){return super.set(a9(this,t),r)}delete(t){return super.delete(i9(this,t))}}function A1({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function a9({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function i9({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function s9(e){return e!==null&&typeof e=="object"?e.valueOf():e}function o9(e=Si){if(e===Si)return _O;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function _O(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const l9=Math.sqrt(50),c9=Math.sqrt(10),u9=Math.sqrt(2);function Df(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),s=i>=l9?10:i>=c9?5:i>=u9?2:1;let o,c,u;return a<0?(u=Math.pow(10,-a)/s,o=Math.round(e*u),c=Math.round(t*u),o/u<e&&++o,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*s,o=Math.round(e/u),c=Math.round(t/u),o*u<e&&++o,c*u>t&&--c),c<o&&.5<=r&&r<2?Df(e,t,r*2):[o,c,u]}function Wv(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,s]=n?Df(t,e,r):Df(e,t,r);if(!(i>=a))return[];const o=i-a+1,c=new Array(o);if(n)if(s<0)for(let u=0;u<o;++u)c[u]=(i-u)/-s;else for(let u=0;u<o;++u)c[u]=(i-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(a+u)/-s;else for(let u=0;u<o;++u)c[u]=(a+u)*s;return c}function Kv(e,t,r){return t=+t,e=+e,r=+r,Df(e,t,r)[2]}function Hv(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?Kv(t,e,r):Kv(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function T1(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function D1(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function jO(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?_O:o9(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(n,Math.floor(t+(c-u)*f/c+h));jO(e,t,m,g,a)}const i=e[t];let s=r,o=n;for(Nl(e,r,t),a(e[n],i)>0&&Nl(e,r,n);s<o;){for(Nl(e,s,o),++s,--o;a(e[s],i)<0;)++s;for(;a(e[o],i)>0;)--o}a(e[r],i)===0?Nl(e,r,o):(++o,Nl(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function Nl(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function d9(e,t,r){if(e=Float64Array.from(r9(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return D1(e);if(t>=1)return T1(e);var n,a=(n-1)*t,i=Math.floor(a),s=T1(jO(e,i).subarray(0,i+1)),o=D1(e.subarray(i+1));return s+(o-s)*(a-i)}}function f9(e,t,r=wO){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),s=+r(e[i],i,e),o=+r(e[i+1],i+1,e);return s+(o-s)*(a-i)}}function h9(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function On(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ga(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const qv=Symbol("implicit");function cx(){var e=new O1,t=[],r=[],n=qv;function a(i){let s=e.get(i);if(s===void 0){if(n!==qv)return n;e.set(i,s=t.push(i)-1)}return r[s%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new O1;for(const s of i)e.has(s)||e.set(s,t.push(s)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return cx(t,r).unknown(n)},On.apply(a,arguments),a}function ux(){var e=cx().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,s,o=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<n,g=m?a:n,y=m?n:a;i=(y-g)/Math.max(1,h-c+u*2),o&&(i=Math.floor(i)),g+=(y-g-i*(h-c))*d,s=i*(1-c),o&&(g=Math.round(g),s=Math.round(s));var v=h9(h).map(function(x){return g+i*x});return r(m?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,o=!0,f()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return ux(t(),[n,a]).round(o).paddingInner(c).paddingOuter(u).align(d)},On.apply(f(),arguments)}function SO(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return SO(t())},e}function p9(){return SO(ux.apply(null,arguments).paddingInner(1))}function dx(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function NO(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function iu(){}var Ac=.7,If=1/Ac,ko="\\s*([+-]?\\d+)\\s*",Tc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ua="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",m9=/^#([0-9a-f]{3,8})$/,g9=new RegExp(`^rgb\\(${ko},${ko},${ko}\\)$`),v9=new RegExp(`^rgb\\(${ua},${ua},${ua}\\)$`),y9=new RegExp(`^rgba\\(${ko},${ko},${ko},${Tc}\\)$`),x9=new RegExp(`^rgba\\(${ua},${ua},${ua},${Tc}\\)$`),b9=new RegExp(`^hsl\\(${Tc},${ua},${ua}\\)$`),w9=new RegExp(`^hsla\\(${Tc},${ua},${ua},${Tc}\\)$`),I1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dx(iu,Dc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:R1,formatHex:R1,formatHex8:_9,formatHsl:j9,formatRgb:M1,toString:M1});function R1(){return this.rgb().formatHex()}function _9(){return this.rgb().formatHex8()}function j9(){return kO(this).formatHsl()}function M1(){return this.rgb().formatRgb()}function Dc(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=m9.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?$1(t):r===3?new Ur(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?ad(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?ad(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=g9.exec(e))?new Ur(t[1],t[2],t[3],1):(t=v9.exec(e))?new Ur(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=y9.exec(e))?ad(t[1],t[2],t[3],t[4]):(t=x9.exec(e))?ad(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=b9.exec(e))?B1(t[1],t[2]/100,t[3]/100,1):(t=w9.exec(e))?B1(t[1],t[2]/100,t[3]/100,t[4]):I1.hasOwnProperty(e)?$1(I1[e]):e==="transparent"?new Ur(NaN,NaN,NaN,0):null}function $1(e){return new Ur(e>>16&255,e>>8&255,e&255,1)}function ad(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ur(e,t,r,n)}function S9(e){return e instanceof iu||(e=Dc(e)),e?(e=e.rgb(),new Ur(e.r,e.g,e.b,e.opacity)):new Ur}function Vv(e,t,r,n){return arguments.length===1?S9(e):new Ur(e,t,r,n??1)}function Ur(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}dx(Ur,Vv,NO(iu,{brighter(e){return e=e==null?If:Math.pow(If,e),new Ur(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ac:Math.pow(Ac,e),new Ur(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ur(gs(this.r),gs(this.g),gs(this.b),Rf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:L1,formatHex:L1,formatHex8:N9,formatRgb:F1,toString:F1}));function L1(){return`#${ls(this.r)}${ls(this.g)}${ls(this.b)}`}function N9(){return`#${ls(this.r)}${ls(this.g)}${ls(this.b)}${ls((isNaN(this.opacity)?1:this.opacity)*255)}`}function F1(){const e=Rf(this.opacity);return`${e===1?"rgb(":"rgba("}${gs(this.r)}, ${gs(this.g)}, ${gs(this.b)}${e===1?")":`, ${e})`}`}function Rf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function gs(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ls(e){return e=gs(e),(e<16?"0":"")+e.toString(16)}function B1(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new zn(e,t,r,n)}function kO(e){if(e instanceof zn)return new zn(e.h,e.s,e.l,e.opacity);if(e instanceof iu||(e=Dc(e)),!e)return new zn;if(e instanceof zn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),s=NaN,o=i-a,c=(i+a)/2;return o?(t===i?s=(r-n)/o+(r<n)*6:r===i?s=(n-t)/o+2:s=(t-r)/o+4,o/=c<.5?i+a:2-i-a,s*=60):o=c>0&&c<1?0:s,new zn(s,o,c,e.opacity)}function k9(e,t,r,n){return arguments.length===1?kO(e):new zn(e,t,r,n??1)}function zn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}dx(zn,k9,NO(iu,{brighter(e){return e=e==null?If:Math.pow(If,e),new zn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ac:Math.pow(Ac,e),new zn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Ur(zm(e>=240?e-240:e+120,a,n),zm(e,a,n),zm(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new zn(U1(this.h),id(this.s),id(this.l),Rf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Rf(this.opacity);return`${e===1?"hsl(":"hsla("}${U1(this.h)}, ${id(this.s)*100}%, ${id(this.l)*100}%${e===1?")":`, ${e})`}`}}));function U1(e){return e=(e||0)%360,e<0?e+360:e}function id(e){return Math.max(0,Math.min(1,e||0))}function zm(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const fx=e=>()=>e;function C9(e,t){return function(r){return e+r*t}}function E9(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function P9(e){return(e=+e)==1?CO:function(t,r){return r-t?E9(t,r,e):fx(isNaN(t)?r:t)}}function CO(e,t){var r=t-e;return r?C9(e,r):fx(isNaN(e)?t:e)}const z1=function e(t){var r=P9(t);function n(a,i){var s=r((a=Vv(a)).r,(i=Vv(i)).r),o=r(a.g,i.g),c=r(a.b,i.b),u=CO(a.opacity,i.opacity);return function(d){return a.r=s(d),a.g=o(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function O9(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function A9(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function T9(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),s;for(s=0;s<n;++s)a[s]=il(e[s],t[s]);for(;s<r;++s)i[s]=t[s];return function(o){for(s=0;s<n;++s)i[s]=a[s](o);return i}}function D9(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Mf(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function I9(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=il(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var Gv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wm=new RegExp(Gv.source,"g");function R9(e){return function(){return e}}function M9(e){return function(t){return e(t)+""}}function $9(e,t){var r=Gv.lastIndex=Wm.lastIndex=0,n,a,i,s=-1,o=[],c=[];for(e=e+"",t=t+"";(n=Gv.exec(e))&&(a=Wm.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),o[s]?o[s]+=i:o[++s]=i),(n=n[0])===(a=a[0])?o[s]?o[s]+=a:o[++s]=a:(o[++s]=null,c.push({i:s,x:Mf(n,a)})),r=Wm.lastIndex;return r<t.length&&(i=t.slice(r),o[s]?o[s]+=i:o[++s]=i),o.length<2?c[0]?M9(c[0].x):R9(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function il(e,t){var r=typeof t,n;return t==null||r==="boolean"?fx(t):(r==="number"?Mf:r==="string"?(n=Dc(t))?(t=n,z1):$9:t instanceof Dc?z1:t instanceof Date?D9:A9(t)?O9:Array.isArray(t)?T9:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?I9:Mf)(e,t)}function hx(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function L9(e,t){t===void 0&&(t=e,e=il);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return i[o](s-o)}}function F9(e){return function(){return e}}function $f(e){return+e}var W1=[0,1];function kr(e){return e}function Yv(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:F9(isNaN(t)?NaN:.5)}function B9(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function U9(e,t,r){var n=e[0],a=e[1],i=t[0],s=t[1];return a<n?(n=Yv(a,n),i=r(s,i)):(n=Yv(n,a),i=r(i,s)),function(o){return i(n(o))}}function z9(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)a[s]=Yv(e[s],e[s+1]),i[s]=r(t[s],t[s+1]);return function(o){var c=au(e,o,1,n)-1;return i[c](a[c](o))}}function su(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function up(){var e=W1,t=W1,r=il,n,a,i,s=kr,o,c,u;function d(){var h=Math.min(e.length,t.length);return s!==kr&&(s=B9(e[0],e[h-1])),o=h>2?z9:U9,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=o(e.map(n),t,r)))(n(s(h)))}return f.invert=function(h){return s(a((u||(u=o(t,e.map(n),Mf)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,$f),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=hx,d()},f.clamp=function(h){return arguments.length?(s=h?!0:kr,d()):s!==kr},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,m){return n=h,a=m,d()}}function px(){return up()(kr,kr)}function W9(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Lf(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Bo(e){return e=Lf(Math.abs(e)),e?e[1]:NaN}function K9(e,t){return function(r,n){for(var a=r.length,i=[],s=0,o=e[0],c=0;a>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),i.push(r.substring(a-=o,a+o)),!((c+=o+1)>n));)o=e[s=(s+1)%e.length];return i.reverse().join(t)}}function H9(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var q9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ic(e){if(!(t=q9.exec(e)))throw new Error("invalid format: "+e);var t;return new mx({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ic.prototype=mx.prototype;function mx(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}mx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function V9(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var EO;function G9(e,t){var r=Lf(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(EO=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=n.length;return i===s?n:i>s?n+new Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Lf(e,Math.max(0,t+i-1))[0]}function K1(e,t){var r=Lf(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const H1={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:W9,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>K1(e*100,t),r:K1,s:G9,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function q1(e){return e}var V1=Array.prototype.map,G1=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Y9(e){var t=e.grouping===void 0||e.thousands===void 0?q1:K9(V1.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?q1:H9(V1.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Ic(f);var h=f.fill,m=f.align,g=f.sign,y=f.symbol,v=f.zero,x=f.width,w=f.comma,b=f.precision,_=f.trim,j=f.type;j==="n"?(w=!0,j="g"):H1[j]||(b===void 0&&(b=12),_=!0,j="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var S=y==="$"?r:y==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",N=y==="$"?n:/[%p]/.test(j)?s:"",k=H1[j],E=/[defgprs%]/.test(j);b=b===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function P(A){var D=S,H=N,Q,ee,B;if(j==="c")H=k(A)+H,A="";else{A=+A;var W=A<0||1/A<0;if(A=isNaN(A)?c:k(Math.abs(A),b),_&&(A=V9(A)),W&&+A==0&&g!=="+"&&(W=!1),D=(W?g==="("?g:o:g==="-"||g==="("?"":g)+D,H=(j==="s"?G1[8+EO/3]:"")+H+(W&&g==="("?")":""),E){for(Q=-1,ee=A.length;++Q<ee;)if(B=A.charCodeAt(Q),48>B||B>57){H=(B===46?a+A.slice(Q+1):A.slice(Q))+H,A=A.slice(0,Q);break}}}w&&!v&&(A=t(A,1/0));var I=D.length+A.length+H.length,M=I<x?new Array(x-I+1).join(h):"";switch(w&&v&&(A=t(M+A,M.length?x-H.length:1/0),M=""),m){case"<":A=D+A+H+M;break;case"=":A=D+M+A+H;break;case"^":A=M.slice(0,I=M.length>>1)+D+A+H+M.slice(I);break;default:A=M+D+A+H;break}return i(A)}return P.toString=function(){return f+""},P}function d(f,h){var m=u((f=Ic(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Bo(h)/3)))*3,y=Math.pow(10,-g),v=G1[8+g/3];return function(x){return m(y*x)+v}}return{format:u,formatPrefix:d}}var sd,gx,PO;X9({thousands:",",grouping:[3],currency:["$",""]});function X9(e){return sd=Y9(e),gx=sd.format,PO=sd.formatPrefix,sd}function J9(e){return Math.max(0,-Bo(Math.abs(e)))}function Q9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Bo(t)/3)))*3-Bo(Math.abs(e)))}function Z9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Bo(t)-Bo(e))+1}function OO(e,t,r,n){var a=Hv(e,t,r),i;switch(n=Ic(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=Q9(a,s))&&(n.precision=i),PO(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Z9(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=J9(a))&&(n.precision=i-(n.type==="%")*2);break}}return gx(n)}function Mi(e){var t=e.domain;return e.ticks=function(r){var n=t();return Wv(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return OO(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,s=n[a],o=n[i],c,u,d=10;for(o<s&&(u=s,s=o,o=u,u=a,a=i,i=u);d-- >0;){if(u=Kv(s,o,r),u===c)return n[a]=s,n[i]=o,t(n);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return e},e}function AO(){var e=px();return e.copy=function(){return su(e,AO())},On.apply(e,arguments),Mi(e)}function TO(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,$f),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return TO(e).unknown(t)},e=arguments.length?Array.from(e,$f):[0,1],Mi(r)}function DO(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],s;return i<a&&(s=r,r=n,n=s,s=a,a=i,i=s),e[r]=t.floor(a),e[n]=t.ceil(i),e}function Y1(e){return Math.log(e)}function X1(e){return Math.exp(e)}function e7(e){return-Math.log(-e)}function t7(e){return-Math.exp(-e)}function r7(e){return isFinite(e)?+("1e"+e):e<0?0:e}function n7(e){return e===10?r7:e===Math.E?Math.exp:t=>Math.pow(e,t)}function a7(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function J1(e){return(t,r)=>-e(-t,r)}function vx(e){const t=e(Y1,X1),r=t.domain;let n=10,a,i;function s(){return a=a7(n),i=n7(n),r()[0]<0?(a=J1(a),i=J1(i),e(e7,t7)):e(Y1,X1),t}return t.base=function(o){return arguments.length?(n=+o,s()):n},t.domain=function(o){return arguments.length?(r(o),s()):r()},t.ticks=o=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),g,y;const v=o==null?10:+o;let x=[];if(!(n%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<n;++g)if(y=h<0?g/i(-h):g*i(h),!(y<u)){if(y>d)break;x.push(y)}}else for(;h<=m;++h)for(g=n-1;g>=1;--g)if(y=h>0?g/i(-h):g*i(h),!(y<u)){if(y>d)break;x.push(y)}x.length*2<v&&(x=Wv(u,d,v))}else x=Wv(h,m,Math.min(m-h,v)).map(i);return f?x.reverse():x},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Ic(c)).precision==null&&(c.trim=!0),c=gx(c)),o===1/0)return c;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(DO(r(),{floor:o=>i(Math.floor(a(o))),ceil:o=>i(Math.ceil(a(o)))})),t}function IO(){const e=vx(up()).domain([1,10]);return e.copy=()=>su(e,IO()).base(e.base()),On.apply(e,arguments),e}function Q1(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Z1(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function yx(e){var t=1,r=e(Q1(t),Z1(t));return r.constant=function(n){return arguments.length?e(Q1(t=+n),Z1(t)):t},Mi(r)}function RO(){var e=yx(up());return e.copy=function(){return su(e,RO()).constant(e.constant())},On.apply(e,arguments)}function ej(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function i7(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function s7(e){return e<0?-e*e:e*e}function xx(e){var t=e(kr,kr),r=1;function n(){return r===1?e(kr,kr):r===.5?e(i7,s7):e(ej(r),ej(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Mi(t)}function bx(){var e=xx(up());return e.copy=function(){return su(e,bx()).exponent(e.exponent())},On.apply(e,arguments),e}function o7(){return bx.apply(null,arguments).exponent(.5)}function tj(e){return Math.sign(e)*e*e}function l7(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function MO(){var e=px(),t=[0,1],r=!1,n;function a(i){var s=l7(e(i));return isNaN(s)?n:r?Math.round(s):s}return a.invert=function(i){return e.invert(tj(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,$f)).map(tj)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return MO(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},On.apply(a,arguments),Mi(a)}function $O(){var e=[],t=[],r=[],n;function a(){var s=0,o=Math.max(1,t.length);for(r=new Array(o-1);++s<o;)r[s-1]=f9(e,s/o);return i}function i(s){return s==null||isNaN(s=+s)?n:t[au(r,s)]}return i.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},i.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Si),a()},i.range=function(s){return arguments.length?(t=Array.from(s),a()):t.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return $O().domain(e).range(t).unknown(n)},On.apply(i,arguments)}function LO(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function s(c){return c!=null&&c<=c?a[au(n,c,0,r)]:i}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},s.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,o()):a.slice()},s.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},s.unknown=function(c){return arguments.length&&(i=c),s},s.thresholds=function(){return n.slice()},s.copy=function(){return LO().domain([e,t]).range(a).unknown(i)},On.apply(Mi(s),arguments)}function FO(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[au(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var s=t.indexOf(i);return[e[s-1],e[s]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return FO().domain(e).range(t).unknown(r)},On.apply(a,arguments)}const Km=new Date,Hm=new Date;function Ht(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const s=a(i),o=a.ceil(i);return i-s<o-i?s:o},a.offset=(i,s)=>(t(i=new Date(+i),s==null?1:Math.floor(s)),i),a.range=(i,s,o)=>{const c=[];if(i=a.ceil(i),o=o==null?1:Math.floor(o),!(i<s)||!(o>0))return c;let u;do c.push(u=new Date(+i)),t(i,o),e(i);while(u<i&&i<s);return c},a.filter=i=>Ht(s=>{if(s>=s)for(;e(s),!i(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!i(s););else for(;--o>=0;)for(;t(s,1),!i(s););}),r&&(a.count=(i,s)=>(Km.setTime(+i),Hm.setTime(+s),e(Km),e(Hm),Math.floor(r(Km,Hm))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?s=>n(s)%i===0:s=>a.count(0,s)%i===0):a)),a}const Ff=Ht(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ff.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ht(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Ff);Ff.range;const ja=1e3,_n=ja*60,Sa=_n*60,Fa=Sa*24,wx=Fa*7,rj=Fa*30,qm=Fa*365,cs=Ht(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ja)},(e,t)=>(t-e)/ja,e=>e.getUTCSeconds());cs.range;const _x=Ht(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ja)},(e,t)=>{e.setTime(+e+t*_n)},(e,t)=>(t-e)/_n,e=>e.getMinutes());_x.range;const jx=Ht(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*_n)},(e,t)=>(t-e)/_n,e=>e.getUTCMinutes());jx.range;const Sx=Ht(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ja-e.getMinutes()*_n)},(e,t)=>{e.setTime(+e+t*Sa)},(e,t)=>(t-e)/Sa,e=>e.getHours());Sx.range;const Nx=Ht(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Sa)},(e,t)=>(t-e)/Sa,e=>e.getUTCHours());Nx.range;const ou=Ht(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*_n)/Fa,e=>e.getDate()-1);ou.range;const dp=Ht(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Fa,e=>e.getUTCDate()-1);dp.range;const BO=Ht(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Fa,e=>Math.floor(e/Fa));BO.range;function Rs(e){return Ht(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*_n)/wx)}const fp=Rs(0),Bf=Rs(1),c7=Rs(2),u7=Rs(3),Uo=Rs(4),d7=Rs(5),f7=Rs(6);fp.range;Bf.range;c7.range;u7.range;Uo.range;d7.range;f7.range;function Ms(e){return Ht(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/wx)}const hp=Ms(0),Uf=Ms(1),h7=Ms(2),p7=Ms(3),zo=Ms(4),m7=Ms(5),g7=Ms(6);hp.range;Uf.range;h7.range;p7.range;zo.range;m7.range;g7.range;const kx=Ht(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());kx.range;const Cx=Ht(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Cx.range;const Ba=Ht(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ba.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ht(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ba.range;const Ua=Ht(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ua.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ht(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ua.range;function UO(e,t,r,n,a,i){const s=[[cs,1,ja],[cs,5,5*ja],[cs,15,15*ja],[cs,30,30*ja],[i,1,_n],[i,5,5*_n],[i,15,15*_n],[i,30,30*_n],[a,1,Sa],[a,3,3*Sa],[a,6,6*Sa],[a,12,12*Sa],[n,1,Fa],[n,2,2*Fa],[r,1,wx],[t,1,rj],[t,3,3*rj],[e,1,qm]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,m=lx(([,,v])=>v).right(s,h);if(m===s.length)return e.every(Hv(u/qm,d/qm,f));if(m===0)return Ff.every(Math.max(Hv(u,d,f),1));const[g,y]=s[h/s[m-1][2]<s[m][2]/h?m-1:m];return g.every(y)}return[o,c]}const[v7,y7]=UO(Ua,Cx,hp,BO,Nx,jx),[x7,b7]=UO(Ba,kx,fp,ou,Sx,_x);function Vm(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Gm(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function kl(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function w7(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,s=e.shortDays,o=e.months,c=e.shortMonths,u=Cl(a),d=El(a),f=Cl(i),h=El(i),m=Cl(s),g=El(s),y=Cl(o),v=El(o),x=Cl(c),w=El(c),b={a:W,A:I,b:M,B:L,c:null,d:lj,e:lj,f:K7,g:eW,G:rW,H:U7,I:z7,j:W7,L:zO,m:H7,M:q7,p:oe,q:re,Q:dj,s:fj,S:V7,u:G7,U:Y7,V:X7,w:J7,W:Q7,x:null,X:null,y:Z7,Y:tW,Z:nW,"%":uj},_={a:Ne,A:O,b:q,B:te,c:null,d:cj,e:cj,f:oW,g:vW,G:xW,H:aW,I:iW,j:sW,L:KO,m:lW,M:cW,p:$,q:G,Q:dj,s:fj,S:uW,u:dW,U:fW,V:hW,w:pW,W:mW,x:null,X:null,y:gW,Y:yW,Z:bW,"%":uj},j={a:P,A,b:D,B:H,c:Q,d:sj,e:sj,f:$7,g:ij,G:aj,H:oj,I:oj,j:D7,L:M7,m:T7,M:I7,p:E,q:A7,Q:F7,s:B7,S:R7,u:k7,U:C7,V:E7,w:N7,W:P7,x:ee,X:B,y:ij,Y:aj,Z:O7,"%":L7};b.x=S(r,b),b.X=S(n,b),b.c=S(t,b),_.x=S(r,_),_.X=S(n,_),_.c=S(t,_);function S(T,K){return function(Z){var F=[],ye=-1,le=0,De=T.length,Ae,qe,Le;for(Z instanceof Date||(Z=new Date(+Z));++ye<De;)T.charCodeAt(ye)===37&&(F.push(T.slice(le,ye)),(qe=nj[Ae=T.charAt(++ye)])!=null?Ae=T.charAt(++ye):qe=Ae==="e"?" ":"0",(Le=K[Ae])&&(Ae=Le(Z,qe)),F.push(Ae),le=ye+1);return F.push(T.slice(le,ye)),F.join("")}}function N(T,K){return function(Z){var F=kl(1900,void 0,1),ye=k(F,T,Z+="",0),le,De;if(ye!=Z.length)return null;if("Q"in F)return new Date(F.Q);if("s"in F)return new Date(F.s*1e3+("L"in F?F.L:0));if(K&&!("Z"in F)&&(F.Z=0),"p"in F&&(F.H=F.H%12+F.p*12),F.m===void 0&&(F.m="q"in F?F.q:0),"V"in F){if(F.V<1||F.V>53)return null;"w"in F||(F.w=1),"Z"in F?(le=Gm(kl(F.y,0,1)),De=le.getUTCDay(),le=De>4||De===0?Uf.ceil(le):Uf(le),le=dp.offset(le,(F.V-1)*7),F.y=le.getUTCFullYear(),F.m=le.getUTCMonth(),F.d=le.getUTCDate()+(F.w+6)%7):(le=Vm(kl(F.y,0,1)),De=le.getDay(),le=De>4||De===0?Bf.ceil(le):Bf(le),le=ou.offset(le,(F.V-1)*7),F.y=le.getFullYear(),F.m=le.getMonth(),F.d=le.getDate()+(F.w+6)%7)}else("W"in F||"U"in F)&&("w"in F||(F.w="u"in F?F.u%7:"W"in F?1:0),De="Z"in F?Gm(kl(F.y,0,1)).getUTCDay():Vm(kl(F.y,0,1)).getDay(),F.m=0,F.d="W"in F?(F.w+6)%7+F.W*7-(De+5)%7:F.w+F.U*7-(De+6)%7);return"Z"in F?(F.H+=F.Z/100|0,F.M+=F.Z%100,Gm(F)):Vm(F)}}function k(T,K,Z,F){for(var ye=0,le=K.length,De=Z.length,Ae,qe;ye<le;){if(F>=De)return-1;if(Ae=K.charCodeAt(ye++),Ae===37){if(Ae=K.charAt(ye++),qe=j[Ae in nj?K.charAt(ye++):Ae],!qe||(F=qe(T,Z,F))<0)return-1}else if(Ae!=Z.charCodeAt(F++))return-1}return F}function E(T,K,Z){var F=u.exec(K.slice(Z));return F?(T.p=d.get(F[0].toLowerCase()),Z+F[0].length):-1}function P(T,K,Z){var F=m.exec(K.slice(Z));return F?(T.w=g.get(F[0].toLowerCase()),Z+F[0].length):-1}function A(T,K,Z){var F=f.exec(K.slice(Z));return F?(T.w=h.get(F[0].toLowerCase()),Z+F[0].length):-1}function D(T,K,Z){var F=x.exec(K.slice(Z));return F?(T.m=w.get(F[0].toLowerCase()),Z+F[0].length):-1}function H(T,K,Z){var F=y.exec(K.slice(Z));return F?(T.m=v.get(F[0].toLowerCase()),Z+F[0].length):-1}function Q(T,K,Z){return k(T,t,K,Z)}function ee(T,K,Z){return k(T,r,K,Z)}function B(T,K,Z){return k(T,n,K,Z)}function W(T){return s[T.getDay()]}function I(T){return i[T.getDay()]}function M(T){return c[T.getMonth()]}function L(T){return o[T.getMonth()]}function oe(T){return a[+(T.getHours()>=12)]}function re(T){return 1+~~(T.getMonth()/3)}function Ne(T){return s[T.getUTCDay()]}function O(T){return i[T.getUTCDay()]}function q(T){return c[T.getUTCMonth()]}function te(T){return o[T.getUTCMonth()]}function $(T){return a[+(T.getUTCHours()>=12)]}function G(T){return 1+~~(T.getUTCMonth()/3)}return{format:function(T){var K=S(T+="",b);return K.toString=function(){return T},K},parse:function(T){var K=N(T+="",!1);return K.toString=function(){return T},K},utcFormat:function(T){var K=S(T+="",_);return K.toString=function(){return T},K},utcParse:function(T){var K=N(T+="",!0);return K.toString=function(){return T},K}}}var nj={"-":"",_:" ",0:"0"},nr=/^\s*\d+/,_7=/^%/,j7=/[\\^$*+?|[\]().{}]/g;function Ue(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function S7(e){return e.replace(j7,"\\$&")}function Cl(e){return new RegExp("^(?:"+e.map(S7).join("|")+")","i")}function El(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function N7(e,t,r){var n=nr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function k7(e,t,r){var n=nr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function C7(e,t,r){var n=nr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function E7(e,t,r){var n=nr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function P7(e,t,r){var n=nr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function aj(e,t,r){var n=nr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function ij(e,t,r){var n=nr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function O7(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function A7(e,t,r){var n=nr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function T7(e,t,r){var n=nr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function sj(e,t,r){var n=nr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function D7(e,t,r){var n=nr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function oj(e,t,r){var n=nr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function I7(e,t,r){var n=nr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function R7(e,t,r){var n=nr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function M7(e,t,r){var n=nr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function $7(e,t,r){var n=nr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function L7(e,t,r){var n=_7.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function F7(e,t,r){var n=nr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function B7(e,t,r){var n=nr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function lj(e,t){return Ue(e.getDate(),t,2)}function U7(e,t){return Ue(e.getHours(),t,2)}function z7(e,t){return Ue(e.getHours()%12||12,t,2)}function W7(e,t){return Ue(1+ou.count(Ba(e),e),t,3)}function zO(e,t){return Ue(e.getMilliseconds(),t,3)}function K7(e,t){return zO(e,t)+"000"}function H7(e,t){return Ue(e.getMonth()+1,t,2)}function q7(e,t){return Ue(e.getMinutes(),t,2)}function V7(e,t){return Ue(e.getSeconds(),t,2)}function G7(e){var t=e.getDay();return t===0?7:t}function Y7(e,t){return Ue(fp.count(Ba(e)-1,e),t,2)}function WO(e){var t=e.getDay();return t>=4||t===0?Uo(e):Uo.ceil(e)}function X7(e,t){return e=WO(e),Ue(Uo.count(Ba(e),e)+(Ba(e).getDay()===4),t,2)}function J7(e){return e.getDay()}function Q7(e,t){return Ue(Bf.count(Ba(e)-1,e),t,2)}function Z7(e,t){return Ue(e.getFullYear()%100,t,2)}function eW(e,t){return e=WO(e),Ue(e.getFullYear()%100,t,2)}function tW(e,t){return Ue(e.getFullYear()%1e4,t,4)}function rW(e,t){var r=e.getDay();return e=r>=4||r===0?Uo(e):Uo.ceil(e),Ue(e.getFullYear()%1e4,t,4)}function nW(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ue(t/60|0,"0",2)+Ue(t%60,"0",2)}function cj(e,t){return Ue(e.getUTCDate(),t,2)}function aW(e,t){return Ue(e.getUTCHours(),t,2)}function iW(e,t){return Ue(e.getUTCHours()%12||12,t,2)}function sW(e,t){return Ue(1+dp.count(Ua(e),e),t,3)}function KO(e,t){return Ue(e.getUTCMilliseconds(),t,3)}function oW(e,t){return KO(e,t)+"000"}function lW(e,t){return Ue(e.getUTCMonth()+1,t,2)}function cW(e,t){return Ue(e.getUTCMinutes(),t,2)}function uW(e,t){return Ue(e.getUTCSeconds(),t,2)}function dW(e){var t=e.getUTCDay();return t===0?7:t}function fW(e,t){return Ue(hp.count(Ua(e)-1,e),t,2)}function HO(e){var t=e.getUTCDay();return t>=4||t===0?zo(e):zo.ceil(e)}function hW(e,t){return e=HO(e),Ue(zo.count(Ua(e),e)+(Ua(e).getUTCDay()===4),t,2)}function pW(e){return e.getUTCDay()}function mW(e,t){return Ue(Uf.count(Ua(e)-1,e),t,2)}function gW(e,t){return Ue(e.getUTCFullYear()%100,t,2)}function vW(e,t){return e=HO(e),Ue(e.getUTCFullYear()%100,t,2)}function yW(e,t){return Ue(e.getUTCFullYear()%1e4,t,4)}function xW(e,t){var r=e.getUTCDay();return e=r>=4||r===0?zo(e):zo.ceil(e),Ue(e.getUTCFullYear()%1e4,t,4)}function bW(){return"+0000"}function uj(){return"%"}function dj(e){return+e}function fj(e){return Math.floor(+e/1e3)}var Hs,qO,VO;wW({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wW(e){return Hs=w7(e),qO=Hs.format,Hs.parse,VO=Hs.utcFormat,Hs.utcParse,Hs}function _W(e){return new Date(e)}function jW(e){return e instanceof Date?+e:+new Date(+e)}function Ex(e,t,r,n,a,i,s,o,c,u){var d=px(),f=d.invert,h=d.domain,m=u(".%L"),g=u(":%S"),y=u("%I:%M"),v=u("%I %p"),x=u("%a %d"),w=u("%b %d"),b=u("%B"),_=u("%Y");function j(S){return(c(S)<S?m:o(S)<S?g:s(S)<S?y:i(S)<S?v:n(S)<S?a(S)<S?x:w:r(S)<S?b:_)(S)}return d.invert=function(S){return new Date(f(S))},d.domain=function(S){return arguments.length?h(Array.from(S,jW)):h().map(_W)},d.ticks=function(S){var N=h();return e(N[0],N[N.length-1],S??10)},d.tickFormat=function(S,N){return N==null?j:u(N)},d.nice=function(S){var N=h();return(!S||typeof S.range!="function")&&(S=t(N[0],N[N.length-1],S??10)),S?h(DO(N,S)):d},d.copy=function(){return su(d,Ex(e,t,r,n,a,i,s,o,c,u))},d}function SW(){return On.apply(Ex(x7,b7,Ba,kx,fp,ou,Sx,_x,cs,qO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function NW(){return On.apply(Ex(v7,y7,Ua,Cx,hp,dp,Nx,jx,cs,VO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function pp(){var e=0,t=1,r,n,a,i,s=kr,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:s(a===0?.5:(f=(i(f)-r)*a,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(h){var m,g;return arguments.length?([m,g]=h,s=f(m,g),u):[s(0),s(1)]}}return u.range=d(il),u.rangeRound=d(hx),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function $i(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function GO(){var e=Mi(pp()(kr));return e.copy=function(){return $i(e,GO())},Ga.apply(e,arguments)}function YO(){var e=vx(pp()).domain([1,10]);return e.copy=function(){return $i(e,YO()).base(e.base())},Ga.apply(e,arguments)}function XO(){var e=yx(pp());return e.copy=function(){return $i(e,XO()).constant(e.constant())},Ga.apply(e,arguments)}function Px(){var e=xx(pp());return e.copy=function(){return $i(e,Px()).exponent(e.exponent())},Ga.apply(e,arguments)}function kW(){return Px.apply(null,arguments).exponent(.5)}function JO(){var e=[],t=kr;function r(n){if(n!=null&&!isNaN(n=+n))return t((au(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Si),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>d9(e,i/n))},r.copy=function(){return JO(t).domain(e)},Ga.apply(r,arguments)}function mp(){var e=0,t=.5,r=1,n=1,a,i,s,o,c,u=kr,d,f=!1,h;function m(y){return isNaN(y=+y)?h:(y=.5+((y=+d(y))-i)*(n*y<n*i?o:c),u(f?Math.max(0,Math.min(1,y)):y))}m.domain=function(y){return arguments.length?([e,t,r]=y,a=d(e=+e),i=d(t=+t),s=d(r=+r),o=a===i?0:.5/(i-a),c=i===s?0:.5/(s-i),n=i<a?-1:1,m):[e,t,r]},m.clamp=function(y){return arguments.length?(f=!!y,m):f},m.interpolator=function(y){return arguments.length?(u=y,m):u};function g(y){return function(v){var x,w,b;return arguments.length?([x,w,b]=v,u=L9(y,[x,w,b]),m):[u(0),u(.5),u(1)]}}return m.range=g(il),m.rangeRound=g(hx),m.unknown=function(y){return arguments.length?(h=y,m):h},function(y){return d=y,a=y(e),i=y(t),s=y(r),o=a===i?0:.5/(i-a),c=i===s?0:.5/(s-i),n=i<a?-1:1,m}}function QO(){var e=Mi(mp()(kr));return e.copy=function(){return $i(e,QO())},Ga.apply(e,arguments)}function ZO(){var e=vx(mp()).domain([.1,1,10]);return e.copy=function(){return $i(e,ZO()).base(e.base())},Ga.apply(e,arguments)}function eA(){var e=yx(mp());return e.copy=function(){return $i(e,eA()).constant(e.constant())},Ga.apply(e,arguments)}function Ox(){var e=xx(mp());return e.copy=function(){return $i(e,Ox()).exponent(e.exponent())},Ga.apply(e,arguments)}function CW(){return Ox.apply(null,arguments).exponent(.5)}const Fl=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ux,scaleDiverging:QO,scaleDivergingLog:ZO,scaleDivergingPow:Ox,scaleDivergingSqrt:CW,scaleDivergingSymlog:eA,scaleIdentity:TO,scaleImplicit:qv,scaleLinear:AO,scaleLog:IO,scaleOrdinal:cx,scalePoint:p9,scalePow:bx,scaleQuantile:$O,scaleQuantize:LO,scaleRadial:MO,scaleSequential:GO,scaleSequentialLog:YO,scaleSequentialPow:Px,scaleSequentialQuantile:JO,scaleSequentialSqrt:kW,scaleSequentialSymlog:XO,scaleSqrt:o7,scaleSymlog:RO,scaleThreshold:FO,scaleTime:SW,scaleUtc:NW,tickFormat:OO},Symbol.toStringTag,{value:"Module"}));var Li=e=>e.chartData,EW=U([Li],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),gp=(e,t,r,n)=>n?EW(e):Li(e);function Cs(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Tt(t)&&Tt(r))return!0}return!1}function hj(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function tA(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,i;if(Tt(r))a=r;else if(typeof r=="function")return;if(Tt(n))i=n;else if(typeof n=="function")return;var s=[a,i];if(Cs(s))return s}}function PW(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Cs(n))return hj(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,i]=e,s,o;if(a==="auto")t!=null&&(s=Math.min(...t));else if(we(a))s=a;else if(typeof a=="function")try{t!=null&&(s=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&r1.test(a)){var c=r1.exec(a);if(c==null||t==null)s=void 0;else{var u=+c[1];s=t[0]-u}}else s=t==null?void 0:t[0];if(i==="auto")t!=null&&(o=Math.max(...t));else if(we(i))o=i;else if(typeof i=="function")try{t!=null&&(o=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&n1.test(i)){var d=n1.exec(i);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var h=[s,o];if(Cs(h))return t==null?h:hj(h,t,r)}}}var sl=1e9,OW={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Tx,ft=!0,Pn="[DecimalError] ",vs=Pn+"Invalid argument: ",Ax=Pn+"Exponent out of range: ",ol=Math.floor,es=Math.pow,AW=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,an,Xt=1e7,ot=7,rA=9007199254740991,zf=ol(rA/ot),ge={};ge.absoluteValue=ge.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ge.comparedTo=ge.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};ge.decimalPlaces=ge.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*ot;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};ge.dividedBy=ge.div=function(e){return Ea(this,new this.constructor(e))};ge.dividedToIntegerBy=ge.idiv=function(e){var t=this,r=t.constructor;return Ze(Ea(t,new r(e),0,1),r.precision)};ge.equals=ge.eq=function(e){return!this.cmp(e)};ge.exponent=function(){return $t(this)};ge.greaterThan=ge.gt=function(e){return this.cmp(e)>0};ge.greaterThanOrEqualTo=ge.gte=function(e){return this.cmp(e)>=0};ge.isInteger=ge.isint=function(){return this.e>this.d.length-2};ge.isNegative=ge.isneg=function(){return this.s<0};ge.isPositive=ge.ispos=function(){return this.s>0};ge.isZero=function(){return this.s===0};ge.lessThan=ge.lt=function(e){return this.cmp(e)<0};ge.lessThanOrEqualTo=ge.lte=function(e){return this.cmp(e)<1};ge.logarithm=ge.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(an))throw Error(Pn+"NaN");if(r.s<1)throw Error(Pn+(r.s?"NaN":"-Infinity"));return r.eq(an)?new n(0):(ft=!1,t=Ea(Rc(r,i),Rc(e,i),i),ft=!0,Ze(t,a))};ge.minus=ge.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?iA(t,e):nA(t,(e.s=-e.s,e))};ge.modulo=ge.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Pn+"NaN");return r.s?(ft=!1,t=Ea(r,e,0,1).times(e),ft=!0,r.minus(t)):Ze(new n(r),a)};ge.naturalExponential=ge.exp=function(){return aA(this)};ge.naturalLogarithm=ge.ln=function(){return Rc(this)};ge.negated=ge.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ge.plus=ge.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?nA(t,e):iA(t,(e.s=-e.s,e))};ge.precision=ge.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(vs+e);if(t=$t(a)+1,n=a.d.length-1,r=n*ot+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};ge.squareRoot=ge.sqrt=function(){var e,t,r,n,a,i,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Pn+"NaN")}for(e=$t(o),ft=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=oa(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=ol((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=s=r+3;;)if(i=n,n=i.plus(Ea(o,i,s+2)).times(.5),oa(i.d).slice(0,s)===(t=oa(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),a==s&&t=="4999"){if(Ze(i,r+1,0),i.times(i).eq(o)){n=i;break}}else if(t!="9999")break;s+=4}return ft=!0,Ze(n,r)};ge.times=ge.mul=function(e){var t,r,n,a,i,s,o,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(i=h,h=m,m=i,s=c,c=u,u=s),i=[],s=c+u,n=s;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)o=i[a]+m[n]*h[a-n-1]+t,i[a--]=o%Xt|0,t=o/Xt|0;i[a]=(i[a]+t)%Xt|0}for(;!i[--s];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,ft?Ze(e,f.precision):e};ge.toDecimalPlaces=ge.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(ha(e,0,sl),t===void 0?t=n.rounding:ha(t,0,8),Ze(r,e+$t(r)+1,t))};ge.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Es(n,!0):(ha(e,0,sl),t===void 0?t=a.rounding:ha(t,0,8),n=Ze(new a(n),e+1,t),r=Es(n,!0,e+1)),r};ge.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?Es(a):(ha(e,0,sl),t===void 0?t=i.rounding:ha(t,0,8),n=Ze(new i(a),e+$t(a)+1,t),r=Es(n.abs(),!1,e+$t(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};ge.toInteger=ge.toint=function(){var e=this,t=e.constructor;return Ze(new t(e),$t(e)+1,t.rounding)};ge.toNumber=function(){return+this};ge.toPower=ge.pow=function(e){var t,r,n,a,i,s,o=this,c=o.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(an);if(o=new c(o),!o.s){if(e.s<1)throw Error(Pn+"Infinity");return o}if(o.eq(an))return o;if(n=c.precision,e.eq(an))return Ze(o,n);if(t=e.e,r=e.d.length-1,s=t>=r,i=o.s,s){if((r=d<0?-d:d)<=rA){for(a=new c(an),t=Math.ceil(n/ot+4),ft=!1;r%2&&(a=a.times(o),mj(a.d,t)),r=ol(r/2),r!==0;)o=o.times(o),mj(o.d,t);return ft=!0,e.s<0?new c(an).div(a):Ze(a,n)}}else if(i<0)throw Error(Pn+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,ft=!1,a=e.times(Rc(o,n+u)),ft=!0,a=aA(a),a.s=i,a};ge.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=$t(a),n=Es(a,r<=i.toExpNeg||r>=i.toExpPos)):(ha(e,1,sl),t===void 0?t=i.rounding:ha(t,0,8),a=Ze(new i(a),e,t),r=$t(a),n=Es(a,e<=r||r<=i.toExpNeg,e)),n};ge.toSignificantDigits=ge.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(ha(e,1,sl),t===void 0?t=n.rounding:ha(t,0,8)),Ze(new n(r),e,t)};ge.toString=ge.valueOf=ge.val=ge.toJSON=ge[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=$t(e),r=e.constructor;return Es(e,t<=r.toExpNeg||t>=r.toExpPos)};function nA(e,t){var r,n,a,i,s,o,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),ft?Ze(t,f):t;if(c=e.d,u=t.d,s=e.e,a=t.e,c=c.slice(),i=s-a,i){for(i<0?(n=c,i=-i,o=u.length):(n=u,a=s,o=c.length),s=Math.ceil(f/ot),o=s>o?s+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=c.length,i=u.length,o-i<0&&(i=o,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Xt|0,c[i]%=Xt;for(r&&(c.unshift(r),++a),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=a,ft?Ze(t,f):t}function ha(e,t,r){if(e!==~~e||e<t||e>r)throw Error(vs+e)}function oa(e){var t,r,n,a=e.length-1,i="",s=e[0];if(a>0){for(i+=s,t=1;t<a;t++)n=e[t]+"",r=ot-n.length,r&&(i+=oi(r)),i+=n;s=e[t],n=s+"",r=ot-n.length,r&&(i+=oi(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}var Ea=function(){function e(n,a){var i,s=0,o=n.length;for(n=n.slice();o--;)i=n[o]*a+s,n[o]=i%Xt|0,s=i/Xt|0;return s&&n.unshift(s),n}function t(n,a,i,s){var o,c;if(i!=s)c=i>s?1:-1;else for(o=c=0;o<i;o++)if(n[o]!=a[o]){c=n[o]>a[o]?1:-1;break}return c}function r(n,a,i){for(var s=0;i--;)n[i]-=s,s=n[i]<a[i]?1:0,n[i]=s*Xt+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,s){var o,c,u,d,f,h,m,g,y,v,x,w,b,_,j,S,N,k,E=n.constructor,P=n.s==a.s?1:-1,A=n.d,D=a.d;if(!n.s)return new E(n);if(!a.s)throw Error(Pn+"Division by zero");for(c=n.e-a.e,N=D.length,j=A.length,m=new E(P),g=m.d=[],u=0;D[u]==(A[u]||0);)++u;if(D[u]>(A[u]||0)&&--c,i==null?w=i=E.precision:s?w=i+($t(n)-$t(a))+1:w=i,w<0)return new E(0);if(w=w/ot+2|0,u=0,N==1)for(d=0,D=D[0],w++;(u<j||d)&&w--;u++)b=d*Xt+(A[u]||0),g[u]=b/D|0,d=b%D|0;else{for(d=Xt/(D[0]+1)|0,d>1&&(D=e(D,d),A=e(A,d),N=D.length,j=A.length),_=N,y=A.slice(0,N),v=y.length;v<N;)y[v++]=0;k=D.slice(),k.unshift(0),S=D[0],D[1]>=Xt/2&&++S;do d=0,o=t(D,y,N,v),o<0?(x=y[0],N!=v&&(x=x*Xt+(y[1]||0)),d=x/S|0,d>1?(d>=Xt&&(d=Xt-1),f=e(D,d),h=f.length,v=y.length,o=t(f,y,h,v),o==1&&(d--,r(f,N<h?k:D,h))):(d==0&&(o=d=1),f=D.slice()),h=f.length,h<v&&f.unshift(0),r(y,f,v),o==-1&&(v=y.length,o=t(D,y,N,v),o<1&&(d++,r(y,N<v?k:D,v))),v=y.length):o===0&&(d++,y=[0]),g[u++]=d,o&&y[0]?y[v++]=A[_]||0:(y=[A[_]],v=1);while((_++<j||y[0]!==void 0)&&w--)}return g[0]||g.shift(),m.e=c,Ze(m,s?i+$t(m)+1:i)}}();function aA(e,t){var r,n,a,i,s,o,c=0,u=0,d=e.constructor,f=d.precision;if($t(e)>16)throw Error(Ax+$t(e));if(!e.s)return new d(an);for(ft=!1,o=f,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),u+=5;for(n=Math.log(es(2,u))/Math.LN10*2+5|0,o+=n,r=a=i=new d(an),d.precision=o;;){if(a=Ze(a.times(e),o),r=r.times(++c),s=i.plus(Ea(a,r,o)),oa(s.d).slice(0,o)===oa(i.d).slice(0,o)){for(;u--;)i=Ze(i.times(i),o);return d.precision=f,t==null?(ft=!0,Ze(i,f)):i}i=s}}function $t(e){for(var t=e.e*ot,r=e.d[0];r>=10;r/=10)t++;return t}function Ym(e,t,r){if(t>e.LN10.sd())throw ft=!0,r&&(e.precision=r),Error(Pn+"LN10 precision limit exceeded");return Ze(new e(e.LN10),t)}function oi(e){for(var t="";e--;)t+="0";return t}function Rc(e,t){var r,n,a,i,s,o,c,u,d,f=1,h=10,m=e,g=m.d,y=m.constructor,v=y.precision;if(m.s<1)throw Error(Pn+(m.s?"NaN":"-Infinity"));if(m.eq(an))return new y(0);if(t==null?(ft=!1,u=v):u=t,m.eq(10))return t==null&&(ft=!0),Ym(y,u);if(u+=h,y.precision=u,r=oa(g),n=r.charAt(0),i=$t(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=oa(m.d),n=r.charAt(0),f++;i=$t(m),n>1?(m=new y("0."+r),i++):m=new y(n+"."+r.slice(1))}else return c=Ym(y,u+2,v).times(i+""),m=Rc(new y(n+"."+r.slice(1)),u-h).plus(c),y.precision=v,t==null?(ft=!0,Ze(m,v)):m;for(o=s=m=Ea(m.minus(an),m.plus(an),u),d=Ze(m.times(m),u),a=3;;){if(s=Ze(s.times(d),u),c=o.plus(Ea(s,new y(a),u)),oa(c.d).slice(0,u)===oa(o.d).slice(0,u))return o=o.times(2),i!==0&&(o=o.plus(Ym(y,u+2,v).times(i+""))),o=Ea(o,new y(f),u),y.precision=v,t==null?(ft=!0,Ze(o,v)):o;o=c,a+=2}}function pj(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=ol(r/ot),e.d=[],n=(r+1)%ot,r<0&&(n+=ot),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=ot;n<a;)e.d.push(+t.slice(n,n+=ot));t=t.slice(n),n=ot-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),ft&&(e.e>zf||e.e<-zf))throw Error(Ax+r)}else e.s=0,e.e=0,e.d=[0];return e}function Ze(e,t,r){var n,a,i,s,o,c,u,d,f=e.d;for(s=1,i=f[0];i>=10;i/=10)s++;if(n=t-s,n<0)n+=ot,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/ot),i=f.length,d>=i)return e;for(u=i=f[d],s=1;i>=10;i/=10)s++;n%=ot,a=n-ot+s}if(r!==void 0&&(i=es(10,s-a-1),o=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?a>0?u/es(10,s-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=$t(e),f.length=1,t=t-i-1,f[0]=es(10,(ot-t%ot)%ot),e.e=ol(-t/ot)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=es(10,ot-n),f[d]=a>0?(u/es(10,s-a)%es(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==Xt&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=Xt)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(ft&&(e.e>zf||e.e<-zf))throw Error(Ax+$t(e));return e}function iA(e,t){var r,n,a,i,s,o,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),ft?Ze(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),s=u-n,s){for(d=s<0,d?(r=c,s=-s,o=f.length):(r=f,n=u,o=c.length),a=Math.max(Math.ceil(m/ot),o)+2,s>a&&(s=a,r.length=1),r.reverse(),a=s;a--;)r.push(0);r.reverse()}else{for(a=c.length,o=f.length,d=a<o,d&&(o=a),a=0;a<o;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}s=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),o=c.length,a=f.length-o;a>0;--a)c[o++]=0;for(a=f.length;a>s;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=Xt-1;--c[i],c[a]+=Xt}c[a]-=f[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,ft?Ze(t,m):t):new h(0)}function Es(e,t,r){var n,a=$t(e),i=oa(e.d),s=i.length;return t?(r&&(n=r-s)>0?i=i.charAt(0)+"."+i.slice(1)+oi(n):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+oi(-a-1)+i,r&&(n=r-s)>0&&(i+=oi(n))):a>=s?(i+=oi(a+1-s),r&&(n=r-a-1)>0&&(i=i+"."+oi(n))):((n=a+1)<s&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-s)>0&&(a+1===s&&(i+="."),i+=oi(n))),e.s<0?"-"+i:i}function mj(e,t){if(e.length>t)return e.length=t,!0}function sA(e){var t,r,n;function a(i){var s=this;if(!(s instanceof a))return new a(i);if(s.constructor=a,i instanceof a){s.s=i.s,s.e=i.e,s.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(vs+i);if(i>0)s.s=1;else if(i<0)i=-i,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(i===~~i&&i<1e7){s.e=0,s.d=[i];return}return pj(s,i.toString())}else if(typeof i!="string")throw Error(vs+i);if(i.charCodeAt(0)===45?(i=i.slice(1),s.s=-1):s.s=1,AW.test(i))pj(s,i);else throw Error(vs+i)}if(a.prototype=ge,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=sA,a.config=a.set=TW,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function TW(e){if(!e||typeof e!="object")throw Error(Pn+"Object expected");var t,r,n,a=["precision",1,sl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(ol(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(vs+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(vs+r+": "+n);return this}var Tx=sA(OW);an=new Tx(1);const Ge=Tx;var DW=e=>e,oA={},lA=e=>e===oA,gj=e=>function t(){return arguments.length===0||arguments.length===1&&lA(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},cA=(e,t)=>e===1?t:gj(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n.filter(s=>s!==oA).length;return i>=e?t(...n):cA(e-i,gj(function(){for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];var u=n.map(d=>lA(d)?o.shift():d);return t(...u,...o)}))}),vp=e=>cA(e.length,e),Xv=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},IW=vp((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),RW=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return DW;var a=r.reverse(),i=a[0],s=a.slice(1);return function(){return s.reduce((o,c)=>c(o),i(...arguments))}},Jv=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),uA=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t&&a.every((s,o)=>{var c;return s===((c=t)===null||c===void 0?void 0:c[o])})||(t=a,r=e(...a)),r}};function dA(e){var t;return e===0?t=1:t=Math.floor(new Ge(e).abs().log(10).toNumber())+1,t}function fA(e,t,r){for(var n=new Ge(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}vp((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});vp((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});vp((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var hA=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},pA=(e,t,r)=>{if(e.lte(0))return new Ge(0);var n=dA(e.toNumber()),a=new Ge(10).pow(n),i=e.div(a),s=n!==1?.05:.1,o=new Ge(Math.ceil(i.div(s).toNumber())).add(r).mul(s),c=o.mul(a);return t?new Ge(c.toNumber()):new Ge(Math.ceil(c.toNumber()))},MW=(e,t,r)=>{var n=new Ge(1),a=new Ge(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Ge(10).pow(dA(e)-1),a=new Ge(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Ge(Math.floor(e)))}else e===0?a=new Ge(Math.floor((t-1)/2)):r||(a=new Ge(Math.floor(e)));var s=Math.floor((t-1)/2),o=RW(IW(c=>a.add(new Ge(c-s).mul(n)).toNumber()),Xv);return o(0,t)},mA=function(t,r,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Ge(0),tickMin:new Ge(0),tickMax:new Ge(0)};var s=pA(new Ge(r).sub(t).div(n-1),a,i),o;t<=0&&r>=0?o=new Ge(0):(o=new Ge(t).add(r).div(2),o=o.sub(new Ge(o).mod(s)));var c=Math.ceil(o.sub(t).div(s).toNumber()),u=Math.ceil(new Ge(r).sub(o).div(s).toNumber()),d=c+u+1;return d>n?mA(t,r,n,a,i+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:s,tickMin:o.sub(new Ge(c).mul(s)),tickMax:o.add(new Ge(u).mul(s))})};function $W(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[s,o]=hA([t,r]);if(s===-1/0||o===1/0){var c=o===1/0?[s,...Xv(0,n-1).map(()=>1/0)]:[...Xv(0,n-1).map(()=>-1/0),o];return t>r?Jv(c):c}if(s===o)return MW(s,n,a);var{step:u,tickMin:d,tickMax:f}=mA(s,o,i,a,0),h=fA(d,f.add(new Ge(.1).mul(u)),u);return t>r?Jv(h):h}function LW(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,s]=hA([r,n]);if(i===-1/0||s===1/0)return[r,n];if(i===s)return[i];var o=Math.max(t,2),c=pA(new Ge(s).sub(i).div(o-1),a,0),u=[...fA(new Ge(i),new Ge(s),c),s];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?Jv(u):u}var FW=uA($W),BW=uA(LW),gA=e=>e.rootProps.maxBarSize,UW=e=>e.rootProps.barGap,vA=e=>e.rootProps.barCategoryGap,zW=e=>e.rootProps.barSize,yp=e=>e.rootProps.stackOffset,Dx=e=>e.options.chartName,Ix=e=>e.rootProps.syncId,yA=e=>e.rootProps.syncMethod,Rx=e=>e.options.eventEmitter,Zt={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},xa={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},tn={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},xp=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},WW={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:xa.angleAxisId,includeHidden:!1,name:void 0,reversed:xa.reversed,scale:xa.scale,tick:xa.tick,tickCount:void 0,ticks:void 0,type:xa.type,unit:void 0},KW={allowDataOverflow:tn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:tn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:tn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:tn.scale,tick:tn.tick,tickCount:tn.tickCount,ticks:void 0,type:tn.type,unit:void 0},HW={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:xa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:xa.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:xa.scale,tick:xa.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},qW={allowDataOverflow:tn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:tn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:tn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:tn.scale,tick:tn.tick,tickCount:tn.tickCount,ticks:void 0,type:"category",unit:void 0},Mx=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?HW:WW,$x=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?qW:KW,bp=e=>e.polarOptions,Lx=U([qa,Va,rr],W8),xA=U([bp,Lx],(e,t)=>{if(e!=null)return Jn(e.innerRadius,t,0)}),bA=U([bp,Lx],(e,t)=>{if(e!=null)return Jn(e.outerRadius,t,t*.8)}),VW=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},wA=U([bp],VW);U([Mx,wA],xp);var _A=U([Lx,xA,bA],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});U([$x,_A],xp);var jA=U([He,bp,xA,bA,qa,Va],(e,t,r,n,a,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:s,cy:o,startAngle:c,endAngle:u}=t;return{cx:Jn(s,a,a/2),cy:Jn(o,i,i/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),qt=(e,t)=>t,wp=(e,t,r)=>r;function Fx(e){return e==null?void 0:e.id}function SA(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:a,dataKey:i}=r,s=new Map;return e.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=Fx(o);u.forEach((f,h)=>{var m=i==null||a?h:String(tr(f,i,null)),g=tr(f,o.dataKey,0),y;s.has(m)?y=s.get(m):y={},Object.assign(y,{[d]:g}),s.set(m,y)})}}),Array.from(s.values())}function _p(e){return e.stackId!=null&&e.dataKey!=null}var jp=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Sp(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function GW(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Vt=e=>{var t=He(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},ll=e=>e.tooltip.settings.axisId;function vj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vj(Object(r),!0).forEach(function(n){YW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YW(e,t,r){return(t=XW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XW(e){var t=JW(e,"string");return typeof t=="symbol"?t:t+""}function JW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qv=[0,"auto"],Qr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},NA=(e,t)=>e.cartesianAxis.xAxis[t],Ya=(e,t)=>{var r=NA(e,t);return r??Qr},Zr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Qv,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:ru},kA=(e,t)=>e.cartesianAxis.yAxis[t],Xa=(e,t)=>{var r=kA(e,t);return r??Zr},QW={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Bx=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??QW},Dr=(e,t,r)=>{switch(t){case"xAxis":return Ya(e,r);case"yAxis":return Xa(e,r);case"zAxis":return Bx(e,r);case"angleAxis":return Mx(e,r);case"radiusAxis":return $x(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},ZW=(e,t,r)=>{switch(t){case"xAxis":return Ya(e,r);case"yAxis":return Xa(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},lu=(e,t,r)=>{switch(t){case"xAxis":return Ya(e,r);case"yAxis":return Xa(e,r);case"angleAxis":return Mx(e,r);case"radiusAxis":return $x(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},CA=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function EA(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Np=e=>e.graphicalItems.cartesianItems,eK=U([qt,wp],EA),PA=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),cu=U([Np,Dr,eK],PA,{memoizeOptions:{resultEqualityCheck:Sp}}),OA=U([cu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(_p)),AA=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),tK=U([cu],AA),TA=e=>e.map(t=>t.data).filter(Boolean).flat(1),rK=U([cu],TA,{memoizeOptions:{resultEqualityCheck:Sp}}),DA=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},Ux=U([rK,gp],DA),IA=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:tr(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:tr(a,n)}))):e.map(n=>({value:n})),kp=U([Ux,Dr,cu],IA);function RA(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Pd(e){if(da(e)||e instanceof Date){var t=Number(e);if(Tt(t))return t}}function yj(e){if(Array.isArray(e)){var t=[Pd(e[0]),Pd(e[1])];return Cs(t)?t:void 0}var r=Pd(e);if(r!=null)return[r,r]}function za(e){return e.map(Pd).filter(qF)}function nK(e,t,r){return!r||typeof t!="number"||Xn(t)?[]:r.length?za(r.flatMap(n=>{var a=tr(e,n.dataKey),i,s;if(Array.isArray(a)?[i,s]=a:i=s=a,!(!Tt(i)||!Tt(s)))return[t-i,t+s]})):[]}var Gt=e=>{var t=Vt(e),r=ll(e);return lu(e,t,r)},MA=U([Gt],e=>e==null?void 0:e.dataKey),aK=U([OA,gp,Gt],SA),$A=(e,t,r)=>{var n={},a=t.reduce((i,s)=>(s.stackId==null||(i[s.stackId]==null&&(i[s.stackId]=[]),i[s.stackId].push(s)),i),n);return Object.fromEntries(Object.entries(a).map(i=>{var[s,o]=i,c=o.map(Fx);return[s,{stackedData:JU(e,c,r),graphicalItems:o}]}))},Zv=U([aK,OA,yp],$A),LA=(e,t,r,n)=>{var{dataStartIndex:a,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var s=rz(e,a,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},iK=U([Dr],e=>e.allowDataOverflow),zx=e=>{var t;if(e==null||!("domain"in e))return Qv;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=za(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:Qv},FA=U([Dr],zx),BA=U([FA,iK],tA),sK=U([Zv,Li,qt,BA],LA,{memoizeOptions:{resultEqualityCheck:jp}}),Wx=e=>e.errorBars,oK=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>RA(r,n)),Kf=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var i=a.flat(),s=Math.min(...i),o=Math.max(...i);return[s,o]}},UA=(e,t,r,n,a)=>{var i,s;if(r.length>0&&e.forEach(o=>{r.forEach(c=>{var u,d,f=(u=n[c.id])===null||u===void 0?void 0:u.filter(x=>RA(a,x)),h=tr(o,(d=t.dataKey)!==null&&d!==void 0?d:c.dataKey),m=nK(o,h,f);if(m.length>=2){var g=Math.min(...m),y=Math.max(...m);(i==null||g<i)&&(i=g),(s==null||y>s)&&(s=y)}var v=yj(h);v!=null&&(i=i==null?v[0]:Math.min(i,v[0]),s=s==null?v[1]:Math.max(s,v[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(o=>{var c=yj(tr(o,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),Tt(i)&&Tt(s))return[i,s]},lK=U([Ux,Dr,tK,Wx,qt],UA,{memoizeOptions:{resultEqualityCheck:jp}});function cK(e){var{value:t}=e;if(da(t)||t instanceof Date)return t}var uK=(e,t,r)=>{var n=e.map(cK).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&UE(n))?bO(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},zA=e=>e.referenceElements.dots,cl=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),dK=U([zA,qt,wp],cl),WA=e=>e.referenceElements.areas,fK=U([WA,qt,wp],cl),KA=e=>e.referenceElements.lines,hK=U([KA,qt,wp],cl),HA=(e,t)=>{var r=za(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},pK=U(dK,qt,HA),qA=(e,t)=>{var r=za(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},mK=U([fK,qt],qA);function gK(e){var t;if(e.x!=null)return za([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:za(r)}function vK(e){var t;if(e.y!=null)return za([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:za(r)}var VA=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?gK(n):vK(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},yK=U([hK,qt],VA),xK=U(pK,yK,mK,(e,t,r)=>Kf(e,r,t)),GA=(e,t,r,n,a,i,s,o)=>{if(r!=null)return r;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?Kf(n,i,a):Kf(i,a);return PW(t,u,e.allowDataOverflow)},bK=U([Dr,FA,BA,sK,lK,xK,He,qt],GA,{memoizeOptions:{resultEqualityCheck:jp}}),wK=[0,1],YA=(e,t,r,n,a,i,s)=>{if(!((e==null||r==null||r.length===0)&&s===void 0)){var{dataKey:o,type:c}=e,u=Ri(t,i);if(u&&o==null){var d;return bO(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?uK(n,e,u):a==="expand"?wK:s}},Kx=U([Dr,He,Ux,kp,yp,qt,bK],YA),XA=(e,t,r,n,a)=>{if(e!=null){var{scale:i,type:s}=e;if(i==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":s==="category"?"band":"linear";if(typeof i=="string"){var o="scale".concat(Zc(i));return o in Fl?o:"point"}}},uu=U([Dr,He,CA,Dx,qt],XA);function _K(e){if(e!=null){if(e in Fl)return Fl[e]();var t="scale".concat(Zc(e));if(t in Fl)return Fl[t]()}}function Hx(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=_K(t);if(a!=null){var i=a.domain(r).range(n);return qU(i),i}}}var JA=(e,t,r)=>{var n=zx(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Cs(e))return FW(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Cs(e))return BW(e,t.tickCount,t.allowDecimals)}},qx=U([Kx,lu,uu],JA),QA=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Cs(t)&&Array.isArray(r)&&r.length>0){var a=t[0],i=r[0],s=t[1],o=r[r.length-1];return[Math.min(a,i),Math.max(s,o)]}return t},jK=U([Dr,Kx,qx,qt],QA),SK=U(kp,Dr,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(za(e.map(o=>o.value))).sort((o,c)=>o-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var i=0;i<n.length-1;i++){var s=n[i+1]-n[i];r=Math.min(r,s)}return r/a}}),ZA=U(SK,He,vA,rr,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Tt(e))return 0;var i=t==="vertical"?n.height:n.width;if(a==="gap")return e*i/2;if(a==="no-gap"){var s=Jn(r,e*i),o=e*i/2;return o-s-(o-s)/i*s}return 0}),NK=(e,t)=>{var r=Ya(e,t);return r==null||typeof r.padding!="string"?0:ZA(e,"xAxis",t,r.padding)},kK=(e,t)=>{var r=Xa(e,t);return r==null||typeof r.padding!="string"?0:ZA(e,"yAxis",t,r.padding)},CK=U(Ya,NK,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),EK=U(Xa,kK,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),PK=U([rr,CK,ip,ap,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:i}=n;return a?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),OK=U([rr,He,EK,ip,ap,(e,t,r)=>r],(e,t,r,n,a,i)=>{var{padding:s}=a;return i?[n.height-s.bottom,s.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),du=(e,t,r,n)=>{var a;switch(t){case"xAxis":return PK(e,r,n);case"yAxis":return OK(e,r,n);case"zAxis":return(a=Bx(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return wA(e);case"radiusAxis":return _A(e,r);default:return}},eT=U([Dr,du],xp),ul=U([Dr,uu,jK,eT],Hx);U([cu,Wx,qt],oK);function tT(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Cp=(e,t)=>t,Ep=(e,t,r)=>r,AK=U(rp,Cp,Ep,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(tT)),TK=U(np,Cp,Ep,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(tT)),rT=(e,t)=>({width:e.width,height:t.height}),DK=(e,t)=>{var r=typeof t.width=="number"?t.width:ru;return{width:r,height:e.height}},nT=U(rr,Ya,rT),IK=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},RK=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},MK=U(Va,rr,AK,Cp,Ep,(e,t,r,n,a)=>{var i={},s;return r.forEach(o=>{var c=rT(t,o);s==null&&(s=IK(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;i[o.id]=s-Number(u)*c.height,s+=(u?-1:1)*c.height}),i}),$K=U(qa,rr,TK,Cp,Ep,(e,t,r,n,a)=>{var i={},s;return r.forEach(o=>{var c=DK(t,o);s==null&&(s=RK(t,n,e));var u=n==="left"&&!a||n==="right"&&a;i[o.id]=s-Number(u)*c.width,s+=(u?-1:1)*c.width}),i}),LK=(e,t)=>{var r=Ya(e,t);if(r!=null)return MK(e,r.orientation,r.mirror)},FK=U([rr,Ya,LK,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:e.left,y:0}:{x:e.left,y:a}}}),BK=(e,t)=>{var r=Xa(e,t);if(r!=null)return $K(e,r.orientation,r.mirror)},UK=U([rr,Xa,BK,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:e.top}:{x:a,y:e.top}}}),aT=U(rr,Xa,(e,t)=>{var r=typeof t.width=="number"?t.width:ru;return{width:r,height:e.height}}),xj=(e,t,r)=>{switch(t){case"xAxis":return nT(e,r).width;case"yAxis":return aT(e,r).height;default:return}},iT=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:i,dataKey:s}=r,o=Ri(e,n),c=t.map(u=>u.value);if(s&&o&&i==="category"&&a&&UE(c))return c}},Vx=U([He,kp,Dr,qt],iT),sT=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:i}=r,s=Ri(e,n);if(s&&(a==="number"||i!=="auto"))return t.map(o=>o.value)}},Gx=U([He,kp,lu,qt],sT),bj=U([He,ZW,uu,ul,Vx,Gx,du,qx,qt],(e,t,r,n,a,i,s,o,c)=>{if(t!=null){var u=Ri(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:a,isCategorical:u,niceTicks:o,range:s,realScaleType:r,scale:n}}}),zK=(e,t,r,n,a,i,s,o,c)=>{if(!(t==null||n==null)){var u=Ri(e,c),{type:d,ticks:f,tickCount:h}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/m:0;g=c==="angleAxis"&&i!=null&&i.length>=2?Br(i[0]-i[1])*2*g:g;var y=f||a;if(y){var v=y.map((x,w)=>{var b=s?s.indexOf(x):x;return{index:w,coordinate:n(b)+g,value:x,offset:g}});return v.filter(x=>Tt(x.coordinate))}return u&&o?o.map((x,w)=>({coordinate:n(x)+g,value:x,index:w,offset:g})).filter(x=>Tt(x.coordinate)):n.ticks?n.ticks(h).map(x=>({coordinate:n(x)+g,value:x,offset:g})):n.domain().map((x,w)=>({coordinate:n(x)+g,value:s?s[x]:x,index:w,offset:g}))}},oT=U([He,lu,uu,ul,qx,du,Vx,Gx,qt],zK),WK=(e,t,r,n,a,i,s)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=Ri(e,s),{tickCount:c}=t,u=0;return u=s==="angleAxis"&&(n==null?void 0:n.length)>=2?Br(n[0]-n[1])*2*u:u,o&&i?i.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},Pi=U([He,lu,ul,du,Vx,Gx,qt],WK),Oi=U(Dr,ul,(e,t)=>{if(!(e==null||t==null))return Wf(Wf({},e),{},{scale:t})}),KK=U([Dr,uu,Kx,eT],Hx);U((e,t,r)=>Bx(e,r),KK,(e,t)=>{if(!(e==null||t==null))return Wf(Wf({},e),{},{scale:t})});var HK=U([He,rp,np],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),lT=e=>e.options.defaultTooltipEventType,cT=e=>e.options.validateTooltipEventTypes;function uT(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Yx(e,t){var r=lT(e),n=cT(e);return uT(t,r,n)}function qK(e){return Se(t=>Yx(t,e))}var dT=(e,t)=>{var r,n=Number(t);if(!(Xn(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},VK=e=>e.tooltip.settings,fi={active:!1,index:null,dataKey:void 0,coordinate:void 0},GK={itemInteraction:{click:fi,hover:fi},axisInteraction:{click:fi,hover:fi},keyboardInteraction:fi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},fT=Hr({name:"tooltip",initialState:GK,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Wt()},removeTooltipEntrySettings:{reducer(e,t){var r=Ca(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Wt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:YK,removeTooltipEntrySettings:XK,setTooltipSettingsState:JK,setActiveMouseOverItemIndex:hT,mouseLeaveItem:QK,mouseLeaveChart:pT,setActiveClickItemIndex:ZK,setMouseOverAxisIndex:mT,setMouseClickAxisIndex:eH,setSyncInteraction:ey,setKeyboardInteraction:ty}=fT.actions,tH=fT.reducer;function wj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function od(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wj(Object(r),!0).forEach(function(n){rH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rH(e,t,r){return(t=nH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nH(e){var t=aH(e,"string");return typeof t=="symbol"?t:t+""}function aH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iH(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function sH(e){return e.index!=null}var gT=(e,t,r,n)=>{if(t==null)return fi;var a=iH(e,t,r);if(a==null)return fi;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(sH(a)){if(i)return od(od({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return od(od({},fi),{},{coordinate:a.coordinate})},Xx=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Tt(n))return r;var a=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(a,Math.min(n,i)))},vT=(e,t,r,n,a,i,s,o)=>{if(!(i==null||o==null)){var c=s[0],u=c==null?void 0:o(c.positions,i);if(u!=null)return u;var d=a==null?void 0:a[Number(i)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},yT=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var s;return((s=i.settings)===null||s===void 0?void 0:s.dataKey)===a})},fu=e=>e.options.tooltipPayloadSearcher,dl=e=>e.tooltip;function _j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_j(Object(r),!0).forEach(function(n){oH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_j(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oH(e,t,r){return(t=lH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lH(e){var t=cH(e,"string");return typeof t=="symbol"?t:t+""}function cH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uH(e,t){return e??t}var xT=(e,t,r,n,a,i,s)=>{if(!(t==null||i==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,m)=>{var g,{dataDefinedOnItem:y,settings:v}=m,x=uH(y,o),w=Array.isArray(x)?qP(x,u,d):x,b=(g=v==null?void 0:v.dataKey)!==null&&g!==void 0?g:n,_=v==null?void 0:v.nameKey,j;if(n&&Array.isArray(w)&&!Array.isArray(w[0])&&s==="axis"?j=zE(w,n,a):j=i(w,t,c,_),Array.isArray(j))j.forEach(N=>{var k=jj(jj({},v),{},{name:N.name,unit:N.unit,color:void 0,fill:void 0});h.push(a1({tooltipEntrySettings:k,dataKey:N.dataKey,payload:N.payload,value:tr(N.payload,N.dataKey),name:N.name}))});else{var S;h.push(a1({tooltipEntrySettings:v,dataKey:b,payload:j,value:tr(j,b),name:(S=tr(j,_))!==null&&S!==void 0?S:v==null?void 0:v.name}))}return h},f)}},Jx=U([Gt,He,CA,Dx,Vt],XA),dH=U([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),fH=U([Vt,ll],EA),hu=U([dH,Gt,fH],PA,{memoizeOptions:{resultEqualityCheck:Sp}}),hH=U([hu],e=>e.filter(_p)),pH=U([hu],TA,{memoizeOptions:{resultEqualityCheck:Sp}}),fl=U([pH,Li],DA),mH=U([hH,Li,Gt],SA),Qx=U([fl,Gt,hu],IA),bT=U([Gt],zx),gH=U([Gt],e=>e.allowDataOverflow),wT=U([bT,gH],tA),vH=U([hu],e=>e.filter(_p)),yH=U([mH,vH,yp],$A),xH=U([yH,Li,Vt,wT],LA),bH=U([hu],AA),wH=U([fl,Gt,bH,Wx,Vt],UA,{memoizeOptions:{resultEqualityCheck:jp}}),_H=U([zA,Vt,ll],cl),jH=U([_H,Vt],HA),SH=U([WA,Vt,ll],cl),NH=U([SH,Vt],qA),kH=U([KA,Vt,ll],cl),CH=U([kH,Vt],VA),EH=U([jH,CH,NH],Kf),PH=U([Gt,bT,wT,xH,wH,EH,He,Vt],GA),_T=U([Gt,He,fl,Qx,yp,Vt,PH],YA),OH=U([_T,Gt,Jx],JA),AH=U([Gt,_T,OH,Vt],QA),jT=e=>{var t=Vt(e),r=ll(e),n=!1;return du(e,t,r,n)},ST=U([Gt,jT],xp),NT=U([Gt,Jx,AH,ST],Hx),TH=U([He,Qx,Gt,Vt],iT),DH=U([He,Qx,Gt,Vt],sT),IH=(e,t,r,n,a,i,s,o)=>{if(t){var{type:c}=t,u=Ri(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Br(a[0]-a[1])*2*f:f,u&&s?s.map((h,m)=>({coordinate:n(h)+f,value:h,index:m,offset:f})):n.domain().map((h,m)=>({coordinate:n(h)+f,value:i?i[h]:h,index:m,offset:f}))}}},Ja=U([He,Gt,Jx,NT,jT,TH,DH,Vt],IH),Zx=U([lT,cT,VK],(e,t,r)=>uT(r.shared,e,t)),kT=e=>e.tooltip.settings.trigger,eb=e=>e.tooltip.settings.defaultIndex,Pp=U([dl,Zx,kT,eb],gT),Ps=U([Pp,fl],Xx),CT=U([Ja,Ps],dT),ET=U([Pp],e=>{if(e)return e.dataKey}),PT=U([dl,Zx,kT,eb],yT),RH=U([qa,Va,He,rr,Ja,eb,PT,fu],vT),MH=U([Pp,RH],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),$H=U([Pp],e=>e.active),LH=U([PT,Ps,Li,MA,CT,fu,Zx],xT),FH=U([LH],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function Sj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sj(Object(r),!0).forEach(function(n){BH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BH(e,t,r){return(t=UH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UH(e){var t=zH(e,"string");return typeof t=="symbol"?t:t+""}function zH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WH=()=>Se(Gt),KH=()=>{var e=WH(),t=Se(Ja),r=Se(NT);return Fo(!e||!r?void 0:Nj(Nj({},e),{},{scale:r}),t)};function kj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kj(Object(r),!0).forEach(function(n){HH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HH(e,t,r){return(t=qH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qH(e){var t=VH(e,"string");return typeof t=="symbol"?t:t+""}function VH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GH=(e,t,r,n)=>{var a=t.find(i=>i&&i.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},YH=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="centric"){var i=a.coordinate,{radius:s}=n;return qs(qs(qs({},n),cr(n.cx,n.cy,s,i)),{},{angle:i,radius:s})}var o=a.coordinate,{angle:c}=n;return qs(qs(qs({},n),cr(n.cx,n.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function XH(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var OT=(e,t,r,n,a)=>{var i,s=-1,o=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<o;c++){var u=c>0?r[c-1].coordinate:r[o-1].coordinate,d=r[c].coordinate,f=c>=o-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(Br(d-u)!==Br(f-d)){var m=[];if(Br(f-d)===Br(a[1]-a[0])){h=f;var g=d+a[1]-a[0];m[0]=Math.min(g,(g+u)/2),m[1]=Math.max(g,(g+u)/2)}else{h=u;var y=f+a[1]-a[0];m[0]=Math.min(d,(y+d)/2),m[1]=Math.max(d,(y+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=m[0]&&e<=m[1]){({index:s}=r[c]);break}}else{var x=Math.min(u,f),w=Math.max(u,f);if(e>(x+d)/2&&e<=(w+d)/2){({index:s}=r[c]);break}}}else if(t){for(var b=0;b<o;b++)if(b===0&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:s}=t[b]);break}}return s},JH=()=>Se(Dx),tb=(e,t)=>t,AT=(e,t,r)=>r,rb=(e,t,r,n)=>n,QH=U(Ja,e=>Yh(e,t=>t.coordinate)),nb=U([dl,tb,AT,rb],gT),TT=U([nb,fl],Xx),ZH=(e,t,r)=>{if(t!=null){var n=dl(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},DT=U([dl,tb,AT,rb],yT),Hf=U([qa,Va,He,rr,Ja,rb,DT,fu],vT),eq=U([nb,Hf],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),IT=U([Ja,TT],dT),tq=U([DT,TT,Li,MA,IT,fu,tb],xT),rq=U([nb],e=>({isActive:e.active,activeIndex:e.index})),nq=(e,t,r,n,a,i,s)=>{if(!(!e||!r||!n||!a)&&XH(e,s)){var o=nz(e,t),c=OT(o,i,a,r,n),u=GH(t,a,c,e);return{activeIndex:String(c),activeCoordinate:u}}},aq=(e,t,r,n,a,i,s)=>{if(!(!e||!n||!a||!i||!r)){var o=G8(e,r);if(o){var c=az(o,t),u=OT(c,s,i,n,a),d=YH(t,i,u,o);return{activeIndex:String(u),activeCoordinate:d}}}},iq=(e,t,r,n,a,i,s,o)=>{if(!(!e||!t||!n||!a||!i))return t==="horizontal"||t==="vertical"?nq(e,t,n,a,i,s,o):aq(e,t,r,n,a,i,s)},sq=U(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),oq=U(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(Zt)),r=Array.from(new Set(t));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:GW}});function Cj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ej(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cj(Object(r),!0).forEach(function(n){lq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lq(e,t,r){return(t=cq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cq(e){var t=uq(e,"string");return typeof t=="symbol"?t:t+""}function uq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dq={},fq={zIndexMap:Object.values(Zt).reduce((e,t)=>Ej(Ej({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),dq)},hq=new Set(Object.values(Zt));function pq(e){return hq.has(e)}var RT=Hr({name:"zIndex",initialState:fq,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Wt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!pq(r)&&delete e.zIndexMap[r])},prepare:Wt()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:a}=t.payload;e.zIndexMap[r]?a?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:a?void 0:n,panoramaElementId:a?n:void 0}},prepare:Wt()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Wt()}}}),{registerZIndexPortal:mq,unregisterZIndexPortal:gq,registerZIndexPortalId:vq,unregisterZIndexPortalId:yq}=RT.actions,xq=RT.reducer;function An(e){var{zIndex:t,children:r}=e,n=Tz(),a=n&&t!==void 0&&t!==0,i=br(),s=Dt();p.useLayoutEffect(()=>a?(s(mq({zIndex:t})),()=>{s(gq({zIndex:t}))}):al,[s,t,a]);var o=Se(u=>sq(u,t,i));if(!a)return r;if(!o)return null;var c=document.getElementById(o);return c?mi.createPortal(r,c):null}function ry(){return ry=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ry.apply(null,arguments)}function Pj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ld(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pj(Object(r),!0).forEach(function(n){bq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bq(e,t,r){return(t=wq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wq(e){var t=_q(e,"string");return typeof t=="symbol"?t:t+""}function _q(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jq(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return p.isValidElement(t)?p.cloneElement(t,n):p.createElement(r,n)}function Sq(e){var t,{coordinate:r,payload:n,index:a,offset:i,tooltipAxisBandSize:s,layout:o,cursor:c,tooltipEventType:u,chartName:d}=e,f=r,h=n,m=a;if(!c||!f||d!=="ScatterChart"&&u!=="axis")return null;var g,y,v;if(d==="ScatterChart")g=f,y=c8,v=Zt.cursorLine;else if(d==="BarChart")g=u8(o,f,i,s),y=hO,v=Zt.cursorRectangle;else if(o==="radial"&&HE(f)){var{cx:x,cy:w,radius:b,startAngle:_,endAngle:j}=pO(f);g={cx:x,cy:w,startAngle:_,endAngle:j,innerRadius:b,outerRadius:b},y=gO,v=Zt.cursorLine}else g={points:Q8(o,f,i)},y=lO,v=Zt.cursorLine;var S=typeof c=="object"&&"className"in c?c.className:void 0,N=ld(ld(ld(ld({stroke:"#ccc",pointerEvents:"none"},i),g),Qc(c)),{},{payload:h,payloadIndex:m,className:Je("recharts-tooltip-cursor",S)});return p.createElement(An,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:v},p.createElement(jq,{cursor:c,cursorComp:y,cursorProps:N}))}function Nq(e){var t=KH(),r=nO(),n=nu(),a=JH();return t==null||r==null||n==null||a==null?null:p.createElement(Sq,ry({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var MT=p.createContext(null),kq=()=>p.useContext(MT),$T={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,g=new Array(m);h<m;h++)g[h]=f[h].fn;return g},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,m,g){var y=r?r+u:u;if(!this._events[y])return!1;var v=this._events[y],x=arguments.length,w,b;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),x){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,m),!0;case 6:return v.fn.call(v.context,d,f,h,m,g),!0}for(b=1,w=new Array(x-1);b<x;b++)w[b-1]=arguments[b];v.fn.apply(v.context,w)}else{var _=v.length,j;for(b=0;b<_;b++)switch(v[b].once&&this.removeListener(u,v[b].fn,void 0,!0),x){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,d);break;case 3:v[b].fn.call(v[b].context,d,f);break;case 4:v[b].fn.call(v[b].context,d,f,h);break;default:if(!w)for(j=1,w=new Array(x-1);j<x;j++)w[j-1]=arguments[j];v[b].fn.apply(v[b].context,w)}}return!0},o.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return s(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&s(this,m);else{for(var y=0,v=[],x=g.length;y<x;y++)(g[y].fn!==d||h&&!g[y].once||f&&g[y].context!==f)&&v.push(g[y]);v.length?this._events[m]=v.length===1?v[0]:v:s(this,m)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&s(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})($T);var Cq=$T.exports;const Eq=Ka(Cq);var Mc=new Eq,ny="recharts.syncEvent.tooltip",Oj="recharts.syncEvent.brush";function LT(e,t){if(t){var r=Number.parseInt(t,10);if(!Xn(r))return e==null?void 0:e[r]}}var Pq={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},FT=Hr({name:"options",initialState:Pq,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Oq=FT.reducer,{createEventEmitter:Aq}=FT.actions;function Tq(e){return e.tooltip.syncInteraction}var Dq={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},BT=Hr({name:"chartData",initialState:Dq,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:Aj,setDataStartEndIndexes:Iq,setComputedData:Lee}=BT.actions,Rq=BT.reducer,Mq=["x","y"];function Tj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tj(Object(r),!0).forEach(function(n){$q(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $q(e,t,r){return(t=Lq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lq(e){var t=Fq(e,"string");return typeof t=="symbol"?t:t+""}function Fq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bq(e,t){if(e==null)return{};var r,n,a=Uq(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Uq(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zq(){var e=Se(Ix),t=Se(Rx),r=Dt(),n=Se(yA),a=Se(Ja),i=nu(),s=sp(),o=Se(c=>c.rootProps.className);p.useEffect(()=>{if(e==null)return al;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){var h;if(s&&d!==null&&d!==void 0&&(h=d.payload)!==null&&h!==void 0&&h.coordinate&&d.payload.sourceViewBox){var m=d.payload.coordinate,{x:g,y}=m,v=Bq(m,Mq),{x,y:w,width:b,height:_}=d.payload.sourceViewBox,j=Vs(Vs({},v),{},{x:s.x+(b?(g-x)/b:0)*s.width,y:s.y+(_?(y-w)/_:0)*s.height});r(Vs(Vs({},d),{},{payload:Vs(Vs({},d.payload),{},{coordinate:j})}))}else r(d);return}if(a!=null){var S;if(typeof n=="function"){var N={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},k=n(a,N);S=a[k]}else n==="value"&&(S=a.find(B=>String(B.value)===d.payload.label));var{coordinate:E}=d.payload;if(S==null||d.payload.active===!1||E==null||s==null){r(ey({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:P,y:A}=E,D=Math.min(P,s.x+s.width),H=Math.min(A,s.y+s.height),Q={x:i==="horizontal"?S.coordinate:D,y:i==="horizontal"?H:S.coordinate},ee=ey({active:d.payload.active,coordinate:Q,dataKey:d.payload.dataKey,index:String(S.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox});r(ee)}}};return Mc.on(ny,c),()=>{Mc.off(ny,c)}},[o,r,t,e,n,a,i,s])}function Wq(){var e=Se(Ix),t=Se(Rx),r=Dt();p.useEffect(()=>{if(e==null)return al;var n=(a,i,s)=>{t!==s&&e===a&&r(Iq(i))};return Mc.on(Oj,n),()=>{Mc.off(Oj,n)}},[r,t,e])}function Kq(){var e=Dt();p.useEffect(()=>{e(Aq())},[e]),zq(),Wq()}function Hq(e,t,r,n,a,i){var s=Se(m=>ZH(m,e,t)),o=Se(Rx),c=Se(Ix),u=Se(yA),d=Se(Tq),f=d==null?void 0:d.active,h=sp();p.useEffect(()=>{if(!f&&c!=null&&o!=null){var m=ey({active:i,coordinate:r,dataKey:s,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:h});Mc.emit(ny,c,m,o)}},[f,r,s,a,n,o,c,u,i,h])}function Dj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ij(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dj(Object(r),!0).forEach(function(n){qq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qq(e,t,r){return(t=Vq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vq(e){var t=Gq(e,"string");return typeof t=="symbol"?t:t+""}function Gq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yq(e){return e.dataKey}function Xq(e,t){return p.isValidElement(e)?p.cloneElement(e,t):typeof e=="function"?p.createElement(e,t):p.createElement(Uz,t)}var Rj=[],Jq={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Is.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Mj(e){var t,r,n=Tr(e,Jq),{active:a,allowEscapeViewBox:i,animationDuration:s,animationEasing:o,content:c,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:h,position:m,reverseDirection:g,useTranslate3d:y,wrapperStyle:v,cursor:x,shared:w,trigger:b,defaultIndex:_,portal:j,axisId:S}=n,N=Dt(),k=typeof _=="number"?String(_):_;p.useEffect(()=>{N(JK({shared:w,trigger:b,axisId:S,active:a,defaultIndex:k}))},[N,w,b,S,a,k]);var E=sp(),P=oO(),A=qK(w),{activeIndex:D,isActive:H}=(t=Se($=>rq($,A,b,k)))!==null&&t!==void 0?t:{},Q=Se($=>tq($,A,b,k)),ee=Se($=>IT($,A,b,k)),B=Se($=>eq($,A,b,k)),W=Q,I=kq(),M=(r=a??H)!==null&&r!==void 0?r:!1,[L,oe]=HB([W,M]),re=A==="axis"?ee:void 0;Hq(A,b,B,re,D,M);var Ne=j??I;if(Ne==null||E==null||A==null)return null;var O=W??Rj;M||(O=Rj),u&&O.length&&(O=cB(O.filter($=>$.value!=null&&($.hide!==!0||n.includeHidden)),h,Yq));var q=O.length>0,te=p.createElement(Gz,{allowEscapeViewBox:i,animationDuration:s,animationEasing:o,isAnimationActive:d,active:M,coordinate:B,hasPayload:q,offset:f,position:m,reverseDirection:g,useTranslate3d:y,viewBox:E,wrapperStyle:v,lastBoundingBox:L,innerRef:oe,hasPortalFromProps:!!j},Xq(c,Ij(Ij({},n),{},{payload:O,label:re,active:M,activeIndex:D,coordinate:B,accessibilityLayer:P})));return p.createElement(p.Fragment,null,mi.createPortal(te,Ne),M&&p.createElement(Nq,{cursor:x,tooltipEventType:A,coordinate:B,payload:O,index:D}))}var UT=e=>null;UT.displayName="Cell";function Qq(e,t,r){return(t=Zq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zq(e){var t=eV(e,"string");return typeof t=="symbol"?t:t+""}function eV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class tV{constructor(t){Qq(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function $j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$j(Object(r),!0).forEach(function(n){nV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$j(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nV(e,t,r){return(t=aV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aV(e){var t=iV(e,"string");return typeof t=="symbol"?t:t+""}function iV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sV={cacheSize:2e3,enableCache:!0},zT=rV({},sV),Lj=new tV(zT.cacheSize),oV={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Fj="recharts_measurement_span";function lV(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",i=t.fontStyle||"",s=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(i,"|").concat(s,"|").concat(o)}var Bj=(e,t)=>{try{var r=document.getElementById(Fj);r||(r=document.createElement("span"),r.setAttribute("id",Fj),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,oV,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},ec=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Is.isSsr)return{width:0,height:0};if(!zT.enableCache)return Bj(t,r);var n=lV(t,r),a=Lj.get(n);if(a)return a;var i=Bj(t,r);return Lj.set(n,i),i},Uj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,cV=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,uV=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,WT={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},dV=Object.keys(WT),mo="NaN";function fV(e,t){return e*WT[t]}class $r{static parse(t){var r,[,n,a]=(r=uV.exec(t))!==null&&r!==void 0?r:[];return new $r(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Xn(t)&&(this.unit=""),r!==""&&!cV.test(r)&&(this.num=NaN,this.unit=""),dV.includes(r)&&(this.num=fV(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new $r(NaN,""):new $r(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new $r(NaN,""):new $r(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new $r(NaN,""):new $r(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new $r(NaN,""):new $r(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Xn(this.num)}}function KT(e){if(e.includes(mo))return mo;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,i]=(r=Uj.exec(t))!==null&&r!==void 0?r:[],s=$r.parse(n??""),o=$r.parse(i??""),c=a==="*"?s.multiply(o):s.divide(o);if(c.isNaN())return mo;t=t.replace(Uj,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=zj.exec(t))!==null&&u!==void 0?u:[],m=$r.parse(d??""),g=$r.parse(h??""),y=f==="+"?m.add(g):m.subtract(g);if(y.isNaN())return mo;t=t.replace(zj,y.toString())}return t}var Wj=/\(([^()]*)\)/;function hV(e){for(var t=e,r;(r=Wj.exec(t))!=null;){var[,n]=r;t=t.replace(Wj,KT(n))}return t}function pV(e){var t=e.replace(/\s+/g,"");return t=hV(t),t=KT(t),t}function mV(e){try{return pV(e)}catch{return mo}}function Xm(e){var t=mV(e.slice(5,-1));return t===mo?"":t}var gV=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],vV=["dx","dy","angle","className","breakAll"];function ay(){return ay=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ay.apply(null,arguments)}function Kj(e,t){if(e==null)return{};var r,n,a=yV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function yV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var HT=/[ \f\n\r\t\v\u2028\u2029]+/,qT=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];pt(t)||(r?a=t.toString().split(""):a=t.toString().split(HT));var i=a.map(o=>({word:o,width:ec(o,n).width})),s=r?0:ec("",n).width;return{wordsWithComputedWidth:i,spaceWidth:s}}catch{return null}};function xV(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var VT=(e,t,r,n)=>e.reduce((a,i)=>{var{word:s,width:o}=i,c=a[a.length-1];if(c&&o!=null&&(t==null||n||c.width+o+r<Number(t)))c.words.push(s),c.width+=o+r;else{var u={words:[s],width:o};a.push(u)}return a},[]),GT=e=>e.reduce((t,r)=>t.width>r.width?t:r),bV="",Hj=(e,t,r,n,a,i,s,o)=>{var c=e.slice(0,t),u=qT({breakAll:r,style:n,children:c+bV});if(!u)return[!1,[]];var d=VT(u.wordsWithComputedWidth,i,s,o),f=d.length>a||GT(d).width>Number(i);return[f,d]},wV=(e,t,r,n,a)=>{var{maxLines:i,children:s,style:o,breakAll:c}=e,u=we(i),d=String(s),f=VT(t,n,r,a);if(!u||a)return f;var h=f.length>i||GT(f).width>Number(n);if(!h)return f;for(var m=0,g=d.length-1,y=0,v;m<=g&&y<=d.length-1;){var x=Math.floor((m+g)/2),w=x-1,[b,_]=Hj(d,w,c,o,i,n,r,a),[j]=Hj(d,x,c,o,i,n,r,a);if(!b&&!j&&(m=x+1),b&&j&&(g=x-1),!b&&j){v=_;break}y++}return v||f},qj=e=>{var t=pt(e)?[]:e.toString().split(HT);return[{words:t,width:void 0}]},_V=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:i,maxLines:s}=e;if((t||r)&&!Is.isSsr){var o,c,u=qT({breakAll:i,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,c=f}else return qj(n);return wV({breakAll:i,children:n,maxLines:s,style:a},o,c,t,!!r)}return qj(n)},YT="#808080",jV={breakAll:!1,capHeight:"0.71em",fill:YT,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},ab=p.forwardRef((e,t)=>{var r=Tr(e,jV),{x:n,y:a,lineHeight:i,capHeight:s,fill:o,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,f=Kj(r,gV),h=p.useMemo(()=>_V({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:m,dy:g,angle:y,className:v,breakAll:x}=f,w=Kj(f,vV);if(!da(n)||!da(a)||h.length===0)return null;var b=Number(n)+(we(m)?m:0),_=Number(a)+(we(g)?g:0);if(!Tt(b)||!Tt(_))return null;var j;switch(d){case"start":j=Xm("calc(".concat(s,")"));break;case"middle":j=Xm("calc(".concat((h.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:j=Xm("calc(".concat(h.length-1," * -").concat(i,")"));break}var S=[];if(c){var N=h[0].width,{width:k}=f;S.push("scale(".concat(we(k)&&we(N)?k/N:1,")"))}return y&&S.push("rotate(".concat(y,", ").concat(b,", ").concat(_,")")),S.length&&(w.transform=S.join(" ")),p.createElement("text",ay({},Er(w),{ref:t,x:b,y:_,className:Je("recharts-text",v),textAnchor:u,fill:o.includes("url")?YT:o}),h.map((E,P)=>{var A=E.words.join(x?"":" ");return p.createElement("tspan",{x:b,dy:P===0?j:i,key:"".concat(A,"-").concat(P)},A)}))});ab.displayName="Text";var SV=["labelRef"];function NV(e,t){if(e==null)return{};var r,n,a=kV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function kV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Vj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Pt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vj(Object(r),!0).forEach(function(n){CV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CV(e,t,r){return(t=EV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EV(e){var t=PV(e,"string");return typeof t=="symbol"?t:t+""}function PV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ba(){return ba=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ba.apply(null,arguments)}var XT=p.createContext(null),OV=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:a,width:i,height:s,children:o}=e,c=p.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:a,width:i,height:s}),[t,r,n,a,i,s]);return p.createElement(XT.Provider,{value:c},o)},JT=()=>{var e=p.useContext(XT),t=sp();return e||rO(t)},AV=p.createContext(null),TV=()=>{var e=p.useContext(AV),t=Se(jA);return e||t},DV=e=>{var{value:t,formatter:r}=e,n=pt(e.children)?t:e.children;return typeof r=="function"?r(n):n},ib=e=>e!=null&&typeof e=="function",IV=(e,t)=>{var r=Br(t-e),n=Math.min(Math.abs(t-e),360);return r*n},RV=(e,t,r,n,a)=>{var{offset:i,className:s}=e,{cx:o,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:m}=a,g=(u+d)/2,y=IV(f,h),v=y>=0?1:-1,x,w;switch(t){case"insideStart":x=f+v*i,w=m;break;case"insideEnd":x=h-v*i,w=!m;break;case"end":x=h+v*i,w=m;break;default:throw new Error("Unsupported position ".concat(t))}w=y<=0?w:!w;var b=cr(o,c,g,x),_=cr(o,c,g,x+(w?1:-1)*359),j="M".concat(b.x,",").concat(b.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(_.x,",").concat(_.y),S=pt(e.id)?kc("recharts-radial-line-"):e.id;return p.createElement("text",ba({},n,{dominantBaseline:"central",className:Je("recharts-radial-bar-label",s)}),p.createElement("defs",null,p.createElement("path",{id:S,d:j})),p.createElement("textPath",{xlinkHref:"#".concat(S)},r))},MV=(e,t,r)=>{var{cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:o,endAngle:c}=e,u=(o+c)/2;if(r==="outside"){var{x:d,y:f}=cr(n,a,s+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(i+s)/2,{x:m,y:g}=cr(n,a,h,u);return{x:m,y:g,textAnchor:"middle",verticalAnchor:"middle"}},iy=e=>"cx"in e&&we(e.cx),$V=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,i;r!=null&&!iy(r)&&(i=r);var{x:s,y:o,upperWidth:c,lowerWidth:u,height:d}=t,f=s,h=s+(c-u)/2,m=(f+h)/2,g=(c+u)/2,y=f+c/2,v=d>=0?1:-1,x=v*n,w=v>0?"end":"start",b=v>0?"start":"end",_=c>=0?1:-1,j=_*n,S=_>0?"end":"start",N=_>0?"start":"end";if(a==="top"){var k={x:f+c/2,y:o-x,textAnchor:"middle",verticalAnchor:w};return Pt(Pt({},k),i?{height:Math.max(o-i.y,0),width:c}:{})}if(a==="bottom"){var E={x:h+u/2,y:o+d+x,textAnchor:"middle",verticalAnchor:b};return Pt(Pt({},E),i?{height:Math.max(i.y+i.height-(o+d),0),width:u}:{})}if(a==="left"){var P={x:m-j,y:o+d/2,textAnchor:S,verticalAnchor:"middle"};return Pt(Pt({},P),i?{width:Math.max(P.x-i.x,0),height:d}:{})}if(a==="right"){var A={x:m+g+j,y:o+d/2,textAnchor:N,verticalAnchor:"middle"};return Pt(Pt({},A),i?{width:Math.max(i.x+i.width-A.x,0),height:d}:{})}var D=i?{width:g,height:d}:{};return a==="insideLeft"?Pt({x:m+j,y:o+d/2,textAnchor:N,verticalAnchor:"middle"},D):a==="insideRight"?Pt({x:m+g-j,y:o+d/2,textAnchor:S,verticalAnchor:"middle"},D):a==="insideTop"?Pt({x:f+c/2,y:o+x,textAnchor:"middle",verticalAnchor:b},D):a==="insideBottom"?Pt({x:h+u/2,y:o+d-x,textAnchor:"middle",verticalAnchor:w},D):a==="insideTopLeft"?Pt({x:f+j,y:o+x,textAnchor:N,verticalAnchor:b},D):a==="insideTopRight"?Pt({x:f+c-j,y:o+x,textAnchor:S,verticalAnchor:b},D):a==="insideBottomLeft"?Pt({x:h+j,y:o+d-x,textAnchor:N,verticalAnchor:w},D):a==="insideBottomRight"?Pt({x:h+u-j,y:o+d-x,textAnchor:S,verticalAnchor:w},D):a&&typeof a=="object"&&(we(a.x)||$a(a.x))&&(we(a.y)||$a(a.y))?Pt({x:s+Jn(a.x,g),y:o+Jn(a.y,d),textAnchor:"end",verticalAnchor:"end"},D):Pt({x:y,y:o+d/2,textAnchor:"middle",verticalAnchor:"middle"},D)},LV={offset:5,zIndex:Zt.label};function li(e){var t=Tr(e,LV),{viewBox:r,position:n,value:a,children:i,content:s,className:o="",textBreakAll:c,labelRef:u}=t,d=TV(),f=JT(),h=n==="center"?f:d??f,m,g,y;if(r==null?m=h:iy(r)?m=r:m=rO(r),!m||pt(a)&&pt(i)&&!p.isValidElement(s)&&typeof s!="function")return null;var v=Pt(Pt({},t),{},{viewBox:m});if(p.isValidElement(s)){var{labelRef:x}=v,w=NV(v,SV);return p.cloneElement(s,w)}if(typeof s=="function"){if(g=p.createElement(s,v),p.isValidElement(g))return g}else g=DV(t);var b=Er(t);if(iy(m)){if(n==="insideStart"||n==="insideEnd"||n==="end")return RV(t,n,g,b,m);y=MV(m,t.offset,t.position)}else y=$V(t,m);return p.createElement(An,{zIndex:t.zIndex},p.createElement(ab,ba({ref:u,className:Je("recharts-label",o)},b,y,{textAnchor:xV(b.textAnchor)?b.textAnchor:y.textAnchor,breakAll:c}),g))}li.displayName="Label";var FV=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?p.createElement(li,ba({key:"label-implicit"},n)):da(e)?p.createElement(li,ba({key:"label-implicit",value:e},n)):p.isValidElement(e)?e.type===li?p.cloneElement(e,Pt({key:"label-implicit"},n)):p.createElement(li,ba({key:"label-implicit",content:e},n)):ib(e)?p.createElement(li,ba({key:"label-implicit",content:e},n)):e&&typeof e=="object"?p.createElement(li,ba({},e,{key:"label-implicit"},n)):null};function BV(e){var{label:t,labelRef:r}=e,n=JT();return FV(t,n,r)||null}var QT={},ZT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(ZT);var eD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(eD);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZT,r=eD,n=Vh;function a(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=a})(QT);var UV=QT.last;const zV=Ka(UV);var WV=["valueAccessor"],KV=["dataKey","clockWise","id","textBreakAll","zIndex"];function qf(){return qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qf.apply(null,arguments)}function Gj(e,t){if(e==null)return{};var r,n,a=HV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function HV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var qV=e=>Array.isArray(e.value)?zV(e.value):e.value,tD=p.createContext(void 0),rD=tD.Provider,nD=p.createContext(void 0);nD.Provider;function VV(){return p.useContext(tD)}function GV(){return p.useContext(nD)}function Od(e){var{valueAccessor:t=qV}=e,r=Gj(e,WV),{dataKey:n,clockWise:a,id:i,textBreakAll:s,zIndex:o}=r,c=Gj(r,KV),u=VV(),d=GV(),f=u||d;return!f||!f.length?null:p.createElement(An,{zIndex:o??Zt.label},p.createElement(Cn,{className:"recharts-label-list"},f.map((h,m)=>{var g,y=pt(n)?t(h,m):tr(h&&h.payload,n),v=pt(i)?{}:{id:"".concat(i,"-").concat(m)};return p.createElement(li,qf({key:"label-".concat(m)},Er(h),c,v,{fill:(g=r.fill)!==null&&g!==void 0?g:h.fill,parentViewBox:h.parentViewBox,value:y,textBreakAll:s,viewBox:h.viewBox,index:m,zIndex:0}))})))}Od.displayName="LabelList";function aD(e){var{label:t}=e;return t?t===!0?p.createElement(Od,{key:"labelList-implicit"}):p.isValidElement(t)||ib(t)?p.createElement(Od,{key:"labelList-implicit",content:t}):typeof t=="object"?p.createElement(Od,qf({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function sy(){return sy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sy.apply(null,arguments)}var iD=e=>{var{cx:t,cy:r,r:n,className:a}=e,i=Je("recharts-dot",a);return we(t)&&we(r)&&we(n)?p.createElement("circle",sy({},Yn(e),U0(e),{className:i,cx:t,cy:r,r:n})):null},YV={radiusAxis:{},angleAxis:{}},sD=Hr({name:"polarAxis",initialState:YV,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Fee,removeRadiusAxis:Bee,addAngleAxis:Uee,removeAngleAxis:zee}=sD.actions,XV=sD.reducer,oD={exports:{}},et={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sb=Symbol.for("react.transitional.element"),ob=Symbol.for("react.portal"),Op=Symbol.for("react.fragment"),Ap=Symbol.for("react.strict_mode"),Tp=Symbol.for("react.profiler"),Dp=Symbol.for("react.consumer"),Ip=Symbol.for("react.context"),Rp=Symbol.for("react.forward_ref"),Mp=Symbol.for("react.suspense"),$p=Symbol.for("react.suspense_list"),Lp=Symbol.for("react.memo"),Fp=Symbol.for("react.lazy"),JV=Symbol.for("react.view_transition"),QV=Symbol.for("react.client.reference");function Tn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case sb:switch(e=e.type,e){case Op:case Tp:case Ap:case Mp:case $p:case JV:return e;default:switch(e=e&&e.$$typeof,e){case Ip:case Rp:case Fp:case Lp:return e;case Dp:return e;default:return t}}case ob:return t}}}et.ContextConsumer=Dp;et.ContextProvider=Ip;et.Element=sb;et.ForwardRef=Rp;et.Fragment=Op;et.Lazy=Fp;et.Memo=Lp;et.Portal=ob;et.Profiler=Tp;et.StrictMode=Ap;et.Suspense=Mp;et.SuspenseList=$p;et.isContextConsumer=function(e){return Tn(e)===Dp};et.isContextProvider=function(e){return Tn(e)===Ip};et.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===sb};et.isForwardRef=function(e){return Tn(e)===Rp};et.isFragment=function(e){return Tn(e)===Op};et.isLazy=function(e){return Tn(e)===Fp};et.isMemo=function(e){return Tn(e)===Lp};et.isPortal=function(e){return Tn(e)===ob};et.isProfiler=function(e){return Tn(e)===Tp};et.isStrictMode=function(e){return Tn(e)===Ap};et.isSuspense=function(e){return Tn(e)===Mp};et.isSuspenseList=function(e){return Tn(e)===$p};et.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Op||e===Tp||e===Ap||e===Mp||e===$p||typeof e=="object"&&e!==null&&(e.$$typeof===Fp||e.$$typeof===Lp||e.$$typeof===Ip||e.$$typeof===Dp||e.$$typeof===Rp||e.$$typeof===QV||e.getModuleId!==void 0)};et.typeOf=Tn;oD.exports=et;var ZV=oD.exports,Yj=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",Xj=null,Jm=null,lD=e=>{if(e===Xj&&Array.isArray(Jm))return Jm;var t=[];return p.Children.forEach(e,r=>{pt(r)||(ZV.isFragment(r)?t=t.concat(lD(r.props.children)):t.push(r))}),Jm=t,Xj=e,t};function eG(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>Yj(a)):n=[Yj(t)],lD(e).forEach(a=>{var i=$o(a,"type.displayName")||$o(a,"type.name");i&&n.indexOf(i)!==-1&&r.push(a)}),r}var cD=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,uD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(uD);var tG=uD.isPlainObject;const rG=Ka(tG);function Jj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jj(Object(r),!0).forEach(function(n){nG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nG(e,t,r){return(t=aG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aG(e){var t=iG(e,"string");return typeof t=="symbol"?t:t+""}function iG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vf(){return Vf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vf.apply(null,arguments)}var Zj=(e,t,r,n,a)=>{var i=r-n,s;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-i/2,",").concat(t+a),s+="L ".concat(e+r-i/2-n,",").concat(t+a),s+="L ".concat(e,",").concat(t," Z"),s},sG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oG=e=>{var t=Tr(e,sG),{x:r,y:n,upperWidth:a,lowerWidth:i,height:s,className:o}=t,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:f}=t,h=p.useRef(null),[m,g]=p.useState(-1),y=p.useRef(a),v=p.useRef(i),x=p.useRef(s),w=p.useRef(r),b=p.useRef(n),_=cp(e,"trapezoid-");if(p.useEffect(()=>{if(h.current&&h.current.getTotalLength)try{var Q=h.current.getTotalLength();Q&&g(Q)}catch{}},[]),r!==+r||n!==+n||a!==+a||i!==+i||s!==+s||a===0&&i===0||s===0)return null;var j=Je("recharts-trapezoid",o);if(!f)return p.createElement("g",null,p.createElement("path",Vf({},Er(t),{className:j,d:Zj(r,n,a,i,s)})));var S=y.current,N=v.current,k=x.current,E=w.current,P=b.current,A="0px ".concat(m===-1?1:m,"px"),D="".concat(m,"px 0px"),H=cO(["strokeDasharray"],u,c);return p.createElement(lp,{animationId:_,key:_,canBegin:m>0,duration:u,easing:c,isActive:f,begin:d},Q=>{var ee=Nt(S,a,Q),B=Nt(N,i,Q),W=Nt(k,s,Q),I=Nt(E,r,Q),M=Nt(P,n,Q);h.current&&(y.current=ee,v.current=B,x.current=W,w.current=I,b.current=M);var L=Q>0?{transition:H,strokeDasharray:D}:{strokeDasharray:A};return p.createElement("path",Vf({},Er(t),{className:j,d:Zj(I,M,ee,B,W),ref:h,style:Qj(Qj({},L),t.style)}))})},lG=["option","shapeType","propTransformer","activeClassName","isActive"];function cG(e,t){if(e==null)return{};var r,n,a=uG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function uG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function eS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eS(Object(r),!0).forEach(function(n){dG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dG(e,t,r){return(t=fG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fG(e){var t=hG(e,"string");return typeof t=="symbol"?t:t+""}function hG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pG(e,t){return Gf(Gf({},t),e)}function mG(e,t){return e==="symbols"}function tS(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return p.createElement(hO,r);case"trapezoid":return p.createElement(oG,r);case"sector":return p.createElement(gO,r);case"symbols":if(mG(t))return p.createElement(KE,r);break;case"curve":return p.createElement(lO,r);default:return null}}function gG(e){return p.isValidElement(e)?e.props:e}function dD(e){var{option:t,shapeType:r,propTransformer:n=pG,activeClassName:a="recharts-active-shape",isActive:i}=e,s=cG(e,lG),o;if(p.isValidElement(t))o=p.cloneElement(t,Gf(Gf({},s),gG(t)));else if(typeof t=="function")o=t(s);else if(rG(t)&&typeof t!="boolean"){var c=n(t,s);o=p.createElement(tS,{shapeType:r,elementProps:c})}else{var u=s;o=p.createElement(tS,{shapeType:r,elementProps:u})}return i?p.createElement(Cn,{className:a},o):o}var fD=(e,t)=>{var r=Dt();return(n,a)=>i=>{e==null||e(n,a,i),r(hT({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},hD=e=>{var t=Dt();return(r,n)=>a=>{e==null||e(r,n,a),t(QK())}},pD=(e,t)=>{var r=Dt();return(n,a)=>i=>{e==null||e(n,a,i),r(ZK({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function mD(e){var{fn:t,args:r}=e,n=Dt(),a=br();return p.useLayoutEffect(()=>{if(!a){var i=t(r);return n(YK(i)),()=>{n(XK(i))}}},[t,r,n,a]),null}function gD(e){var{legendPayload:t}=e,r=Dt(),n=br();return p.useLayoutEffect(()=>n?al:(r(Iz(t)),()=>{r(Rz(t))}),[r,n,t]),null}var Qm,vG=()=>{var[e]=p.useState(()=>kc("uid-"));return e},yG=(Qm=bI.useId)!==null&&Qm!==void 0?Qm:vG;function vD(e,t){var r=yG();return t||(e?"".concat(e,"-").concat(r):r)}var xG=p.createContext(void 0),yD=e=>{var{id:t,type:r,children:n}=e,a=vD("recharts-".concat(r),t);return p.createElement(xG.Provider,{value:a},n(a))},bG={cartesianItems:[],polarItems:[]},xD=Hr({name:"graphicalItems",initialState:bG,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Wt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,a=Ca(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},prepare:Wt()},removeCartesianGraphicalItem:{reducer(e,t){var r=Ca(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Wt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Wt()},removePolarGraphicalItem:{reducer(e,t){var r=Ca(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Wt()}}}),{addCartesianGraphicalItem:wG,replaceCartesianGraphicalItem:_G,removeCartesianGraphicalItem:jG,addPolarGraphicalItem:Wee,removePolarGraphicalItem:Kee}=xD.actions,SG=xD.reducer;function bD(e){var t=Dt(),r=p.useRef(null);return p.useLayoutEffect(()=>{r.current===null?t(wG(e)):r.current!==e&&t(_G({prev:r.current,next:e})),r.current=e},[t,e]),p.useLayoutEffect(()=>()=>{r.current&&(t(jG(r.current)),r.current=null)},[t]),null}var NG=["points"];function rS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rS(Object(r),!0).forEach(function(n){kG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kG(e,t,r){return(t=CG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CG(e){var t=EG(e,"string");return typeof t=="symbol"?t:t+""}function EG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yf(){return Yf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yf.apply(null,arguments)}function PG(e,t){if(e==null)return{};var r,n,a=OG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function OG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function AG(e){var{option:t,dotProps:r,className:n}=e;if(p.isValidElement(t))return p.cloneElement(t,r);if(typeof t=="function")return t(r);var a=Je(n,typeof t!="boolean"?t.className:""),i=r??{},{points:s}=i,o=PG(i,NG);return p.createElement(iD,Yf({},o,{className:a}))}function TG(e,t){return e==null?!1:t?!0:e.length===1}function DG(e){var{points:t,dot:r,className:n,dotClassName:a,dataKey:i,baseProps:s,needClip:o,clipPathId:c,zIndex:u=Zt.scatter}=e;if(!TG(t,r))return null;var d=cD(r),f=nF(r),h=t.map((g,y)=>{var v,x,w=Zm(Zm(Zm({r:3},s),f),{},{index:y,cx:(v=g.x)!==null&&v!==void 0?v:void 0,cy:(x=g.y)!==null&&x!==void 0?x:void 0,dataKey:i,value:g.value,payload:g.payload,points:t});return p.createElement(AG,{key:"dot-".concat(y),option:r,dotProps:w,className:a})}),m={};return o&&c!=null&&(m.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(c,")")),p.createElement(An,{zIndex:u},p.createElement(Cn,Yf({className:n},m),h))}function nS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function aS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nS(Object(r),!0).forEach(function(n){IG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IG(e,t,r){return(t=RG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RG(e){var t=MG(e,"string");return typeof t=="symbol"?t:t+""}function MG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $G={xAxis:{},yAxis:{},zAxis:{}},wD=Hr({name:"cartesianAxis",initialState:$G,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Wt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Wt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Wt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Wt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Wt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Wt()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,a=e.yAxis[r];if(a){var i=a.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==a.width&&Math.abs(n-i[0])<=1)return;var s=[...i,n].slice(-3);e.yAxis[r]=aS(aS({},e.yAxis[r]),{},{width:n,widthHistory:s})}}}}),{addXAxis:LG,removeXAxis:FG,addYAxis:BG,removeYAxis:UG,addZAxis:Hee,removeZAxis:qee,updateYAxisWidth:zG}=wD.actions,WG=wD.reducer,KG=U([rr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),HG=U([KG,qa,Va],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),lb=()=>Se(HG),qG=()=>Se(FH);function iS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iS(Object(r),!0).forEach(function(n){VG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VG(e,t,r){return(t=GG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GG(e){var t=YG(e,"string");return typeof t=="symbol"?t:t+""}function YG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XG=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:i}=e;if(a===!1||t.x==null||t.y==null)return null;var s={index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},o=eg(eg(eg({},s),Qc(a)),U0(a)),c;return p.isValidElement(a)?c=p.cloneElement(a,o):typeof a=="function"?c=a(o):c=p.createElement(iD,o),p.createElement(Cn,{className:"recharts-active-dot"},c)};function JG(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a,zIndex:i=Zt.activeDot}=e,s=Se(Ps),o=qG();if(t==null||o==null)return null;var c=t.find(u=>o.includes(u.payload));return pt(c)?null:p.createElement(An,{zIndex:i},p.createElement(XG,{point:c,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n}))}var QG="Invariant failed";function ZG(e,t){throw new Error(QG)}var eY=["x","y"];function oy(){return oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oy.apply(null,arguments)}function sS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Pl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sS(Object(r),!0).forEach(function(n){tY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tY(e,t,r){return(t=rY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rY(e){var t=nY(e,"string");return typeof t=="symbol"?t:t+""}function nY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aY(e,t){if(e==null)return{};var r,n,a=iY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function iY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function sY(e,t){var{x:r,y:n}=e,a=aY(e,eY),i="".concat(r),s=parseInt(i,10),o="".concat(n),c=parseInt(o,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return Pl(Pl(Pl(Pl(Pl({},t),a),s?{x:s}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function Xf(e){return p.createElement(dD,oy({shapeType:"rectangle",propTransformer:sY,activeClassName:"recharts-active-bar"},e))}var oY=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(we(t))return t;var i=we(n)||pt(n);return i?t(n,a):(i||ZG(),r)}},lY={},_D=Hr({name:"errorBars",initialState:lY,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:a}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?a:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:Vee,replaceErrorBar:Gee,removeErrorBar:Yee}=_D.actions,cY=_D.reducer,uY=["children"];function dY(e,t){if(e==null)return{};var r,n,a=fY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function fY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hY={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},pY=p.createContext(hY);function jD(e){var{children:t}=e,r=dY(e,uY);return p.createElement(pY.Provider,{value:r},t)}function cb(e,t){var r,n,a=Se(u=>Ya(u,e)),i=Se(u=>Xa(u,t)),s=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Qr.allowDataOverflow,o=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Zr.allowDataOverflow,c=s||o;return{needClip:c,needClipX:s,needClipY:o}}function SD(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=lb(),{needClipX:i,needClipY:s,needClip:o}=cb(t,r);if(!o||!a)return null;var{x:c,y:u,width:d,height:f}=a;return p.createElement("clipPath",{id:"clipPath-".concat(n)},p.createElement("rect",{x:i?c:c-d/2,y:s?u:u-f/2,width:i?d:d*2,height:s?f:f*2}))}function mY(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Tt(e.zIndex)?e.zIndex:t}var gY=["onMouseEnter","onMouseLeave","onClick"],vY=["value","background","tooltipPosition"],yY=["id"],xY=["onMouseEnter","onClick","onMouseLeave"];function Wa(){return Wa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wa.apply(null,arguments)}function oS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oS(Object(r),!0).forEach(function(n){bY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bY(e,t,r){return(t=wY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wY(e){var t=_Y(e,"string");return typeof t=="symbol"?t:t+""}function _Y(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jf(e,t){if(e==null)return{};var r,n,a=jY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function jY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var SY=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:tp(r,t),payload:e}]};function NY(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:i,hide:s,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:tp(i,t),hide:s,type:e.tooltipType,color:e.fill,unit:o}}}function kY(e){var t=Se(Ps),{data:r,dataKey:n,background:a,allOtherBarProps:i}=e,{onMouseEnter:s,onMouseLeave:o,onClick:c}=i,u=Jf(i,gY),d=fD(s,n),f=hD(o),h=pD(c,n);if(!a||r==null)return null;var m=Qc(a);return p.createElement(An,{zIndex:mY(a,Zt.barBackground)},r.map((g,y)=>{var{value:v,background:x,tooltipPosition:w}=g,b=Jf(g,vY);if(!x)return null;var _=d(g,y),j=f(g,y),S=h(g,y),N=Nr(Nr(Nr(Nr(Nr({option:a,isActive:String(y)===t},b),{},{fill:"#eee"},x),m),z0(u,g,y)),{},{onMouseEnter:_,onMouseLeave:j,onClick:S,dataKey:n,index:y,className:"recharts-bar-background-rectangle"});return p.createElement(Xf,Wa({key:"background-bar-".concat(y)},N))}))}function CY(e){var{showLabels:t,children:r,rects:n}=e,a=n==null?void 0:n.map(i=>{var s={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return Nr(Nr({},s),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:s,fill:i.fill})});return p.createElement(rD,{value:t?a:void 0},r)}function EY(e){var{shape:t,activeBar:r,baseProps:n,entry:a,index:i,dataKey:s}=e,o=Se(Ps),c=Se(ET),u=r&&String(i)===o&&(c==null||s===c),d=u?r:t;return u?p.createElement(An,{zIndex:Zt.activeBar},p.createElement(Xf,Wa({},n,{name:String(n.name)},a,{isActive:u,option:d,index:i,dataKey:s}))):p.createElement(Xf,Wa({},n,{name:String(n.name)},a,{isActive:u,option:d,index:i,dataKey:s}))}function PY(e){var{shape:t,baseProps:r,entry:n,index:a,dataKey:i}=e;return p.createElement(Xf,Wa({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:a,dataKey:i}))}function OY(e){var t,{data:r,props:n}=e,a=(t=Yn(n))!==null&&t!==void 0?t:{},{id:i}=a,s=Jf(a,yY),{shape:o,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:f,onMouseLeave:h}=n,m=Jf(n,xY),g=fD(d,c),y=hD(h),v=pD(f,c);return r?p.createElement(p.Fragment,null,r.map((x,w)=>p.createElement(Cn,Wa({key:"rectangle-".concat(x==null?void 0:x.x,"-").concat(x==null?void 0:x.y,"-").concat(x==null?void 0:x.value,"-").concat(w),className:"recharts-bar-rectangle"},z0(m,x,w),{onMouseEnter:g(x,w),onMouseLeave:y(x,w),onClick:v(x,w)}),u?p.createElement(EY,{shape:o,activeBar:u,baseProps:s,entry:x,index:w,dataKey:c}):p.createElement(PY,{shape:o,baseProps:s,entry:x,index:w,dataKey:c})))):null}function AY(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:i,animationBegin:s,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=cp(t,"recharts-bar-"),[m,g]=p.useState(!1),y=!m,v=p.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),x=p.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return p.createElement(CY,{showLabels:y,rects:n},p.createElement(lp,{animationId:h,begin:s,duration:o,isActive:i,easing:c,onAnimationEnd:v,onAnimationStart:x,key:h},w=>{var b=w===1?n:n==null?void 0:n.map((_,j)=>{var S=f&&f[j];if(S)return Nr(Nr({},_),{},{x:Nt(S.x,_.x,w),y:Nt(S.y,_.y,w),width:Nt(S.width,_.width,w),height:Nt(S.height,_.height,w)});if(a==="horizontal"){var N=Nt(0,_.height,w),k=Nt(_.stackedBarStart,_.y,w);return Nr(Nr({},_),{},{y:k,height:N})}var E=Nt(0,_.width,w),P=Nt(_.stackedBarStart,_.x,w);return Nr(Nr({},_),{},{width:E,x:P})});return w>0&&(r.current=b??null),b==null?null:p.createElement(Cn,null,p.createElement(OY,{props:t,data:b}))}),p.createElement(aD,{label:t.label}),t.children)}function TY(e){var t=p.useRef(null);return p.createElement(AY,{previousRectanglesRef:t,props:e})}var ND=0,DY=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:tr(e,t)}};class IY extends p.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:i,yAxisId:s,needClip:o,background:c,id:u}=this.props;if(t||r==null)return null;var d=Je("recharts-bar",a),f=u;return p.createElement(Cn,{className:d,id:u},o&&p.createElement("defs",null,p.createElement(SD,{clipPathId:f,xAxisId:i,yAxisId:s})),p.createElement(Cn,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},p.createElement(kY,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),p.createElement(TY,this.props)))}}var RY={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Is.isSsr,legendType:"rect",minPointSize:ND,xAxisId:0,yAxisId:0,zIndex:Zt.bar};function MY(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:i,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=cb(t,r),h=nu(),m=br(),g=eG(e.children,UT),y=Se(w=>uX(w,t,r,m,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var v,x=y==null?void 0:y[0];return x==null||x.height==null||x.width==null?v=0:v=h==="vertical"?x.height/2:x.width/2,p.createElement(jD,{xAxisId:t,yAxisId:r,data:y,dataPointFormatter:DY,errorBarOffset:v},p.createElement(IY,Wa({},e,{layout:h,needClip:f,data:y,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:i,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function $Y(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:i,xAxis:s,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:m,parentViewBox:g,dataStartIndex:y}=e,v=t==="horizontal"?o:s,x=d?v.scale.domain():null,w=ZU({numericAxis:v}),b=v.scale(w);return f.map((_,j)=>{var S,N,k,E,P,A;d?S=VU(d[j+y],x):(S=tr(_,r),Array.isArray(S)||(S=[w,S]));var D=oY(n,ND)(S[1],j);if(t==="horizontal"){var H,[Q,ee]=[o.scale(S[0]),o.scale(S[1])];N=t1({axis:s,ticks:c,bandSize:i,offset:a.offset,entry:_,index:j}),k=(H=ee??Q)!==null&&H!==void 0?H:void 0,E=a.size;var B=Q-ee;if(P=Xn(B)?0:B,A={x:N,y:h.top,width:E,height:h.height},Math.abs(D)>0&&Math.abs(P)<Math.abs(D)){var W=Br(P||D)*(Math.abs(D)-Math.abs(P));k-=W,P+=W}}else{var[I,M]=[s.scale(S[0]),s.scale(S[1])];if(N=I,k=t1({axis:o,ticks:u,bandSize:i,offset:a.offset,entry:_,index:j}),E=M-I,P=a.size,A={x:h.left,y:k,width:h.width,height:P},Math.abs(D)>0&&Math.abs(E)<Math.abs(D)){var L=Br(E||D)*(Math.abs(D)-Math.abs(E));E+=L}}if(N==null||k==null||E==null||P==null)return null;var oe=Nr(Nr({},_),{},{stackedBarStart:b,x:N,y:k,width:E,height:P,value:d?S:S[1],payload:_,background:A,tooltipPosition:{x:N+E/2,y:k+P/2},parentViewBox:g},m&&m[j]&&m[j].props);return oe}).filter(Boolean)}function LY(e){var t=Tr(e,RY),r=br();return p.createElement(yD,{id:t.id,type:"bar"},n=>p.createElement(p.Fragment,null,p.createElement(gD,{legendPayload:SY(t)}),p.createElement(mD,{fn:NY,args:t}),p.createElement(bD,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:QU(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),p.createElement(An,{zIndex:t.zIndex},p.createElement(MY,Wa({},t,{id:n})))))}var kD=p.memo(LY);kD.displayName="Bar";function lS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lS(Object(r),!0).forEach(function(n){FY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FY(e,t,r){return(t=BY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BY(e){var t=UY(e,"string");return typeof t=="symbol"?t:t+""}function UY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zY=(e,t)=>t,WY=(e,t,r)=>r,KY=(e,t,r,n)=>n,HY=(e,t,r,n,a)=>a,pu=U([Np,HY],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),qY=U([pu],e=>e==null?void 0:e.maxBarSize),VY=(e,t,r,n,a,i)=>i,cS=(e,t,r)=>{var n=r??e;if(!pt(n))return Jn(n,t,0)},GY=U([He,Np,zY,WY,KY],(e,t,r,n,a)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===a).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),YY=(e,t,r,n)=>{var a=He(e);return a==="horizontal"?Zv(e,"yAxis",r,n):Zv(e,"xAxis",t,n)},XY=(e,t,r)=>{var n=He(e);return n==="horizontal"?xj(e,"xAxis",t):xj(e,"yAxis",r)},JY=(e,t,r)=>{var n={},a=e.filter(_p),i=e.filter(u=>u.stackId==null),s=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),o=Object.entries(s).map(u=>{var[d,f]=u,h=f.map(g=>g.dataKey),m=cS(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:m}}),c=i.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=cS(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...c]},QY=U([GY,zW,XY],JY),ZY=(e,t,r,n,a)=>{var i,s,o=pu(e,t,r,n,a);if(o!=null){var c=He(e),u=gA(e),{maxBarSize:d}=o,f=pt(d)?u:d,h,m;return c==="horizontal"?(h=Oi(e,"xAxis",t,n),m=Pi(e,"xAxis",t,n)):(h=Oi(e,"yAxis",r,n),m=Pi(e,"yAxis",r,n)),(i=(s=Fo(h,m,!0))!==null&&s!==void 0?s:f)!==null&&i!==void 0?i:0}},CD=(e,t,r,n)=>{var a=He(e),i,s;return a==="horizontal"?(i=Oi(e,"xAxis",t,n),s=Pi(e,"xAxis",t,n)):(i=Oi(e,"yAxis",r,n),s=Pi(e,"yAxis",r,n)),Fo(i,s)};function eX(e,t,r,n,a){var i=n.length;if(!(i<1)){var s=Jn(e,r,0,!0),o,c=[];if(Tt(n[0].barSize)){var u=!1,d=r/i,f=n.reduce((x,w)=>x+(w.barSize||0),0);f+=(i-1)*s,f>=r&&(f-=(i-1)*s,s=0),f>=r&&d>0&&(u=!0,d*=.9,f=i*d);var h=(r-f)/2>>0,m={offset:h-s,size:0};o=n.reduce((x,w)=>{var b,_={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:m.offset+m.size+s,size:u?d:(b=w.barSize)!==null&&b!==void 0?b:0}},j=[...x,_];return m=j[j.length-1].position,j},c)}else{var g=Jn(t,r,0,!0);r-2*g-(i-1)*s<=0&&(s=0);var y=(r-2*g-(i-1)*s)/i;y>1&&(y>>=0);var v=Tt(a)?Math.min(y,a):y;o=n.reduce((x,w,b)=>[...x,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:g+(y+s)*b+(y-v)/2,size:v}}],c)}return o}}var tX=(e,t,r,n,a,i,s)=>{var o=pt(s)?t:s,c=eX(r,n,a!==i?a:i,e,o);return a!==i&&c!=null&&(c=c.map(u=>cd(cd({},u),{},{position:cd(cd({},u.position),{},{offset:u.position.offset-a/2})}))),c},rX=U([QY,gA,UW,vA,ZY,CD,qY],tX),nX=(e,t,r,n)=>Oi(e,"xAxis",t,n),aX=(e,t,r,n)=>Oi(e,"yAxis",r,n),iX=(e,t,r,n)=>Pi(e,"xAxis",t,n),sX=(e,t,r,n)=>Pi(e,"yAxis",r,n),oX=U([rX,pu],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),lX=(e,t)=>{var r=Fx(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:i}=a;if(i)return i.find(s=>s.key===r)}}}},cX=U([YY,pu],lX),uX=U([rr,sx,nX,aX,iX,sX,oX,He,gp,CD,cX,pu,VY],(e,t,r,n,a,i,s,o,c,u,d,f,h)=>{var{chartData:m,dataStartIndex:g,dataEndIndex:y}=c;if(!(f==null||s==null||t==null||o!=="horizontal"&&o!=="vertical"||r==null||n==null||a==null||i==null||u==null)){var{data:v}=f,x;if(v!=null&&v.length>0?x=v:x=m==null?void 0:m.slice(g,y+1),x!=null)return $Y({layout:o,barSettings:f,pos:s,parentViewBox:t,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,stackedData:d,displayedData:x,offset:e,cells:h,dataStartIndex:g})}}),dX=e=>{var{chartData:t}=e,r=Dt(),n=br();return p.useEffect(()=>n?()=>{}:(r(Aj(t)),()=>{r(Aj(void 0))}),[t,r,n]),null},uS={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},ED=Hr({name:"brush",initialState:uS,reducers:{setBrushSettings(e,t){return t.payload==null?uS:t.payload}}}),{setBrushSettings:Xee}=ED.actions,fX=ED.reducer;function hX(e,t,r){return(t=pX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pX(e){var t=mX(e,"string");return typeof t=="symbol"?t:t+""}function mX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ub{static create(t){return new ub(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}hX(ub,"EPS",1e-4);function gX(e){return(e%180+180)%180}var vX=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=gX(a),s=i*Math.PI/180,o=Math.atan(n/r),c=s>o&&s<Math.PI-o?n/Math.sin(s):r/Math.cos(s);return Math.abs(c)},yX={dots:[],areas:[],lines:[]},PD=Hr({name:"referenceElements",initialState:yX,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Ca(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Ca(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Ca(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Jee,removeDot:Qee,addArea:Zee,removeArea:ete,addLine:tte,removeLine:rte}=PD.actions,xX=PD.reducer,bX=p.createContext(void 0),wX=e=>{var{children:t}=e,[r]=p.useState("".concat(kc("recharts"),"-clip")),n=lb();if(n==null)return null;var{x:a,y:i,width:s,height:o}=n;return p.createElement(bX.Provider,{value:r},p.createElement("defs",null,p.createElement("clipPath",{id:r},p.createElement("rect",{x:a,y:i,height:o,width:s}))),t)};function Wo(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function OD(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function _X(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return vX(n,r)}function jX(e,t,r){var n=r==="width",{x:a,y:i,width:s,height:o}=e;return t===1?{start:n?a:i,end:n?a+s:i+o}:{start:n?a+s:i+o,end:n?a:i}}function Qf(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function SX(e,t){return OD(e,t+1)}function NX(e,t,r,n,a){for(var i=(n||[]).slice(),{start:s,end:o}=t,c=0,u=1,d=s,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:OD(n,u)};var y=c,v,x=()=>(v===void 0&&(v=r(g,y)),v),w=g.coordinate,b=c===0||Qf(e,w,x,d,o);b||(c=0,d=s,u+=1),b&&(d=w+e*(x()/2+a),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function dS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dS(Object(r),!0).forEach(function(n){kX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kX(e,t,r){return(t=CX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CX(e){var t=EX(e,"string");return typeof t=="symbol"?t:t+""}function EX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PX(e,t,r,n,a){for(var i=(n||[]).slice(),s=i.length,{start:o}=t,{end:c}=t,u=function(h){var m=i[h],g,y=()=>(g===void 0&&(g=r(m,h)),g);if(h===s-1){var v=e*(m.coordinate+e*y()/2-c);i[h]=m=gr(gr({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else i[h]=m=gr(gr({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var x=Qf(e,m.tickCoord,y,o,c);x&&(c=m.tickCoord-e*(y()/2+a),i[h]=gr(gr({},m),{},{isShow:!0}))}},d=s-1;d>=0;d--)u(d);return i}function OX(e,t,r,n,a,i){var s=(n||[]).slice(),o=s.length,{start:c,end:u}=t;if(i){var d=n[o-1],f=r(d,o-1),h=e*(d.coordinate+e*f/2-u);if(s[o-1]=d=gr(gr({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate}),d.tickCoord!=null){var m=Qf(e,d.tickCoord,()=>f,c,u);m&&(u=d.tickCoord-e*(f/2+a),s[o-1]=gr(gr({},d),{},{isShow:!0}))}}for(var g=i?o-1:o,y=function(w){var b=s[w],_,j=()=>(_===void 0&&(_=r(b,w)),_);if(w===0){var S=e*(b.coordinate-e*j()/2-c);s[w]=b=gr(gr({},b),{},{tickCoord:S<0?b.coordinate-S*e:b.coordinate})}else s[w]=b=gr(gr({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var N=Qf(e,b.tickCoord,j,c,u);N&&(c=b.tickCoord+e*(j()/2+a),s[w]=gr(gr({},b),{},{isShow:!0}))}},v=0;v<g;v++)y(v);return s}function db(e,t,r){var{tick:n,ticks:a,viewBox:i,minTickGap:s,orientation:o,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(we(c)||Is.isSsr){var h;return(h=SX(a,we(c)?c:0))!==null&&h!==void 0?h:[]}var m=[],g=o==="top"||o==="bottom"?"width":"height",y=d&&g==="width"?ec(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(b,_)=>{var j=typeof u=="function"?u(b.value,_):b.value;return g==="width"?_X(ec(j,{fontSize:t,letterSpacing:r}),y,f):ec(j,{fontSize:t,letterSpacing:r})[g]},x=a.length>=2?Br(a[1].coordinate-a[0].coordinate):1,w=jX(i,x,g);return c==="equidistantPreserveStart"?NX(x,w,v,a,s):(c==="preserveStart"||c==="preserveStartEnd"?m=OX(x,w,v,a,s,c==="preserveStartEnd"):m=PX(x,w,v,a,s),m.filter(b=>b.isShow))}var AX=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:i=0}=e,s=0;if(t){Array.from(t).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>s&&(s=f.width)}});var o=r?r.getBoundingClientRect().width:0,c=a+i,u=s+c+o+(r?n:0);return Math.round(u)}return 0},TX=["axisLine","width","height","className","hide","ticks","axisType"],DX=["viewBox"],IX=["viewBox"];function ly(e,t){if(e==null)return{};var r,n,a=RX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function RX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Os(){return Os=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Os.apply(null,arguments)}function fS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fS(Object(r),!0).forEach(function(n){MX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MX(e,t,r){return(t=$X(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $X(e){var t=LX(e,"string");return typeof t=="symbol"?t:t+""}function LX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fb={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Zt.axis};function FX(e){var{x:t,y:r,width:n,height:a,orientation:i,mirror:s,axisLine:o,otherSvgProps:c}=e;if(!o)return null;var u=Rt(Rt(Rt({},c),Yn(o)),{},{fill:"none"});if(i==="top"||i==="bottom"){var d=+(i==="top"&&!s||i==="bottom"&&s);u=Rt(Rt({},u),{},{x1:t,y1:r+d*a,x2:t+n,y2:r+d*a})}else{var f=+(i==="left"&&!s||i==="right"&&s);u=Rt(Rt({},u),{},{x1:t+f*n,y1:r,x2:t+f*n,y2:r+a})}return p.createElement("line",Os({},u,{className:Je("recharts-cartesian-axis-line",$o(o,"className"))}))}function BX(e,t,r,n,a,i,s,o,c){var u,d,f,h,m,g,y=o?-1:1,v=e.tickSize||s,x=we(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":u=d=e.coordinate,h=r+ +!o*a,f=h-y*v,g=f-y*c,m=x;break;case"left":f=h=e.coordinate,d=t+ +!o*n,u=d-y*v,m=u-y*c,g=x;break;case"right":f=h=e.coordinate,d=t+ +o*n,u=d+y*v,m=u+y*c,g=x;break;default:u=d=e.coordinate,h=r+ +o*a,f=h+y*v,g=f+y*c,m=x;break}return{line:{x1:u,y1:f,x2:d,y2:h},tick:{x:m,y:g}}}function UX(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function zX(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function WX(e){var{option:t,tickProps:r,value:n}=e,a,i=Je(r.className,"recharts-cartesian-axis-tick-value");if(p.isValidElement(t))a=p.cloneElement(t,Rt(Rt({},r),{},{className:i}));else if(typeof t=="function")a=t(Rt(Rt({},r),{},{className:i}));else{var s="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(s=Je(s,t==null?void 0:t.className)),a=p.createElement(ab,Os({},r,{className:s}),n)}return a}var KX=p.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:i,tickFormatter:s,unit:o,padding:c,tickTextProps:u,orientation:d,mirror:f,x:h,y:m,width:g,height:y,tickSize:v,tickMargin:x,fontSize:w,letterSpacing:b,getTicksConfig:_,events:j,axisType:S}=e,N=db(Rt(Rt({},_),{},{ticks:r}),w,b),k=UX(d,f),E=zX(d,f),P=Yn(_),A=Qc(n),D={};typeof a=="object"&&(D=a);var H=Rt(Rt({},P),{},{fill:"none"},D),Q=N.map(W=>Rt({entry:W},BX(W,h,m,g,y,d,v,f,x))),ee=Q.map(W=>{var{entry:I,line:M}=W;return p.createElement(Cn,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(I.value,"-").concat(I.coordinate,"-").concat(I.tickCoord)},a&&p.createElement("line",Os({},H,M,{className:Je("recharts-cartesian-axis-tick-line",$o(a,"className"))})))}),B=Q.map((W,I)=>{var{entry:M,tick:L}=W,oe=Rt(Rt(Rt(Rt({textAnchor:k,verticalAnchor:E},P),{},{stroke:"none",fill:i},A),L),{},{index:I,payload:M,visibleTicksCount:N.length,tickFormatter:s,padding:c},u);return p.createElement(Cn,Os({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(M.value,"-").concat(M.coordinate,"-").concat(M.tickCoord)},z0(j,M,I)),n&&p.createElement(WX,{option:n,tickProps:oe,value:"".concat(typeof s=="function"?s(M.value,I):M.value).concat(o||"")}))});return p.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(S,"-ticks")},B.length>0&&p.createElement(An,{zIndex:Zt.label},p.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(S,"-tick-labels"),ref:t},B)),ee.length>0&&p.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(S,"-tick-lines")},ee))}),HX=p.forwardRef((e,t)=>{var{axisLine:r,width:n,height:a,className:i,hide:s,ticks:o,axisType:c}=e,u=ly(e,TX),[d,f]=p.useState(""),[h,m]=p.useState(""),g=p.useRef(null);p.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var v;return AX({ticks:g.current,label:(v=e.labelRef)===null||v===void 0?void 0:v.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var y=p.useCallback(v=>{if(v){var x=v.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=x;var w=x[0];if(w){var b=window.getComputedStyle(w),_=b.fontSize,j=b.letterSpacing;(_!==d||j!==h)&&(f(_),m(j))}}},[d,h]);return s||n!=null&&n<=0||a!=null&&a<=0?null:p.createElement(An,{zIndex:e.zIndex},p.createElement(Cn,{className:Je("recharts-cartesian-axis",i)},p.createElement(FX,{x:e.x,y:e.y,width:n,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Yn(e)}),p.createElement(KX,{ref:y,axisType:c,events:u,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:h,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:o,unit:e.unit,width:e.width,x:e.x,y:e.y}),p.createElement(OV,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},p.createElement(BV,{label:e.label,labelRef:e.labelRef}),e.children)))}),qX=p.memo(HX,(e,t)=>{var{viewBox:r}=e,n=ly(e,DX),{viewBox:a}=t,i=ly(t,IX);return Wo(r,a)&&Wo(n,i)}),hb=p.forwardRef((e,t)=>{var r=Tr(e,fb);return p.createElement(qX,Os({},r,{ref:t}))});hb.displayName="CartesianAxis";var VX=["x1","y1","x2","y2","key"],GX=["offset"],YX=["xAxisId","yAxisId"],XX=["xAxisId","yAxisId"];function hS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hS(Object(r),!0).forEach(function(n){JX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JX(e,t,r){return(t=QX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QX(e){var t=ZX(e,"string");return typeof t=="symbol"?t:t+""}function ZX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function us(){return us=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},us.apply(null,arguments)}function Zf(e,t){if(e==null)return{};var r,n,a=eJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function eJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var tJ=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:i,height:s,ry:o}=e;return p.createElement("rect",{x:n,y:a,ry:o,width:i,height:s,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function AD(e){var{option:t,lineItemProps:r}=e,n;if(p.isValidElement(t))n=p.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var a,{x1:i,y1:s,x2:o,y2:c,key:u}=r,d=Zf(r,VX),f=(a=Yn(d))!==null&&a!==void 0?a:{},{offset:h}=f,m=Zf(f,GX);n=p.createElement("line",us({},m,{x1:i,y1:s,x2:o,y2:c,fill:"none",key:u}))}return n}function rJ(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:s}=e,o=Zf(e,YX),c=a.map((u,d)=>{var f=yr(yr({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return p.createElement(AD,{key:"line-".concat(d),option:n,lineItemProps:f})});return p.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function nJ(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:s}=e,o=Zf(e,XX),c=a.map((u,d)=>{var f=yr(yr({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return p.createElement(AD,{option:n,lineItemProps:f,key:"line-".concat(d)})});return p.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function aJ(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:i,height:s,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length||o==null)return null;var u=o.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],g=m?a+s-f:u[h+1]-f;if(g<=0)return null;var y=h%t.length;return p.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:g,width:i,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return p.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function iJ(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:i,width:s,height:o,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],g=m?a+s-f:u[h+1]-f;if(g<=0)return null;var y=h%r.length;return p.createElement("rect",{key:"react-".concat(h),x:f,y:i,width:g,height:o,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return p.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var sJ=(e,t)=>{var{xAxis:r,width:n,height:a,offset:i}=e;return VP(db(yr(yr(yr({},fb),r),{},{ticks:GP(r),viewBox:{x:0,y:0,width:n,height:a}})),i.left,i.left+i.width,t)},oJ=(e,t)=>{var{yAxis:r,width:n,height:a,offset:i}=e;return VP(db(yr(yr(yr({},fb),r),{},{ticks:GP(r),viewBox:{x:0,y:0,width:n,height:a}})),i.top,i.top+i.height,t)},lJ={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Zt.grid};function cy(e){var t=aO(),r=iO(),n=nO(),a=yr(yr({},Tr(e,lJ)),{},{x:we(e.x)?e.x:n.left,y:we(e.y)?e.y:n.top,width:we(e.width)?e.width:n.width,height:we(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:s,x:o,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:m}=a,g=br(),y=Se(E=>bj(E,"xAxis",i,g)),v=Se(E=>bj(E,"yAxis",s,g));if(!fa(u)||!fa(d)||!we(o)||!we(c))return null;var x=a.verticalCoordinatesGenerator||sJ,w=a.horizontalCoordinatesGenerator||oJ,{horizontalPoints:b,verticalPoints:_}=a;if((!b||!b.length)&&typeof w=="function"){var j=h&&h.length,S=w({yAxis:v?yr(yr({},v),{},{ticks:j?h:v.ticks}):void 0,width:t??u,height:r??d,offset:n},j?!0:f);Cf(Array.isArray(S),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof S,"]")),Array.isArray(S)&&(b=S)}if((!_||!_.length)&&typeof x=="function"){var N=m&&m.length,k=x({xAxis:y?yr(yr({},y),{},{ticks:N?m:y.ticks}):void 0,width:t??u,height:r??d,offset:n},N?!0:f);Cf(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(_=k)}return p.createElement(An,{zIndex:a.zIndex},p.createElement("g",{className:"recharts-cartesian-grid"},p.createElement(tJ,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),p.createElement(aJ,us({},a,{horizontalPoints:b})),p.createElement(iJ,us({},a,{verticalPoints:_})),p.createElement(rJ,us({},a,{offset:n,horizontalPoints:b,xAxis:y,yAxis:v})),p.createElement(nJ,us({},a,{offset:n,verticalPoints:_,xAxis:y,yAxis:v}))))}cy.displayName="CartesianGrid";var TD=(e,t,r,n)=>Oi(e,"xAxis",t,n),DD=(e,t,r,n)=>Pi(e,"xAxis",t,n),ID=(e,t,r,n)=>Oi(e,"yAxis",r,n),RD=(e,t,r,n)=>Pi(e,"yAxis",r,n),cJ=U([He,TD,ID,DD,RD],(e,t,r,n,a)=>Ri(e,"xAxis")?Fo(t,n,!1):Fo(r,a,!1)),uJ=(e,t,r,n,a)=>a;function dJ(e){return e.type==="line"}var fJ=U([Np,uJ],(e,t)=>e.filter(dJ).find(r=>r.id===t)),hJ=U([He,TD,ID,DD,RD,fJ,cJ,gp],(e,t,r,n,a,i,s,o)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=o;if(!(i==null||t==null||r==null||n==null||a==null||n.length===0||a.length===0||s==null)){var{dataKey:f,data:h}=i,m;if(h!=null&&h.length>0?m=h:m=c==null?void 0:c.slice(u,d+1),m!=null)return IJ({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:f,bandSize:s,displayedData:m})}});function pJ(e){var t=Qc(e),r=3,n=2;if(t!=null){var{r:a,strokeWidth:i}=t,s=Number(a),o=Number(i);return(Number.isNaN(s)||s<0)&&(s=r),(Number.isNaN(o)||o<0)&&(o=n),{r:s,strokeWidth:o}}return{r,strokeWidth:n}}var mJ=["id"],gJ=["type","layout","connectNulls","needClip","shape"],vJ=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function $c(){return $c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$c.apply(null,arguments)}function pS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ia(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pS(Object(r),!0).forEach(function(n){yJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yJ(e,t,r){return(t=xJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xJ(e){var t=bJ(e,"string");return typeof t=="symbol"?t:t+""}function bJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pb(e,t){if(e==null)return{};var r,n,a=wJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _J=e=>{var{dataKey:t,name:r,stroke:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:tp(r,t),payload:e}]};function jJ(e){var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:i,name:s,hide:o,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:tp(s,t),hide:o,type:e.tooltipType,color:e.stroke,unit:c}}}var MD=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function SJ(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],a=0;a<t;++a)n=[...n,...r];return n}var NJ=(e,t,r)=>{var n=r.reduce((f,h)=>f+h);if(!n)return MD(t,e);for(var a=Math.floor(e/n),i=e%n,s=t-e,o=[],c=0,u=0;c<r.length;u+=r[c],++c)if(u+r[c]>i){o=[...r.slice(0,c),i-u];break}var d=o.length%2===0?[0,s]:[s];return[...SJ(r,a),...o,...d].map(f=>"".concat(f,"px")).join(", ")};function kJ(e){var{clipPathId:t,points:r,props:n}=e,{dot:a,dataKey:i,needClip:s}=n,{id:o}=n,c=pb(n,mJ),u=Yn(c);return p.createElement(DG,{points:r,dot:a,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:u,needClip:s,clipPathId:t})}function CJ(e){var{showLabels:t,children:r,points:n}=e,a=p.useMemo(()=>n==null?void 0:n.map(i=>{var s,o,c={x:(s=i.x)!==null&&s!==void 0?s:0,y:(o=i.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return ia(ia({},c),{},{value:i.value,payload:i.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[n]);return p.createElement(rD,{value:t?a:void 0},r)}function mS(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:a,props:i}=e,{type:s,layout:o,connectNulls:c,needClip:u,shape:d}=i,f=pb(i,gJ),h=ia(ia({},Er(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:s,layout:o,connectNulls:c,strokeDasharray:a??i.strokeDasharray});return p.createElement(p.Fragment,null,(n==null?void 0:n.length)>1&&p.createElement(dD,$c({shapeType:"curve",option:d},h,{pathRef:r})),p.createElement(kJ,{points:n,clipPathId:t,props:i}))}function EJ(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function PJ(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:a,longestAnimatedLengthRef:i}=e,{points:s,strokeDasharray:o,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:h,width:m,height:g,onAnimationEnd:y,onAnimationStart:v}=r,x=a.current,w=cp(r,"recharts-line-"),[b,_]=p.useState(!1),j=!b,S=p.useCallback(()=>{typeof y=="function"&&y(),_(!1)},[y]),N=p.useCallback(()=>{typeof v=="function"&&v(),_(!0)},[v]),k=EJ(n.current),E=i.current;return p.createElement(CJ,{points:s,showLabels:j},r.children,p.createElement(lp,{animationId:w,begin:u,duration:d,isActive:c,easing:f,onAnimationEnd:S,onAnimationStart:N,key:w},P=>{var A=Nt(E,k+E,P),D=Math.min(A,k),H;if(c)if(o){var Q="".concat(o).split(/[,\s]+/gim).map(W=>parseFloat(W));H=NJ(D,k,Q)}else H=MD(k,D);else H=o==null?void 0:String(o);if(x){var ee=x.length/s.length,B=P===1?s:s.map((W,I)=>{var M=Math.floor(I*ee);if(x[M]){var L=x[M];return ia(ia({},W),{},{x:Nt(L.x,W.x,P),y:Nt(L.y,W.y,P)})}return h?ia(ia({},W),{},{x:Nt(m*2,W.x,P),y:Nt(g/2,W.y,P)}):ia(ia({},W),{},{x:W.x,y:W.y})});return a.current=B,p.createElement(mS,{props:r,points:B,clipPathId:t,pathRef:n,strokeDasharray:H})}return P>0&&k>0&&(a.current=s,i.current=D),p.createElement(mS,{props:r,points:s,clipPathId:t,pathRef:n,strokeDasharray:H})}),p.createElement(aD,{label:r.label}))}function OJ(e){var{clipPathId:t,props:r}=e,n=p.useRef(null),a=p.useRef(0),i=p.useRef(null);return p.createElement(PJ,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:a,pathRef:i})}var AJ=(e,t)=>{var r,n;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(n=e.y)!==null&&n!==void 0?n:void 0,value:e.value,errorVal:tr(e.payload,t)}};class TJ extends p.Component{render(){var{hide:t,dot:r,points:n,className:a,xAxisId:i,yAxisId:s,top:o,left:c,width:u,height:d,id:f,needClip:h,zIndex:m}=this.props;if(t)return null;var g=Je("recharts-line",a),y=f,{r:v,strokeWidth:x}=pJ(r),w=cD(r),b=v*2+x;return p.createElement(An,{zIndex:m},p.createElement(Cn,{className:g},h&&p.createElement("defs",null,p.createElement(SD,{clipPathId:y,xAxisId:i,yAxisId:s}),!w&&p.createElement("clipPath",{id:"clipPath-dots-".concat(y)},p.createElement("rect",{x:c-b/2,y:o-b/2,width:u+b,height:d+b}))),p.createElement(jD,{xAxisId:i,yAxisId:s,data:n,dataPointFormatter:AJ,errorBarOffset:0},p.createElement(OJ,{props:this.props,clipPathId:y}))),p.createElement(JG,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var $D={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Is.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Zt.line};function DJ(e){var t=Tr(e,$D),{activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:s,connectNulls:o,dot:c,hide:u,isAnimationActive:d,label:f,legendType:h,xAxisId:m,yAxisId:g,id:y}=t,v=pb(t,vJ),{needClip:x}=cb(m,g),w=lb(),b=nu(),_=br(),j=Se(P=>hJ(P,m,g,_,y));if(b!=="horizontal"&&b!=="vertical"||j==null||w==null)return null;var{height:S,width:N,x:k,y:E}=w;return p.createElement(TJ,$c({},v,{id:y,connectNulls:o,dot:c,activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:s,isAnimationActive:d,hide:u,label:f,legendType:h,xAxisId:m,yAxisId:g,points:j,layout:b,height:S,width:N,left:k,top:E,needClip:x}))}function IJ(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,dataKey:s,bandSize:o,displayedData:c}=e;return c.map((u,d)=>{var f=tr(u,s);if(t==="horizontal"){var h=e1({axis:r,ticks:a,bandSize:o,entry:u,index:d}),m=pt(f)?null:n.scale(f);return{x:h,y:m,value:f,payload:u}}var g=pt(f)?null:r.scale(f),y=e1({axis:n,ticks:i,bandSize:o,entry:u,index:d});return g==null||y==null?null:{x:g,y,value:f,payload:u}}).filter(Boolean)}function RJ(e){var t=Tr(e,$D),r=br();return p.createElement(yD,{id:t.id,type:"line"},n=>p.createElement(p.Fragment,null,p.createElement(gD,{legendPayload:_J(t)}),p.createElement(mD,{fn:jJ,args:t}),p.createElement(bD,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),p.createElement(DJ,$c({},t,{id:n}))))}var uy=p.memo(RJ);uy.displayName="Line";var MJ=["dangerouslySetInnerHTML","ticks"],$J=["id"],LJ=["domain"],FJ=["domain"];function dy(){return dy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dy.apply(null,arguments)}function eh(e,t){if(e==null)return{};var r,n,a=BJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function BJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function UJ(e){var t=Dt();return p.useLayoutEffect(()=>(t(LG(e)),()=>{t(FG(e))}),[e,t]),null}var zJ=e=>{var{xAxisId:t,className:r}=e,n=Se(sx),a=br(),i="xAxis",s=Se(v=>ul(v,i,t,a)),o=Se(v=>oT(v,i,t,a)),c=Se(v=>nT(v,t)),u=Se(v=>FK(v,t)),d=Se(v=>NA(v,t));if(c==null||u==null||d==null)return null;var{dangerouslySetInnerHTML:f,ticks:h}=e,m=eh(e,MJ),{id:g}=d,y=eh(d,$J);return p.createElement(hb,dy({},m,y,{scale:s,x:u.x,y:u.y,width:c.width,height:c.height,className:Je("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:o,axisType:i}))},WJ={allowDataOverflow:Qr.allowDataOverflow,allowDecimals:Qr.allowDecimals,allowDuplicatedCategory:Qr.allowDuplicatedCategory,height:Qr.height,hide:!1,mirror:Qr.mirror,orientation:Qr.orientation,padding:Qr.padding,reversed:Qr.reversed,scale:Qr.scale,tickCount:Qr.tickCount,type:Qr.type,xAxisId:0},KJ=e=>{var t,r,n,a,i,s=Tr(e,WJ);return p.createElement(p.Fragment,null,p.createElement(UJ,{interval:(t=s.interval)!==null&&t!==void 0?t:"preserveEnd",id:s.xAxisId,scale:s.scale,type:s.type,padding:s.padding,allowDataOverflow:s.allowDataOverflow,domain:s.domain,dataKey:s.dataKey,allowDuplicatedCategory:s.allowDuplicatedCategory,allowDecimals:s.allowDecimals,tickCount:s.tickCount,includeHidden:(r=s.includeHidden)!==null&&r!==void 0?r:!1,reversed:s.reversed,ticks:s.ticks,height:s.height,orientation:s.orientation,mirror:s.mirror,hide:s.hide,unit:s.unit,name:s.name,angle:(n=s.angle)!==null&&n!==void 0?n:0,minTickGap:(a=s.minTickGap)!==null&&a!==void 0?a:5,tick:(i=s.tick)!==null&&i!==void 0?i:!0,tickFormatter:s.tickFormatter}),p.createElement(zJ,s))},HJ=(e,t)=>{var{domain:r}=e,n=eh(e,LJ),{domain:a}=t,i=eh(t,FJ);return Wo(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(a)&&a.length===2?r[0]===a[0]&&r[1]===a[1]:Wo({domain:r},{domain:a}):!1},fy=p.memo(KJ,HJ);fy.displayName="XAxis";var qJ=["dangerouslySetInnerHTML","ticks"],VJ=["id"],GJ=["domain"],YJ=["domain"];function hy(){return hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hy.apply(null,arguments)}function th(e,t){if(e==null)return{};var r,n,a=XJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function XJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function JJ(e){var t=Dt();return p.useLayoutEffect(()=>(t(BG(e)),()=>{t(UG(e))}),[e,t]),null}var QJ=e=>{var{yAxisId:t,className:r,width:n,label:a}=e,i=p.useRef(null),s=p.useRef(null),o=Se(sx),c=br(),u=Dt(),d="yAxis",f=Se(j=>ul(j,d,t,c)),h=Se(j=>aT(j,t)),m=Se(j=>UK(j,t)),g=Se(j=>oT(j,d,t,c)),y=Se(j=>kA(j,t));if(p.useLayoutEffect(()=>{if(!(n!=="auto"||!h||ib(a)||p.isValidElement(a)||y==null)){var j=i.current;if(j){var S=j.getCalculatedWidth();Math.round(h.width)!==Math.round(S)&&u(zG({id:t,width:S}))}}},[g,h,u,a,t,n,y]),h==null||m==null||y==null)return null;var{dangerouslySetInnerHTML:v,ticks:x}=e,w=th(e,qJ),{id:b}=y,_=th(y,VJ);return p.createElement(hb,hy({},w,_,{ref:i,labelRef:s,scale:f,x:m.x,y:m.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:h.width,height:h.height,className:Je("recharts-".concat(d," ").concat(d),r),viewBox:o,ticks:g,axisType:d}))},ZJ={allowDataOverflow:Zr.allowDataOverflow,allowDecimals:Zr.allowDecimals,allowDuplicatedCategory:Zr.allowDuplicatedCategory,hide:!1,mirror:Zr.mirror,orientation:Zr.orientation,padding:Zr.padding,reversed:Zr.reversed,scale:Zr.scale,tickCount:Zr.tickCount,type:Zr.type,width:Zr.width,yAxisId:0},eQ=e=>{var t,r,n,a,i,s=Tr(e,ZJ);return p.createElement(p.Fragment,null,p.createElement(JJ,{interval:(t=s.interval)!==null&&t!==void 0?t:"preserveEnd",id:s.yAxisId,scale:s.scale,type:s.type,domain:s.domain,allowDataOverflow:s.allowDataOverflow,dataKey:s.dataKey,allowDuplicatedCategory:s.allowDuplicatedCategory,allowDecimals:s.allowDecimals,tickCount:s.tickCount,padding:s.padding,includeHidden:(r=s.includeHidden)!==null&&r!==void 0?r:!1,reversed:s.reversed,ticks:s.ticks,width:s.width,orientation:s.orientation,mirror:s.mirror,hide:s.hide,unit:s.unit,name:s.name,angle:(n=s.angle)!==null&&n!==void 0?n:0,minTickGap:(a=s.minTickGap)!==null&&a!==void 0?a:5,tick:(i=s.tick)!==null&&i!==void 0?i:!0,tickFormatter:s.tickFormatter}),p.createElement(QJ,s))},tQ=(e,t)=>{var{domain:r}=e,n=th(e,GJ),{domain:a}=t,i=th(t,YJ);return Wo(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(a)&&a.length===2?r[0]===a[0]&&r[1]===a[1]:Wo({domain:r},{domain:a}):!1},py=p.memo(eQ,tQ);py.displayName="YAxis";var rQ={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mu=p;function nQ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var aQ=typeof Object.is=="function"?Object.is:nQ,iQ=mu.useSyncExternalStore,sQ=mu.useRef,oQ=mu.useEffect,lQ=mu.useMemo,cQ=mu.useDebugValue;rQ.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=sQ(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=lQ(function(){function c(m){if(!u){if(u=!0,d=m,m=n(m),a!==void 0&&s.hasValue){var g=s.value;if(a(g,m))return f=g}return f=m}if(g=f,aQ(d,m))return g;var y=n(m);return a!==void 0&&a(g,y)?(d=m,g):(d=m,f=y)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,a]);var o=iQ(e,i[0],i[1]);return oQ(function(){s.hasValue=!0,s.value=o},[o]),cQ(o),o};function uQ(e){e()}function dQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){uQ(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var gS={notify(){},get:()=>[]};function fQ(e,t){let r,n=gS,a=0,i=!1;function s(y){d();const v=n.subscribe(y);let x=!1;return()=>{x||(x=!0,v(),f())}}function o(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return i}function d(){a++,r||(r=e.subscribe(c),n=dQ())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=gS)}function h(){i||(i=!0,d())}function m(){i&&(i=!1,f())}const g={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>n};return g}var hQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pQ=hQ(),mQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",gQ=mQ(),vQ=()=>pQ||gQ?p.useLayoutEffect:p.useEffect,yQ=vQ(),tg=Symbol.for("react-redux-context"),rg=typeof globalThis<"u"?globalThis:{};function xQ(){if(!p.createContext)return{};const e=rg[tg]??(rg[tg]=new Map);let t=e.get(p.createContext);return t||(t=p.createContext(null),e.set(p.createContext,t)),t}var bQ=xQ();function wQ(e){const{children:t,context:r,serverState:n,store:a}=e,i=p.useMemo(()=>{const c=fQ(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),s=p.useMemo(()=>a.getState(),[a]);yQ(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,s]);const o=r||bQ;return p.createElement(o.Provider,{value:i},t)}var _Q=wQ,jQ=(e,t)=>t,mb=U([jQ,He,jA,Vt,ST,Ja,QH,rr],iq),gb=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},LD=En("mouseClick"),FD=tu();FD.startListening({actionCreator:LD,effect:(e,t)=>{var r=e.payload,n=mb(t.getState(),gb(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(eH({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var my=En("mouseMove"),BD=tu();BD.startListening({actionCreator:my,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=Yx(n,n.tooltip.settings.shared),i=mb(n,gb(r));a==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(mT({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(pT()))}});var vS={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},UD=Hr({name:"rootProps",initialState:vS,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:vS.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue}}}),SQ=UD.reducer,{updateOptions:NQ}=UD.actions,zD=Hr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:nte}=zD.actions,kQ=zD.reducer,WD=En("keyDown"),KD=En("focus"),vb=tu();vb.startListening({actionCreator:WD,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var s=Number(Xx(a,fl(r))),o=Ja(r);if(i==="Enter"){var c=Hf(r,"axis","hover",String(a.index));t.dispatch(ty({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var u=HK(r),d=u==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,h=s+f*d;if(!(o==null||h>=o.length||h<0)){var m=Hf(r,"axis","hover",String(h));t.dispatch(ty({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});vb.startListening({actionCreator:KD,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var i="0",s=Hf(r,"axis","hover",String(i));t.dispatch(ty({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:s}))}}}});var gn=En("externalEvent"),HD=tu();HD.startListening({actionCreator:gn,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:MH(r),activeDataKey:ET(r),activeIndex:Ps(r),activeLabel:CT(r),activeTooltipIndex:Ps(r),isTooltipActive:$H(r)};e.payload.handler(n,e.payload.reactEvent)}}});var CQ=U([dl],e=>e.tooltipItemPayloads),EQ=U([CQ,fu,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(o=>o.settings.dataKey===n);if(a!=null){var{positions:i}=a;if(i!=null){var s=t(i,r);return s}}}),qD=En("touchMove"),VD=tu();VD.startListening({actionCreator:qD,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),a=Yx(n,n.tooltip.settings.shared);if(a==="axis"){var i=mb(n,gb({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(mT({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var s,o=r.touches[0];if(document.elementFromPoint==null)return;var c=document.elementFromPoint(o.clientX,o.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(sz),d=(s=c.getAttribute(oz))!==null&&s!==void 0?s:void 0,f=EQ(t.getState(),u,d);t.dispatch(hT({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}}});var PQ=wP({brush:fX,cartesianAxis:WG,chartData:Rq,errorBars:cY,graphicalItems:SG,layout:UU,legend:Mz,options:Oq,polarAxis:XV,polarOptions:kQ,referenceElements:xX,rootProps:SQ,tooltip:tH,zIndex:xq}),OQ=function(t){return fU({reducer:PQ,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([FD.middleware,BD.middleware,vb.middleware,HD.middleware,VD.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(DP({type:"raf"}))},devTools:Is.devToolsEnabled})};function AQ(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=br(),i=p.useRef(null);if(a)return r;i.current==null&&(i.current=OQ(t));var s=Q0;return p.createElement(_Q,{context:s,store:i.current},r)}function TQ(e){var{layout:t,margin:r}=e,n=Dt(),a=br();return p.useEffect(()=>{a||(n(LU(t)),n($U(r)))},[n,a,t,r]),null}function DQ(e){var t=Dt();return p.useEffect(()=>{t(NQ(e))},[t,e]),null}function yS(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",a=vD("".concat(n).concat(t)),i=Dt();return p.useLayoutEffect(()=>(i(vq({zIndex:t,elementId:a,isPanorama:r})),()=>{i(yq({zIndex:t,isPanorama:r}))}),[i,t,a,r]),p.createElement("g",{id:a})}function xS(e){var{children:t,isPanorama:r}=e,n=Se(oq);if(!n||n.length===0)return t;var a=n.filter(s=>s<0),i=n.filter(s=>s>0);return p.createElement(p.Fragment,null,a.map(s=>p.createElement(yS,{key:s,zIndex:s,isPanorama:r})),t,i.map(s=>p.createElement(yS,{key:s,zIndex:s,isPanorama:r})))}var IQ=["children"];function RQ(e,t){if(e==null)return{};var r,n,a=MQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function MQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function rh(){return rh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rh.apply(null,arguments)}var $Q={width:"100%",height:"100%",display:"block"},LQ=p.forwardRef((e,t)=>{var r=aO(),n=iO(),a=oO();if(!fa(r)||!fa(n))return null;var{children:i,otherAttributes:s,title:o,desc:c}=e,u,d;return s!=null&&(typeof s.tabIndex=="number"?u=s.tabIndex:u=a?0:void 0,typeof s.role=="string"?d=s.role:d=a?"application":void 0),p.createElement(_E,rh({},s,{title:o,desc:c,role:d,tabIndex:u,width:r,height:n,style:$Q,ref:t}),i)}),FQ=e=>{var{children:t}=e,r=Se(ip);if(!r)return null;var{width:n,height:a,y:i,x:s}=r;return p.createElement(_E,{width:n,height:a,x:s,y:i},t)},bS=p.forwardRef((e,t)=>{var{children:r}=e,n=RQ(e,IQ),a=br();return a?p.createElement(FQ,null,p.createElement(xS,{isPanorama:!0},r)):p.createElement(LQ,rh({ref:t},n),p.createElement(xS,{isPanorama:!1},r))});function BQ(){var e=Dt(),[t,r]=p.useState(null),n=Se(iz);return p.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),i=a.width/t.offsetWidth;Tt(i)&&i!==n&&e(BU(i))}},[t,e,n]),r}function wS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function UQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wS(Object(r),!0).forEach(function(n){zQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zQ(e,t,r){return(t=WQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WQ(e){var t=KQ(e,"string");return typeof t=="symbol"?t:t+""}function KQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function As(){return As=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},As.apply(null,arguments)}var HQ=()=>(Kq(),null);function nh(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var qQ=p.forwardRef((e,t)=>{var r,n,a=p.useRef(null),[i,s]=p.useState({containerWidth:nh((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:nh((n=e.style)===null||n===void 0?void 0:n.height)}),o=p.useCallback((u,d)=>{s(f=>{var h=Math.round(u),m=Math.round(d);return f.containerWidth===h&&f.containerHeight===m?f:{containerWidth:h,containerHeight:m}})},[]),c=p.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=u.getBoundingClientRect();o(d,f);var h=g=>{var{width:y,height:v}=g[0].contentRect;o(y,v)},m=new ResizeObserver(h);m.observe(u),a.current=m}},[t,o]);return p.useEffect(()=>()=>{var u=a.current;u!=null&&u.disconnect()},[o]),p.createElement(p.Fragment,null,p.createElement(op,{width:i.containerWidth,height:i.containerHeight}),p.createElement("div",As({ref:c},e)))}),VQ=p.forwardRef((e,t)=>{var{width:r,height:n}=e,[a,i]=p.useState({containerWidth:nh(r),containerHeight:nh(n)}),s=p.useCallback((c,u)=>{i(d=>{var f=Math.round(c),h=Math.round(u);return d.containerWidth===f&&d.containerHeight===h?d:{containerWidth:f,containerHeight:h}})},[]),o=p.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();s(u,d)}},[t,s]);return p.createElement(p.Fragment,null,p.createElement(op,{width:a.containerWidth,height:a.containerHeight}),p.createElement("div",As({ref:o},e)))}),GQ=p.forwardRef((e,t)=>{var{width:r,height:n}=e;return p.createElement(p.Fragment,null,p.createElement(op,{width:r,height:n}),p.createElement("div",As({ref:t},e)))}),YQ=p.forwardRef((e,t)=>{var{width:r,height:n}=e;return $a(r)||$a(n)?p.createElement(VQ,As({},e,{ref:t})):p.createElement(GQ,As({},e,{ref:t}))});function XQ(e){return e===!0?qQ:YQ}var JQ=p.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:i,onContextMenu:s,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:m,onTouchMove:g,onTouchStart:y,style:v,width:x,responsive:w,dispatchTouchEvents:b=!0}=e,_=p.useRef(null),j=Dt(),[S,N]=p.useState(null),[k,E]=p.useState(null),P=BQ(),A=ox(),D=(A==null?void 0:A.width)>0?A.width:x,H=(A==null?void 0:A.height)>0?A.height:a,Q=p.useCallback(T=>{P(T),typeof t=="function"&&t(T),N(T),E(T),T!=null&&(_.current=T)},[P,t,N,E]),ee=p.useCallback(T=>{j(LD(T)),j(gn({handler:i,reactEvent:T}))},[j,i]),B=p.useCallback(T=>{j(my(T)),j(gn({handler:u,reactEvent:T}))},[j,u]),W=p.useCallback(T=>{j(pT()),j(gn({handler:d,reactEvent:T}))},[j,d]),I=p.useCallback(T=>{j(my(T)),j(gn({handler:f,reactEvent:T}))},[j,f]),M=p.useCallback(()=>{j(KD())},[j]),L=p.useCallback(T=>{j(WD(T.key))},[j]),oe=p.useCallback(T=>{j(gn({handler:s,reactEvent:T}))},[j,s]),re=p.useCallback(T=>{j(gn({handler:o,reactEvent:T}))},[j,o]),Ne=p.useCallback(T=>{j(gn({handler:c,reactEvent:T}))},[j,c]),O=p.useCallback(T=>{j(gn({handler:h,reactEvent:T}))},[j,h]),q=p.useCallback(T=>{j(gn({handler:y,reactEvent:T}))},[j,y]),te=p.useCallback(T=>{b&&j(qD(T)),j(gn({handler:g,reactEvent:T}))},[j,b,g]),$=p.useCallback(T=>{j(gn({handler:m,reactEvent:T}))},[j,m]),G=XQ(w);return p.createElement(MT.Provider,{value:S},p.createElement(uF.Provider,{value:k},p.createElement(G,{width:D??(v==null?void 0:v.width),height:H??(v==null?void 0:v.height),className:Je("recharts-wrapper",n),style:UQ({position:"relative",cursor:"default",width:D,height:H},v),onClick:ee,onContextMenu:oe,onDoubleClick:re,onFocus:M,onKeyDown:L,onMouseDown:Ne,onMouseEnter:B,onMouseLeave:W,onMouseMove:I,onMouseUp:O,onTouchEnd:$,onTouchMove:te,onTouchStart:q,ref:Q},p.createElement(HQ,null),r)))}),QQ=["width","height","responsive","children","className","style","compact","title","desc"];function ZQ(e,t){if(e==null)return{};var r,n,a=eZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function eZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var tZ=p.forwardRef((e,t)=>{var{width:r,height:n,responsive:a,children:i,className:s,style:o,compact:c,title:u,desc:d}=e,f=ZQ(e,QQ),h=Yn(f);return c?p.createElement(p.Fragment,null,p.createElement(op,{width:r,height:n}),p.createElement(bS,{otherAttributes:h,title:u,desc:d},i)):p.createElement(JQ,{className:s,style:o,width:r,height:n,responsive:a??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},p.createElement(bS,{otherAttributes:h,title:u,desc:d,ref:t},p.createElement(wX,null,i)))});function gy(){return gy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gy.apply(null,arguments)}var rZ={top:5,right:5,bottom:5,left:5},nZ={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:rZ,reverseStackOrder:!1,syncMethod:"index",responsive:!1},GD=p.forwardRef(function(t,r){var n,a=Tr(t.categoricalChartProps,nZ),{chartName:i,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:u}=t,d={chartName:i,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return p.createElement(AQ,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:i},p.createElement(dX,{chartData:u.data}),p.createElement(TQ,{layout:a.layout,margin:a.margin}),p.createElement(DQ,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),p.createElement(tZ,gy({},a,{ref:r})))}),aZ=["axis"],iZ=p.forwardRef((e,t)=>p.createElement(GD,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:aZ,tooltipPayloadSearcher:LT,categoricalChartProps:e,ref:t})),sZ=["axis","item"],oZ=p.forwardRef((e,t)=>p.createElement(GD,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:sZ,tooltipPayloadSearcher:LT,categoricalChartProps:e,ref:t}));function YD({options:e,value:t,onChange:r,className:n=""}){return l.jsx("div",{className:`inline-flex rounded-2xl border border-gray-200/80 bg-white p-1 shadow-sm ${n}`,children:e.map(a=>l.jsx("button",{onClick:()=>r(a.value),className:`px-4 py-2 text-sm font-semibold rounded-xl transition-all duration-150 min-h-[40px] ${t===a.value?"bg-[rgb(0,122,255)] text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:a.label},a.value))})}const _S={new_lead:"New Lead",contacted:"Contacted",showing_scheduled:"Showing Scheduled",offer_submitted:"Offer Submitted",under_contract:"Under Contract",pending:"Pending",closed:"Closed",dead:"Lost"},jS=["under_contract","pending"],lZ=["closed","dead"],cZ=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],uZ=new Date().getFullYear(),Gs={buyer:"Buyer",seller:"Seller",buyer_and_seller:"Buyer & Seller",renter:"Renter",landlord:"Landlord"},SS=30*60*1e3,dZ=60*1e3,ah=["luma-insights","pipeline-health","alerts-actions","monthly-momentum","deal-type-mix","lead-source","upcoming-deals"],fZ=e=>{const t=e.map(s=>s==="monthly-gci"?"monthly-momentum":s),r=t.filter((s,o)=>t.indexOf(s)===o),n=new Set(ah),a=r.filter(s=>n.has(s)),i=ah.filter(s=>!a.includes(s));return[...a,...i]},hZ=/^\d{4}-\d{2}-\d{2}$/,Lc=e=>{if(!e)return null;const t=e.trim();if(!t)return null;const r=t.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(r){const i=Number(r[1]),s=Number(r[2])-1,o=Number(r[3]);if(Number.isNaN(i)||Number.isNaN(s)||Number.isNaN(o)||s<0||s>11||o<1||o>31)return null;const c=new Date(Date.UTC(i,s,o));return{year:i,month:s,date:c}}const n=t.replace(" ","T").replace(/(\+\d{2})(\d{2})$/,"$1:$2").replace(/(-\d{2})(\d{2})$/,"$1:$2"),a=new Date(n);return Number.isNaN(a.getTime())?null:{year:a.getUTCFullYear(),month:a.getUTCMonth(),date:a}},NS=e=>{if(!e)return null;const t=Lc(e);if(!t)return null;const r=e.trim();if(hZ.test(r)){const a=t.date.getUTCDate();return new Date(t.year,t.month,a,23,59,59,999).getTime()}return t.date.getTime()},ng=(e,t)=>{const r=e.split("T")[0],n=t.split("T")[0];return[`and(close_date.gte.${r},close_date.lte.${n})`,`and(close_date.is.null,closed_at.gte.${e},closed_at.lte.${t})`].join(",")},kS=(e,t,r)=>{const n=Lc(e.close_date)||Lc(e.closed_at);if(!n)return!1;const a=n.date.getTime();return a>=t.getTime()&&a<=r.getTime()};function pZ({id:e,children:t}){const{attributes:r,listeners:n,setNodeRef:a,transform:i,transition:s,isDragging:o}=Lh({id:e}),c={transform:Vn.Transform.toString(i),transition:s,opacity:o?.5:1,position:"relative"};return l.jsxs("div",{ref:a,style:c,className:"relative group",children:[l.jsx("div",{...r,...n,className:"absolute -top-2 -right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing bg-white rounded-lg shadow-lg p-2",children:l.jsx(C0,{className:"w-4 h-4 text-gray-400"})}),t]})}function mZ(){var ut,jt;const{user:e,roleInfo:t}=kt(),[r,n]=p.useState({ytdGCI:0,ytdDeals:0,ytdVolume:0,avgCommission:0,closingNext7Days:0,conversionRate:0}),[a,i]=p.useState([]),[s,o]=p.useState([]),[c,u]=p.useState([]),[d,f]=p.useState([]),[h,m]=p.useState([]),[g,y]=p.useState(!0),[v,x]=p.useState(!1),[w,b]=p.useState([]),[_,j]=p.useState(null),[S,N]=p.useState(null),[k,E]=p.useState(!1),P=p.useRef(!1),[A,D]=p.useState(0),[H,Q]=p.useState(""),ee=p.useRef(null),[B,W]=p.useState([]),[I,M]=p.useState([...ah]),[L,oe]=p.useState(null),[re,Ne]=p.useState([]),[O,q]=p.useState([]),[te,$]=p.useState([]),[G,T]=p.useState([]),[K,Z]=p.useState([]),[F,ye]=p.useState([]),[le,De]=p.useState([]),[Ae,qe]=p.useState([]),[Le,fr]=p.useState("ytd"),ze=p.useMemo(()=>X6(Le),[Le]),C=Ah(Oh(nl,{activationConstraint:{distance:8}})),V=[{value:"this_month",label:"MTD"},{value:"last_30_days",label:"30D"},{value:"this_quarter",label:"QTD"},{value:"ytd",label:"YTD"}];p.useEffect(()=>{if(!e)return;(async()=>{var Pe;const X={id:e.id,label:((Pe=e.user_metadata)==null?void 0:Pe.name)||e.email||"You",email:e.email||""},ie=async()=>{if(!(t!=null&&t.teamId))return[];const{data:ae,error:fe}=await Y.from("user_teams").select("user_id").eq("team_id",t.teamId);return fe?(console.error("Unable to load team members",fe),[]):(ae||[]).map(ue=>ue.user_id)},de=async()=>{if(!t)return[e.id];switch(t.globalRole){case"admin":return await Sn(t);case"sales_manager":{const ae=await ie();return ae.length?ae:await Sn(t)}case"team_lead":return await Sn(t);default:return[t.userId]}};if(!t||t.globalRole==="agent"){Ne([X]),q([e.id]);return}const ce=await de();let se=[];const{data:Ee,error:he}=await Y.rpc("get_accessible_agents");if(he)console.error("Unable to load accessible agents",he);else if(Ee){const ae=Ee,fe=new Set(ae.filter(Ce=>Ce.global_role==="admin"||Ce.global_role==="sales_manager").map(Ce=>Ce.user_id)),ue=ae.filter(Ce=>Ce.global_role!=="admin"&&Ce.global_role!=="sales_manager").map(Ce=>({id:Ce.user_id,label:Ce.display_name||Ce.email||"Agent",email:Ce.email||""}));if(se=(ce.length?ue.filter(Ce=>ce.includes(Ce.id)):ue).filter((Ce,We,yt)=>yt.findIndex(Et=>Et.id===Ce.id)===We),fe.size)for(const Ce of fe){const We=ce.indexOf(Ce);We!==-1&&ce.splice(We,1)}}const xe=ae=>{var fe;return ae===e.id?((fe=e.user_metadata)==null?void 0:fe.name)||e.email||"You":`Agent ${ae.slice(0,8)}`};if(!se.length)se=ce.map(ae=>({id:ae,label:xe(ae),email:""}));else{const ae=new Set(se.map(ue=>ue.id)),fe=ce.filter(ue=>!ae.has(ue));fe.length&&(se=[...se,...fe.map(ue=>({id:ue,label:xe(ue),email:""}))])}Ne(se),ce.length||se.map(ae=>ae.id),q([])})()},[e,t==null?void 0:t.globalRole,t==null?void 0:t.teamId]);const J=p.useMemo(()=>O.length?[...O].sort().join("|"):"",[O]),pe=p.useMemo(()=>F.length?[...F].sort().join("|"):"",[F]),Re=p.useMemo(()=>le.length?[...le].sort().join("|"):"",[le]),at=p.useMemo(()=>Ae.length?[...Ae].sort().join("|"):"",[Ae]),Lt=!!e&&((t==null?void 0:t.globalRole)==="team_lead"||(t==null?void 0:t.teamRole)==="team_lead"),Ct=Lt&&O.length===1&&O[0]===e.id,Ir=O.length===0||O.length===re.length,ma=p.useMemo(()=>{const R=(Te,Yr)=>Te.length===0?Yr:Te.length===1?Te[0]:Te.length===2?`${Te[0]} and ${Te[1]}`:Te.length===3?`${Te[0]}, ${Te[1]} and ${Te[2]}`:`multiple ${Yr}`,X=Te=>Te.endsWith("s")?`${Te}'`:`${Te}'s`,ie=re.filter(Te=>O.includes(Te.id)).map(Te=>Te.label||Te.email||"Agent"),de=Ir||ie.length===0,ce=!de&&ie.length===1,se=ce?X(ie[0]):"",Ee=le.length===0||G.length>0&&le.length===G.length,he=Ae.length===0||K.length>0&&Ae.length===K.length,xe=F.length===0||te.length>0&&F.length===te.length,Pe=G.filter(Te=>le.includes(Te.id)).map(Te=>Te.label),ae=Ae.map(Te=>Gs[Te]??Te.replace(/_/g," ")),fe=te.filter(Te=>F.includes(Te.id)).map(Te=>Te.name),ue=Ee?"all pipeline stages":R(Pe,"pipeline stages"),ke=he?"all deal types":R(ae,"deal types"),Ce=xe?"all lead sources":R(fe,"lead sources");if(Ee&&he&&xe)return ce?`Viewing ${se} deals across all pipeline stages, deal types, and lead sources.`:de?"Viewing all deals across all agents, pipeline stages, deal types, and lead sources.":"Viewing deals for multiple agents across all pipeline stages, deal types, and lead sources.";const yt=de?"all agents":ce?se:ie.length===2?`${ie[0]} and ${ie[1]}`:ie.length===3?`${ie[0]}, ${ie[1]} and ${ie[2]}`:"multiple agents",Et=[];if(ue&&Et.push(ue),ke){const Te=he?`across ${ke}`:`${ke} deals`;Et.push(Te)}Ce&&Et.push(`from ${Ce}`),Et.length===0&&Et.push("deals");const it=Et.join(", ");return`Viewing ${yt} ${it}`.replace(/\s+/g," ").trim()+"."},[re,K,te,G,Ir,O,Ae,F,le]),wr=()=>{e&&q([e.id])},Qa=()=>{q([])},Fi=R=>{const X=Array.from(R.target.selectedOptions).map(ie=>ie.value);q(X)};p.useEffect(()=>{K.length&&qe(R=>R.filter(X=>K.includes(X)))},[K]);const Bi=R=>{const X=Array.from(R.target.selectedOptions).map(ie=>ie.value);De(X)},Ui=R=>{const X=Array.from(R.target.selectedOptions).map(ie=>ie.value);ye(X)},zi=R=>{const X=Array.from(R.target.selectedOptions).map(ie=>ie.value);qe(X)},Wi=t&&t.globalRole!=="agent"||re.length>1,ta=p.useMemo(()=>a.reduce((R,X)=>R+X.count,0),[a]),Za=p.useMemo(()=>a.reduce((R,X)=>R+X.expectedGCI,0),[a]),Ki=p.useMemo(()=>a.reduce((R,X)=>R+X.stalledCount,0),[a]),ei=p.useMemo(()=>{const R=new Date;R.setHours(0,0,0,0);const X=new Date(R);X.setDate(X.getDate()+29),X.setHours(23,59,59,999);const ie=R.getTime(),de=X.getTime();return d.map(ce=>{const se=NS(ce.close_date)??NS(ce.closed_at);return se===null?null:{deal:ce,closeTime:se}}).filter(ce=>ce?ce.closeTime>=ie&&ce.closeTime<=de:!1).sort((ce,se)=>ce.closeTime-se.closeTime).map(({deal:ce})=>ce)},[d]),Fe=p.useMemo(()=>ei.reduce((R,X)=>R+Vi(X),0),[ei]);p.useEffect(()=>{e&&re.length&&hr()},[e==null?void 0:e.id,J,pe,Re,at,Le,re.length]),p.useEffect(()=>{e&&Dn()},[e]),p.useEffect(()=>{const R=O.length?O:re.map(X=>X.id);!e||!R.length||gt(R)},[O,re]),p.useEffect(()=>{g||P.current||ar()},[g,A]),p.useEffect(()=>{if(!e)return;const R=()=>{var de;const X=Date.now();(A===0||X-A>=SS||!H)&&(Q(E_((de=e.user_metadata)==null?void 0:de.name,t==null?void 0:t.globalRole)),D(X))};return R(),ee.current&&clearInterval(ee.current),ee.current=setInterval(R,dZ),()=>{ee.current&&clearInterval(ee.current)}},[(ut=e==null?void 0:e.user_metadata)==null?void 0:ut.name]);const mt=(R,X)=>X.length?X.length===1?R.eq("user_id",X[0]):R.in("user_id",X):R,Qe=(R,X)=>{if(R=mt(R,X),F.length&&(R=R.in("lead_source_id",F)),le.length){const ie=le.filter(Boolean);ie.length&&(R=R.in("pipeline_status_id",ie))}return Ae.length&&(R=R.in("deal_type",Ae)),R},gt=async R=>{const X=R.length?R:re.map(Pe=>Pe.id);if(!X.length)return;let ie=Y.from("deals").select(`
        id,
        user_id,
        deal_type,
        lead_source_id,
        lead_sources (id, name),
        pipeline_status_id,
        pipeline_statuses (id, name, color, sort_order)
      `).order("created_at",{ascending:!1}).limit(1e3);ie=mt(ie,X);const{data:de,error:ce}=await ie;if(ce){console.error("Unable to load filter context",ce);return}const se=new Map,Ee=new Map,he=new Set;(de||[]).forEach(Pe=>{var ae,fe;(ae=Pe.lead_sources)!=null&&ae.id&&se.set(Pe.lead_sources.id,{id:Pe.lead_sources.id,name:Pe.lead_sources.name||"Unknown"}),(fe=Pe.pipeline_statuses)!=null&&fe.id&&Ee.set(Pe.pipeline_statuses.id,{id:Pe.pipeline_statuses.id,label:Pe.pipeline_statuses.name,color:Pe.pipeline_statuses.color,sortOrder:Pe.pipeline_statuses.sort_order}),Pe.deal_type&&he.add(Pe.deal_type)}),$(Array.from(se.values()).sort((Pe,ae)=>Pe.name.localeCompare(ae.name))),T(Array.from(Ee.values()).sort((Pe,ae)=>{const fe=Pe.sortOrder??999,ue=ae.sortOrder??999;return fe===ue?Pe.label.localeCompare(ae.label):fe-ue}));const xe=Array.from(he).sort((Pe,ae)=>{const fe=Gs[Pe]??Pe,ue=Gs[ae]??ae;return fe.localeCompare(ue)});Z(xe.length?xe:Object.keys(Gs))},hr=async()=>{if(!e)return;const R=O.length?O:re.map(ce=>ce.id);if(!R.length)return;const X=g;X?y(!0):x(!0);const ie=ze.start.toISOString(),de=ze.end.toISOString();try{await Promise.all([Rr(R,ie,de),qr(R),Xe(R),Yt(R,ie,de),_r(R),Vr(R)])}catch(ce){console.error("Error loading dashboard data",ce)}finally{X&&y(!1),x(!1)}},ar=async()=>{if(!P.current&&e){E(!0);try{const{data:{session:R}}=await Y.auth.getSession();if(!R)return;const X="https://gomwhbewjdcllejifdyf.supabase.co/functions/v1/luma-insights",ie={...r,closingThisMonth:r.closingNext7Days},de=await fetch(X,{method:"POST",headers:{Authorization:`Bearer ${R.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({stats:ie,pipelineHealth:a.map(Ee=>({id:Ee.id,name:Ee.name,count:Ee.count,expectedGCI:Ee.expectedGCI,stalledCount:Ee.stalledCount})),leadSourceData:c,monthlyData:s,upcomingDealsCount:d.length,projectedGCI:Fe})});if(!de.ok){const Ee=await de.text();console.error("Failed to fetch AI insights:",Ee);return}const se=(await de.json()).insights||[];b(se),!_&&se.length&&(j(se),P.current=!0)}catch(R){console.error("Error loading AI insights:",R)}finally{E(!1)}}},Rr=async(R,X,ie)=>{const de=ng(X,ie);let ce=Y.from("deals").select("*").eq("status","closed").or(de);ce=Qe(ce,R);const{data:se,error:Ee}=await ce;Ee&&console.error("loadStats closedDeals error",Ee);let he=Y.from("deals").select("*").gte("created_at",X).lte("created_at",ie);he=Qe(he,R);const{data:xe,error:Pe}=await he;Pe&&console.error("loadStats allDeals error",Pe);const ae=new Date;ae.setHours(0,0,0,0);const fe=new Date(ae);fe.setDate(fe.getDate()+6),fe.setHours(23,59,59,999);let ue=Y.from("deals").select("id").in("status",jS).gte("close_date",ae.toISOString()).lte("close_date",fe.toISOString());ue=Qe(ue,R);const{data:ke,error:Ce}=await ue;Ce&&console.error("loadStats closingSoon error",Ce);let We=0,yt=0;const Et=(se||[]).filter(Ls=>kS(Ls,ze.start,ze.end));Et.forEach(Ls=>{const zp=Ls.actual_sale_price||0;We+=zp,yt+=Vi(Ls)});const it=Et.length,Te=it>0?yt/it:0,Yr=(xe==null?void 0:xe.length)||0,gu=Yr>0?it/Yr:0;n({ytdGCI:yt,ytdDeals:it,ytdVolume:We,avgCommission:Te,closingNext7Days:(ke==null?void 0:ke.length)||0,conversionRate:gu})},qr=async R=>{let X=Y.from("deals").select(`
        *,
        pipeline_statuses (id, name, color, sort_order),
        lead_sources (id, name)
      `).not("status","in",`(${lZ.join(",")})`);X=Qe(X,R);const{data:ie,error:de}=await X;if(de){console.error("loadPipelineHealth deals error",de);return}if(!ie){i([]),W([]);return}const ce=new Map;ie.forEach(ae=>{var yt,Et,it,Te;const fe=((yt=ae.pipeline_statuses)==null?void 0:yt.id)||ae.pipeline_status_id||`status:${ae.status}`,ue=((Et=ae.pipeline_statuses)==null?void 0:Et.name)||_S[ae.status]||ae.status,ke=((it=ae.pipeline_statuses)==null?void 0:it.color)||null,Ce=((Te=ae.pipeline_statuses)==null?void 0:Te.sort_order)??null,We=ce.get(fe)||{id:fe,name:ue,color:ke,sortOrder:Ce,count:0,expectedGCI:0,stalledCount:0};We.count+=1,We.expectedGCI+=Vi(ae),P_(ae.stage_entered_at,30)&&(We.stalledCount+=1),ce.set(fe,We)});const Ee=Array.from(ce.values()).sort((ae,fe)=>{const ue=ae.sortOrder??999,ke=fe.sortOrder??999;return ue===ke?ae.name.localeCompare(fe.name):ue-ke}).map(ae=>({id:ae.id,name:ae.name,color:ae.color,count:ae.count,expectedGCI:ae.expectedGCI,stalledCount:ae.stalledCount}));i(Ee);const he=new Map;ie.forEach(ae=>{const fe=he.get(ae.deal_type)??{count:0,gci:0,statusCounts:{}};fe.count+=1,fe.gci+=Vi(ae);const ue=fe.statusCounts[ae.status]||0;fe.statusCounts[ae.status]=ue+1,he.set(ae.deal_type,fe)});const xe=ie.length,Pe=Array.from(he.entries()).map(([ae,fe])=>({dealType:ae,count:fe.count,gci:fe.gci,percentage:xe>0?fe.count/xe:0,statusCounts:fe.statusCounts})).sort((ae,fe)=>fe.count-ae.count);W(Pe)},Xe=async R=>{const X=ze!=null&&ze.start?ze.start.getFullYear():uZ,ie=ng(ze.start.toISOString(),ze.end.toISOString());let de=Y.from("deals").select("*").eq("status","closed").or(ie);de=Qe(de,R);const{data:ce,error:se}=await de;if(se){console.error("loadMonthlyTrends error",se);return}if(!ce){o([]);return}const Ee=cZ.map(he=>({month:he,gci:0,deals:0}));ce.forEach(he=>{const xe=Lc(he.close_date)||Lc(he.closed_at);if(!xe||xe.year!==X)return;const Pe=xe.month,ae=Ee[Pe];ae.gci+=Vi(he),ae.deals+=1}),o(Ee.map(he=>({month:he.month,gci:Math.round(he.gci),deals:he.deals})))},Yt=async(R,X,ie)=>{const de=ng(X,ie);let ce=Y.from("deals").select("*, lead_sources(*)").eq("status","closed").or(de);ce=Qe(ce,R);const{data:se,error:Ee}=await ce;if(Ee){console.error("loadLeadSourcePerformance error",Ee);return}if(!se){u([]);return}const he=se.filter(ae=>kS(ae,ze.start,ze.end)),xe=new Map;he.forEach(ae=>{var ke;const fe=((ke=ae.lead_sources)==null?void 0:ke.name)||"Unknown",ue=xe.get(fe)||{deals:0,gci:0};ue.deals+=1,ue.gci+=Vi(ae),xe.set(fe,ue)});const Pe=Array.from(xe.entries()).map(([ae,fe])=>({name:ae,deals:fe.deals,gci:Math.round(fe.gci)})).sort((ae,fe)=>fe.gci-ae.gci).slice(0,5);u(Pe)},_r=async R=>{let X=Y.from("deals").select("*").in("status",jS).order("close_date",{ascending:!0,nullsLast:!0}).limit(200);X=Qe(X,R);const{data:ie,error:de}=await X;if(de){console.error("loadUpcomingDeals error",de),f([]);return}f(ie||[])},Vr=async R=>{let X=Y.from("deals").select("*").neq("status","closed").neq("status","dead").order("stage_entered_at",{ascending:!0});X=Qe(X,R);const{data:ie,error:de}=await X;if(de){console.error("loadStalledDeals error",de),m([]);return}const ce=(ie||[]).filter(se=>P_(se.stage_entered_at,30)).slice(0,5);m(ce)},Dn=async()=>{if(e)try{const{data:R,error:X}=await Y.from("dashboard_layouts").select("widget_order").eq("user_id",e.id).maybeSingle();if(X){console.error("Error loading widget layout:",X);return}R&&R.widget_order?M(fZ(R.widget_order)):M([...ah])}catch(R){console.error("Error loading widget layout:",R)}},In=async R=>{if(e)try{const{error:X}=await Y.from("dashboard_layouts").upsert({user_id:e.id,widget_order:R,updated_at:new Date().toISOString()},{onConflict:"user_id"});X&&console.error("Error saving widget layout:",X)}catch(X){console.error("Error saving widget layout:",X)}},vt=R=>{const{active:X,over:ie}=R;if(!ie||X.id===ie.id){oe(null);return}const de=I.indexOf(X.id),ce=I.indexOf(ie.id),se=[...I],[Ee]=se.splice(de,1);se.splice(ce,0,Ee),M(se),In(se),oe(null)},Gr=()=>{window.location.href="/pipeline"},ra=()=>{window.location.href="/pipeline"},$s=()=>{window.location.href="/luma"},ti=p.useMemo(()=>{const R=[];if(s.length>=2){const ie=s.slice(-2);if(ie.length===2){const[de,ce]=ie;if(ce.gci>de.gci){const se=(ce.gci-de.gci)/de.gci*100;R.push(`You're on track to beat last month by ${se.toFixed(0)}% in GCI.`)}else if(ce.gci<de.gci&&de.gci>0){const se=(de.gci-ce.gci)/de.gci*100;R.push(`GCI is down ${se.toFixed(0)}% compared to last month.`)}}}const X=new Map;if(a.forEach(ie=>{ie.stalledCount>0&&X.set(ie.name,ie.stalledCount)}),X.size>0){const ie=Array.from(X.entries()).sort((de,ce)=>ce[1]-de[1])[0];R.push(`${ie[1]} deal${ie[1]>1?"s have":" has"} been stalled in '${ie[0]}' for 30+ days.`)}if(c.length>0){const ie=c[0];R.push(`${ie.name} is your top performing lead source with ${Mr(ie.gci)} in closed deals.`)}return r.conversionRate>0&&(r.conversionRate>=.3?R.push(`Strong ${Gu(r.conversionRate)} conversion rate - keep up the momentum!`):r.conversionRate<.15&&R.push(`Conversion rate at ${Gu(r.conversionRate)} - consider focusing on lead quality.`)),d.length>0&&Fe>0&&R.push(`${d.length} deals projected to close soon with ${Mr(Fe)} potential GCI.`),R.length===0&&R.push("Keep adding deals to your pipeline to get personalized insights."),R},[r,a,c,s,d,Fe]);p.useEffect(()=>{if(g)return;const R=Date.now();!(A===0||R-A>=SS)&&S||(N(ti),D(R),j(null),P.current=!1)},[ti,g,A]);const xb=R=>{switch(R){case"luma-insights":return Bp();case"pipeline-health":return Up();case"alerts-actions":return z();case"monthly-momentum":return _e();case"deal-type-mix":return Ie();case"lead-source":return Ve();case"upcoming-deals":return d.length>0?$e():null;default:return null}},Bp=()=>l.jsx("div",{className:"hig-card p-6 bg-gradient-to-br from-blue-50 to-white border-blue-200/60",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-12 h-12 rounded-2xl bg-[rgb(0,122,255)] flex items-center justify-center shadow-lg",children:l.jsx(js,{className:"w-6 h-6 text-white",strokeWidth:2})})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"hig-text-heading",children:"Luma Insights"}),k&&l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[rgb(0,122,255)]"})]}),(_||w).length>0?l.jsx("div",{className:"space-y-3",children:(_||w).slice(0,3).map((R,X)=>l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[rgb(0,122,255)] mt-2 flex-shrink-0"}),l.jsx("p",{className:"text-[15px] text-gray-700 leading-relaxed",children:R})]},X))}):l.jsx("div",{className:"space-y-3",children:(S||ti).slice(0,3).map((R,X)=>l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[rgb(0,122,255)] mt-2 flex-shrink-0"}),l.jsx("p",{className:"text-[15px] text-gray-700 leading-relaxed",children:R})]},X))})]})]})}),Up=()=>l.jsxs("div",{className:"hig-card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"hig-text-heading",children:"Pipeline Health"}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:ta}),l.jsx("div",{className:"text-xs text-gray-500",children:"Active Deals"})]})]}),a.length===0?l.jsx("div",{className:"text-sm text-gray-500",children:"No active deals in your pipeline yet. Add a deal to see health metrics here."}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-xl",children:l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Total Pipeline Value"}),l.jsx("span",{className:"text-lg font-semibold text-[rgb(0,122,255)]",children:Mr(Za)})]})}),l.jsx("div",{className:"space-y-3",children:a.map(R=>{if(R.count===0)return null;const X=ta>0?R.count/ta*100:0;return l.jsxs("div",{className:"group p-4 rounded-xl border border-gray-200/60 hover:border-gray-300 hover:shadow-sm transition-all cursor-pointer",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Fh(R.color)}}),l.jsx("span",{className:"font-medium text-gray-900",children:R.name})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[R.stalledCount>0&&l.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-orange-50 rounded-full",children:[l.jsx(hs,{className:"w-3.5 h-3.5 text-orange-600",strokeWidth:2}),l.jsxs("span",{className:"text-xs font-medium text-orange-700",children:[R.stalledCount," stalled"]})]}),l.jsx("span",{className:"text-lg font-semibold text-gray-900",children:R.count})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-sm text-[rgb(0,122,255)] font-medium",children:Mr(R.expectedGCI)}),l.jsxs("div",{className:"text-xs text-gray-500",children:[X.toFixed(0),"% of pipeline"]})]})]},R.id)})}),Ki>0&&l.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200/60",children:l.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-orange-50 rounded-xl border border-orange-200/60",children:[l.jsx(Ia,{className:"w-4 h-4 text-orange-600",strokeWidth:2}),l.jsxs("span",{className:"text-sm font-medium text-orange-700",children:[Ki," deals need attention (30+ days)"]})]})})]})]}),z=()=>l.jsxs("div",{className:"hig-card p-6",children:[l.jsx("div",{className:"flex items-center justify-between mb-6",children:l.jsx("h2",{className:"hig-text-heading",children:"Alerts & Actions"})}),h.length>0?l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2 text-orange-600 mb-3",children:[l.jsx(Ia,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:"Stalled Deals Requiring Attention"})]}),l.jsx("div",{className:"space-y-2",children:h.slice(0,3).map(R=>l.jsx("div",{className:"p-3 bg-orange-50 rounded-xl border border-orange-200/60 hover:shadow-sm transition-all cursor-pointer",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium text-gray-900 text-sm",children:R.client_name}),l.jsx("div",{className:"text-xs text-gray-600 mt-1",children:R.property_address})]}),l.jsx("div",{className:"ml-3 px-2 py-1 bg-orange-100 rounded-lg",children:l.jsxs("div",{className:"text-xs text-orange-700 font-semibold",children:[yE(R.stage_entered_at),"d"]})})]})},R.id))})]}):l.jsx("div",{className:"mb-6 p-4 bg-green-50 rounded-xl border border-green-200/60",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ra,{className:"w-4 h-4 text-green-600",strokeWidth:2}),l.jsx("span",{className:"text-sm text-green-700",children:"All deals are moving smoothly!"})]})}),l.jsxs("div",{className:"pt-4 border-t border-gray-200/60",children:[l.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Quick Actions"}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{className:"hig-btn-secondary py-3 text-sm flex items-center justify-center gap-2",onClick:Gr,children:[l.jsx(zC,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"New Client"})]}),l.jsxs("button",{className:"hig-btn-secondary py-3 text-sm flex items-center justify-center gap-2",onClick:ra,children:[l.jsx(AC,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"New Task"})]}),l.jsxs("button",{className:"hig-btn-primary py-3 text-sm flex items-center justify-center gap-2",onClick:$s,children:[l.jsx(js,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Ask Luma"})]})]})]})]}),_e=()=>{const R=s.some(xe=>xe.gci>0||xe.deals>0),X=s.filter(xe=>xe.gci>0||xe.deals>0),ie=X.length>0?X[X.length-1]:null,de=X.length>=2?X[X.length-2]:null,ce=ie&&de&&de.gci>0?(ie.gci-de.gci)/de.gci*100:null,se=X.reduce((xe,Pe)=>Pe.gci>((xe==null?void 0:xe.gci)??0)?Pe:xe,null),Ee=s.map((xe,Pe,ae)=>{const fe=Math.max(0,Pe-2),ue=ae.slice(fe,Pe+1),ke=ue.reduce((Ce,We)=>Ce+We.gci,0);return ue.length?ke/ue.length:xe.gci}),he=s.map((xe,Pe)=>({...xe,trend:Ee[Pe]??xe.gci}));return l.jsxs("div",{className:"hig-card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"hig-text-heading",children:"Monthly Momentum"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Track production pace and deal count across recent months."})]}),ce!==null&&l.jsxs("div",{className:`inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-semibold ${ce>=0?"bg-emerald-50 text-emerald-600":"bg-rose-50 text-rose-600"}`,children:[ce>=0?l.jsx(EC,{className:"w-3.5 h-3.5"}):l.jsx(E3,{className:"w-3.5 h-3.5"}),ce>=0?"+":"",ce.toFixed(1),"% vs prev. month"]})]}),R?l.jsxs(l.Fragment,{children:[l.jsx(l1,{width:"100%",height:180,children:l.jsxs(iZ,{data:he,children:[l.jsx(cy,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),l.jsx(fy,{dataKey:"month",tick:{fontSize:11},stroke:"#94a3b8"}),l.jsx(py,{tick:{fontSize:11},stroke:"#94a3b8",tickFormatter:xe=>`$${(xe/1e3).toFixed(0)}K`}),l.jsx(Mj,{formatter:xe=>Mr(xe),labelFormatter:xe=>`Month: ${xe}`,contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb"}}),l.jsx(uy,{type:"monotone",dataKey:"gci",stroke:"#0ea5e9",strokeWidth:2,dot:{r:3,fill:"#0ea5e9"},activeDot:{r:5}}),l.jsx(uy,{type:"monotone",dataKey:"trend",stroke:"#ef4444",strokeWidth:1.5,dot:!1,strokeDasharray:"4 4"})]})}),l.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2 text-xs text-gray-600",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"h-1.5 w-6 rounded-full bg-[#0ea5e9]"}),l.jsx("span",{children:"Monthly GCI"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"h-1.5 w-6 rounded-full bg-[#ef4444]"}),l.jsx("span",{children:"3-month trailing mean"})]})]}),se&&l.jsxs("div",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:["Top month: ",se.month,"  ",Mr(se.gci)]})]})]}):l.jsx("div",{className:"text-sm text-gray-500",children:"No closed deals yet in this period. Close your first deal to surface momentum insights."})]})},Ie=()=>l.jsxs("div",{className:"hig-card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"hig-text-heading",children:"Deal Type Mix"}),l.jsx("div",{className:"text-xs text-gray-500",children:"Share of active deals by type & status"})]}),B.length>0?l.jsx("div",{className:"space-y-4",children:B.map(R=>l.jsxs("div",{className:"rounded-2xl border border-gray-100 p-4",children:[l.jsxs("div",{className:"flex items-start justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-base font-semibold text-gray-900",children:Gs[R.dealType]}),l.jsxs("p",{className:"text-sm text-gray-500",children:[R.count," active ",R.count===1?"deal":"deals"]}),l.jsxs("p",{className:"text-sm text-gray-500",children:[Mr(R.gci)," expected GCI"]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Gu(R.percentage)}),l.jsx("p",{className:"text-xs text-gray-500",children:"of pipeline"})]})]}),l.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:Object.entries(R.statusCounts).sort((X,ie)=>ie[1]-X[1]).map(([X,ie])=>l.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-gray-100 px-3 py-1 text-xs font-medium text-gray-700",children:[l.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-gray-400"}),_S[X]??X.replace(/_/g," "),l.jsxs("span",{className:"text-gray-500",children:["(",ie,")"]})]},X))})]},R.dealType))}):l.jsx("div",{className:"text-sm text-gray-500",children:"No active deals in your pipeline. Add a deal to see the deal-type mix."})]}),Ve=()=>l.jsxs("div",{className:"hig-card p-6",children:[l.jsx("h2",{className:"hig-text-heading mb-6",children:"Lead Source Performance"}),c.length>0?l.jsx(l1,{width:"100%",height:250,children:l.jsxs(oZ,{data:c,layout:"vertical",children:[l.jsx(cy,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),l.jsx(fy,{type:"number",tick:{fontSize:12},stroke:"#6b7280",tickFormatter:R=>`$${(R/1e3).toFixed(0)}K`}),l.jsx(py,{type:"category",dataKey:"name",tick:{fontSize:12},stroke:"#6b7280",width:100}),l.jsx(Mj,{formatter:R=>Mr(R),contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb"}}),l.jsx(kD,{dataKey:"gci",fill:"#0ea5e9",radius:[0,4,4,0]})]})}):l.jsx("div",{className:"text-sm text-gray-500",children:"No closed deals in this period, so lead source performance is not available yet."})]}),$e=()=>l.jsxs("div",{className:"hig-card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"hig-text-heading",children:"Forecasted Closings (Next 30 Days)"}),l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsx("span",{className:"font-medium text-gray-900",children:Mr(Fe)})," ","projected GCI"]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ei.map(R=>l.jsxs("div",{className:"p-4 border border-gray-200/60 rounded-xl hover:shadow-sm hover:border-gray-300 transition-all cursor-pointer",children:[l.jsx("div",{className:"font-medium text-gray-900",children:R.client_name}),l.jsx("div",{className:"text-sm text-gray-600 mt-1",children:R.property_address}),l.jsxs("div",{className:"flex items-center justify-between mt-3",children:[l.jsx("div",{className:"text-sm font-semibold text-[rgb(0,122,255)]",children:Mr(Vi(R))}),l.jsx(OC,{className:"w-4 h-4 text-gray-400",strokeWidth:2})]})]},R.id))})]});return g?l.jsx("div",{className:"flex items-center justify-center h-96",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[rgb(0,122,255)]"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_10px_40px_rgba(15,23,42,0.08)] p-6 space-y-6",children:[l.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-[0.25em]",children:Y6()}),l.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mt-1",children:H||E_((jt=e==null?void 0:e.user_metadata)==null?void 0:jt.name)}),l.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[r.closingNext7Days," deal",r.closingNext7Days===1?"":"s"," closing soon (next 7 days) "," ",Mr(Fe)," projected GCI over the next 30 days."]})]}),v&&l.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-gray-500 lg:ml-auto",children:[l.jsx("span",{className:"h-2 w-2 rounded-full bg-[var(--app-accent)] animate-pulse"}),"Updating"]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"rounded-2xl border border-blue-100/70 bg-blue-50/40 p-4",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-blue-600",children:"Pipeline Value"}),l.jsx("p",{className:"text-2xl font-semibold text-gray-900 mt-2",children:Mr(Za)}),l.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Active stages only"})]}),l.jsxs("div",{className:"rounded-2xl border border-emerald-100/70 bg-emerald-50/40 p-4",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-emerald-600",children:"Projected GCI"}),l.jsx("p",{className:"text-2xl font-semibold text-gray-900 mt-2",children:Mr(Fe)}),l.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Next 30 days"})]}),l.jsxs("div",{className:"rounded-2xl border border-purple-100/70 bg-purple-50/40 p-4",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-purple-600",children:"Active Deals"}),l.jsx("p",{className:"text-2xl font-semibold text-gray-900 mt-2",children:ta}),l.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Across pipeline"})]})]})]}),Wi&&l.jsxs("div",{className:"rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_6px_30px_rgba(15,23,42,0.08)] p-4 space-y-4",children:[l.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Scope"}),l.jsx("p",{className:"text-sm text-gray-700",children:ma})]}),l.jsx(YD,{options:V,value:Le,onChange:R=>fr(R)})]}),re.length>0&&l.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Agents"}),Lt&&l.jsx("button",{type:"button",onClick:wr,className:`rounded-full px-3 py-1 text-xs font-semibold transition ${Ct?"bg-[var(--app-accent)] text-white shadow-[0_8px_20px_rgba(0,122,255,0.25)]":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,children:"Focus On Me"})]}),l.jsx("div",{className:"flex items-center gap-1.5",children:!Ir&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:Qa,children:"Clear"})})]}),l.jsx("select",{multiple:!0,value:O,onChange:Fi,className:"hig-input min-h-[72px] rounded-2xl border-gray-200 bg-white/90 text-sm",children:re.map(R=>l.jsx("option",{value:R.id,children:R.label},R.id))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Pipeline Stage"}),le.length>0&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:()=>De([]),children:"Clear"})]}),l.jsx("select",{multiple:!0,value:le,onChange:Bi,className:"hig-input min-h-[64px] mt-2",children:G.map(R=>l.jsx("option",{value:R.id,children:R.label},R.id))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Deal Type"}),Ae.length>0&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:()=>qe([]),children:"Clear"})]}),l.jsx("select",{multiple:!0,value:Ae,onChange:zi,className:"hig-input min-h-[64px] mt-2",children:K.map(R=>l.jsx("option",{value:R,children:Gs[R]??R.replace(/_/g," ")},R))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Lead Source"}),F.length>0&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:()=>ye([]),children:"Clear"})]}),l.jsx("select",{multiple:!0,value:F,onChange:Ui,className:"hig-input min-h-[64px] mt-2",children:te.map(R=>l.jsx("option",{value:R.id,children:R.name},R.id))})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"hig-card p-6",title:"Gross commission income from closed deals in the selected date range.",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"p-2 rounded-xl bg-blue-50",children:l.jsx(D3,{className:"w-5 h-5 text-[rgb(0,122,255)]",strokeWidth:2})}),l.jsx("span",{className:"text-sm text-gray-600",title:"Gross commission income from closed deals in the selected date range.",children:"Total GCI"})]}),l.jsx("div",{className:"text-3xl font-semibold text-gray-900",children:Mr(r.ytdGCI)})]}),l.jsxs("div",{className:"hig-card p-6",title:"Number of deals marked closed within the selected date range.",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"p-2 rounded-xl bg-green-50",children:l.jsx(Ra,{className:"w-5 h-5 text-green-600",strokeWidth:2})}),l.jsx("span",{className:"text-sm text-gray-600",title:"Number of deals marked closed within the selected date range.",children:"Closed Deals"})]}),l.jsx("div",{className:"text-3xl font-semibold text-gray-900",children:r.ytdDeals})]}),l.jsxs("div",{className:"hig-card p-6",title:"Active deals scheduled to close in the next 7 days.",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"p-2 rounded-xl bg-orange-50",children:l.jsx(jo,{className:"w-5 h-5 text-orange-600",strokeWidth:2})}),l.jsx("span",{className:"text-sm text-gray-600",title:"Active deals scheduled to close in the next 7 days.",children:"Closing Soon (7d)"})]}),l.jsx("div",{className:"text-3xl font-semibold text-gray-900",children:r.closingNext7Days})]}),l.jsxs("div",{className:"hig-card p-6",title:"Closed deals divided by all deals created in the selected date range.",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"p-2 rounded-xl bg-gray-50",children:l.jsx(C3,{className:"w-5 h-5 text-gray-600",strokeWidth:2})}),l.jsx("span",{className:"text-sm text-gray-600",title:"Closed deals divided by all deals created in the selected date range.",children:"Conv. Rate"})]}),l.jsx("div",{className:"text-3xl font-semibold text-gray-900",children:Gu(r.conversionRate)})]})]}),l.jsx(Ih,{sensors:C,collisionDetection:A0,onDragEnd:vt,onDragStart:R=>oe(R.active.id),children:l.jsx($h,{items:I,strategy:Mh,children:l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:I.map(R=>{const X=xb(R);return X?l.jsx(pZ,{id:R,children:X},R):null})})})})]})}function XD({deal:e,netCommission:t,daysInStage:r,onClick:n,isDragging:a=!1}){const i=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s);return l.jsxs("div",{onClick:n,"data-deal-id":e.id,className:`rounded-2xl border border-gray-100/80 bg-white/95 p-4 shadow-[0_10px_30px_rgba(15,23,42,0.05)] ring-1 ring-black/5 cursor-move transition-transform duration-200 ${a?"opacity-60":"hover:-translate-y-0.5"}`,children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:e.client_name}),l.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[l.jsx(DC,{className:"w-3.5 h-3.5 mr-1 text-gray-400"}),l.jsx("span",{className:"truncate",children:e.property_address})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("span",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:"Expected"}),l.jsx("div",{className:"text-sm font-semibold text-gray-900",children:i(e.actual_sale_price||e.expected_sale_price)})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-xs text-gray-600",children:[l.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[l.jsx(hs,{className:"w-3.5 h-3.5 text-gray-400"}),l.jsxs("span",{children:[r,"d in stage"]})]}),e.lead_sources?l.jsxs("div",{className:"flex items-center gap-1 text-gray-500 justify-end",children:[l.jsx(UC,{className:"w-3.5 h-3.5 text-gray-400"}),l.jsx("span",{className:"truncate",children:e.lead_sources.name})]}):l.jsx("div",{})]}),l.jsxs("div",{className:"mt-4 flex items-center justify-between rounded-xl bg-gray-50 px-3 py-2 text-xs",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:"Net Commission"}),l.jsx("div",{className:"text-sm font-semibold text-emerald-600",children:i(t)})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:"Close Date"}),l.jsx("div",{className:"text-sm font-semibold text-gray-900",children:e.close_date?new Date(e.close_date).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""})]})]})]})}const gZ=["buyer","seller","buyer_and_seller","renter","landlord"],Ol={buyer:{label:"Buyer",accentDot:"bg-blue-400",labelClass:"text-blue-900",panelBg:"bg-blue-50/60",panelBorder:"border-blue-100"},seller:{label:"Seller",accentDot:"bg-emerald-400",labelClass:"text-emerald-900",panelBg:"bg-emerald-50/60",panelBorder:"border-emerald-100"},buyer_and_seller:{label:"Buyer & Seller",accentDot:"bg-purple-400",labelClass:"text-purple-900",panelBg:"bg-purple-50/60",panelBorder:"border-purple-100"},renter:{label:"Renter",accentDot:"bg-orange-400",labelClass:"text-orange-900",panelBg:"bg-orange-50/60",panelBorder:"border-orange-100"},landlord:{label:"Landlord",accentDot:"bg-teal-400",labelClass:"text-teal-900",panelBg:"bg-teal-50/60",panelBorder:"border-teal-100"}};function vZ({status:e,label:t,color:r,deals:n,onDealClick:a,calculateNetCommission:i,getDaysInStage:s}){const{setNodeRef:o,isOver:c}=fE({id:e}),u=Bh(r),d=gZ.map(f=>({type:f,label:Ol[f].label,accentDot:Ol[f].accentDot,labelClass:Ol[f].labelClass,deals:n.filter(h=>h.deal_type===f),panelBg:Ol[f].panelBg,panelBorder:Ol[f].panelBorder})).filter(f=>f.deals.length>0);return l.jsxs("div",{className:"flex-shrink-0 w-72 sm:w-80 flex flex-col",children:[l.jsxs("div",{className:"rounded-lg p-2.5 sm:p-3 mb-2 sm:mb-3 flex-shrink-0",style:{backgroundColor:u.bg,color:u.text},children:[l.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:t}),l.jsxs("span",{className:"text-xs sm:text-sm opacity-80",children:[n.length," deal",n.length!==1?"s":""]})]}),l.jsx("div",{ref:o,className:`flex-1 min-h-[600px] rounded-lg p-3 transition overflow-y-auto ${c?"bg-blue-50 ring-2 ring-blue-400":"bg-gray-50"}`,style:{minHeight:"600px"},children:n.length===0?l.jsx("div",{className:"h-full min-h-[560px] flex items-center justify-center",children:l.jsxs("div",{className:"text-center text-gray-400",children:[l.jsx("div",{className:"text-sm font-medium mb-1",children:"Drop deals here"}),l.jsx("div",{className:"text-xs",children:"Drag cards to this column"})]})}):l.jsx("div",{className:"space-y-6",children:d.map((f,h)=>l.jsxs("div",{className:`rounded-2xl border px-3 py-3 sm:px-4 sm:py-4 ${f.panelBg} ${f.panelBorder} ${h>0?"mt-1":""}`,children:[l.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${f.accentDot}`}),l.jsx("span",{className:`text-xs font-semibold ${f.labelClass}`,children:f.label})]}),l.jsxs("span",{className:"text-[11px] font-medium text-gray-400",children:[f.deals.length," deal",f.deals.length!==1?"s":""]})]}),l.jsx($h,{items:f.deals.map(m=>m.id),strategy:pE,children:l.jsx("div",{className:"mt-3 space-y-2 sm:space-y-3",children:f.deals.map(m=>l.jsx(yZ,{deal:m,onDealClick:a,calculateNetCommission:i,getDaysInStage:s},m.id))})})]},f.type))})})]})}function yZ({deal:e,onDealClick:t,calculateNetCommission:r,getDaysInStage:n}){const{attributes:a,listeners:i,setNodeRef:s,transform:o,transition:c,isDragging:u}=Lh({id:e.id,data:{type:"deal"}}),d={transform:Vn.Transform.toString(o),transition:c,zIndex:u?50:void 0};return l.jsx("div",{ref:s,style:d,...a,...i,children:l.jsx(XD,{deal:e,netCommission:r(e),daysInStage:n(e.stage_entered_at),onClick:()=>t(e),isDragging:u})})}const xZ={jan:1,january:1,feb:2,february:2,mar:3,march:3,apr:4,april:4,may:5,jun:6,june:6,jul:7,july:7,aug:8,august:8,sep:9,sept:9,september:9,oct:10,october:10,nov:11,november:11,dec:12,december:12};function CS(e){return e.toString().padStart(2,"0")}function bZ(e,t,r){const n=new Date(Date.UTC(e,t-1,r));return n.getUTCFullYear()===e&&n.getUTCMonth()+1===t&&n.getUTCDate()===r}function Al(e,t,r){return bZ(e,t,r)?`${e}-${CS(t)}-${CS(r)}`:null}function wZ(e){return e<100?e>=70?1900+e:2e3+e:e}function ES(e){const t=e.toLowerCase();return xZ[t]||null}function _Z(e){if(!e)return null;const t=e.trim();if(!t)return null;const r=t.replace(/\s+/g," "),n=r.match(/^(\d{4})[\/-](\d{1,2})[\/-](\d{1,2})$/);if(n){const[c,u,d,f]=n;return Al(parseInt(u,10),parseInt(d,10),parseInt(f,10))}const a=r.match(/^(\d{1,2})[\/\.\-](\d{1,2})[\/\.\-](\d{2}|\d{4})$/);if(a){const[c,u,d,f]=a,h=wZ(parseInt(f,10));return Al(h,parseInt(u,10),parseInt(d,10))}const i=r.match(/^(\d{4})\.(\d{1,2})\.(\d{1,2})$/);if(i){const[c,u,d,f]=i;return Al(parseInt(u,10),parseInt(d,10),parseInt(f,10))}const s=r.match(/^([A-Za-z]+)[\s\-](\d{1,2}),?[\s\-]*(\d{4})$/);if(s){const c=ES(s[1]);if(c)return Al(parseInt(s[3],10),c,parseInt(s[2],10))}const o=r.match(/^(\d{1,2})[\s\-]([A-Za-z]+),?[\s\-]*(\d{4})$/);if(o){const c=ES(o[2]);if(c)return Al(parseInt(o[3],10),c,parseInt(o[1],10))}return null}function jZ(e=[]){const t=["client_name","client_phone","client_email","property_address","city","state","zip","deal_type","lead_source_name","pipeline_status","expected_sale_price","actual_sale_price","gross_commission_rate","brokerage_split_rate","referral_out_rate","referral_in_rate","transaction_fee","close_date"].join(","),r=["New Lead","Contacted","Under Contract"],n=e.length>0?e:r,i=[{client_name:"John Smith",client_phone:"555-123-4567",client_email:"john.smith@example.com",property_address:"123 Main Street",city:"Austin",state:"TX",zip:"78701",deal_type:"buyer",lead_source_name:"Zillow",pipeline_status:n[Math.min(2,n.length-1)]||n[0],expected_sale_price:"450000",actual_sale_price:"",gross_commission_rate:"0.03",brokerage_split_rate:"0.20",referral_out_rate:"",referral_in_rate:"",transaction_fee:"500",close_date:""},{client_name:"Sarah Johnson",client_phone:"555-987-6543",client_email:"sarah.j@example.com",property_address:"456 Oak Avenue",city:"Dallas",state:"TX",zip:"75201",deal_type:"seller",lead_source_name:"Past Client",pipeline_status:n[n.length-1]||n[0],expected_sale_price:"525000",actual_sale_price:"520000",gross_commission_rate:"0.03",brokerage_split_rate:"0.20",referral_out_rate:"0.25",referral_in_rate:"",transaction_fee:"500",close_date:"2024-12-15"},{client_name:"Mike Davis",client_phone:"555-456-7890",client_email:"mike.davis@example.com",property_address:"789 Elm Street",city:"Houston",state:"TX",zip:"77001",deal_type:"renter",lead_source_name:"Referral",pipeline_status:n[Math.min(1,n.length-1)]||n[0],expected_sale_price:"2400",actual_sale_price:"",gross_commission_rate:"0.5",brokerage_split_rate:"0.20",referral_out_rate:"",referral_in_rate:"",transaction_fee:"0",close_date:""}].map(s=>Object.values(s).map(o=>{const c=String(o);return c.includes(",")||c.includes('"')||c.includes(`
`)?`"${c.replace(/"/g,'""')}"`:c}).join(",")).join(`
`);return`${t}
${i}`}function SZ(e,t){const r=new Blob([e],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),a=URL.createObjectURL(r);n.setAttribute("href",a),n.setAttribute("download",t),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function NZ(e){const t=[];let r=[],n="",a=!1;for(let i=0;i<e.length;i++){const s=e[i],o=e[i+1];a?s==='"'&&o==='"'?(n+='"',i++):s==='"'?a=!1:n+=s:s==='"'?a=!0:s===","?(r.push(n.trim()),n=""):s===`
`||s==="\r"?((n||r.length>0)&&(r.push(n.trim()),r.some(c=>c!=="")&&t.push(r),r=[],n=""),s==="\r"&&o===`
`&&i++):n+=s}return(n||r.length>0)&&(r.push(n.trim()),r.some(i=>i!=="")&&t.push(r)),t}function kZ(e,t=[]){const r=[];(!e.client_name||e.client_name.trim()==="")&&r.push("client_name is required"),(!e.lead_source_name||e.lead_source_name.trim()==="")&&r.push("lead_source_name is required");const n=["buyer","seller","buyer_and_seller","renter","landlord"];if((!e.deal_type||!n.includes(e.deal_type))&&r.push(`deal_type must be one of: ${n.join(", ")}`),!e.pipeline_status||e.pipeline_status.trim()==="")r.push("pipeline_status is required");else if(t.length>0){const a=e.pipeline_status.toLowerCase().trim();t.includes(a)||r.push(`pipeline_status must be one of your configured statuses: ${t.join(", ")}`)}return{valid:r.length===0,errors:r}}function CZ(e,t){const r={};return e.forEach((n,a)=>{const i=t[a]||"";r[n]=i}),r}function EZ({onClose:e,onSuccess:t}){const{user:r,roleInfo:n}=kt(),a=(n==null?void 0:n.teamId)||null,[i,s]=p.useState(null),[o,c]=p.useState(!1),[u,d]=p.useState(null),f=async()=>{if(!r)return;const{data:g}=a?await Y.from("pipeline_statuses").select("name").eq("team_id",a).order("sort_order"):{data:null},{data:y}=g!=null&&g.length?{data:g}:await Y.from("pipeline_statuses").select("name").eq("user_id",r.id).order("sort_order"),v=(y==null?void 0:y.map(w=>w.name))||[],x=jZ(v);SZ(x,"deals-import-example.csv")},h=g=>{var v;const y=(v=g.target.files)==null?void 0:v[0];y&&y.type==="text/csv"?(s(y),d(null)):alert("Please select a valid CSV file")},m=async()=>{var g,y,v,x,w,b;if(!(!i||!r)){c(!0),d(null);try{const _=await i.text(),j=NZ(_);if(j.length<2){alert("CSV file must contain a header row and at least one data row"),c(!1);return}const S=j[0].map(M=>M.toLowerCase().trim()),N=j.slice(1),{data:k}=a?await Y.from("lead_sources").select("id, name").eq("team_id",a):{data:null},{data:E}=k!=null&&k.length?{data:k}:await Y.from("lead_sources").select("id, name").eq("user_id",r.id),P=new Map((E==null?void 0:E.map(M=>[M.name.toLowerCase(),M.id]))||[]),{data:A}=a?await Y.from("pipeline_statuses").select("id, name").eq("team_id",a):{data:null},{data:D}=A!=null&&A.length?{data:A}:await Y.from("pipeline_statuses").select("id, name").eq("user_id",r.id),H=new Map((D==null?void 0:D.map(M=>[M.name.toLowerCase(),M.id]))||[]),{data:Q}=await Y.from("user_settings").select("default_brokerage_split_rate").eq("user_id",r.id).single(),ee=(Q==null?void 0:Q.default_brokerage_split_rate)||.2;let B=0,W=0;const I=[];for(let M=0;M<N.length;M++){const L=CZ(S,N[M]),oe=kZ(L,Array.from(H.keys()));if(!oe.valid){W++,I.push({row:M+2,errors:oe.errors});continue}const re=P.get(L.lead_source_name.toLowerCase().trim());if(!re){W++,I.push({row:M+2,errors:[`Lead source "${L.lead_source_name}" not found. Please create it in Lead Sources settings first.`]});continue}let Ne=null,O="new_lead";if(L.pipeline_status&&L.pipeline_status.trim()!==""){Ne=H.get(L.pipeline_status.toLowerCase().trim())||null;const G=L.pipeline_status.toLowerCase().trim();G==="closed"?O="closed":G==="dead"&&(O="dead")}let q=null;if(L.close_date&&L.close_date.trim()!==""&&(q=_Z(L.close_date),!q)){W++,I.push({row:M+2,errors:[`Close date "${L.close_date}" is not recognized. Use formats like YYYY-MM-DD, MM/DD/YYYY, or December 15, 2024.`]});continue}const te={user_id:r.id,client_name:L.client_name.trim(),client_phone:((g=L.client_phone)==null?void 0:g.trim())||null,client_email:((y=L.client_email)==null?void 0:y.trim())||null,property_address:((v=L.property_address)==null?void 0:v.trim())||null,city:((x=L.city)==null?void 0:x.trim())||null,state:((w=L.state)==null?void 0:w.trim())||null,zip:((b=L.zip)==null?void 0:b.trim())||null,deal_type:L.deal_type.trim(),lead_source_id:re,pipeline_status_id:Ne,status:O,expected_sale_price:L.expected_sale_price&&L.expected_sale_price.trim()!==""?Number(L.expected_sale_price):null,actual_sale_price:L.actual_sale_price&&L.actual_sale_price.trim()!==""?Number(L.actual_sale_price):null,gross_commission_rate:L.gross_commission_rate&&L.gross_commission_rate.trim()!==""?Number(L.gross_commission_rate):.03,brokerage_split_rate:L.brokerage_split_rate&&L.brokerage_split_rate.trim()!==""?Number(L.brokerage_split_rate):ee,referral_out_rate:L.referral_out_rate&&L.referral_out_rate.trim()!==""?Number(L.referral_out_rate):null,referral_in_rate:L.referral_in_rate&&L.referral_in_rate.trim()!==""?Number(L.referral_in_rate):null,transaction_fee:L.transaction_fee&&L.transaction_fee.trim()!==""?Number(L.transaction_fee):0,close_date:q,stage_entered_at:new Date().toISOString(),closed_at:O==="closed"?new Date().toISOString():null},{error:$}=await Y.from("deals").insert(te);$?(W++,I.push({row:M+2,errors:[$.message]})):B++}d({success:B,failed:W,errors:I})}catch(_){console.error("Import error:",_),alert("An error occurred while importing. Please check your file format.")}finally{c(!1)}}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Import Deals from CSV"}),l.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition",children:l.jsx(Ss,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[l.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How to Import Deals"}),l.jsxs("ol",{className:"text-sm text-blue-800 space-y-1 list-decimal list-inside",children:[l.jsx("li",{children:"Download the example CSV file to see the required format"}),l.jsx("li",{children:"Fill in your deal data following the example structure"}),l.jsx("li",{children:"Save your file as CSV format"}),l.jsx("li",{children:"Upload your CSV file using the button below"})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Step 1: Download Example"}),l.jsxs("button",{onClick:f,className:"w-full px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg flex items-center justify-center space-x-2 transition",children:[l.jsx(I3,{className:"w-5 h-5"}),l.jsx("span",{children:"Download Example CSV"})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Step 2: Upload Your CSV"}),l.jsxs("label",{className:"block w-full px-4 py-8 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 cursor-pointer transition text-center",children:[l.jsx("input",{type:"file",accept:".csv",onChange:h,className:"hidden",disabled:o}),l.jsx(gv,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),l.jsx("div",{className:"text-sm text-gray-600",children:i?l.jsx("span",{className:"font-medium text-blue-600",children:i.name}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"font-medium text-blue-600",children:"Click to upload"})," ","or drag and drop"]})}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"CSV files only"})]})]}),i&&!u&&l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Step 3: Import"}),l.jsx("button",{onClick:m,disabled:o,className:"w-full px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg flex items-center justify-center space-x-2 transition",children:o?l.jsxs(l.Fragment,{children:[l.jsx(B3,{className:"w-5 h-5 animate-spin"}),l.jsx("span",{children:"Importing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(gv,{className:"w-5 h-5"}),l.jsx("span",{children:"Import Deals"})]})})]}),u&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Import Results"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-green-50 rounded-lg p-3 flex items-center space-x-3",children:[l.jsx(Ra,{className:"w-6 h-6 text-green-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:u.success}),l.jsx("div",{className:"text-xs text-gray-600",children:"Successfully Imported"})]})]}),l.jsxs("div",{className:"bg-red-50 rounded-lg p-3 flex items-center space-x-3",children:[l.jsx(Ia,{className:"w-6 h-6 text-red-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-red-600",children:u.failed}),l.jsx("div",{className:"text-xs text-gray-600",children:"Failed"})]})]})]})]}),u.errors.length>0&&l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-h-64 overflow-y-auto",children:[l.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"Errors"}),l.jsx("div",{className:"space-y-2",children:u.errors.map((g,y)=>l.jsxs("div",{className:"text-sm",children:[l.jsxs("div",{className:"font-medium text-red-800",children:["Row ",g.row,":"]}),l.jsx("ul",{className:"list-disc list-inside text-red-700 ml-2",children:g.errors.map((v,x)=>l.jsx("li",{children:v},x))})]},y))})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{onClick:()=>{s(null),d(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Import Another File"}),l.jsx("button",{onClick:()=>{u.success>0&&t(),e()},className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition",children:"Done"})]})]})]}),l.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Required Fields"}),l.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[l.jsxs("li",{children:[l.jsx("span",{className:"font-medium",children:"client_name:"})," Client's full name"]}),l.jsxs("li",{children:[l.jsx("span",{className:"font-medium",children:"lead_source_name:"})," Must match one of your configured lead sources"]}),l.jsxs("li",{children:[l.jsx("span",{className:"font-medium",children:"deal_type:"})," buyer, seller, buyer_and_seller, renter, or landlord"]}),l.jsxs("li",{children:[l.jsx("span",{className:"font-medium",children:"pipeline_status:"})," Must match one of your configured pipeline statuses"]})]}),l.jsx("div",{className:"mt-3 text-xs text-gray-600",children:"Note: Property address and price are optional. Lead source and pipeline status names must match exactly or the import will fail."})]})]})]})})}const PZ=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),ud=e=>e==null||Number.isNaN(e)?"":PZ.format(e),dd=e=>e==null||Number.isNaN(e)?"":`${(e*100).toFixed(1)}%`,Ys=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},PS=e=>e?e.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "):"",Co=[{id:"client",label:"Client",defaultVisible:!0,cellClassName:"px-4 py-4 align-top whitespace-nowrap cursor-pointer",render:({deal:e})=>l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.client_name||""}),e.client_email&&l.jsx("div",{className:"text-xs text-gray-500",children:e.client_email}),e.client_phone&&l.jsx("div",{className:"text-xs text-gray-500",children:e.client_phone})]})},{id:"clientEmail",label:"Client Email",cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>l.jsx("span",{className:e.client_email?"text-gray-700":"text-gray-400",children:e.client_email||""})},{id:"clientPhone",label:"Client Phone",cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>l.jsx("span",{className:e.client_phone?"text-gray-700":"text-gray-400",children:e.client_phone||""})},{id:"property",label:"Property",defaultVisible:!0,cellClassName:"px-4 py-4 text-sm text-gray-900 cursor-pointer min-w-[220px]",render:({deal:e})=>l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(DC,{className:"w-4 h-4 text-gray-400 flex-shrink-0 mt-0.5"}),l.jsxs("div",{children:[l.jsx("div",{children:e.property_address||""}),(e.city||e.state)&&l.jsx("div",{className:"text-xs text-gray-500",children:[e.city,e.state].filter(Boolean).join(", ")})]})]})},{id:"city",label:"City",cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>l.jsx("span",{className:e.city?"text-gray-700":"text-gray-400",children:e.city||""})},{id:"state",label:"State",cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>l.jsx("span",{className:e.state?"text-gray-700":"text-gray-400",children:e.state||""})},{id:"zip",label:"ZIP",cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>l.jsx("span",{className:e.zip?"text-gray-700":"text-gray-400",children:e.zip||""})},{id:"dealType",label:"Deal Type",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap cursor-pointer",render:({deal:e})=>{const t=e.deal_type==="buyer"?"bg-blue-100 text-blue-700":e.deal_type==="seller"?"bg-green-100 text-green-700":e.deal_type==="buyer_and_seller"?"bg-purple-100 text-purple-700":e.deal_type==="renter"?"bg-orange-100 text-orange-700":e.deal_type==="landlord"?"bg-teal-100 text-teal-700":"bg-gray-100 text-gray-700",r=e.deal_type==="buyer"?"Buyer":e.deal_type==="seller"?"Seller":e.deal_type==="buyer_and_seller"?"Both":e.deal_type==="renter"?"Renter":e.deal_type==="landlord"?"Landlord":PS(e.deal_type);return l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${t}`,children:r})}},{id:"pipelineStatus",label:"Pipeline Status",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap cursor-pointer",render:({deal:e,getStatusForDeal:t})=>{const r=t(e);if(!r)return l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-700",children:"No Status"});const n=Bh(r.color);return l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",style:{backgroundColor:n.bg,color:n.text},children:r.name})}},{id:"status",label:"System Status",cellClassName:"px-4 py-4 whitespace-nowrap cursor-pointer",render:({deal:e})=>l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-700",children:PS(e.status)})},{id:"leadSource",label:"Lead Source",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>{var t,r;return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(UC,{className:"w-4 h-4 text-gray-400"}),l.jsx("span",{className:(t=e.lead_sources)!=null&&t.name?"text-gray-900":"text-gray-400",children:((r=e.lead_sources)==null?void 0:r.name)||""})]})}},{id:"expectedPrice",label:"Expected Price",defaultVisible:!0,headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:ud(e.actual_sale_price||e.expected_sale_price)})},{id:"actualPrice",label:"Actual Price",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:ud(e.actual_sale_price)})},{id:"netCommission",label:"Net Commission",defaultVisible:!0,headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm font-semibold text-green-600 cursor-pointer text-right",render:({deal:e,calculateNetCommission:t})=>l.jsx("span",{children:ud(t(e))})},{id:"grossCommissionRate",label:"Commission %",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:dd(e.gross_commission_rate)})},{id:"brokerageSplitRate",label:"Broker Split %",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:dd(e.brokerage_split_rate)})},{id:"referralOutRate",label:"Referral Out %",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:dd(e.referral_out_rate)})},{id:"referralInRate",label:"Referral In %",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:dd(e.referral_in_rate)})},{id:"transactionFee",label:"Transaction Fee",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:ud(e.transaction_fee)})},{id:"daysInStage",label:"Days in Stage",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 cursor-pointer",render:({deal:e,getDaysInStage:t})=>l.jsxs("div",{className:"flex items-center justify-start gap-2",children:[l.jsx(hs,{className:"w-4 h-4 text-gray-400"}),l.jsxs("span",{children:[t(e.stage_entered_at)," days"]})]})},{id:"stageEnteredAt",label:"Stage Entered",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>l.jsx("span",{children:Ys(e.stage_entered_at)})},{id:"closeDate",label:"Close Date",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>l.jsx("span",{children:Ys(e.close_date)})},{id:"closedAt",label:"Closed On",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>l.jsx("span",{children:Ys(e.closed_at)})},{id:"nextTaskDescription",label:"Next Task",cellClassName:"px-4 py-4 text-sm text-gray-700 cursor-pointer min-w-[200px]",render:({deal:e})=>l.jsx("span",{className:e.next_task_description?"text-gray-700":"text-gray-400",children:e.next_task_description||""})},{id:"nextTaskDueDate",label:"Next Task Due",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>l.jsx("span",{children:Ys(e.next_task_due_date)})},{id:"createdAt",label:"Created",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(jo,{className:"w-4 h-4 text-gray-400"}),l.jsx("span",{children:Ys(e.created_at)})]})},{id:"updatedAt",label:"Updated",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>l.jsx("span",{children:Ys(e.updated_at)})}],OS="pipeline-table-columns-v1",AS=new Set(Co.map(e=>e.id)),TS=new Map(Co.map((e,t)=>[e.id,t])),ag=Co.filter(e=>e.defaultVisible).map(e=>e.id),ig=e=>[...e].sort((t,r)=>(TS.get(t)??0)-(TS.get(r)??0));function OZ({deals:e,statuses:t,onDealClick:r,calculateNetCommission:n,getDaysInStage:a,onBulkDelete:i,onBulkEdit:s,onImportSuccess:o}){const[c,u]=p.useState(new Set),[d,f]=p.useState(!1),[h,m]=p.useState(""),[g,y]=p.useState(""),[v,x]=p.useState(!1),[w,b]=p.useState(!1),[_,j]=p.useState({column:"pipelineOrder",direction:"asc"}),[S,N]=p.useState(()=>{if(typeof window>"u")return ag;try{const O=window.localStorage.getItem(OS);if(O){const te=JSON.parse(O).filter($=>AS.has($));if(te.length>0)return ig(te)}}catch{}return ag});p.useEffect(()=>{typeof window>"u"||window.localStorage.setItem(OS,JSON.stringify(S))},[S]);const k=O=>{N(q=>q.includes(O)?q.length===1?q:q.filter(te=>te!==O):ig([...q,O]))},E=()=>N(ig(Array.from(AS))),P=()=>N(ag),A=Co.filter(O=>S.includes(O.id)),D=A.length+1,H=O=>{const q=new Set(c);q.has(O)?q.delete(O):q.add(O),u(q)},Q=()=>{c.size===L.length?u(new Set):u(new Set(L.map(O=>O.id)))},ee=()=>{i&&c.size>0&&(i(Array.from(c)),u(new Set))},B=()=>{s&&c.size>0&&h&&(s(Array.from(c),{pipeline_status_id:h}),u(new Set),f(!1),m(""))},W=p.useMemo(()=>new Map(t.map((O,q)=>[O.id,q])),[t]),I=O=>t.find(q=>q.id===O.pipeline_status_id),L=p.useMemo(()=>{let O=e;if(g.trim()){const T=g.toLowerCase(),K=Z=>Z?Z.toLowerCase().includes(T):!1;O=O.filter(Z=>{var F;return K(Z.client_name)||K(Z.property_address)||K(Z.city)||K(Z.state)||K(Z.client_email)||K(Z.client_phone)||K((F=Z.lead_sources)==null?void 0:F.name)})}const q=T=>{if(!T.stage_entered_at)return null;const K=new Date(T.stage_entered_at).getTime();return Number.isNaN(K)?null:Date.now()-K},te=(T,K)=>{var F;const Z=ye=>ye?ye.toLowerCase():null;switch(K){case"pipelineOrder":return W.get(T.pipeline_status_id||"")??9999;case"client":return Z(T.client_name);case"clientEmail":return Z(T.client_email);case"clientPhone":return Z(T.client_phone);case"property":return Z(T.property_address);case"city":return Z(T.city);case"state":return Z(T.state);case"zip":return Z(T.zip);case"dealType":return Z(T.deal_type);case"pipelineStatus":return W.get(T.pipeline_status_id||"")??9999;case"status":return Z(T.status);case"leadSource":return Z(((F=T.lead_sources)==null?void 0:F.name)||T.lead_source_name);case"expectedPrice":return T.expected_sale_price??null;case"actualPrice":return T.actual_sale_price??null;case"netCommission":return n(T);case"grossCommissionRate":return T.gross_commission_rate??null;case"brokerageSplitRate":return T.brokerage_split_rate??null;case"referralOutRate":return T.referral_out_rate??null;case"referralInRate":return T.referral_in_rate??null;case"transactionFee":return T.transaction_fee??null;case"daysInStage":return q(T);case"stageEnteredAt":return T.stage_entered_at?new Date(T.stage_entered_at).getTime():null;case"closeDate":return T.close_date?new Date(T.close_date).getTime():null;case"closedAt":return T.closed_at?new Date(T.closed_at).getTime():null;case"nextTaskDueDate":return T.next_task_due_date?new Date(T.next_task_due_date).getTime():null;case"nextTaskDescription":return Z(T.next_task_description);case"createdAt":return T.created_at?new Date(T.created_at).getTime():null;case"updatedAt":return T.updated_at?new Date(T.updated_at).getTime():null;default:return Z(T[K])}},$=(T,K)=>T==null?K==null?0:1:K==null?-1:typeof T=="number"&&typeof K=="number"?T-K:String(T).localeCompare(String(K));return[...O].sort((T,K)=>{const Z=_.column,F=te(T,Z),ye=te(K,Z),le=$(F,ye);if(le!==0)return le*(_.direction==="asc"?1:-1);const De=new Date(K.created_at).getTime()-new Date(T.created_at).getTime();return _.direction==="asc"?De:-De})},[e,g,_,W,n]),oe=_.column==="pipelineOrder"?"pipelineStatus":_.column,re=O=>{const q=O==="pipelineStatus"?"pipelineOrder":O;j(te=>te.column===q?{column:q,direction:te.direction==="asc"?"desc":"asc"}:{column:q,direction:"asc"})},Ne=O=>oe===O||_.column==="pipelineOrder"&&O==="pipelineStatus"?l.jsx("span",{className:"text-[11px] font-semibold text-gray-500",children:_.direction==="asc"?"":""}):l.jsx(P3,{className:"w-3 h-3 text-gray-300"});return l.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[l.jsxs("div",{className:"p-4 border-b border-gray-200 space-y-3",children:[l.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(E0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"text",value:g,onChange:O=>y(O.target.value),placeholder:"Search by client, property, city, or lead source...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>b(O=>!O),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition whitespace-nowrap",children:[l.jsx(FC,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Columns"}),l.jsx("span",{className:"sm:hidden",children:"Cols"})]}),l.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-4 py-2 bg-[rgb(0,122,255)] hover:bg-[rgb(0,110,230)] text-white rounded-lg transition-colors whitespace-nowrap",children:[l.jsx(gv,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Import Deals"}),l.jsx("span",{className:"sm:hidden",children:"Import"})]})]})]}),w&&l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[l.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["Visible Columns (",S.length," of ",Co.length,")"]}),l.jsx("p",{className:"text-xs text-gray-500",children:"Choose which deal fields appear in the table."})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:E,className:"px-3 py-1.5 text-xs font-medium text-gray-600 border border-gray-300 rounded-lg hover:bg-white",children:"Select All"}),l.jsx("button",{onClick:P,className:"px-3 py-1.5 text-xs font-medium text-gray-600 border border-gray-300 rounded-lg hover:bg-white",children:"Reset Defaults"}),l.jsx("button",{onClick:()=>b(!1),className:"px-3 py-1.5 text-xs font-medium text-blue-600",children:"Done"})]})]}),l.jsx("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:Co.map(O=>l.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 bg-white border border-gray-200 rounded-lg px-3 py-2",children:[l.jsx("input",{type:"checkbox",checked:S.includes(O.id),onChange:()=>k(O.id),className:"text-blue-600 rounded"}),l.jsx("span",{children:O.label})]},O.id))})]})]}),c.size>0&&l.jsxs("div",{className:"bg-sky-50 border-b border-sky-200 px-4 py-3 flex items-center justify-between",children:[l.jsxs("div",{className:"text-sm font-medium text-sky-900",children:[c.size," deal",c.size>1?"s":""," selected"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>f(!d),className:"px-3 py-1.5 bg-white border border-sky-300 text-sky-700 rounded-lg hover:bg-sky-50 transition flex items-center gap-2 text-sm",children:[l.jsx(H3,{className:"w-4 h-4"}),"Update Status"]}),l.jsxs("button",{onClick:ee,className:"px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded-lg transition flex items-center gap-2 text-sm",children:[l.jsx(Ei,{className:"w-4 h-4"}),"Delete"]})]})]}),d&&c.size>0&&l.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center gap-3",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Update status to:"}),l.jsxs("select",{value:h,onChange:O=>m(O.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent text-sm",children:[l.jsx("option",{value:"",children:"Select status..."}),t.map(O=>l.jsx("option",{value:O.id,children:O.name},O.id))]}),l.jsx("button",{onClick:B,disabled:!h,className:"px-4 py-1.5 bg-sky-600 hover:bg-sky-700 text-white rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Apply"}),l.jsx("button",{onClick:()=>{f(!1),m("")},className:"px-4 py-1.5 text-gray-600 hover:text-gray-800 text-sm",children:"Cancel"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-4 py-3 text-left",children:l.jsx("input",{type:"checkbox",checked:L.length>0&&c.size===L.length,onChange:Q,className:"w-4 h-4 text-sky-600 border-gray-300 rounded focus:ring-sky-500 cursor-pointer"})}),A.map(O=>l.jsx("th",{scope:"col",className:`px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider ${O.headerClassName||""}`,children:l.jsxs("button",{type:"button",onClick:()=>re(O.id),className:"flex items-center gap-1 text-left uppercase tracking-wider text-[11px]",children:[l.jsx("span",{children:O.label}),Ne(O.id)]})},O.id))]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:D,className:"px-4 py-8 text-center text-sm text-gray-500",children:"No deals yet. Create your first deal to get started!"})}):L.map(O=>l.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap",onClick:q=>q.stopPropagation(),children:l.jsx("input",{type:"checkbox",checked:c.has(O.id),onChange:()=>H(O.id),className:"w-4 h-4 text-sky-600 border-gray-300 rounded focus:ring-sky-500 cursor-pointer"})}),A.map(q=>l.jsx("td",{className:q.cellClassName||"px-4 py-4 text-sm text-gray-900 cursor-pointer",onClick:()=>!q.disableClick&&r(O),children:q.render({deal:O,onDealClick:r,calculateNetCommission:n,getDaysInStage:a,getStatusForDeal:I})},q.id))]},O.id))})]})}),v&&l.jsx(EZ,{onClose:()=>x(!1),onSuccess:()=>{x(!1),o==null||o()}})]})}function AZ({dealId:e}){const{user:t}=kt(),[r,n]=p.useState([]),[a,i]=p.useState(!0),[s,o]=p.useState(!1),[c,u]=p.useState(null),[d,f]=p.useState(!1),[h,m]=p.useState("");p.useEffect(()=>{g()},[e]);const g=async()=>{try{const{data:_,error:j}=await Y.from("deal_notes").select("*").eq("deal_id",e).order("created_at",{ascending:!1});if(j)throw j;const S=(_||[]).map(N=>{var k,E;return{...N,user_email:t==null?void 0:t.email,user_name:N.user_id===(t==null?void 0:t.id)?((k=t==null?void 0:t.user_metadata)==null?void 0:k.name)||((E=t==null?void 0:t.email)==null?void 0:E.split("@")[0])||"You":"Team Member"}});n(S)}catch(_){console.error("Error loading notes:",_)}finally{i(!1)}},y=async()=>{if(!(!t||!h.trim())){o(!0);try{if(c){const{error:_}=await Y.from("deal_notes").update({content:h,updated_at:new Date().toISOString()}).eq("id",c.id);if(_)throw _}else{const{error:_}=await Y.from("deal_notes").insert({deal_id:e,user_id:t.id,content:h});if(_)throw _}m(""),u(null),f(!1),g()}catch(_){console.error("Error saving note:",_)}finally{o(!1)}}},v=async _=>{if(confirm("Are you sure you want to delete this note?"))try{const{error:j}=await Y.from("deal_notes").delete().eq("id",_);if(j)throw j;g()}catch(j){console.error("Error deleting note:",j)}},x=_=>{u(_),m(_.content),f(!0)},w=()=>{u(null),m(""),f(!1)},b=_=>{const j=new Date(_),N=new Date().getTime()-j.getTime(),k=Math.floor(N/6e4),E=Math.floor(N/36e5),P=Math.floor(N/864e5);return k<1?"Just now":k<60?`${k}m ago`:E<24?`${E}h ago`:P<7?`${P}d ago`:j.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};return a?l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsx(At,{className:"w-6 h-6 animate-spin text-[rgb(0,122,255)]"})}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(K3,{className:"w-5 h-5 text-gray-600",strokeWidth:2}),l.jsx("h3",{className:"font-semibold text-gray-900",children:"Notes"}),l.jsxs("span",{className:"text-sm text-gray-500",children:["(",r.length,")"]})]}),!d&&l.jsxs("button",{onClick:()=>f(!0),className:"hig-btn-secondary text-sm py-2",children:[l.jsx(Ma,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Add Note"})]})]}),d&&l.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200/60",children:[l.jsx("textarea",{value:h,onChange:_=>m(_.target.value),placeholder:"Write a note...",className:"hig-input min-h-[100px] resize-y",autoFocus:!0}),l.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[l.jsx("button",{onClick:w,className:"hig-btn-secondary text-sm py-2",disabled:s,children:"Cancel"}),l.jsx("button",{onClick:y,disabled:s||!h.trim(),className:"hig-btn-primary text-sm py-2",children:s?l.jsxs(l.Fragment,{children:[l.jsx(At,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving..."})]}):l.jsxs("span",{children:[c?"Update":"Add"," Note"]})})]})]}),r.length===0?l.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:"No notes yet. Add your first note to track important information."}):l.jsx("div",{className:"space-y-3",children:r.map(_=>l.jsxs("div",{className:"bg-white border border-gray-200/60 rounded-xl p-4 hover:shadow-sm transition-all",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"flex items-center gap-2 text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-gray-900",children:_.user_name}),l.jsx("span",{className:"text-gray-400",children:""}),l.jsx("span",{className:"text-gray-500",children:b(_.created_at)}),_.updated_at!==_.created_at&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-gray-400",children:""}),l.jsx("span",{className:"text-gray-500 text-xs",children:"edited"})]})]})}),_.user_id===(t==null?void 0:t.id)&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:()=>x(_),className:"p-1.5 text-gray-600 hover:text-[rgb(0,122,255)] hover:bg-blue-50 rounded-lg transition",title:"Edit note",children:l.jsx(RC,{className:"w-4 h-4",strokeWidth:2})}),l.jsx("button",{onClick:()=>v(_.id),className:"p-1.5 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete note",children:l.jsx(Ei,{className:"w-4 h-4",strokeWidth:2})})]})]}),l.jsx("p",{className:"text-[15px] text-gray-700 whitespace-pre-wrap leading-relaxed",children:_.content})]},_.id))})]})}function JD({deal:e,onClose:t,onDelete:r}){const{user:n,roleInfo:a}=kt(),i=(a==null?void 0:a.teamId)||null,[s,o]=p.useState(!1),[c,u]=p.useState(!1),[d,f]=p.useState([]),[h,m]=p.useState([]),[g,y]=p.useState([]),[v,x]=p.useState(""),[w,b]=p.useState(""),[_,j]=p.useState(!1),[S,N]=p.useState(null),[k,E]=p.useState(""),[P,A]=p.useState(""),[D,H]=p.useState((e==null?void 0:e.status)==="dead"),[Q,ee]=p.useState((e==null?void 0:e.archived_reason)||""),[B,W]=p.useState({client_name:(e==null?void 0:e.client_name)||"",client_phone:(e==null?void 0:e.client_phone)||"",client_email:(e==null?void 0:e.client_email)||"",property_address:(e==null?void 0:e.property_address)||"",city:(e==null?void 0:e.city)||"",state:(e==null?void 0:e.state)||"",zip:(e==null?void 0:e.zip)||"",deal_type:(e==null?void 0:e.deal_type)||"buyer",lead_source_id:(e==null?void 0:e.lead_source_id)||"",pipeline_status_id:(e==null?void 0:e.pipeline_status_id)||"",expected_sale_price:(e==null?void 0:e.expected_sale_price)||"",actual_sale_price:(e==null?void 0:e.actual_sale_price)||"",gross_commission_rate:(e==null?void 0:e.gross_commission_rate)||.03,brokerage_split_rate:(e==null?void 0:e.brokerage_split_rate)||.2,referral_out_rate:(e==null?void 0:e.referral_out_rate)||"",referral_in_rate:(e==null?void 0:e.referral_in_rate)||"",transaction_fee:(e==null?void 0:e.transaction_fee)||"",close_date:(e==null?void 0:e.close_date)||""});p.useEffect(()=>{M(),L(),e&&(oe(),I()),H((e==null?void 0:e.status)==="dead"),ee((e==null?void 0:e.archived_reason)||"")},[e,i,n==null?void 0:n.id]),p.useEffect(()=>{D&&W(C=>({...C,pipeline_status_id:""}))},[D]);const I=async()=>{if(!e)return;const{data:C,error:V}=await Y.from("deal_notes").select("content").eq("deal_id",e.id).ilike("content","Archive reason:%").order("created_at",{ascending:!1}).limit(1);if(!V&&C&&C.length){const pe=(C[0].content||"").replace(/^Archive reason:\s*/i,"").trim();ee(pe)}},M=async()=>{if(!n)return;const{data:C,error:V}=i?await Y.from("lead_sources").select("*").eq("team_id",i).order("name"):{data:null,error:null};if(V)return;const{data:J}=C!=null&&C.length?{data:C}:await Y.from("lead_sources").select("*").eq("user_id",n.id).order("name");J&&f(J)},L=async()=>{if(!n)return;const{data:C,error:V}=i?await Y.from("pipeline_statuses").select("*").eq("team_id",i).order("sort_order"):{data:null,error:null};if(V)return;const{data:J}=C!=null&&C.length?{data:C}:await Y.from("pipeline_statuses").select("*").eq("user_id",n.id).order("sort_order");J&&(m(J),!e&&J.length>0&&!B.pipeline_status_id&&W(pe=>({...pe,pipeline_status_id:J[0].id})))},oe=async()=>{if(!e||!n)return;const{data:C}=await Y.from("tasks").select("*").eq("deal_id",e.id).eq("user_id",n.id);if(C){const V=C.sort((J,pe)=>!J.due_date&&!pe.due_date?0:J.due_date?pe.due_date?new Date(J.due_date).getTime()-new Date(pe.due_date).getTime():1:-1);y(V)}},re=C=>{W({...B,lead_source_id:C});const V=d.find(J=>J.id===C);V&&!e&&W(J=>({...J,lead_source_id:C,brokerage_split_rate:V.brokerage_split_rate}))},Ne=async C=>{if(C.preventDefault(),!n)return;o(!0);const V=h.find(Re=>Re.id===B.pipeline_status_id);if(!B.lead_source_id){alert("Please select a lead source"),o(!1);return}if(D&&!Q){alert("Please choose an archive reason."),o(!1);return}const J={...B,user_id:n.id,lead_source_id:B.lead_source_id,pipeline_status_id:D?null:B.pipeline_status_id||null,status:D?"dead":V?(V.slug||V.name||"new_lead").toLowerCase():"new_lead",expected_sale_price:Number(B.expected_sale_price)||0,actual_sale_price:B.actual_sale_price?Number(B.actual_sale_price):null,referral_out_rate:B.referral_out_rate?Number(B.referral_out_rate):null,referral_in_rate:B.referral_in_rate?Number(B.referral_in_rate):null,transaction_fee:Number(B.transaction_fee)||0,close_date:B.close_date||null,closed_at:D?new Date().toISOString():(e==null?void 0:e.closed_at)||null,archived_reason:D?Q:null};let pe=(e==null?void 0:e.id)||null;if(e)await Y.from("deals").update(J).eq("id",e.id),pe=e.id;else{const{data:Re,error:at}=await Y.from("deals").insert(J).select("id").single();!at&&(Re!=null&&Re.id)&&(pe=Re.id)}D&&pe&&await Y.from("deal_notes").insert({deal_id:pe,user_id:n.id,content:`Archive reason: ${Q}`}),o(!1),t()},O=async()=>{!v.trim()||!e||!n||(await Y.from("tasks").insert({deal_id:e.id,user_id:n.id,title:v,due_date:w||null,completed:!1}),x(""),b(""),j(!1),oe())},q=async(C,V)=>{await Y.from("tasks").update({completed:!V}).eq("id",C),oe()},te=C=>{N(C.id),E(C.title),A(C.due_date||"")},$=async()=>{!k.trim()||!S||(await Y.from("tasks").update({title:k,due_date:P||null}).eq("id",S),N(null),E(""),A(""),oe())},G=async C=>{await Y.from("tasks").delete().eq("id",C),oe()},T=()=>{N(null),E(""),A("")},K=async()=>{e&&(o(!0),await Y.from("deals").delete().eq("id",e.id),o(!1),r&&r(),t())},Z=()=>{if(!e)return;const C={client_name:B.client_name,client_email:B.client_email,client_phone:B.client_phone,property_address:B.property_address,city:B.city,state:B.state,zip:B.zip,deal_type:B.deal_type,expected_sale_price:B.expected_sale_price,actual_sale_price:B.actual_sale_price},V=new URLSearchParams({source:"pipelineiq",...Object.entries(C).reduce((J,[pe,Re])=>(Re!=null&&Re!==""&&(J[pe]=String(Re)),J),{})});window.open(`/contractscribe?${V.toString()}`,"_blank","noopener,noreferrer")},ye=(Number(B.actual_sale_price)||Number(B.expected_sale_price)||0)*B.gross_commission_rate,le=ye*(1-B.brokerage_split_rate),De=Number(B.referral_out_rate)||0,Ae=Number(B.referral_in_rate)||0,qe=Number(B.transaction_fee)||0,Le=De?le*(1-De):le,ze=(Ae?Le*(1+Ae):Le)-qe;return l.jsxs(l.Fragment,{children:[c&&l.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-[60]",children:l.jsxs("div",{className:"hig-card max-w-md w-full p-6",children:[l.jsx("h3",{className:"hig-text-heading mb-2",children:"Delete Deal"}),l.jsx("p",{className:"hig-text-body text-gray-600 mb-6",children:"Are you sure you want to delete this deal? This action cannot be undone."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>u(!1),className:"hig-btn-secondary",children:"Cancel"}),l.jsx("button",{onClick:K,disabled:s,className:"bg-[rgb(255,59,48)] hover:bg-red-600 active:bg-red-700 text-white font-medium px-5 py-2 rounded-lg transition-colors duration-150 disabled:opacity-40 text-[15px] min-h-[44px] inline-flex items-center justify-center gap-2",children:s?"Deleting...":"Delete"})]})]})}),l.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"hig-card max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200/60 px-6 py-5 flex justify-between items-center backdrop-blur-md bg-white/95",children:[l.jsx("h2",{className:"hig-text-display",children:e?"Edit Deal":"New Deal"}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-150",children:l.jsx(Ss,{className:"w-5 h-5 text-gray-600",strokeWidth:2})})]}),l.jsxs("form",{onSubmit:Ne,className:"p-6 space-y-8",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"hig-text-heading mb-4",children:"Client Information"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Client Name *"}),l.jsx("input",{type:"text",value:B.client_name,onChange:C=>W({...B,client_name:C.target.value}),className:"hig-input",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Phone"}),l.jsx("input",{type:"tel",value:B.client_phone,onChange:C=>W({...B,client_phone:C.target.value}),className:"hig-input"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Email"}),l.jsx("input",{type:"email",value:B.client_email,onChange:C=>W({...B,client_email:C.target.value}),className:"hig-input"})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"hig-text-heading mb-4",children:"Property Details"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"hig-label",children:"Property Address"}),l.jsx("input",{type:"text",value:B.property_address,onChange:C=>W({...B,property_address:C.target.value}),className:"hig-input",placeholder:"e.g., 123 Main St"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"City"}),l.jsx("input",{type:"text",value:B.city,onChange:C=>W({...B,city:C.target.value}),className:"hig-input"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"State"}),l.jsx("input",{type:"text",value:B.state,onChange:C=>W({...B,state:C.target.value}),className:"hig-input",maxLength:2,placeholder:"CA"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"ZIP"}),l.jsx("input",{type:"text",value:B.zip,onChange:C=>W({...B,zip:C.target.value}),className:"hig-input",maxLength:10})]})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"hig-text-heading mb-4",children:"Deal Configuration"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Deal Type *"}),l.jsxs("select",{value:B.deal_type,onChange:C=>W({...B,deal_type:C.target.value}),className:"hig-input",children:[l.jsx("option",{value:"buyer",children:"Buyer"}),l.jsx("option",{value:"seller",children:"Seller"}),l.jsx("option",{value:"buyer_and_seller",children:"Buyer & Seller"}),l.jsx("option",{value:"renter",children:"Renter"}),l.jsx("option",{value:"landlord",children:"Landlord"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Lead Source *"}),l.jsxs("select",{value:B.lead_source_id,onChange:C=>re(C.target.value),className:"hig-input",required:!0,children:[l.jsx("option",{value:"",children:"Select a source"}),d.map(C=>l.jsxs("option",{value:C.id,children:[C.name," (",(C.brokerage_split_rate*100).toFixed(0),"% split)"]},C.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Pipeline Status"}),l.jsxs("select",{value:B.pipeline_status_id,onChange:C=>W({...B,pipeline_status_id:C.target.value}),className:"hig-input",children:[l.jsx("option",{value:"",children:"Select a status"}),h.map(C=>l.jsx("option",{value:C.id,children:C.name},C.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Close Date"}),l.jsx("input",{type:"date",value:B.close_date,onChange:C=>W({...B,close_date:C.target.value}),className:"hig-input"})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"hig-text-heading mb-4",children:"Financial Details"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Expected Sale Price *"}),l.jsx("input",{type:"number",value:B.expected_sale_price,onChange:C=>W({...B,expected_sale_price:C.target.value}),className:"hig-input",placeholder:"500,000",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Actual Sale Price"}),l.jsx("input",{type:"number",value:B.actual_sale_price,onChange:C=>W({...B,actual_sale_price:C.target.value}),className:"hig-input",placeholder:"505,000"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Commission Rate (%)"}),l.jsx("input",{type:"number",step:"0.01",value:B.gross_commission_rate*100,onChange:C=>W({...B,gross_commission_rate:parseFloat(C.target.value)/100||0}),className:"hig-input"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Brokerage Split (% to broker)"}),l.jsx("input",{type:"number",step:"0.01",value:B.brokerage_split_rate*100,onChange:C=>W({...B,brokerage_split_rate:parseFloat(C.target.value)/100||0}),className:"hig-input"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Transaction Fee"}),l.jsx("input",{type:"number",value:B.transaction_fee,onChange:C=>W({...B,transaction_fee:C.target.value}),className:"hig-input",placeholder:"500"})]})]})]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 border border-gray-200/60",children:[l.jsx("h3",{className:"hig-text-heading mb-4",children:"Commission Breakdown"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"hig-text-body text-gray-600",children:"Gross Commission"}),l.jsxs("span",{className:"hig-text-body font-medium",children:["$",ye.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"hig-text-body text-gray-600",children:"After Brokerage Split"}),l.jsxs("span",{className:"hig-text-body font-medium",children:["$",le.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"hig-text-body text-gray-600",children:"Transaction Fee"}),l.jsxs("span",{className:"hig-text-body font-medium text-gray-500",children:["-$",qe.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),l.jsx("div",{className:"hig-divider my-3"}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"hig-text-heading",children:"Net to Agent"}),l.jsxs("span",{className:"text-xl font-semibold text-[rgb(52,199,89)]",children:["$",ze.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),e&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(mv,{className:"w-5 h-5 text-gray-600",strokeWidth:2}),l.jsx("h3",{className:"font-semibold text-gray-900",children:"Tasks"}),l.jsxs("span",{className:"text-sm text-gray-500",children:["(",g.length,")"]})]}),!_&&l.jsxs("button",{type:"button",onClick:()=>j(!0),className:"hig-btn-secondary text-sm py-2",children:[l.jsx(Ma,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Add Task"})]})]}),_&&l.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200/60",children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{id:"task-title-input",type:"text",value:v,onChange:C=>x(C.target.value),placeholder:"Task description...",className:"hig-input",autoFocus:!0,onKeyPress:C=>{C.key==="Enter"&&(C.preventDefault(),O())}}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("input",{type:"date",value:w,onChange:C=>b(C.target.value),placeholder:"Due date (optional)",className:"hig-input flex-1"}),l.jsx("button",{type:"button",onClick:()=>{j(!1),x(""),b("")},className:"hig-btn-secondary text-sm py-2",children:"Cancel"}),l.jsx("button",{type:"button",onClick:O,disabled:!v.trim(),className:"hig-btn-primary text-sm py-2",children:l.jsx("span",{children:"Add Task"})})]})]})}),l.jsx("div",{className:"space-y-2",children:g.map(C=>{const V=C.due_date&&!C.completed&&new Date(C.due_date)<new Date,J=C.due_date&&!C.completed&&new Date(C.due_date).toDateString()===new Date().toDateString();return S===C.id?l.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200/60",children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{type:"text",value:k,onChange:pe=>E(pe.target.value),placeholder:"Task description...",className:"hig-input",autoFocus:!0,onKeyPress:pe=>{pe.key==="Enter"&&(pe.preventDefault(),$())}}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("input",{type:"date",value:P,onChange:pe=>A(pe.target.value),placeholder:"Due date (optional)",className:"hig-input flex-1"}),l.jsx("button",{type:"button",onClick:T,className:"hig-btn-secondary text-sm py-2",children:"Cancel"}),l.jsx("button",{type:"button",onClick:$,disabled:!k.trim(),className:"hig-btn-primary text-sm py-2",children:"Save"})]})]})},C.id):l.jsx("div",{className:"group flex items-center p-3 bg-white border border-gray-200/60 rounded-xl hover:shadow-sm transition-all",children:l.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[l.jsx("button",{type:"button",onClick:()=>q(C.id,C.completed),className:`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-all duration-150 ${C.completed?"bg-[rgb(52,199,89)] border-[rgb(52,199,89)]":"border-gray-300 hover:border-[rgb(52,199,89)]"}`,children:C.completed&&l.jsx(_c,{className:"w-3 h-3 text-white",strokeWidth:2.5})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("span",{className:C.completed?"line-through text-gray-500 hig-text-body":"text-gray-900 hig-text-body",children:C.title}),C.due_date&&l.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[l.jsx(jo,{className:"w-3.5 h-3.5 text-gray-400",strokeWidth:2}),l.jsxs("span",{className:`hig-text-caption ${V?"text-[rgb(255,59,48)] font-medium":J?"text-[rgb(255,149,0)] font-medium":C.completed?"text-gray-400":"text-gray-500"}`,children:[V?"Overdue: ":J?"Due today: ":"",new Date(C.due_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[l.jsx("button",{type:"button",onClick:()=>te(C),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",title:"Edit task",children:l.jsx(RC,{className:"w-4 h-4 text-gray-600",strokeWidth:2})}),l.jsx("button",{type:"button",onClick:()=>G(C.id),className:"p-1.5 hover:bg-red-50 rounded-lg transition-colors",title:"Delete task",children:l.jsx(Ei,{className:"w-4 h-4 text-red-600",strokeWidth:2})})]})]})},C.id)})})]}),e&&l.jsx("div",{className:"pt-8 border-t border-gray-200/60",children:l.jsx(AZ,{dealId:e.id})}),l.jsx("div",{className:"rounded-xl border border-gray-200/70 bg-white/90 p-5 shadow-sm",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-gray-100 border border-gray-200",children:l.jsx(mv,{className:"h-5 w-5 text-gray-700"})}),l.jsxs("div",{className:"flex-1 space-y-3",children:[l.jsx("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-gray-900",children:"Archive this deal (Closed Lost)"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Use when a deal falls through, goes MIA, or stops responding. Well remove it from the active pipeline and track it for KPIs."})]})}),l.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3 md:items-center",children:[l.jsxs("label",{className:"inline-flex items-center gap-2 md:justify-self-start",children:[l.jsx("span",{className:"text-sm text-gray-700",children:"Archived"}),l.jsx("input",{type:"checkbox",checked:D,onChange:C=>H(C.target.checked),className:"h-5 w-5 rounded border-gray-300 text-[rgb(0,122,255)] focus:ring-[rgb(0,122,255)]"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"hig-label mb-1",children:"Archive reason"}),l.jsxs("select",{value:Q,onChange:C=>ee(C.target.value),className:"hig-input",disabled:!D,children:[l.jsx("option",{value:"",children:"Select a reason"}),l.jsx("option",{value:"No Response / Ghosted",children:"No Response / Ghosted"}),l.jsx("option",{value:"Client Not Ready / Timeline Changed",children:"Client Not Ready / Timeline Changed"}),l.jsx("option",{value:"Chose Another Agent",children:"Chose Another Agent"}),l.jsx("option",{value:"Financing Didnt Work Out",children:"Financing Didnt Work Out"}),l.jsx("option",{value:"Deal Fell Through",children:"Deal Fell Through"})]})]})]})]})]})}),l.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200/60",children:[l.jsx("div",{className:"flex gap-3",children:e&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{type:"button",onClick:Z,className:"hig-btn-secondary gap-2",children:[l.jsx(AC,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Generate Offer"})]}),l.jsxs("button",{type:"button",onClick:()=>u(!0),className:"bg-white hover:bg-red-50 active:bg-red-100 text-[rgb(255,59,48)] font-medium px-5 py-2 rounded-lg border border-red-200 transition-colors duration-150 text-[15px] min-h-[44px] inline-flex items-center justify-center gap-2",children:[l.jsx(Ei,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Delete"})]})]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"hig-btn-secondary",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:s,className:"hig-btn-primary",children:s?"Saving...":e?"Update Deal":"Create Deal"})]})]})]})]})})]})}const Fc=[{name:"Snow",value:"#F9FAFB"},{name:"Pearl",value:"#F3F4F6"},{name:"Mist",value:"#E5E7EB"},{name:"Silver Fog",value:"#D1D5DB"},{name:"Ice Blue",value:"#E8F1FF"},{name:"Cloud Blue",value:"#D6E7FF"},{name:"Sky Wash",value:"#C3DBFF"},{name:"Pale Azure",value:"#AECFFF"},{name:"Soft Blue",value:"#98C3FF"},{name:"Bluebell",value:"#87B6F9"},{name:"Foggy Indigo",value:"#AEB8D9"},{name:"Lavender Mist",value:"#F2EDFF"},{name:"Lilac Whisper",value:"#E8E2FF"},{name:"Soft Violet",value:"#D8D0FF"},{name:"Periwinkle Light",value:"#C7C3FF"},{name:"Muted Orchid",value:"#B7B2F2"},{name:"Barely Purple",value:"#DDD6F6"},{name:"Blush Tint",value:"#FFE8F3"},{name:"Pink Dew",value:"#FFD6E8"},{name:"Rosewater",value:"#F9C8DB"},{name:"Petal Pink",value:"#F5B8CD"},{name:"Soft Berry",value:"#E8A7C3"},{name:"Muted Magenta",value:"#D3A6C9"},{name:"Rose Mist",value:"#FFE5E5"},{name:"Pale Coral",value:"#FFD4D4"},{name:"Soft Clay",value:"#F5B8B8"},{name:"Muted Red",value:"#EFA9A9"},{name:"Peach Wash",value:"#FFF1E6"},{name:"Apricot Mist",value:"#FFE3CC"},{name:"Soft Tangerine",value:"#FFD1AE"},{name:"Warm Peach",value:"#F7C39C"},{name:"Muted Orange",value:"#E7B690"},{name:"Sunhaze",value:"#FFF8DD"},{name:"Lemon Tint",value:"#FFF2BB"},{name:"Buttercream",value:"#FFECA1"},{name:"Golden Mist",value:"#FFE38C"},{name:"Muted Amber",value:"#F6D67C"},{name:"Mint Wash",value:"#E6FFF5"},{name:"Soft Mint",value:"#CFF9EA"},{name:"Pale Green",value:"#B7F0D9"},{name:"Seafoam",value:"#A1E8CC"},{name:"Soft Teal",value:"#8EDCC0"},{name:"Muted Green",value:"#7BCDB1"},{name:"Aqua Mist",value:"#E5FAFF"},{name:"Arctic Blue",value:"#CDF2FA"},{name:"Icy Teal",value:"#B5E8F0"},{name:"Soft Cyan",value:"#A1DEEA"},{name:"Muted Teal",value:"#8DCFD9"},{name:"Sandstone",value:"#F7EFE6"},{name:"Driftwood",value:"#EADFD2"},{name:"Clay Neutral",value:"#DDCEBF"},{name:"Soft Taupe",value:"#CFC1B2"}],eo=Fc[0].value;function DS({value:e,onChange:t}){const r=e?Fh(e):eo,n=r.toLowerCase(),a=Fc.find(i=>i.value.toLowerCase()===n);return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-gray-200/70 bg-white/80 p-4 shadow-inner",children:[l.jsxs("div",{className:"relative flex h-12 w-12 items-center justify-center rounded-2xl border border-white/40 shadow",children:[l.jsx("span",{className:"absolute inset-0 rounded-2xl",style:{backgroundColor:r}}),l.jsx(_c,{className:"relative h-5 w-5 text-white drop-shadow",strokeWidth:2.5})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Selected color"}),l.jsx("span",{className:"text-xs text-gray-500",children:a?"From palette":"Custom"})]})]}),l.jsx("div",{className:"grid grid-cols-6 gap-3 sm:grid-cols-8",children:Fc.map(i=>{const s=i.value.toLowerCase()===n;return l.jsxs("button",{type:"button",onClick:()=>t(i.value),className:`relative h-10 w-10 rounded-2xl border transition focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--app-accent)]/40 ${s?"border-[var(--app-accent)] shadow-[0_8px_18px_rgba(15,23,42,0.15)]":"border-white/70 shadow-inner hover:border-gray-300"}`,style:{backgroundColor:i.value},"aria-label":`${i.name} color`,children:[s&&l.jsx(_c,{className:"absolute inset-0 m-auto h-4 w-4 text-white drop-shadow",strokeWidth:2.5}),l.jsx("span",{className:"sr-only",children:i.name})]},i.value)})})]})}const TZ=e=>Fc[e%Fc.length].value,DZ={"new lead":"#E8F1FF",contacted:"#AECFFF","warm lead":"#FFF1E6","hot lead":"#FFD1AE","showing scheduled":"#98C3FF","offer submitted":"#87B6F9",inspection:"#B7F0D9",appraisal:"#C3DBFF","under contract":"#8EDCC0",financing:"#FFE38C","title review":"#8DCFD9","clear to close":"#CFF9EA",closed:"#E6FFF5",lost:"#FFE5E5",lead:"#C3DBFF","in progress":"#98C3FF",pending:"#8EDCC0","advanced transaction pipeline":"#E5FAFF"},sg=(e,t)=>{const r=DZ[e.trim().toLowerCase()];return r||TZ(t)},IZ=e=>`pipeline-status-color-overrides:${e}`;function QD(){const{user:e,roleInfo:t}=kt(),[r,n]=p.useState([]),[a,i]=p.useState(!0),[s,o]=p.useState(null),[c,u]=p.useState({}),d=p.useRef({}),f=(t==null?void 0:t.teamId)||null,h=e?IZ(e.id):null,m=p.useCallback(()=>{if(typeof window>"u"||!h)return{};try{const E=window.localStorage.getItem(h);if(!E)return{};const P=JSON.parse(E);if(P&&typeof P=="object")return P}catch(E){console.warn("Failed to read status color overrides",E)}return{}},[h]),g=p.useCallback(E=>{typeof window>"u"||!h||window.localStorage.setItem(h,JSON.stringify(E))},[h]),y=p.useCallback((E,P)=>{var D;const A=(D=E.color)==null?void 0:D.trim();return A||sg(E.name,P)},[]),v=p.useCallback(async()=>{if(!e){n([]),i(!1);return}i(!0);try{const{data:E,error:P}=f?await Y.from("pipeline_statuses").select("*").eq("team_id",f).order("sort_order",{ascending:!0}):{data:null,error:null};if(P)throw P;const A=!!(E!=null&&E.length),{data:D,error:H}=A?{data:null,error:null}:await Y.from("pipeline_statuses").select("*").eq("user_id",e.id).order("sort_order",{ascending:!0});if(H)throw H;const Q=A?E:D;if(!Q)throw new Error("Failed to load pipeline statuses");const ee=Q||[],B=[],W=m(),I={},M=ee.map((L,oe)=>{const re=y(L,oe);I[L.id]=re;const Ne=W[L.id];return!L.color&&re&&B.push({id:L.id,color:re}),{...L,color:Ne||re}});B.length>0&&await Promise.all(B.map(L=>Y.from("pipeline_statuses").update({color:L.color}).eq("id",L.id))),d.current=I,u(W),n(M),o(null)}catch(E){console.error("Error loading pipeline statuses:",E),o(E instanceof Error?E.message:"Failed to load statuses")}finally{i(!1)}},[e,f,m,y]);return p.useEffect(()=>{v()},[v]),{statuses:r,loading:a,error:s,colorOverrides:c,addStatus:async(E,P)=>{if(!e)return;const A=Math.max(...r.map(B=>B.sort_order),0),D=E.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),H=(P==null?void 0:P.trim())||sg(E,A),{data:Q,error:ee}=await Y.from("pipeline_statuses").insert({user_id:e.id,team_id:f,name:E,slug:D,sort_order:A+1,color:H,is_default:!1}).select().single();if(ee)throw ee;return await v(),Q},updateStatus:async(E,P)=>{const{error:A}=await Y.from("pipeline_statuses").update(P).eq("id",E);if(A)throw A;await v()},deleteStatus:async E=>{const{data:P}=await Y.from("deals").select("id",{count:"exact",head:!0}).eq("pipeline_status_id",E);if(P&&P.count>0)throw new Error("Cannot delete status with active deals. Please reassign deals first.");const{error:A}=await Y.from("pipeline_statuses").delete().eq("id",E);if(A)throw A;await v()},reorderStatuses:async E=>{const P=E.map((A,D)=>({id:A.id,sort_order:D+1}));for(const A of P)await Y.from("pipeline_statuses").update({sort_order:A.sort_order}).eq("id",A.id);await v()},applyTemplate:async E=>{if(!e)return;const{error:P}=await Y.rpc("apply_pipeline_template",{p_user_id:e.id,p_template_name:E});if(P)throw P;f&&await Y.from("pipeline_statuses").update({team_id:f}).eq("user_id",e.id).is("team_id",null);const{error:A}=await Y.rpc("migrate_user_deals_to_pipeline_statuses",{p_user_id:e.id});A&&console.error("Error migrating deals:",A),await v()},createCustomWorkflow:async E=>{if(!e)return;const P=E.map(B=>B.trim()).filter(B=>B.length>0);if(P.length===0)throw new Error("Please provide at least one stage.");const A=f?{team_id:f}:{user_id:e.id},{error:D}=await Y.from("pipeline_statuses").delete().match(A);if(D)throw D;const H=P.map((B,W)=>({user_id:e.id,team_id:f,name:B,slug:B.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),sort_order:W+1,color:sg(B,W),is_default:W===0})),{error:Q}=await Y.from("pipeline_statuses").insert(H);if(Q)throw Q;const{error:ee}=await Y.rpc("migrate_user_deals_to_pipeline_statuses",{p_user_id:e.id});ee&&console.error("Error migrating deals after custom workflow:",ee),await v()},reload:v,setPersonalStatusColor:(E,P)=>{if(!h)return;const D={...m(),[E]:P};g(D),u(D),n(H=>H.map(Q=>Q.id===E?{...Q,color:P}:Q))},clearPersonalStatusColor:E=>{if(!h)return;const P=m();if(!(E in P))return;const{[E]:A,...D}=P;g(D),u(D),n(H=>H.map(Q=>{if(Q.id!==E)return Q;const ee=d.current[E]||y(Q,(Q.sort_order||1)-1);return{...Q,color:ee}}))}}}function RZ(){const[e,t]=p.useState([]),[r,n]=p.useState(!0);return p.useEffect(()=>{(async()=>{const{data:i,error:s}=await Y.from("pipeline_templates").select("*").eq("is_system",!0).order("name");!s&&i&&t(i),n(!1)})()},[]),{templates:e,loading:r}}const MZ={"Basic Pipeline":{description:"Simple 6-stage pipeline ideal for new agents",stages:["New Lead","Contacted","Showing Scheduled","Offer Submitted","Under Contract","Closed"]},"Advanced Transaction Pipeline":{description:"Comprehensive 13-stage pipeline covering all transaction phases",stages:["New Lead","Warm Lead","Hot Lead","Showing Scheduled","Offer Submitted","Inspection","Appraisal","Under Contract","Financing","Title Review","Clear to Close","Closed","Lost"]},Minimalist:{description:"Streamlined 4-stage pipeline for quick deal tracking",stages:["Lead","In Progress","Pending","Closed"]}};function ZD({onClose:e,onSelect:t,onCreateCustomWorkflow:r,title:n="Choose Your Pipeline Workflow"}){const{templates:a}=RZ(),[i,s]=p.useState(null),[o,c]=p.useState(!1),[u,d]=p.useState(["New Lead","Contacted","Closed"]),[f,h]=p.useState(""),[m,g]=p.useState(!1),[y,v]=p.useState(null),x=async()=>{if(o){if(!r){v("Custom workflows are not supported here.");return}if(u.length<2){v("Add at least two stages to create a custom workflow.");return}g(!0),v(null);try{await r(u),e()}catch(w){console.error("Error creating custom workflow:",w),v(w instanceof Error?w.message:"Failed to create workflow")}finally{g(!1)}return}if(i){g(!0),v(null);try{await t(i),e()}catch(w){console.error("Error applying template:",w),v(w instanceof Error?w.message:"Failed to apply template")}finally{g(!1)}}};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:l.jsxs("div",{className:"app-surface w-full max-w-4xl max-h-[92vh] overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 px-6 py-5",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-500",children:"Pipeline"}),l.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:n}),l.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Start from a proven template or create a custom workflow tailored to your team."})]}),l.jsx("button",{onClick:e,className:"rounded-full border border-gray-200/80 bg-white p-2 text-gray-500 hover:text-gray-900",children:l.jsx(Ss,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-5 space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Recommended workflows"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Choose the pipeline structure that mirrors your current process."})]}),r&&l.jsxs("button",{onClick:()=>c(w=>!w),className:"inline-flex items-center gap-2 rounded-2xl border border-white/60 bg-white px-4 py-2 text-sm font-semibold text-gray-700 shadow-[0_2px_8px_rgba(15,23,42,0.08)] transition hover:border-[var(--app-accent)]/30 hover:text-[var(--app-accent)]",children:[l.jsx(Ma,{className:"h-4 w-4"}),"Custom workflow"]})]}),o?l.jsxs("div",{className:"rounded-2xl border border-[var(--app-border)] bg-white/90 p-5 shadow-inner",children:[l.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Custom workflow"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Define the stages that reflect your teams unique process. Drag to reorder later in settings."}),l.jsxs("div",{className:"mt-4 space-y-3",children:[u.map((w,b)=>l.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-gray-100 bg-gray-50 px-3 py-2",children:[l.jsxs("span",{className:"text-xs font-semibold text-gray-500",children:["Stage ",b+1]}),l.jsx("span",{className:"flex-1 text-sm font-medium text-gray-900",children:w}),l.jsx("button",{onClick:()=>d(_=>_.filter((j,S)=>S!==b)),className:"text-gray-400 hover:text-red-500",type:"button",children:l.jsx(Ei,{className:"h-4 w-4"})})]},w)),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{value:f,onChange:w=>h(w.target.value),placeholder:"Add a stage...",className:"hig-input flex-1 text-sm"}),l.jsx("button",{onClick:()=>{f.trim()&&(d(w=>[...w,f.trim()]),h(""))},className:"hig-btn-primary",type:"button",children:"Add"})]})]})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.filter(w=>w.name!=="Buyer/Seller Split Pipeline").map(w=>{const b=MZ[w.name],_=i===w.name;return l.jsxs("button",{onClick:()=>s(w.name),className:`rounded-2xl border px-5 py-4 text-left transition ${_?"border-[var(--app-accent)]/40 bg-[var(--app-surface-muted)] shadow-[inset_0_0_0_1px_rgba(10,132,255,0.08)]":"border-white/70 bg-white hover:border-[var(--app-accent)]/30"}`,children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:w.name}),l.jsx("p",{className:"text-sm text-gray-600",children:(b==null?void 0:b.description)||w.description})]}),_&&l.jsx("span",{className:"inline-flex h-7 w-7 items-center justify-center rounded-full bg-[var(--app-accent)] text-white",children:l.jsx(_c,{className:"h-4 w-4"})})]}),b&&l.jsxs("div",{className:"mt-3 space-y-1 text-xs text-gray-500",children:[l.jsxs("p",{className:"font-semibold",children:["Stages (",b.stages.length,")"]}),l.jsx("div",{className:"flex flex-wrap gap-1.5",children:b.stages.map((j,S)=>l.jsx("span",{className:"rounded-full border border-gray-200/70 px-2 py-0.5 text-[11px] text-gray-600",children:j},S))})]})]},w.id)})}),y&&l.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:y})]}),l.jsxs("div",{className:"flex items-center justify-between border-t border-gray-100 bg-gray-50/60 px-6 py-4",children:[l.jsx("button",{onClick:e,disabled:m,className:"text-sm font-medium text-gray-600 hover:text-gray-900",children:"Cancel"}),l.jsx("button",{onClick:x,disabled:o&&u.length<2||!o&&!i||m,className:"hig-btn-primary min-w-[140px] justify-center",children:m?"Applying":o?"Create Workflow":"Apply Template"})]})]})})}const $Z="rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_1px_2px_rgba(15,23,42,0.08)]",LZ="inline-flex items-center rounded-full border border-gray-200/70 bg-white px-3 py-1.5 text-sm font-medium text-gray-600 transition",IS="inline-flex items-center rounded-full border px-3 py-1.5 text-xs font-semibold transition",FZ=["buyer","seller","buyer_and_seller","renter","landlord"],RS={buyer:{label:"Buyer",accentClass:"bg-blue-50 text-blue-700 border-blue-200",matches:["buyer","buyer_and_seller"]},seller:{label:"Seller",accentClass:"bg-emerald-50 text-emerald-700 border-emerald-200",matches:["seller","buyer_and_seller"]},buyer_and_seller:{label:"Buyer & Seller",accentClass:"bg-purple-50 text-purple-700 border-purple-200",matches:["buyer_and_seller"]},renter:{label:"Renter",accentClass:"bg-orange-50 text-orange-700 border-orange-200",matches:["renter"]},landlord:{label:"Landlord",accentClass:"bg-teal-50 text-teal-700 border-teal-200",matches:["landlord"]}};function BZ(){const{user:e,roleInfo:t}=kt(),{statuses:r,loading:n,applyTemplate:a,createCustomWorkflow:i}=QD(),[s,o]=p.useState([]),[c,u]=p.useState(!0),[d,f]=p.useState(null),[h,m]=p.useState(!1),[g,y]=p.useState(null),[v,x]=p.useState(!1),[w,b]=p.useState("kanban"),[_,j]=p.useState("all"),[S,N]=g2(),k=S.get("newDeal"),E=p.useMemo(()=>{const $=new Map;return r.forEach(G=>{$.set(G.id,G)}),s.forEach(G=>{G.pipeline_statuses&&!$.has(G.pipeline_statuses.id)&&$.set(G.pipeline_statuses.id,G.pipeline_statuses)}),Array.from($.values()).sort((G,T)=>{const K=G.sort_order??999,Z=T.sort_order??999;return K===Z?G.name.localeCompare(T.name):K-Z})},[r,s]),P=Ah(Oh(nl,{activationConstraint:{distance:5}}));p.useEffect(()=>{D()},[e,t]),p.useEffect(()=>{if(k){y(null),m(!0);const $=new URLSearchParams(S);$.delete("newDeal"),N($,{replace:!0})}},[k,S,N]);const A=p.useCallback(async $=>{const G=s.find(Z=>Z.id===$);if(G){y(G),m(!0);return}const{data:T,error:K}=await Y.from("deals").select("*").eq("id",$).maybeSingle();!K&&T&&(y(T),m(!0))},[s]);p.useEffect(()=>{const $=S.get("dealId");$&&A($)},[S,s,A]),p.useEffect(()=>{!n&&E.length===0&&x(!0)},[n,E]);const D=async()=>{if(!(!e||!t)){u(!0);try{const $=async()=>{if(!t.teamId)return[];const{data:F,error:ye}=await Y.from("user_teams").select("user_id").eq("team_id",t.teamId);return ye?(console.error("Error loading team members",ye),[]):(F||[]).map(le=>le.user_id)};let G=[];switch(t.globalRole){case"admin":{G=await Sn(t);break}case"sales_manager":{const F=await $();G=F.length?F:await Sn(t);break}case"team_lead":{const F=await $();G=F.length?F:[t.userId];break}default:G=[t.userId]}let T=Y.from("deals").select(`
          *,
          lead_sources (*),
          pipeline_statuses (*)
        `).order("created_at",{ascending:!1});G.length===1?T=T.eq("user_id",G[0]):G.length>1&&(T=T.in("user_id",G));const{data:K,error:Z}=await T;if(Z)console.error("Error loading deals",Z),o([]);else{const F=new Date().getFullYear(),ye=(K||[]).filter(le=>{if(le.status!=="closed")return!0;const De=le.close_date||le.closed_at;return De?new Date(De).getFullYear()>=F:!1});o(ye)}}catch($){console.error("Error resolving visible users",$),o([])}finally{u(!1)}}},H=$=>{const G=s.find(T=>T.id===$.active.id);f(G||null)},Q=async $=>{const{active:G,over:T}=$;if(f(null),!T)return;const K=G.id,Z=s.find(Le=>Le.id===K);if(!Z)return;const F=s.find(Le=>Le.id===T.id),ye=F?F.pipeline_status_id:T.id;if(!ye)return;if(ye===Z.pipeline_status_id){F&&F.id!==Z.id&&F.deal_type===Z.deal_type&&o(Le=>{const fr=Le.findIndex(C=>C.id===Z.id),ze=Le.findIndex(C=>C.id===F.id);return fr===-1||ze===-1?Le:Rh(Le,fr,ze)});return}const le=E.find(Le=>Le.id===ye);if(!le)return;const De={pipeline_status_id:ye,status:(le.slug||le.name||"").toLowerCase(),stage_entered_at:new Date().toISOString()};(typeof le.slug=="string"&&le.slug.length>0?le.slug.toLowerCase():(le.name||"").toLowerCase()).includes("closed")&&(De.closed_at=new Date().toISOString());const{error:qe}=await Y.from("deals").update(De).eq("id",K);qe||D()},ee=$=>{y($),m(!0)},B=()=>{m(!1),y(null);const $=new URLSearchParams(S);$.has("dealId")&&($.delete("dealId"),N($,{replace:!0})),D()},W=(_==="all"?s:s.filter($=>RS[_].matches.includes($.deal_type))).filter($=>$.status!=="dead"),I=$=>W.filter(G=>G.pipeline_status_id===$),M=$=>{const K=($.actual_sale_price||$.expected_sale_price)*$.gross_commission_rate*(1-$.brokerage_split_rate);return($.referral_out_rate?K*(1-$.referral_out_rate):K)-$.transaction_fee},L=$=>{const G=new Date($),K=new Date().getTime()-G.getTime();return Math.floor(K/(1e3*60*60*24))},oe=async $=>{if(!confirm(`Are you sure you want to delete ${$.length} deal${$.length>1?"s":""}?`))return;const{error:G}=await Y.from("deals").delete().in("id",$);G||D()},re=async($,G)=>{const T={};if(G.pipeline_status_id){T.pipeline_status_id=G.pipeline_status_id,T.stage_entered_at=new Date().toISOString();const Z=E.find(F=>F.id===G.pipeline_status_id);(Z==null?void 0:Z.name.toLowerCase())==="closed"?(T.status="closed",T.closed_at=new Date().toISOString()):(Z==null?void 0:Z.name.toLowerCase())==="dead"&&(T.status="dead")}const{error:K}=await Y.from("deals").update(T).in("id",$);K||D()},Ne=$=>{const G=$.filter(ye=>ye.deal_type==="buyer"||ye.deal_type==="buyer_and_seller").length,T=$.filter(ye=>ye.deal_type==="seller"||ye.deal_type==="buyer_and_seller").length,K=$.filter(ye=>ye.deal_type==="renter").length,Z=$.filter(ye=>ye.deal_type==="landlord").length,F=$.reduce((ye,le)=>ye+M(le),0);return{buyers:G,sellers:T,renters:K,landlords:Z,totalCommission:F}},O=$=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format($),q=Ne(W),te=[{label:"Buyers",value:q.buyers,display:q.buyers.toString()},{label:"Sellers",value:q.sellers,display:q.sellers.toString()},{label:"Renters",value:q.renters,display:q.renters.toString()},{label:"Landlords",value:q.landlords,display:q.landlords.toString()},{label:"Net Commission",value:q.totalCommission,display:O(q.totalCommission)}].filter($=>$.value>0);return c||n?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):l.jsxs("div",{className:"space-y-6 min-h-full",children:[l.jsxs("div",{className:`${$Z} p-6 space-y-4`,children:[l.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-[0.25em]",children:"Pipeline"}),l.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mt-1",children:"Active deals workspace"}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Monitor every opportunity, shift deals between stages, and launch new work without leaving this view."})]}),l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[l.jsxs("div",{className:"inline-flex items-center rounded-full border border-gray-200/80 bg-white/80 p-1 shadow-inner",children:[l.jsxs("button",{onClick:()=>b("kanban"),className:`inline-flex items-center gap-2 rounded-full px-3 py-1.5 text-sm font-medium ${w==="kanban"?"bg-[var(--app-accent)] text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[l.jsx(L3,{className:"w-4 h-4"}),l.jsx("span",{children:"Kanban"})]}),l.jsxs("button",{onClick:()=>b("table"),className:`inline-flex items-center gap-2 rounded-full px-3 py-1.5 text-sm font-medium ${w==="table"?"bg-[var(--app-accent)] text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[l.jsx(IC,{className:"w-4 h-4"}),l.jsx("span",{children:"Table"})]})]}),l.jsxs("button",{onClick:()=>{y(null),m(!0)},className:"inline-flex items-center justify-center gap-2 rounded-2xl border border-white/50 bg-[var(--app-accent)] px-4 py-2 text-sm font-semibold text-white shadow-[0_8px_16px_rgba(15,23,42,0.12)] transition hover:bg-[var(--app-accent-dark,#0052cc)]",children:[l.jsx(Ma,{className:"w-4 h-4"}),l.jsx("span",{children:"New Deal"})]})]})]}),te.length>0&&l.jsx("div",{className:"flex flex-wrap gap-3",children:te.map($=>l.jsxs("div",{className:`${LZ} gap-2`,children:[l.jsx("span",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:$.label}),l.jsx("span",{className:"font-semibold text-gray-900",children:$.display})]},$.label))}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Deal types"}),_!=="all"&&l.jsx("button",{onClick:()=>j("all"),className:"text-xs font-medium text-[var(--app-accent)] hover:underline",children:"Reset"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:()=>j("all"),className:`${IS} ${_==="all"?"bg-gray-900 text-white border-gray-900 shadow-sm":"border-gray-200/70 bg-white text-gray-600 hover:text-gray-900"}`,children:"All deals"}),FZ.map($=>{const G=RS[$],T=_===$;return l.jsx("button",{onClick:()=>j($),className:`${IS} ${T?`${G.accentClass} shadow-sm ring-1 ring-black/5`:"border-gray-200/70 bg-white text-gray-600 hover:text-gray-900"}`,children:G.label},$)})]})]})]}),E.length===0?l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsxs("div",{className:"text-center max-w-md",children:[l.jsx(kh,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Configure Your Pipeline"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Choose a template to get started with your pipeline workflow"}),l.jsx("button",{onClick:()=>x(!0),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition",children:"Choose Pipeline Template"})]})}):w==="kanban"?l.jsxs(Ih,{sensors:P,collisionDetection:PL,onDragStart:H,onDragEnd:Q,children:[l.jsx("div",{className:"pb-2 overflow-x-auto",children:l.jsx("div",{className:"flex gap-3 sm:gap-4 pb-4 px-2 sm:px-6 min-w-max",children:E.map($=>l.jsx(vZ,{status:$.id,label:$.name,color:$.color,deals:I($.id),onDealClick:ee,calculateNetCommission:M,getDaysInStage:L},$.id))})}),l.jsx(hE,{children:d?l.jsx(XD,{deal:d,netCommission:M(d),daysInStage:L(d.stage_entered_at),onClick:()=>{},isDragging:!0}):null})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsx(OZ,{deals:W,statuses:E,onDealClick:ee,calculateNetCommission:M,getDaysInStage:L,onBulkDelete:oe,onBulkEdit:re,onImportSuccess:D})}),h&&l.jsx(JD,{deal:g,onClose:B,onDelete:B}),v&&l.jsx(ZD,{onClose:()=>x(!1),onSelect:a,onCreateCustomWorkflow:i})]})}const UZ=["under_contract","pending","closed"],Tl={buyer:"Buyer",seller:"Seller",buyer_and_seller:"Buyer & Seller",renter:"Renter",landlord:"Landlord"},zZ=["No Response / Ghosted","Client Not Ready / Timeline Changed","Chose Another Agent","Financing Didnt Work Out","Deal Fell Through"];function WZ(){const{user:e,roleInfo:t}=kt(),[,r]=p.useTransition(),[n,a]=p.useState(new Date().getFullYear()),[i,s]=p.useState({closedDeals:0,totalVolume:0,totalGCI:0,avgSalePrice:0,avgCommission:0,buyerDeals:0,sellerDeals:0,avgDaysToClose:0}),[o,c]=p.useState([]),[u,d]=p.useState([]),[f,h]=p.useState({count:0,gci:0}),[m,g]=p.useState(0),[y,v]=p.useState(!0),[x,w]=p.useState(!1),[b,_]=p.useState([]),[j,S]=p.useState([]),[N,k]=p.useState([]),[E,P]=p.useState([]),[A,D]=p.useState([]),[H,Q]=p.useState([]),[ee,B]=p.useState([]),[W,I]=p.useState([]),[M,L]=p.useState({total:0,reasons:[]}),[oe,re]=p.useState([]),Ne=p.useMemo(()=>j.length?[...j].sort().join("|"):"",[j]),O=p.useMemo(()=>H.length?[...H].sort().join("|"):"",[H]),q=p.useMemo(()=>ee.length?[...ee].sort().join("|"):"",[ee]),te=p.useMemo(()=>W.length?[...W].sort().join("|"):"",[W]),$=!!e&&((t==null?void 0:t.globalRole)==="team_lead"||(t==null?void 0:t.teamRole)==="team_lead"),G=j.length===0||j.length===b.length,T=$&&j.length===1&&j[0]===(e==null?void 0:e.id),K=p.useMemo(()=>{const z=(ue,ke)=>ue.length===0?ke:ue.length===1?ue[0]:ue.length===2?`${ue[0]} and ${ue[1]}`:ue.length===3?`${ue[0]}, ${ue[1]} and ${ue[2]}`:`multiple ${ke}`,_e=ue=>ue.endsWith("s")?`${ue}'`:`${ue}'s`,Ie=b.filter(ue=>j.includes(ue.id)).map(ue=>ue.label||ue.email||"Agent"),Ve=G||Ie.length===0,$e=!Ve&&Ie.length===1,ut=$e?_e(Ie[0]):"",jt=ee.length===0||E.length>0&&ee.length===E.length,R=W.length===0||A.length>0&&W.length===A.length,X=H.length===0||N.length>0&&H.length===N.length,ie=E.filter(ue=>ee.includes(ue.id)).map(ue=>ue.label),de=W.map(ue=>Tl[ue]??ue.replace(/_/g," ")),ce=N.filter(ue=>H.includes(ue.id)).map(ue=>ue.name),se=jt?"all pipeline stages":z(ie,"pipeline stages"),Ee=R?"all deal types":z(de,"deal types"),he=X?"all lead sources":z(ce,"lead sources");if(jt&&R&&X)return $e?`Viewing ${ut} deals across all pipeline stages, deal types, and lead sources.`:Ve?"Viewing all deals across all agents, pipeline stages, deal types, and lead sources.":"Viewing deals for multiple agents across all pipeline stages, deal types, and lead sources.";const Pe=Ve?"all agents":$e?ut:Ie.length===2?`${Ie[0]} and ${Ie[1]}`:Ie.length===3?`${Ie[0]}, ${Ie[1]} and ${Ie[2]}`:"multiple agents",ae=[];if(se&&ae.push(se),Ee){const ue=R?`across ${Ee}`:`${Ee} deals`;ae.push(ue)}he&&ae.push(`from ${he}`),ae.length===0&&ae.push("deals");const fe=ae.join(", ");return`Viewing ${Pe} ${fe}`.replace(/\s+/g," ").trim()+"."},[b,A,N,E,G,j,W,H,ee,e==null?void 0:e.id]),Z=()=>{e&&S([e.id])},F=()=>{S([])},ye=z=>{const _e=Array.from(z.target.selectedOptions).map(Ie=>Ie.value);S(_e)},le=z=>{const _e=Array.from(z.target.selectedOptions).map(Ie=>Ie.value);B(_e)},De=z=>{const _e=Array.from(z.target.selectedOptions).map(Ie=>Ie.value);Q(_e)},Ae=z=>{const _e=Array.from(z.target.selectedOptions).map(Ie=>Ie.value);I(_e)};p.useEffect(()=>{A.length&&I(z=>z.filter(_e=>A.includes(_e)))},[A]);const qe=(z,_e)=>_e.length?_e.length===1?z.eq("user_id",_e[0]):z.in("user_id",_e):z,Le=(z,_e)=>{if(z=qe(z,_e),H.length&&(z=z.in("lead_source_id",H)),ee.length){const Ie=ee.filter(Boolean);Ie.length&&(z=z.in("pipeline_status_id",Ie))}return W.length&&(z=z.in("deal_type",W)),z},fr=t&&t.globalRole!=="agent"||b.length>1,ze=async(z,_e)=>{const Ie=z.length?z:b.map(se=>se.id);if(!Ie.length)return;const Ve=new Date(_e,0,1).toISOString(),$e=new Date(_e,11,31,23,59,59).toISOString();let ut=Y.from("deals").select(`
        id,
        deal_type,
        lead_source_id,
        lead_sources (id, name),
        pipeline_status_id,
        pipeline_statuses (id, name, sort_order)
      `).gte("created_at",Ve).lte("created_at",$e);ut=qe(ut,Ie);const{data:jt,error:R}=await ut;if(R){console.error("Unable to load analytics filter context",R);return}const X=new Map,ie=new Map,de=new Set;(jt||[]).forEach(se=>{var Ee,he;(Ee=se.lead_sources)!=null&&Ee.id&&X.set(se.lead_sources.id,{id:se.lead_sources.id,name:se.lead_sources.name||"Unknown"}),(he=se.pipeline_statuses)!=null&&he.id&&ie.set(se.pipeline_statuses.id,{id:se.pipeline_statuses.id,label:se.pipeline_statuses.name,sortOrder:se.pipeline_statuses.sort_order}),se.deal_type&&de.add(se.deal_type)}),k(Array.from(X.values()).sort((se,Ee)=>se.name.localeCompare(Ee.name))),P(Array.from(ie.values()).sort((se,Ee)=>{const he=se.sortOrder??999,xe=Ee.sortOrder??999;return he===xe?se.label.localeCompare(Ee.label):he-xe}));const ce=Array.from(de).sort((se,Ee)=>{const he=Tl[se]??se,xe=Tl[Ee]??Ee;return he.localeCompare(xe)});D(ce.length?ce:Object.keys(Tl))},C=z=>{if(!z)return null;const _e=z.trim();if(!_e)return null;const Ie=_e.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(Ie){const ut=Number(Ie[1]),jt=Number(Ie[2])-1,R=Number(Ie[3]);if(Number.isNaN(ut)||Number.isNaN(jt)||Number.isNaN(R)||jt<0||jt>11||R<1||R>31)return null;const X=new Date(Date.UTC(ut,jt,R));return{year:ut,month:jt,date:X}}const Ve=_e.replace(" ","T").replace(/(\+\d{2})(\d{2})$/,"$1:$2").replace(/(-\d{2})(\d{2})$/,"$1:$2"),$e=new Date(Ve);return Number.isNaN($e.getTime())?null:{year:$e.getUTCFullYear(),month:$e.getUTCMonth(),date:$e}};p.useEffect(()=>{if(!e)return;(async()=>{var ie;const _e={id:e.id,label:((ie=e.user_metadata)==null?void 0:ie.name)||e.email||"You",email:e.email||""},Ie=async()=>{if(!t)return[e.id];switch(t.globalRole){case"admin":return await Sn(t);case"sales_manager":case"team_lead":return await Sn(t);default:return[t.userId]}};if(!t||t.globalRole==="agent"){_([_e]),S([e.id]);return}const Ve=await Ie();let $e=[];const{data:ut,error:jt}=await Y.rpc("get_accessible_agents");if(jt)console.error("Unable to load accessible agents",jt);else if(ut){const de=ut,ce=new Set(de.filter(he=>he.global_role==="admin"||he.global_role==="sales_manager").map(he=>he.user_id)),se=de.filter(he=>he.global_role!=="admin"&&he.global_role!=="sales_manager").map(he=>({id:he.user_id,label:he.display_name||he.email||"Agent",email:he.email||""}));if($e=(Ve.length?se.filter(he=>Ve.includes(he.id)):se).filter((he,xe,Pe)=>Pe.findIndex(ae=>ae.id===he.id)===xe),ce.size)for(const he of ce){const xe=Ve.indexOf(he);xe!==-1&&Ve.splice(xe,1)}}const R=de=>{var ce;return de===e.id?((ce=e.user_metadata)==null?void 0:ce.name)||e.email||"You":`Agent ${de.slice(0,8)}`};if(!$e.length)$e=Ve.map(de=>({id:de,label:R(de),email:""}));else{const de=new Set($e.map(se=>se.id)),ce=Ve.filter(se=>!de.has(se));ce.length&&($e=[...$e,...ce.map(se=>({id:se,label:R(se),email:""}))])}_($e);const X=$e.map(de=>de.id);S(X.length?[]:[e.id])})()},[e,t==null?void 0:t.globalRole,t==null?void 0:t.teamId]),p.useEffect(()=>{e&&b.length!==0&&V()},[e==null?void 0:e.id,n,Ne,O,q,te,b]),p.useEffect(()=>{const z=j.length?j:b.map(_e=>_e.id);!e||z.length===0||ze(z,n)},[j,n,b]);const V=async()=>{if(!e||b.length===0)return;const z=j.length?j:b.map(fe=>fe.id);if(!z.length){r(()=>{s({closedDeals:0,totalVolume:0,totalGCI:0,avgSalePrice:0,avgCommission:0,buyerDeals:0,sellerDeals:0,avgDaysToClose:0}),d([]),c([]),h({count:0,gci:0})}),v(!1),w(!1);return}const _e=y;_e?v(!0):w(!0);const Ie=new Date(n,0,1).toISOString(),Ve=new Date(n,11,31,23,59,59).toISOString(),$e=`
      id,
      user_id,
      deal_type,
      status,
      created_at,
      stage_entered_at,
      close_date,
      closed_at,
      expected_sale_price,
      actual_sale_price,
      gross_commission_rate,
      brokerage_split_rate,
      referral_out_rate,
      transaction_fee,
      lead_source_id,
      lead_sources (name),
      pipeline_status_id,
      pipeline_statuses (id, name, sort_order)
    `,ut=Le(Y.from("deals").select($e).eq("status","closed"),z),jt=Le(Y.from("deals").select("id, created_at, close_date, closed_at, lead_source_id, pipeline_status_id, archived_reason").eq("status","dead").gte("created_at",Ie).lte("created_at",Ve),z),R=Le(Y.from("deals").select($e).gte("created_at",Ie).lte("created_at",Ve),z),[X,ie,de,ce]=await Promise.all([Y.from("user_settings").select("annual_gci_goal").eq("user_id",e.id).maybeSingle(),ut,jt,R]);X.data&&g(X.data.annual_gci_goal||0);const se=ie.data,Ee=de.data,he=ce.data;if(se){const fe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];let ue=0,ke=0,Ce=0,We=0,yt=0,Et=0,it=0;const Te={},Yr={},gu=new Date;gu.getMonth(),gu.getFullYear(),se.forEach(ir=>{const vu=C(ir.close_date)||C(ir.closed_at);if(!vu||vu.year!==n)return;it+=1;const bb=ir.actual_sale_price||ir.expected_sale_price||0;ue+=bb;const wb=bb*(ir.gross_commission_rate||0)*(1-(ir.brokerage_split_rate||0)),_b=(ir.referral_out_rate?wb*(1-ir.referral_out_rate):wb)-(ir.transaction_fee||0);ke+=_b,ir.deal_type==="buyer"&&Ce++,ir.deal_type==="seller"&&We++,ir.deal_type==="buyer_and_seller"&&(Ce++,We++);const jb=C(ir.created_at);if(jb){const Wp=(vu.date.getTime()-jb.date.getTime())/(1e3*60*60*24);!Number.isNaN(Wp)&&Wp>=0&&(yt+=Wp,Et++)}const tI=vu.month,yu=fe[tI];Te[yu]=(Te[yu]||0)+_b,Yr[yu]=(Yr[yu]||0)+1});const Ls=Et>0?yt/Et:0;s({closedDeals:it,totalVolume:ue,totalGCI:ke,avgSalePrice:it>0?ue/it:0,avgCommission:it>0?ke/it:0,buyerDeals:Ce,sellerDeals:We,avgDaysToClose:Ls});const zp=fe.map(ir=>({month:ir,gci:Te[ir]||0,deals:Yr[ir]||0}));d(zp)}else s(fe=>({...fe,closedDeals:0,totalVolume:0,totalGCI:0,avgSalePrice:0,avgCommission:0,buyerDeals:0,sellerDeals:0,avgDaysToClose:0})),d([]),h({count:0,gci:0});if(Ee){const fe={"No Response / Ghosted":0,"Client Not Ready / Timeline Changed":0,"Chose Another Agent":0,"Financing Didnt Work Out":0,"Deal Fell Through":0,Other:0},ue=Ee.map(ke=>ke.id).filter(Boolean);if(ue.length){Ee.forEach(We=>{const yt=(We.archived_reason||"").trim(),it=zZ.find(Te=>yt&&Te.toLowerCase()===yt.toLowerCase())||"Other";fe[it]=(fe[it]||0)+1});const ke=ue.length,Ce=Object.entries(fe).filter(([,We])=>We>0).map(([We,yt])=>({reason:We,count:yt,percentage:ke>0?yt/ke*100:0})).sort((We,yt)=>yt.count-We.count);L({total:ke,reasons:Ce})}else L({total:0,reasons:[]})}else L({total:0,reasons:[]});const xe=new Date,Pe=xe.getFullYear()===n,ae={count:0,gci:0};if(he){Pe&&he.forEach(ke=>{const Ce=C(ke.close_date)||C(ke.closed_at);if(!Ce||!(Ce.year===xe.getFullYear()&&Ce.month===xe.getMonth())||!UZ.includes(ke.status))return;const it=(ke.actual_sale_price||ke.expected_sale_price||0)*(ke.gross_commission_rate||0)*(1-(ke.brokerage_split_rate||0)),Yr=(ke.referral_out_rate?it*(1-ke.referral_out_rate):it)-(ke.transaction_fee||0);ae.count+=1,ae.gci+=Yr});const fe={};he.forEach(ke=>{var We;const Ce=((We=ke.lead_sources)==null?void 0:We.name)||"Unknown";if(fe[Ce]||(fe[Ce]={total:0,closed:0,commission:0}),fe[Ce].total++,ke.status==="closed"){fe[Ce].closed++;const it=(ke.actual_sale_price||ke.expected_sale_price||0)*(ke.gross_commission_rate||0)*(1-(ke.brokerage_split_rate||0)),Yr=(ke.referral_out_rate?it*(1-ke.referral_out_rate):it)-(ke.transaction_fee||0);fe[Ce].commission+=Yr}});const ue=Object.entries(fe).map(([ke,Ce])=>({name:ke,totalDeals:Ce.total,closedDeals:Ce.closed,conversionRate:Ce.total>0?Ce.closed/Ce.total*100:0,totalCommission:Ce.commission}));c(ue.sort((ke,Ce)=>Ce.totalCommission-ke.totalCommission))}else h({count:0,gci:0}),c([]);if(he){const fe=Ir(he,n);re(fe)}else re([]);h(ae),_e&&v(!1),w(!1)},J=z=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(z),pe=z=>new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(z),Re={lead:1,in_progress:2,under_contract:3,closed_won:4,archived:5},at={lead:"Lead",in_progress:"In Progress",under_contract:"Under Contract",closed_won:"Closed Won",archived:"Archived (Closed Lost)"},Lt=z=>{switch(z){case"closed":return"closed_won";case"dead":return"archived";case"under_contract":case"pending":return"under_contract";case"offer_submitted":case"showing_scheduled":case"in_progress":case"contacted":return"in_progress";default:return"lead"}},Ct=(z,_e)=>z?z.getFullYear()===_e:!1,Ir=(z,_e)=>{const Ie=[{from:"lead",to:"in_progress"},{from:"in_progress",to:"under_contract"},{from:"under_contract",to:"closed_won"}],Ve=z.filter($e=>{var ut;return Ct(((ut=C($e.created_at))==null?void 0:ut.date)||null,_e)});return Ie.map(({from:$e,to:ut})=>{const jt=Ve.filter(ie=>{const de=Lt(ie.status);return Re[de]>=Re[$e]}).length,R=Ve.filter(ie=>{const de=Lt(ie.status);return de==="archived"?!1:Re[de]>=Re[ut]}).length,X=jt>0?R/jt*100:0;return{from:$e,to:ut,entered:jt,advanced:R,rate:X}})},ma=m>0?i.totalGCI/m*100:0,wr=new Date,Qa=n===wr.getFullYear(),Fi=new Date(n,0,1),Bi=new Date(n,11,31,23,59,59),Ui=Qa?Math.max(0,Math.min(wr.getTime(),Bi.getTime())-Fi.getTime()):Bi.getTime()-Fi.getTime(),zi=Bi.getTime()-Fi.getTime(),Wi=zi>0?Ui/zi:1,ta=Wi>0?i.totalGCI/Wi:i.totalGCI,Za=Math.max(0,m-i.totalGCI),Ki=Qa&&wr.getFullYear()===n?12-wr.getMonth():0,ei=m>0&&Ki>0?Za/Ki:0,{bestMonth:Fe,worstMonth:mt}=p.useMemo(()=>{const z=u.filter(Ve=>Ve.gci>0);if(z.length===0)return{bestMonth:null,worstMonth:null};const _e=z.reduce((Ve,$e)=>$e.gci>Ve.gci?$e:Ve),Ie=z.reduce((Ve,$e)=>$e.gci<Ve.gci?$e:Ve);return{bestMonth:_e,worstMonth:Ie}},[u]),Qe=p.useMemo(()=>u.filter(z=>z.gci>0),[u]),gt=Qe.length,hr=gt>0?i.totalGCI/gt:0,ar=Qe.reduce((z,_e)=>z+_e.deals,0),Rr=gt>0?ar/gt:0,qr=gt>0?Qe[gt-1]:null,Xe=gt>1?Qe[gt-2]:null,Yt=qr&&Xe?qr.gci-Xe.gci:null,_r=p.useMemo(()=>u.reduce((z,_e)=>Math.max(z,_e.gci),0),[u]),Vr=p.useMemo(()=>u.reduce((z,_e)=>Math.max(z,_e.deals),0),[u]),Dn=Fe?u.find(z=>z.month===Fe.month):null,In=mt?u.find(z=>z.month===mt.month):null,vt="rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_1px_2px_rgba(15,23,42,0.08)]",Gr="inline-flex items-center rounded-full border border-gray-200/70 bg-white px-2.5 py-0.5 text-[11px] font-medium text-gray-600",ra="rounded-xl border border-gray-100/80 bg-white px-4 py-3",$s=o[0]||null,ti=o.length>1?[...o].filter(z=>z.totalDeals>=3).sort((z,_e)=>z.conversionRate-_e.conversionRate)[0]:null,Bp=Array.from({length:5},(z,_e)=>new Date().getFullYear()-_e).map(z=>({value:z.toString(),label:z.toString()})),Up=`Jan 1  Dec 31, ${n}${Qa?"  In progress":""}`;return y?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):l.jsxs("div",{className:"space-y-8",children:[l.jsxs("section",{className:`${vt} p-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between relative`,children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-[0.25em]",children:"Analytics"}),l.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mt-1",children:"Year in Review"}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"A cohesive digest of production, pace, and lead-source efficiency for your selected year."})]}),l.jsxs("div",{className:"flex flex-col gap-3 items-start sm:items-end",children:[l.jsxs("div",{className:"flex items-center gap-3 text-left sm:text-right",children:[l.jsx("div",{className:"flex items-center gap-2 text-xs font-semibold text-gray-500 min-h-[20px]",children:x?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"h-2 w-2 rounded-full bg-[var(--app-accent)] animate-pulse"}),"Updating"]}):l.jsx("span",{className:"invisible",children:"Updating"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Timeframe"}),l.jsx("p",{className:"text-sm text-gray-500",children:Up})]})]}),l.jsx(YD,{options:Bp,value:String(n),onChange:z=>a(parseInt(z,10)),className:"self-start sm:self-end w-max"})]})]}),fr&&l.jsxs("section",{className:`${vt} p-5 space-y-4`,children:[l.jsx("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:l.jsxs("div",{children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Scope"}),l.jsx("p",{className:"text-sm text-gray-700",children:K})]})}),b.length>0&&l.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Agents"}),$&&l.jsx("button",{type:"button",onClick:Z,className:`rounded-full px-3 py-1 text-xs font-semibold transition ${T?"bg-[var(--app-accent)] text-white shadow-[0_8px_20px_rgba(0,122,255,0.25)]":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,children:"Focus On Me"})]}),l.jsx("div",{className:"flex items-center gap-1.5",children:!G&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:F,children:"Clear"})})]}),l.jsx("select",{multiple:!0,value:j,onChange:ye,className:"hig-input min-h-[72px] rounded-2xl border-gray-200 bg-white/90 text-sm analytics-multi-select",children:b.map(z=>l.jsx("option",{value:z.id,children:z.label},z.id))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Pipeline Stage"}),ee.length>0&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:()=>B([]),children:"Clear"})]}),l.jsx("select",{multiple:!0,value:ee,onChange:le,className:"hig-input min-h-[64px] mt-2 analytics-multi-select",children:E.map(z=>l.jsx("option",{value:z.id,children:z.label},z.id))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Deal Type"}),W.length>0&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:()=>I([]),children:"Clear"})]}),l.jsx("select",{multiple:!0,value:W,onChange:Ae,className:"hig-input min-h-[64px] mt-2 analytics-multi-select",children:A.map(z=>l.jsx("option",{value:z,children:Tl[z]??z.replace(/_/g," ")},z))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Lead Source"}),H.length>0&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:()=>Q([]),children:"Clear"})]}),l.jsx("select",{multiple:!0,value:H,onChange:De,className:"hig-input min-h-[64px] mt-2 analytics-multi-select",children:N.map(z=>l.jsx("option",{value:z.id,children:z.name},z.id))})]})]})]}),l.jsx("section",{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[l.jsxs("div",{className:`${vt} p-5`,children:[l.jsx("p",{className:"text-xs font-semibold text-blue-600 uppercase tracking-wide",children:"Pipeline"}),l.jsx("div",{className:"text-2xl font-semibold text-gray-900 mt-2",children:pe(i.closedDeals)}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Closed deals"}),l.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:[i.buyerDeals," buyer  ",i.sellerDeals," seller"]})]}),l.jsxs("div",{className:`${vt} p-5`,children:[l.jsx("p",{className:"text-xs font-semibold text-green-600 uppercase tracking-wide",children:"Volume"}),l.jsx("div",{className:"text-2xl font-semibold text-gray-900 mt-2",children:J(i.totalVolume)}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Total sales volume"}),l.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Avg sale price  ",J(i.avgSalePrice)]})]}),l.jsxs("div",{className:`${vt} p-5`,children:[l.jsx("p",{className:"text-xs font-semibold text-amber-600 uppercase tracking-wide",children:"Net GCI"}),l.jsx("div",{className:"text-2xl font-semibold text-gray-900 mt-2",children:J(i.totalGCI)}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Total earnings after splits"}),l.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Avg commission  ",J(i.avgCommission)]})]}),l.jsxs("div",{className:`${vt} p-5`,children:[l.jsx("p",{className:"text-xs font-semibold text-indigo-600 uppercase tracking-wide",children:"Pace"}),l.jsx("div",{className:"text-2xl font-semibold text-gray-900 mt-2",children:pe(f.count)}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Deals closing this month"}),l.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["GCI this month  ",J(f.gci)]}),i.avgDaysToClose>0&&l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Avg time to close  ",i.avgDaysToClose.toFixed(0)," days"]})]})]})}),l.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:`${vt} p-6`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-5",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Monthly Performance"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How each producing month contributes to pace and income."})]}),l.jsx("div",{className:"text-xs text-gray-500",children:gt>0?l.jsxs("span",{className:Gr,children:[gt," active months"]}):l.jsx("span",{className:"text-gray-400",children:"No closed months yet"})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{className:ra,children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide",children:"Top Month"}),Fe?l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[Fe.month,l.jsxs("span",{className:Gr,children:[(Dn==null?void 0:Dn.deals)??0," deals"]})]}),l.jsx("p",{className:"text-sm text-gray-600",children:J(Fe.gci)})]}):l.jsx("p",{className:"text-sm text-gray-500",children:"No producing months yet."})]}),l.jsxs("div",{className:ra,children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide",children:"Slow Month"}),mt&&Fe&&mt.month!==Fe.month?l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[mt.month,l.jsxs("span",{className:Gr,children:[(In==null?void 0:In.deals)??0," deals"]})]}),l.jsx("p",{className:"text-sm text-gray-600",children:J(mt.gci)})]}):Fe?l.jsx("p",{className:"text-sm text-gray-500",children:"Only one producing month so far."}):l.jsx("p",{className:"text-sm text-gray-500",children:"No data yet."})]}),l.jsxs("div",{className:ra,children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide",children:"Avg Active Month"}),l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:J(hr||0)}),l.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[gt||0," active month",gt===1?"":"s",l.jsxs("span",{className:Gr,children:[Rr.toFixed(1)," deals/mo"]})]})]}),l.jsxs("div",{className:ra,children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide",children:"Momentum"}),Yt!==null&&qr?l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:`text-lg font-semibold ${Yt>=0?"text-emerald-600":"text-rose-600"}`,children:[Yt>=0?"+":"-",J(Math.abs(Yt))]}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Vs. ",(Xe==null?void 0:Xe.month)??"previous month"," GCI"]})]}):l.jsx("p",{className:"text-sm text-gray-500",children:"Log at least two producing months to see momentum."})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Monthly Ledger"}),l.jsxs("span",{className:"text-xs text-gray-500",children:["Peak GCI: ",_r?J(_r):"","  Peak deals:"," ",Vr||""]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-left text-xs uppercase tracking-wide text-gray-500 border-b border-gray-100",children:[l.jsx("th",{className:"pb-2 pr-4",children:"Month"}),l.jsx("th",{className:"pb-2 pr-4",children:"Deals"}),l.jsx("th",{className:"pb-2 pr-4",children:"GCI"}),l.jsx("th",{className:"pb-2 pr-4",children:"Avg / Deal"}),l.jsx("th",{className:"pb-2 text-right",children:"Share"})]})}),l.jsx("tbody",{children:u.map(z=>{const _e=z.deals>0?z.gci/z.deals:0,Ie=i.totalGCI>0?z.gci/i.totalGCI*100:0;return l.jsxs("tr",{className:"border-b border-gray-50",children:[l.jsx("td",{className:"py-2 pr-4 font-medium text-gray-900",children:z.month}),l.jsx("td",{className:"py-2 pr-4 text-gray-700",children:z.deals}),l.jsx("td",{className:"py-2 pr-4 text-gray-700",children:J(z.gci)}),l.jsx("td",{className:"py-2 pr-4 text-gray-700",children:z.deals>0?J(_e):""}),l.jsx("td",{className:"py-2 text-right text-gray-700",children:i.totalGCI>0?`${Ie.toFixed(1)}%`:""})]},z.month)})})]})})]})]}),l.jsxs("div",{className:`${vt} p-6`,children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Momentum & Pace"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Are you ahead or behind last years GCI at this point on the calendar?"})]})}),l.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[l.jsxs("div",{className:"rounded-2xl border border-gray-100/80 bg-gradient-to-br from-white to-[var(--app-bg-start)] p-5 shadow-inner",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Year-over-year pace"}),l.jsxs("div",{className:"mt-3 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J(i.totalGCI)}),l.jsx("p",{className:"text-sm text-gray-600",children:"Current GCI"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Pace needed"}),l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:J(ta)})]})]}),l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[l.jsx("span",{children:"Current"}),l.jsx("span",{children:"Goal"})]}),l.jsx("div",{className:"mt-1 h-3 rounded-full bg-gray-100",children:l.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-blue-500 to-cyan-400 transition-all",style:{width:`${Math.min(100,i.totalGCI/(m||1)*100)}%`}})}),l.jsxs("div",{className:"mt-1 text-xs font-semibold text-gray-600",children:[ma.toFixed(1),"% of goal  year is ",(Wi*100).toFixed(1),"% complete"]})]})]}),l.jsxs("div",{className:"rounded-2xl border border-gray-100/80 bg-white/90 p-5",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Active pipeline outlook"}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:pe(f.count)}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Deals expected to close this month"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:J(f.gci)}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Projected monthly GCI"})]})]}),l.jsx("div",{className:"mt-4 rounded-xl bg-[var(--app-surface-muted)] p-4 text-sm text-gray-600",children:Yt!==null&&qr?l.jsxs(l.Fragment,{children:[l.jsxs("span",{className:"font-semibold",children:[Yt>=0?"Ahead":"Trailing"," pace"]})," ","by ",J(Math.abs(Yt))," versus ",(Xe==null?void 0:Xe.month)??"previous",". Keep this cadence to end the year at"," ",l.jsx("span",{className:"font-semibold",children:J(ta)}),"."]}):"Once two months close well highlight whether you are accelerating or slowing down."})]})]})]})]}),l.jsxs("section",{className:`${vt} p-6`,children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Stage Conversion (Funnel)"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How many deals advance between key stages; highlights slowdowns and drop-offs."})]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-left text-xs uppercase tracking-wide text-gray-500 border-b border-gray-100",children:[l.jsx("th",{className:"pb-2 pr-4",children:"From  To"}),l.jsx("th",{className:"pb-2 pr-4",children:"Entered"}),l.jsx("th",{className:"pb-2 pr-4",children:"Advanced"}),l.jsx("th",{className:"pb-2 pr-4",children:"Conversion"})]})}),l.jsxs("tbody",{className:"divide-y divide-gray-100",children:[oe.map(z=>l.jsxs("tr",{children:[l.jsxs("td",{className:"py-3 pr-4 font-medium text-gray-900",children:[at[z.from],"  ",at[z.to]]}),l.jsx("td",{className:"py-3 pr-4 text-gray-700",children:z.entered}),l.jsx("td",{className:"py-3 pr-4 text-gray-700",children:z.advanced}),l.jsxs("td",{className:"py-3 pr-4 text-gray-900 font-semibold",children:[z.rate.toFixed(1),"%"]})]},`${z.from}-${z.to}`)),oe.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"py-4 text-sm text-gray-500",children:"No stage movement recorded in this period."})})]})]})})]}),l.jsxs("section",{className:`${vt} p-6`,children:[l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Closed Lost Reasons"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Why archived deals fell out  fuel pipeline fixes, coaching, and source tuning."})]}),l.jsx("div",{className:"text-sm text-gray-600",children:l.jsxs("span",{className:Gr,children:[M.total," archived"]})})]}),M.total===0?l.jsx("div",{className:"rounded-xl border border-dashed border-gray-200 p-4 text-sm text-gray-600 bg-gray-50/80",children:"No archived deals in this period. When you archive with a reason, well summarize them here."}):l.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3",children:M.reasons.map(z=>l.jsxs("div",{className:"rounded-xl border border-gray-100/80 bg-white px-4 py-3 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:z.reason}),l.jsxs("span",{className:"text-xs font-semibold text-gray-500",children:[z.percentage.toFixed(1),"%"]})]}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[z.count," deal",z.count===1?"":"s"]})]},z.reason))})]}),l.jsxs("section",{className:`${vt} overflow-hidden`,children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:"Lead Source Performance"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Compare volume, conversion, and commissions by source."})]})}),l.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Deals"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Closed"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Conv. Rate"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Commission"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Insight"})]})}),l.jsxs("tbody",{className:"bg-white/70 divide-y divide-gray-100",children:[o.map(z=>{let _e="Solid";return z.conversionRate>=25&&z.totalCommission>(i.totalGCI||0)/4?_e="Power Source":z.conversionRate<10&&z.totalDeals>=3&&(_e="Underperformer"),l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:z.name}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:z.totalDeals}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:z.closedDeals}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[z.conversionRate.toFixed(1),"%"]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600",children:J(z.totalCommission)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:l.jsx("span",{className:_e==="Power Source"?"inline-flex px-2 py-1 rounded-full bg-green-50 text-green-700":_e==="Underperformer"?"inline-flex px-2 py-1 rounded-full bg-amber-50 text-amber-700":"inline-flex px-2 py-1 rounded-full bg-gray-50 text-gray-600",children:_e})})]},z.name)}),o.length===0&&l.jsx("tr",{children:l.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:["No data available for ",n]})})]})]})]}),l.jsxs("section",{className:`${vt} p-6`,children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Suggested Focus Areas"}),l.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Practical follow-ups informed by what the data is highlighting this year."}),l.jsxs("ul",{className:"space-y-3 text-sm text-gray-700",children:[m>0&&Za>0&&l.jsxs("li",{className:"leading-relaxed",children:["You need approximately"," ",l.jsx("span",{className:"font-semibold",children:J(Za)})," ","more GCI to hit your annual goal.",ei>0&&l.jsxs(l.Fragment,{children:[" ","That's about"," ",l.jsxs("span",{className:"font-semibold",children:[J(ei)," per month"]})," ","for the rest of the year."]})]}),$s&&l.jsxs("li",{className:"leading-relaxed",children:[l.jsx("span",{className:"font-semibold",children:$s.name})," continues to be your most profitable channel with"," ",l.jsx("span",{className:"font-semibold",children:J($s.totalCommission)})," ","in GCI. Consider increasing budget or nurture time here."]}),ti&&l.jsxs("li",{className:"leading-relaxed",children:[l.jsx("span",{className:"font-semibold",children:ti.name})," is converting at"," ",ti.conversionRate.toFixed(1),"%. Revisit the script or pause the spend until it improves."]}),i.avgDaysToClose>0&&l.jsxs("li",{className:"leading-relaxed",children:["Average time from lead to close is"," ",l.jsxs("span",{className:"font-semibold",children:[i.avgDaysToClose.toFixed(0)," days"]}),". Tighten follow-up cadences or pre-qualification steps to reduce the cycle."]}),(!$s||!ti)&&i.closedDeals===0&&l.jsx("li",{className:"leading-relaxed",children:"Add a few deals to the pipeline this year to unlock richer insight. Once production starts, this dashboard will reveal which channels earn the most."})]})]})]})}const fd="rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_1px_2px_rgba(15,23,42,0.08)]",KZ="inline-flex items-center rounded-full border px-3 py-1.5 text-xs font-semibold transition",HZ=[{label:"All tasks",value:"all",accentClass:"bg-gray-900 text-white border-gray-900 shadow-sm"},{label:"Overdue",value:"overdue",accentClass:"bg-red-50 text-red-700 border-red-200 shadow-sm ring-1 ring-red-100"},{label:"Due today",value:"today",accentClass:"bg-amber-50 text-amber-700 border-amber-200 shadow-sm ring-1 ring-amber-100"},{label:"Upcoming",value:"upcoming",accentClass:"bg-sky-50 text-sky-700 border-sky-200 shadow-sm ring-1 ring-sky-100"}];function qZ(){const{user:e,roleInfo:t}=kt(),[r,n]=p.useState([]),[a,i]=p.useState([]),[s,o]=p.useState("all"),[c,u]=p.useState("all"),[d,f]=p.useState(""),[h,m]=p.useState(!0),[g,y]=p.useState([]),[v,x]=p.useState({}),[w,b]=p.useState(!0),[_,j]=p.useState(null),[S,N]=p.useState(!1),[k,E]=p.useState(null),[P,A]=p.useState(""),[D,H]=p.useState(""),[Q,ee]=p.useState(""),[B,W]=p.useState(""),[I,M]=p.useState(!1),[L,oe]=p.useState(null),re=!!t&&["sales_manager","team_lead","admin"].includes(t.globalRole),[Ne,O]=p.useState([]),q=C=>{var V;return v[C]?v[C]:C===(e==null?void 0:e.id)?((V=e.user_metadata)==null?void 0:V.name)||e.email||"You":`Agent ${C.slice(0,8)}`},te=C=>{if(!C)return null;const[V,J,pe]=C.split("-").map(Number);return!V||!J||!pe?null:new Date(V,J-1,pe)},$=p.useMemo(()=>c==="all"?r:r.filter(C=>C.user_id===c),[r,c]),G=p.useMemo(()=>{const C=new Date;C.setHours(0,0,0,0);let V=0,J=0,pe=0,Re=0;const at=[];return $.forEach(Lt=>{const Ct=te(Lt.due_date);if(!Ct){Re+=1;return}Ct<C?V+=1:Ct.getTime()===C.getTime()?J+=1:pe+=1,at.push(Lt)}),at.sort((Lt,Ct)=>{const Ir=te(Lt.due_date),ma=te(Ct.due_date);return Ir?ma?Ir.getTime()-ma.getTime():-1:1}),{total:r.length,scopedTotal:$.length,overdue:V,dueToday:J,upcoming:pe,unscheduled:Re,nextTask:at[0]||null}},[$]),T=p.useMemo(()=>g.find(C=>C.id===D),[g,D]),K=p.useMemo(()=>!!(t&&["sales_manager","team_lead"].includes(t.globalRole)),[t]),Z=p.useMemo(()=>K?g.reduce((C,V)=>{const J=V.user_id;return C[J]||(C[J]=[]),C[J].push(V),C},{}):null,[g,K]);p.useEffect(()=>{e&&F()},[e,t]),p.useEffect(()=>{(async()=>{if(!(!e||!t)){if(!re){O([]),u("all");return}try{const V=await Sn(t),{data:J,error:pe}=await Y.rpc("get_accessible_agents");if(!pe&&J){const Re=J.filter(at=>V.includes(at.user_id)&&at.global_role!=="admin"&&at.global_role!=="sales_manager").map(at=>({id:at.user_id,label:at.display_name||at.email||"Agent"}));O(Re),c!=="all"&&!Re.find(at=>at.id===c)&&u("all")}}catch(V){console.error("Error loading agents",V),O([])}}})()},[e,t]),p.useEffect(()=>{if(!e){y([]),b(!1);return}ye()},[e,t]),p.useEffect(()=>{let C=[...$];const V=new Date;if(V.setHours(0,0,0,0),s==="overdue"?C=C.filter(J=>{if(!J.due_date)return!1;const pe=te(J.due_date);return!!pe&&pe<V}):s==="today"?C=C.filter(J=>{if(!J.due_date)return!1;const pe=te(J.due_date);return pe?pe.getTime()===V.getTime():!1}):s==="upcoming"&&(C=C.filter(J=>{if(!J.due_date)return!1;const pe=te(J.due_date);return!!pe&&pe>V})),c!=="all"&&(C=C.filter(J=>J.user_id===c)),d.trim()){const J=d.toLowerCase();C=C.filter(pe=>pe.title.toLowerCase().includes(J)||pe.deals.client_name.toLowerCase().includes(J)||pe.deals.property_address.toLowerCase().includes(J))}i(C)},[s,d,c,$]),p.useEffect(()=>{if(c==="all")return;const C=new Set(g.filter(V=>V.user_id===c).map(V=>V.id));D&&!C.has(D)&&H("")},[c,g,D]);const F=async()=>{if(!e)return;m(!0);let C=[e.id];t&&(C=await Sn(t),C.length||(C=[e.id]));let V=Y.from("tasks").select("*, deals(*, lead_sources(*))").eq("completed",!1).order("due_date",{ascending:!0});C.length===1?V=V.eq("user_id",C[0]):C.length>1&&(V=V.in("user_id",C));const{data:J,error:pe}=await V;!pe&&J&&n(J.filter(Re=>Re.deals).map(Re=>Re)),m(!1)},ye=async()=>{if(e){b(!0);try{let C=[e.id];t&&(C=await Sn(t),C.length||(C=[e.id]));let V=Y.from("deals").select("id, user_id, client_name, property_address, city, state, deal_type, status, next_task_due_date, next_task_description").neq("status","closed").neq("status","dead").order("updated_at",{ascending:!1});C.length===1?V=V.eq("user_id",C[0]):C.length>1&&(V=V.in("user_id",C));const{data:J,error:pe}=await V;if(pe)console.error("Error loading deals",pe),y([]);else{y(J||[]);const Re={},{data:at,error:Lt}=await Y.rpc("get_accessible_agents");!Lt&&Array.isArray(at)&&at.forEach(Ct=>{C.includes(Ct.user_id)&&(Re[Ct.user_id]=Ct.display_name||Ct.email||"Agent")}),x(Re)}}catch(C){console.error("Error resolving visible deals",C),y([]),x({})}finally{b(!1)}}},le=C=>{const V=te(C);return V?V.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"No due date"},De=C=>{const V=te(C.due_date);if(!V)return l.jsx("span",{className:"text-xs font-medium text-gray-500",children:"No due date"});const J=new Date;return J.setHours(0,0,0,0),V<J?l.jsx("span",{className:"text-xs font-semibold text-red-600",children:"Overdue"}):V.getTime()===J.getTime()?l.jsx("span",{className:"text-xs font-semibold text-orange-600",children:"Due today"}):l.jsx("span",{className:"text-xs font-semibold text-emerald-600",children:"Upcoming"})},Ae=C=>{E(C.deals),N(!0)},qe=async C=>{if(C.preventDefault(),!!e){if(oe(null),!P.trim()||!D){oe("Add a task name and choose a deal.");return}M(!0);try{const{error:V}=await Y.from("tasks").insert({user_id:(T==null?void 0:T.user_id)||e.id,deal_id:D,title:P.trim(),description:B.trim()||null,due_date:Q||null,completed:!1});if(V)throw V;A(""),H(""),ee(""),W(""),o("all"),await F()}catch(V){console.error("Error creating task",V),oe("Could not add this task. Please try again.")}finally{M(!1)}}},Le=p.useMemo(()=>{if(!re||c!=="all")return null;const C=new Map;return a.forEach(V=>{const J=V.user_id;C.has(J)||C.set(J,[]),C.get(J).push(V)}),Array.from(C.entries()).map(([V,J])=>({agentId:V,agentName:v[V]||q(V),tasks:J})).sort((V,J)=>V.agentName.localeCompare(J.agentName))},[a,c,re,v]),fr=async(C,V)=>{if(V.stopPropagation(),!!e){j(C.id);try{const{error:J}=await Y.from("tasks").update({completed:!0}).eq("id",C.id);if(J)throw J;n(pe=>pe.filter(Re=>Re.id!==C.id)),i(pe=>pe.filter(Re=>Re.id!==C.id))}catch(J){console.error("Error completing task",J)}finally{j(null)}}},ze=()=>{N(!1),E(null),F()};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:`${fd} p-6 space-y-5`,children:[l.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-[0.25em]",children:"Tasks"}),l.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mt-1",children:"Outstanding work"}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Track every open commitment across all deals in a single, prioritized list."})]}),l.jsx("div",{className:"w-full md:w-auto",children:l.jsx("input",{value:d,onChange:C=>f(C.target.value),placeholder:"Search by client, task, property...",className:"w-full rounded-2xl border border-white/60 bg-white/90 py-2.5 pl-4 pr-4 text-sm text-gray-900 shadow-inner placeholder:text-gray-400 focus:border-[var(--app-accent)]/40 focus:ring-2 focus:ring-[var(--app-accent)]/15 md:min-w-[280px]"})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between gap-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Task status"}),s!=="all"&&l.jsx("button",{onClick:()=>o("all"),className:"text-xs font-medium text-[var(--app-accent)] hover:underline",children:"Reset"})]}),re&&l.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Agent"})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsx("div",{className:"flex flex-wrap gap-2",children:HZ.map(C=>{const V=s===C.value;return l.jsx("button",{onClick:()=>o(C.value),className:`${KZ} ${V?C.accentClass:"border-gray-200/70 bg-white text-gray-600 hover:text-gray-900"}`,children:C.label},C.value)})}),re&&l.jsxs("select",{value:c,onChange:C=>u(C.target.value),className:"hig-input w-52",children:[l.jsx("option",{value:"all",children:"All agents"}),(Ne.length?Ne:Array.from(new Set(r.map(C=>C.user_id))).map(C=>({id:C,label:v[C]||q(C)}))).map(C=>l.jsx("option",{value:C.id,children:C.label},C.id))]})]})]})]}),l.jsxs("div",{className:`${fd} p-6 space-y-4`,children:[l.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-[0.25em]",children:"Add a task"}),l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mt-1",children:"Assign the next move"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Attach a next step to any deal without leaving this page. Keep it short, clear, and actionable."})]}),l.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white/90 px-4 py-2 text-xs font-semibold text-gray-700 shadow-inner",children:[l.jsx("span",{className:"h-2 w-2 rounded-full bg-[var(--app-accent)] shadow-[0_0_0_4px_rgba(0,122,255,0.12)]"}),w?"Loading deals":`${c==="all"?g.length:g.filter(C=>C.user_id===c).length} deals available`]})]}),l.jsxs("form",{onSubmit:qe,className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[l.jsxs("div",{className:"lg:col-span-5",children:[l.jsx("label",{className:"hig-label",children:"Task"}),l.jsx("input",{type:"text",value:P,onChange:C=>{A(C.target.value),L&&oe(null)},placeholder:"Call lender about pre-approval",className:"hig-input"})]}),l.jsxs("div",{className:"lg:col-span-4",children:[l.jsx("label",{className:"hig-label",children:"Deal"}),l.jsxs("select",{value:D,onChange:C=>{H(C.target.value),L&&oe(null)},className:"hig-input task-deal-select",disabled:w||g.length===0,children:[l.jsx("option",{value:"",children:w?"Loading deals":"Choose a deal"}),K&&Z?Object.entries(Z).map(([C,V])=>{const J=c==="all"?V:V.filter(pe=>pe.user_id===c);return[C,J]}).filter(([,C])=>C.length>0).sort((C,V)=>{const J=q(C[0]),pe=q(V[0]);return J.localeCompare(pe)}).map(([C,V])=>l.jsx("optgroup",{label:` ${q(C).toUpperCase()}  ${V.length} deal${V.length===1?"":"s"} `,children:V.map(J=>l.jsxs("option",{value:J.id,children:[J.client_name,"  ",J.property_address||"Address TBD"]},J.id))},C)):(c==="all"?g:g.filter(C=>C.user_id===c)).map(C=>l.jsxs("option",{value:C.id,children:[C.client_name,"  ",C.property_address||"Address TBD"]},C.id))]}),T&&l.jsx("p",{className:"mt-1 text-xs text-gray-500",children:T.city&&T.state?`${T.city}, ${T.state}`:T.city||T.state||"No location on file"})]}),l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("label",{className:"hig-label",children:"Due date"}),l.jsx("input",{type:"date",value:Q,onChange:C=>ee(C.target.value),className:"hig-input"})]}),l.jsx("div",{className:"lg:col-span-1 flex items-end",children:l.jsx("button",{type:"submit",className:"hig-btn-primary w-full gap-2",disabled:I||w||g.length===0,children:I?"Adding":l.jsxs(l.Fragment,{children:[l.jsx(Ma,{className:"h-4 w-4"}),"Add"]})})}),l.jsxs("div",{className:"lg:col-span-9",children:[l.jsx("label",{className:"hig-label",children:"Notes (optional)"}),l.jsx("textarea",{value:B,onChange:C=>W(C.target.value),placeholder:"Context, prep work, or key talking points",className:"hig-input min-h-[80px]"})]}),l.jsx("div",{className:"lg:col-span-3",children:l.jsxs("div",{className:"h-full rounded-xl border border-gray-200/70 bg-gray-50/80 px-4 py-3 text-sm text-gray-700 shadow-inner",children:[l.jsx("p",{className:"font-semibold text-gray-900",children:"Give it clarity"}),l.jsx("p",{className:"mt-1 text-gray-600",children:"Use short verbs, include the who/where, and set a date so it shows up in the right bucket."})]})}),L&&l.jsx("div",{className:"lg:col-span-12 text-sm text-red-600",children:L})]})]}),l.jsx("div",{className:`${fd} p-0 overflow-hidden`,children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{className:"text-left text-xs uppercase tracking-wide text-gray-500",children:[l.jsx("th",{className:"px-5 py-3",children:"Task"}),l.jsx("th",{className:"px-5 py-3",children:"Due"}),l.jsx("th",{className:"px-5 py-3",children:"Deal"}),l.jsx("th",{className:"px-5 py-3",children:"Status"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100 bg-white/90",children:h?l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"px-5 py-8 text-center text-gray-500 text-sm",children:"Loading tasks"})}):a.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"px-5 py-12 text-center text-gray-500 text-sm",children:"Nothing to show here  take a moment to plan your next steps."})}):Le&&Le.length>0?Le.map(C=>l.jsxs(lt.Fragment,{children:[l.jsx("tr",{className:"bg-[var(--app-surface-muted)] sticky top-[3.5rem] z-10",children:l.jsxs("td",{colSpan:4,className:"px-5 py-2 text-xs font-semibold text-gray-700 uppercase tracking-wide",children:[C.agentName,"  ",C.tasks.length," task",C.tasks.length===1?"":"s"]})}),C.tasks.map(V=>{var J;return l.jsxs("tr",{className:"hover:bg-[var(--app-surface-muted)]/60 cursor-pointer",onClick:()=>Ae(V),children:[l.jsx("td",{className:"px-5 py-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("button",{type:"button",className:"pt-1",onClick:pe=>fr(V,pe),disabled:_===V.id,"aria-label":"Mark task complete",children:_===V.id?l.jsx(At,{className:"h-4 w-4 text-emerald-500 animate-spin"}):V.completed?l.jsx(Ra,{className:"h-4 w-4 text-emerald-500"}):l.jsx(Pm,{className:"h-4 w-4 text-gray-300"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-gray-900",children:V.title}),((J=V.deals)==null?void 0:J.next_task_description)&&l.jsxs("p",{className:"text-xs text-gray-500",children:["Related: ",V.deals.next_task_description]})]})]})}),l.jsx("td",{className:"px-5 py-4 text-sm text-gray-700",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(jo,{className:"h-4 w-4 text-gray-400"}),l.jsx("span",{children:le(V.due_date)})]})}),l.jsx("td",{className:"px-5 py-4 text-sm text-gray-700",children:l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(jc,{className:"h-3.5 w-3.5 text-gray-400"}),l.jsx("span",{className:"font-medium text-gray-900",children:V.deals.client_name})]}),V.deals.property_address&&l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[l.jsx(p_,{className:"h-3 w-3"}),l.jsxs("span",{className:"truncate",children:[V.deals.property_address,V.deals.city?`, ${V.deals.city}`:""]})]})]})}),l.jsx("td",{className:"px-5 py-4 text-sm text-gray-700",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(hs,{className:"h-4 w-4 text-gray-400"}),De(V)]})})]},V.id)})]},C.agentId)):a.map(C=>{var V;return l.jsxs("tr",{className:"hover:bg-[var(--app-surface-muted)]/60 cursor-pointer",onClick:()=>Ae(C),children:[l.jsx("td",{className:"px-5 py-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("button",{type:"button",className:"pt-1",onClick:J=>fr(C,J),disabled:_===C.id,"aria-label":"Mark task complete",children:_===C.id?l.jsx(At,{className:"h-4 w-4 text-emerald-500 animate-spin"}):C.completed?l.jsx(Ra,{className:"h-4 w-4 text-emerald-500"}):l.jsx(Pm,{className:"h-4 w-4 text-gray-300"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-gray-900",children:C.title}),((V=C.deals)==null?void 0:V.next_task_description)&&l.jsxs("p",{className:"text-xs text-gray-500",children:["Related: ",C.deals.next_task_description]})]})]})}),l.jsx("td",{className:"px-5 py-4 text-sm text-gray-700",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(jo,{className:"h-4 w-4 text-gray-400"}),l.jsx("span",{children:le(C.due_date)})]})}),l.jsx("td",{className:"px-5 py-4 text-sm text-gray-700",children:l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(jc,{className:"h-3.5 w-3.5 text-gray-400"}),l.jsx("span",{className:"font-medium text-gray-900",children:C.deals.client_name})]}),C.deals.property_address&&l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[l.jsx(p_,{className:"h-3 w-3"}),l.jsxs("span",{className:"truncate",children:[C.deals.property_address,C.deals.city?`, ${C.deals.city}`:""]})]})]})}),l.jsx("td",{className:"px-5 py-4 text-sm text-gray-700",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(hs,{className:"h-4 w-4 text-gray-400"}),De(C)]})})]},C.id)})})]})})}),l.jsxs("section",{className:`${fd} p-6`,children:[l.jsx("div",{className:"flex items-center justify-between mb-6",children:l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Focus cues"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Where attention is needed"})]})}),l.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[l.jsxs("div",{className:"rounded-2xl border border-red-100/60 bg-red-50/70 p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm font-semibold uppercase tracking-wide",children:[l.jsx(CC,{className:"h-4 w-4"}),"Overdue"]}),l.jsx("p",{className:"mt-2 text-2xl font-semibold text-red-700",children:G.overdue}),l.jsx("p",{className:"text-xs text-red-600",children:"Tasks waiting on you"})]}),l.jsxs("div",{className:"rounded-2xl border border-amber-100/70 bg-amber-50/60 p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-amber-600 text-sm font-semibold uppercase tracking-wide",children:[l.jsx(hs,{className:"h-4 w-4"}),"Due today"]}),l.jsx("p",{className:"mt-2 text-2xl font-semibold text-amber-700",children:G.dueToday}),l.jsx("p",{className:"text-xs text-amber-600",children:"Expected before midnight"})]}),l.jsxs("div",{className:"rounded-2xl border border-emerald-100/70 bg-emerald-50/60 p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 text-sm font-semibold uppercase tracking-wide",children:[l.jsx(EC,{className:"h-4 w-4"}),"Upcoming"]}),l.jsx("p",{className:"mt-2 text-2xl font-semibold text-emerald-700",children:G.upcoming}),l.jsx("p",{className:"text-xs text-emerald-600",children:"On the horizon"})]}),l.jsxs("div",{className:"rounded-2xl border border-gray-100/70 bg-gray-50/80 p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm font-semibold uppercase tracking-wide",children:[l.jsx(Pm,{className:"h-4 w-4"}),"Unscheduled"]}),l.jsx("p",{className:"mt-2 text-2xl font-semibold text-gray-700",children:G.unscheduled}),l.jsx("p",{className:"text-xs text-gray-500",children:"Add due dates to keep momentum"})]})]}),l.jsxs("div",{className:"mt-6 rounded-2xl border border-gray-100/80 bg-[var(--app-surface-muted)] p-5",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Next actionable"}),G.nextTask?l.jsxs("div",{className:"mt-3 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:G.nextTask.title}),l.jsx("p",{className:"text-sm text-gray-600",children:G.nextTask.deals.client_name})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[l.jsx(jo,{className:"h-4 w-4 text-gray-400"}),l.jsx("span",{children:le(G.nextTask.due_date)})]})]}):l.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"No dated tasks remain. Assign due dates to keep focus on high-leverage work."})]})]}),S&&k&&l.jsx(JD,{deal:k,onClose:ze,onDelete:ze})]})}const MS="rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_8px_20px_rgba(15,23,42,0.08)]",VZ="inline-flex items-center gap-2 rounded-2xl border border-white/80 bg-white/80 px-4 py-1.5 text-sm font-medium text-gray-700 shadow-inner transition hover:-translate-y-0.5 hover:border-[var(--app-accent)]/40 hover:text-gray-900";function GZ(){const[e,t]=p.useState([]),[r,n]=p.useState(""),[a,i]=p.useState(!1),s=["Show me the deals expected to close this month.","Which clients need new activity this week?","Summarize my pipeline stage mix.","How is my projected GCI pacing for Q3?","Who owns the next step on the Torres deal?"],o=async u=>{if(u.preventDefault(),!r.trim()||a)return;const d={role:"user",content:r};t(f=>[...f,d]),n(""),i(!0);try{const{data:{session:f}}=await Y.auth.getSession();if(!f)throw new Error("Not authenticated");const h="https://gomwhbewjdcllejifdyf.supabase.co/functions/v1/luma-query",m={Authorization:`Bearer ${f.access_token}`,"Content-Type":"application/json"},g=e.slice(-6).map(w=>({role:w.role,content:w.content})),v=await(await fetch(h,{method:"POST",headers:m,body:JSON.stringify({query:d.content,conversation_history:g})})).json();if(v.error)throw new Error(v.error);const x={role:"assistant",content:v.answer,supportingData:v.supporting_data};t(w=>[...w,x])}catch(f){console.error("Luma query error:",f);const h={role:"assistant",content:"Sorry, I encountered an error processing your request. Please try again."};t(m=>[...m,h])}finally{i(!1)}},c=u=>{n(u)};return l.jsxs("div",{className:"flex h-full flex-col gap-6",children:[l.jsx("section",{className:`${MS} space-y-4 bg-white/95 px-6 py-6 sm:px-8 sm:py-8`,children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-gray-500",children:"Luma AI"}),l.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Chat with your data-aware copilot"}),l.jsx("p",{className:"max-w-3xl text-sm text-gray-600",children:"Ask natural questions about deals, tasks, lead sources, or performance and get calm answers without breaking your workflow. Luma keeps context from your workspace so you can move quickly."})]})}),l.jsxs("section",{className:`${MS} flex flex-1 flex-col overflow-hidden bg-gradient-to-b from-[#f5f9ff] to-white`,children:[l.jsxs("div",{className:"border-b border-white/60 px-4 py-5 sm:px-6",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-gray-500",children:"Conversation"}),l.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Bring up deals, follow-ups, or performance goalsLuma replies with grounded insight."})]}),l.jsxs("div",{className:"border-b border-white/60 px-4 py-4 sm:px-6",children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-gray-400",children:"Starter prompts"}),l.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:s.map((u,d)=>l.jsxs("button",{type:"button",onClick:()=>c(u),className:VZ,children:[l.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-gray-300"}),u]},d))})]}),l.jsxs("div",{className:"flex-1 space-y-4 overflow-y-auto px-4 py-6 pr-2 sm:px-6",children:[e.map((u,d)=>l.jsx("div",{className:`flex ${u.role==="user"?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:`max-w-3xl rounded-3xl px-5 py-4 ${u.role==="user"?"bg-[var(--app-accent)] text-white shadow-[0_25px_50px_rgba(0,122,255,0.25)]":"border border-white/80 bg-white/90 shadow-[0_15px_30px_rgba(15,23,42,0.08)]"}`,children:[u.role==="assistant"&&l.jsxs("div",{className:"mb-3 flex items-center gap-2 text-gray-500",children:[l.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-[var(--app-accent)]/10 text-[var(--app-accent)]",children:l.jsx(js,{className:"h-4 w-4",strokeWidth:2})}),l.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Luma"})]}),l.jsx("div",{className:`whitespace-pre-wrap text-sm leading-relaxed ${u.role==="user"?"text-white":"text-gray-900"}`,children:u.content}),u.supportingData&&l.jsx("div",{className:"mt-4 border-t border-gray-100 pt-4",children:l.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[u.supportingData.total_deals!==void 0&&l.jsx(Xs,{label:"Total Deals",value:u.supportingData.total_deals,accent:"blue"}),u.supportingData.total_gci!==void 0&&l.jsx(Xs,{label:"Total GCI",value:`$${u.supportingData.total_gci.toLocaleString("en-US",{maximumFractionDigits:0})}`,accent:"green"}),u.supportingData.closed_deals!==void 0&&l.jsx(Xs,{label:"Closed Deals",value:u.supportingData.closed_deals,accent:"indigo"}),u.supportingData.active_deals!==void 0&&l.jsx(Xs,{label:"Active Deals",value:u.supportingData.active_deals,accent:"orange"}),u.supportingData.under_contract!==void 0&&l.jsx(Xs,{label:"Under Contract",value:u.supportingData.under_contract,accent:"purple"}),u.supportingData.team_members!==void 0&&l.jsx(Xs,{label:"Team Members",value:u.supportingData.team_members,accent:"teal"})]})})]})},d)),a&&l.jsx("div",{className:"flex justify-start",children:l.jsxs("div",{className:"max-w-3xl rounded-3xl border border-white/80 bg-white/90 px-5 py-4 shadow-[0_15px_30px_rgba(15,23,42,0.08)]",children:[l.jsxs("div",{className:"mb-2 flex items-center gap-2 text-gray-500",children:[l.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-[var(--app-accent)]/10 text-[var(--app-accent)]",children:l.jsx(js,{className:"h-4 w-4"})}),l.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Luma"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400"}),l.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400",style:{animationDelay:"0.1s"}}),l.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400",style:{animationDelay:"0.2s"}})]})]})})]}),l.jsx("form",{onSubmit:o,className:"border-t border-white/60 bg-white/80 px-4 py-4 backdrop-blur sm:px-6",children:l.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end",children:[l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsx("div",{className:"rounded-2xl border border-[#d0e2ff] bg-white px-4 py-3 shadow-inner focus-within:border-[var(--app-accent)]/40 focus-within:ring-2 focus-within:ring-[var(--app-accent)]/15",children:l.jsx("input",{type:"text",value:r,onChange:u=>n(u.target.value),placeholder:"Ask Luma anything about your pipeline...",className:"w-full border-none bg-transparent text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none",disabled:a})}),l.jsx("p",{className:"text-[11px] text-gray-500",children:"Enter to send  Luma respects the same roles as PipelineIQ."})]}),l.jsxs("button",{type:"submit",disabled:a||!r.trim(),className:"inline-flex items-center justify-center gap-2 rounded-2xl bg-[rgb(0,122,255)] px-6 py-3 text-sm font-semibold text-white shadow-[0_20px_40px_rgba(0,122,255,0.35)] transition hover:bg-[rgb(0,100,210)] disabled:opacity-60",children:[l.jsx(X3,{className:"h-4 w-4"}),l.jsx("span",{children:"Send"})]})]})})]})]})}const YZ={blue:"from-blue-50 to-blue-100 text-blue-900",green:"from-emerald-50 to-emerald-100 text-emerald-900",indigo:"from-indigo-50 to-indigo-100 text-indigo-900",orange:"from-orange-50 to-orange-100 text-orange-900",purple:"from-purple-50 to-purple-100 text-purple-900",teal:"from-teal-50 to-teal-100 text-teal-900"};function Xs({label:e,value:t,accent:r}){return l.jsxs("div",{className:`rounded-2xl bg-gradient-to-br ${YZ[r]} px-4 py-3`,children:[l.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-500",children:e}),l.jsx("div",{className:"text-xl font-semibold text-gray-900",children:t})]})}function XZ({status:e,onEdit:t,onDelete:r}){const{attributes:n,listeners:a,setNodeRef:i,transform:s,transition:o,isDragging:c}=Lh({id:e.id}),u={transform:Vn.Transform.toString(s),transition:o,opacity:c?.5:1},d=Bh(e.color);return l.jsxs("div",{ref:i,style:u,className:"bg-white border border-gray-200/60 rounded-xl p-4 flex items-center gap-4 hover:shadow-sm hover:border-gray-300 transition-all",children:[l.jsx("div",{...n,...a,className:"cursor-grab active:cursor-grabbing",children:l.jsx(C0,{className:"w-5 h-5 text-gray-400"})}),l.jsxs("div",{className:"flex-1 flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-4 h-4 rounded-full shadow-sm",style:{backgroundColor:d.bg}}),l.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.name})]}),l.jsxs("span",{className:"text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded-lg",children:["Order: ",e.sort_order]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>t(e),className:"p-2 text-gray-600 hover:text-[rgb(0,122,255)] hover:bg-blue-50 rounded-lg transition",title:"Edit status",children:l.jsx(MC,{className:"w-4 h-4",strokeWidth:2})}),l.jsx("button",{onClick:()=>r(e.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete status",children:l.jsx(Ei,{className:"w-4 h-4",strokeWidth:2})})]})]})}function JZ({status:e,onPersonalize:t,onResetOverride:r,hasPersonalOverride:n}){const a=Bh(e.color);return l.jsxs("div",{className:"bg-white border border-gray-200/60 rounded-xl p-4 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:a.bg}}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.name}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Order ",e.sort_order]}),n&&l.jsx("p",{className:"text-[11px] font-semibold text-[rgb(0,122,255)]",children:"Personalized"})]})]}),t?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>t(e),className:"px-3 py-1.5 text-xs font-semibold text-[rgb(0,122,255)] hover:bg-blue-50 rounded-lg transition",children:"Personalize color"}),n&&r&&l.jsx("button",{onClick:()=>r(e.id),className:"px-3 py-1.5 text-xs font-semibold text-gray-500 hover:bg-gray-100 rounded-lg transition",children:"Reset"})]}):l.jsx("span",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:"View only"})]})}function QZ({canEdit:e=!0}){const{statuses:t,loading:r,addStatus:n,updateStatus:a,deleteStatus:i,reorderStatuses:s,applyTemplate:o,createCustomWorkflow:c,colorOverrides:u,setPersonalStatusColor:d,clearPersonalStatusColor:f}=QD(),[h,m]=p.useState(!1),[g,y]=p.useState(!1),[v,x]=p.useState(null),[w,b]=p.useState(""),[_,j]=p.useState(eo),[S,N]=p.useState(null),[k,E]=p.useState(!1),[P,A]=p.useState(null),[D,H]=p.useState(null),Q=Ah(Oh(nl,{activationConstraint:{distance:8}})),ee=async O=>{const{active:q,over:te}=O;if(!te||q.id===te.id)return;const $=t.findIndex(Z=>Z.id===q.id),G=t.findIndex(Z=>Z.id===te.id),T=[...t],[K]=T.splice($,1);T.splice(G,0,K);try{await s(T)}catch(Z){console.error("Error reordering:",Z),N("Failed to reorder statuses")}},B=async()=>{if(!w.trim()){N("Status name is required");return}E(!0),N(null);try{v?await a(v.id,{name:w.trim(),color:_}):await n(w.trim(),_),W()}catch(O){console.error("Error saving status:",O),N(O instanceof Error?O.message:"Failed to save status")}finally{E(!1)}},W=()=>{y(!1),x(null),b(""),j(eo),N(null)},I=async O=>{if(confirm("Are you sure you want to delete this status? This action cannot be undone."))try{await i(O)}catch(q){console.error("Error deleting status:",q),N(q instanceof Error?q.message:"Failed to delete status")}},M=O=>{x(O),b(O.name),j(Fh(O.color)||eo),y(!0)},L=async O=>{try{await o(O)}catch(q){throw console.error("Error applying template:",q),q}},oe=O=>{A(O),H(O.color||eo)},re=()=>{!P||!D||(d(P.id,D),A(null))},Ne=O=>{if(!P&&!O)return;const q=O||(P==null?void 0:P.id);q&&(f(q),O||A(null))};return r?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx(At,{className:"w-8 h-8 animate-spin text-[rgb(0,122,255)]"})}):l.jsxs("div",{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Pipeline Statuses"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Customize your pipeline stages, colors, and workflow order"}),!e&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Viewing workspace stages from your workspace. You can personalize colors without changing the shared setup."})]}),S&&l.jsxs("div",{className:"mb-4 flex items-center gap-3 p-4 rounded-xl bg-red-50 text-red-700 border border-red-200/60",children:[l.jsx(Ia,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:S})]}),e&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-6",children:[l.jsxs("button",{onClick:()=>{b(""),j(eo),y(!0)},className:"hig-btn-primary",children:[l.jsx(Ma,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Add Status"})]}),l.jsxs("button",{onClick:()=>m(!0),className:"hig-btn-secondary",children:[l.jsx(Y3,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Load Template"})]})]}),h&&l.jsx(ZD,{onClose:()=>m(!1),onSelect:L,onCreateCustomWorkflow:c})]}),t.length===0?l.jsxs("div",{className:"bg-gray-50 rounded-xl p-12 text-center border border-gray-200/60",children:[l.jsx("p",{className:"text-gray-600 mb-4",children:"No pipeline stages configured"}),e?l.jsx("button",{onClick:()=>m(!0),className:"hig-btn-primary",children:"Load a Template to Get Started"}):l.jsx("p",{className:"text-sm text-gray-500",children:"Ask an admin to configure stages for this workspace."})]}):e?l.jsx(Ih,{sensors:Q,collisionDetection:A0,onDragEnd:ee,children:l.jsx($h,{items:t.map(O=>O.id),strategy:pE,children:l.jsx("div",{className:"space-y-3",children:t.map(O=>l.jsx(XZ,{status:O,onEdit:M,onDelete:I},O.id))})})}):l.jsx("div",{className:"space-y-3",children:t.map(O=>l.jsx(JZ,{status:O,hasPersonalOverride:!!u[O.id],onPersonalize:e?void 0:oe,onResetOverride:e?void 0:()=>Ne(O.id)},O.id))}),e&&g&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[l.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200/60",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:v?"Edit Status":"Add New Status"}),l.jsx("button",{onClick:W,className:"text-gray-400 hover:text-gray-600 transition p-2 hover:bg-gray-100 rounded-lg",children:l.jsx(Ss,{className:"w-5 h-5",strokeWidth:2})})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Status Name"}),l.jsx("input",{type:"text",value:w,onChange:O=>b(O.target.value),className:"hig-input",placeholder:"e.g., Inspection, Appraisal",autoFocus:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:"Color"}),l.jsx(DS,{value:_,onChange:j})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200/60 bg-gray-50/50",children:[l.jsx("button",{onClick:W,className:"hig-btn-secondary",children:"Cancel"}),l.jsx("button",{onClick:B,disabled:k||!w.trim(),className:"hig-btn-primary",children:k?l.jsxs(l.Fragment,{children:[l.jsx(At,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving..."})]}):l.jsxs("span",{children:[v?"Update":"Add"," Status"]})})]})]})}),!e&&P&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[l.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200/60",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:['Personalize "',P.name,'"']}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Changes apply only to your view. Workspace defaults stay intact."})]}),l.jsx("button",{onClick:()=>A(null),className:"text-gray-400 hover:text-gray-600 transition p-2 hover:bg-gray-100 rounded-lg",children:l.jsx(Ss,{className:"w-5 h-5",strokeWidth:2})})]}),l.jsx("div",{className:"p-6 space-y-6",children:l.jsx(DS,{value:D,onChange:H})}),l.jsxs("div",{className:"flex justify-between items-center gap-3 p-6 border-t border-gray-200/60 bg-gray-50/50",children:[l.jsx("button",{onClick:()=>Ne(),className:"text-sm font-semibold text-gray-600 hover:text-gray-800 hover:bg-gray-100 px-3 py-2 rounded-lg transition",children:"Use workspace default"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>A(null),className:"hig-btn-secondary",children:"Cancel"}),l.jsx("button",{onClick:re,className:"hig-btn-primary",children:"Save for me"})]})]})]})})]})}const Js=()=>({name:"",brokerage_split_rate:20,payout_structure:"standard",partnership_split_rate:35,partnership_notes:""});function ZZ({canEdit:e=!0}){const{user:t,roleInfo:r}=kt(),n=(r==null?void 0:r.teamId)||null,[a,i]=p.useState([]),[s,o]=p.useState(!0),[c,u]=p.useState(!1),[d,f]=p.useState(!1),[h,m]=p.useState(null),[g,y]=p.useState(null),[v,x]=p.useState(Js()),[w,b]=p.useState(null),[_,j]=p.useState("all"),[S,N]=p.useState("");p.useEffect(()=>{k()},[t==null?void 0:t.id,n]);const k=async()=>{if(t){o(!0);try{const{data:I,error:M}=n?await Y.from("lead_sources").select("*").eq("team_id",n).order("sort_order",{ascending:!0,nullsLast:!0}).order("name",{ascending:!0}):{data:null,error:null};if(M)throw M;const L=!!(I!=null&&I.length),{data:oe,error:re}=L?{data:I,error:null}:await Y.from("lead_sources").select("*").eq("user_id",t.id).order("sort_order",{ascending:!0,nullsLast:!0}).order("name",{ascending:!0});if(re)throw re;if(!oe){i([]),o(!1);return}const Ne=[...oe].sort((q,te)=>q.sort_order===te.sort_order?q.name.localeCompare(te.name):(q.sort_order??0)-(te.sort_order??0));if(Ne.some((q,te)=>q.sort_order!==te+1)){const q=Ne.map((te,$)=>({...te,sort_order:$+1}));i(q),await Promise.all(q.map((te,$)=>Y.from("lead_sources").update({sort_order:$+1}).eq("id",te.id)))}else i(Ne)}catch(I){console.error("Error loading lead sources:",I),b(I instanceof Error?I.message:"Failed to load lead sources")}finally{o(!1)}}},E=async I=>{if(I.preventDefault(),!e||!t||!v.name.trim()){b("Lead source name is required");return}if(!(r!=null&&r.workspaceId)){b("Workspace is required to add a lead source.");return}u(!0),b(null);try{const M=parseFloat(v.brokerage_split_rate||""),L=Number.isNaN(M)?0:M,oe=v.partnership_split_rate??0,re=Number.isNaN(oe)?0:oe,Ne={name:v.name,team_id:n,brokerage_split_rate:L/100,payout_structure:v.payout_structure,partnership_split_rate:v.payout_structure==="partnership"?re/100:null,partnership_notes:v.payout_structure==="partnership"&&v.partnership_notes.trim()||null,workspace_id:r.workspaceId};if(h){const{error:O}=await Y.from("lead_sources").update(Ne).eq("id",h.id);if(O)throw O}else{const O=a.reduce((te,$)=>Math.max(te,$.sort_order??0),0),{error:q}=await Y.from("lead_sources").insert({user_id:t.id,sort_order:O+1,...Ne});if(q)throw q}f(!1),x(Js()),m(null),k()}catch(M){console.error("Error saving lead source:",M),b(M instanceof Error?M.message:"Failed to save lead source")}finally{u(!1)}},P=I=>{e&&(m(I),x({name:I.name,brokerage_split_rate:I.brokerage_split_rate*100,payout_structure:I.payout_structure,partnership_split_rate:(I.partnership_split_rate??.35)*100,partnership_notes:I.partnership_notes||""}),f(!0),b(null))},A=async I=>{if(e&&confirm("Are you sure you want to delete this lead source? This action cannot be undone."))try{const{error:M}=await Y.from("lead_sources").delete().eq("id",I);if(M)throw M;k()}catch(M){console.error("Error deleting lead source:",M),b(M instanceof Error?M.message:"Failed to delete lead source")}},D=[{value:"standard",title:"Standard Split",description:"Only your brokerage split applies."},{value:"partnership",title:"Partnership Program",description:"Pay the partner first, then split the remainder with your brokerage."}],H=[{value:"all",label:"All sources"},{value:"standard",label:"Standard"},{value:"partnership",label:"Partnership"}],Q=Ah(Oh(nl,{activationConstraint:{distance:3}})),ee=p.useMemo(()=>{const I=S.trim().toLowerCase();return a.filter(M=>{const L=_==="all"||M.payout_structure===_,oe=!I||[M.name,M.partnership_notes||""].some(re=>re.toLowerCase().includes(I));return L&&oe})},[a,S,_]),B=e&&_==="all"&&S.trim()==="",W=async I=>{if(y(null),!B)return;const{active:M,over:L}=I;if(!L||M.id===L.id)return;const oe=a.findIndex($=>$.id===M.id),re=a.findIndex($=>$.id===L.id);if(oe===-1||re===-1)return;const O=Rh(a,oe,re).map(($,G)=>({...$,sort_order:G+1}));i(O);const q=new Map(a.map($=>[$.id,$.sort_order])),te=O.filter($=>$.sort_order!==q.get($.id));try{te.length>0&&await Promise.all(te.map($=>Y.from("lead_sources").update({sort_order:$.sort_order}).eq("id",$.id)))}catch($){console.error("Error reordering lead sources:",$),b("Unable to save lead source order. Please try again."),k()}};return s?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx(At,{className:"w-8 h-8 animate-spin text-[rgb(0,122,255)]"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"space-y-3",children:l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"hig-text-heading mb-1",children:"Lead Sources"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Track partner programs, portals, and referral channels."}),!e&&l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"You can review workspace lead sources. Only admins can make edits."})]}),e&&l.jsxs("button",{onClick:()=>{f(!0),m(null),x(Js()),b(null)},className:"hig-btn-primary self-start",children:[l.jsx(Ma,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Add Lead Source"})]})]})}),w&&l.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-red-200/70 bg-red-50 px-4 py-3 text-red-700",children:[l.jsx(Ia,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:w})]}),l.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{className:"relative w-full md:w-72",children:[l.jsx(E0,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",value:S,onChange:I=>N(I.target.value),placeholder:"Search lead sources",className:"w-full rounded-2xl border border-gray-200/70 bg-white/90 py-2 pl-9 pr-3 text-sm text-gray-900 shadow-inner focus:border-[var(--app-accent)]/50 focus:ring-2 focus:ring-[var(--app-accent)]/20"})]}),l.jsx("div",{className:"inline-flex flex-wrap gap-2 rounded-2xl border border-gray-200/70 bg-white/80 p-1.5 shadow-inner",children:H.map(I=>{const M=_===I.value;return l.jsx("button",{type:"button",onClick:()=>j(I.value),className:`rounded-xl px-3 py-1.5 text-sm font-medium transition ${M?"bg-gray-900 text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:I.label},I.value)})})]}),e&&l.jsx("p",{className:"text-xs text-gray-400",children:"Drag handles appear when viewing all sources without filters so you can reorder tiles."}),a.length===0?l.jsxs("div",{className:"rounded-2xl border border-dashed border-gray-300 bg-gray-50/80 p-10 text-center",children:[l.jsx(BC,{className:"mx-auto mb-4 h-10 w-10 text-gray-400",strokeWidth:1.5}),l.jsx("p",{className:"text-gray-600 mb-2 font-medium",children:"No lead sources configured"}),l.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Add your first lead source to start tracking where your deals originate."}),e?l.jsxs("button",{onClick:()=>{f(!0),m(null),x(Js()),b(null)},className:"hig-btn-primary",children:[l.jsx(Ma,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Add Lead Source"})]}):l.jsx("p",{className:"text-xs text-gray-500",children:"Ask a workspace admin to configure lead sources."})]}):ee.length===0?l.jsx("div",{className:"rounded-2xl border border-gray-200/70 bg-white/80 p-10 text-center text-sm text-gray-500",children:"No sources match your filters."}):l.jsxs(Ih,{sensors:Q,collisionDetection:A0,onDragStart:I=>{const M=a.find(L=>L.id===I.active.id);y(M||null)},onDragEnd:W,onDragCancel:()=>y(null),children:[l.jsx($h,{items:ee.map(I=>I.id),strategy:Mh,children:l.jsx("div",{className:"grid w-full gap-4",style:{gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))"},children:ee.map(I=>l.jsx(eee,{source:I,canEdit:e,disableDrag:!B,onEdit:()=>P(I),onDelete:()=>A(I.id)},I.id))})}),l.jsx(hE,{dropAnimation:{duration:200,easing:"ease"},children:g?l.jsx(tee,{source:g}):null})]}),e&&d&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[l.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200/60",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:h?"Edit Lead Source":"Add Lead Source"}),l.jsx("button",{onClick:()=>{f(!1),m(null),x(Js()),b(null)},className:"text-gray-400 hover:text-gray-600 transition p-2 hover:bg-gray-100 rounded-lg",children:l.jsx(Ss,{className:"w-5 h-5",strokeWidth:2})})]}),l.jsxs("form",{onSubmit:E,className:"p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Source Name"}),l.jsx("input",{type:"text",value:v.name,onChange:I=>x({...v,name:I.target.value}),className:"hig-input",placeholder:"e.g., Zillow, Past Client, Open House",required:!0,autoFocus:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:"Deal Structure"}),l.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:D.map(I=>{const M=v.payout_structure===I.value;return l.jsxs("button",{type:"button",onClick:()=>x({...v,payout_structure:I.value}),className:`text-left rounded-2xl border p-4 transition-all ${M?"border-[rgb(0,122,255)] bg-[rgb(0,122,255)]/5":"border-gray-200 hover:border-gray-300"}`,children:[l.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-1",children:I.title}),l.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:I.description})]},I.value)})}),l.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Choose partnership when working with platforms like Redfin or Zillow that take their fee before your team split."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Brokerage Split Rate"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",step:"0.5",value:v.brokerage_split_rate,onChange:I=>x({...v,brokerage_split_rate:Number.isNaN(parseFloat(I.target.value))?0:parseFloat(I.target.value)}),className:"hig-input pr-8",placeholder:"20",min:"0",max:"100"}),l.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]}),l.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Percentage of the remaining commission that goes to your brokerage/team."})]}),v.payout_structure==="partnership"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Partner Split Rate"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",step:"0.5",value:v.partnership_split_rate,onChange:I=>x({...v,partnership_split_rate:Number.isNaN(parseFloat(I.target.value))?0:parseFloat(I.target.value)}),className:"hig-input pr-8",placeholder:"35",min:"0",max:"100"}),l.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]}),l.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Portion of the gross commission that goes to the partner program before any brokerage split."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Partner Notes"}),l.jsx("textarea",{value:v.partnership_notes,onChange:I=>x({...v,partnership_notes:I.target.value}),className:"hig-input min-h-[88px]",placeholder:"e.g., Pay Redfin 35% within 5 days, then 50/50 split with brokerage"})]})]}),l.jsxs("div",{className:"rounded-2xl border border-gray-200/70 bg-gray-50/60 p-4",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-3",children:"Payout Preview"}),l.jsxs("ol",{className:"space-y-3 text-sm text-gray-800",children:[v.payout_structure==="partnership"&&l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"inline-flex w-7 h-7 items-center justify-center rounded-full bg-[rgb(0,122,255)]/10 text-[rgb(0,122,255)] text-xs font-semibold",children:"1"}),"Pay partner first (",v.partnership_split_rate||0,"% of gross commission)"]}),l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"inline-flex w-7 h-7 items-center justify-center rounded-full bg-[rgb(0,122,255)]/10 text-[rgb(0,122,255)] text-xs font-semibold",children:v.payout_structure==="partnership"?"2":"1"}),"Split the remaining commission with your brokerage (",v.brokerage_split_rate||0,"% to broker)"]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-2 border-t border-gray-200/60",children:[l.jsx("button",{type:"button",onClick:()=>{f(!1),m(null),x(Js()),b(null)},className:"hig-btn-secondary",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:c||!v.name.trim(),className:"hig-btn-primary",children:c?l.jsxs(l.Fragment,{children:[l.jsx(At,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving..."})]}):l.jsxs("span",{children:[h?"Update":"Add"," Source"]})})]})]})]})})]})}function eee({source:e,canEdit:t,disableDrag:r,onEdit:n,onDelete:a}){const{attributes:i,listeners:s,setNodeRef:o,transform:c,transition:u,isDragging:d}=Lh({id:e.id,disabled:r}),f={transform:Vn.Transform.toString(c),transition:u??"transform 200ms ease"},h=e.payout_structure==="partnership",m=`${(e.brokerage_split_rate*100).toFixed(1)}%`,g=h?`${((e.partnership_split_rate??0)*100).toFixed(1)}%`:null;return l.jsxs("div",{ref:o,style:f,className:`w-full rounded-[24px] border border-gray-200/80 bg-white/95 p-4 shadow-[0_14px_40px_rgba(15,23,42,0.08)] transition ${d?"ring-2 ring-[var(--app-accent)]/40 shadow-[0_20px_50px_rgba(15,23,42,0.15)]":"hover:border-gray-300/80 hover:shadow-[0_24px_60px_rgba(15,23,42,0.12)]"}`,children:[l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[t&&l.jsx("button",{type:"button",...i,...s,disabled:r,className:`rounded-full border border-gray-200/70 bg-white/80 p-2 text-gray-400 transition ${r?"cursor-not-allowed opacity-40":"cursor-grab hover:text-gray-700 active:cursor-grabbing"}`,"aria-label":"Drag to reorder lead source",children:l.jsx(C0,{className:"h-4 w-4"})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-1 text-[11px] font-semibold tracking-[0.35em] text-gray-500",children:[h?l.jsx(TC,{className:"h-3 w-3 text-[var(--app-accent)]",strokeWidth:2}):l.jsx(js,{className:"h-3 w-3 text-gray-500",strokeWidth:2}),l.jsx("span",{className:h?"text-[var(--app-accent)]":"",children:h?"PARTNERSHIP":"STANDARD"})]}),l.jsx("h3",{className:"mt-1 text-base font-semibold text-gray-900",children:e.name})]})]}),t?l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:n,className:"rounded-xl p-1.5 text-gray-600 transition hover:bg-blue-50 hover:text-[var(--app-accent)]",title:"Edit lead source",children:l.jsx(MC,{className:"h-4 w-4",strokeWidth:2})}),l.jsx("button",{onClick:a,className:"rounded-xl p-1.5 text-gray-600 transition hover:bg-red-50 hover:text-red-600",title:"Delete lead source",children:l.jsx(Ei,{className:"h-4 w-4",strokeWidth:2})})]}):l.jsx("span",{className:"text-[11px] uppercase tracking-[0.35em] text-gray-400",children:"View only"})]}),l.jsxs("div",{className:"mt-4 rounded-[20px] border border-gray-100 bg-gray-50/80 px-3 py-3 text-sm",children:[h&&g&&l.jsxs("div",{className:"mb-2 flex items-center justify-between text-gray-600",children:[l.jsx("span",{children:"Partner share"}),l.jsx("span",{className:"font-semibold text-gray-900",children:g})]}),l.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[l.jsx("span",{children:"Broker split"}),l.jsx("span",{className:"font-semibold text-gray-900",children:m})]})]}),e.partnership_notes&&l.jsx("p",{className:"mt-3 rounded-[18px] border border-gray-100 bg-white/80 px-3 py-2 text-[12px] text-gray-600 shadow-inner line-clamp-2",children:e.partnership_notes})]})}function tee({source:e}){const t=e.payout_structure==="partnership",r=`${(e.brokerage_split_rate*100).toFixed(1)}%`,n=t?`${((e.partnership_split_rate??0)*100).toFixed(1)}%`:null;return l.jsxs("div",{className:"w-full rounded-[24px] border border-gray-200/80 bg-white/95 p-4 shadow-[0_18px_40px_rgba(15,23,42,0.15)]",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[11px] font-semibold tracking-[0.35em] text-gray-500",children:[t?l.jsx(TC,{className:"h-3.5 w-3.5 text-[var(--app-accent)]",strokeWidth:2}):l.jsx(js,{className:"h-3.5 w-3.5 text-gray-500",strokeWidth:2}),l.jsx("span",{className:t?"text-[var(--app-accent)]":"",children:t?"PARTNERSHIP":"STANDARD"})]}),l.jsx("h3",{className:"mt-2 text-base font-semibold text-gray-900",children:e.name}),l.jsxs("div",{className:"mt-4 rounded-[20px] border border-gray-100 bg-gray-50/80 px-3 py-3 text-sm",children:[t&&n&&l.jsxs("div",{className:"mb-2 flex items-center justify-between text-gray-600",children:[l.jsx("span",{children:"Partner share"}),l.jsx("span",{className:"font-semibold text-gray-900",children:n})]}),l.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[l.jsx("span",{children:"Broker split"}),l.jsx("span",{className:"font-semibold text-gray-900",children:r})]})]})]})}function eI(){const{roleInfo:e}=kt(),t=(e==null?void 0:e.workspaceId)||null,[r,n]=p.useState(null),[a,i]=p.useState(!0),[s,o]=p.useState(null),c=p.useCallback(async()=>{if(!t){n(null),i(!1);return}i(!0),o(null);const{data:d,error:f}=await Y.from("workspace_settings").select("*").eq("id",t).maybeSingle();f?(console.error("Error loading workspace settings:",f),o("Unable to load workspace settings.")):n(d),i(!1)},[t]);return p.useEffect(()=>{c()},[c]),{workspace:r,loading:a,error:s,refresh:c,updateWorkspace:async d=>{if(!t)return{error:new Error("Workspace not found")};const{data:f,error:h}=await Y.from("workspace_settings").update({...d,updated_at:new Date().toISOString()}).eq("id",t).select("*").maybeSingle();return h?(console.error("Error updating workspace settings:",h),{error:h}):(f&&n(f),{error:null})}}}function ree({canEdit:e}){const{workspace:t,loading:r,updateWorkspace:n}=eI(),[a,i]=p.useState({name:"",company_name:"",timezone:"America/Los_Angeles",locale:"en-US"}),[s,o]=p.useState(!1),[c,u]=p.useState(null);p.useEffect(()=>{t&&i({name:t.name||"",company_name:t.company_name||"",timezone:t.timezone||"America/Los_Angeles",locale:t.locale||"en-US"})},[t]);const d=async f=>{if(f.preventDefault(),!e)return;o(!0),u(null);const{error:h}=await n(a);u(h?{type:"error",text:"Unable to update workspace info."}:{type:"success",text:"Workspace updated."}),o(!1)};return r?l.jsx("div",{className:"flex items-center justify-center py-10",children:l.jsx(At,{className:"w-6 h-6 animate-spin text-[var(--app-accent)]"})}):l.jsxs("div",{className:"max-w-2xl",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Company Info"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Company identity, locale, and defaults shared with your agents and teams."}),!e&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Workspace details are managed by admins. You can view but not edit."})]}),l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Company Name"}),l.jsx("input",{type:"text",value:a.name,onChange:f=>i(h=>({...h,name:f.target.value})),className:"hig-input",disabled:!e,placeholder:"Luminex Realty Group"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Timezone"}),l.jsxs("select",{value:a.timezone,onChange:f=>i(h=>({...h,timezone:f.target.value})),className:"hig-input",disabled:!e,children:[l.jsx("option",{value:"America/Los_Angeles",children:"Pacific (PT)"}),l.jsx("option",{value:"America/Denver",children:"Mountain (MT)"}),l.jsx("option",{value:"America/Chicago",children:"Central (CT)"}),l.jsx("option",{value:"America/New_York",children:"Eastern (ET)"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Locale"}),l.jsxs("select",{value:a.locale,onChange:f=>i(h=>({...h,locale:f.target.value})),className:"hig-input",disabled:!e,children:[l.jsx("option",{value:"en-US",children:"English (US)"}),l.jsx("option",{value:"en-CA",children:"English (Canada)"}),l.jsx("option",{value:"es-US",children:"Espaol"})]})]})]}),c&&l.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${c.type==="error"?"bg-red-50 text-red-700 border-red-200/60":"bg-green-50 text-green-700 border-green-200/60"}`,children:[c.type==="error"?l.jsx(Ia,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}):l.jsx(Ra,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:c.text})]}),e&&l.jsx("button",{type:"submit",className:"hig-btn-primary",disabled:s,children:s?l.jsxs(l.Fragment,{children:[l.jsx(At,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving"})]}):l.jsxs(l.Fragment,{children:[l.jsx(Nh,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Save Workspace"})]})})]})]})}const $S={crm:{provider:"Follow Up Boss",description:"Sync contacts + deals bi-directionally.",status:"not_connected"},email:{provider:"Google Workspace",description:"Log emails to deals and trigger automations.",status:"not_connected"},marketing:{provider:"Zapier",description:"Push new leads into PipelineIQ automatically.",status:"not_connected"}};function nee({canEdit:e}){const{workspace:t,updateWorkspace:r}=eI(),[n,a]=p.useState($S),[i,s]=p.useState(null);p.useEffect(()=>{if(t!=null&&t.integration_settings){const c=t.integration_settings;a({...$S,...c})}},[t==null?void 0:t.integration_settings]);const o=async c=>{if(!e)return;s(c);const u=n[c].status==="connected"?"not_connected":"connected",d={...n,[c]:{...n[c],status:u,lastSync:u==="connected"?new Date().toISOString():void 0}};a(d),await r({integration_settings:d}),s(null)};return l.jsxs("div",{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Integrations"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Connect your CRM, email, and marketing tools so deals stay in sync."}),!e&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only workspace admins can manage integrations."})]}),l.jsx("div",{className:"space-y-4",children:Object.entries(n).map(([c,u])=>l.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-gray-200/70 bg-white/80 px-4 py-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:u.provider}),l.jsx("p",{className:"text-xs text-gray-500",children:u.description}),u.lastSync&&l.jsxs("p",{className:"text-[11px] text-gray-400 mt-1",children:["Last sync ",new Date(u.lastSync).toLocaleString()]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:`text-xs font-semibold ${u.status==="connected"?"text-emerald-600":"text-gray-500"}`,children:u.status==="connected"?"Connected":"Not connected"}),l.jsx("button",{type:"button",onClick:()=>o(c),disabled:!e||i===c,className:`rounded-full border px-4 py-2 text-sm font-semibold transition ${u.status==="connected"?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-gray-50 text-gray-600 border-gray-200"} ${e?"":"opacity-50 cursor-not-allowed"}`,children:u.status==="connected"?l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(Q3,{className:"w-4 h-4"}),"Disconnect"]}):l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(J3,{className:"w-4 h-4"}),"Connect"]})})]})]},c))})]})}const aee=[{title:"Deal Templates",description:"Define repeatable sets of tasks, stages, and documents for each pipeline type."},{title:"Custom Fields",description:"Capture additional data points (loan type, co-borrower, transaction coordinator) across every deal."},{title:"Default Views",description:"Control which boards, filters, and metrics new team members inherit on first login."}];function iee({canEdit:e}){return l.jsxs("div",{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Shared Configuration"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Templates, custom fields, and default views that keep your workspace aligned."}),!e&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ask an admin to adjust shared templates or defaults for the workspace."})]}),l.jsx("div",{className:"space-y-4",children:aee.map(t=>l.jsx("div",{className:"rounded-2xl border border-gray-200/70 bg-white px-4 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:t.title}),l.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),l.jsx("button",{type:"button",className:`px-4 py-2 rounded-2xl border text-sm font-medium ${e?"border-gray-200 text-gray-700 hover:bg-gray-50":"border-gray-100 text-gray-400 cursor-not-allowed"}`,disabled:!e,children:e?"Configure":"View only"})]})},t.title))})]})}function see(e){const[t,r]=p.useState([]),[n,a]=p.useState(!1),[i,s]=p.useState(null),o=p.useCallback(async()=>{if(!e)return;a(!0),s(null);const{data:u,error:d}=await Y.rpc("get_workspace_members",{p_workspace_id:e});d?(s(d.message),r([])):r(u||[]),a(!1)},[e]);p.useEffect(()=>{o()},[o]);const c=p.useCallback(async(u,d,f)=>{const{error:h}=await Y.rpc("manage_workspace_member",{target_user:u,action:d,new_role:f??null});return h||await o(),{error:h}},[o]);return{members:t,loading:n,error:i,refresh:o,changeRole:(u,d)=>c(u,"update_role",d),deactivate:u=>c(u,"deactivate"),reactivate:u=>c(u,"reactivate"),remove:u=>c(u,"delete"),updateTeam:async(u,d)=>{if(!d)return{error:new Error("Team is required")};const{error:f}=await Y.from("user_teams").delete().eq("user_id",u);if(f)return{error:f};const{error:h}=await Y.from("user_teams").upsert({user_id:u,team_id:d,role:"agent"});return h?{error:h}:(await o(),{error:null})}}}function yb(e){const[t,r]=p.useState([]),[n,a]=p.useState(!1),i=p.useCallback(async()=>{if(!e)return;a(!0);const{data:o,error:c}=await Y.rpc("get_workspace_teams",{p_workspace_id:e});r(c?[]:o||[]),a(!1)},[e]);p.useEffect(()=>{i()},[i]);const s=p.useCallback(async(o,c)=>{if(!e)return{error:new Error("Workspace is required")};const u=o.trim();if(!u)return{error:new Error("Team name is required")};const{data:d,error:f}=await Y.from("teams").insert({name:u}).select("id, name").single();if(f||!d)return{error:f};if(c){const{error:h}=await Y.from("user_teams").upsert({user_id:c,team_id:d.id,role:"team_lead"});if(h)return{error:h}}return await i(),{error:null}},[e,i]);return{teams:t,loading:n,refresh:i,createTeam:s}}const oee=["admin","sales_manager","team_lead","agent"];function lee(){const{roleInfo:e,user:t}=kt(),r=(e==null?void 0:e.workspaceId)||null,n=NC(e),[a,i]=p.useState(null),{members:s,loading:o,error:c,changeRole:u,deactivate:d,reactivate:f,remove:h,updateTeam:m}=see(r),{teams:g,loading:y}=yb(r),[v,x]=p.useState(null),w=p.useMemo(()=>s.filter(k=>k.global_role==="admin"&&k.is_active).length,[s]),b=async(k,E)=>{i(k+E),await u(k,E),i(null)},_=async k=>{i(`deactivate-${k}`),await d(k),i(null)},j=async k=>{i(`reactivate-${k}`),await f(k),i(null)},S=async(k,E)=>{confirm(`Delete ${E||"this user"}? This removes their account and access. This cannot be undone.`)&&(i(`delete-${k}`),await h(k),i(null))},N=async(k,E)=>{i(`team-${k}`);const{error:P}=await m(k,E);x((P==null?void 0:P.message)??null),i(null)};return!r||!n?l.jsx("div",{className:"text-sm text-gray-600",children:"Workspace member management is limited to administrators. Contact an admin if you need to add or update teammates."}):o?l.jsx("div",{className:"flex items-center justify-center py-10 text-gray-500",children:l.jsx(At,{className:"h-5 w-5 animate-spin"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Workspace Members"}),l.jsxs("p",{className:"text-sm text-gray-500",children:["View and manage everyone in your workspace. You currently have ",w," admin",w===1?"":"s","."]}),c&&l.jsx("div",{className:"mt-3 rounded-xl border border-red-200/70 bg-red-50 px-3 py-2 text-sm text-red-600",children:c}),v&&!c&&l.jsx("div",{className:"mt-3 rounded-xl border border-red-200/70 bg-red-50 px-3 py-2 text-sm text-red-600",children:v}),!c&&y&&l.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 rounded-xl border border-gray-200/70 bg-white px-3 py-1 text-xs text-gray-600",children:[l.jsx(At,{className:"h-3.5 w-3.5 animate-spin"}),"Loading teams"]})]}),l.jsx("div",{className:"overflow-hidden rounded-2xl border border-gray-200/70",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[l.jsx("thead",{className:"bg-gray-50/60",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-[0.25em] text-gray-500",children:"Member"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-[0.25em] text-gray-500",children:"Role"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-[0.25em] text-gray-500",children:"Team"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-[0.25em] text-gray-500",children:"Status"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-[0.25em] text-gray-500",children:"Last active"}),l.jsx("th",{className:"px-4 py-3"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100 bg-white/80",children:s.map(k=>{var Q;const E=k.user_id===(t==null?void 0:t.id),P=k.is_active,A=a!==null,D=A&&((a==null?void 0:a.includes(k.user_id))??!1),H=A&&!D;return l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-4",children:l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-sm font-semibold text-gray-900",children:k.full_name||k.email||"Member"}),l.jsx("span",{className:"text-xs text-gray-500",children:k.email})]})}),l.jsxs("td",{className:"px-4 py-4",children:[l.jsx("select",{className:"hig-input text-sm",value:k.global_role,disabled:!P||H||E,onChange:ee=>b(k.user_id,ee.target.value),children:oee.map(ee=>l.jsx("option",{value:ee,children:Ci(ee)},ee))}),E&&l.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"You cant change your own role from this screen."})]}),l.jsx("td",{className:"px-4 py-4",children:l.jsx("select",{className:"hig-input text-sm",value:k.team_id||((Q=g[0])==null?void 0:Q.team_id)||"",disabled:!P||H||y||g.length===0,onChange:ee=>N(k.user_id,ee.target.value),children:g.map(ee=>l.jsx("option",{value:ee.team_id,children:ee.name},ee.team_id))})}),l.jsx("td",{className:"px-4 py-4",children:l.jsx("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${P?"bg-emerald-50 text-emerald-700 border border-emerald-200/70":"bg-gray-100 text-gray-500 border border-gray-200"}`,children:P?"Active":"Inactive"})}),l.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:k.last_sign_in_at?new Date(k.last_sign_in_at).toLocaleDateString():""}),l.jsxs("td",{className:"px-4 py-4 text-right space-x-2",children:[P?l.jsxs("button",{onClick:()=>_(k.user_id),disabled:H||E,className:"inline-flex items-center gap-2 rounded-2xl border border-red-200/70 bg-red-50 px-3 py-1.5 text-sm font-semibold text-red-600 hover:bg-red-100 disabled:opacity-50",children:[l.jsx(G3,{className:"h-4 w-4"}),"Deactivate"]}):l.jsxs("button",{onClick:()=>j(k.user_id),disabled:H,className:"inline-flex items-center gap-2 rounded-2xl border border-blue-200/70 bg-blue-50 px-3 py-1.5 text-sm font-semibold text-blue-600 hover:bg-blue-100 disabled:opacity-50",children:[l.jsx($C,{className:"h-4 w-4"}),"Reactivate"]}),!E&&l.jsxs("button",{onClick:()=>S(k.user_id,k.email),disabled:H,className:"inline-flex items-center gap-2 rounded-2xl border border-gray-200/70 bg-white px-3 py-1.5 text-sm font-semibold text-gray-700 hover:bg-red-50 hover:border-red-200/70 hover:text-red-700 disabled:opacity-50",title:"Delete user",children:[l.jsx(Ei,{className:"h-4 w-4"}),"Delete"]})]})]},k.user_id)})})]})})]})}function cee(e){const[t,r]=p.useState([]),[n,a]=p.useState(!1),[i,s]=p.useState(null),o=async h=>{try{const{error:m}=await Y.functions.invoke("send-invite-email",{body:{inviteId:h,origin:typeof window<"u"?window.location.origin:void 0}});m&&console.error("Invite email dispatch failed",m)}catch(m){console.error("Invite email dispatch failed",m)}},c=p.useCallback(async()=>{if(!e)return;a(!0),s(null);const{data:h,error:m}=await Y.from("workspace_invitations").select("*").eq("workspace_id",e).eq("status","pending").order("created_at",{ascending:!1});m?(s(m.message),r([])):r(h||[]),a(!1)},[e]);p.useEffect(()=>{c()},[c]),p.useEffect(()=>{if(!e)return;const h=Y.channel(`workspace-invitations-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"workspace_invitations",filter:`workspace_id=eq.${e}`},()=>{c()}).subscribe();return()=>{Y.removeChannel(h)}},[e,c]);const u=p.useCallback(async({email:h,intendedRole:m,teamId:g})=>{if(!e)return{error:new Error("Workspace is required")};if(!g)return{error:new Error("Team is required for invites")};const{data:y,error:v}=await Y.from("workspace_invitations").insert({email:h,intended_role:m,workspace_id:e,team_id:g??null}).select("*").single();return!v&&y&&(await o(y.id),await c()),{error:v}},[e,c]),d=p.useCallback(async h=>{const{error:m}=await Y.from("workspace_invitations").update({status:"canceled"}).eq("id",h);return m||await c(),{error:m}},[c]),f=p.useCallback(async h=>{const{data:m,error:g}=await Y.from("workspace_invitations").update({status:"pending",expires_at:new Date(Date.now()+12096e5).toISOString()}).eq("id",h).select("*").single();return!g&&m&&(await o(m.id),await c()),{error:g}},[c]);return{invites:t,loading:n,error:i,refresh:c,createInvite:u,cancelInvite:d,resendInvite:f}}const LS=[{value:"admin",label:"Admin"},{value:"sales_manager",label:"Sales Manager"},{value:"team_lead",label:"Team Lead"},{value:"agent",label:"Agent"}];function uee(){var A;const{roleInfo:e}=kt(),t=(e==null?void 0:e.workspaceId)||null,r=SC(e),n=j3(e),{invites:a,loading:i,createInvite:s,resendInvite:o,cancelInvite:c}=cee(t),{teams:u}=yb(t),[d,f]=p.useState(""),[h,m]=p.useState("agent"),[g,y]=p.useState((e==null?void 0:e.teamId)||null),[v,x]=p.useState(!1),[w,b]=p.useState(null),[_,j]=p.useState(null),S=(A=u.find(D=>D.team_id===(e==null?void 0:e.teamId)))==null?void 0:A.name,N=n?LS:LS.filter(D=>D.value==="agent");p.useEffect(()=>{n||m("agent")},[n]),p.useEffect(()=>{!g&&u.length>0&&y(u[0].team_id)},[u,g]);const k=D=>`${window.location.origin}/invite/${D}`,E=async D=>{if(D.preventDefault(),!d)return;if(!t){b({type:"error",text:"Workspace is required before sending invites. Please refresh or contact an admin."});return}if(!g){b({type:"error",text:"A team is required so pipeline statuses and lead sources stay in sync. Create a team first if none exist."});return}x(!0),b(null);const{error:H}=await s({email:d.trim().toLowerCase(),intendedRole:h,teamId:g});if(x(!1),H){b({type:"error",text:H.message||"Unable to send invite. Please try again."});return}f(""),b({type:"success",text:`Invitation sent to ${d.trim().toLowerCase()}. Share the link or let them check their inbox.`})};if(p.useEffect(()=>{e!=null&&e.teamId&&y(e.teamId)},[e==null?void 0:e.teamId]),!r)return l.jsx("div",{className:"text-sm text-gray-600",children:"Only admins, sales managers, or team leads can invite new members. Contact an admin if you need to add someone to your workspace."});const P=a.filter(D=>D.status==="pending");return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Invitations"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Invite teammates by email and manage pending invitations. Links stay valid for 14 days."})]}),l.jsxs("form",{onSubmit:E,className:"rounded-2xl border border-gray-200/70 bg-white/80 p-5 space-y-4",children:[w&&l.jsx("div",{className:`flex items-center gap-2 rounded-2xl border px-3 py-2 text-sm ${w.type==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-red-200 bg-red-50 text-red-700"}`,children:w.text}),l.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Email"}),l.jsx("input",{type:"email",required:!0,className:"hig-input",placeholder:"newagent@example.com",value:d,onChange:D=>f(D.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Role"}),l.jsx("select",{className:"hig-input",value:h,onChange:D=>m(D.target.value),children:N.map(D=>l.jsx("option",{value:D.value,children:D.label},D.value))})]})]}),l.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Team *"}),(e==null?void 0:e.globalRole)==="agent"||!n&&(e!=null&&e.teamId)?l.jsx("input",{type:"text",className:"hig-input bg-gray-50",value:S||"Assigned automatically",readOnly:!0}):u.length===0?l.jsx("input",{type:"text",className:"hig-input bg-gray-50",value:"Create a team first to send invites",readOnly:!0}):l.jsx("select",{className:"hig-input",value:g||"",onChange:D=>y(D.target.value||null),children:u.map(D=>l.jsx("option",{value:D.team_id,children:D.name},D.team_id))})]})}),l.jsx("button",{type:"submit",disabled:v||!g,className:"hig-btn-primary inline-flex items-center gap-2",children:v?l.jsxs(l.Fragment,{children:[l.jsx(At,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):l.jsxs(l.Fragment,{children:[l.jsx(z3,{className:"h-4 w-4"}),"Send invitation"]})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Pending invitations"}),i?l.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm",children:[l.jsx(At,{className:"h-4 w-4 animate-spin"}),"Loading invitations"]}):P.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No active invitations."}):l.jsx("div",{className:"space-y-4",children:P.map(D=>{const Q=D.status==="pending"&&new Date(D.expires_at).getTime()<Date.now()?"expired":D.status;return l.jsxs("div",{className:"flex flex-col gap-3 rounded-2xl border border-gray-200/70 bg-white/80 p-4 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:D.email}),l.jsxs("p",{className:"text-xs text-gray-500",children:[Ci(D.intended_role),"  expires ",new Date(D.expires_at).toLocaleDateString()]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[D.status==="pending"&&l.jsx("button",{type:"button",onClick:async()=>{await navigator.clipboard.writeText(k(D.token)),j(D.id),setTimeout(()=>j(null),2e3)},className:`inline-flex items-center gap-2 rounded-2xl border px-3 py-1.5 text-xs font-semibold transition shadow-sm ${_===D.id?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-gray-200 text-gray-700 hover:border-emerald-200/80 hover:bg-emerald-50/60 hover:text-emerald-700 hover:shadow-md"}`,children:_===D.id?l.jsxs(l.Fragment,{children:[l.jsx(_c,{className:"h-3.5 w-3.5"}),"Copied"]}):l.jsxs(l.Fragment,{children:[l.jsx(F3,{className:"h-3.5 w-3.5"}),"Copy link"]})}),Q==="pending"?l.jsxs("button",{type:"button",onClick:()=>o(D.id),className:"inline-flex items-center gap-2 rounded-2xl border border-blue-200/70 bg-blue-50 px-3 py-1.5 text-xs font-semibold text-blue-600 hover:bg-blue-100",children:[l.jsx($C,{className:"h-3.5 w-3.5"}),"Resend"]}):l.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-3 py-1 text-xs font-semibold text-gray-600 capitalize",children:Q}),D.status==="pending"&&l.jsxs("button",{type:"button",onClick:()=>c(D.id),className:"inline-flex items-center gap-2 rounded-2xl border border-red-200/70 bg-red-50 px-3 py-1.5 text-xs font-semibold text-red-600 hover:bg-red-100",children:[l.jsx(eL,{className:"h-3.5 w-3.5"}),"Cancel"]})]})]},D.id)})})]})]})}function dee(){const{roleInfo:e,user:t}=kt(),r=(e==null?void 0:e.workspaceId)||null,n=jC(e),{teams:a,loading:i,createTeam:s}=yb(r),[o,c]=p.useState(""),[u,d]=p.useState(!1),[f,h]=p.useState(null),m=p.useMemo(()=>[...a].sort((y,v)=>y.name.localeCompare(v.name)),[a]),g=async y=>{var x;if(y.preventDefault(),!o.trim())return;d(!0),h(null);const{error:v}=await s(o,t==null?void 0:t.id);if(d(!1),v){const w=(x=v.message)==null?void 0:x.toLowerCase().includes("duplicate");h({type:"error",text:w?"A team with that name already exists.":v.message||"Unable to create team right now."});return}c(""),h({type:"success",text:"Team created. Assign members from the Members tab."})};return!r||!n?l.jsx("div",{className:"text-sm text-gray-600",children:"Only workspace admins can create teams. Ask an admin to set this up if you need a new team."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Teams"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Create lightweight teams to group agents and route invitations. You can add members after creating the team."})]}),l.jsxs("form",{onSubmit:g,className:"space-y-4 rounded-2xl border border-gray-200/70 bg-white/80 p-5",children:[l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-end sm:gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"hig-label",children:"Team name"}),l.jsx("input",{type:"text",className:"hig-input",placeholder:"Example: East Coast Team",value:o,onChange:y=>c(y.target.value),required:!0}),l.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Names must be unique across your workspace."})]}),l.jsx("button",{type:"submit",disabled:u,className:"hig-btn-primary inline-flex items-center justify-center gap-2 px-4",children:u?l.jsxs(l.Fragment,{children:[l.jsx(At,{className:"h-4 w-4 animate-spin"}),"Creating"]}):l.jsxs(l.Fragment,{children:[l.jsx(V3,{className:"h-4 w-4"}),"Create team"]})})]}),f&&l.jsx("div",{className:`flex items-center gap-2 rounded-2xl border px-3 py-2 text-sm ${f.type==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-red-200 bg-red-50 text-red-700"}`,children:f.text})]}),l.jsxs("div",{className:"rounded-2xl border border-gray-200/70 bg-white/80 p-5",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Existing teams"}),l.jsx("p",{className:"text-xs text-gray-500",children:i?"Loading teams":`${m.length||"No"} team${m.length===1?"":"s"}`})]}),i&&l.jsx(At,{className:"h-4 w-4 animate-spin text-gray-500"})]}),!i&&m.length===0&&l.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"No teams yet. Create one to get started."}),!i&&m.length>0&&l.jsx("div",{className:"mt-4 space-y-3",children:m.map(y=>l.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-gray-100/80 bg-white px-4 py-3 shadow-[inset_0_0_0_1px_rgba(255,255,255,0.6)]",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:y.name}),l.jsx("p",{className:"text-xs text-gray-500",children:"Assign members from the Members tab."})]}),l.jsx("span",{className:"inline-flex items-center rounded-full border border-gray-200 bg-gray-50 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.18em] text-gray-600",children:"Team"})]},y.team_id))})]})]})}const fee=[{id:"workspace.info",label:"Workspace Info",description:"Identity, locale, and defaults",icon:A3},{id:"workspace.pipeline-statuses",label:"Pipeline Statuses",description:"Shared stage definitions",icon:IC},{id:"workspace.lead-sources",label:"Lead Sources",description:"Partner & portal sources",icon:BC},{id:"workspace.integrations",label:"Integrations",description:"CRM & email connections",icon:q3},{id:"workspace.configuration",label:"Shared Configuration",description:"Templates & custom fields",icon:M3}];function hee(){const{user:e,roleInfo:t}=kt(),r=Ci(t==null?void 0:t.globalRole),n=h_(t),a=h_(t)||_3(t)||w3(t),i=NC(t),s=SC(t),o=jC(t),[c,u]=p.useState("workspace.info"),d=p.useMemo(()=>{const h=[...fee];return o&&h.push({id:"workspace.teams",label:"Teams",description:"Create teams for routing",icon:R3}),i&&h.push({id:"workspace.members",label:"Members",description:"Roles, status, and access",icon:zC}),s&&h.push({id:"workspace.invites",label:"Invitations",description:"Pending & sent invites",icon:W3}),h},[i,s]),f=()=>{switch(c){case"workspace.info":return l.jsx(ree,{canEdit:n});case"workspace.pipeline-statuses":return l.jsx(QZ,{canEdit:a});case"workspace.lead-sources":return l.jsx(ZZ,{canEdit:a});case"workspace.integrations":return l.jsx(nee,{canEdit:n});case"workspace.teams":return l.jsx(dee,{});case"workspace.members":return l.jsx(lee,{});case"workspace.invites":return l.jsx(uee,{});case"workspace.configuration":default:return l.jsx(iee,{canEdit:n})}};return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"flex flex-col gap-4 rounded-[var(--app-radius)] border border-[var(--app-border)] bg-white/90 p-6 shadow-[0_15px_45px_rgba(15,23,42,0.08)]",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-2xl bg-gray-100",children:l.jsx(kh,{className:"w-6 h-6 text-gray-700"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Workspace Settings"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Configuration shared across your entire workspace"})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-gray-200/70 bg-white px-3 py-1",children:[l.jsx("span",{className:"text-[10px] uppercase tracking-[0.4em] text-gray-400",children:"Role"}),l.jsx("span",{className:"font-semibold text-gray-900",children:r})]}),!n&&l.jsx("span",{className:"text-xs text-gray-500",children:"Workspace configuration is managed by admins. You have read-only access."})]})]}),l.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[l.jsx("aside",{className:"lg:w-72 space-y-6",children:l.jsxs("div",{children:[l.jsx("p",{className:"px-2 pb-2 text-[11px] font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Workspace"}),l.jsx("div",{className:"space-y-1",children:d.map(h=>{const m=h.icon,g=c===h.id;return l.jsx("button",{onClick:()=>u(h.id),className:`group w-full rounded-2xl border px-4 py-3 text-left transition-all duration-200 ${g?"border-[rgb(0,122,255)] bg-[rgba(0,122,255,0.06)] shadow-[inset_0_0_0_1px_rgba(0,122,255,0.2)]":"border-white/60 bg-white hover:-translate-y-[1px] hover:border-[rgba(0,122,255,0.25)] hover:bg-[rgba(0,122,255,0.04)] hover:shadow-[0_12px_30px_rgba(0,0,0,0.06)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[rgba(0,122,255,0.35)]"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:`rounded-2xl border p-2 ${g?"border-[rgba(0,122,255,0.3)] bg-white":"border-gray-100 bg-gray-50 group-hover:border-[rgba(0,122,255,0.2)] group-hover:bg-white"}`,children:l.jsx(m,{className:`w-4 h-4 ${g?"text-[rgb(0,122,255)]":"text-gray-500 group-hover:text-[rgb(0,122,255)]"}`})}),l.jsxs("div",{children:[l.jsx("p",{className:`text-sm font-semibold ${g?"text-[rgb(0,122,255)]":"text-gray-800"}`,children:h.label}),l.jsx("p",{className:"text-xs text-gray-500",children:h.description})]})]})},h.id)})})]})}),l.jsx("section",{className:"flex-1 hig-card p-6",children:f()})]})]})}function pee(){var f;const{user:e,roleInfo:t}=kt(),[r,n]=p.useState(((f=e==null?void 0:e.user_metadata)==null?void 0:f.name)||""),[a,i]=p.useState(!1),[s,o]=p.useState(null),c=async h=>{if(h.preventDefault(),!e)return;i(!0),o(null);const{error:m}=await Y.auth.updateUser({data:{...e.user_metadata,name:r.trim()||e.email}});o(m?{type:"error",text:m.message||"Unable to update profile."}:{type:"success",text:"Profile updated."}),i(!1)},u=(r||(e==null?void 0:e.email)||"PI").split(" ").map(h=>h.charAt(0).toUpperCase()).slice(0,2).join(""),d=Ci(t==null?void 0:t.globalRole);return l.jsxs("div",{className:"max-w-2xl",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Profile"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Manage your display name, login email, and view the role assigned by your workspace admin."})]}),l.jsxs("form",{onSubmit:c,className:"space-y-8",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"h-16 w-16 rounded-2xl bg-[var(--app-accent)] text-white flex items-center justify-center text-xl font-semibold",children:u}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Signed in as"}),l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e==null?void 0:e.email})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Full Name"}),l.jsx("input",{type:"text",value:r,onChange:h=>n(h.target.value),className:"hig-input",placeholder:"Jane Agent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Primary Email"}),l.jsx("input",{type:"email",value:(e==null?void 0:e.email)||"",disabled:!0,className:"hig-input bg-gray-50 text-gray-500"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Contact support to change your login email."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Role"}),l.jsxs("div",{className:"hig-input bg-gray-50 text-gray-700 flex items-center gap-2",children:[l.jsx("span",{className:"inline-flex rounded-full bg-gray-100 px-2 py-0.5 text-[11px] uppercase tracking-wide text-gray-500",children:d}),l.jsx("span",{className:"text-sm text-gray-600",children:"Workspace permissions are managed by your admin."})]})]})]}),s&&l.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${s.type==="error"?"bg-red-50 text-red-700 border-red-200/60":"bg-green-50 text-green-700 border-green-200/60"}`,children:[s.type==="error"?l.jsx(Ia,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}):l.jsx(Ra,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:s.text})]}),l.jsx("div",{className:"flex gap-3",children:l.jsx("button",{type:"submit",className:"hig-btn-primary",disabled:a,children:a?l.jsxs(l.Fragment,{children:[l.jsx(At,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving"})]}):l.jsxs(l.Fragment,{children:[l.jsx(Nh,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Save Profile"})]})})})]})]})}function mee(){const[e,t]=p.useState({newPassword:"",confirmPassword:""}),[r,n]=p.useState(!1),[a,i]=p.useState(null),s=async o=>{if(o.preventDefault(),!e.newPassword||e.newPassword!==e.confirmPassword){i({type:"error",text:"Passwords must match."});return}n(!0),i(null);const{error:c}=await Y.auth.updateUser({password:e.newPassword});c?i({type:"error",text:c.message||"Unable to update password."}):(i({type:"success",text:"Password updated successfully."}),t({newPassword:"",confirmPassword:""})),n(!1)};return l.jsxs("div",{className:"max-w-xl",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Password & Security"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Update your login password. Changes apply immediately across all PipelineIQ sessions."})]}),l.jsxs("form",{onSubmit:s,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"New Password"}),l.jsx("input",{type:"password",value:e.newPassword,onChange:o=>t(c=>({...c,newPassword:o.target.value})),className:"hig-input",minLength:8,required:!0}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use at least 8 characters including a number or symbol."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Confirm Password"}),l.jsx("input",{type:"password",value:e.confirmPassword,onChange:o=>t(c=>({...c,confirmPassword:o.target.value})),className:"hig-input",required:!0})]}),a&&l.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${a.type==="error"?"bg-red-50 text-red-700 border-red-200/60":"bg-green-50 text-emerald-700 border-emerald-200/60"}`,children:[a.type==="error"?l.jsx(CC,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}):l.jsx(LC,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:a.text})]}),l.jsx("button",{type:"submit",className:"hig-btn-primary",disabled:r,children:r?l.jsxs(l.Fragment,{children:[l.jsx(At,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Updating"})]}):l.jsx("span",{children:"Update Password"})})]})]})}const gee=[{id:"new_lead",label:"New lead assigned"},{id:"stage_change",label:"Deal moved to a new stage"},{id:"reminders",label:"Task & follow-up reminders"},{id:"analytics",label:"Weekly pipeline summary"}],FS={new_lead:!0,stage_change:!0,reminders:!0,analytics:!1};function vee(){var c;const{user:e}=kt(),[t,r]=p.useState(FS),[n,a]=p.useState(!1),[i,s]=p.useState(null);p.useEffect(()=>{var u;(u=e==null?void 0:e.user_metadata)!=null&&u.notifications&&r({...FS,...e.user_metadata.notifications})},[(c=e==null?void 0:e.user_metadata)==null?void 0:c.notifications]);const o=async()=>{if(!e)return;a(!0),s(null);const{error:u}=await Y.auth.updateUser({data:{...e.user_metadata,notifications:t}});s(u?{type:"error",text:u.message||"Unable to update notifications."}:{type:"success",text:"Notification preferences saved."}),a(!1)};return l.jsxs("div",{className:"max-w-2xl",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Notifications"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Choose which alerts to receive. These preferences only affect your PipelineIQ account."})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"space-y-4",children:gee.map(u=>l.jsxs("label",{className:"flex items-center justify-between rounded-2xl border border-gray-200/70 bg-white/90 px-4 py-3",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:u.label}),l.jsx("p",{className:"text-xs text-gray-500",children:"Delivered via email & in-app"})]}),l.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-[var(--app-accent)] focus:ring-[var(--app-accent)]",checked:t[u.id]??!1,onChange:d=>r(f=>({...f,[u.id]:d.target.checked}))})]},u.id))}),i&&l.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${i.type==="error"?"bg-red-50 text-red-700 border-red-200/60":"bg-green-50 text-green-700 border-green-200/60"}`,children:[i.type==="error"?l.jsx(Ia,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}):l.jsx(Ra,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:i.text})]}),l.jsx("button",{onClick:o,className:"hig-btn-primary",disabled:n,children:n?l.jsxs(l.Fragment,{children:[l.jsx(At,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving"})]}):l.jsxs(l.Fragment,{children:[l.jsx(Nh,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Save Preferences"})]})})]})]})}function yee(){const{user:e}=kt(),[t,r]=p.useState(!0),[n,a]=p.useState(!1),[i,s]=p.useState(null),[o,c]=p.useState({annual_gci_goal:0,default_tax_rate:25,default_brokerage_split_rate:20});p.useEffect(()=>{u()},[e]);const u=async()=>{if(!e)return;const{data:f}=await Y.from("user_settings").select("*").eq("user_id",e.id).maybeSingle();f&&c({annual_gci_goal:f.annual_gci_goal,default_tax_rate:f.default_tax_rate*100,default_brokerage_split_rate:f.default_brokerage_split_rate*100}),r(!1)},d=async f=>{if(f.preventDefault(),!e)return;a(!0),s(null);const{error:h}=await Y.from("user_settings").upsert({user_id:e.id,annual_gci_goal:o.annual_gci_goal,default_tax_rate:o.default_tax_rate/100,default_brokerage_split_rate:o.default_brokerage_split_rate/100});h?s({type:"error",text:"Failed to save preferences. Please try again."}):(s({type:"success",text:"Preferences updated!"}),setTimeout(()=>s(null),3e3)),a(!1)};return t?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx(At,{className:"w-8 h-8 animate-spin text-[rgb(0,122,255)]"})}):l.jsxs("div",{className:"max-w-2xl",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Personal Preferences"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Set your financial targets and default assumptions. These only apply to your profile."})]}),l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Annual GCI Goal"}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"$"}),l.jsx("input",{type:"number",value:o.annual_gci_goal,onChange:f=>c({...o,annual_gci_goal:parseFloat(f.target.value)||0}),className:"hig-input pl-8",placeholder:"100000",min:"0",step:"1000"})]}),l.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Your personal net commission goal for the year."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Default Tax Allocation"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",step:"0.5",value:o.default_tax_rate,onChange:f=>c({...o,default_tax_rate:parseFloat(f.target.value)||0}),className:"hig-input pr-8",placeholder:"25",min:"0",max:"100"}),l.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]}),l.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Used to forecast take-home pay inside PipelineIQ."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Default Brokerage Split"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",step:"0.5",value:o.default_brokerage_split_rate,onChange:f=>c({...o,default_brokerage_split_rate:parseFloat(f.target.value)||0}),className:"hig-input pr-8",placeholder:"20",min:"0",max:"100"}),l.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]}),l.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Determines what portion of each deal is allocated to your brokerage by default."})]}),i&&l.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${i.type==="error"?"bg-red-50 text-red-700 border-red-200/60":"bg-green-50 text-green-700 border-green-200/60"}`,children:[i.type==="error"?l.jsx(Ia,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}):l.jsx(Ra,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:i.text})]}),l.jsx("div",{className:"pt-4 border-t border-gray-200/60 flex flex-wrap gap-3",children:l.jsx("button",{type:"submit",disabled:n,className:"hig-btn-primary px-8",children:n?l.jsxs(l.Fragment,{children:[l.jsx(At,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving"})]}):l.jsxs(l.Fragment,{children:[l.jsx(Nh,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Save Preferences"})]})})})]})]})}const xee=[{id:"personal.profile",label:"Profile",description:"Name & identity",icon:jc},{id:"personal.security",label:"Password & Security",description:"Account protection",icon:LC},{id:"personal.notifications",label:"Notifications",description:"Email + in-app alerts",icon:PC},{id:"personal.preferences",label:"Preferences",description:"Goals & defaults",icon:FC}];function bee(){const{user:e,roleInfo:t}=kt(),r=Ci(t==null?void 0:t.globalRole),[n,a]=p.useState("personal.profile"),i=()=>{switch(n){case"personal.profile":return l.jsx(pee,{});case"personal.security":return l.jsx(mee,{});case"personal.notifications":return l.jsx(vee,{});case"personal.preferences":default:return l.jsx(yee,{})}};return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"flex flex-col gap-4 rounded-[var(--app-radius)] border border-[var(--app-border)] bg-white/90 p-6 shadow-[0_15px_45px_rgba(15,23,42,0.08)]",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-2xl bg-gray-100",children:l.jsx(jc,{className:"w-6 h-6 text-gray-700"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Account Settings"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Preferences that only apply to your login."})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-gray-200/70 bg-white px-3 py-1",children:[l.jsx("span",{className:"text-[10px] uppercase tracking-[0.4em] text-gray-400",children:"Signed in"}),l.jsx("span",{className:"font-semibold text-gray-900",children:e==null?void 0:e.email})]}),l.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-gray-200/70 bg-white px-3 py-1",children:[l.jsx("span",{className:"text-[10px] uppercase tracking-[0.4em] text-gray-400",children:"Role"}),l.jsx("span",{className:"font-semibold text-gray-900",children:r})]})]})]}),l.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[l.jsx("aside",{className:"lg:w-72 space-y-6",children:l.jsxs("div",{children:[l.jsx("p",{className:"px-2 pb-2 text-[11px] font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Account"}),l.jsx("div",{className:"space-y-1",children:xee.map(s=>{const o=s.icon,c=n===s.id;return l.jsx("button",{onClick:()=>a(s.id),className:`group w-full rounded-2xl border px-4 py-3 text-left transition-all duration-200 ${c?"border-[rgb(0,122,255)] bg-[rgba(0,122,255,0.06)] shadow-[inset_0_0_0_1px_rgba(0,122,255,0.2)]":"border-white/60 bg-white hover:-translate-y-[1px] hover:border-[rgba(0,122,255,0.25)] hover:bg-[rgba(0,122,255,0.04)] hover:shadow-[0_12px_30px_rgba(0,0,0,0.06)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[rgba(0,122,255,0.35)]"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:`rounded-2xl border p-2 ${c?"border-[rgba(0,122,255,0.3)] bg-white":"border-gray-100 bg-gray-50 group-hover:border-[rgba(0,122,255,0.2)] group-hover:bg-white"}`,children:l.jsx(o,{className:`w-4 h-4 ${c?"text-[rgb(0,122,255)]":"text-gray-500 group-hover:text-[rgb(0,122,255)]"}`})}),l.jsxs("div",{children:[l.jsx("p",{className:`text-sm font-semibold ${c?"text-[rgb(0,122,255)]":"text-gray-800"}`,children:s.label}),l.jsx("p",{className:"text-xs text-gray-500",children:s.description})]})]})},s.id)})})]})}),l.jsx("section",{className:"flex-1 hig-card p-6",children:i()})]})]})}const wee=[{title:"AI Contract Drafting",description:"Instinctively assemble Dotloop-ready agreements from natural-language prompts."},{title:"Smart Field Autofill",description:"Pull buyer, seller, property, and financing data directly from your CRM or files."},{title:"Amendments in Seconds",description:"Request edits in plain English and regenerate updated paperwork instantly."},{title:"Compliance Checker",description:"Let AI scan for missing signatures, incorrect clauses, or jurisdictional nuances."},{title:"Team Collaboration Tools",description:"Shared templates, version history, and real-time updates for every stakeholder."}];function _ee(){const[e,t]=p.useState(""),[r,n]=p.useState("idle"),a=i=>{if(i.preventDefault(),!e.trim()){n("error");return}n("loading"),setTimeout(()=>{n("success"),t("")},1200)};return l.jsxs("div",{className:"min-h-screen bg-white text-slate-900 flex flex-col",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#f4f7fb] via-white to-[#eef4fa] pointer-events-none"}),l.jsx("header",{className:"relative z-10 border-b border-slate-200/60",children:l.jsx("div",{className:"max-w-5xl mx-auto px-6 py-6 flex items-center",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(jee,{}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs tracking-[0.3em] text-slate-500 uppercase font-semibold",children:"Contract"}),l.jsx("p",{className:"text-xl font-semibold tracking-tight text-slate-800",children:"Scribe"})]})]})})}),l.jsxs("main",{className:"relative z-10 flex-1",children:[l.jsxs("section",{className:"max-w-4xl mx-auto px-6 py-16 text-center",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.4em] text-slate-500 mb-4",children:"ContractScribe"}),l.jsx("h1",{className:"text-4xl md:text-5xl font-semibold text-slate-900 leading-tight mb-4",children:"ContractScribe is Coming Soon"}),l.jsx("p",{className:"text-lg text-slate-600 mb-8 max-w-3xl mx-auto",children:"The fastest way for real-estate professionals to draft, edit, and manage contracts with AI-powered precision. Automation that feels human, accuracy that feels inevitable."}),l.jsxs("form",{onSubmit:a,className:"flex flex-col sm:flex-row gap-3 justify-center max-w-2xl mx-auto",children:[l.jsx("input",{type:"email",value:e,onChange:i=>{t(i.target.value),r!=="idle"&&n("idle")},placeholder:"Enter your work email",className:"flex-1 rounded-2xl border border-slate-200/80 bg-white/90 px-5 py-3 text-sm shadow-inner focus:outline-none focus:ring-2 focus:ring-[#0E4B72]/20 focus:border-[#0E4B72]/50"}),l.jsx("button",{type:"submit",className:"rounded-2xl bg-[#0E4B72] text-white font-semibold px-6 py-3 text-sm shadow-[0_12px_24px_rgba(14,75,114,0.25)] hover:bg-[#0b3c5b] transition-colors",disabled:r==="loading",children:r==="loading"?"Joining":r==="success"?"Added!":"Join the Waitlist"})]}),r==="success"&&l.jsx("p",{className:"mt-3 text-sm text-emerald-600 animate-fade-in",children:"Thanks! Well be in touch shortly."}),r==="error"&&l.jsx("p",{className:"mt-3 text-sm text-rose-500",children:"Please enter a valid email address."})]}),l.jsx("section",{className:"max-w-6xl mx-auto px-6 pb-16",children:l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:wee.map(i=>l.jsxs("div",{className:"rounded-2xl border border-slate-200/70 bg-white/80 p-6 shadow-[0_12px_30px_rgba(15,23,42,0.08)] hover:-translate-y-1 transition-transform",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-[#0E4B72] mb-3",children:"Coming Feature"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:i.title}),l.jsx("p",{className:"text-sm text-slate-600",children:i.description})]},i.title))})}),l.jsx("section",{className:"max-w-3xl mx-auto px-6 pb-20 text-center",children:l.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"ContractScribe empowers agents, teams, and brokerages with lightning-fast contract workflows so you can spend more time closing dealsnot filling out paperwork."})})]}),l.jsx("footer",{className:"relative z-10 border-t border-slate-200/70 bg-white/80 backdrop-blur",children:l.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-8 flex flex-col md:flex-row items-center justify-between gap-4 text-xs text-slate-500",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("span",{children:[" ",new Date().getFullYear()," ContractScribe"]}),l.jsx("span",{children:"Terms"}),l.jsx("span",{children:"Privacy"}),l.jsx("span",{children:"Security"})]}),l.jsxs("div",{className:"text-xs text-slate-500",children:["Made by ",l.jsx("span",{className:"font-semibold text-slate-700",children:"Luminex Ventures"})]})]})})]})}const jee=()=>l.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 48 56","aria-hidden":"true",className:"drop-shadow-sm",children:[l.jsx("path",{d:"M2 12L22 0L22 32L2 44Z",fill:"#F3C6C5"}),l.jsx("path",{d:"M12 18L32 6V38L12 50Z",fill:"#CF7A7A"}),l.jsx("path",{d:"M22 24L42 12V44L22 56Z",fill:"#C85757"})]});function See(){const{token:e}=o5(),t=Xo();return l.jsx(WC,{onToggle:()=>t("/login"),presetToken:e})}function Gi({children:e}){const{user:t,loading:r,roleInfo:n,signOut:a}=kt();return r?l.jsx("div",{className:"min-h-screen bg-[rgb(var(--color-app-bg))] flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[rgb(0,122,255)]"})}):t?n&&n.isActive===!1?l.jsx("div",{className:"min-h-screen bg-[rgb(var(--color-app-bg))] flex items-center justify-center px-4",children:l.jsxs("div",{className:"max-w-md rounded-2xl border border-[var(--app-border)] bg-white/90 p-6 text-center shadow-xl space-y-3",children:[l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"Account deactivated"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Your PipelineIQ access has been suspended. Please reach out to an administrator if you believe this is a mistake."}),l.jsx("button",{onClick:a,className:"hig-btn-secondary mx-auto",children:"Back to login"})]})}):l.jsx(sL,{children:e}):l.jsx(rf,{to:"/login",replace:!0})}function BS({children:e}){const{user:t,loading:r}=kt();return r?l.jsx("div",{className:"min-h-screen bg-[rgb(var(--color-app-bg))] flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[rgb(0,122,255)]"})}):t?l.jsx(rf,{to:"/",replace:!0}):l.jsx(l.Fragment,{children:e})}function Nee(){const[e,t]=p.useState(!0);return e?l.jsx(oL,{onToggle:()=>t(!1)}):l.jsx(WC,{onToggle:()=>t(!0)})}function kee(){return l.jsx(S3,{children:l.jsx(q5,{children:l.jsxs(_5,{children:[l.jsx(Xr,{path:"/login",element:l.jsx(BS,{children:l.jsx(Nee,{})})}),l.jsx(Xr,{path:"/",element:l.jsx(Gi,{children:l.jsx(mZ,{})})}),l.jsx(Xr,{path:"/invite/:token",element:l.jsx(BS,{children:l.jsx(See,{})})}),l.jsx(Xr,{path:"/pipeline",element:l.jsx(Gi,{children:l.jsx(BZ,{})})}),l.jsx(Xr,{path:"/tasks",element:l.jsx(Gi,{children:l.jsx(qZ,{})})}),l.jsx(Xr,{path:"/luma",element:l.jsx(Gi,{children:l.jsx(GZ,{})})}),l.jsx(Xr,{path:"/analytics",element:l.jsx(Gi,{children:l.jsx(WZ,{})})}),l.jsx(Xr,{path:"/workspace-settings",element:l.jsx(Gi,{children:l.jsx(hee,{})})}),l.jsx(Xr,{path:"/settings",element:l.jsx(Gi,{children:l.jsx(bee,{})})}),l.jsx(Xr,{path:"/lead-sources",element:l.jsx(rf,{to:"/workspace-settings",replace:!0})}),l.jsx(Xr,{path:"/pipeline-settings",element:l.jsx(rf,{to:"/workspace-settings",replace:!0})}),l.jsx(Xr,{path:"/contractscribe",element:l.jsx(_ee,{})})]})})})}e2(document.getElementById("root")).render(l.jsx(p.StrictMode,{children:l.jsx(kee,{})}));
