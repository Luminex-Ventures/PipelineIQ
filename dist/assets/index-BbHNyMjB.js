var FT=Object.defineProperty;var BT=(e,t,r)=>t in e?FT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Vh=(e,t,r)=>BT(e,typeof t!="symbol"?t+"":t,r);function Ij(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();function di(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function UT(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Rj={exports:{}},gf={},Mj={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xl=Symbol.for("react.element"),zT=Symbol.for("react.portal"),WT=Symbol.for("react.fragment"),KT=Symbol.for("react.strict_mode"),HT=Symbol.for("react.profiler"),qT=Symbol.for("react.provider"),VT=Symbol.for("react.context"),GT=Symbol.for("react.forward_ref"),YT=Symbol.for("react.suspense"),XT=Symbol.for("react.memo"),JT=Symbol.for("react.lazy"),Sx=Symbol.iterator;function QT(e){return e===null||typeof e!="object"?null:(e=Sx&&e[Sx]||e["@@iterator"],typeof e=="function"?e:null)}var Lj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$j=Object.assign,Fj={};function Qs(e,t,r){this.props=e,this.context=t,this.refs=Fj,this.updater=r||Lj}Qs.prototype.isReactComponent={};Qs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Qs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Bj(){}Bj.prototype=Qs.prototype;function xv(e,t,r){this.props=e,this.context=t,this.refs=Fj,this.updater=r||Lj}var bv=xv.prototype=new Bj;bv.constructor=xv;$j(bv,Qs.prototype);bv.isPureReactComponent=!0;var kx=Array.isArray,Uj=Object.prototype.hasOwnProperty,wv={current:null},zj={key:!0,ref:!0,__self:!0,__source:!0};function Wj(e,t,r){var n,i={},a=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)Uj.call(t,n)&&!zj.hasOwnProperty(n)&&(i[n]=t[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:Xl,type:e,key:a,ref:s,props:i,_owner:wv.current}}function ZT(e,t){return{$$typeof:Xl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function _v(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xl}function eD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Nx=/\/+/g;function Gh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?eD(""+e.key):t.toString(36)}function _u(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Xl:case zT:s=!0}}if(s)return s=e,i=i(s),e=n===""?"."+Gh(s,0):n,kx(i)?(r="",e!=null&&(r=e.replace(Nx,"$&/")+"/"),_u(i,t,r,"",function(u){return u})):i!=null&&(_v(i)&&(i=ZT(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Nx,"$&/")+"/")+e)),t.push(i)),1;if(s=0,n=n===""?".":n+":",kx(e))for(var o=0;o<e.length;o++){a=e[o];var l=n+Gh(a,o);s+=_u(a,t,r,l,i)}else if(l=QT(e),typeof l=="function")for(e=l.call(e),o=0;!(a=e.next()).done;)a=a.value,l=n+Gh(a,o++),s+=_u(a,t,r,l,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Pc(e,t,r){if(e==null)return e;var n=[],i=0;return _u(e,n,"","",function(a){return t.call(r,a,i++)}),n}function tD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Zt={current:null},ju={transition:null},rD={ReactCurrentDispatcher:Zt,ReactCurrentBatchConfig:ju,ReactCurrentOwner:wv};function Kj(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:Pc,forEach:function(e,t,r){Pc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Pc(e,function(){t++}),t},toArray:function(e){return Pc(e,function(t){return t})||[]},only:function(e){if(!_v(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};je.Component=Qs;je.Fragment=WT;je.Profiler=HT;je.PureComponent=xv;je.StrictMode=KT;je.Suspense=YT;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rD;je.act=Kj;je.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=$j({},e.props),i=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=wv.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)Uj.call(t,l)&&!zj.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Xl,type:e.type,key:i,ref:a,props:n,_owner:s}};je.createContext=function(e){return e={$$typeof:VT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:qT,_context:e},e.Consumer=e};je.createElement=Wj;je.createFactory=function(e){var t=Wj.bind(null,e);return t.type=e,t};je.createRef=function(){return{current:null}};je.forwardRef=function(e){return{$$typeof:GT,render:e}};je.isValidElement=_v;je.lazy=function(e){return{$$typeof:JT,_payload:{_status:-1,_result:e},_init:tD}};je.memo=function(e,t){return{$$typeof:XT,type:e,compare:t===void 0?null:t}};je.startTransition=function(e){var t=ju.transition;ju.transition={};try{e()}finally{ju.transition=t}};je.unstable_act=Kj;je.useCallback=function(e,t){return Zt.current.useCallback(e,t)};je.useContext=function(e){return Zt.current.useContext(e)};je.useDebugValue=function(){};je.useDeferredValue=function(e){return Zt.current.useDeferredValue(e)};je.useEffect=function(e,t){return Zt.current.useEffect(e,t)};je.useId=function(){return Zt.current.useId()};je.useImperativeHandle=function(e,t,r){return Zt.current.useImperativeHandle(e,t,r)};je.useInsertionEffect=function(e,t){return Zt.current.useInsertionEffect(e,t)};je.useLayoutEffect=function(e,t){return Zt.current.useLayoutEffect(e,t)};je.useMemo=function(e,t){return Zt.current.useMemo(e,t)};je.useReducer=function(e,t,r){return Zt.current.useReducer(e,t,r)};je.useRef=function(e){return Zt.current.useRef(e)};je.useState=function(e){return Zt.current.useState(e)};je.useSyncExternalStore=function(e,t,r){return Zt.current.useSyncExternalStore(e,t,r)};je.useTransition=function(){return Zt.current.useTransition()};je.version="18.3.1";Mj.exports=je;var m=Mj.exports;const Ue=di(m),nD=Ij({__proto__:null,default:Ue},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iD=m,aD=Symbol.for("react.element"),sD=Symbol.for("react.fragment"),oD=Object.prototype.hasOwnProperty,lD=iD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cD={key:!0,ref:!0,__self:!0,__source:!0};function Hj(e,t,r){var n,i={},a=null,s=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)oD.call(t,n)&&!cD.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:aD,type:e,key:a,ref:s,props:i,_owner:lD.current}}gf.Fragment=sD;gf.jsx=Hj;gf.jsxs=Hj;Rj.exports=gf;var c=Rj.exports,qj={exports:{}},Or={},Vj={exports:{}},Gj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,B){var G=R.length;R.push(B);e:for(;0<G;){var ae=G-1>>>1,Q=R[ae];if(0<i(Q,B))R[ae]=B,R[G]=Q,G=ae;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var B=R[0],G=R.pop();if(G!==B){R[0]=G;e:for(var ae=0,Q=R.length,ge=Q>>>1;ae<ge;){var A=2*(ae+1)-1,J=R[A],re=A+1,he=R[re];if(0>i(J,G))re<Q&&0>i(he,J)?(R[ae]=he,R[re]=G,ae=re):(R[ae]=J,R[A]=G,ae=A);else if(re<Q&&0>i(he,G))R[ae]=he,R[re]=G,ae=re;else break e}}return B}function i(R,B){var G=R.sortIndex-B.sortIndex;return G!==0?G:R.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],u=[],d=1,f=null,h=3,p=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(R){for(var B=r(u);B!==null;){if(B.callback===null)n(u);else if(B.startTime<=R)n(u),B.sortIndex=B.expirationTime,t(l,B);else break;B=r(u)}}function _(R){if(v=!1,b(R),!g)if(r(l)!==null)g=!0,U(j);else{var B=r(u);B!==null&&H(_,B.startTime-R)}}function j(R,B){g=!1,v&&(v=!1,x(N),N=-1),p=!0;var G=h;try{for(b(B),f=r(l);f!==null&&(!(f.expirationTime>B)||R&&!P());){var ae=f.callback;if(typeof ae=="function"){f.callback=null,h=f.priorityLevel;var Q=ae(f.expirationTime<=B);B=e.unstable_now(),typeof Q=="function"?f.callback=Q:f===r(l)&&n(l),b(B)}else n(l);f=r(l)}if(f!==null)var ge=!0;else{var A=r(u);A!==null&&H(_,A.startTime-B),ge=!1}return ge}finally{f=null,h=G,p=!1}}var S=!1,k=null,N=-1,C=5,E=-1;function P(){return!(e.unstable_now()-E<C)}function I(){if(k!==null){var R=e.unstable_now();E=R;var B=!0;try{B=k(!0,R)}finally{B?W():(S=!1,k=null)}}else S=!1}var W;if(typeof w=="function")W=function(){w(I)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,K=F.port2;F.port1.onmessage=I,W=function(){K.postMessage(null)}}else W=function(){y(I,0)};function U(R){k=R,S||(S=!0,W())}function H(R,B){N=y(function(){R(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,U(j))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(R){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var G=h;h=B;try{return R()}finally{h=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,B){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var G=h;h=R;try{return B()}finally{h=G}},e.unstable_scheduleCallback=function(R,B,G){var ae=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ae+G:ae):G=ae,R){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=G+Q,R={id:d++,callback:B,priorityLevel:R,startTime:G,expirationTime:Q,sortIndex:-1},G>ae?(R.sortIndex=G,t(u,R),r(l)===null&&R===r(u)&&(v?(x(N),N=-1):v=!0,H(_,G-ae))):(R.sortIndex=Q,t(l,R),g||p||(g=!0,U(j))),R},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(R){var B=h;return function(){var G=h;h=B;try{return R.apply(this,arguments)}finally{h=G}}}})(Gj);Vj.exports=Gj;var uD=Vj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dD=m,Er=uD;function z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Yj=new Set,hl={};function Ha(e,t){Rs(e,t),Rs(e+"Capture",t)}function Rs(e,t){for(hl[e]=t,e=0;e<t.length;e++)Yj.add(t[e])}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lm=Object.prototype.hasOwnProperty,fD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ex={},Cx={};function hD(e){return lm.call(Cx,e)?!0:lm.call(Ex,e)?!1:fD.test(e)?Cx[e]=!0:(Ex[e]=!0,!1)}function pD(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function mD(e,t,r,n){if(t===null||typeof t>"u"||pD(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function er(e,t,r,n,i,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$t[e]=new er(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$t[t]=new er(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$t[e]=new er(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$t[e]=new er(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$t[e]=new er(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$t[e]=new er(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$t[e]=new er(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$t[e]=new er(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$t[e]=new er(e,5,!1,e.toLowerCase(),null,!1,!1)});var jv=/[\-:]([a-z])/g;function Sv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(jv,Sv);$t[t]=new er(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(jv,Sv);$t[t]=new er(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(jv,Sv);$t[t]=new er(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$t[e]=new er(e,1,!1,e.toLowerCase(),null,!1,!1)});$t.xlinkHref=new er("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$t[e]=new er(e,1,!1,e.toLowerCase(),null,!0,!0)});function kv(e,t,r,n){var i=$t.hasOwnProperty(t)?$t[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(mD(t,r,i,n)&&(r=null),n||i===null?hD(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var fi=dD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oc=Symbol.for("react.element"),us=Symbol.for("react.portal"),ds=Symbol.for("react.fragment"),Nv=Symbol.for("react.strict_mode"),cm=Symbol.for("react.profiler"),Xj=Symbol.for("react.provider"),Jj=Symbol.for("react.context"),Ev=Symbol.for("react.forward_ref"),um=Symbol.for("react.suspense"),dm=Symbol.for("react.suspense_list"),Cv=Symbol.for("react.memo"),ki=Symbol.for("react.lazy"),Qj=Symbol.for("react.offscreen"),Px=Symbol.iterator;function ko(e){return e===null||typeof e!="object"?null:(e=Px&&e[Px]||e["@@iterator"],typeof e=="function"?e:null)}var Xe=Object.assign,Yh;function Ko(e){if(Yh===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Yh=t&&t[1]||""}return`
`+Yh+e}var Xh=!1;function Jh(e,t){if(!e||Xh)return"";Xh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=o);break}}}finally{Xh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ko(e):""}function gD(e){switch(e.tag){case 5:return Ko(e.type);case 16:return Ko("Lazy");case 13:return Ko("Suspense");case 19:return Ko("SuspenseList");case 0:case 2:case 15:return e=Jh(e.type,!1),e;case 11:return e=Jh(e.type.render,!1),e;case 1:return e=Jh(e.type,!0),e;default:return""}}function fm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ds:return"Fragment";case us:return"Portal";case cm:return"Profiler";case Nv:return"StrictMode";case um:return"Suspense";case dm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Jj:return(e.displayName||"Context")+".Consumer";case Xj:return(e._context.displayName||"Context")+".Provider";case Ev:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Cv:return t=e.displayName||null,t!==null?t:fm(e.type)||"Memo";case ki:t=e._payload,e=e._init;try{return fm(e(t))}catch{}}return null}function vD(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fm(t);case 8:return t===Nv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Zj(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yD(e){var t=Zj(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ac(e){e._valueTracker||(e._valueTracker=yD(e))}function eS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Zj(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Bu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function hm(e,t){var r=t.checked;return Xe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Ox(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=qi(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function tS(e,t){t=t.checked,t!=null&&kv(e,"checked",t,!1)}function pm(e,t){tS(e,t);var r=qi(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?mm(e,t.type,r):t.hasOwnProperty("defaultValue")&&mm(e,t.type,qi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ax(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function mm(e,t,r){(t!=="number"||Bu(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ho=Array.isArray;function Ss(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+qi(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function gm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(z(91));return Xe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Tx(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(z(92));if(Ho(r)){if(1<r.length)throw Error(z(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:qi(r)}}function rS(e,t){var r=qi(t.value),n=qi(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Dx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function nS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?nS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Tc,iS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Tc=Tc||document.createElement("div"),Tc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Tc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function pl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Qo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xD=["Webkit","ms","Moz","O"];Object.keys(Qo).forEach(function(e){xD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qo[t]=Qo[e]})});function aS(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Qo.hasOwnProperty(e)&&Qo[e]?(""+t).trim():t+"px"}function sS(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=aS(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var bD=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ym(e,t){if(t){if(bD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(z(62))}}function xm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bm=null;function Pv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wm=null,ks=null,Ns=null;function Ix(e){if(e=Zl(e)){if(typeof wm!="function")throw Error(z(280));var t=e.stateNode;t&&(t=wf(t),wm(e.stateNode,e.type,t))}}function oS(e){ks?Ns?Ns.push(e):Ns=[e]:ks=e}function lS(){if(ks){var e=ks,t=Ns;if(Ns=ks=null,Ix(e),t)for(e=0;e<t.length;e++)Ix(t[e])}}function cS(e,t){return e(t)}function uS(){}var Qh=!1;function dS(e,t,r){if(Qh)return e(t,r);Qh=!0;try{return cS(e,t,r)}finally{Qh=!1,(ks!==null||Ns!==null)&&(uS(),lS())}}function ml(e,t){var r=e.stateNode;if(r===null)return null;var n=wf(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(z(231,t,typeof r));return r}var _m=!1;if(Qn)try{var No={};Object.defineProperty(No,"passive",{get:function(){_m=!0}}),window.addEventListener("test",No,No),window.removeEventListener("test",No,No)}catch{_m=!1}function wD(e,t,r,n,i,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Zo=!1,Uu=null,zu=!1,jm=null,_D={onError:function(e){Zo=!0,Uu=e}};function jD(e,t,r,n,i,a,s,o,l){Zo=!1,Uu=null,wD.apply(_D,arguments)}function SD(e,t,r,n,i,a,s,o,l){if(jD.apply(this,arguments),Zo){if(Zo){var u=Uu;Zo=!1,Uu=null}else throw Error(z(198));zu||(zu=!0,jm=u)}}function qa(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function fS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Rx(e){if(qa(e)!==e)throw Error(z(188))}function kD(e){var t=e.alternate;if(!t){if(t=qa(e),t===null)throw Error(z(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return Rx(i),e;if(a===n)return Rx(i),t;a=a.sibling}throw Error(z(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,o=i.child;o;){if(o===r){s=!0,r=i,n=a;break}if(o===n){s=!0,n=i,r=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===r){s=!0,r=a,n=i;break}if(o===n){s=!0,n=a,r=i;break}o=o.sibling}if(!s)throw Error(z(189))}}if(r.alternate!==n)throw Error(z(190))}if(r.tag!==3)throw Error(z(188));return r.stateNode.current===r?e:t}function hS(e){return e=kD(e),e!==null?pS(e):null}function pS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=pS(e);if(t!==null)return t;e=e.sibling}return null}var mS=Er.unstable_scheduleCallback,Mx=Er.unstable_cancelCallback,ND=Er.unstable_shouldYield,ED=Er.unstable_requestPaint,tt=Er.unstable_now,CD=Er.unstable_getCurrentPriorityLevel,Ov=Er.unstable_ImmediatePriority,gS=Er.unstable_UserBlockingPriority,Wu=Er.unstable_NormalPriority,PD=Er.unstable_LowPriority,vS=Er.unstable_IdlePriority,vf=null,Nn=null;function OD(e){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(vf,e,void 0,(e.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:DD,AD=Math.log,TD=Math.LN2;function DD(e){return e>>>=0,e===0?32:31-(AD(e)/TD|0)|0}var Dc=64,Ic=4194304;function qo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ku(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,s=r&268435455;if(s!==0){var o=s&~i;o!==0?n=qo(o):(a&=s,a!==0&&(n=qo(a)))}else s=r&~i,s!==0?n=qo(s):a!==0&&(n=qo(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-cn(t),i=1<<r,n|=e[r],t&=~i;return n}function ID(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RD(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-cn(a),o=1<<s,l=i[s];l===-1?(!(o&r)||o&n)&&(i[s]=ID(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}function Sm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yS(){var e=Dc;return Dc<<=1,!(Dc&4194240)&&(Dc=64),e}function Zh(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Jl(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-cn(t),e[t]=r}function MD(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-cn(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}function Av(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-cn(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Oe=0;function xS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var bS,Tv,wS,_S,jS,km=!1,Rc=[],Li=null,$i=null,Fi=null,gl=new Map,vl=new Map,Oi=[],LD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lx(e,t){switch(e){case"focusin":case"focusout":Li=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":Fi=null;break;case"pointerover":case"pointerout":gl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vl.delete(t.pointerId)}}function Eo(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Zl(t),t!==null&&Tv(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function $D(e,t,r,n,i){switch(t){case"focusin":return Li=Eo(Li,e,t,r,n,i),!0;case"dragenter":return $i=Eo($i,e,t,r,n,i),!0;case"mouseover":return Fi=Eo(Fi,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return gl.set(a,Eo(gl.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,vl.set(a,Eo(vl.get(a)||null,e,t,r,n,i)),!0}return!1}function SS(e){var t=xa(e.target);if(t!==null){var r=qa(t);if(r!==null){if(t=r.tag,t===13){if(t=fS(r),t!==null){e.blockedOn=t,jS(e.priority,function(){wS(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Su(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Nm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);bm=n,r.target.dispatchEvent(n),bm=null}else return t=Zl(r),t!==null&&Tv(t),e.blockedOn=r,!1;t.shift()}return!0}function $x(e,t,r){Su(e)&&r.delete(t)}function FD(){km=!1,Li!==null&&Su(Li)&&(Li=null),$i!==null&&Su($i)&&($i=null),Fi!==null&&Su(Fi)&&(Fi=null),gl.forEach($x),vl.forEach($x)}function Co(e,t){e.blockedOn===t&&(e.blockedOn=null,km||(km=!0,Er.unstable_scheduleCallback(Er.unstable_NormalPriority,FD)))}function yl(e){function t(i){return Co(i,e)}if(0<Rc.length){Co(Rc[0],e);for(var r=1;r<Rc.length;r++){var n=Rc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Li!==null&&Co(Li,e),$i!==null&&Co($i,e),Fi!==null&&Co(Fi,e),gl.forEach(t),vl.forEach(t),r=0;r<Oi.length;r++)n=Oi[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Oi.length&&(r=Oi[0],r.blockedOn===null);)SS(r),r.blockedOn===null&&Oi.shift()}var Es=fi.ReactCurrentBatchConfig,Hu=!0;function BD(e,t,r,n){var i=Oe,a=Es.transition;Es.transition=null;try{Oe=1,Dv(e,t,r,n)}finally{Oe=i,Es.transition=a}}function UD(e,t,r,n){var i=Oe,a=Es.transition;Es.transition=null;try{Oe=4,Dv(e,t,r,n)}finally{Oe=i,Es.transition=a}}function Dv(e,t,r,n){if(Hu){var i=Nm(e,t,r,n);if(i===null)cp(e,t,n,qu,r),Lx(e,n);else if($D(i,e,t,r,n))n.stopPropagation();else if(Lx(e,n),t&4&&-1<LD.indexOf(e)){for(;i!==null;){var a=Zl(i);if(a!==null&&bS(a),a=Nm(e,t,r,n),a===null&&cp(e,t,n,qu,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else cp(e,t,n,null,r)}}var qu=null;function Nm(e,t,r,n){if(qu=null,e=Pv(n),e=xa(e),e!==null)if(t=qa(e),t===null)e=null;else if(r=t.tag,r===13){if(e=fS(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qu=e,null}function kS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CD()){case Ov:return 1;case gS:return 4;case Wu:case PD:return 16;case vS:return 536870912;default:return 16}default:return 16}}var Ii=null,Iv=null,ku=null;function NS(){if(ku)return ku;var e,t=Iv,r=t.length,n,i="value"in Ii?Ii.value:Ii.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===i[a-n];n++);return ku=i.slice(e,1<n?1-n:void 0)}function Nu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mc(){return!0}function Fx(){return!1}function Ar(e){function t(r,n,i,a,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Mc:Fx,this.isPropagationStopped=Fx,this}return Xe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Mc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Mc)},persist:function(){},isPersistent:Mc}),t}var Zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rv=Ar(Zs),Ql=Xe({},Zs,{view:0,detail:0}),zD=Ar(Ql),ep,tp,Po,yf=Xe({},Ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Po&&(Po&&e.type==="mousemove"?(ep=e.screenX-Po.screenX,tp=e.screenY-Po.screenY):tp=ep=0,Po=e),ep)},movementY:function(e){return"movementY"in e?e.movementY:tp}}),Bx=Ar(yf),WD=Xe({},yf,{dataTransfer:0}),KD=Ar(WD),HD=Xe({},Ql,{relatedTarget:0}),rp=Ar(HD),qD=Xe({},Zs,{animationName:0,elapsedTime:0,pseudoElement:0}),VD=Ar(qD),GD=Xe({},Zs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),YD=Ar(GD),XD=Xe({},Zs,{data:0}),Ux=Ar(XD),JD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eI(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ZD[e])?!!t[e]:!1}function Mv(){return eI}var tI=Xe({},Ql,{key:function(e){if(e.key){var t=JD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Nu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?QD[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mv,charCode:function(e){return e.type==="keypress"?Nu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Nu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),rI=Ar(tI),nI=Xe({},yf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zx=Ar(nI),iI=Xe({},Ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mv}),aI=Ar(iI),sI=Xe({},Zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),oI=Ar(sI),lI=Xe({},yf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cI=Ar(lI),uI=[9,13,27,32],Lv=Qn&&"CompositionEvent"in window,el=null;Qn&&"documentMode"in document&&(el=document.documentMode);var dI=Qn&&"TextEvent"in window&&!el,ES=Qn&&(!Lv||el&&8<el&&11>=el),Wx=" ",Kx=!1;function CS(e,t){switch(e){case"keyup":return uI.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fs=!1;function fI(e,t){switch(e){case"compositionend":return PS(t);case"keypress":return t.which!==32?null:(Kx=!0,Wx);case"textInput":return e=t.data,e===Wx&&Kx?null:e;default:return null}}function hI(e,t){if(fs)return e==="compositionend"||!Lv&&CS(e,t)?(e=NS(),ku=Iv=Ii=null,fs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ES&&t.locale!=="ko"?null:t.data;default:return null}}var pI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pI[e.type]:t==="textarea"}function OS(e,t,r,n){oS(n),t=Vu(t,"onChange"),0<t.length&&(r=new Rv("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var tl=null,xl=null;function mI(e){US(e,0)}function xf(e){var t=ms(e);if(eS(t))return e}function gI(e,t){if(e==="change")return t}var AS=!1;if(Qn){var np;if(Qn){var ip="oninput"in document;if(!ip){var qx=document.createElement("div");qx.setAttribute("oninput","return;"),ip=typeof qx.oninput=="function"}np=ip}else np=!1;AS=np&&(!document.documentMode||9<document.documentMode)}function Vx(){tl&&(tl.detachEvent("onpropertychange",TS),xl=tl=null)}function TS(e){if(e.propertyName==="value"&&xf(xl)){var t=[];OS(t,xl,e,Pv(e)),dS(mI,t)}}function vI(e,t,r){e==="focusin"?(Vx(),tl=t,xl=r,tl.attachEvent("onpropertychange",TS)):e==="focusout"&&Vx()}function yI(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return xf(xl)}function xI(e,t){if(e==="click")return xf(t)}function bI(e,t){if(e==="input"||e==="change")return xf(t)}function wI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dn=typeof Object.is=="function"?Object.is:wI;function bl(e,t){if(dn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!lm.call(t,i)||!dn(e[i],t[i]))return!1}return!0}function Gx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yx(e,t){var r=Gx(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Gx(r)}}function DS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?DS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function IS(){for(var e=window,t=Bu();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Bu(e.document)}return t}function $v(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function _I(e){var t=IS(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&DS(r.ownerDocument.documentElement,r)){if(n!==null&&$v(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=Yx(r,a);var s=Yx(r,n);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var jI=Qn&&"documentMode"in document&&11>=document.documentMode,hs=null,Em=null,rl=null,Cm=!1;function Xx(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Cm||hs==null||hs!==Bu(n)||(n=hs,"selectionStart"in n&&$v(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),rl&&bl(rl,n)||(rl=n,n=Vu(Em,"onSelect"),0<n.length&&(t=new Rv("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=hs)))}function Lc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ps={animationend:Lc("Animation","AnimationEnd"),animationiteration:Lc("Animation","AnimationIteration"),animationstart:Lc("Animation","AnimationStart"),transitionend:Lc("Transition","TransitionEnd")},ap={},RS={};Qn&&(RS=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function bf(e){if(ap[e])return ap[e];if(!ps[e])return e;var t=ps[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in RS)return ap[e]=t[r];return e}var MS=bf("animationend"),LS=bf("animationiteration"),$S=bf("animationstart"),FS=bf("transitionend"),BS=new Map,Jx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qi(e,t){BS.set(e,t),Ha(t,[e])}for(var sp=0;sp<Jx.length;sp++){var op=Jx[sp],SI=op.toLowerCase(),kI=op[0].toUpperCase()+op.slice(1);Qi(SI,"on"+kI)}Qi(MS,"onAnimationEnd");Qi(LS,"onAnimationIteration");Qi($S,"onAnimationStart");Qi("dblclick","onDoubleClick");Qi("focusin","onFocus");Qi("focusout","onBlur");Qi(FS,"onTransitionEnd");Rs("onMouseEnter",["mouseout","mouseover"]);Rs("onMouseLeave",["mouseout","mouseover"]);Rs("onPointerEnter",["pointerout","pointerover"]);Rs("onPointerLeave",["pointerout","pointerover"]);Ha("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ha("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ha("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ha("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ha("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ha("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vo));function Qx(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,SD(n,t,void 0,e),e.currentTarget=null}function US(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;Qx(i,o,u),a=l}else for(s=0;s<n.length;s++){if(o=n[s],l=o.instance,u=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;Qx(i,o,u),a=l}}}if(zu)throw e=jm,zu=!1,jm=null,e}function $e(e,t){var r=t[Dm];r===void 0&&(r=t[Dm]=new Set);var n=e+"__bubble";r.has(n)||(zS(t,e,2,!1),r.add(n))}function lp(e,t,r){var n=0;t&&(n|=4),zS(r,e,n,t)}var $c="_reactListening"+Math.random().toString(36).slice(2);function wl(e){if(!e[$c]){e[$c]=!0,Yj.forEach(function(r){r!=="selectionchange"&&(NI.has(r)||lp(r,!1,e),lp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$c]||(t[$c]=!0,lp("selectionchange",!1,t))}}function zS(e,t,r,n){switch(kS(t)){case 1:var i=BD;break;case 4:i=UD;break;default:i=Dv}r=i.bind(null,t,r,e),i=void 0,!_m||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function cp(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=xa(o),s===null)return;if(l=s.tag,l===5||l===6){n=a=s;continue e}o=o.parentNode}}n=n.return}dS(function(){var u=a,d=Pv(r),f=[];e:{var h=BS.get(e);if(h!==void 0){var p=Rv,g=e;switch(e){case"keypress":if(Nu(r)===0)break e;case"keydown":case"keyup":p=rI;break;case"focusin":g="focus",p=rp;break;case"focusout":g="blur",p=rp;break;case"beforeblur":case"afterblur":p=rp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Bx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=KD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=aI;break;case MS:case LS:case $S:p=VD;break;case FS:p=oI;break;case"scroll":p=zD;break;case"wheel":p=cI;break;case"copy":case"cut":case"paste":p=YD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=zx}var v=(t&4)!==0,y=!v&&e==="scroll",x=v?h!==null?h+"Capture":null:h;v=[];for(var w=u,b;w!==null;){b=w;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,x!==null&&(_=ml(w,x),_!=null&&v.push(_l(w,_,b)))),y)break;w=w.return}0<v.length&&(h=new p(h,g,null,r,d),f.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==bm&&(g=r.relatedTarget||r.fromElement)&&(xa(g)||g[Zn]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=u,g=g?xa(g):null,g!==null&&(y=qa(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(v=Bx,_="onMouseLeave",x="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(v=zx,_="onPointerLeave",x="onPointerEnter",w="pointer"),y=p==null?h:ms(p),b=g==null?h:ms(g),h=new v(_,w+"leave",p,r,d),h.target=y,h.relatedTarget=b,_=null,xa(d)===u&&(v=new v(x,w+"enter",g,r,d),v.target=b,v.relatedTarget=y,_=v),y=_,p&&g)t:{for(v=p,x=g,w=0,b=v;b;b=Xa(b))w++;for(b=0,_=x;_;_=Xa(_))b++;for(;0<w-b;)v=Xa(v),w--;for(;0<b-w;)x=Xa(x),b--;for(;w--;){if(v===x||x!==null&&v===x.alternate)break t;v=Xa(v),x=Xa(x)}v=null}else v=null;p!==null&&Zx(f,h,p,v,!1),g!==null&&y!==null&&Zx(f,y,g,v,!0)}}e:{if(h=u?ms(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var j=gI;else if(Hx(h))if(AS)j=bI;else{j=yI;var S=vI}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=xI);if(j&&(j=j(e,u))){OS(f,j,r,d);break e}S&&S(e,h,u),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&mm(h,"number",h.value)}switch(S=u?ms(u):window,e){case"focusin":(Hx(S)||S.contentEditable==="true")&&(hs=S,Em=u,rl=null);break;case"focusout":rl=Em=hs=null;break;case"mousedown":Cm=!0;break;case"contextmenu":case"mouseup":case"dragend":Cm=!1,Xx(f,r,d);break;case"selectionchange":if(jI)break;case"keydown":case"keyup":Xx(f,r,d)}var k;if(Lv)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else fs?CS(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(ES&&r.locale!=="ko"&&(fs||N!=="onCompositionStart"?N==="onCompositionEnd"&&fs&&(k=NS()):(Ii=d,Iv="value"in Ii?Ii.value:Ii.textContent,fs=!0)),S=Vu(u,N),0<S.length&&(N=new Ux(N,e,null,r,d),f.push({event:N,listeners:S}),k?N.data=k:(k=PS(r),k!==null&&(N.data=k)))),(k=dI?fI(e,r):hI(e,r))&&(u=Vu(u,"onBeforeInput"),0<u.length&&(d=new Ux("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=k))}US(f,t)})}function _l(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Vu(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=ml(e,r),a!=null&&n.unshift(_l(e,a,i)),a=ml(e,t),a!=null&&n.push(_l(e,a,i))),e=e.return}return n}function Xa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Zx(e,t,r,n,i){for(var a=t._reactName,s=[];r!==null&&r!==n;){var o=r,l=o.alternate,u=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&u!==null&&(o=u,i?(l=ml(r,a),l!=null&&s.unshift(_l(r,l,o))):i||(l=ml(r,a),l!=null&&s.push(_l(r,l,o)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var EI=/\r\n?/g,CI=/\u0000|\uFFFD/g;function eb(e){return(typeof e=="string"?e:""+e).replace(EI,`
`).replace(CI,"")}function Fc(e,t,r){if(t=eb(t),eb(e)!==t&&r)throw Error(z(425))}function Gu(){}var Pm=null,Om=null;function Am(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Tm=typeof setTimeout=="function"?setTimeout:void 0,PI=typeof clearTimeout=="function"?clearTimeout:void 0,tb=typeof Promise=="function"?Promise:void 0,OI=typeof queueMicrotask=="function"?queueMicrotask:typeof tb<"u"?function(e){return tb.resolve(null).then(e).catch(AI)}:Tm;function AI(e){setTimeout(function(){throw e})}function up(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),yl(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);yl(t)}function Bi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function rb(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var eo=Math.random().toString(36).slice(2),Sn="__reactFiber$"+eo,jl="__reactProps$"+eo,Zn="__reactContainer$"+eo,Dm="__reactEvents$"+eo,TI="__reactListeners$"+eo,DI="__reactHandles$"+eo;function xa(e){var t=e[Sn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Zn]||r[Sn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=rb(e);e!==null;){if(r=e[Sn])return r;e=rb(e)}return t}e=r,r=e.parentNode}return null}function Zl(e){return e=e[Sn]||e[Zn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ms(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(z(33))}function wf(e){return e[jl]||null}var Im=[],gs=-1;function Zi(e){return{current:e}}function Be(e){0>gs||(e.current=Im[gs],Im[gs]=null,gs--)}function Le(e,t){gs++,Im[gs]=e.current,e.current=t}var Vi={},Kt=Zi(Vi),dr=Zi(!1),Ta=Vi;function Ms(e,t){var r=e.type.contextTypes;if(!r)return Vi;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function fr(e){return e=e.childContextTypes,e!=null}function Yu(){Be(dr),Be(Kt)}function nb(e,t,r){if(Kt.current!==Vi)throw Error(z(168));Le(Kt,t),Le(dr,r)}function WS(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(z(108,vD(e)||"Unknown",i));return Xe({},r,n)}function Xu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vi,Ta=Kt.current,Le(Kt,e),Le(dr,dr.current),!0}function ib(e,t,r){var n=e.stateNode;if(!n)throw Error(z(169));r?(e=WS(e,t,Ta),n.__reactInternalMemoizedMergedChildContext=e,Be(dr),Be(Kt),Le(Kt,e)):Be(dr),Le(dr,r)}var Un=null,_f=!1,dp=!1;function KS(e){Un===null?Un=[e]:Un.push(e)}function II(e){_f=!0,KS(e)}function ea(){if(!dp&&Un!==null){dp=!0;var e=0,t=Oe;try{var r=Un;for(Oe=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Un=null,_f=!1}catch(i){throw Un!==null&&(Un=Un.slice(e+1)),mS(Ov,ea),i}finally{Oe=t,dp=!1}}return null}var vs=[],ys=0,Ju=null,Qu=0,$r=[],Fr=0,Da=null,Kn=1,Hn="";function ua(e,t){vs[ys++]=Qu,vs[ys++]=Ju,Ju=e,Qu=t}function HS(e,t,r){$r[Fr++]=Kn,$r[Fr++]=Hn,$r[Fr++]=Da,Da=e;var n=Kn;e=Hn;var i=32-cn(n)-1;n&=~(1<<i),r+=1;var a=32-cn(t)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,Kn=1<<32-cn(t)+i|r<<i|n,Hn=a+e}else Kn=1<<a|r<<i|n,Hn=e}function Fv(e){e.return!==null&&(ua(e,1),HS(e,1,0))}function Bv(e){for(;e===Ju;)Ju=vs[--ys],vs[ys]=null,Qu=vs[--ys],vs[ys]=null;for(;e===Da;)Da=$r[--Fr],$r[Fr]=null,Hn=$r[--Fr],$r[Fr]=null,Kn=$r[--Fr],$r[Fr]=null}var kr=null,Sr=null,ze=!1,sn=null;function qS(e,t){var r=Br(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function ab(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,kr=e,Sr=Bi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,kr=e,Sr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Da!==null?{id:Kn,overflow:Hn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Br(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,kr=e,Sr=null,!0):!1;default:return!1}}function Rm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Mm(e){if(ze){var t=Sr;if(t){var r=t;if(!ab(e,t)){if(Rm(e))throw Error(z(418));t=Bi(r.nextSibling);var n=kr;t&&ab(e,t)?qS(n,r):(e.flags=e.flags&-4097|2,ze=!1,kr=e)}}else{if(Rm(e))throw Error(z(418));e.flags=e.flags&-4097|2,ze=!1,kr=e}}}function sb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;kr=e}function Bc(e){if(e!==kr)return!1;if(!ze)return sb(e),ze=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Am(e.type,e.memoizedProps)),t&&(t=Sr)){if(Rm(e))throw VS(),Error(z(418));for(;t;)qS(e,t),t=Bi(t.nextSibling)}if(sb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Sr=Bi(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Sr=null}}else Sr=kr?Bi(e.stateNode.nextSibling):null;return!0}function VS(){for(var e=Sr;e;)e=Bi(e.nextSibling)}function Ls(){Sr=kr=null,ze=!1}function Uv(e){sn===null?sn=[e]:sn.push(e)}var RI=fi.ReactCurrentBatchConfig;function Oo(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(z(309));var n=r.stateNode}if(!n)throw Error(z(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(z(284));if(!r._owner)throw Error(z(290,e))}return e}function Uc(e,t){throw e=Object.prototype.toString.call(t),Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ob(e){var t=e._init;return t(e._payload)}function GS(e){function t(x,w){if(e){var b=x.deletions;b===null?(x.deletions=[w],x.flags|=16):b.push(w)}}function r(x,w){if(!e)return null;for(;w!==null;)t(x,w),w=w.sibling;return null}function n(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function i(x,w){return x=Ki(x,w),x.index=0,x.sibling=null,x}function a(x,w,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<w?(x.flags|=2,w):b):(x.flags|=2,w)):(x.flags|=1048576,w)}function s(x){return e&&x.alternate===null&&(x.flags|=2),x}function o(x,w,b,_){return w===null||w.tag!==6?(w=yp(b,x.mode,_),w.return=x,w):(w=i(w,b),w.return=x,w)}function l(x,w,b,_){var j=b.type;return j===ds?d(x,w,b.props.children,_,b.key):w!==null&&(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ki&&ob(j)===w.type)?(_=i(w,b.props),_.ref=Oo(x,w,b),_.return=x,_):(_=Du(b.type,b.key,b.props,null,x.mode,_),_.ref=Oo(x,w,b),_.return=x,_)}function u(x,w,b,_){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=xp(b,x.mode,_),w.return=x,w):(w=i(w,b.children||[]),w.return=x,w)}function d(x,w,b,_,j){return w===null||w.tag!==7?(w=Ea(b,x.mode,_,j),w.return=x,w):(w=i(w,b),w.return=x,w)}function f(x,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=yp(""+w,x.mode,b),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Oc:return b=Du(w.type,w.key,w.props,null,x.mode,b),b.ref=Oo(x,null,w),b.return=x,b;case us:return w=xp(w,x.mode,b),w.return=x,w;case ki:var _=w._init;return f(x,_(w._payload),b)}if(Ho(w)||ko(w))return w=Ea(w,x.mode,b,null),w.return=x,w;Uc(x,w)}return null}function h(x,w,b,_){var j=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:o(x,w,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Oc:return b.key===j?l(x,w,b,_):null;case us:return b.key===j?u(x,w,b,_):null;case ki:return j=b._init,h(x,w,j(b._payload),_)}if(Ho(b)||ko(b))return j!==null?null:d(x,w,b,_,null);Uc(x,b)}return null}function p(x,w,b,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return x=x.get(b)||null,o(w,x,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Oc:return x=x.get(_.key===null?b:_.key)||null,l(w,x,_,j);case us:return x=x.get(_.key===null?b:_.key)||null,u(w,x,_,j);case ki:var S=_._init;return p(x,w,b,S(_._payload),j)}if(Ho(_)||ko(_))return x=x.get(b)||null,d(w,x,_,j,null);Uc(w,_)}return null}function g(x,w,b,_){for(var j=null,S=null,k=w,N=w=0,C=null;k!==null&&N<b.length;N++){k.index>N?(C=k,k=null):C=k.sibling;var E=h(x,k,b[N],_);if(E===null){k===null&&(k=C);break}e&&k&&E.alternate===null&&t(x,k),w=a(E,w,N),S===null?j=E:S.sibling=E,S=E,k=C}if(N===b.length)return r(x,k),ze&&ua(x,N),j;if(k===null){for(;N<b.length;N++)k=f(x,b[N],_),k!==null&&(w=a(k,w,N),S===null?j=k:S.sibling=k,S=k);return ze&&ua(x,N),j}for(k=n(x,k);N<b.length;N++)C=p(k,x,N,b[N],_),C!==null&&(e&&C.alternate!==null&&k.delete(C.key===null?N:C.key),w=a(C,w,N),S===null?j=C:S.sibling=C,S=C);return e&&k.forEach(function(P){return t(x,P)}),ze&&ua(x,N),j}function v(x,w,b,_){var j=ko(b);if(typeof j!="function")throw Error(z(150));if(b=j.call(b),b==null)throw Error(z(151));for(var S=j=null,k=w,N=w=0,C=null,E=b.next();k!==null&&!E.done;N++,E=b.next()){k.index>N?(C=k,k=null):C=k.sibling;var P=h(x,k,E.value,_);if(P===null){k===null&&(k=C);break}e&&k&&P.alternate===null&&t(x,k),w=a(P,w,N),S===null?j=P:S.sibling=P,S=P,k=C}if(E.done)return r(x,k),ze&&ua(x,N),j;if(k===null){for(;!E.done;N++,E=b.next())E=f(x,E.value,_),E!==null&&(w=a(E,w,N),S===null?j=E:S.sibling=E,S=E);return ze&&ua(x,N),j}for(k=n(x,k);!E.done;N++,E=b.next())E=p(k,x,N,E.value,_),E!==null&&(e&&E.alternate!==null&&k.delete(E.key===null?N:E.key),w=a(E,w,N),S===null?j=E:S.sibling=E,S=E);return e&&k.forEach(function(I){return t(x,I)}),ze&&ua(x,N),j}function y(x,w,b,_){if(typeof b=="object"&&b!==null&&b.type===ds&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Oc:e:{for(var j=b.key,S=w;S!==null;){if(S.key===j){if(j=b.type,j===ds){if(S.tag===7){r(x,S.sibling),w=i(S,b.props.children),w.return=x,x=w;break e}}else if(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ki&&ob(j)===S.type){r(x,S.sibling),w=i(S,b.props),w.ref=Oo(x,S,b),w.return=x,x=w;break e}r(x,S);break}else t(x,S);S=S.sibling}b.type===ds?(w=Ea(b.props.children,x.mode,_,b.key),w.return=x,x=w):(_=Du(b.type,b.key,b.props,null,x.mode,_),_.ref=Oo(x,w,b),_.return=x,x=_)}return s(x);case us:e:{for(S=b.key;w!==null;){if(w.key===S)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){r(x,w.sibling),w=i(w,b.children||[]),w.return=x,x=w;break e}else{r(x,w);break}else t(x,w);w=w.sibling}w=xp(b,x.mode,_),w.return=x,x=w}return s(x);case ki:return S=b._init,y(x,w,S(b._payload),_)}if(Ho(b))return g(x,w,b,_);if(ko(b))return v(x,w,b,_);Uc(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(r(x,w.sibling),w=i(w,b),w.return=x,x=w):(r(x,w),w=yp(b,x.mode,_),w.return=x,x=w),s(x)):r(x,w)}return y}var $s=GS(!0),YS=GS(!1),Zu=Zi(null),ed=null,xs=null,zv=null;function Wv(){zv=xs=ed=null}function Kv(e){var t=Zu.current;Be(Zu),e._currentValue=t}function Lm(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Cs(e,t){ed=e,zv=xs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(lr=!0),e.firstContext=null)}function Wr(e){var t=e._currentValue;if(zv!==e)if(e={context:e,memoizedValue:t,next:null},xs===null){if(ed===null)throw Error(z(308));xs=e,ed.dependencies={lanes:0,firstContext:e}}else xs=xs.next=e;return t}var ba=null;function Hv(e){ba===null?ba=[e]:ba.push(e)}function XS(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,Hv(t)):(r.next=i.next,i.next=r),t.interleaved=r,ei(e,n)}function ei(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ni=!1;function qv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ui(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ke&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,ei(e,r)}return i=n.interleaved,i===null?(t.next=t,Hv(n)):(t.next=i.next,i.next=t),n.interleaved=t,ei(e,r)}function Eu(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Av(e,r)}}function lb(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=s:a=a.next=s,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function td(e,t,r,n){var i=e.updateQueue;Ni=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,s===null?a=u:s.next=u,s=l;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==s&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;s=0,d=u=l=null,o=a;do{var h=o.lane,p=o.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,v=o;switch(h=t,p=r,v.tag){case 1:if(g=v.payload,typeof g=="function"){f=g.call(p,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(p,f,h):g,h==null)break e;f=Xe({},f,h);break e;case 2:Ni=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=p,l=f):d=d.next=p,s|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Ra|=s,e.lanes=s,e.memoizedState=f}}function cb(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(z(191,i));i.call(n)}}}var ec={},En=Zi(ec),Sl=Zi(ec),kl=Zi(ec);function wa(e){if(e===ec)throw Error(z(174));return e}function Vv(e,t){switch(Le(kl,t),Le(Sl,e),Le(En,ec),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:vm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=vm(t,e)}Be(En),Le(En,t)}function Fs(){Be(En),Be(Sl),Be(kl)}function QS(e){wa(kl.current);var t=wa(En.current),r=vm(t,e.type);t!==r&&(Le(Sl,e),Le(En,r))}function Gv(e){Sl.current===e&&(Be(En),Be(Sl))}var Ge=Zi(0);function rd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fp=[];function Yv(){for(var e=0;e<fp.length;e++)fp[e]._workInProgressVersionPrimary=null;fp.length=0}var Cu=fi.ReactCurrentDispatcher,hp=fi.ReactCurrentBatchConfig,Ia=0,Ye=null,dt=null,jt=null,nd=!1,nl=!1,Nl=0,MI=0;function Ft(){throw Error(z(321))}function Xv(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!dn(e[r],t[r]))return!1;return!0}function Jv(e,t,r,n,i,a){if(Ia=a,Ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Cu.current=e===null||e.memoizedState===null?BI:UI,e=r(n,i),nl){a=0;do{if(nl=!1,Nl=0,25<=a)throw Error(z(301));a+=1,jt=dt=null,t.updateQueue=null,Cu.current=zI,e=r(n,i)}while(nl)}if(Cu.current=id,t=dt!==null&&dt.next!==null,Ia=0,jt=dt=Ye=null,nd=!1,t)throw Error(z(300));return e}function Qv(){var e=Nl!==0;return Nl=0,e}function _n(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?Ye.memoizedState=jt=e:jt=jt.next=e,jt}function Kr(){if(dt===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=dt.next;var t=jt===null?Ye.memoizedState:jt.next;if(t!==null)jt=t,dt=e;else{if(e===null)throw Error(z(310));dt=e,e={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},jt===null?Ye.memoizedState=jt=e:jt=jt.next=e}return jt}function El(e,t){return typeof t=="function"?t(e):t}function pp(e){var t=Kr(),r=t.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=e;var n=dt,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var o=s=null,l=null,u=a;do{var d=u.lane;if((Ia&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=f,s=n):l=l.next=f,Ye.lanes|=d,Ra|=d}u=u.next}while(u!==null&&u!==a);l===null?s=n:l.next=o,dn(n,t.memoizedState)||(lr=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do a=i.lane,Ye.lanes|=a,Ra|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function mp(e){var t=Kr(),r=t.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);dn(a,t.memoizedState)||(lr=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function ZS(){}function ek(e,t){var r=Ye,n=Kr(),i=t(),a=!dn(n.memoizedState,i);if(a&&(n.memoizedState=i,lr=!0),n=n.queue,Zv(nk.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||jt!==null&&jt.memoizedState.tag&1){if(r.flags|=2048,Cl(9,rk.bind(null,r,n,i,t),void 0,null),Nt===null)throw Error(z(349));Ia&30||tk(r,t,i)}return i}function tk(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function rk(e,t,r,n){t.value=r,t.getSnapshot=n,ik(t)&&ak(e)}function nk(e,t,r){return r(function(){ik(t)&&ak(e)})}function ik(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!dn(e,r)}catch{return!0}}function ak(e){var t=ei(e,1);t!==null&&un(t,e,1,-1)}function ub(e){var t=_n();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:e},t.queue=e,e=e.dispatch=FI.bind(null,Ye,e),[t.memoizedState,e]}function Cl(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function sk(){return Kr().memoizedState}function Pu(e,t,r,n){var i=_n();Ye.flags|=e,i.memoizedState=Cl(1|t,r,void 0,n===void 0?null:n)}function jf(e,t,r,n){var i=Kr();n=n===void 0?null:n;var a=void 0;if(dt!==null){var s=dt.memoizedState;if(a=s.destroy,n!==null&&Xv(n,s.deps)){i.memoizedState=Cl(t,r,a,n);return}}Ye.flags|=e,i.memoizedState=Cl(1|t,r,a,n)}function db(e,t){return Pu(8390656,8,e,t)}function Zv(e,t){return jf(2048,8,e,t)}function ok(e,t){return jf(4,2,e,t)}function lk(e,t){return jf(4,4,e,t)}function ck(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function uk(e,t,r){return r=r!=null?r.concat([e]):null,jf(4,4,ck.bind(null,t,e),r)}function ey(){}function dk(e,t){var r=Kr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Xv(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function fk(e,t){var r=Kr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Xv(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function hk(e,t,r){return Ia&21?(dn(r,t)||(r=yS(),Ye.lanes|=r,Ra|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,lr=!0),e.memoizedState=r)}function LI(e,t){var r=Oe;Oe=r!==0&&4>r?r:4,e(!0);var n=hp.transition;hp.transition={};try{e(!1),t()}finally{Oe=r,hp.transition=n}}function pk(){return Kr().memoizedState}function $I(e,t,r){var n=Wi(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},mk(e))gk(t,r);else if(r=XS(e,t,r,n),r!==null){var i=Jt();un(r,e,n,i),vk(r,t,n)}}function FI(e,t,r){var n=Wi(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(mk(e))gk(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,o=a(s,r);if(i.hasEagerState=!0,i.eagerState=o,dn(o,s)){var l=t.interleaved;l===null?(i.next=i,Hv(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=XS(e,t,i,n),r!==null&&(i=Jt(),un(r,e,n,i),vk(r,t,n))}}function mk(e){var t=e.alternate;return e===Ye||t!==null&&t===Ye}function gk(e,t){nl=nd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function vk(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Av(e,r)}}var id={readContext:Wr,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},BI={readContext:Wr,useCallback:function(e,t){return _n().memoizedState=[e,t===void 0?null:t],e},useContext:Wr,useEffect:db,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Pu(4194308,4,ck.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Pu(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pu(4,2,e,t)},useMemo:function(e,t){var r=_n();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=_n();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=$I.bind(null,Ye,e),[n.memoizedState,e]},useRef:function(e){var t=_n();return e={current:e},t.memoizedState=e},useState:ub,useDebugValue:ey,useDeferredValue:function(e){return _n().memoizedState=e},useTransition:function(){var e=ub(!1),t=e[0];return e=LI.bind(null,e[1]),_n().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ye,i=_n();if(ze){if(r===void 0)throw Error(z(407));r=r()}else{if(r=t(),Nt===null)throw Error(z(349));Ia&30||tk(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,db(nk.bind(null,n,a,e),[e]),n.flags|=2048,Cl(9,rk.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=_n(),t=Nt.identifierPrefix;if(ze){var r=Hn,n=Kn;r=(n&~(1<<32-cn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Nl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=MI++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},UI={readContext:Wr,useCallback:dk,useContext:Wr,useEffect:Zv,useImperativeHandle:uk,useInsertionEffect:ok,useLayoutEffect:lk,useMemo:fk,useReducer:pp,useRef:sk,useState:function(){return pp(El)},useDebugValue:ey,useDeferredValue:function(e){var t=Kr();return hk(t,dt.memoizedState,e)},useTransition:function(){var e=pp(El)[0],t=Kr().memoizedState;return[e,t]},useMutableSource:ZS,useSyncExternalStore:ek,useId:pk,unstable_isNewReconciler:!1},zI={readContext:Wr,useCallback:dk,useContext:Wr,useEffect:Zv,useImperativeHandle:uk,useInsertionEffect:ok,useLayoutEffect:lk,useMemo:fk,useReducer:mp,useRef:sk,useState:function(){return mp(El)},useDebugValue:ey,useDeferredValue:function(e){var t=Kr();return dt===null?t.memoizedState=e:hk(t,dt.memoizedState,e)},useTransition:function(){var e=mp(El)[0],t=Kr().memoizedState;return[e,t]},useMutableSource:ZS,useSyncExternalStore:ek,useId:pk,unstable_isNewReconciler:!1};function rn(e,t){if(e&&e.defaultProps){t=Xe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function $m(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Xe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Sf={isMounted:function(e){return(e=e._reactInternals)?qa(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Jt(),i=Wi(e),a=Gn(n,i);a.payload=t,r!=null&&(a.callback=r),t=Ui(e,a,i),t!==null&&(un(t,e,i,n),Eu(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Jt(),i=Wi(e),a=Gn(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Ui(e,a,i),t!==null&&(un(t,e,i,n),Eu(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Jt(),n=Wi(e),i=Gn(r,n);i.tag=2,t!=null&&(i.callback=t),t=Ui(e,i,n),t!==null&&(un(t,e,n,r),Eu(t,e,n))}};function fb(e,t,r,n,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,s):t.prototype&&t.prototype.isPureReactComponent?!bl(r,n)||!bl(i,a):!0}function yk(e,t,r){var n=!1,i=Vi,a=t.contextType;return typeof a=="object"&&a!==null?a=Wr(a):(i=fr(t)?Ta:Kt.current,n=t.contextTypes,a=(n=n!=null)?Ms(e,i):Vi),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Sf,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function hb(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Sf.enqueueReplaceState(t,t.state,null)}function Fm(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},qv(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Wr(a):(a=fr(t)?Ta:Kt.current,i.context=Ms(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&($m(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Sf.enqueueReplaceState(i,i.state,null),td(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Bs(e,t){try{var r="",n=t;do r+=gD(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function gp(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Bm(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var WI=typeof WeakMap=="function"?WeakMap:Map;function xk(e,t,r){r=Gn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){sd||(sd=!0,Xm=n),Bm(e,t)},r}function bk(e,t,r){r=Gn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){Bm(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Bm(e,t),typeof n!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function pb(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new WI;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=nR.bind(null,e,t,r),t.then(e,e))}function mb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function gb(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Gn(-1,1),t.tag=2,Ui(r,t,1))),r.lanes|=1),e)}var KI=fi.ReactCurrentOwner,lr=!1;function Vt(e,t,r,n){t.child=e===null?YS(t,null,r,n):$s(t,e.child,r,n)}function vb(e,t,r,n,i){r=r.render;var a=t.ref;return Cs(t,i),n=Jv(e,t,r,n,a,i),r=Qv(),e!==null&&!lr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ti(e,t,i)):(ze&&r&&Fv(t),t.flags|=1,Vt(e,t,n,i),t.child)}function yb(e,t,r,n,i){if(e===null){var a=r.type;return typeof a=="function"&&!ly(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,wk(e,t,a,n,i)):(e=Du(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var s=a.memoizedProps;if(r=r.compare,r=r!==null?r:bl,r(s,n)&&e.ref===t.ref)return ti(e,t,i)}return t.flags|=1,e=Ki(a,n),e.ref=t.ref,e.return=t,t.child=e}function wk(e,t,r,n,i){if(e!==null){var a=e.memoizedProps;if(bl(a,n)&&e.ref===t.ref)if(lr=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(lr=!0);else return t.lanes=e.lanes,ti(e,t,i)}return Um(e,t,r,n,i)}function _k(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(ws,xr),xr|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Le(ws,xr),xr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Le(ws,xr),xr|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Le(ws,xr),xr|=n;return Vt(e,t,i,r),t.child}function jk(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Um(e,t,r,n,i){var a=fr(r)?Ta:Kt.current;return a=Ms(t,a),Cs(t,i),r=Jv(e,t,r,n,a,i),n=Qv(),e!==null&&!lr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ti(e,t,i)):(ze&&n&&Fv(t),t.flags|=1,Vt(e,t,r,i),t.child)}function xb(e,t,r,n,i){if(fr(r)){var a=!0;Xu(t)}else a=!1;if(Cs(t,i),t.stateNode===null)Ou(e,t),yk(t,r,n),Fm(t,r,n,i),n=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=Wr(u):(u=fr(r)?Ta:Kt.current,u=Ms(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==n||l!==u)&&hb(t,s,n,u),Ni=!1;var h=t.memoizedState;s.state=h,td(t,n,s,i),l=t.memoizedState,o!==n||h!==l||dr.current||Ni?(typeof d=="function"&&($m(t,r,d,n),l=t.memoizedState),(o=Ni||fb(t,r,o,n,h,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),s.props=n,s.state=l,s.context=u,n=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,JS(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:rn(t.type,o),s.props=u,f=t.pendingProps,h=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=Wr(l):(l=fr(r)?Ta:Kt.current,l=Ms(t,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||h!==l)&&hb(t,s,n,l),Ni=!1,h=t.memoizedState,s.state=h,td(t,n,s,i);var g=t.memoizedState;o!==f||h!==g||dr.current||Ni?(typeof p=="function"&&($m(t,r,p,n),g=t.memoizedState),(u=Ni||fb(t,r,u,n,h,g,l)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,g,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,g,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),s.props=n,s.state=g,s.context=l,n=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return zm(e,t,r,n,a,i)}function zm(e,t,r,n,i,a){jk(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return i&&ib(t,r,!1),ti(e,t,a);n=t.stateNode,KI.current=t;var o=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=$s(t,e.child,null,a),t.child=$s(t,null,o,a)):Vt(e,t,o,a),t.memoizedState=n.state,i&&ib(t,r,!0),t.child}function Sk(e){var t=e.stateNode;t.pendingContext?nb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nb(e,t.context,!1),Vv(e,t.containerInfo)}function bb(e,t,r,n,i){return Ls(),Uv(i),t.flags|=256,Vt(e,t,r,n),t.child}var Wm={dehydrated:null,treeContext:null,retryLane:0};function Km(e){return{baseLanes:e,cachePool:null,transitions:null}}function kk(e,t,r){var n=t.pendingProps,i=Ge.current,a=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Le(Ge,i&1),e===null)return Mm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,a?(n=t.mode,a=t.child,s={mode:"hidden",children:s},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=Ef(s,n,0,null),e=Ea(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Km(r),t.memoizedState=Wm,e):ty(t,s));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return HI(e,t,s,n,o,i,r);if(a){a=n.fallback,s=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(s&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=Ki(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=Ki(o,a):(a=Ea(a,s,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,s=e.child.memoizedState,s=s===null?Km(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~r,t.memoizedState=Wm,n}return a=e.child,e=a.sibling,n=Ki(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function ty(e,t){return t=Ef({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function zc(e,t,r,n){return n!==null&&Uv(n),$s(t,e.child,null,r),e=ty(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function HI(e,t,r,n,i,a,s){if(r)return t.flags&256?(t.flags&=-257,n=gp(Error(z(422))),zc(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=Ef({mode:"visible",children:n.children},i,0,null),a=Ea(a,i,s,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&$s(t,e.child,null,s),t.child.memoizedState=Km(s),t.memoizedState=Wm,a);if(!(t.mode&1))return zc(e,t,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(z(419)),n=gp(a,n,void 0),zc(e,t,s,n)}if(o=(s&e.childLanes)!==0,lr||o){if(n=Nt,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,ei(e,i),un(n,e,i,-1))}return oy(),n=gp(Error(z(421))),zc(e,t,s,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=iR.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Sr=Bi(i.nextSibling),kr=t,ze=!0,sn=null,e!==null&&($r[Fr++]=Kn,$r[Fr++]=Hn,$r[Fr++]=Da,Kn=e.id,Hn=e.overflow,Da=t),t=ty(t,n.children),t.flags|=4096,t)}function wb(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Lm(e.return,t,r)}function vp(e,t,r,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function Nk(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(Vt(e,t,n.children,r),n=Ge.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wb(e,r,t);else if(e.tag===19)wb(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Le(Ge,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&rd(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),vp(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&rd(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}vp(t,!0,r,null,a);break;case"together":vp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ou(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ti(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ra|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(z(153));if(t.child!==null){for(e=t.child,r=Ki(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ki(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function qI(e,t,r){switch(t.tag){case 3:Sk(t),Ls();break;case 5:QS(t);break;case 1:fr(t.type)&&Xu(t);break;case 4:Vv(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Le(Zu,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Le(Ge,Ge.current&1),t.flags|=128,null):r&t.child.childLanes?kk(e,t,r):(Le(Ge,Ge.current&1),e=ti(e,t,r),e!==null?e.sibling:null);Le(Ge,Ge.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Nk(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Le(Ge,Ge.current),n)break;return null;case 22:case 23:return t.lanes=0,_k(e,t,r)}return ti(e,t,r)}var Ek,Hm,Ck,Pk;Ek=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Hm=function(){};Ck=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,wa(En.current);var a=null;switch(r){case"input":i=hm(e,i),n=hm(e,n),a=[];break;case"select":i=Xe({},i,{value:void 0}),n=Xe({},n,{value:void 0}),a=[];break;case"textarea":i=gm(e,i),n=gm(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Gu)}ym(r,n);var s;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(hl.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var l=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(a||(a=[]),a.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(hl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&$e("scroll",e),a||o===l||(a=[])):(a=a||[]).push(u,l))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};Pk=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ao(e,t){if(!ze)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function VI(e,t,r){var n=t.pendingProps;switch(Bv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(t),null;case 1:return fr(t.type)&&Yu(),Bt(t),null;case 3:return n=t.stateNode,Fs(),Be(dr),Be(Kt),Yv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Bc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,sn!==null&&(Zm(sn),sn=null))),Hm(e,t),Bt(t),null;case 5:Gv(t);var i=wa(kl.current);if(r=t.type,e!==null&&t.stateNode!=null)Ck(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(z(166));return Bt(t),null}if(e=wa(En.current),Bc(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[Sn]=t,n[jl]=a,e=(t.mode&1)!==0,r){case"dialog":$e("cancel",n),$e("close",n);break;case"iframe":case"object":case"embed":$e("load",n);break;case"video":case"audio":for(i=0;i<Vo.length;i++)$e(Vo[i],n);break;case"source":$e("error",n);break;case"img":case"image":case"link":$e("error",n),$e("load",n);break;case"details":$e("toggle",n);break;case"input":Ox(n,a),$e("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},$e("invalid",n);break;case"textarea":Tx(n,a),$e("invalid",n)}ym(r,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&Fc(n.textContent,o,e),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Fc(n.textContent,o,e),i=["children",""+o]):hl.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&$e("scroll",n)}switch(r){case"input":Ac(n),Ax(n,a,!0);break;case"textarea":Ac(n),Dx(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Gu)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=nS(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[Sn]=t,e[jl]=n,Ek(e,t,!1,!1),t.stateNode=e;e:{switch(s=xm(r,n),r){case"dialog":$e("cancel",e),$e("close",e),i=n;break;case"iframe":case"object":case"embed":$e("load",e),i=n;break;case"video":case"audio":for(i=0;i<Vo.length;i++)$e(Vo[i],e);i=n;break;case"source":$e("error",e),i=n;break;case"img":case"image":case"link":$e("error",e),$e("load",e),i=n;break;case"details":$e("toggle",e),i=n;break;case"input":Ox(e,n),i=hm(e,n),$e("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Xe({},n,{value:void 0}),$e("invalid",e);break;case"textarea":Tx(e,n),i=gm(e,n),$e("invalid",e);break;default:i=n}ym(r,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?sS(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&iS(e,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&pl(e,l):typeof l=="number"&&pl(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(hl.hasOwnProperty(a)?l!=null&&a==="onScroll"&&$e("scroll",e):l!=null&&kv(e,a,l,s))}switch(r){case"input":Ac(e),Ax(e,n,!1);break;case"textarea":Ac(e),Dx(e);break;case"option":n.value!=null&&e.setAttribute("value",""+qi(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Ss(e,!!n.multiple,a,!1):n.defaultValue!=null&&Ss(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Gu)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Bt(t),null;case 6:if(e&&t.stateNode!=null)Pk(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(z(166));if(r=wa(kl.current),wa(En.current),Bc(t)){if(n=t.stateNode,r=t.memoizedProps,n[Sn]=t,(a=n.nodeValue!==r)&&(e=kr,e!==null))switch(e.tag){case 3:Fc(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fc(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Sn]=t,t.stateNode=n}return Bt(t),null;case 13:if(Be(Ge),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ze&&Sr!==null&&t.mode&1&&!(t.flags&128))VS(),Ls(),t.flags|=98560,a=!1;else if(a=Bc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(z(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(z(317));a[Sn]=t}else Ls(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bt(t),a=!1}else sn!==null&&(Zm(sn),sn=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Ge.current&1?mt===0&&(mt=3):oy())),t.updateQueue!==null&&(t.flags|=4),Bt(t),null);case 4:return Fs(),Hm(e,t),e===null&&wl(t.stateNode.containerInfo),Bt(t),null;case 10:return Kv(t.type._context),Bt(t),null;case 17:return fr(t.type)&&Yu(),Bt(t),null;case 19:if(Be(Ge),a=t.memoizedState,a===null)return Bt(t),null;if(n=(t.flags&128)!==0,s=a.rendering,s===null)if(n)Ao(a,!1);else{if(mt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=rd(e),s!==null){for(t.flags|=128,Ao(a,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Le(Ge,Ge.current&1|2),t.child}e=e.sibling}a.tail!==null&&tt()>Us&&(t.flags|=128,n=!0,Ao(a,!1),t.lanes=4194304)}else{if(!n)if(e=rd(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ao(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!ze)return Bt(t),null}else 2*tt()-a.renderingStartTime>Us&&r!==1073741824&&(t.flags|=128,n=!0,Ao(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(r=a.last,r!==null?r.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=tt(),t.sibling=null,r=Ge.current,Le(Ge,n?r&1|2:r&1),t):(Bt(t),null);case 22:case 23:return sy(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?xr&1073741824&&(Bt(t),t.subtreeFlags&6&&(t.flags|=8192)):Bt(t),null;case 24:return null;case 25:return null}throw Error(z(156,t.tag))}function GI(e,t){switch(Bv(t),t.tag){case 1:return fr(t.type)&&Yu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fs(),Be(dr),Be(Kt),Yv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Gv(t),null;case 13:if(Be(Ge),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(z(340));Ls()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Be(Ge),null;case 4:return Fs(),null;case 10:return Kv(t.type._context),null;case 22:case 23:return sy(),null;case 24:return null;default:return null}}var Wc=!1,zt=!1,YI=typeof WeakSet=="function"?WeakSet:Set,ee=null;function bs(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Qe(e,t,n)}else r.current=null}function qm(e,t,r){try{r()}catch(n){Qe(e,t,n)}}var _b=!1;function XI(e,t){if(Pm=Hu,e=IS(),$v(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,o=-1,l=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==r||i!==0&&f.nodeType!==3||(o=s+i),f!==a||n!==0&&f.nodeType!==3||(l=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===r&&++u===i&&(o=s),h===a&&++d===n&&(l=s),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Om={focusedElem:e,selectionRange:r},Hu=!1,ee=t;ee!==null;)if(t=ee,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ee=e;else for(;ee!==null;){t=ee;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,y=g.memoizedState,x=t.stateNode,w=x.getSnapshotBeforeUpdate(t.elementType===t.type?v:rn(t.type,v),y);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(_){Qe(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,ee=e;break}ee=t.return}return g=_b,_b=!1,g}function il(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&qm(t,r,a)}i=i.next}while(i!==n)}}function kf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Vm(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Ok(e){var t=e.alternate;t!==null&&(e.alternate=null,Ok(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Sn],delete t[jl],delete t[Dm],delete t[TI],delete t[DI])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ak(e){return e.tag===5||e.tag===3||e.tag===4}function jb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ak(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Gu));else if(n!==4&&(e=e.child,e!==null))for(Gm(e,t,r),e=e.sibling;e!==null;)Gm(e,t,r),e=e.sibling}function Ym(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Ym(e,t,r),e=e.sibling;e!==null;)Ym(e,t,r),e=e.sibling}var Rt=null,an=!1;function ji(e,t,r){for(r=r.child;r!==null;)Tk(e,t,r),r=r.sibling}function Tk(e,t,r){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(vf,r)}catch{}switch(r.tag){case 5:zt||bs(r,t);case 6:var n=Rt,i=an;Rt=null,ji(e,t,r),Rt=n,an=i,Rt!==null&&(an?(e=Rt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Rt.removeChild(r.stateNode));break;case 18:Rt!==null&&(an?(e=Rt,r=r.stateNode,e.nodeType===8?up(e.parentNode,r):e.nodeType===1&&up(e,r),yl(e)):up(Rt,r.stateNode));break;case 4:n=Rt,i=an,Rt=r.stateNode.containerInfo,an=!0,ji(e,t,r),Rt=n,an=i;break;case 0:case 11:case 14:case 15:if(!zt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&qm(r,t,s),i=i.next}while(i!==n)}ji(e,t,r);break;case 1:if(!zt&&(bs(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Qe(r,t,o)}ji(e,t,r);break;case 21:ji(e,t,r);break;case 22:r.mode&1?(zt=(n=zt)||r.memoizedState!==null,ji(e,t,r),zt=n):ji(e,t,r);break;default:ji(e,t,r)}}function Sb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new YI),t.forEach(function(n){var i=aR.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function en(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:Rt=o.stateNode,an=!1;break e;case 3:Rt=o.stateNode.containerInfo,an=!0;break e;case 4:Rt=o.stateNode.containerInfo,an=!0;break e}o=o.return}if(Rt===null)throw Error(z(160));Tk(a,s,i),Rt=null,an=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Qe(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Dk(t,e),t=t.sibling}function Dk(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(en(t,e),wn(e),n&4){try{il(3,e,e.return),kf(3,e)}catch(v){Qe(e,e.return,v)}try{il(5,e,e.return)}catch(v){Qe(e,e.return,v)}}break;case 1:en(t,e),wn(e),n&512&&r!==null&&bs(r,r.return);break;case 5:if(en(t,e),wn(e),n&512&&r!==null&&bs(r,r.return),e.flags&32){var i=e.stateNode;try{pl(i,"")}catch(v){Qe(e,e.return,v)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=r!==null?r.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&tS(i,a),xm(o,s);var u=xm(o,a);for(s=0;s<l.length;s+=2){var d=l[s],f=l[s+1];d==="style"?sS(i,f):d==="dangerouslySetInnerHTML"?iS(i,f):d==="children"?pl(i,f):kv(i,d,f,u)}switch(o){case"input":pm(i,a);break;case"textarea":rS(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?Ss(i,!!a.multiple,p,!1):h!==!!a.multiple&&(a.defaultValue!=null?Ss(i,!!a.multiple,a.defaultValue,!0):Ss(i,!!a.multiple,a.multiple?[]:"",!1))}i[jl]=a}catch(v){Qe(e,e.return,v)}}break;case 6:if(en(t,e),wn(e),n&4){if(e.stateNode===null)throw Error(z(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(v){Qe(e,e.return,v)}}break;case 3:if(en(t,e),wn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{yl(t.containerInfo)}catch(v){Qe(e,e.return,v)}break;case 4:en(t,e),wn(e);break;case 13:en(t,e),wn(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(iy=tt())),n&4&&Sb(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(zt=(u=zt)||d,en(t,e),zt=u):en(t,e),wn(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(ee=e,d=e.child;d!==null;){for(f=ee=d;ee!==null;){switch(h=ee,p=h.child,h.tag){case 0:case 11:case 14:case 15:il(4,h,h.return);break;case 1:bs(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){Qe(n,r,v)}}break;case 5:bs(h,h.return);break;case 22:if(h.memoizedState!==null){Nb(f);continue}}p!==null?(p.return=h,ee=p):Nb(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=aS("display",s))}catch(v){Qe(e,e.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){Qe(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:en(t,e),wn(e),n&4&&Sb(e);break;case 21:break;default:en(t,e),wn(e)}}function wn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Ak(r)){var n=r;break e}r=r.return}throw Error(z(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(pl(i,""),n.flags&=-33);var a=jb(e);Ym(e,a,i);break;case 3:case 4:var s=n.stateNode.containerInfo,o=jb(e);Gm(e,o,s);break;default:throw Error(z(161))}}catch(l){Qe(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function JI(e,t,r){ee=e,Ik(e)}function Ik(e,t,r){for(var n=(e.mode&1)!==0;ee!==null;){var i=ee,a=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||Wc;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||zt;o=Wc;var u=zt;if(Wc=s,(zt=l)&&!u)for(ee=i;ee!==null;)s=ee,l=s.child,s.tag===22&&s.memoizedState!==null?Eb(i):l!==null?(l.return=s,ee=l):Eb(i);for(;a!==null;)ee=a,Ik(a),a=a.sibling;ee=i,Wc=o,zt=u}kb(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ee=a):kb(e)}}function kb(e){for(;ee!==null;){var t=ee;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:zt||kf(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!zt)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:rn(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&cb(t,a,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}cb(t,s,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&yl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}zt||t.flags&512&&Vm(t)}catch(h){Qe(t,t.return,h)}}if(t===e){ee=null;break}if(r=t.sibling,r!==null){r.return=t.return,ee=r;break}ee=t.return}}function Nb(e){for(;ee!==null;){var t=ee;if(t===e){ee=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ee=r;break}ee=t.return}}function Eb(e){for(;ee!==null;){var t=ee;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{kf(4,t)}catch(l){Qe(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){Qe(t,i,l)}}var a=t.return;try{Vm(t)}catch(l){Qe(t,a,l)}break;case 5:var s=t.return;try{Vm(t)}catch(l){Qe(t,s,l)}}}catch(l){Qe(t,t.return,l)}if(t===e){ee=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ee=o;break}ee=t.return}}var QI=Math.ceil,ad=fi.ReactCurrentDispatcher,ry=fi.ReactCurrentOwner,zr=fi.ReactCurrentBatchConfig,ke=0,Nt=null,st=null,Lt=0,xr=0,ws=Zi(0),mt=0,Pl=null,Ra=0,Nf=0,ny=0,al=null,or=null,iy=0,Us=1/0,Fn=null,sd=!1,Xm=null,zi=null,Kc=!1,Ri=null,od=0,sl=0,Jm=null,Au=-1,Tu=0;function Jt(){return ke&6?tt():Au!==-1?Au:Au=tt()}function Wi(e){return e.mode&1?ke&2&&Lt!==0?Lt&-Lt:RI.transition!==null?(Tu===0&&(Tu=yS()),Tu):(e=Oe,e!==0||(e=window.event,e=e===void 0?16:kS(e.type)),e):1}function un(e,t,r,n){if(50<sl)throw sl=0,Jm=null,Error(z(185));Jl(e,r,n),(!(ke&2)||e!==Nt)&&(e===Nt&&(!(ke&2)&&(Nf|=r),mt===4&&Ai(e,Lt)),hr(e,n),r===1&&ke===0&&!(t.mode&1)&&(Us=tt()+500,_f&&ea()))}function hr(e,t){var r=e.callbackNode;RD(e,t);var n=Ku(e,e===Nt?Lt:0);if(n===0)r!==null&&Mx(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Mx(r),t===1)e.tag===0?II(Cb.bind(null,e)):KS(Cb.bind(null,e)),OI(function(){!(ke&6)&&ea()}),r=null;else{switch(xS(n)){case 1:r=Ov;break;case 4:r=gS;break;case 16:r=Wu;break;case 536870912:r=vS;break;default:r=Wu}r=zk(r,Rk.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Rk(e,t){if(Au=-1,Tu=0,ke&6)throw Error(z(327));var r=e.callbackNode;if(Ps()&&e.callbackNode!==r)return null;var n=Ku(e,e===Nt?Lt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=ld(e,n);else{t=n;var i=ke;ke|=2;var a=Lk();(Nt!==e||Lt!==t)&&(Fn=null,Us=tt()+500,Na(e,t));do try{tR();break}catch(o){Mk(e,o)}while(!0);Wv(),ad.current=a,ke=i,st!==null?t=0:(Nt=null,Lt=0,t=mt)}if(t!==0){if(t===2&&(i=Sm(e),i!==0&&(n=i,t=Qm(e,i))),t===1)throw r=Pl,Na(e,0),Ai(e,n),hr(e,tt()),r;if(t===6)Ai(e,n);else{if(i=e.current.alternate,!(n&30)&&!ZI(i)&&(t=ld(e,n),t===2&&(a=Sm(e),a!==0&&(n=a,t=Qm(e,a))),t===1))throw r=Pl,Na(e,0),Ai(e,n),hr(e,tt()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(z(345));case 2:da(e,or,Fn);break;case 3:if(Ai(e,n),(n&130023424)===n&&(t=iy+500-tt(),10<t)){if(Ku(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Jt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Tm(da.bind(null,e,or,Fn),t);break}da(e,or,Fn);break;case 4:if(Ai(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-cn(n);a=1<<s,s=t[s],s>i&&(i=s),n&=~a}if(n=i,n=tt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*QI(n/1960))-n,10<n){e.timeoutHandle=Tm(da.bind(null,e,or,Fn),n);break}da(e,or,Fn);break;case 5:da(e,or,Fn);break;default:throw Error(z(329))}}}return hr(e,tt()),e.callbackNode===r?Rk.bind(null,e):null}function Qm(e,t){var r=al;return e.current.memoizedState.isDehydrated&&(Na(e,t).flags|=256),e=ld(e,t),e!==2&&(t=or,or=r,t!==null&&Zm(t)),e}function Zm(e){or===null?or=e:or.push.apply(or,e)}function ZI(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!dn(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ai(e,t){for(t&=~ny,t&=~Nf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-cn(t),n=1<<r;e[r]=-1,t&=~n}}function Cb(e){if(ke&6)throw Error(z(327));Ps();var t=Ku(e,0);if(!(t&1))return hr(e,tt()),null;var r=ld(e,t);if(e.tag!==0&&r===2){var n=Sm(e);n!==0&&(t=n,r=Qm(e,n))}if(r===1)throw r=Pl,Na(e,0),Ai(e,t),hr(e,tt()),r;if(r===6)throw Error(z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,da(e,or,Fn),hr(e,tt()),null}function ay(e,t){var r=ke;ke|=1;try{return e(t)}finally{ke=r,ke===0&&(Us=tt()+500,_f&&ea())}}function Ma(e){Ri!==null&&Ri.tag===0&&!(ke&6)&&Ps();var t=ke;ke|=1;var r=zr.transition,n=Oe;try{if(zr.transition=null,Oe=1,e)return e()}finally{Oe=n,zr.transition=r,ke=t,!(ke&6)&&ea()}}function sy(){xr=ws.current,Be(ws)}function Na(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,PI(r)),st!==null)for(r=st.return;r!==null;){var n=r;switch(Bv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Yu();break;case 3:Fs(),Be(dr),Be(Kt),Yv();break;case 5:Gv(n);break;case 4:Fs();break;case 13:Be(Ge);break;case 19:Be(Ge);break;case 10:Kv(n.type._context);break;case 22:case 23:sy()}r=r.return}if(Nt=e,st=e=Ki(e.current,null),Lt=xr=t,mt=0,Pl=null,ny=Nf=Ra=0,or=al=null,ba!==null){for(t=0;t<ba.length;t++)if(r=ba[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var s=a.next;a.next=i,n.next=s}r.pending=n}ba=null}return e}function Mk(e,t){do{var r=st;try{if(Wv(),Cu.current=id,nd){for(var n=Ye.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}nd=!1}if(Ia=0,jt=dt=Ye=null,nl=!1,Nl=0,ry.current=null,r===null||r.return===null){mt=1,Pl=t,st=null;break}e:{var a=e,s=r.return,o=r,l=t;if(t=Lt,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=mb(s);if(p!==null){p.flags&=-257,gb(p,s,o,a,t),p.mode&1&&pb(a,u,t),t=p,l=u;var g=t.updateQueue;if(g===null){var v=new Set;v.add(l),t.updateQueue=v}else g.add(l);break e}else{if(!(t&1)){pb(a,u,t),oy();break e}l=Error(z(426))}}else if(ze&&o.mode&1){var y=mb(s);if(y!==null){!(y.flags&65536)&&(y.flags|=256),gb(y,s,o,a,t),Uv(Bs(l,o));break e}}a=l=Bs(l,o),mt!==4&&(mt=2),al===null?al=[a]:al.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var x=xk(a,l,t);lb(a,x);break e;case 1:o=l;var w=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(zi===null||!zi.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t;var _=bk(a,o,t);lb(a,_);break e}}a=a.return}while(a!==null)}Fk(r)}catch(j){t=j,st===r&&r!==null&&(st=r=r.return);continue}break}while(!0)}function Lk(){var e=ad.current;return ad.current=id,e===null?id:e}function oy(){(mt===0||mt===3||mt===2)&&(mt=4),Nt===null||!(Ra&268435455)&&!(Nf&268435455)||Ai(Nt,Lt)}function ld(e,t){var r=ke;ke|=2;var n=Lk();(Nt!==e||Lt!==t)&&(Fn=null,Na(e,t));do try{eR();break}catch(i){Mk(e,i)}while(!0);if(Wv(),ke=r,ad.current=n,st!==null)throw Error(z(261));return Nt=null,Lt=0,mt}function eR(){for(;st!==null;)$k(st)}function tR(){for(;st!==null&&!ND();)$k(st)}function $k(e){var t=Uk(e.alternate,e,xr);e.memoizedProps=e.pendingProps,t===null?Fk(e):st=t,ry.current=null}function Fk(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=GI(r,t),r!==null){r.flags&=32767,st=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{mt=6,st=null;return}}else if(r=VI(r,t,xr),r!==null){st=r;return}if(t=t.sibling,t!==null){st=t;return}st=t=e}while(t!==null);mt===0&&(mt=5)}function da(e,t,r){var n=Oe,i=zr.transition;try{zr.transition=null,Oe=1,rR(e,t,r,n)}finally{zr.transition=i,Oe=n}return null}function rR(e,t,r,n){do Ps();while(Ri!==null);if(ke&6)throw Error(z(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(z(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(MD(e,a),e===Nt&&(st=Nt=null,Lt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Kc||(Kc=!0,zk(Wu,function(){return Ps(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=zr.transition,zr.transition=null;var s=Oe;Oe=1;var o=ke;ke|=4,ry.current=null,XI(e,r),Dk(r,e),_I(Om),Hu=!!Pm,Om=Pm=null,e.current=r,JI(r),ED(),ke=o,Oe=s,zr.transition=a}else e.current=r;if(Kc&&(Kc=!1,Ri=e,od=i),a=e.pendingLanes,a===0&&(zi=null),OD(r.stateNode),hr(e,tt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(sd)throw sd=!1,e=Xm,Xm=null,e;return od&1&&e.tag!==0&&Ps(),a=e.pendingLanes,a&1?e===Jm?sl++:(sl=0,Jm=e):sl=0,ea(),null}function Ps(){if(Ri!==null){var e=xS(od),t=zr.transition,r=Oe;try{if(zr.transition=null,Oe=16>e?16:e,Ri===null)var n=!1;else{if(e=Ri,Ri=null,od=0,ke&6)throw Error(z(331));var i=ke;for(ke|=4,ee=e.current;ee!==null;){var a=ee,s=a.child;if(ee.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(ee=u;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:il(8,d,a)}var f=d.child;if(f!==null)f.return=d,ee=f;else for(;ee!==null;){d=ee;var h=d.sibling,p=d.return;if(Ok(d),d===u){ee=null;break}if(h!==null){h.return=p,ee=h;break}ee=p}}}var g=a.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}ee=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,ee=s;else e:for(;ee!==null;){if(a=ee,a.flags&2048)switch(a.tag){case 0:case 11:case 15:il(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,ee=x;break e}ee=a.return}}var w=e.current;for(ee=w;ee!==null;){s=ee;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,ee=b;else e:for(s=w;ee!==null;){if(o=ee,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:kf(9,o)}}catch(j){Qe(o,o.return,j)}if(o===s){ee=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,ee=_;break e}ee=o.return}}if(ke=i,ea(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(vf,e)}catch{}n=!0}return n}finally{Oe=r,zr.transition=t}}return!1}function Pb(e,t,r){t=Bs(r,t),t=xk(e,t,1),e=Ui(e,t,1),t=Jt(),e!==null&&(Jl(e,1,t),hr(e,t))}function Qe(e,t,r){if(e.tag===3)Pb(e,e,r);else for(;t!==null;){if(t.tag===3){Pb(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(zi===null||!zi.has(n))){e=Bs(r,e),e=bk(t,e,1),t=Ui(t,e,1),e=Jt(),t!==null&&(Jl(t,1,e),hr(t,e));break}}t=t.return}}function nR(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Jt(),e.pingedLanes|=e.suspendedLanes&r,Nt===e&&(Lt&r)===r&&(mt===4||mt===3&&(Lt&130023424)===Lt&&500>tt()-iy?Na(e,0):ny|=r),hr(e,t)}function Bk(e,t){t===0&&(e.mode&1?(t=Ic,Ic<<=1,!(Ic&130023424)&&(Ic=4194304)):t=1);var r=Jt();e=ei(e,t),e!==null&&(Jl(e,t,r),hr(e,r))}function iR(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Bk(e,r)}function aR(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(z(314))}n!==null&&n.delete(t),Bk(e,r)}var Uk;Uk=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||dr.current)lr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return lr=!1,qI(e,t,r);lr=!!(e.flags&131072)}else lr=!1,ze&&t.flags&1048576&&HS(t,Qu,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ou(e,t),e=t.pendingProps;var i=Ms(t,Kt.current);Cs(t,r),i=Jv(null,t,n,e,i,r);var a=Qv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,fr(n)?(a=!0,Xu(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,qv(t),i.updater=Sf,t.stateNode=i,i._reactInternals=t,Fm(t,n,e,r),t=zm(null,t,n,!0,a,r)):(t.tag=0,ze&&a&&Fv(t),Vt(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ou(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=oR(n),e=rn(n,e),i){case 0:t=Um(null,t,n,e,r);break e;case 1:t=xb(null,t,n,e,r);break e;case 11:t=vb(null,t,n,e,r);break e;case 14:t=yb(null,t,n,rn(n.type,e),r);break e}throw Error(z(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:rn(n,i),Um(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:rn(n,i),xb(e,t,n,i,r);case 3:e:{if(Sk(t),e===null)throw Error(z(387));n=t.pendingProps,a=t.memoizedState,i=a.element,JS(e,t),td(t,n,null,r);var s=t.memoizedState;if(n=s.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Bs(Error(z(423)),t),t=bb(e,t,n,r,i);break e}else if(n!==i){i=Bs(Error(z(424)),t),t=bb(e,t,n,r,i);break e}else for(Sr=Bi(t.stateNode.containerInfo.firstChild),kr=t,ze=!0,sn=null,r=YS(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ls(),n===i){t=ti(e,t,r);break e}Vt(e,t,n,r)}t=t.child}return t;case 5:return QS(t),e===null&&Mm(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,Am(n,i)?s=null:a!==null&&Am(n,a)&&(t.flags|=32),jk(e,t),Vt(e,t,s,r),t.child;case 6:return e===null&&Mm(t),null;case 13:return kk(e,t,r);case 4:return Vv(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=$s(t,null,n,r):Vt(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:rn(n,i),vb(e,t,n,i,r);case 7:return Vt(e,t,t.pendingProps,r),t.child;case 8:return Vt(e,t,t.pendingProps.children,r),t.child;case 12:return Vt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Le(Zu,n._currentValue),n._currentValue=s,a!==null)if(dn(a.value,s)){if(a.children===i.children&&!dr.current){t=ti(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=Gn(-1,r&-r),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Lm(a.return,r,t),o.lanes|=r;break}l=l.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(z(341));s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),Lm(s,r,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Vt(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Cs(t,r),i=Wr(i),n=n(i),t.flags|=1,Vt(e,t,n,r),t.child;case 14:return n=t.type,i=rn(n,t.pendingProps),i=rn(n.type,i),yb(e,t,n,i,r);case 15:return wk(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:rn(n,i),Ou(e,t),t.tag=1,fr(n)?(e=!0,Xu(t)):e=!1,Cs(t,r),yk(t,n,i),Fm(t,n,i,r),zm(null,t,n,!0,e,r);case 19:return Nk(e,t,r);case 22:return _k(e,t,r)}throw Error(z(156,t.tag))};function zk(e,t){return mS(e,t)}function sR(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Br(e,t,r,n){return new sR(e,t,r,n)}function ly(e){return e=e.prototype,!(!e||!e.isReactComponent)}function oR(e){if(typeof e=="function")return ly(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ev)return 11;if(e===Cv)return 14}return 2}function Ki(e,t){var r=e.alternate;return r===null?(r=Br(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Du(e,t,r,n,i,a){var s=2;if(n=e,typeof e=="function")ly(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case ds:return Ea(r.children,i,a,t);case Nv:s=8,i|=8;break;case cm:return e=Br(12,r,t,i|2),e.elementType=cm,e.lanes=a,e;case um:return e=Br(13,r,t,i),e.elementType=um,e.lanes=a,e;case dm:return e=Br(19,r,t,i),e.elementType=dm,e.lanes=a,e;case Qj:return Ef(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Xj:s=10;break e;case Jj:s=9;break e;case Ev:s=11;break e;case Cv:s=14;break e;case ki:s=16,n=null;break e}throw Error(z(130,e==null?e:typeof e,""))}return t=Br(s,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function Ea(e,t,r,n){return e=Br(7,e,n,t),e.lanes=r,e}function Ef(e,t,r,n){return e=Br(22,e,n,t),e.elementType=Qj,e.lanes=r,e.stateNode={isHidden:!1},e}function yp(e,t,r){return e=Br(6,e,null,t),e.lanes=r,e}function xp(e,t,r){return t=Br(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function lR(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zh(0),this.expirationTimes=Zh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zh(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function cy(e,t,r,n,i,a,s,o,l){return e=new lR(e,t,r,o,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Br(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},qv(a),e}function cR(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:us,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Wk(e){if(!e)return Vi;e=e._reactInternals;e:{if(qa(e)!==e||e.tag!==1)throw Error(z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(fr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(z(171))}if(e.tag===1){var r=e.type;if(fr(r))return WS(e,r,t)}return t}function Kk(e,t,r,n,i,a,s,o,l){return e=cy(r,n,!0,e,i,a,s,o,l),e.context=Wk(null),r=e.current,n=Jt(),i=Wi(r),a=Gn(n,i),a.callback=t??null,Ui(r,a,i),e.current.lanes=i,Jl(e,i,n),hr(e,n),e}function Cf(e,t,r,n){var i=t.current,a=Jt(),s=Wi(i);return r=Wk(r),t.context===null?t.context=r:t.pendingContext=r,t=Gn(a,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ui(i,t,s),e!==null&&(un(e,i,s,a),Eu(e,i,s)),s}function cd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ob(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function uy(e,t){Ob(e,t),(e=e.alternate)&&Ob(e,t)}function uR(){return null}var Hk=typeof reportError=="function"?reportError:function(e){console.error(e)};function dy(e){this._internalRoot=e}Pf.prototype.render=dy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(z(409));Cf(e,t,null,null)};Pf.prototype.unmount=dy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ma(function(){Cf(null,e,null,null)}),t[Zn]=null}};function Pf(e){this._internalRoot=e}Pf.prototype.unstable_scheduleHydration=function(e){if(e){var t=_S();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Oi.length&&t!==0&&t<Oi[r].priority;r++);Oi.splice(r,0,e),r===0&&SS(e)}};function fy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Of(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ab(){}function dR(e,t,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=cd(s);a.call(u)}}var s=Kk(t,n,e,0,null,!1,!1,"",Ab);return e._reactRootContainer=s,e[Zn]=s.current,wl(e.nodeType===8?e.parentNode:e),Ma(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=cd(l);o.call(u)}}var l=cy(e,0,!1,null,null,!1,!1,"",Ab);return e._reactRootContainer=l,e[Zn]=l.current,wl(e.nodeType===8?e.parentNode:e),Ma(function(){Cf(t,l,r,n)}),l}function Af(e,t,r,n,i){var a=r._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=cd(s);o.call(l)}}Cf(t,s,e,i)}else s=dR(r,t,e,i,n);return cd(s)}bS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=qo(t.pendingLanes);r!==0&&(Av(t,r|1),hr(t,tt()),!(ke&6)&&(Us=tt()+500,ea()))}break;case 13:Ma(function(){var n=ei(e,1);if(n!==null){var i=Jt();un(n,e,1,i)}}),uy(e,1)}};Tv=function(e){if(e.tag===13){var t=ei(e,134217728);if(t!==null){var r=Jt();un(t,e,134217728,r)}uy(e,134217728)}};wS=function(e){if(e.tag===13){var t=Wi(e),r=ei(e,t);if(r!==null){var n=Jt();un(r,e,t,n)}uy(e,t)}};_S=function(){return Oe};jS=function(e,t){var r=Oe;try{return Oe=e,t()}finally{Oe=r}};wm=function(e,t,r){switch(t){case"input":if(pm(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=wf(n);if(!i)throw Error(z(90));eS(n),pm(n,i)}}}break;case"textarea":rS(e,r);break;case"select":t=r.value,t!=null&&Ss(e,!!r.multiple,t,!1)}};cS=ay;uS=Ma;var fR={usingClientEntryPoint:!1,Events:[Zl,ms,wf,oS,lS,ay]},To={findFiberByHostInstance:xa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hR={bundleType:To.bundleType,version:To.version,rendererPackageName:To.rendererPackageName,rendererConfig:To.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=hS(e),e===null?null:e.stateNode},findFiberByHostInstance:To.findFiberByHostInstance||uR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{vf=Hc.inject(hR),Nn=Hc}catch{}}Or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fR;Or.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fy(t))throw Error(z(200));return cR(e,t,null,r)};Or.createRoot=function(e,t){if(!fy(e))throw Error(z(299));var r=!1,n="",i=Hk;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=cy(e,1,!1,null,null,r,!1,n,i),e[Zn]=t.current,wl(e.nodeType===8?e.parentNode:e),new dy(t)};Or.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(z(188)):(e=Object.keys(e).join(","),Error(z(268,e)));return e=hS(t),e=e===null?null:e.stateNode,e};Or.flushSync=function(e){return Ma(e)};Or.hydrate=function(e,t,r){if(!Of(t))throw Error(z(200));return Af(null,e,t,!0,r)};Or.hydrateRoot=function(e,t,r){if(!fy(e))throw Error(z(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",s=Hk;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=Kk(t,null,e,1,r??null,i,!1,a,s),e[Zn]=t.current,wl(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Pf(t)};Or.render=function(e,t,r){if(!Of(t))throw Error(z(200));return Af(null,e,t,!1,r)};Or.unmountComponentAtNode=function(e){if(!Of(e))throw Error(z(40));return e._reactRootContainer?(Ma(function(){Af(null,null,e,!1,function(){e._reactRootContainer=null,e[Zn]=null})}),!0):!1};Or.unstable_batchedUpdates=ay;Or.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Of(r))throw Error(z(200));if(e==null||e._reactInternals===void 0)throw Error(z(38));return Af(e,t,r,!1,n)};Or.version="18.3.1-next-f1338f8080-20240426";function qk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qk)}catch(e){console.error(e)}}qk(),qj.exports=Or;var Mi=qj.exports,Vk,Tb=Mi;Vk=Tb.createRoot,Tb.hydrateRoot;/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Db="popstate";function pR(e={}){function t(n,i){let{pathname:a,search:s,hash:o}=n.location;return eg("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Ol(i)}return gR(t,r,null,e)}function Ke(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Cr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function mR(){return Math.random().toString(36).substring(2,10)}function Ib(e,t){return{usr:e.state,key:e.key,idx:t}}function eg(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?to(t):t,state:r,key:t&&t.key||n||mR()}}function Ol({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function to(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function gR(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,o="POP",l=null,u=d();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function d(){return(s.state||{idx:null}).idx}function f(){o="POP";let y=d(),x=y==null?null:y-u;u=y,l&&l({action:o,location:v.location,delta:x})}function h(y,x){o="PUSH";let w=eg(v.location,y,x);u=d()+1;let b=Ib(w,u),_=v.createHref(w);try{s.pushState(b,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(_)}a&&l&&l({action:o,location:v.location,delta:1})}function p(y,x){o="REPLACE";let w=eg(v.location,y,x);u=d();let b=Ib(w,u),_=v.createHref(w);s.replaceState(b,"",_),a&&l&&l({action:o,location:v.location,delta:0})}function g(y){return vR(y)}let v={get action(){return o},get location(){return e(i,s)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Db,f),l=y,()=>{i.removeEventListener(Db,f),l=null}},createHref(y){return t(i,y)},createURL:g,encodeLocation(y){let x=g(y);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:p,go(y){return s.go(y)}};return v}function vR(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Ke(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Ol(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function Gk(e,t,r="/"){return yR(e,t,r,!1)}function yR(e,t,r,n){let i=typeof t=="string"?to(t):t,a=ri(i.pathname||"/",r);if(a==null)return null;let s=Yk(e);xR(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let u=OR(a);o=CR(s[l],u,n)}return o}function Yk(e,t=[],r=[],n="",i=!1){let a=(s,o,l=i,u)=>{let d={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&l)return;Ke(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let f=Yn([n,d.relativePath]),h=r.concat(d);s.children&&s.children.length>0&&(Ke(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Yk(s.children,t,h,f,l)),!(s.path==null&&!s.index)&&t.push({path:f,score:NR(f,s.index),routesMeta:h})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,o);else for(let u of Xk(s.path))a(s,o,!0,u)}),t}function Xk(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let s=Xk(n.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function xR(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:ER(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var bR=/^:[\w-]+$/,wR=3,_R=2,jR=1,SR=10,kR=-2,Rb=e=>e==="*";function NR(e,t){let r=e.split("/"),n=r.length;return r.some(Rb)&&(n+=kR),t&&(n+=_R),r.filter(i=>!Rb(i)).reduce((i,a)=>i+(bR.test(a)?wR:a===""?jR:SR),n)}function ER(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function CR(e,t,r=!1){let{routesMeta:n}=e,i={},a="/",s=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,d=a==="/"?t:t.slice(a.length)||"/",f=ud({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),h=l.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=ud({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:Yn([a,f.pathname]),pathnameBase:RR(Yn([a,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(a=Yn([a,f.pathnameBase]))}return s}function ud(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=PR(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},h)=>{if(d==="*"){let g=o[h]||"";s=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const p=o[h];return f&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:e}}function PR(e,t=!1,r=!0){Cr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function OR(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Cr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ri(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var AR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TR=e=>AR.test(e);function DR(e,t="/"){let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?to(e):e,a;if(r)if(TR(r))a=r;else{if(r.includes("//")){let s=r;r=r.replace(/\/\/+/g,"/"),Cr(!1,`Pathnames cannot have embedded double slashes - normalizing ${s} -> ${r}`)}r.startsWith("/")?a=Mb(r.substring(1),"/"):a=Mb(r,t)}else a=t;return{pathname:a,search:MR(n),hash:LR(i)}}function Mb(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function bp(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IR(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function hy(e){let t=IR(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function py(e,t,r,n=!1){let i;typeof e=="string"?i=to(e):(i={...e},Ke(!i.pathname||!i.pathname.includes("?"),bp("?","pathname","search",i)),Ke(!i.pathname||!i.pathname.includes("#"),bp("#","pathname","hash",i)),Ke(!i.search||!i.search.includes("#"),bp("#","search","hash",i)));let a=e===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=r;else{let f=t.length-1;if(!n&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}o=f>=0?t[f]:"/"}let l=DR(i,o),u=s&&s!=="/"&&s.endsWith("/"),d=(a||s===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}var Yn=e=>e.join("/").replace(/\/\/+/g,"/"),RR=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),MR=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,LR=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function $R(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Jk=["POST","PUT","PATCH","DELETE"];new Set(Jk);var FR=["GET",...Jk];new Set(FR);var ro=m.createContext(null);ro.displayName="DataRouter";var Tf=m.createContext(null);Tf.displayName="DataRouterState";m.createContext(!1);var Qk=m.createContext({isTransitioning:!1});Qk.displayName="ViewTransition";var BR=m.createContext(new Map);BR.displayName="Fetchers";var UR=m.createContext(null);UR.displayName="Await";var vn=m.createContext(null);vn.displayName="Navigation";var tc=m.createContext(null);tc.displayName="Location";var Dn=m.createContext({outlet:null,matches:[],isDataRoute:!1});Dn.displayName="Route";var my=m.createContext(null);my.displayName="RouteError";function zR(e,{relative:t}={}){Ke(no(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=m.useContext(vn),{hash:i,pathname:a,search:s}=nc(e,{relative:t}),o=a;return r!=="/"&&(o=a==="/"?r:Yn([r,a])),n.createHref({pathname:o,search:s,hash:i})}function no(){return m.useContext(tc)!=null}function In(){return Ke(no(),"useLocation() may be used only in the context of a <Router> component."),m.useContext(tc).location}var Zk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function eN(e){m.useContext(vn).static||m.useLayoutEffect(e)}function rc(){let{isDataRoute:e}=m.useContext(Dn);return e?tM():WR()}function WR(){Ke(no(),"useNavigate() may be used only in the context of a <Router> component.");let e=m.useContext(ro),{basename:t,navigator:r}=m.useContext(vn),{matches:n}=m.useContext(Dn),{pathname:i}=In(),a=JSON.stringify(hy(n)),s=m.useRef(!1);return eN(()=>{s.current=!0}),m.useCallback((l,u={})=>{if(Cr(s.current,Zk),!s.current)return;if(typeof l=="number"){r.go(l);return}let d=py(l,JSON.parse(a),i,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Yn([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,a,i,e])}m.createContext(null);function nc(e,{relative:t}={}){let{matches:r}=m.useContext(Dn),{pathname:n}=In(),i=JSON.stringify(hy(r));return m.useMemo(()=>py(e,JSON.parse(i),n,t==="path"),[e,i,n,t])}function KR(e,t){return tN(e,t)}function tN(e,t,r,n,i){var w;Ke(no(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=m.useContext(vn),{matches:s}=m.useContext(Dn),o=s[s.length-1],l=o?o.params:{},u=o?o.pathname:"/",d=o?o.pathnameBase:"/",f=o&&o.route;{let b=f&&f.path||"";rN(u,!f||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let h=In(),p;if(t){let b=typeof t=="string"?to(t):t;Ke(d==="/"||((w=b.pathname)==null?void 0:w.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${b.pathname}" was given in the \`location\` prop.`),p=b}else p=h;let g=p.pathname||"/",v=g;if(d!=="/"){let b=d.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(b.length).join("/")}let y=Gk(e,{pathname:v});Cr(f||y!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Cr(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=YR(y&&y.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Yn([d,a.encodeLocation?a.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?d:Yn([d,a.encodeLocation?a.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),s,r,n,i);return t&&x?m.createElement(tc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},x):x}function HR(){let e=eM(),t=$R(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=m.createElement(m.Fragment,null,m.createElement("p",null," Hey developer "),m.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",m.createElement("code",{style:a},"ErrorBoundary")," or"," ",m.createElement("code",{style:a},"errorElement")," prop on your route.")),m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),r?m.createElement("pre",{style:i},r):null,s)}var qR=m.createElement(HR,null),VR=class extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?m.createElement(Dn.Provider,{value:this.props.routeContext},m.createElement(my.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function GR({routeContext:e,match:t,children:r}){let n=m.useContext(ro);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),m.createElement(Dn.Provider,{value:e},r)}function YR(e,t=[],r=null,n=null,i=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,s=r==null?void 0:r.errors;if(s!=null){let d=a.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);Ke(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let o=!1,l=-1;if(r)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=d),f.route.id){let{loaderData:h,errors:p}=r,g=f.route.loader&&!h.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||g){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}let u=r&&n?(d,f)=>{var h,p;n(d,{location:r.location,params:((p=(h=r.matches)==null?void 0:h[0])==null?void 0:p.params)??{},errorInfo:f})}:void 0;return a.reduceRight((d,f,h)=>{let p,g=!1,v=null,y=null;r&&(p=s&&f.route.id?s[f.route.id]:void 0,v=f.route.errorElement||qR,o&&(l<0&&h===0?(rN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,y=null):l===h&&(g=!0,y=f.route.hydrateFallbackElement||null)));let x=t.concat(a.slice(0,h+1)),w=()=>{let b;return p?b=v:g?b=y:f.route.Component?b=m.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,m.createElement(GR,{match:f,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?m.createElement(VR,{location:r.location,revalidation:r.revalidation,component:v,error:p,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0},onError:u}):w()},null)}function gy(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XR(e){let t=m.useContext(ro);return Ke(t,gy(e)),t}function JR(e){let t=m.useContext(Tf);return Ke(t,gy(e)),t}function QR(e){let t=m.useContext(Dn);return Ke(t,gy(e)),t}function vy(e){let t=QR(e),r=t.matches[t.matches.length-1];return Ke(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function ZR(){return vy("useRouteId")}function eM(){var n;let e=m.useContext(my),t=JR("useRouteError"),r=vy("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function tM(){let{router:e}=XR("useNavigate"),t=vy("useNavigate"),r=m.useRef(!1);return eN(()=>{r.current=!0}),m.useCallback(async(i,a={})=>{Cr(r.current,Zk),r.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...a}))},[e,t])}var Lb={};function rN(e,t,r){!t&&!Lb[e]&&(Lb[e]=!0,Cr(!1,r))}m.memo(rM);function rM({routes:e,future:t,state:r,unstable_onError:n}){return tN(e,void 0,r,n,t)}function dd({to:e,replace:t,state:r,relative:n}){Ke(no(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=m.useContext(vn);Cr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=m.useContext(Dn),{pathname:s}=In(),o=rc(),l=py(e,hy(a),s,n==="path"),u=JSON.stringify(l);return m.useEffect(()=>{o(JSON.parse(u),{replace:t,state:r,relative:n})},[o,u,n,t,r]),null}function Ir(e){Ke(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nM({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:a=!1}){Ke(!no(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=e.replace(/^\/*/,"/"),o=m.useMemo(()=>({basename:s,navigator:i,static:a,future:{}}),[s,i,a]);typeof r=="string"&&(r=to(r));let{pathname:l="/",search:u="",hash:d="",state:f=null,key:h="default"}=r,p=m.useMemo(()=>{let g=ri(l,s);return g==null?null:{location:{pathname:g,search:u,hash:d,state:f,key:h},navigationType:n}},[s,l,u,d,f,h,n]);return Cr(p!=null,`<Router basename="${s}"> is not able to match the URL "${l}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:m.createElement(vn.Provider,{value:o},m.createElement(tc.Provider,{children:t,value:p}))}function iM({children:e,location:t}){return KR(tg(e),t)}function tg(e,t=[]){let r=[];return m.Children.forEach(e,(n,i)=>{if(!m.isValidElement(n))return;let a=[...t,i];if(n.type===m.Fragment){r.push.apply(r,tg(n.props.children,a));return}Ke(n.type===Ir,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ke(!n.props.index||!n.props.children,"An index route cannot have child routes.");let s={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=tg(n.props.children,a)),r.push(s)}),r}var Iu="get",Ru="application/x-www-form-urlencoded";function Df(e){return e!=null&&typeof e.tagName=="string"}function aM(e){return Df(e)&&e.tagName.toLowerCase()==="button"}function sM(e){return Df(e)&&e.tagName.toLowerCase()==="form"}function oM(e){return Df(e)&&e.tagName.toLowerCase()==="input"}function lM(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function cM(e,t){return e.button===0&&(!t||t==="_self")&&!lM(e)}function rg(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function uM(e,t){let r=rg(e);return t&&t.forEach((n,i)=>{r.has(i)||t.getAll(i).forEach(a=>{r.append(i,a)})}),r}var qc=null;function dM(){if(qc===null)try{new FormData(document.createElement("form"),0),qc=!1}catch{qc=!0}return qc}var fM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wp(e){return e!=null&&!fM.has(e)?(Cr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ru}"`),null):e}function hM(e,t){let r,n,i,a,s;if(sM(e)){let o=e.getAttribute("action");n=o?ri(o,t):null,r=e.getAttribute("method")||Iu,i=wp(e.getAttribute("enctype"))||Ru,a=new FormData(e)}else if(aM(e)||oM(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||o.getAttribute("action");if(n=l?ri(l,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||Iu,i=wp(e.getAttribute("formenctype"))||wp(o.getAttribute("enctype"))||Ru,a=new FormData(o,e),!dM()){let{name:u,type:d,value:f}=e;if(d==="image"){let h=u?`${u}.`:"";a.append(`${h}x`,"0"),a.append(`${h}y`,"0")}else u&&a.append(u,f)}}else{if(Df(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Iu,n=null,i=Ru,s=e}return a&&i==="text/plain"&&(s=a,a=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function yy(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function pM(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&ri(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function mM(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gM(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function vM(e,t,r){let n=await Promise.all(e.map(async i=>{let a=t.routes[i.route.id];if(a){let s=await mM(a,r);return s.links?s.links():[]}return[]}));return wM(n.flat(1).filter(gM).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function $b(e,t,r,n,i,a){let s=(l,u)=>r[u]?l.route.id!==r[u].route.id:!0,o=(l,u)=>{var d;return r[u].pathname!==l.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==l.params["*"]};return a==="assets"?t.filter((l,u)=>s(l,u)||o(l,u)):a==="data"?t.filter((l,u)=>{var f;let d=n.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(s(l,u)||o(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function yM(e,t,{includeHydrateFallback:r}={}){return xM(e.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function xM(e){return[...new Set(e)]}function bM(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function wM(e,t){let r=new Set;return new Set(t),e.reduce((n,i)=>{let a=JSON.stringify(bM(i));return r.has(a)||(r.add(a),n.push({key:a,link:i})),n},[])}function nN(){let e=m.useContext(ro);return yy(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function _M(){let e=m.useContext(Tf);return yy(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var xy=m.createContext(void 0);xy.displayName="FrameworkContext";function iN(){let e=m.useContext(xy);return yy(e,"You must render this element inside a <HydratedRouter> element"),e}function jM(e,t){let r=m.useContext(xy),[n,i]=m.useState(!1),[a,s]=m.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,h=m.useRef(null);m.useEffect(()=>{if(e==="render"&&s(!0),e==="viewport"){let v=x=>{x.forEach(w=>{s(w.isIntersecting)})},y=new IntersectionObserver(v,{threshold:.5});return h.current&&y.observe(h.current),()=>{y.disconnect()}}},[e]),m.useEffect(()=>{if(n){let v=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(v)}}},[n]);let p=()=>{i(!0)},g=()=>{i(!1),s(!1)};return r?e!=="intent"?[a,h,{}]:[a,h,{onFocus:Do(o,p),onBlur:Do(l,g),onMouseEnter:Do(u,p),onMouseLeave:Do(d,g),onTouchStart:Do(f,p)}]:[!1,h,{}]}function Do(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function SM({page:e,...t}){let{router:r}=nN(),n=m.useMemo(()=>Gk(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?m.createElement(NM,{page:e,matches:n,...t}):null}function kM(e){let{manifest:t,routeModules:r}=iN(),[n,i]=m.useState([]);return m.useEffect(()=>{let a=!1;return vM(e,t,r).then(s=>{a||i(s)}),()=>{a=!0}},[e,t,r]),n}function NM({page:e,matches:t,...r}){let n=In(),{manifest:i,routeModules:a}=iN(),{basename:s}=nN(),{loaderData:o,matches:l}=_M(),u=m.useMemo(()=>$b(e,t,l,i,n,"data"),[e,t,l,i,n]),d=m.useMemo(()=>$b(e,t,l,i,n,"assets"),[e,t,l,i,n]),f=m.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let g=new Set,v=!1;if(t.forEach(x=>{var b;let w=i.routes[x.route.id];!w||!w.hasLoader||(!u.some(_=>_.route.id===x.route.id)&&x.route.id in o&&((b=a[x.route.id])!=null&&b.shouldRevalidate)||w.hasClientLoader?v=!0:g.add(x.route.id))}),g.size===0)return[];let y=pM(e,s,"data");return v&&g.size>0&&y.searchParams.set("_routes",t.filter(x=>g.has(x.route.id)).map(x=>x.route.id).join(",")),[y.pathname+y.search]},[s,o,n,i,u,t,e,a]),h=m.useMemo(()=>yM(d,i),[d,i]),p=kM(d);return m.createElement(m.Fragment,null,f.map(g=>m.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),h.map(g=>m.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),p.map(({key:g,link:v})=>m.createElement("link",{key:g,nonce:r.nonce,...v})))}function EM(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var aN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{aN&&(window.__reactRouterVersion="7.9.6")}catch{}function CM({basename:e,children:t,window:r}){let n=m.useRef();n.current==null&&(n.current=pR({window:r,v5Compat:!0}));let i=n.current,[a,s]=m.useState({action:i.action,location:i.location}),o=m.useCallback(l=>{m.startTransition(()=>s(l))},[s]);return m.useLayoutEffect(()=>i.listen(o),[i,o]),m.createElement(nM,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:i})}var sN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oN=m.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:i,reloadDocument:a,replace:s,state:o,target:l,to:u,preventScrollReset:d,viewTransition:f,...h},p){let{basename:g}=m.useContext(vn),v=typeof u=="string"&&sN.test(u),y,x=!1;if(typeof u=="string"&&v&&(y=u,aN))try{let C=new URL(window.location.href),E=u.startsWith("//")?new URL(C.protocol+u):new URL(u),P=ri(E.pathname,g);E.origin===C.origin&&P!=null?u=P+E.search+E.hash:x=!0}catch{Cr(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=zR(u,{relative:i}),[b,_,j]=jM(n,h),S=TM(u,{replace:s,state:o,target:l,preventScrollReset:d,relative:i,viewTransition:f});function k(C){t&&t(C),C.defaultPrevented||S(C)}let N=m.createElement("a",{...h,...j,href:y||w,onClick:x||a?t:k,ref:EM(p,_),target:l,"data-discover":!v&&r==="render"?"true":void 0});return b&&!v?m.createElement(m.Fragment,null,N,m.createElement(SM,{page:w})):N});oN.displayName="Link";var PM=m.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:i=!1,style:a,to:s,viewTransition:o,children:l,...u},d){let f=nc(s,{relative:u.relative}),h=In(),p=m.useContext(Tf),{navigator:g,basename:v}=m.useContext(vn),y=p!=null&&$M(f)&&o===!0,x=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=h.pathname,b=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(w=w.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&v&&(b=ri(b,v)||b);const _=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let j=w===x||!i&&w.startsWith(x)&&w.charAt(_)==="/",S=b!=null&&(b===x||!i&&b.startsWith(x)&&b.charAt(x.length)==="/"),k={isActive:j,isPending:S,isTransitioning:y},N=j?t:void 0,C;typeof n=="function"?C=n(k):C=[n,j?"active":null,S?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let E=typeof a=="function"?a(k):a;return m.createElement(oN,{...u,"aria-current":N,className:C,ref:d,style:E,to:s,viewTransition:o},typeof l=="function"?l(k):l)});PM.displayName="NavLink";var OM=m.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:a,method:s=Iu,action:o,onSubmit:l,relative:u,preventScrollReset:d,viewTransition:f,...h},p)=>{let g=MM(),v=LM(o,{relative:u}),y=s.toLowerCase()==="get"?"get":"post",x=typeof o=="string"&&sN.test(o),w=b=>{if(l&&l(b),b.defaultPrevented)return;b.preventDefault();let _=b.nativeEvent.submitter,j=(_==null?void 0:_.getAttribute("formmethod"))||s;g(_||b.currentTarget,{fetcherKey:t,method:j,navigate:r,replace:i,state:a,relative:u,preventScrollReset:d,viewTransition:f})};return m.createElement("form",{ref:p,method:y,action:v,onSubmit:n?l:w,...h,"data-discover":!x&&e==="render"?"true":void 0})});OM.displayName="Form";function AM(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lN(e){let t=m.useContext(ro);return Ke(t,AM(e)),t}function TM(e,{target:t,replace:r,state:n,preventScrollReset:i,relative:a,viewTransition:s}={}){let o=rc(),l=In(),u=nc(e,{relative:a});return m.useCallback(d=>{if(cM(d,t)){d.preventDefault();let f=r!==void 0?r:Ol(l)===Ol(u);o(e,{replace:f,state:n,preventScrollReset:i,relative:a,viewTransition:s})}},[l,o,u,r,n,t,e,i,a,s])}function DM(e){Cr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=m.useRef(rg(e)),r=m.useRef(!1),n=In(),i=m.useMemo(()=>uM(n.search,r.current?null:t.current),[n.search]),a=rc(),s=m.useCallback((o,l)=>{const u=rg(typeof o=="function"?o(new URLSearchParams(i)):o);r.current=!0,a("?"+u,l)},[a,i]);return[i,s]}var IM=0,RM=()=>`__${String(++IM)}__`;function MM(){let{router:e}=lN("useSubmit"),{basename:t}=m.useContext(vn),r=ZR();return m.useCallback(async(n,i={})=>{let{action:a,method:s,encType:o,formData:l,body:u}=hM(n,t);if(i.navigate===!1){let d=i.fetcherKey||RM();await e.fetch(d,r,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||o,flushSync:i.flushSync})}else await e.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,r])}function LM(e,{relative:t}={}){let{basename:r}=m.useContext(vn),n=m.useContext(Dn);Ke(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...nc(e||".",{relative:t})},s=In();if(e==null){a.search=s.search;let o=new URLSearchParams(a.search),l=o.getAll("index");if(l.some(d=>d==="")){o.delete("index"),l.filter(f=>f).forEach(f=>o.append("index",f));let d=o.toString();a.search=d?`?${d}`:""}}return(!e||e===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:Yn([r,a.pathname])),Ol(a)}function $M(e,{relative:t}={}){let r=m.useContext(Qk);Ke(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=lN("useViewTransitionState"),i=nc(e,{relative:t});if(!r.isTransitioning)return!1;let a=ri(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=ri(r.nextLocation.pathname,n)||r.nextLocation.pathname;return ud(i.pathname,s)!=null||ud(i.pathname,a)!=null}var ng=function(e,t){return ng=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},ng(e,t)};function cN(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ng(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var fd=function(){return fd=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},fd.apply(this,arguments)};function io(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function uN(e,t,r,n){var i=arguments.length,a=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(i<3?s(a):i>3?s(t,r,a):s(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a}function dN(e,t){return function(r,n){t(r,n,e)}}function fN(e,t,r,n,i,a){function s(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=n.kind,l=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f,h=!1,p=r.length-1;p>=0;p--){var g={};for(var v in n)g[v]=v==="access"?{}:n[v];for(var v in n.access)g.access[v]=n.access[v];g.addInitializer=function(x){if(h)throw new TypeError("Cannot add initializers after decoration has completed");a.push(s(x||null))};var y=(0,r[p])(o==="accessor"?{get:d.get,set:d.set}:d[l],g);if(o==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(f=s(y.get))&&(d.get=f),(f=s(y.set))&&(d.set=f),(f=s(y.init))&&i.unshift(f)}else(f=s(y))&&(o==="field"?i.unshift(f):d[l]=f)}u&&Object.defineProperty(u,n.name,d),h=!0}function hN(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function pN(e){return typeof e=="symbol"?e:"".concat(e)}function mN(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function gN(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function ne(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function l(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,l)}u((n=n.apply(e,t||[])).next())})}function vN(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var If=Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function yN(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&If(t,e,r)}function hd(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function by(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return a}function xN(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(by(arguments[t]));return e}function bN(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var a=arguments[t],s=0,o=a.length;s<o;s++,i++)n[i]=a[s];return n}function wN(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}function zs(e){return this instanceof zs?(this.v=e,this):new zs(e)}function _N(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(g){return Promise.resolve(g).then(p,f)}}function o(p,g){n[p]&&(i[p]=function(v){return new Promise(function(y,x){a.push([p,v,y,x])>1||l(p,v)})},g&&(i[p]=g(i[p])))}function l(p,g){try{u(n[p](g))}catch(v){h(a[0][3],v)}}function u(p){p.value instanceof zs?Promise.resolve(p.value.v).then(d,f):h(a[0][2],p)}function d(p){l("next",p)}function f(p){l("throw",p)}function h(p,g){p(g),a.shift(),a.length&&l(a[0][0],a[0][1])}}function jN(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,a){t[i]=e[i]?function(s){return(r=!r)?{value:zs(e[i](s)),done:!1}:a?a(s):s}:a}}function SN(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof hd=="function"?hd(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=e[a]&&function(s){return new Promise(function(o,l){s=e[a](s),i(o,l,s.done,s.value)})}}function i(a,s,o,l){Promise.resolve(l).then(function(u){a({value:u,done:o})},s)}}function kN(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var FM=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},ig=function(e){return ig=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},ig(e)};function NN(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=ig(e),n=0;n<r.length;n++)r[n]!=="default"&&If(t,e,r[n]);return FM(t,e),t}function EN(e){return e&&e.__esModule?e:{default:e}}function CN(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function PN(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r}function ON(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function AN(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var BM=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function TN(e){function t(a){e.error=e.hasError?new BM(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var r,n=0;function i(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(i);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(a).then(i,function(s){return t(s),i()})}else n|=1}catch(s){t(s)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function DN(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,a,s){return n?t?".jsx":".js":i&&(!a||!s)?r:i+a+"."+s.toLowerCase()+"js"}):e}const UM={__extends:cN,__assign:fd,__rest:io,__decorate:uN,__param:dN,__esDecorate:fN,__runInitializers:hN,__propKey:pN,__setFunctionName:mN,__metadata:gN,__awaiter:ne,__generator:vN,__createBinding:If,__exportStar:yN,__values:hd,__read:by,__spread:xN,__spreadArrays:bN,__spreadArray:wN,__await:zs,__asyncGenerator:_N,__asyncDelegator:jN,__asyncValues:SN,__makeTemplateObject:kN,__importStar:NN,__importDefault:EN,__classPrivateFieldGet:CN,__classPrivateFieldSet:PN,__classPrivateFieldIn:ON,__addDisposableResource:AN,__disposeResources:TN,__rewriteRelativeImportExtension:DN},zM=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:AN,get __assign(){return fd},__asyncDelegator:jN,__asyncGenerator:_N,__asyncValues:SN,__await:zs,__awaiter:ne,__classPrivateFieldGet:CN,__classPrivateFieldIn:ON,__classPrivateFieldSet:PN,__createBinding:If,__decorate:uN,__disposeResources:TN,__esDecorate:fN,__exportStar:yN,__extends:cN,__generator:vN,__importDefault:EN,__importStar:NN,__makeTemplateObject:kN,__metadata:gN,__param:dN,__propKey:pN,__read:by,__rest:io,__rewriteRelativeImportExtension:DN,__runInitializers:hN,__setFunctionName:mN,__spread:xN,__spreadArray:wN,__spreadArrays:bN,__values:hd,default:UM},Symbol.toStringTag,{value:"Module"})),WM=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class wy extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class KM extends wy{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Fb extends wy{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Bb extends wy{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var ag;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(ag||(ag={}));class HM{constructor(t,{headers:r={},customFetch:n,region:i=ag.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=WM(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return ne(this,arguments,void 0,function*(r,n={}){var i;let a,s;try{const{headers:o,method:l,body:u,signal:d,timeout:f}=n;let h={},{region:p}=n;p||(p=this.region);const g=new URL(`${this.url}/${r}`);p&&p!=="any"&&(h["x-region"]=p,g.searchParams.set("forceFunctionRegion",p));let v;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(h["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(h["Content-Type"]="application/json",v=JSON.stringify(u)):v=u;let y=d;f&&(s=new AbortController,a=setTimeout(()=>s.abort(),f),d?(y=s.signal,d.addEventListener("abort",()=>s.abort())):y=s.signal);const x=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),o),body:v,signal:y}).catch(j=>{throw new KM(j)}),w=x.headers.get("x-relay-error");if(w&&w==="true")throw new Fb(x);if(!x.ok)throw new Bb(x);let b=((i=x.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return b==="application/json"?_=yield x.json():b==="application/octet-stream"||b==="application/pdf"?_=yield x.blob():b==="text/event-stream"?_=x:b==="multipart/form-data"?_=yield x.formData():_=yield x.text(),{data:_,error:null,response:x}}catch(o){return{data:null,error:o,response:o instanceof Bb||o instanceof Fb?o.context:void 0}}finally{a&&clearTimeout(a)}})}}var Gt={};const ao=UT(zM);var Vc={},Gc={},Yc={},Xc={},Jc={},Qc={},Ub;function IN(){if(Ub)return Qc;Ub=1,Object.defineProperty(Qc,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Qc.default=e,Qc}var zb;function RN(){if(zb)return Jc;zb=1,Object.defineProperty(Jc,"__esModule",{value:!0});const t=ao.__importDefault(IN());class r{constructor(i){var a,s;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(s=i.isMaybeSingle)!==null&&s!==void 0?s:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let o=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,d,f,h;let p=null,g=null,v=null,y=l.status,x=l.statusText;if(l.ok){if(this.method!=="HEAD"){const j=await l.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?g=j:g=JSON.parse(j))}const b=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),_=(f=l.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");b&&_&&_.length>1&&(v=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(p={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,v=null,y=406,x="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const b=await l.text();try{p=JSON.parse(b),Array.isArray(p)&&l.status===404&&(g=[],p=null,y=200,x="OK")}catch{l.status===404&&b===""?(y=204,x="No Content"):p={message:b}}if(p&&this.isMaybeSingle&&(!((h=p==null?void 0:p.details)===null||h===void 0)&&h.includes("0 rows"))&&(p=null,y=200,x="OK"),p&&this.shouldThrowOnError)throw new t.default(p)}return{error:p,data:g,count:v,status:y,statusText:x}});return this.shouldThrowOnError||(o=o.catch(l=>{var u,d,f,h,p,g;let v="";const y=l==null?void 0:l.cause;if(y){const x=(u=y==null?void 0:y.message)!==null&&u!==void 0?u:"",w=(d=y==null?void 0:y.code)!==null&&d!==void 0?d:"";v=`${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"FetchError"}: ${l==null?void 0:l.message}`,v+=`

Caused by: ${(h=y==null?void 0:y.name)!==null&&h!==void 0?h:"Error"}: ${x}`,w&&(v+=` (${w})`),y!=null&&y.stack&&(v+=`
${y.stack}`)}else v=(p=l==null?void 0:l.stack)!==null&&p!==void 0?p:"";return{error:{message:`${(g=l==null?void 0:l.name)!==null&&g!==void 0?g:"FetchError"}: ${l==null?void 0:l.message}`,details:v,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(i,a)}returns(){return this}overrideTypes(){return this}}return Jc.default=r,Jc}var Wb;function MN(){if(Wb)return Xc;Wb=1,Object.defineProperty(Xc,"__esModule",{value:!0});const t=ao.__importDefault(RN());class r extends t.default{select(i){let a=!1;const s=(i??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:s,foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${i}.${a?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:s=a}={}){const o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${i}`),this}range(i,a,{foreignTable:s,referencedTable:o=s}={}){const l=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:s=!1,buffers:o=!1,wal:l=!1,format:u="text"}={}){var d;const f=[i?"analyze":null,a?"verbose":null,s?"settings":null,o?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${h}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Xc.default=r,Xc}var Kb;function _y(){if(Kb)return Yc;Kb=1,Object.defineProperty(Yc,"__esModule",{value:!0});const t=ao.__importDefault(MN()),r=new RegExp("[,()]");class n extends t.default{eq(a,s){return this.url.searchParams.append(a,`eq.${s}`),this}neq(a,s){return this.url.searchParams.append(a,`neq.${s}`),this}gt(a,s){return this.url.searchParams.append(a,`gt.${s}`),this}gte(a,s){return this.url.searchParams.append(a,`gte.${s}`),this}lt(a,s){return this.url.searchParams.append(a,`lt.${s}`),this}lte(a,s){return this.url.searchParams.append(a,`lte.${s}`),this}like(a,s){return this.url.searchParams.append(a,`like.${s}`),this}likeAllOf(a,s){return this.url.searchParams.append(a,`like(all).{${s.join(",")}}`),this}likeAnyOf(a,s){return this.url.searchParams.append(a,`like(any).{${s.join(",")}}`),this}ilike(a,s){return this.url.searchParams.append(a,`ilike.${s}`),this}ilikeAllOf(a,s){return this.url.searchParams.append(a,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(a,s){return this.url.searchParams.append(a,`ilike(any).{${s.join(",")}}`),this}is(a,s){return this.url.searchParams.append(a,`is.${s}`),this}in(a,s){const o=Array.from(new Set(s)).map(l=>typeof l=="string"&&r.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(a,`in.(${o})`),this}contains(a,s){return typeof s=="string"?this.url.searchParams.append(a,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(a,`cs.{${s.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(s)}`),this}containedBy(a,s){return typeof s=="string"?this.url.searchParams.append(a,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(a,`cd.{${s.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(s)}`),this}rangeGt(a,s){return this.url.searchParams.append(a,`sr.${s}`),this}rangeGte(a,s){return this.url.searchParams.append(a,`nxl.${s}`),this}rangeLt(a,s){return this.url.searchParams.append(a,`sl.${s}`),this}rangeLte(a,s){return this.url.searchParams.append(a,`nxr.${s}`),this}rangeAdjacent(a,s){return this.url.searchParams.append(a,`adj.${s}`),this}overlaps(a,s){return typeof s=="string"?this.url.searchParams.append(a,`ov.${s}`):this.url.searchParams.append(a,`ov.{${s.join(",")}}`),this}textSearch(a,s,{config:o,type:l}={}){let u="";l==="plain"?u="pl":l==="phrase"?u="ph":l==="websearch"&&(u="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(a,`${u}fts${d}.${s}`),this}match(a){return Object.entries(a).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(a,s,o){return this.url.searchParams.append(a,`not.${s}.${o}`),this}or(a,{foreignTable:s,referencedTable:o=s}={}){const l=o?`${o}.or`:"or";return this.url.searchParams.append(l,`(${a})`),this}filter(a,s,o){return this.url.searchParams.append(a,`${s}.${o}`),this}}return Yc.default=n,Yc}var Hb;function LN(){if(Hb)return Gc;Hb=1,Object.defineProperty(Gc,"__esModule",{value:!0});const t=ao.__importDefault(_y());class r{constructor(i,{headers:a={},schema:s,fetch:o}){this.url=i,this.headers=new Headers(a),this.schema=s,this.fetch=o}select(i,a){const{head:s=!1,count:o}=a??{},l=s?"HEAD":"GET";let u=!1;const d=(i??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",d),o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:s=!0}={}){var o;const l="POST";if(a&&this.headers.append("Prefer",`count=${a}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:s=!1,count:o,defaultToNull:l=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),o&&this.headers.append("Prefer",`count=${o}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(f.length>0){const h=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:a}={}){var s;const o="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:i}={}){var a;const s="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Gc.default=r,Gc}var qb;function qM(){if(qb)return Vc;qb=1,Object.defineProperty(Vc,"__esModule",{value:!0});const e=ao,t=e.__importDefault(LN()),r=e.__importDefault(_y());class n{constructor(a,{headers:s={},schema:o,fetch:l}={}){this.url=a,this.headers=new Headers(s),this.schemaName=o,this.fetch=l}from(a){const s=new URL(`${this.url}/${a}`);return new t.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,s={},{head:o=!1,get:l=!1,count:u}={}){var d;let f;const h=new URL(`${this.url}/rpc/${a}`);let p;o||l?(f=o?"HEAD":"GET",Object.entries(s).filter(([v,y])=>y!==void 0).map(([v,y])=>[v,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([v,y])=>{h.searchParams.append(v,y)})):(f="POST",p=s);const g=new Headers(this.headers);return u&&g.set("Prefer",`count=${u}`),new r.default({method:f,url:h,headers:g,schema:this.schemaName,body:p,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Vc.default=n,Vc}Object.defineProperty(Gt,"__esModule",{value:!0});var $N=Gt.PostgrestError=GN=Gt.PostgrestBuilder=qN=Gt.PostgrestTransformBuilder=KN=Gt.PostgrestFilterBuilder=zN=Gt.PostgrestQueryBuilder=BN=Gt.PostgrestClient=void 0;const so=ao,FN=so.__importDefault(qM());var BN=Gt.PostgrestClient=FN.default;const UN=so.__importDefault(LN());var zN=Gt.PostgrestQueryBuilder=UN.default;const WN=so.__importDefault(_y());var KN=Gt.PostgrestFilterBuilder=WN.default;const HN=so.__importDefault(MN());var qN=Gt.PostgrestTransformBuilder=HN.default;const VN=so.__importDefault(RN());var GN=Gt.PostgrestBuilder=VN.default;const YN=so.__importDefault(IN());$N=Gt.PostgrestError=YN.default;var XN=Gt.default={PostgrestClient:FN.default,PostgrestQueryBuilder:UN.default,PostgrestFilterBuilder:WN.default,PostgrestTransformBuilder:HN.default,PostgrestBuilder:VN.default,PostgrestError:YN.default};const VM=Ij({__proto__:null,get PostgrestBuilder(){return GN},get PostgrestClient(){return BN},get PostgrestError(){return $N},get PostgrestFilterBuilder(){return KN},get PostgrestQueryBuilder(){return zN},get PostgrestTransformBuilder(){return qN},default:XN},[Gt]),{PostgrestClient:GM,PostgrestQueryBuilder:JQ,PostgrestFilterBuilder:QQ,PostgrestTransformBuilder:ZQ,PostgrestBuilder:eZ,PostgrestError:tZ}=XN||VM;class YM{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const XM="2.83.0",JM=`realtime-js/${XM}`,JN="1.0.0",QM="2.0.0",Vb=JN,sg=1e4,ZM=1e3,e5=100;var ga;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ga||(ga={}));var ut;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ut||(ut={}));var Mr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Mr||(Mr={}));var og;(function(e){e.websocket="websocket"})(og||(og={}));var va;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(va||(va={}));class t5{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(t,r){if(this._isArrayBuffer(t.payload))return r(this._binaryEncodePush(t));if(t.event===this.BROADCAST&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodePush(t){var r,n;const{event:i,topic:a,payload:s}=t,o=(r=t.ref)!==null&&r!==void 0?r:"",l=(n=t.join_ref)!==null&&n!==void 0?n:"",u=this.META_LENGTH+l.length+o.length+a.length+i.length,d=new ArrayBuffer(this.HEADER_LENGTH+u);let f=new DataView(d),h=0;f.setUint8(h++,this.KINDS.push),f.setUint8(h++,l.length),f.setUint8(h++,o.length),f.setUint8(h++,a.length),f.setUint8(h++,i.length),Array.from(l,g=>f.setUint8(h++,g.charCodeAt(0))),Array.from(o,g=>f.setUint8(h++,g.charCodeAt(0))),Array.from(a,g=>f.setUint8(h++,g.charCodeAt(0))),Array.from(i,g=>f.setUint8(h++,g.charCodeAt(0)));var p=new Uint8Array(d.byteLength+s.byteLength);return p.set(new Uint8Array(d),0),p.set(new Uint8Array(s),d.byteLength),p.buffer}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n,i,a;const s=t.topic,o=(r=t.ref)!==null&&r!==void 0?r:"",l=(n=t.join_ref)!==null&&n!==void 0?n:"",u=t.payload.event,d=(a=(i=t.payload)===null||i===void 0?void 0:i.payload)!==null&&a!==void 0?a:new ArrayBuffer(0),f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+s.length+u.length,h=new ArrayBuffer(this.HEADER_LENGTH+f);let p=new DataView(h),g=0;p.setUint8(g++,this.KINDS.userBroadcastPush),p.setUint8(g++,l.length),p.setUint8(g++,o.length),p.setUint8(g++,s.length),p.setUint8(g++,u.length),p.setUint8(g++,this.BINARY_ENCODING),Array.from(l,y=>p.setUint8(g++,y.charCodeAt(0))),Array.from(o,y=>p.setUint8(g++,y.charCodeAt(0))),Array.from(s,y=>p.setUint8(g++,y.charCodeAt(0))),Array.from(u,y=>p.setUint8(g++,y.charCodeAt(0)));var v=new Uint8Array(h.byteLength+d.byteLength);return v.set(new Uint8Array(h),0),v.set(new Uint8Array(d),h.byteLength),v.buffer}_encodeJsonUserBroadcastPush(t){var r,n,i,a;const s=t.topic,o=(r=t.ref)!==null&&r!==void 0?r:"",l=(n=t.join_ref)!==null&&n!==void 0?n:"",u=t.payload.event,d=(a=(i=t.payload)===null||i===void 0?void 0:i.payload)!==null&&a!==void 0?a:{},h=new TextEncoder().encode(JSON.stringify(d)).buffer,p=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+s.length+u.length,g=new ArrayBuffer(this.HEADER_LENGTH+p);let v=new DataView(g),y=0;v.setUint8(y++,this.KINDS.userBroadcastPush),v.setUint8(y++,l.length),v.setUint8(y++,o.length),v.setUint8(y++,s.length),v.setUint8(y++,u.length),v.setUint8(y++,this.JSON_ENCODING),Array.from(l,w=>v.setUint8(y++,w.charCodeAt(0))),Array.from(o,w=>v.setUint8(y++,w.charCodeAt(0))),Array.from(s,w=>v.setUint8(y++,w.charCodeAt(0))),Array.from(u,w=>v.setUint8(y++,w.charCodeAt(0)));var x=new Uint8Array(g.byteLength+h.byteLength);return x.set(new Uint8Array(g),0),x.set(new Uint8Array(h),g.byteLength),x.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[i,a,s,o,l]=n;return r({join_ref:i,ref:a,topic:s,event:o,payload:l})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.push:return this._decodePush(t,r,i);case this.KINDS.reply:return this._decodeReply(t,r,i);case this.KINDS.broadcast:return this._decodeBroadcast(t,r,i);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,i)}}_decodePush(t,r,n){const i=r.getUint8(1),a=r.getUint8(2),s=r.getUint8(3);let o=this.HEADER_LENGTH+this.META_LENGTH-1;const l=n.decode(t.slice(o,o+i));o=o+i;const u=n.decode(t.slice(o,o+a));o=o+a;const d=n.decode(t.slice(o,o+s));o=o+s;const f=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{join_ref:l,ref:null,topic:u,event:d,payload:f}}_decodeReply(t,r,n){const i=r.getUint8(1),a=r.getUint8(2),s=r.getUint8(3),o=r.getUint8(4);let l=this.HEADER_LENGTH+this.META_LENGTH;const u=n.decode(t.slice(l,l+i));l=l+i;const d=n.decode(t.slice(l,l+a));l=l+a;const f=n.decode(t.slice(l,l+s));l=l+s;const h=n.decode(t.slice(l,l+o));l=l+o;const p=JSON.parse(n.decode(t.slice(l,t.byteLength))),g={status:h,response:p};return{join_ref:u,ref:d,topic:f,event:Mr.reply,payload:g}}_decodeBroadcast(t,r,n){const i=r.getUint8(1),a=r.getUint8(2);let s=this.HEADER_LENGTH+2;const o=n.decode(t.slice(s,s+i));s=s+i;const l=n.decode(t.slice(s,s+a));s=s+a;const u=JSON.parse(n.decode(t.slice(s,t.byteLength)));return{join_ref:null,ref:null,topic:o,event:l,payload:u}}_decodeUserBroadcast(t,r,n){const i=r.getUint8(1),a=r.getUint8(2),s=r.getUint8(3),o=r.getUint8(4);let l=this.HEADER_LENGTH+4;const u=n.decode(t.slice(l,l+i));l=l+i;const d=n.decode(t.slice(l,l+a));l=l+a;const f=n.decode(t.slice(l,l+s));l=l+s;const h=t.slice(l,t.byteLength),p=o===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,g={type:this.BROADCAST,event:d,payload:p};return s>0&&(g.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST,payload:g}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class QN{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Re;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Re||(Re={}));const Gb=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,s)=>(a[s]=r5(s,e,t,i),a),{}):{}},r5=(e,t,r,n)=>{const i=t.find(o=>o.name===e),a=i==null?void 0:i.type,s=r[e];return a&&!n.includes(a)?ZN(a,s):lg(s)},ZN=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return s5(t,r)}switch(e){case Re.bool:return n5(t);case Re.float4:case Re.float8:case Re.int2:case Re.int4:case Re.int8:case Re.numeric:case Re.oid:return i5(t);case Re.json:case Re.jsonb:return a5(t);case Re.timestamp:return o5(t);case Re.abstime:case Re.date:case Re.daterange:case Re.int4range:case Re.int8range:case Re.money:case Re.reltime:case Re.text:case Re.time:case Re.timestamptz:case Re.timetz:case Re.tsrange:case Re.tstzrange:return lg(t);default:return lg(t)}},lg=e=>e,n5=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},i5=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},a5=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},s5=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const s=e.slice(1,r);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(o=>ZN(t,o))}return e},o5=e=>typeof e=="string"?e.replace(" ","T"):e,e2=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class _p{constructor(t,r,n={},i=sg){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Yb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Yb||(Yb={}));class ol{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:s,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ol.syncState(this.state,i,a,s),this.pendingDiffs.forEach(l=>{this.state=ol.syncDiff(this.state,l,a,s)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:s,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ol.syncDiff(this.state,i,a,s),o())}),this.onJoin((i,a,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:s})}),this.onLeave((i,a,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const a=this.cloneDeep(t),s=this.transformState(r),o={},l={};return this.map(a,(u,d)=>{s[u]||(l[u]=d)}),this.map(s,(u,d)=>{const f=a[u];if(f){const h=d.map(y=>y.presence_ref),p=f.map(y=>y.presence_ref),g=d.filter(y=>p.indexOf(y.presence_ref)<0),v=f.filter(y=>h.indexOf(y.presence_ref)<0);g.length>0&&(o[u]=g),v.length>0&&(l[u]=v)}else o[u]=d}),this.syncDiff(a,{joins:o,leaves:l},n,i)}static syncDiff(t,r,n,i){const{joins:a,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(o,l)=>{var u;const d=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(l),d.length>0){const f=t[o].map(p=>p.presence_ref),h=d.filter(p=>f.indexOf(p.presence_ref)<0);t[o].unshift(...h)}n(o,d,l)}),this.map(s,(o,l)=>{let u=t[o];if(!u)return;const d=l.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[o]=u,i(o,u,l),u.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Xb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Xb||(Xb={}));var ll;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ll||(ll={}));var Bn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Bn||(Bn={}));class jy{constructor(t,r={config:{}},n){var i,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new _p(this,Mr.join,this.params,this.timeout),this.rejoinTimer=new QN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ut.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Mr.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new ol(this),this.broadcastEndpointURL=e2(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ut.closed){const{config:{broadcast:s,presence:o,private:l}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[ll.PRESENCE]&&this.bindings[ll.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,f={},h={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Bn.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Bn.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var g;if(this.socket.setAuth(),p===void 0){t==null||t(Bn.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,y=(g=v==null?void 0:v.length)!==null&&g!==void 0?g:0,x=[];for(let w=0;w<y;w++){const b=v[w],{filter:{event:_,schema:j,table:S,filter:k}}=b,N=p&&p[w];if(N&&N.event===_&&N.schema===j&&N.table===S&&N.filter===k)x.push(Object.assign(Object.assign({},b),{id:N.id}));else{this.unsubscribe(),this.state=ut.errored,t==null||t(Bn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Bn.SUBSCRIBED);return}}).receive("error",p=>{this.state=ut.errored,t==null||t(Bn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Bn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===ut.joined&&t===ll.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const u=await o.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:s}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,o,l;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(o=(s=this.params)===null||s===void 0?void 0:s.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ut.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Mr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new _p(this,Mr.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ut.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),s=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),s}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new _p(this,t,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>e5){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,a;const s=t.toLocaleLowerCase(),{close:o,error:l,leave:u,join:d}=Mr;if(n&&[o,l,u,d].indexOf(s)>=0&&n!==this._joinRef())return;let h=this._onMessage(s,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var g,v,y;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((y=(v=p.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===s}).map(p=>p.callback(h,n)):(a=this.bindings[s])===null||a===void 0||a.filter(p=>{var g,v,y,x,w,b;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in p){const _=p.id,j=(g=p.filter)===null||g===void 0?void 0:g.event;return _&&((v=r.ids)===null||v===void 0?void 0:v.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const _=(w=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return _==="*"||_===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===s}).map(p=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:v,table:y,commit_timestamp:x,type:w,errors:b}=g;h=Object.assign(Object.assign({},{schema:v,table:y,commit_timestamp:x,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(g))}p.callback(h,n)})}_isClosed(){return this.state===ut.closed}_isJoined(){return this.state===ut.joined}_isJoining(){return this.state===ut.joining}_isLeaving(){return this.state===ut.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&jy.isEqual(i.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Mr.close,{},t)}_onError(t){this._on(Mr.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ut.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Gb(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Gb(t.columns,t.old_record)),r}}const jp=()=>{},Zc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},l5=[1e3,2e3,5e3,1e4],c5=1e4,u5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class d5{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=sg,this.transport=null,this.heartbeatIntervalMs=Zc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=jp,this.ref=0,this.reconnectTimer=null,this.vsn=Vb,this.logger=jp,this.conn=null,this.sendBuffer=[],this.serializer=new t5,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${og.websocket}`,this.httpEndpoint=e2(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=YM.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ga.connecting:return va.Connecting;case ga.open:return va.Open;case ga.closing:return va.Closing;default:return va.Closed}}isConnected(){return this.connectionState()===va.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new jy(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:i,ref:a}=t,s=()=>{this.encode(t,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(ZM,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Zc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:a,ref:s}=r,o=s?`(${s})`:"",l=a.status||"";this.log("receive",`${l} ${n} ${i} ${o}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,a,s)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ga.open||this.conn.readyState===ga.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Mr.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([u5],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:JM};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Mr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new QN(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Zc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,i,a,s,o,l,u,d,f,h,p;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:sg,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Zc.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:jp,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:Vb,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:g=>l5[g-1]||c5,this.vsn){case JN:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(g,v)=>v(JSON.stringify(g)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(g,v)=>v(JSON.parse(g));break;case QM:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Sy extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ve(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class f5 extends Sy{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class cg extends Sy{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const ky=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),h5=()=>Response,ug=e=>{if(Array.isArray(e))return e.map(r=>ug(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=ug(n)}),t},p5=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Sp=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},m5=(e,t,r)=>ne(void 0,void 0,void 0,function*(){const n=yield h5();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(i=>{const a=e.status||500,s=(i==null?void 0:i.statusCode)||a+"";t(new f5(Sp(i),a,s))}).catch(i=>{t(new cg(Sp(i),i))}):t(new cg(Sp(e),e))}),g5=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?i:(p5(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),r))};function ic(e,t,r,n,i,a){return ne(this,void 0,void 0,function*(){return new Promise((s,o)=>{e(r,g5(t,n,i,a)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>m5(l,o,n))})})}function Al(e,t,r,n){return ne(this,void 0,void 0,function*(){return ic(e,"GET",t,r,n)})}function nn(e,t,r,n,i){return ne(this,void 0,void 0,function*(){return ic(e,"POST",t,n,i,r)})}function dg(e,t,r,n,i){return ne(this,void 0,void 0,function*(){return ic(e,"PUT",t,n,i,r)})}function v5(e,t,r,n){return ne(this,void 0,void 0,function*(){return ic(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Ny(e,t,r,n,i){return ne(this,void 0,void 0,function*(){return ic(e,"DELETE",t,n,i,r)})}class y5{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return ne(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ve(t))return{data:null,error:t};throw t}})}}var t2;class x5{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[t2]="BlobDownloadBuilder",this.promise=null}asStream(){return new y5(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ne(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ve(t))return{data:null,error:t};throw t}})}}t2=Symbol.toStringTag;const b5={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Jb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class w5{constructor(t,r={},n,i){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=ky(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,i){return ne(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},Jb),i);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",s.cacheControl),l&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(l))):(a=n,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!s.duplex&&(s.duplex="half")),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(t=="PUT"?dg:nn)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:o},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ve(a))return{data:null,error:a};throw a}})}upload(t,r,n){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,i){return ne(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),s=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${s}`);o.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:Jb.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield dg(this.fetch,o.toString(),l,{headers:d});return{data:{path:a,fullPath:f.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ve(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return ne(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield nn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),s=new URL(this.url+a.url),o=s.searchParams.get("token");if(!o)throw new Sy("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}})}update(t,r,n){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ne(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}copy(t,r,n){return ne(this,void 0,void 0,function*(){try{return{data:{path:(yield nn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}createSignedUrl(t,r,n){return ne(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield nn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}createSignedUrls(t,r,n){return ne(this,void 0,void 0,function*(){try{const i=yield nn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}download(t,r){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),s=a?`?${a}`:"",o=this._getFinalPath(t),l=()=>Al(this.fetch,`${this.url}/${i}/${o}${s}`,{headers:this.headers,noResolveJson:!0});return new x5(l,this.shouldThrowOnError)}info(t){return ne(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Al(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ug(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}})}exists(t){return ne(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield v5(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ve(n)&&n instanceof cg){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(t){return ne(this,void 0,void 0,function*(){try{return{data:yield Ny(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}list(t,r,n){return ne(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},b5),r),{prefix:t||""});return{data:yield nn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}listV2(t,r){return ne(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield nn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const r2="2.83.0",n2={"X-Client-Info":`storage-js/${r2}`};class _5{constructor(t,r={},n,i){this.shouldThrowOnError=!1;const a=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},n2),r),this.fetch=ky(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return ne(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield Al(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}getBucket(t){return ne(this,void 0,void 0,function*(){try{return{data:yield Al(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}createBucket(t){return ne(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield nn(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}updateBucket(t,r){return ne(this,void 0,void 0,function*(){try{return{data:yield dg(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ne(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ne(this,void 0,void 0,function*(){try{return{data:yield Ny(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class j5{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},n2),r),this.fetch=ky(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ne(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}listBuckets(t){return ne(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Al(this.fetch,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ne(this,void 0,void 0,function*(){try{return{data:yield Ny(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}}const Ey={"X-Client-Info":`storage-js/${r2}`,"Content-Type":"application/json"};class i2 extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function wr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class kp extends i2{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class S5 extends i2{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var Qb;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Qb||(Qb={}));const Cy=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),k5=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Zb=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),N5=(e,t,r)=>ne(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const i=e.status||500,a=e;if(typeof a.json=="function")a.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||i+"";t(new kp(Zb(s),i,o))}).catch(()=>{const s=i+"",o=a.statusText||`HTTP ${i} error`;t(new kp(o,i,s))});else{const s=i+"",o=a.statusText||`HTTP ${i} error`;t(new kp(o,i,s))}}else t(new S5(Zb(e),e))}),E5=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(k5(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function C5(e,t,r,n,i,a){return ne(this,void 0,void 0,function*(){return new Promise((s,o)=>{e(r,E5(t,n,i,a)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>s(l)).catch(l=>N5(l,o,n))})})}function _r(e,t,r,n,i){return ne(this,void 0,void 0,function*(){return C5(e,"POST",t,n,i,r)})}class P5{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ey),r),this.fetch=Cy(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return ne(this,void 0,void 0,function*(){try{return{data:(yield _r(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r))return{data:null,error:r};throw r}})}getIndex(t,r){return ne(this,void 0,void 0,function*(){try{return{data:yield _r(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wr(n))return{data:null,error:n};throw n}})}listIndexes(t){return ne(this,void 0,void 0,function*(){try{return{data:yield _r(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return ne(this,void 0,void 0,function*(){try{return{data:(yield _r(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wr(n))return{data:null,error:n};throw n}})}}class O5{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ey),r),this.fetch=Cy(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return ne(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield _r(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r))return{data:null,error:r};throw r}})}getVectors(t){return ne(this,void 0,void 0,function*(){try{return{data:yield _r(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r))return{data:null,error:r};throw r}})}listVectors(t){return ne(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield _r(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r))return{data:null,error:r};throw r}})}queryVectors(t){return ne(this,void 0,void 0,function*(){try{return{data:yield _r(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r))return{data:null,error:r};throw r}})}deleteVectors(t){return ne(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield _r(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r))return{data:null,error:r};throw r}})}}class A5{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ey),r),this.fetch=Cy(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ne(this,void 0,void 0,function*(){try{return{data:(yield _r(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r))return{data:null,error:r};throw r}})}getBucket(t){return ne(this,void 0,void 0,function*(){try{return{data:yield _r(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r))return{data:null,error:r};throw r}})}listBuckets(){return ne(this,arguments,void 0,function*(t={}){try{return{data:yield _r(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ne(this,void 0,void 0,function*(){try{return{data:(yield _r(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r))return{data:null,error:r};throw r}})}}class T5 extends A5{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new D5(this.url,this.headers,t,this.fetch)}}class D5 extends P5{constructor(t,r,n,i){super(t,r,i),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ne(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ne(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ne(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ne(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new I5(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class I5 extends O5{constructor(t,r,n,i,a){super(t,r,a),this.vectorBucketName=n,this.indexName=i}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ne(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ne(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ne(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ne(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ne(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class R5 extends _5{constructor(t,r={},n,i){super(t,r,n,i)}from(t){return new w5(this.url,this.headers,t,this.fetch)}get vectors(){return new T5(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new j5(this.url+"/iceberg",this.headers,this.fetch)}}const M5="2.83.0";let Go="";typeof Deno<"u"?Go="deno":typeof document<"u"?Go="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Go="react-native":Go="node";const L5={"X-Client-Info":`supabase-js-${Go}/${M5}`},$5={headers:L5},F5={schema:"public"},B5={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},U5={},z5=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),W5=()=>Headers,K5=(e,t,r)=>{const n=z5(r),i=W5();return async(a,s)=>{var o;const l=(o=await t())!==null&&o!==void 0?o:e;let u=new i(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(a,Object.assign(Object.assign({},s),{headers:u}))}};function H5(e){return e.endsWith("/")?e:e+"/"}function q5(e,t){var r,n;const{db:i,auth:a,realtime:s,global:o}=e,{db:l,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),s),storage:{},global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function V5(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(H5(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const a2="2.83.0",ls=30*1e3,fg=3,Np=fg*ls,G5="http://localhost:9999",Y5="supabase.auth.token",X5={"X-Client-Info":`gotrue-js/${a2}`},hg="X-Supabase-Api-Version",s2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},J5=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Q5=10*60*1e3;class Tl extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function se(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Z5 extends Tl{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function e4(e){return se(e)&&e.name==="AuthApiError"}class ya extends Tl{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ta extends Tl{constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}}class gr extends ta{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function t4(e){return se(e)&&e.name==="AuthSessionMissingError"}class Ja extends ta{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class eu extends ta{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class tu extends ta{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function r4(e){return se(e)&&e.name==="AuthImplicitGrantRedirectError"}class ew extends ta{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pg extends ta{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Ep(e){return se(e)&&e.name==="AuthRetryableFetchError"}class tw extends ta{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class mg extends ta{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const pd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rw=` 	
\r=`.split(""),n4=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<rw.length;t+=1)e[rw[t].charCodeAt(0)]=-2;for(let t=0;t<pd.length;t+=1)e[pd[t].charCodeAt(0)]=t;return e})();function nw(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(pd[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(pd[n]),t.queuedBits-=6}}function o2(e,t,r){const n=n4[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function iw(e){const t=[],r=s=>{t.push(String.fromCodePoint(s))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=s=>{s4(s,n,r)};for(let s=0;s<e.length;s+=1)o2(e.charCodeAt(s),i,a);return t.join("")}function i4(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function a4(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}i4(n,t)}}function s4(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Os(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)o2(e.charCodeAt(i),r,n);return new Uint8Array(t)}function o4(e){const t=[];return a4(e,r=>t.push(r)),new Uint8Array(t)}function _a(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>nw(i,r,n)),nw(null,r,n),t.join("")}function l4(e){return Math.round(Date.now()/1e3)+e}function c4(){return Symbol("auth-callback")}const Dt=()=>typeof window<"u"&&typeof document<"u",sa={tested:!1,writable:!1},l2=()=>{if(!Dt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(sa.tested)return sa.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),sa.tested=!0,sa.writable=!0}catch{sa.tested=!0,sa.writable=!1}return sa.writable};function u4(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const c2=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),d4=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",cs=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},oa=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Si=async(e,t)=>{await e.removeItem(t)};class Rf{constructor(){this.promise=new Rf.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Rf.promiseConstructor=Promise;function Cp(e){const t=e.split(".");if(t.length!==3)throw new mg("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!J5.test(t[n]))throw new mg("JWT not in base64url format");return{header:JSON.parse(iw(t[0])),payload:JSON.parse(iw(t[1])),signature:Os(t[2]),raw:{header:t[0],payload:t[1]}}}async function f4(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function h4(e,t){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await e(a);if(!t(a,null,s)){n(s);return}}catch(s){if(!t(a,s)){i(s);return}}})()})}function p4(e){return("0"+e.toString(16)).substr(-2)}function m4(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,p4).join("")}async function g4(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function v4(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await g4(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qa(e,t,r=!1){const n=m4();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await cs(e,`${t}-code-verifier`,i);const a=await v4(n);return[a,n===a?"plain":"s256"]}const y4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function x4(e){const t=e.headers.get(hg);if(!t||!t.match(y4))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function b4(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function w4(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const _4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Za(e){if(!_4.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Pp(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function j4(e,t){return new Proxy(e,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,i)}})}function aw(e){return JSON.parse(JSON.stringify(e))}const fa=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),S4=[502,503,504];async function sw(e){var t;if(!d4(e))throw new pg(fa(e),0);if(S4.includes(e.status))throw new pg(fa(e),e.status);let r;try{r=await e.json()}catch(a){throw new ya(fa(a),a)}let n;const i=x4(e);if(i&&i.getTime()>=s2["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new tw(fa(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new gr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new tw(fa(r),e.status,r.weak_password.reasons);throw new Z5(fa(r),e.status||500,n)}const k4=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function pe(e,t,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[hg]||(a[hg]=s2["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const s=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(s.redirect_to=n.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await N4(e,t,r+o,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function N4(e,t,r,n,i,a){const s=k4(t,n,i,a);let o;try{o=await e(r,Object.assign({},s))}catch(l){throw console.error(l),new pg(fa(l),0)}if(o.ok||await sw(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await sw(l)}}function tn(e){var t;let r=null;P4(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=l4(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function ow(e){const t=tn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ti(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function E4(e){return{data:e,error:null}}function C4(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=e,s=io(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},l=Object.assign({},s);return{data:{properties:o,user:l},error:null}}function lw(e){return e}function P4(e){return e.access_token&&e.refresh_token&&e.expires_in}const Op=["global","local","others"];class O4{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=c2(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Op[0]){if(Op.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Op.join(", ")}`);try{return await pe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ti})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=io(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:C4,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(se(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await pe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ti})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,a,s,o,l;try{const u={nextPage:null,lastPage:0,total:0},d=await pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:lw});if(d.error)throw d.error;const f=await d.json(),h=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,p=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);u[`${y}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(se(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Za(t);try{return await pe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ti})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Za(t);try{return await pe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ti})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Za(t);try{return await pe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ti})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Za(t.userId);try{const{data:r,error:n}=await pe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(se(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Za(t.userId),Za(t.id);try{return{data:await pe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,i,a,s,o,l;try{const u={nextPage:null,lastPage:0,total:0},d=await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:lw});if(d.error)throw d.error;const f=await d.json(),h=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,p=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);u[`${y}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(se(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(se(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(se(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await pe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(se(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await pe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(se(r))return{data:null,error:r};throw r}}}function cw(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const es={debug:!!(globalThis&&l2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class u2 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class A4 extends u2{}async function T4(e,t,r){es.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),es.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){es.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{es.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw es.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new A4(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(es.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function D4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function d2(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function I4(e){return parseInt(e,16)}function R4(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function M4(e){var t;const{chainId:r,domain:n,expirationTime:i,issuedAt:a=new Date,nonce:s,notBefore:o,requestId:l,resources:u,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=d2(e.address),g=d?`${d}://${n}`:n,v=e.statement?`${e.statement}
`:"",y=`${g} wants you to sign in with your Ethereum account:
${p}

${v}`;let x=`URI: ${f}
Version: ${h}
Chain ID: ${r}${s?`
Nonce: ${s}`:""}
Issued At: ${a.toISOString()}`;if(i&&(x+=`
Expiration Time: ${i.toISOString()}`),o&&(x+=`
Not Before: ${o.toISOString()}`),l&&(x+=`
Request ID: ${l}`),u){let w=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);w+=`
- ${b}`}x+=w}return`${y}
${x}`}class it extends Error{constructor({message:t,code:r,cause:n,name:i}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=i??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class md extends it{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function L4({error:e,options:t}){var r,n,i;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new it({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new it({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new it({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new it({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new it({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new it({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new it({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new it({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(f2(s)){if(a.rp.id!==s)return new it({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new it({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new it({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new it({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new it({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function $4({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new it({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new it({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(f2(n)){if(r.rpId!==n)return new it({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new it({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new it({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new it({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class F4{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const B4=new F4;function U4(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,i=io(e,["challenge","user","excludeCredentials"]),a=Os(t).buffer,s=Object.assign(Object.assign({},r),{id:Os(r.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:a,user:s});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];o.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:Os(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function z4(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=io(e,["challenge","allowCredentials"]),i=Os(t).buffer,a=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let s=0;s<r.length;s++){const o=r[s];a.allowCredentials[s]=Object.assign(Object.assign({},o),{id:Os(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return a}function W4(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:_a(new Uint8Array(e.response.attestationObject)),clientDataJSON:_a(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function K4(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:_a(new Uint8Array(i.authenticatorData)),clientDataJSON:_a(new Uint8Array(i.clientDataJSON)),signature:_a(new Uint8Array(i.signature)),userHandle:i.userHandle?_a(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function f2(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function uw(){var e,t;return!!(Dt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function H4(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new md("Browser returned unexpected credential type",t)}:{data:null,error:new md("Empty credential response",t)}}catch(t){return{data:null,error:L4({error:t,options:e})}}}async function q4(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new md("Browser returned unexpected credential type",t)}:{data:null,error:new md("Empty credential response",t)}}catch(t){return{data:null,error:$4({error:t,options:e})}}}const V4={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},G4={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function gd(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of e)if(i)for(const a in i){const s=i[a];if(s!==void 0)if(Array.isArray(s))n[a]=s;else if(r(s))n[a]=s;else if(t(s)){const o=n[a];t(o)?n[a]=gd(o,s):n[a]=gd(s)}else n[a]=s}return n}function Y4(e,t){return gd(V4,e,t||{})}function X4(e,t){return gd(G4,e,t||{})}class J4{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:i},a){try{const{data:s,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!s)return{data:null,error:o};const l=i??B4.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=Y4(s.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:d,error:f}=await H4({publicKey:u,signal:l});return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=X4(s.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:d,error:f}=await q4(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:l}));return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(s){return se(s)?{data:null,error:s}:{data:null,error:new ya("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new Tl("rpId is required for WebAuthn authentication")};try{if(!uw())return{data:null,error:new ya("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:a});if(!s)return{data:null,error:o};const{webauthn:l}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(s){return se(s)?{data:null,error:s}:{data:null,error:new ya("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new Tl("rpId is required for WebAuthn registration")};try{if(!uw())return{data:null,error:new ya("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:o};const{data:l,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:a});return l?this._verify({factorId:s.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(s){return se(s)?{data:null,error:s}:{data:null,error:new ya("Unexpected error in register",s)}}}}D4();const Q4={url:G5,storageKey:Y5,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:X5,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function dw(e,t,r){return await r()}const ts={};class Dl{get jwks(){var t,r;return(r=(t=ts[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ts[this.storageKey]=Object.assign(Object.assign({},ts[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ts[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ts[this.storageKey]=Object.assign(Object.assign({},ts[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},Q4),t);if(this.storageKey=a.storageKey,this.instanceID=(r=Dl.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Dl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Dt()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new O4({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=c2(a.fetch),this.lock=a.lock||dw,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:Dt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=T4:this.lock=dw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new J4(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:l2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=cw(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=cw(this.memoryStorage)),Dt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${a2}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Dt()&&(r=u4(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Dt()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),r4(a)){const l=(t=a.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return se(r)?this._returnResult({error:r}):this._returnResult({error:new ya("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const a=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:tn}),{data:s,error:o}=a;if(o||!s)return this._returnResult({data:{user:null,session:null},error:o});const l=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(a){if(se(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var r,n,i;try{let a;if("email"in t){const{email:d,password:f,options:h}=t;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Qa(this.storage,this.storageKey)),a=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:g},xform:tn})}else if("phone"in t){const{phone:d,password:f,options:h}=t;a=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:tn})}else throw new eu("You must provide either an email or phone number and a password");const{data:s,error:o}=a;if(o||!s)return this._returnResult({data:{user:null,session:null},error:o});const l=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(a){if(se(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:s,options:o}=t;r=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ow})}else if("phone"in t){const{phone:a,password:s,options:o}=t;r=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ow})}else throw new eu("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const a=new Ja;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,i,a,s,o,l,u,d,f,h;let p,g;if("message"in t)p=t.message,g=t.signature;else{const{chain:v,wallet:y,statement:x,options:w}=t;let b;if(Dt())if(typeof y=="object")b=y;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")b=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=y}const _=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href),j=await b.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=d2(j[0]);let k=(n=w==null?void 0:w.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!k){const C=await b.request({method:"eth_chainId"});k=I4(C)}const N={domain:_.host,address:S,statement:x,uri:_.href,version:"1",chainId:k,nonce:(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(s=(a=w==null?void 0:w.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(o=w==null?void 0:w.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=w==null?void 0:w.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=w==null?void 0:w.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=w==null?void 0:w.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=M4(N),g=await b.request({method:"personal_sign",params:[R4(p),S]})}try{const{data:v,error:y}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:g},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:tn});if(y)throw y;if(!v||!v.session||!v.user){const x=new Ja;return this._returnResult({data:{user:null,session:null},error:x})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:y})}catch(v){if(se(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(t){var r,n,i,a,s,o,l,u,d,f,h,p;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:y,wallet:x,statement:w,options:b}=t;let _;if(Dt())if(typeof x=="object")_=x;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=x}const j=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),w?{statement:w}:null));let k;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")k=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)k=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)g=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),v=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(i=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=S}}try{const{data:y,error:x}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:_a(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:tn});if(x)throw x;if(!y||!y.session||!y.user){const w=new Ja;return this._returnResult({data:{user:null,session:null},error:w})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:x})}catch(y){if(se(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(t){const r=await oa(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:s}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:tn});if(await Si(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!a||!a.session||!a.user){const o=new Ja;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:s})}catch(a){if(se(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:a,nonce:s}=t,o=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:tn}),{data:l,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const d=new Ja;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,i,a,s;try{if("email"in t){const{email:o,options:l}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Qa(this.storage,this.storageKey));const{error:f}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:o,options:l}=t,{data:u,error:d}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(s=l==null?void 0:l.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new eu("You must provide either an email or phone number.")}catch(o){if(se(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var r,n;try{let i,a;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:o}=await pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:tn});if(o)throw o;if(!s)throw new Error("An error occurred on token verification.");const l=s.session,u=s.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var r,n,i,a,s;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await Qa(this.storage,this.storageKey));const u=await pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:E4});return!((a=u.data)===null||a===void 0)&&a.url&&Dt()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if(se(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new gr;const{error:i}=await pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(se(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:a}=t,{error:s}=await pe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in t){const{phone:n,type:i,options:a}=t,{data:s,error:o}=await pe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:o})}throw new eu("You must provide either an email or phone number and a type")}catch(r){if(se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await oa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Np:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const s=await oa(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=Pp()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=j4(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ti}):await this._useSession(async r=>{var n,i,a;const{data:s,error:o}=r;if(o)throw o;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new gr}:await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Ti})})}catch(r){if(se(r))return t4(r)&&(await this._removeSession(),await Si(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new gr;const s=i.session;let o=null,l=null;this.flowType==="pkce"&&t.email!=null&&([o,l]=await Qa(this.storage,this.storageKey));const{data:u,error:d}=await pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:l}),jwt:s.access_token,xform:Ti});if(d)throw d;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(n){if(se(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new gr;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:s}=Cp(t.access_token);if(s.exp&&(n=s.exp,i=n<=r),i){const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:l}=await this._getUser(t.access_token);if(l)throw l;a={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(se(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:s,error:o}=r;if(o)throw o;t=(n=s.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new gr;const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Dt())throw new tu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new tu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ew("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new tu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new ew("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:s,expires_in:o,expires_at:l,token_type:u}=t;if(!a||!o||!s||!u)throw new tu("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let h=d+f;l&&(h=parseInt(l));const p=h-d;p*1e3<=ls&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const g=h-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:v,error:y}=await this._getUser(a);if(y)throw y;const x={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:f,expires_at:h,refresh_token:s,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:t.type},error:null})}catch(n){if(se(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await oa(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({error:a});const s=(n=i.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:o}=await this.admin.signOut(s,t);if(o&&!(e4(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await Si(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=c4(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Qa(this.storage,this.storageKey,!0));try{return await pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(se(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var s,o,l,u,d;const{data:f,error:h}=a;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await pe(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Dt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(se(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:a}}=r;if(i)throw i;const{options:s,provider:o,token:l,access_token:u,nonce:d}=t,f=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:l,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:tn}),{data:h,error:p}=f;return p?this._returnResult({data:{user:null,session:null},error:p}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new Ja}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:p}))}catch(i){if(se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:s}=r;if(s)throw s;return await pe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await h4(async i=>(i>0&&await f4(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:tn})),(i,a)=>{const s=200*Math.pow(2,i);return a&&Ep(a)&&Date.now()+s-n<ls})}catch(n){if(this._debug(r,"error",n),se(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Dt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await oa(this.storage,this.storageKey);if(i&&this.userStorage){let s=await oa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await cs(this.userStorage,this.storageKey+"-user",s)),i.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:Pp()}else if(i&&!i.user&&!i.user){const s=await oa(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(i.user=s.user,await Si(this.storage,this.storageKey+"-user"),await cs(this.storage,this.storageKey,i)):i.user=Pp()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Np;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Np}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),Ep(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:o}=await this._getUser(i.access_token);!o&&(s!=null&&s.user)?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new gr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Rf;const{data:a,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!a.session)throw new gr;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={data:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(i,"error",a),se(a)){const s={data:null,error:a};return Ep(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(l){a.push(l)}});if(await Promise.all(s),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await cs(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=aw(i);await cs(this.storage,this.storageKey,a)}else{const i=aw(r);await cs(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Si(this.storage,this.storageKey),await Si(this.storage,this.storageKey+"-code-verifier"),await Si(this.storage,this.storageKey+"-user"),this.userStorage&&await Si(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Dt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ls);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/ls);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ls}ms, refresh threshold is ${fg} ticks`),i<=fg&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof u2)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Dt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,s]=await Qa(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(o.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?this._returnResult({data:null,error:a}):await pe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=await pe(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?W4(t.webauthn.credential_response):K4(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:l}=await pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const s=await pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(s.error)return s;const{data:o}=s;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:U4(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:z4(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Cp(n.access_token);let s=null;a.aal&&(s=a.aal);let o=s;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const u=a.amr||[];return{data:{currentLevel:s,nextLevel:o,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await pe(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new gr})})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new gr});const s=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&Dt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(se(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new gr});const s=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&Dt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(se(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await pe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new gr})})}catch(t){if(se(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await pe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new gr})})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+Q5>i)return n;const{data:a,error:s}=await pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:g}=await this.getSession();if(g||!p.session)return this._returnResult({data:null,error:g});n=p.session.access_token}const{header:i,payload:a,signature:s,raw:{header:o,payload:l}}=Cp(n);r!=null&&r.allowExpired||b4(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:a,header:i,signature:s},error:null}}const d=w4(i.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,s,o4(`${o}.${l}`)))throw new mg("Invalid JWT signature");return{data:{claims:a,header:i,signature:s},error:null}}catch(n){if(se(n))return this._returnResult({data:null,error:n});throw n}}}Dl.nextInstanceID={};const Z4=Dl;class eL extends Z4{constructor(t){super(t)}}class tL{constructor(t,r,n){var i,a,s;this.supabaseUrl=t,this.supabaseKey=r;const o=V5(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const l=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:F5,realtime:U5,auth:Object.assign(Object.assign({},B5),{storageKey:l}),global:$5},d=q5(n??{},u);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=d.auth)!==null&&s!==void 0?s:{},this.headers,d.global.fetch),this.fetch=K5(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new GM(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new R5(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new HM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:s,flowType:o,lock:l,debug:u,throwOnError:d},f,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new eL({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),f),storageKey:s,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,flowType:o,lock:l,debug:u,throwOnError:d,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new d5(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const rL=(e,t,r)=>new tL(e,t,r);function nL(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}nL()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const h2="https://gomwhbewjdcllejifdyf.supabase.co",p2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdvbXdoYmV3amRjbGxlamlmZHlmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM1MTUzNjYsImV4cCI6MjA3OTA5MTM2Nn0.fvIW61htbjtfkT5ZP4FGBTw96KSGZbr9qxSJiMDp-qQ",Ap=[!h2,!p2].filter(Boolean);if(Ap.length>0){const e=`Missing Supabase environment variable${Ap.length>1?"s":""}: ${Ap.join(", ")}. Copy .env.example to .env and provide your Supabase project credentials.`;throw new Error(e)}const X=rL(h2,p2);async function fw(e){const{data:t}=await X.from("user_settings").select("global_role, workspace_id").eq("user_id",e).maybeSingle(),{data:r}=await X.from("user_teams").select("team_id, role").eq("user_id",e).maybeSingle();return t?{userId:e,globalRole:t.global_role,teamId:(r==null?void 0:r.team_id)||null,teamRole:(r==null?void 0:r.role)||null,workspaceId:t.workspace_id||null}:null}function iL(e){return!!e&&e.globalRole==="admin"}function Mf(e){switch(e){case"admin":return"Admin";case"sales_manager":return"Manager";case"team_lead":return"Team Lead";case"agent":default:return"Agent"}}const m2=m.createContext(void 0);function aL({children:e}){const[t,r]=m.useState(null),[n,i]=m.useState(null),[a,s]=m.useState(!0);m.useEffect(()=>{X.auth.getSession().then(async({data:{session:f}})=>{if(r((f==null?void 0:f.user)??null),f!=null&&f.user){const h=await fw(f.user.id);i(h)}s(!1)});const{data:{subscription:d}}=X.auth.onAuthStateChange((f,h)=>{(async()=>{if(r((h==null?void 0:h.user)??null),h!=null&&h.user){const p=await fw(h.user.id);i(p)}else i(null)})()});return()=>d.unsubscribe()},[]);const o=async(d,f,h)=>{const{data:p,error:g}=await X.auth.signUp({email:d,password:f,options:{data:{name:h}}});if(!g&&p.user){await X.from("user_settings").insert({user_id:p.user.id,annual_gci_goal:0,default_tax_rate:.25,default_brokerage_split_rate:.2});const{data:v}=await X.from("workspace_settings").insert({owner_user_id:p.user.id,name:`${h||"My"} Workspace`}).select("id").maybeSingle();v!=null&&v.id&&await X.from("user_settings").update({workspace_id:v.id}).eq("user_id",p.user.id)}return{error:g}},l=async(d,f)=>{const{error:h}=await X.auth.signInWithPassword({email:d,password:f});return{error:h}},u=async()=>{await X.auth.signOut()};return c.jsx(m2.Provider,{value:{user:t,roleInfo:n,loading:a,signUp:o,signIn:l,signOut:u},children:e})}function gt(){const e=m.useContext(m2);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),de=(e,t)=>{const r=m.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:o="",children:l,...u},d)=>m.createElement("svg",{ref:d,...sL,width:i,height:i,stroke:n,strokeWidth:s?Number(a)*24/Number(i):a,className:["lucide",`lucide-${oL(e)}`,o].join(" "),...u},[...t.map(([f,h])=>m.createElement(f,h)),...Array.isArray(l)?l:[l]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=de("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=de("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=de("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=de("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=de("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=de("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=de("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=de("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=de("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=de("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=de("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=de("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=de("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=de("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=de("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=de("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=de("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=de("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=de("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=de("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=de("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=de("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=de("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=de("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=de("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=de("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=de("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=de("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=de("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=de("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=de("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=de("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=de("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=de("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=de("PlugZap",[["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m18 3-4 4h6l-4 4",key:"16psg9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=de("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=de("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=de("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=de("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=de("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=de("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=de("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=de("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=de("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=de("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=de("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=de("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=de("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=de("Trello",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["rect",{width:"3",height:"9",x:"7",y:"7",key:"14n3xi"}],["rect",{width:"3",height:"5",x:"14",y:"7",key:"s4azjd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=de("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=de("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=de("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=de("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=de("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function DL(){const{user:e,roleInfo:t}=gt(),r=rc(),[n,i]=m.useState(!1),[a,s]=m.useState(""),[o,l]=m.useState([]),[u,d]=m.useState(!1),[f,h]=m.useState(!1),p=m.useRef(null);m.useEffect(()=>{const b=_=>{p.current&&!p.current.contains(_.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),m.useEffect(()=>{const _=setTimeout(async()=>{if(!a.trim()||a.length<2){l([]),d(!1);return}h(!0),d(!0);try{const{data:j,error:S}=await X.from("deals").select("id, client_name, property_address, client_email, client_phone, status, expected_sale_price").eq("user_id",e==null?void 0:e.id).or(`client_name.ilike.%${a}%,property_address.ilike.%${a}%,client_email.ilike.%${a}%,client_phone.ilike.%${a}%`).limit(5);if(S)throw S;l(j||[])}catch(j){console.error("Search error:",j),l([])}finally{h(!1)}},300);return()=>clearTimeout(_)},[a,e==null?void 0:e.id]);const g=b=>{s(""),d(!1),r("/pipeline"),setTimeout(()=>{const _=document.querySelector(`[data-deal-id="${b}"]`);_&&(_.scrollIntoView({behavior:"smooth",block:"center"}),_.classList.add("ring-2","ring-[rgb(0,122,255)]","ring-offset-2"),setTimeout(()=>{_.classList.remove("ring-2","ring-[rgb(0,122,255)]","ring-offset-2")},2e3))},100)},v=()=>{s(""),l([]),d(!1)},y=async()=>{await X.auth.signOut(),r("/login")},x=()=>{r("/pipeline?newDeal=true")},w=Mf(t==null?void 0:t.globalRole);return c.jsx("header",{className:"sticky top-0 z-50 border-b border-white/30 bg-white/75 backdrop-blur-2xl shadow-[0_12px_30px_rgba(15,23,42,0.08)]",children:c.jsxs("div",{className:"mx-auto flex h-16 w-full items-center gap-4 px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>r("/"),className:"flex items-center gap-2 rounded-2xl border border-white/40 bg-white/80 px-3 py-2 text-sm font-semibold text-gray-900 shadow-[0_2px_8px_rgba(15,23,42,0.08)]",children:c.jsx("img",{src:"/PipelineIQ.png",alt:"PipelineIQ",className:"h-8 w-auto"})}),c.jsx("div",{className:"hidden lg:flex w-96",ref:p,children:c.jsxs("div",{className:"relative w-full",children:[c.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-3 flex items-center",children:c.jsx(k2,{className:"h-4 w-4 text-gray-400"})}),c.jsx("input",{type:"text",value:a,onChange:b=>s(b.target.value),placeholder:"Search deals, people, addresses...",className:"w-full rounded-2xl border border-white/60 bg-white/90 py-2 pl-10 pr-10 text-sm text-gray-900 shadow-inner focus:border-[var(--app-accent)]/40 focus:ring-2 focus:ring-[var(--app-accent)]/15"}),a&&c.jsx("button",{onClick:v,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:c.jsx(oo,{className:"h-4 w-4"})}),u&&c.jsx("div",{className:"absolute top-full left-0 right-0 z-50 mt-3 rounded-2xl border border-white/70 bg-white/95 shadow-[0_15px_40px_rgba(15,23,42,0.16)]",children:f?c.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"Searching"}):o.length>0?o.map(b=>c.jsxs("button",{onClick:()=>g(b.id),className:"flex w-full items-start justify-between px-4 py-3 text-left hover:bg-gray-50",children:[c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("p",{className:"truncate text-sm font-medium text-gray-900",children:b.client_name}),c.jsx("p",{className:"truncate text-xs text-gray-500",children:b.property_address}),(b.client_email||b.client_phone)&&c.jsx("p",{className:"truncate text-xs text-gray-400",children:b.client_email||b.client_phone})]}),c.jsxs("div",{className:"ml-3 flex flex-col items-end gap-1",children:[c.jsx("span",{className:"rounded-full bg-blue-50 px-2 py-0.5 text-xs font-medium text-blue-700",children:b.status.replace(/_/g," ")}),c.jsxs("span",{className:"text-xs text-gray-500",children:["$",b.expected_sale_price.toLocaleString()]})]})]},b.id)):c.jsxs("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:["No deals found matching ",a,"."]})})]})})]}),c.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[c.jsxs("button",{onClick:x,className:"hidden sm:inline-flex items-center gap-2 rounded-2xl border border-white/40 bg-white/80 px-3 py-2 text-sm font-medium text-gray-700 shadow-[0_2px_8px_rgba(15,23,42,0.08)] transition hover:border-[var(--app-accent)]/40 hover:text-[var(--app-accent)]",children:[c.jsx(Yi,{className:"h-4 w-4"}),"New deal"]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>i(b=>!b),className:"flex items-center gap-2 rounded-2xl border border-white/50 bg-white/80 px-2.5 py-1.5 shadow-[0_2px_8px_rgba(15,23,42,0.08)] transition hover:border-[var(--app-accent)]/30",children:[c.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-[var(--app-accent)] text-white",children:c.jsx(Ff,{className:"h-4 w-4"})}),c.jsxs("div",{className:"hidden text-left sm:block",children:[c.jsx("p",{className:"text-xs font-semibold text-gray-900",children:e==null?void 0:e.email}),c.jsx("p",{className:"text-[11px] text-gray-500",children:w})]})]}),n&&c.jsxs("div",{className:"absolute right-0 mt-3 w-64 rounded-2xl border border-white/70 bg-white/95 shadow-[0_25px_60px_rgba(15,23,42,0.16)]",children:[c.jsxs("div",{className:"border-b border-gray-100 px-4 py-3 space-y-1",children:[c.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e==null?void 0:e.email}),c.jsxs("p",{className:"text-xs font-medium text-gray-500 flex items-center gap-2",children:[c.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-[10px] uppercase tracking-wide text-gray-600",children:w}),"Signed in"]})]}),c.jsxs("button",{onClick:()=>{i(!1),r("/settings")},className:"flex w-full items-center gap-3 px-4 py-2 text-sm text-gray-700 transition hover:bg-gray-50",children:[c.jsx($f,{className:"h-4 w-4"}),c.jsx("span",{children:"Personal Settings"})]}),c.jsxs("button",{onClick:y,className:"flex w-full items-center gap-3 px-4 py-2 text-sm text-red-600 transition hover:bg-red-50",children:[c.jsx(_L,{className:"h-4 w-4"}),c.jsx("span",{children:"Sign out"})]})]})]})]})]})})}const IL=[{icon:xL,label:"Dashboard",path:"/"},{icon:AL,label:"Pipeline",path:"/pipeline"},{icon:y2,label:"Tasks",path:"/tasks"},{icon:dL,label:"Analytics",path:"/analytics"}],RL=[{icon:Ws,label:"Luma AI",path:"/luma"}],ML=[{icon:$f,label:"Workspace Settings",path:"/workspace-settings"}];function LL(){const e=In(),t=rc(),r=(n,i)=>c.jsxs("div",{children:[c.jsx("p",{className:"px-3 pb-2 text-[11px] font-semibold uppercase tracking-wide text-gray-400",children:n}),c.jsx("div",{className:"space-y-1",children:i.map(a=>{const s=a.icon,o=e.pathname===a.path;return c.jsxs("button",{onClick:()=>t(a.path),className:`flex w-full items-center gap-3 rounded-2xl px-3.5 py-2.5 text-left text-sm font-medium transition ${o?"bg-[rgba(10,132,255,0.12)] text-[var(--app-accent)] shadow-[inset_0_0_0_1px_rgba(10,132,255,0.2)]":"text-gray-600 hover:bg-white/70 hover:text-gray-900"}`,children:[c.jsx("span",{className:`flex h-9 w-9 items-center justify-center rounded-2xl border text-gray-700 ${o?"border-[rgba(10,132,255,0.3)] bg-white/80":"border-white/60 bg-white/90"}`,children:c.jsx(s,{className:"h-4 w-4",strokeWidth:2})}),c.jsx("span",{children:a.label})]},a.path)})})]});return c.jsxs("nav",{className:"sticky top-24 rounded-[var(--app-radius)] border border-[var(--app-border)] bg-white/80 p-4 shadow-[0_15px_40px_rgba(15,23,42,0.12)]",children:[c.jsxs("div",{className:"space-y-6",children:[r("Primary",IL),r("Intelligence",RL)]}),c.jsx("div",{className:"mt-6 border-t border-[var(--app-border)] pt-4",children:r("Workspace",ML)})]})}function $L({children:e}){return c.jsxs("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_var(--app-bg-start),_var(--app-bg-mid)_45%,_var(--app-bg-end))] text-[var(--app-text-primary)] overflow-x-hidden",children:[c.jsx(DL,{}),c.jsxs("div",{className:"relative mx-auto flex w-full flex-col gap-6 px-4 pb-10 pt-6 lg:flex-row lg:px-8",children:[c.jsx("div",{className:"lg:w-64 lg:flex-shrink-0",children:c.jsx(LL,{})}),c.jsx("main",{className:"flex-1 overflow-x-hidden",children:c.jsx("div",{className:"min-h-[calc(100vh-10rem)] rounded-[var(--app-radius)] border border-[var(--app-border)] bg-white/85 p-4 shadow-[0_10px_50px_rgba(15,23,42,0.08)] sm:p-6 lg:p-8",children:e})})]})]})}function FL({onToggle:e}){const[t,r]=m.useState(""),[n,i]=m.useState(""),[a,s]=m.useState(!1),[o,l]=m.useState(""),u=async d=>{d.preventDefault(),s(!0),l("");const{error:f}=await X.auth.signInWithPassword({email:t,password:n});f&&l(f.message),s(!1)};return c.jsxs("div",{className:"min-h-screen bg-[rgb(var(--color-app-bg))] flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[c.jsx("div",{className:"flex justify-center mb-8",children:c.jsx("img",{src:"/PipelineIQ.png",alt:"PipelineIQ",className:"h-16"})}),c.jsx("h2",{className:"text-center text-2xl font-semibold text-gray-900 mb-2",children:"Sign in to PipelineIQ"}),c.jsx("p",{className:"text-center hig-text-caption",children:"Welcome back! Please sign in to continue."})]}),c.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:c.jsxs("div",{className:"hig-card p-8",children:[c.jsxs("form",{onSubmit:u,className:"space-y-5",children:[o&&c.jsx("div",{className:"bg-red-50 border border-red-200/60 text-red-700 px-4 py-3 rounded-xl text-sm",children:o}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"hig-label",children:"Email address"}),c.jsx("input",{id:"email",type:"email",required:!0,value:t,onChange:d=>r(d.target.value),className:"hig-input",placeholder:"you@example.com"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"hig-label",children:"Password"}),c.jsx("input",{id:"password",type:"password",required:!0,value:n,onChange:d=>i(d.target.value),className:"hig-input",placeholder:"Enter your password"})]}),c.jsx("button",{type:"submit",disabled:a,className:"hig-btn-primary w-full",children:a?"Signing in...":"Sign in"})]}),c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-gray-200/60"})}),c.jsx("div",{className:"relative flex justify-center text-sm",children:c.jsx("span",{className:"px-2 bg-white text-gray-500",children:"New to PipelineIQ?"})})]}),c.jsx("div",{className:"mt-6",children:c.jsx("button",{onClick:e,className:"hig-btn-secondary w-full",children:"Create an account"})})]})]})})]})}function BL({onToggle:e}){const{signUp:t}=gt(),[r,n]=m.useState(""),[i,a]=m.useState(""),[s,o]=m.useState(""),[l,u]=m.useState(""),[d,f]=m.useState(!1),h=async p=>{if(p.preventDefault(),u(""),f(!0),s.length<6){u("Password must be at least 6 characters"),f(!1);return}const{error:g}=await t(i,s,r);g&&u(g.message),f(!1)};return c.jsxs("div",{className:"min-h-screen bg-[rgb(var(--color-app-bg))] flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[c.jsx("div",{className:"flex justify-center mb-8",children:c.jsx("img",{src:"/PipelineIQ.png",alt:"PipelineIQ",className:"h-16"})}),c.jsx("h2",{className:"text-center text-2xl font-semibold text-gray-900 mb-2",children:"Create your account"}),c.jsx("p",{className:"text-center hig-text-caption",children:"Get started with PipelineIQ today."})]}),c.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:c.jsxs("div",{className:"hig-card p-8",children:[c.jsxs("form",{onSubmit:h,className:"space-y-5",children:[l&&c.jsx("div",{className:"bg-red-50 border border-red-200/60 text-red-700 px-4 py-3 rounded-xl text-sm",children:l}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"name",className:"hig-label",children:"Full name"}),c.jsx("input",{id:"name",type:"text",required:!0,value:r,onChange:p=>n(p.target.value),className:"hig-input",placeholder:"John Doe"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"hig-label",children:"Email address"}),c.jsx("input",{id:"email",type:"email",required:!0,value:i,onChange:p=>a(p.target.value),className:"hig-input",placeholder:"you@example.com"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"hig-label",children:"Password"}),c.jsx("input",{id:"password",type:"password",required:!0,value:s,onChange:p=>o(p.target.value),className:"hig-input",placeholder:"At least 6 characters"})]}),c.jsx("button",{type:"submit",disabled:d,className:"hig-btn-primary w-full",children:d?"Creating account...":"Create account"})]}),c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-gray-200/60"})}),c.jsx("div",{className:"relative flex justify-center text-sm",children:c.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Already have an account?"})})]}),c.jsx("div",{className:"mt-6",children:c.jsx("button",{onClick:e,className:"hig-btn-secondary w-full",children:"Sign in"})})]})]})})]})}function UL(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return m.useMemo(()=>n=>{t.forEach(i=>i(n))},t)}const Bf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function lo(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Py(e){return"nodeType"in e}function tr(e){var t,r;return e?lo(e)?e:Py(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function Oy(e){const{Document:t}=tr(e);return e instanceof t}function ac(e){return lo(e)?!1:e instanceof tr(e).HTMLElement}function P2(e){return e instanceof tr(e).SVGElement}function co(e){return e?lo(e)?e.document:Py(e)?Oy(e)?e:ac(e)||P2(e)?e.ownerDocument:document:document:document}const fn=Bf?m.useLayoutEffect:m.useEffect;function Uf(e){const t=m.useRef(e);return fn(()=>{t.current=e}),m.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.current==null?void 0:t.current(...n)},[])}function zL(){const e=m.useRef(null),t=m.useCallback((n,i)=>{e.current=setInterval(n,i)},[]),r=m.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function Ml(e,t){t===void 0&&(t=[e]);const r=m.useRef(e);return fn(()=>{r.current!==e&&(r.current=e)},t),r}function sc(e,t){const r=m.useRef();return m.useMemo(()=>{const n=e(r.current);return r.current=n,n},[...t])}function yd(e){const t=Uf(e),r=m.useRef(null),n=m.useCallback(i=>{i!==r.current&&(t==null||t(i,r.current)),r.current=i},[]);return[r,n]}function xd(e){const t=m.useRef();return m.useEffect(()=>{t.current=e},[e]),t.current}let Tp={};function oc(e,t){return m.useMemo(()=>{if(t)return t;const r=Tp[e]==null?0:Tp[e]+1;return Tp[e]=r,e+"-"+r},[e,t])}function O2(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.reduce((a,s)=>{const o=Object.entries(s);for(const[l,u]of o){const d=a[l];d!=null&&(a[l]=d+e*u)}return a},{...t})}}const As=O2(1),bd=O2(-1);function WL(e){return"clientX"in e&&"clientY"in e}function zf(e){if(!e)return!1;const{KeyboardEvent:t}=tr(e.target);return t&&e instanceof t}function KL(e){if(!e)return!1;const{TouchEvent:t}=tr(e.target);return t&&e instanceof t}function wd(e){if(KL(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return WL(e)?{x:e.clientX,y:e.clientY}:null}const Pn=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Pn.Translate.toString(e),Pn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),pw="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function HL(e){return e.matches(pw)?e:e.querySelector(pw)}const qL={display:"none"};function VL(e){let{id:t,value:r}=e;return Ue.createElement("div",{id:t,style:qL},r)}function GL(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ue.createElement("div",{id:t,style:i,role:"status","aria-live":n,"aria-atomic":!0},r)}function YL(){const[e,t]=m.useState("");return{announce:m.useCallback(n=>{n!=null&&t(n)},[]),announcement:e}}const A2=m.createContext(null);function XL(e){const t=m.useContext(A2);m.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function JL(){const[e]=m.useState(()=>new Set),t=m.useCallback(n=>(e.add(n),()=>e.delete(n)),[e]);return[m.useCallback(n=>{let{type:i,event:a}=n;e.forEach(s=>{var o;return(o=s[i])==null?void 0:o.call(s,a)})},[e]),t]}const QL={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ZL={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function e$(e){let{announcements:t=ZL,container:r,hiddenTextDescribedById:n,screenReaderInstructions:i=QL}=e;const{announce:a,announcement:s}=YL(),o=oc("DndLiveRegion"),[l,u]=m.useState(!1);if(m.useEffect(()=>{u(!0)},[]),XL(m.useMemo(()=>({onDragStart(f){let{active:h}=f;a(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:p}=f;t.onDragMove&&a(t.onDragMove({active:h,over:p}))},onDragOver(f){let{active:h,over:p}=f;a(t.onDragOver({active:h,over:p}))},onDragEnd(f){let{active:h,over:p}=f;a(t.onDragEnd({active:h,over:p}))},onDragCancel(f){let{active:h,over:p}=f;a(t.onDragCancel({active:h,over:p}))}}),[a,t])),!l)return null;const d=Ue.createElement(Ue.Fragment,null,Ue.createElement(VL,{id:n,value:i.draggable}),Ue.createElement(GL,{id:o,announcement:s}));return r?Mi.createPortal(d,r):d}var ht;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(ht||(ht={}));function _d(){}function Ay(e,t){return m.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Ty(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return m.useMemo(()=>[...t].filter(n=>n!=null),[...t])}const hn=Object.freeze({x:0,y:0});function T2(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function t$(e,t){const r=wd(e);if(!r)return"0 0";const n={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return n.x+"% "+n.y+"%"}function D2(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function r$(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function n$(e){let{left:t,top:r,height:n,width:i}=e;return[{x:t,y:r},{x:t+i,y:r},{x:t,y:r+n},{x:t+i,y:r+n}]}function i$(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function mw(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const I2=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const i=mw(t,t.left,t.top),a=[];for(const s of n){const{id:o}=s,l=r.get(o);if(l){const u=T2(mw(l),i);a.push({id:o,data:{droppableContainer:s,value:u}})}}return a.sort(D2)};function a$(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),s=i-n,o=a-r;if(n<i&&r<a){const l=t.width*t.height,u=e.width*e.height,d=s*o,f=d/(l+u-d);return Number(f.toFixed(4))}return 0}const s$=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const i=[];for(const a of n){const{id:s}=a,o=r.get(s);if(o){const l=a$(o,t);l>0&&i.push({id:s,data:{droppableContainer:a,value:l}})}}return i.sort(r$)};function o$(e,t){const{top:r,left:n,bottom:i,right:a}=t;return r<=e.y&&e.y<=i&&n<=e.x&&e.x<=a}const l$=e=>{let{droppableContainers:t,droppableRects:r,pointerCoordinates:n}=e;if(!n)return[];const i=[];for(const a of t){const{id:s}=a,o=r.get(s);if(o&&o$(n,o)){const u=n$(o).reduce((f,h)=>f+T2(n,h),0),d=Number((u/4).toFixed(4));i.push({id:s,data:{droppableContainer:a,value:d}})}}return i.sort(D2)};function c$(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function R2(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:hn}function u$(e){return function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return i.reduce((s,o)=>({...s,top:s.top+e*o.y,bottom:s.bottom+e*o.y,left:s.left+e*o.x,right:s.right+e*o.x}),{...r})}}const d$=u$(1);function M2(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function f$(e,t,r){const n=M2(t);if(!n)return e;const{scaleX:i,scaleY:a,x:s,y:o}=n,l=e.left-s-(1-i)*parseFloat(r),u=e.top-o-(1-a)*parseFloat(r.slice(r.indexOf(" ")+1)),d=i?e.width/i:e.width,f=a?e.height/a:e.height;return{width:d,height:f,top:u,right:l+d,bottom:u+f,left:l}}const h$={ignoreTransform:!1};function uo(e,t){t===void 0&&(t=h$);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=tr(e).getComputedStyle(e);u&&(r=f$(r,u,d))}const{top:n,left:i,width:a,height:s,bottom:o,right:l}=r;return{top:n,left:i,width:a,height:s,bottom:o,right:l}}function gw(e){return uo(e,{ignoreTransform:!0})}function p$(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function m$(e,t){return t===void 0&&(t=tr(e).getComputedStyle(e)),t.position==="fixed"}function g$(e,t){t===void 0&&(t=tr(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=t[i];return typeof a=="string"?r.test(a):!1})}function Dy(e,t){const r=[];function n(i){if(t!=null&&r.length>=t||!i)return r;if(Oy(i)&&i.scrollingElement!=null&&!r.includes(i.scrollingElement))return r.push(i.scrollingElement),r;if(!ac(i)||P2(i)||r.includes(i))return r;const a=tr(e).getComputedStyle(i);return i!==e&&g$(i,a)&&r.push(i),m$(i,a)?r:n(i.parentNode)}return e?n(e):r}function L2(e){const[t]=Dy(e,1);return t??null}function Dp(e){return!Bf||!e?null:lo(e)?e:Py(e)?Oy(e)||e===co(e).scrollingElement?window:ac(e)?e:null:null}function $2(e){return lo(e)?e.scrollX:e.scrollLeft}function F2(e){return lo(e)?e.scrollY:e.scrollTop}function yg(e){return{x:$2(e),y:F2(e)}}var St;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(St||(St={}));function B2(e){return!Bf||!e?!1:e===document.scrollingElement}function U2(e){const t={x:0,y:0},r=B2(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},i=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,s=e.scrollTop>=n.y,o=e.scrollLeft>=n.x;return{isTop:i,isLeft:a,isBottom:s,isRight:o,maxScroll:n,minScroll:t}}const v$={x:.2,y:.2};function y$(e,t,r,n,i){let{top:a,left:s,right:o,bottom:l}=r;n===void 0&&(n=10),i===void 0&&(i=v$);const{isTop:u,isBottom:d,isLeft:f,isRight:h}=U2(e),p={x:0,y:0},g={x:0,y:0},v={height:t.height*i.y,width:t.width*i.x};return!u&&a<=t.top+v.height?(p.y=St.Backward,g.y=n*Math.abs((t.top+v.height-a)/v.height)):!d&&l>=t.bottom-v.height&&(p.y=St.Forward,g.y=n*Math.abs((t.bottom-v.height-l)/v.height)),!h&&o>=t.right-v.width?(p.x=St.Forward,g.x=n*Math.abs((t.right-v.width-o)/v.width)):!f&&s<=t.left+v.width&&(p.x=St.Backward,g.x=n*Math.abs((t.left+v.width-s)/v.width)),{direction:p,speed:g}}function x$(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:s}=window;return{top:0,left:0,right:a,bottom:s,width:a,height:s}}const{top:t,left:r,right:n,bottom:i}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:i,width:e.clientWidth,height:e.clientHeight}}function z2(e){return e.reduce((t,r)=>As(t,yg(r)),hn)}function b$(e){return e.reduce((t,r)=>t+$2(r),0)}function w$(e){return e.reduce((t,r)=>t+F2(r),0)}function W2(e,t){if(t===void 0&&(t=uo),!e)return;const{top:r,left:n,bottom:i,right:a}=t(e);L2(e)&&(i<=0||a<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const _$=[["x",["left","right"],b$],["y",["top","bottom"],w$]];class Iy{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=Dy(r),i=z2(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,s,o]of _$)for(const l of s)Object.defineProperty(this,l,{get:()=>{const u=o(n),d=i[a]-u;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class cl{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=t}add(t,r,n){var i;(i=this.target)==null||i.addEventListener(t,r,n),this.listeners.push([t,r,n])}}function j$(e){const{EventTarget:t}=tr(e);return e instanceof t?e:co(e)}function Ip(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t?n>t.y:!1}var Lr;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Lr||(Lr={}));function vw(e){e.preventDefault()}function S$(e){e.stopPropagation()}var Ee;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Ee||(Ee={}));const K2={start:[Ee.Space,Ee.Enter],cancel:[Ee.Esc],end:[Ee.Space,Ee.Enter,Ee.Tab]},k$=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case Ee.Right:return{...r,x:r.x+25};case Ee.Left:return{...r,x:r.x-25};case Ee.Down:return{...r,y:r.y+25};case Ee.Up:return{...r,y:r.y-25}}};class H2{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new cl(co(r)),this.windowListeners=new cl(tr(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Lr.Resize,this.handleCancel),this.windowListeners.add(Lr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Lr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,n=t.node.current;n&&W2(n),r(hn)}handleKeyDown(t){if(zf(t)){const{active:r,context:n,options:i}=this.props,{keyboardCodes:a=K2,coordinateGetter:s=k$,scrollBehavior:o="smooth"}=i,{code:l}=t;if(a.end.includes(l)){this.handleEnd(t);return}if(a.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:u}=n.current,d=u?{x:u.left,y:u.top}:hn;this.referenceCoordinates||(this.referenceCoordinates=d);const f=s(t,{active:r,context:n.current,currentCoordinates:d});if(f){const h=bd(f,d),p={x:0,y:0},{scrollableAncestors:g}=n.current;for(const v of g){const y=t.code,{isTop:x,isRight:w,isLeft:b,isBottom:_,maxScroll:j,minScroll:S}=U2(v),k=x$(v),N={x:Math.min(y===Ee.Right?k.right-k.width/2:k.right,Math.max(y===Ee.Right?k.left:k.left+k.width/2,f.x)),y:Math.min(y===Ee.Down?k.bottom-k.height/2:k.bottom,Math.max(y===Ee.Down?k.top:k.top+k.height/2,f.y))},C=y===Ee.Right&&!w||y===Ee.Left&&!b,E=y===Ee.Down&&!_||y===Ee.Up&&!x;if(C&&N.x!==f.x){const P=v.scrollLeft+h.x,I=y===Ee.Right&&P<=j.x||y===Ee.Left&&P>=S.x;if(I&&!h.y){v.scrollTo({left:P,behavior:o});return}I?p.x=v.scrollLeft-P:p.x=y===Ee.Right?v.scrollLeft-j.x:v.scrollLeft-S.x,p.x&&v.scrollBy({left:-p.x,behavior:o});break}else if(E&&N.y!==f.y){const P=v.scrollTop+h.y,I=y===Ee.Down&&P<=j.y||y===Ee.Up&&P>=S.y;if(I&&!h.x){v.scrollTo({top:P,behavior:o});return}I?p.y=v.scrollTop-P:p.y=y===Ee.Down?v.scrollTop-j.y:v.scrollTop-S.y,p.y&&v.scrollBy({top:-p.y,behavior:o});break}}this.handleMove(t,As(bd(f,this.referenceCoordinates),p))}}}handleMove(t,r){const{onMove:n}=this.props;t.preventDefault(),n(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}H2.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=K2,onActivation:i}=t,{active:a}=r;const{code:s}=e.nativeEvent;if(n.start.includes(s)){const o=a.activatorNode.current;return o&&e.target!==o?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function yw(e){return!!(e&&"distance"in e)}function xw(e){return!!(e&&"delay"in e)}class Ry{constructor(t,r,n){var i;n===void 0&&(n=j$(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:a}=t,{target:s}=a;this.props=t,this.events=r,this.document=co(s),this.documentListeners=new cl(this.document),this.listeners=new cl(n),this.windowListeners=new cl(tr(s)),this.initialCoordinates=(i=wd(a))!=null?i:hn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Lr.Resize,this.handleCancel),this.windowListeners.add(Lr.DragStart,vw),this.windowListeners.add(Lr.VisibilityChange,this.handleCancel),this.windowListeners.add(Lr.ContextMenu,vw),this.documentListeners.add(Lr.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(xw(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(yw(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:n,onPending:i}=this.props;i(n,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(Lr.Click,S$,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Lr.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:n,initialCoordinates:i,props:a}=this,{onMove:s,options:{activationConstraint:o}}=a;if(!i)return;const l=(r=wd(t))!=null?r:hn,u=bd(i,l);if(!n&&o){if(yw(o)){if(o.tolerance!=null&&Ip(u,o.tolerance))return this.handleCancel();if(Ip(u,o.distance))return this.handleStart()}if(xw(o)&&Ip(u,o.tolerance))return this.handleCancel();this.handlePending(o,u);return}t.cancelable&&t.preventDefault(),s(l)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===Ee.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const N$={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class lc extends Ry{constructor(t){const{event:r}=t,n=co(r.target);super(t,N$,n)}}lc.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const E$={move:{name:"mousemove"},end:{name:"mouseup"}};var xg;(function(e){e[e.RightClick=2]="RightClick"})(xg||(xg={}));class C$ extends Ry{constructor(t){super(t,E$,co(t.event.target))}}C$.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button===xg.RightClick?!1:(n==null||n({event:r}),!0)}}];const Rp={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class P$ extends Ry{constructor(t){super(t,Rp)}static setup(){return window.addEventListener(Rp.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Rp.move.name,t)};function t(){}}}P$.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:i}=r;return i.length>1?!1:(n==null||n({event:r}),!0)}}];var ul;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(ul||(ul={}));var jd;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(jd||(jd={}));function O$(e){let{acceleration:t,activator:r=ul.Pointer,canScroll:n,draggingRect:i,enabled:a,interval:s=5,order:o=jd.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:h}=e;const p=T$({delta:f,disabled:!a}),[g,v]=zL(),y=m.useRef({x:0,y:0}),x=m.useRef({x:0,y:0}),w=m.useMemo(()=>{switch(r){case ul.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case ul.DraggableRect:return i}},[r,i,l]),b=m.useRef(null),_=m.useCallback(()=>{const S=b.current;if(!S)return;const k=y.current.x*x.current.x,N=y.current.y*x.current.y;S.scrollBy(k,N)},[]),j=m.useMemo(()=>o===jd.TreeOrder?[...u].reverse():u,[o,u]);m.useEffect(()=>{if(!a||!u.length||!w){v();return}for(const S of j){if((n==null?void 0:n(S))===!1)continue;const k=u.indexOf(S),N=d[k];if(!N)continue;const{direction:C,speed:E}=y$(S,N,w,t,h);for(const P of["x","y"])p[P][C[P]]||(E[P]=0,C[P]=0);if(E.x>0||E.y>0){v(),b.current=S,g(_,s),y.current=E,x.current=C;return}}y.current={x:0,y:0},x.current={x:0,y:0},v()},[t,_,n,v,a,s,JSON.stringify(w),JSON.stringify(p),g,u,j,d,JSON.stringify(h)])}const A$={x:{[St.Backward]:!1,[St.Forward]:!1},y:{[St.Backward]:!1,[St.Forward]:!1}};function T$(e){let{delta:t,disabled:r}=e;const n=xd(t);return sc(i=>{if(r||!n||!i)return A$;const a={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[St.Backward]:i.x[St.Backward]||a.x===-1,[St.Forward]:i.x[St.Forward]||a.x===1},y:{[St.Backward]:i.y[St.Backward]||a.y===-1,[St.Forward]:i.y[St.Forward]||a.y===1}}},[r,t,n])}function D$(e,t){const r=t!=null?e.get(t):void 0,n=r?r.node.current:null;return sc(i=>{var a;return t==null?null:(a=n??i)!=null?a:null},[n,t])}function I$(e,t){return m.useMemo(()=>e.reduce((r,n)=>{const{sensor:i}=n,a=i.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,n)}));return[...r,...a]},[]),[e,t])}var Ll;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ll||(Ll={}));var bg;(function(e){e.Optimized="optimized"})(bg||(bg={}));const bw=new Map;function R$(e,t){let{dragging:r,dependencies:n,config:i}=t;const[a,s]=m.useState(null),{frequency:o,measure:l,strategy:u}=i,d=m.useRef(e),f=y(),h=Ml(f),p=m.useCallback(function(x){x===void 0&&(x=[]),!h.current&&s(w=>w===null?x:w.concat(x.filter(b=>!w.includes(b))))},[h]),g=m.useRef(null),v=sc(x=>{if(f&&!r)return bw;if(!x||x===bw||d.current!==e||a!=null){const w=new Map;for(let b of e){if(!b)continue;if(a&&a.length>0&&!a.includes(b.id)&&b.rect.current){w.set(b.id,b.rect.current);continue}const _=b.node.current,j=_?new Iy(l(_),_):null;b.rect.current=j,j&&w.set(b.id,j)}return w}return x},[e,a,r,f,l]);return m.useEffect(()=>{d.current=e},[e]),m.useEffect(()=>{f||p()},[r,f]),m.useEffect(()=>{a&&a.length>0&&s(null)},[JSON.stringify(a)]),m.useEffect(()=>{f||typeof o!="number"||g.current!==null||(g.current=setTimeout(()=>{p(),g.current=null},o))},[o,f,p,...n]),{droppableRects:v,measureDroppableContainers:p,measuringScheduled:a!=null};function y(){switch(u){case Ll.Always:return!1;case Ll.BeforeDragging:return r;default:return!r}}}function My(e,t){return sc(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function M$(e,t){return My(e,t)}function L$(e){let{callback:t,disabled:r}=e;const n=Uf(t),i=m.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(n)},[n,r]);return m.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Wf(e){let{callback:t,disabled:r}=e;const n=Uf(t),i=m.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(n)},[r]);return m.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function $$(e){return new Iy(uo(e),e)}function ww(e,t,r){t===void 0&&(t=$$);const[n,i]=m.useState(null);function a(){i(l=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=l??r)!=null?u:null}const d=t(e);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const s=L$({callback(l){if(e)for(const u of l){const{type:d,target:f}=u;if(d==="childList"&&f instanceof HTMLElement&&f.contains(e)){a();break}}}}),o=Wf({callback:a});return fn(()=>{a(),e?(o==null||o.observe(e),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),s==null||s.disconnect())},[e]),n}function F$(e){const t=My(e);return R2(e,t)}const _w=[];function B$(e){const t=m.useRef(e),r=sc(n=>e?n&&n!==_w&&e&&t.current&&e.parentNode===t.current.parentNode?n:Dy(e):_w,[e]);return m.useEffect(()=>{t.current=e},[e]),r}function U$(e){const[t,r]=m.useState(null),n=m.useRef(e),i=m.useCallback(a=>{const s=Dp(a.target);s&&r(o=>o?(o.set(s,yg(s)),new Map(o)):null)},[]);return m.useEffect(()=>{const a=n.current;if(e!==a){s(a);const o=e.map(l=>{const u=Dp(l);return u?(u.addEventListener("scroll",i,{passive:!0}),[u,yg(u)]):null}).filter(l=>l!=null);r(o.length?new Map(o):null),n.current=e}return()=>{s(e),s(a)};function s(o){o.forEach(l=>{const u=Dp(l);u==null||u.removeEventListener("scroll",i)})}},[i,e]),m.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,s)=>As(a,s),hn):z2(e):hn,[e,t])}function jw(e,t){t===void 0&&(t=[]);const r=m.useRef(null);return m.useEffect(()=>{r.current=null},t),m.useEffect(()=>{const n=e!==hn;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?bd(e,r.current):hn}function z$(e){m.useEffect(()=>{if(!Bf)return;const t=e.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function W$(e,t){return m.useMemo(()=>e.reduce((r,n)=>{let{eventName:i,handler:a}=n;return r[i]=s=>{a(s,t)},r},{}),[e,t])}function q2(e){return m.useMemo(()=>e?p$(e):null,[e])}const Sw=[];function K$(e,t){t===void 0&&(t=uo);const[r]=e,n=q2(r?tr(r):null),[i,a]=m.useState(Sw);function s(){a(()=>e.length?e.map(l=>B2(l)?n:new Iy(t(l),l)):Sw)}const o=Wf({callback:s});return fn(()=>{o==null||o.disconnect(),s(),e.forEach(l=>o==null?void 0:o.observe(l))},[e]),i}function V2(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return ac(t)?t:e}function H$(e){let{measure:t}=e;const[r,n]=m.useState(null),i=m.useCallback(u=>{for(const{target:d}of u)if(ac(d)){n(f=>{const h=t(d);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),a=Wf({callback:i}),s=m.useCallback(u=>{const d=V2(u);a==null||a.disconnect(),d&&(a==null||a.observe(d)),n(d?t(d):null)},[t,a]),[o,l]=yd(s);return m.useMemo(()=>({nodeRef:o,rect:r,setRef:l}),[r,o,l])}const q$=[{sensor:lc,options:{}},{sensor:H2,options:{}}],V$={current:{}},Mu={draggable:{measure:gw},droppable:{measure:gw,strategy:Ll.WhileDragging,frequency:bg.Optimized},dragOverlay:{measure:uo}};class dl extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,n;return(r=(n=this.get(t))==null?void 0:n.node.current)!=null?r:void 0}}const G$={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new dl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:_d},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Mu,measureDroppableContainers:_d,windowRect:null,measuringScheduled:!1},G2={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:_d,draggableNodes:new Map,over:null,measureDroppableContainers:_d},cc=m.createContext(G2),Y2=m.createContext(G$);function Y$(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new dl}}}function X$(e,t){switch(t.type){case ht.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case ht.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case ht.DragEnd:case ht.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ht.RegisterDroppable:{const{element:r}=t,{id:n}=r,i=new dl(e.droppable.containers);return i.set(n,r),{...e,droppable:{...e.droppable,containers:i}}}case ht.SetDroppableDisabled:{const{id:r,key:n,disabled:i}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;const s=new dl(e.droppable.containers);return s.set(r,{...a,disabled:i}),{...e,droppable:{...e.droppable,containers:s}}}case ht.UnregisterDroppable:{const{id:r,key:n}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;const a=new dl(e.droppable.containers);return a.delete(r),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function J$(e){let{disabled:t}=e;const{active:r,activatorEvent:n,draggableNodes:i}=m.useContext(cc),a=xd(n),s=xd(r==null?void 0:r.id);return m.useEffect(()=>{if(!t&&!n&&a&&s!=null){if(!zf(a)||document.activeElement===a.target)return;const o=i.get(s);if(!o)return;const{activatorNode:l,node:u}=o;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[l.current,u.current]){if(!d)continue;const f=HL(d);if(f){f.focus();break}}})}},[n,t,i,s,a]),null}function X2(e,t){let{transform:r,...n}=t;return e!=null&&e.length?e.reduce((i,a)=>a({transform:i,...n}),r):r}function Q$(e){return m.useMemo(()=>({draggable:{...Mu.draggable,...e==null?void 0:e.draggable},droppable:{...Mu.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Mu.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Z$(e){let{activeNode:t,measure:r,initialRect:n,config:i=!0}=e;const a=m.useRef(!1),{x:s,y:o}=typeof i=="boolean"?{x:i,y:i}:i;fn(()=>{if(!s&&!o||!t){a.current=!1;return}if(a.current||!n)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=r(u),f=R2(d,n);if(s||(f.x=0),o||(f.y=0),a.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=L2(u);h&&h.scrollBy({top:f.y,left:f.x})}},[t,s,o,n,r])}const Kf=m.createContext({...hn,scaleX:1,scaleY:1});var Ei;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ei||(Ei={}));const Ly=m.memo(function(t){var r,n,i,a;let{id:s,accessibility:o,autoScroll:l=!0,children:u,sensors:d=q$,collisionDetection:f=s$,measuring:h,modifiers:p,...g}=t;const v=m.useReducer(X$,void 0,Y$),[y,x]=v,[w,b]=JL(),[_,j]=m.useState(Ei.Uninitialized),S=_===Ei.Initialized,{draggable:{active:k,nodes:N,translate:C},droppable:{containers:E}}=y,P=k!=null?N.get(k):null,I=m.useRef({initial:null,translated:null}),W=m.useMemo(()=>{var ct;return k!=null?{id:k,data:(ct=P==null?void 0:P.data)!=null?ct:V$,rect:I}:null},[k,P]),F=m.useRef(null),[K,U]=m.useState(null),[H,R]=m.useState(null),B=Ml(g,Object.values(g)),G=oc("DndDescribedBy",s),ae=m.useMemo(()=>E.getEnabled(),[E]),Q=Q$(h),{droppableRects:ge,measureDroppableContainers:A,measuringScheduled:J}=R$(ae,{dragging:S,dependencies:[C.x,C.y],config:Q.droppable}),re=D$(N,k),he=m.useMemo(()=>H?wd(H):null,[H]),_e=Cc(),O=M$(re,Q.draggable.measure);Z$({activeNode:k!=null?N.get(k):null,config:_e.layoutShiftCompensation,initialRect:O,measure:Q.draggable.measure});const L=ww(re,Q.draggable.measure,O),Y=ww(re?re.parentElement:null),M=m.useRef({activatorEvent:null,active:null,activeNode:re,collisionRect:null,collisions:null,droppableRects:ge,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:E,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Se=E.getNodeFor((r=M.current.over)==null?void 0:r.id),D=H$({measure:Q.dragOverlay.measure}),ce=(n=D.nodeRef.current)!=null?n:re,ve=S?(i=D.rect)!=null?i:L:null,q=!!(D.nodeRef.current&&D.rect),xe=F$(q?null:L),$=q2(ce?tr(ce):null),V=B$(S?Se??re:null),Z=K$(V),le=X2(p,{transform:{x:C.x-xe.x,y:C.y-xe.y,scaleX:1,scaleY:1},activatorEvent:H,active:W,activeNodeRect:L,containerNodeRect:Y,draggingNodeRect:ve,over:M.current.over,overlayNodeRect:D.rect,scrollableAncestors:V,scrollableAncestorRects:Z,windowRect:$}),fe=he?As(he,C):null,ue=U$(V),we=jw(ue),Je=jw(ue,[L]),be=As(le,we),me=ve?d$(ve,le):null,ye=W&&me?f({active:W,collisionRect:me,droppableRects:ge,droppableContainers:ae,pointerCoordinates:fe}):null,lt=i$(ye,"id"),[Te,Ot]=m.useState(null),Jr=q?le:As(le,Je),Rn=c$(Jr,(a=Te==null?void 0:Te.rect)!=null?a:null,L),xi=m.useRef(null),Mn=m.useCallback((ct,ir)=>{let{sensor:At,options:Qr}=ir;if(F.current==null)return;const qt=N.get(F.current);if(!qt)return;const wt=ct.nativeEvent,Zr=new At({active:F.current,activeNode:qt,event:wt,options:Qr,context:M,onAbort(Tt){if(!N.get(Tt))return;const{onDragAbort:bn}=B.current,$n={id:Tt};bn==null||bn($n),w({type:"onDragAbort",event:$n})},onPending(Tt,wi,bn,$n){if(!N.get(Tt))return;const{onDragPending:jo}=B.current,_i={id:Tt,constraint:wi,initialCoordinates:bn,offset:$n};jo==null||jo(_i),w({type:"onDragPending",event:_i})},onStart(Tt){const wi=F.current;if(wi==null)return;const bn=N.get(wi);if(!bn)return;const{onDragStart:$n}=B.current,_o={activatorEvent:wt,active:{id:wi,data:bn.data,rect:I}};Mi.unstable_batchedUpdates(()=>{$n==null||$n(_o),j(Ei.Initializing),x({type:ht.DragStart,initialCoordinates:Tt,active:wi}),w({type:"onDragStart",event:_o}),U(xi.current),R(wt)})},onMove(Tt){x({type:ht.DragMove,coordinates:Tt})},onEnd:xn(ht.DragEnd),onCancel:xn(ht.DragCancel)});xi.current=Zr;function xn(Tt){return async function(){const{active:bn,collisions:$n,over:_o,scrollAdjustedTranslate:jo}=M.current;let _i=null;if(bn&&jo){const{cancelDrop:So}=B.current;_i={activatorEvent:wt,active:bn,collisions:$n,delta:jo,over:_o},Tt===ht.DragEnd&&typeof So=="function"&&await Promise.resolve(So(_i))&&(Tt=ht.DragCancel)}F.current=null,Mi.unstable_batchedUpdates(()=>{x({type:Tt}),j(Ei.Uninitialized),Ot(null),U(null),R(null),xi.current=null;const So=Tt===ht.DragEnd?"onDragEnd":"onDragCancel";if(_i){const qh=B.current[So];qh==null||qh(_i),w({type:So,event:_i})}})}}},[N]),wo=m.useCallback((ct,ir)=>(At,Qr)=>{const qt=At.nativeEvent,wt=N.get(Qr);if(F.current!==null||!wt||qt.dndKit||qt.defaultPrevented)return;const Zr={active:wt};ct(At,ir.options,Zr)===!0&&(qt.dndKit={capturedBy:ir.sensor},F.current=Qr,Mn(At,ir))},[N,Mn]),qe=I$(d,wo);z$(d),fn(()=>{L&&_===Ei.Initializing&&j(Ei.Initialized)},[L,_]),m.useEffect(()=>{const{onDragMove:ct}=B.current,{active:ir,activatorEvent:At,collisions:Qr,over:qt}=M.current;if(!ir||!At)return;const wt={active:ir,activatorEvent:At,collisions:Qr,delta:{x:be.x,y:be.y},over:qt};Mi.unstable_batchedUpdates(()=>{ct==null||ct(wt),w({type:"onDragMove",event:wt})})},[be.x,be.y]),m.useEffect(()=>{const{active:ct,activatorEvent:ir,collisions:At,droppableContainers:Qr,scrollAdjustedTranslate:qt}=M.current;if(!ct||F.current==null||!ir||!qt)return;const{onDragOver:wt}=B.current,Zr=Qr.get(lt),xn=Zr&&Zr.rect.current?{id:Zr.id,rect:Zr.rect.current,data:Zr.data,disabled:Zr.disabled}:null,Tt={active:ct,activatorEvent:ir,collisions:At,delta:{x:qt.x,y:qt.y},over:xn};Mi.unstable_batchedUpdates(()=>{Ot(xn),wt==null||wt(Tt),w({type:"onDragOver",event:Tt})})},[lt]),fn(()=>{M.current={activatorEvent:H,active:W,activeNode:re,collisionRect:me,collisions:ye,droppableRects:ge,draggableNodes:N,draggingNode:ce,draggingNodeRect:ve,droppableContainers:E,over:Te,scrollableAncestors:V,scrollAdjustedTranslate:be},I.current={initial:ve,translated:me}},[W,re,ye,me,N,ce,ve,ge,E,Te,V,be]),O$({..._e,delta:C,draggingRect:me,pointerCoordinates:fe,scrollableAncestors:V,scrollableAncestorRects:Z});const bi=m.useMemo(()=>({active:W,activeNode:re,activeNodeRect:L,activatorEvent:H,collisions:ye,containerNodeRect:Y,dragOverlay:D,draggableNodes:N,droppableContainers:E,droppableRects:ge,over:Te,measureDroppableContainers:A,scrollableAncestors:V,scrollableAncestorRects:Z,measuringConfiguration:Q,measuringScheduled:J,windowRect:$}),[W,re,L,H,ye,Y,D,N,E,ge,Te,A,V,Z,Q,J,$]),Ln=m.useMemo(()=>({activatorEvent:H,activators:qe,active:W,activeNodeRect:L,ariaDescribedById:{draggable:G},dispatch:x,draggableNodes:N,over:Te,measureDroppableContainers:A}),[H,qe,W,L,x,G,N,Te,A]);return Ue.createElement(A2.Provider,{value:b},Ue.createElement(cc.Provider,{value:Ln},Ue.createElement(Y2.Provider,{value:bi},Ue.createElement(Kf.Provider,{value:Rn},u)),Ue.createElement(J$,{disabled:(o==null?void 0:o.restoreFocus)===!1})),Ue.createElement(e$,{...o,hiddenTextDescribedById:G}));function Cc(){const ct=(K==null?void 0:K.autoScrollEnabled)===!1,ir=typeof l=="object"?l.enabled===!1:l===!1,At=S&&!ct&&!ir;return typeof l=="object"?{...l,enabled:At}:{enabled:At}}}),e3=m.createContext(null),kw="button",t3="Draggable";function r3(e){let{id:t,data:r,disabled:n=!1,attributes:i}=e;const a=oc(t3),{activators:s,activatorEvent:o,active:l,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:h}=m.useContext(cc),{role:p=kw,roleDescription:g="draggable",tabIndex:v=0}=i??{},y=(l==null?void 0:l.id)===t,x=m.useContext(y?Kf:e3),[w,b]=yd(),[_,j]=yd(),S=W$(s,t),k=Ml(r);fn(()=>(f.set(t,{id:t,key:a,node:w,activatorNode:_,data:k}),()=>{const C=f.get(t);C&&C.key===a&&f.delete(t)}),[f,t]);const N=m.useMemo(()=>({role:p,tabIndex:v,"aria-disabled":n,"aria-pressed":y&&p===kw?!0:void 0,"aria-roledescription":g,"aria-describedby":d.draggable}),[n,p,v,y,g,d.draggable]);return{active:l,activatorEvent:o,activeNodeRect:u,attributes:N,isDragging:y,listeners:n?void 0:S,node:w,over:h,setNodeRef:b,setActivatorNodeRef:j,transform:x}}function J2(){return m.useContext(Y2)}const n3="Droppable",i3={timeout:25};function Q2(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:i}=e;const a=oc(n3),{active:s,dispatch:o,over:l,measureDroppableContainers:u}=m.useContext(cc),d=m.useRef({disabled:r}),f=m.useRef(!1),h=m.useRef(null),p=m.useRef(null),{disabled:g,updateMeasurementsFor:v,timeout:y}={...i3,...i},x=Ml(v??n),w=m.useCallback(()=>{if(!f.current){f.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),p.current=null},y)},[y]),b=Wf({callback:w,disabled:g||!s}),_=m.useCallback((N,C)=>{b&&(C&&(b.unobserve(C),f.current=!1),N&&b.observe(N))},[b]),[j,S]=yd(_),k=Ml(t);return m.useEffect(()=>{!b||!j.current||(b.disconnect(),f.current=!1,b.observe(j.current))},[j,b]),m.useEffect(()=>(o({type:ht.RegisterDroppable,element:{id:n,key:a,disabled:r,node:j,rect:h,data:k}}),()=>o({type:ht.UnregisterDroppable,key:a,id:n})),[n]),m.useEffect(()=>{r!==d.current.disabled&&(o({type:ht.SetDroppableDisabled,id:n,key:a,disabled:r}),d.current.disabled=r)},[n,a,r,o]),{active:s,rect:h,isOver:(l==null?void 0:l.id)===n,node:j,over:l,setNodeRef:S}}function a3(e){let{animation:t,children:r}=e;const[n,i]=m.useState(null),[a,s]=m.useState(null),o=xd(r);return!r&&!n&&o&&i(o),fn(()=>{if(!a)return;const l=n==null?void 0:n.key,u=n==null?void 0:n.props.id;if(l==null||u==null){i(null);return}Promise.resolve(t(u,a)).then(()=>{i(null)})},[t,n,a]),Ue.createElement(Ue.Fragment,null,r,n?m.cloneElement(n,{ref:s}):null)}const s3={x:0,y:0,scaleX:1,scaleY:1};function o3(e){let{children:t}=e;return Ue.createElement(cc.Provider,{value:G2},Ue.createElement(Kf.Provider,{value:s3},t))}const l3={position:"fixed",touchAction:"none"},c3=e=>zf(e)?"transform 250ms ease":void 0,u3=m.forwardRef((e,t)=>{let{as:r,activatorEvent:n,adjustScale:i,children:a,className:s,rect:o,style:l,transform:u,transition:d=c3}=e;if(!o)return null;const f=i?u:{...u,scaleX:1,scaleY:1},h={...l3,width:o.width,height:o.height,top:o.top,left:o.left,transform:Pn.Transform.toString(f),transformOrigin:i&&n?t$(n,o):void 0,transition:typeof d=="function"?d(n):d,...l};return Ue.createElement(r,{className:s,style:h,ref:t},a)}),d3=e=>t=>{let{active:r,dragOverlay:n}=t;const i={},{styles:a,className:s}=e;if(a!=null&&a.active)for(const[o,l]of Object.entries(a.active))l!==void 0&&(i[o]=r.node.style.getPropertyValue(o),r.node.style.setProperty(o,l));if(a!=null&&a.dragOverlay)for(const[o,l]of Object.entries(a.dragOverlay))l!==void 0&&n.node.style.setProperty(o,l);return s!=null&&s.active&&r.node.classList.add(s.active),s!=null&&s.dragOverlay&&n.node.classList.add(s.dragOverlay),function(){for(const[l,u]of Object.entries(i))r.node.style.setProperty(l,u);s!=null&&s.active&&r.node.classList.remove(s.active)}},f3=e=>{let{transform:{initial:t,final:r}}=e;return[{transform:Pn.Transform.toString(t)},{transform:Pn.Transform.toString(r)}]},h3={duration:250,easing:"ease",keyframes:f3,sideEffects:d3({styles:{active:{opacity:"0"}}})};function p3(e){let{config:t,draggableNodes:r,droppableContainers:n,measuringConfiguration:i}=e;return Uf((a,s)=>{if(t===null)return;const o=r.get(a);if(!o)return;const l=o.node.current;if(!l)return;const u=V2(s);if(!u)return;const{transform:d}=tr(s).getComputedStyle(s),f=M2(d);if(!f)return;const h=typeof t=="function"?t:m3(t);return W2(l,i.draggable.measure),h({active:{id:a,data:o.data,node:l,rect:i.draggable.measure(l)},draggableNodes:r,dragOverlay:{node:s,rect:i.dragOverlay.measure(u)},droppableContainers:n,measuringConfiguration:i,transform:f})})}function m3(e){const{duration:t,easing:r,sideEffects:n,keyframes:i}={...h3,...e};return a=>{let{active:s,dragOverlay:o,transform:l,...u}=a;if(!t)return;const d={x:o.rect.left-s.rect.left,y:o.rect.top-s.rect.top},f={scaleX:l.scaleX!==1?s.rect.width*l.scaleX/o.rect.width:1,scaleY:l.scaleY!==1?s.rect.height*l.scaleY/o.rect.height:1},h={x:l.x-d.x,y:l.y-d.y,...f},p=i({...u,active:s,dragOverlay:o,transform:{initial:l,final:h}}),[g]=p,v=p[p.length-1];if(JSON.stringify(g)===JSON.stringify(v))return;const y=n==null?void 0:n({active:s,dragOverlay:o,...u}),x=o.node.animate(p,{duration:t,easing:r,fill:"forwards"});return new Promise(w=>{x.onfinish=()=>{y==null||y(),w()}})}}let Nw=0;function g3(e){return m.useMemo(()=>{if(e!=null)return Nw++,Nw},[e])}const v3=Ue.memo(e=>{let{adjustScale:t=!1,children:r,dropAnimation:n,style:i,transition:a,modifiers:s,wrapperElement:o="div",className:l,zIndex:u=999}=e;const{activatorEvent:d,active:f,activeNodeRect:h,containerNodeRect:p,draggableNodes:g,droppableContainers:v,dragOverlay:y,over:x,measuringConfiguration:w,scrollableAncestors:b,scrollableAncestorRects:_,windowRect:j}=J2(),S=m.useContext(Kf),k=g3(f==null?void 0:f.id),N=X2(s,{activatorEvent:d,active:f,activeNodeRect:h,containerNodeRect:p,draggingNodeRect:y.rect,over:x,overlayNodeRect:y.rect,scrollableAncestors:b,scrollableAncestorRects:_,transform:S,windowRect:j}),C=My(h),E=p3({config:n,draggableNodes:g,droppableContainers:v,measuringConfiguration:w}),P=C?y.setRef:void 0;return Ue.createElement(o3,null,Ue.createElement(a3,{animation:E},f&&k?Ue.createElement(u3,{key:k,id:f.id,ref:P,as:o,activatorEvent:d,adjustScale:t,className:l,transition:a,rect:C,style:{zIndex:u,...i},transform:N},r):null))});function $y(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function y3(e,t){return e.reduce((r,n,i)=>{const a=t.get(n);return a&&(r[i]=a),r},Array(e.length))}function ru(e){return e!==null&&e>=0}function x3(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function b3(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Fy=e=>{let{rects:t,activeIndex:r,overIndex:n,index:i}=e;const a=$y(t,n,r),s=t[i],o=a[i];return!o||!s?null:{x:o.left-s.left,y:o.top-s.top,scaleX:o.width/s.width,scaleY:o.height/s.height}},nu={scaleX:1,scaleY:1},Z2=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:i,rects:a,overIndex:s}=e;const o=(t=a[r])!=null?t:n;if(!o)return null;if(i===r){const u=a[s];return u?{x:0,y:r<s?u.top+u.height-(o.top+o.height):u.top-o.top,...nu}:null}const l=w3(a,i,r);return i>r&&i<=s?{x:0,y:-o.height-l,...nu}:i<r&&i>=s?{x:0,y:o.height+l,...nu}:{x:0,y:0,...nu}};function w3(e,t,r){const n=e[t],i=e[t-1],a=e[t+1];return n?r<t?i?n.top-(i.top+i.height):a?a.top-(n.top+n.height):0:a?a.top-(n.top+n.height):i?n.top-(i.top+i.height):0:0}const eE="Sortable",tE=Ue.createContext({activeIndex:-1,containerId:eE,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Fy,disabled:{draggable:!1,droppable:!1}});function By(e){let{children:t,id:r,items:n,strategy:i=Fy,disabled:a=!1}=e;const{active:s,dragOverlay:o,droppableRects:l,over:u,measureDroppableContainers:d}=J2(),f=oc(eE,r),h=o.rect!==null,p=m.useMemo(()=>n.map(S=>typeof S=="object"&&"id"in S?S.id:S),[n]),g=s!=null,v=s?p.indexOf(s.id):-1,y=u?p.indexOf(u.id):-1,x=m.useRef(p),w=!x3(p,x.current),b=y!==-1&&v===-1||w,_=b3(a);fn(()=>{w&&g&&d(p)},[w,p,g,d]),m.useEffect(()=>{x.current=p},[p]);const j=m.useMemo(()=>({activeIndex:v,containerId:f,disabled:_,disableTransforms:b,items:p,overIndex:y,useDragOverlay:h,sortedRects:y3(p,l),strategy:i}),[v,f,_.draggable,_.droppable,b,p,y,l,h,i]);return Ue.createElement(tE.Provider,{value:j},t)}const _3=e=>{let{id:t,items:r,activeIndex:n,overIndex:i}=e;return $y(r,n,i).indexOf(t)},j3=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:i,items:a,newIndex:s,previousItems:o,previousContainerId:l,transition:u}=e;return!u||!n||o!==a&&i===s?!1:r?!0:s!==i&&t===l},S3={duration:200,easing:"ease"},rE="transform",k3=Pn.Transition.toString({property:rE,duration:0,easing:"linear"}),N3={roleDescription:"sortable"};function E3(e){let{disabled:t,index:r,node:n,rect:i}=e;const[a,s]=m.useState(null),o=m.useRef(r);return fn(()=>{if(!t&&r!==o.current&&n.current){const l=i.current;if(l){const u=uo(n.current,{ignoreTransform:!0}),d={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(d.x||d.y)&&s(d)}}r!==o.current&&(o.current=r)},[t,r,n,i]),m.useEffect(()=>{a&&s(null)},[a]),a}function Uy(e){let{animateLayoutChanges:t=j3,attributes:r,disabled:n,data:i,getNewIndex:a=_3,id:s,strategy:o,resizeObserverConfig:l,transition:u=S3}=e;const{items:d,containerId:f,activeIndex:h,disabled:p,disableTransforms:g,sortedRects:v,overIndex:y,useDragOverlay:x,strategy:w}=m.useContext(tE),b=C3(n,p),_=d.indexOf(s),j=m.useMemo(()=>({sortable:{containerId:f,index:_,items:d},...i}),[f,i,_,d]),S=m.useMemo(()=>d.slice(d.indexOf(s)),[d,s]),{rect:k,node:N,isOver:C,setNodeRef:E}=Q2({id:s,data:j,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...l}}),{active:P,activatorEvent:I,activeNodeRect:W,attributes:F,setNodeRef:K,listeners:U,isDragging:H,over:R,setActivatorNodeRef:B,transform:G}=r3({id:s,data:j,attributes:{...N3,...r},disabled:b.draggable}),ae=UL(E,K),Q=!!P,ge=Q&&!g&&ru(h)&&ru(y),A=!x&&H,J=A&&ge?G:null,he=ge?J??(o??w)({rects:v,activeNodeRect:W,activeIndex:h,overIndex:y,index:_}):null,_e=ru(h)&&ru(y)?a({id:s,items:d,activeIndex:h,overIndex:y}):_,O=P==null?void 0:P.id,L=m.useRef({activeId:O,items:d,newIndex:_e,containerId:f}),Y=d!==L.current.items,M=t({active:P,containerId:f,isDragging:H,isSorting:Q,id:s,index:_,items:d,newIndex:L.current.newIndex,previousItems:L.current.items,previousContainerId:L.current.containerId,transition:u,wasDragging:L.current.activeId!=null}),Se=E3({disabled:!M,index:_,node:N,rect:k});return m.useEffect(()=>{Q&&L.current.newIndex!==_e&&(L.current.newIndex=_e),f!==L.current.containerId&&(L.current.containerId=f),d!==L.current.items&&(L.current.items=d)},[Q,_e,f,d]),m.useEffect(()=>{if(O===L.current.activeId)return;if(O!=null&&L.current.activeId==null){L.current.activeId=O;return}const ce=setTimeout(()=>{L.current.activeId=O},50);return()=>clearTimeout(ce)},[O]),{active:P,activeIndex:h,attributes:F,data:j,rect:k,index:_,newIndex:_e,items:d,isOver:C,isSorting:Q,isDragging:H,listeners:U,node:N,overIndex:y,over:R,setNodeRef:ae,setActivatorNodeRef:B,setDroppableNodeRef:E,setDraggableNodeRef:K,transform:Se??he,transition:D()};function D(){if(Se||Y&&L.current.newIndex===_)return k3;if(!(A&&!zf(I)||!u)&&(Q||M))return Pn.Transition.toString({...u,property:rE})}}function C3(e,t){var r,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(n=e==null?void 0:e.droppable)!=null?n:t.droppable}}Ee.Down,Ee.Right,Ee.Up,Ee.Left;function ar(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function iu(e){return`${(e*100).toFixed(1)}%`}function P3(e){const t=new Date().getHours(),r=t<12?"Good morning":t<18?"Good afternoon":"Good evening",n=["Let's close some deals","Time to crush your goals","Ready to dominate the market","Another day, another opportunity","Let's make it a winning day","Time to turn leads into gold","Your next closing is waiting","Great things happen to closers","Let's build your empire","Success is calling your name","Time to level up your game","Let's make today count"],i=e?e.split(" ")[0]:"",a=i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",s=a?`, ${a}`:"",o=n[Math.floor(Math.random()*n.length)];return`${r}${s}. ${o}!`}function O3(){return new Intl.DateTimeFormat("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}).format(new Date)}function A3(e,t,r){const n=new Date,i=n.getFullYear(),a=n.getMonth(),s=Math.floor(a/3);switch(e){case"this_month":return{start:new Date(i,a,1),end:new Date(i,a+1,0,23,59,59)};case"last_30_days":const o=new Date(n);return o.setDate(o.getDate()-30),{start:o,end:n};case"this_quarter":return{start:new Date(i,s*3,1),end:new Date(i,(s+1)*3,0,23,59,59)};case"ytd":return{start:new Date(i,0,1),end:n};case"custom":return{start:new Date(i,0,1),end:n};default:return{start:new Date(i,0,1),end:n}}}function la(e){const n=(e.actual_sale_price||e.expected_sale_price)*e.gross_commission_rate*(1-e.brokerage_split_rate);return(e.referral_out_rate?n*(1-e.referral_out_rate):n)-e.transaction_fee}function nE(e){const t=new Date(e),n=new Date().getTime()-t.getTime();return Math.floor(n/(1e3*60*60*24))}function Ew(e,t=30){return nE(e)>t}function T3(e){if(!e||!e.startsWith("hsl("))return null;const t=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);return t?{h:parseInt(t[1],10),s:parseInt(t[2],10),l:parseInt(t[3],10)}:null}function D3(e){if(!e||!e.toLowerCase().startsWith("rgb("))return null;const t=e.match(/rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)/i);if(!t)return null;const[r,n,i]=t.slice(1).map(a=>parseInt(a,10));return[r,n,i].some(a=>Number.isNaN(a)||a<0||a>255)?null:{r,g:n,b:i}}function I3(e){if(!e||!e.startsWith("#"))return null;const r=e.trim().match(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i);if(!r)return null;let n=r[1];n.length===3&&(n=n.split("").map(o=>o+o).join(""));const i=parseInt(n.slice(0,2),16),a=parseInt(n.slice(2,4),16),s=parseInt(n.slice(4,6),16);return{r:i,g:a,b:s}}function R3(e){if(!e)return"#ffffff";const t=I3(e);if(t)return(.2126*t.r+.7152*t.g+.0722*t.b)/255>.6?"#000000":"#ffffff";const r=T3(e);if(r)return r.l>60?"#000000":"#ffffff";const n=D3(e);return n&&(.2126*n.r+.7152*n.g+.0722*n.b)/255>.6?"#000000":"#ffffff"}function Hf(e){if(!e)return"hsl(220, 70%, 50%)";const t=e.toLowerCase(),r=e.match(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i);return r?r[0]:t.startsWith("hsl(")||t.startsWith("rgb(")?e:{blue:"hsl(220, 70%, 50%)",cyan:"hsl(190, 65%, 48%)",teal:"hsl(165, 60%, 45%)",green:"hsl(145, 65%, 45%)",lime:"hsl(80, 60%, 50%)",yellow:"hsl(45, 100%, 50%)",orange:"hsl(25, 95%, 55%)",red:"hsl(5, 75%, 55%)",pink:"hsl(340, 70%, 55%)",purple:"hsl(280, 65%, 55%)",violet:"hsl(260, 60%, 55%)",indigo:"hsl(240, 65%, 55%)",slate:"hsl(200, 20%, 50%)",gray:"hsl(0, 0%, 50%)",brown:"hsl(30, 40%, 45%)",amber:"hsl(40, 95%, 50%)",emerald:"hsl(160, 70%, 45%)",sky:"hsl(200, 90%, 50%)",rose:"hsl(350, 80%, 55%)",mint:"hsl(175, 60%, 45%)"}[t]||"hsl(220, 70%, 50%)"}function qf(e){const t=Hf(e),r=R3(t);return{bg:t,text:r}}function iE(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=iE(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ae(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=iE(e))&&(n&&(n+=" "),n+=t);return n}var M3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function zy(e){if(typeof e!="string")return!1;var t=M3;return t.includes(e)}var L3=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function aE(e){if(typeof e!="string")return!1;var t=L3;return t.includes(e)}function sE(e){return typeof e=="string"&&e.startsWith("data-")}function pn(e){var t=Object.entries(e).filter(r=>{var[n]=r;return aE(n)||sE(n)});return Object.fromEntries(t)}function uc(e){if(e==null)return null;if(m.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return pn(t)}return typeof e=="object"&&!Array.isArray(e)?pn(e):null}function Qt(e){var t=Object.entries(e).filter(r=>{var[n]=r;return aE(n)||sE(n)||zy(n)});return Object.fromEntries(t)}function $3(e){return e==null?null:m.isValidElement(e)?Qt(e.props):typeof e=="object"&&!Array.isArray(e)?Qt(e):null}var F3=["children","width","height","viewBox","className","style","title","desc"];function wg(){return wg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wg.apply(null,arguments)}function B3(e,t){if(e==null)return{};var r,n,i=U3(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function U3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var oE=m.forwardRef((e,t)=>{var{children:r,width:n,height:i,viewBox:a,className:s,style:o,title:l,desc:u}=e,d=B3(e,F3),f=a||{width:n,height:i,x:0,y:0},h=Ae("recharts-surface",s);return m.createElement("svg",wg({},Qt(d),{className:h,width:n,height:i,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),m.createElement("title",null,l),m.createElement("desc",null,u),r)}),z3=["children","className"];function _g(){return _g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_g.apply(null,arguments)}function W3(e,t){if(e==null)return{};var r,n,i=K3(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function K3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Hr=m.forwardRef((e,t)=>{var{children:r,className:n}=e,i=W3(e,z3),a=Ae("recharts-layer",n);return m.createElement("g",_g({className:a},Qt(i),{ref:t}),r)}),H3=m.createContext(null);function Me(e){return function(){return e}}const lE=Math.cos,Sd=Math.sin,yn=Math.sqrt,kd=Math.PI,Vf=2*kd,jg=Math.PI,Sg=2*jg,ha=1e-6,q3=Sg-ha;function cE(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function V3(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return cE;const r=10**t;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class G3{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?cE:V3(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,a,s){this._append`C${+t},${+r},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,r,n,i,a){if(t=+t,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=n-t,u=i-r,d=s-t,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>ha)if(!(Math.abs(f*l-u*d)>ha)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-s,g=i-o,v=l*l+u*u,y=p*p+g*g,x=Math.sqrt(v),w=Math.sqrt(h),b=a*Math.tan((jg-Math.acos((v+h-y)/(2*x*w)))/2),_=b/w,j=b/x;Math.abs(_-1)>ha&&this._append`L${t+_*d},${r+_*f}`,this._append`A${a},${a},0,0,${+(f*p>d*g)},${this._x1=t+j*l},${this._y1=r+j*u}`}}arc(t,r,n,i,a,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),l=n*Math.sin(i),u=t+o,d=r+l,f=1^s,h=s?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>ha||Math.abs(this._y1-d)>ha)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%Sg+Sg),h>q3?this._append`A${n},${n},0,1,${f},${t-o},${r-l}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>ha&&this._append`A${n},${n},0,${+(h>=jg)},${f},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function Wy(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new G3(t)}function Ky(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function uE(e){this._context=e}uE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Gf(e){return new uE(e)}function dE(e){return e[0]}function fE(e){return e[1]}function hE(e,t){var r=Me(!0),n=null,i=Gf,a=null,s=Wy(o);e=typeof e=="function"?e:e===void 0?dE:Me(e),t=typeof t=="function"?t:t===void 0?fE:Me(t);function o(l){var u,d=(l=Ky(l)).length,f,h=!1,p;for(n==null&&(a=i(p=s())),u=0;u<=d;++u)!(u<d&&r(f=l[u],u,l))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(f,u,l),+t(f,u,l));if(p)return a=null,p+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:Me(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:Me(+l),o):t},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Me(!!l),o):r},o.curve=function(l){return arguments.length?(i=l,n!=null&&(a=i(n)),o):i},o.context=function(l){return arguments.length?(l==null?n=a=null:a=i(n=l),o):n},o}function au(e,t,r){var n=null,i=Me(!0),a=null,s=Gf,o=null,l=Wy(u);e=typeof e=="function"?e:e===void 0?dE:Me(+e),t=typeof t=="function"?t:Me(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?fE:Me(+r);function u(f){var h,p,g,v=(f=Ky(f)).length,y,x=!1,w,b=new Array(v),_=new Array(v);for(a==null&&(o=s(w=l())),h=0;h<=v;++h){if(!(h<v&&i(y=f[h],h,f))===x)if(x=!x)p=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=h-1;g>=p;--g)o.point(b[g],_[g]);o.lineEnd(),o.areaEnd()}x&&(b[h]=+e(y,h,f),_[h]=+t(y,h,f),o.point(n?+n(y,h,f):b[h],r?+r(y,h,f):_[h]))}if(w)return o=null,w+""||null}function d(){return hE().defined(i).curve(s).context(a)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Me(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Me(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Me(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Me(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Me(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Me(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Me(!!f),u):i},u.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),u):s},u.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),u):a},u}class pE{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Y3(e){return new pE(e,!0)}function X3(e){return new pE(e,!1)}const Hy={draw(e,t){const r=yn(t/kd);e.moveTo(r,0),e.arc(0,0,r,0,Vf)}},J3={draw(e,t){const r=yn(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},mE=yn(1/3),Q3=mE*2,Z3={draw(e,t){const r=yn(t/Q3),n=r*mE;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},e6={draw(e,t){const r=yn(t),n=-r/2;e.rect(n,n,r,r)}},t6=.8908130915292852,gE=Sd(kd/10)/Sd(7*kd/10),r6=Sd(Vf/10)*gE,n6=-lE(Vf/10)*gE,i6={draw(e,t){const r=yn(t*t6),n=r6*r,i=n6*r;e.moveTo(0,-r),e.lineTo(n,i);for(let a=1;a<5;++a){const s=Vf*a/5,o=lE(s),l=Sd(s);e.lineTo(l*r,-o*r),e.lineTo(o*n-l*i,l*n+o*i)}e.closePath()}},Mp=yn(3),a6={draw(e,t){const r=-yn(t/(Mp*3));e.moveTo(0,r*2),e.lineTo(-Mp*r,-r),e.lineTo(Mp*r,-r),e.closePath()}},Tr=-.5,Dr=yn(3)/2,kg=1/yn(12),s6=(kg/2+1)*3,o6={draw(e,t){const r=yn(t/s6),n=r/2,i=r*kg,a=n,s=r*kg+r,o=-a,l=s;e.moveTo(n,i),e.lineTo(a,s),e.lineTo(o,l),e.lineTo(Tr*n-Dr*i,Dr*n+Tr*i),e.lineTo(Tr*a-Dr*s,Dr*a+Tr*s),e.lineTo(Tr*o-Dr*l,Dr*o+Tr*l),e.lineTo(Tr*n+Dr*i,Tr*i-Dr*n),e.lineTo(Tr*a+Dr*s,Tr*s-Dr*a),e.lineTo(Tr*o+Dr*l,Tr*l-Dr*o),e.closePath()}};function l6(e,t){let r=null,n=Wy(i);e=typeof e=="function"?e:Me(e||Hy),t=typeof t=="function"?t:Me(t===void 0?64:+t);function i(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:Me(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:Me(+a),i):t},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function Nd(){}function Ed(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function vE(e){this._context=e}vE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ed(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ed(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function c6(e){return new vE(e)}function yE(e){this._context=e}yE.prototype={areaStart:Nd,areaEnd:Nd,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ed(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function u6(e){return new yE(e)}function xE(e){this._context=e}xE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Ed(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function d6(e){return new xE(e)}function bE(e){this._context=e}bE.prototype={areaStart:Nd,areaEnd:Nd,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function f6(e){return new bE(e)}function Cw(e){return e<0?-1:1}function Pw(e,t,r){var n=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(n||i<0&&-0),s=(r-e._y1)/(i||n<0&&-0),o=(a*i+s*n)/(n+i);return(Cw(a)+Cw(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function Ow(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Lp(e,t,r){var n=e._x0,i=e._y0,a=e._x1,s=e._y1,o=(a-n)/3;e._context.bezierCurveTo(n+o,i+o*t,a-o,s-o*r,a,s)}function Cd(e){this._context=e}Cd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Lp(this,this._t0,Ow(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Lp(this,Ow(this,r=Pw(this,e,t)),r);break;default:Lp(this,this._t0,r=Pw(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function wE(e){this._context=new _E(e)}(wE.prototype=Object.create(Cd.prototype)).point=function(e,t){Cd.prototype.point.call(this,t,e)};function _E(e){this._context=e}_E.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,a){this._context.bezierCurveTo(t,e,n,r,a,i)}};function h6(e){return new Cd(e)}function p6(e){return new wE(e)}function jE(e){this._context=e}jE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=Aw(e),i=Aw(t),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Aw(e){var t,r=e.length-1,n,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,s[t]-=n*s[t-1];for(i[r-1]=s[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(s[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function m6(e){return new jE(e)}function Yf(e,t){this._context=e,this._t=t}Yf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function g6(e){return new Yf(e,.5)}function v6(e){return new Yf(e,0)}function y6(e){return new Yf(e,1)}function Ks(e,t){if((s=e.length)>1)for(var r=1,n,i,a=e[t[0]],s,o=a.length;r<s;++r)for(i=a,a=e[t[r]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Ng(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function x6(e,t){return e[t]}function b6(e){const t=[];return t.key=e,t}function w6(){var e=Me([]),t=Ng,r=Ks,n=x6;function i(a){var s=Array.from(e.apply(this,arguments),b6),o,l=s.length,u=-1,d;for(const f of a)for(o=0,++u;o<l;++o)(s[o][u]=[0,+n(f,s[o].key,u,a)]).data=f;for(o=0,d=Ky(t(s));o<l;++o)s[d[o]].index=o;return r(s,d),s}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Me(Array.from(a)),i):e},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:Me(+a),i):n},i.order=function(a){return arguments.length?(t=a==null?Ng:typeof a=="function"?a:Me(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(r=a??Ks,i):r},i}function _6(e,t){if((n=e.length)>0){for(var r,n,i=0,a=e[0].length,s;i<a;++i){for(s=r=0;r<n;++r)s+=e[r][i][1]||0;if(s)for(r=0;r<n;++r)e[r][i][1]/=s}Ks(e,t)}}function j6(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,a=n.length;r<a;++r){for(var s=0,o=0;s<i;++s)o+=e[s][r][1]||0;n[r][1]+=n[r][0]=-o/2}Ks(e,t)}}function S6(e,t){if(!(!((s=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,a,s;n<a;++n){for(var o=0,l=0,u=0;o<s;++o){for(var d=e[t[o]],f=d[n][1]||0,h=d[n-1][1]||0,p=(f-h)/2,g=0;g<o;++g){var v=e[t[g]],y=v[n][1]||0,x=v[n-1][1]||0;p+=y-x}l+=f,u+=p*f}i[n-1][1]+=i[n-1][0]=r,l&&(r-=u/l)}i[n-1][1]+=i[n-1][0]=r,Ks(e,t)}}var Xf={},SE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(SE);var qy={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(qy);var Jf={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Jf);var Qf={},kE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(kE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kE,r=Jf;function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,l="",u="",d=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const f=i[o];u?f==="\\"&&o+1<s?(o++,l+=i[o]):f===u?u="":l+=f:d?f==='"'||f==="'"?u=f:f==="]"?(d=!1,a.push(l),l=""):l+=f:f==="["?(d=!0,l&&(a.push(l),l="")):f==="."?l&&(a.push(l),l=""):l+=f,o++}return l&&a.push(l),a}e.toPath=n})(Qf);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SE,r=qy,n=Jf,i=Qf;function a(o,l,u){if(o==null)return u;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return u;const d=o[l];return d===void 0?r.isDeepKey(l)?a(o,i.toPath(l),u):u:d}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const d=o[l];return d===void 0?u:d}default:{if(Array.isArray(l))return s(o,l,u);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return u;const d=o[l];return d===void 0?u:d}}}function s(o,l,u){if(l.length===0)return u;let d=o;for(let f=0;f<l.length;f++){if(d==null||t.isUnsafeProperty(l[f]))return u;d=d[l[f]]}return d===void 0?u:d}e.get=a})(Xf);var k6=Xf.get;const Hs=di(k6);var cr=e=>e===0?0:e>0?1:-1,mn=e=>typeof e=="number"&&e!=+e,ii=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ie=e=>(typeof e=="number"||e instanceof Number)&&!mn(e),On=e=>ie(e)||typeof e=="string",N6=0,$l=e=>{var t=++N6;return"".concat(e||"").concat(t)},gn=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ie(t)&&typeof t!="string")return n;var a;if(ii(t)){if(r==null)return n;var s=t.indexOf("%");a=r*parseFloat(t.slice(0,s))/100}else a=+t;return mn(a)&&(a=n),i&&r!=null&&a>r&&(a=r),a},NE=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Ze(e,t,r){return ie(e)&&ie(t)?e+r*(t-e):t}function EE(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Hs(n,t))===r)}var He=e=>e===null||typeof e>"u",dc=e=>He(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function E6(e){return e!=null}function fo(){}var C6=["type","size","sizeType"];function Eg(){return Eg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Eg.apply(null,arguments)}function Tw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Dw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tw(Object(r),!0).forEach(function(n){P6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P6(e,t,r){return(t=O6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O6(e){var t=A6(e,"string");return typeof t=="symbol"?t:t+""}function A6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function T6(e,t){if(e==null)return{};var r,n,i=D6(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function D6(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var CE={symbolCircle:Hy,symbolCross:J3,symbolDiamond:Z3,symbolSquare:e6,symbolStar:i6,symbolTriangle:a6,symbolWye:o6},I6=Math.PI/180,R6=e=>{var t="symbol".concat(dc(e));return CE[t]||Hy},M6=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*I6;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},L6=(e,t)=>{CE["symbol".concat(dc(e))]=t},PE=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=T6(e,C6),a=Dw(Dw({},i),{},{type:t,size:r,sizeType:n}),s="circle";typeof t=="string"&&(s=t);var o=()=>{var h=R6(s),p=l6().type(h).size(M6(r,n,s)),g=p();if(g!==null)return g},{className:l,cx:u,cy:d}=a,f=Qt(a);return ie(u)&&ie(d)&&ie(r)?m.createElement("path",Eg({},f,{className:Ae("recharts-symbols",l),transform:"translate(".concat(u,", ").concat(d,")"),d:o()})):null};PE.registerSymbol=L6;var OE=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,Vy=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(m.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{zy(i)&&(n[i]=a=>r[i](r,a))}),n},$6=(e,t,r)=>n=>(e(t,r,n),null),Gy=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(i=>{var a=e[i];zy(i)&&typeof a=="function"&&(n||(n={}),n[i]=$6(a,t,r))}),n};function Iw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function F6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Iw(Object(r),!0).forEach(function(n){B6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function B6(e,t,r){return(t=U6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U6(e){var t=z6(e,"string");return typeof t=="symbol"?t:t+""}function z6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rr(e,t){var r=F6({},e),n=t,i=Object.keys(t),a=i.reduce((s,o)=>(s[o]===void 0&&n[o]!==void 0&&(s[o]=n[o]),s),r);return a}var AE={},TE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const i=new Map;for(let a=0;a<r.length;a++){const s=r[a],o=n(s);i.has(o)||i.set(o,s)}return Array.from(i.values())}e.uniqBy=t})(TE);var Yy={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Yy);var DE={},Zf={},IE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(IE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IE;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Zf);var RE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(RE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zf,r=RE;function n(i){return r.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=n})(DE);var ME={},LE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xf;function r(n){return function(i){return t.get(i,n)}}e.property=r})(LE);var $E={},Xy={},FE={},Jy={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Jy);var Qy={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Qy);var Zy={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Zy);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jy,r=Qy,n=Zy;function i(d,f,h){return typeof h!="function"?i(d,f,()=>{}):a(d,f,function p(g,v,y,x,w,b){const _=h(g,v,y,x,w,b);return _!==void 0?!!_:a(g,v,p,b)},new Map)}function a(d,f,h,p){if(f===d)return!0;switch(typeof f){case"object":return s(d,f,h,p);case"function":return Object.keys(f).length>0?a(d,{...f},h,p):n.eq(d,f);default:return t.isObject(d)?typeof f=="string"?f==="":!0:n.eq(d,f)}}function s(d,f,h,p){if(f==null)return!0;if(Array.isArray(f))return l(d,f,h,p);if(f instanceof Map)return o(d,f,h,p);if(f instanceof Set)return u(d,f,h,p);const g=Object.keys(f);if(d==null)return g.length===0;if(g.length===0)return!0;if(p!=null&&p.has(f))return p.get(f)===d;p==null||p.set(f,d);try{for(let v=0;v<g.length;v++){const y=g[v];if(!r.isPrimitive(d)&&!(y in d)||f[y]===void 0&&d[y]!==void 0||f[y]===null&&d[y]!==null||!h(d[y],f[y],y,d,f,p))return!1}return!0}finally{p==null||p.delete(f)}}function o(d,f,h,p){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[g,v]of f.entries()){const y=d.get(g);if(h(y,v,g,d,f,p)===!1)return!1}return!0}function l(d,f,h,p){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const g=new Set;for(let v=0;v<f.length;v++){const y=f[v];let x=!1;for(let w=0;w<d.length;w++){if(g.has(w))continue;const b=d[w];let _=!1;if(h(b,y,v,d,f,p)&&(_=!0),_){g.add(w),x=!0;break}}if(!x)return!1}return!0}function u(d,f,h,p){return f.size===0?!0:d instanceof Set?l([...d],[...f],h,p):!1}e.isMatchWith=i,e.isSetMatch=u})(FE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FE;function r(n,i){return t.isMatchWith(n,i,()=>{})}e.isMatch=r})(Xy);var BE={},e0={},UE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(UE);var t0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(t0);var r0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",l="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",p="[object Object]",g="[object Error]",v="[object DataView]",y="[object Uint8Array]",x="[object Uint8ClampedArray]",w="[object Uint16Array]",b="[object Uint32Array]",_="[object BigUint64Array]",j="[object Int8Array]",S="[object Int16Array]",k="[object Int32Array]",N="[object BigInt64Array]",C="[object Float32Array]",E="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=N,e.bigUint64ArrayTag=_,e.booleanTag=i,e.dataViewTag=v,e.dateTag=o,e.errorTag=g,e.float32ArrayTag=C,e.float64ArrayTag=E,e.functionTag=f,e.int16ArrayTag=S,e.int32ArrayTag=k,e.int8ArrayTag=j,e.mapTag=l,e.numberTag=n,e.objectTag=p,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=s,e.uint16ArrayTag=w,e.uint32ArrayTag=b,e.uint8ArrayTag=y,e.uint8ClampedArrayTag=x})(r0);var zE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(zE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UE,r=t0,n=r0,i=Qy,a=zE;function s(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,p=new Map,g=void 0){const v=g==null?void 0:g(d,f,h,p);if(v!==void 0)return v;if(i.isPrimitive(d))return d;if(p.has(d))return p.get(d);if(Array.isArray(d)){const y=new Array(d.length);p.set(d,y);for(let x=0;x<d.length;x++)y[x]=o(d[x],x,h,p,g);return Object.hasOwn(d,"index")&&(y.index=d.index),Object.hasOwn(d,"input")&&(y.input=d.input),y}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const y=new RegExp(d.source,d.flags);return y.lastIndex=d.lastIndex,y}if(d instanceof Map){const y=new Map;p.set(d,y);for(const[x,w]of d)y.set(x,o(w,x,h,p,g));return y}if(d instanceof Set){const y=new Set;p.set(d,y);for(const x of d)y.add(o(x,void 0,h,p,g));return y}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const y=new(Object.getPrototypeOf(d)).constructor(d.length);p.set(d,y);for(let x=0;x<d.length;x++)y[x]=o(d[x],x,h,p,g);return y}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const y=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return p.set(d,y),l(y,d,h,p,g),y}if(typeof File<"u"&&d instanceof File){const y=new File([d],d.name,{type:d.type});return p.set(d,y),l(y,d,h,p,g),y}if(typeof Blob<"u"&&d instanceof Blob){const y=new Blob([d],{type:d.type});return p.set(d,y),l(y,d,h,p,g),y}if(d instanceof Error){const y=new d.constructor;return p.set(d,y),y.message=d.message,y.name=d.name,y.stack=d.stack,y.cause=d.cause,l(y,d,h,p,g),y}if(d instanceof Boolean){const y=new Boolean(d.valueOf());return p.set(d,y),l(y,d,h,p,g),y}if(d instanceof Number){const y=new Number(d.valueOf());return p.set(d,y),l(y,d,h,p,g),y}if(d instanceof String){const y=new String(d.valueOf());return p.set(d,y),l(y,d,h,p,g),y}if(typeof d=="object"&&u(d)){const y=Object.create(Object.getPrototypeOf(d));return p.set(d,y),l(y,d,h,p,g),y}return d}function l(d,f,h=d,p,g){const v=[...Object.keys(f),...t.getSymbols(f)];for(let y=0;y<v.length;y++){const x=v[y],w=Object.getOwnPropertyDescriptor(d,x);(w==null||w.writable)&&(d[x]=o(f[x],x,h,p,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=s,e.cloneDeepWithImpl=o,e.copyProperties=l})(e0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e0;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(BE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xy,r=BE;function n(i){return i=r.cloneDeep(i),a=>t.isMatch(a,i)}e.matches=n})($E);var WE={},KE={},HE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e0,r=r0;function n(i,a){return t.cloneDeepWith(i,(s,o,l,u)=>{const d=a==null?void 0:a(s,o,l,u);if(d!==void 0)return d;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new i.constructor(i==null?void 0:i.valueOf());return t.copyProperties(f,i),f}case r.argumentsTag:{const f={};return t.copyProperties(f,i),f.length=i.length,f[Symbol.iterator]=i[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(HE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HE;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(KE);var qE={},n0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(n0);var VE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=t0;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(VE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qy,r=n0,n=VE,i=Qf;function a(s,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&t.isDeepKey(o)&&(s==null?void 0:s[o])==null?l=i.toPath(o):l=[o],l.length===0)return!1;let u=s;for(let d=0;d<l.length;d++){const f=l[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=a})(qE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xy,r=Jf,n=KE,i=Xf,a=qE;function s(o,l){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return l=n.cloneDeep(l),function(u){const d=i.get(u,o);return d===void 0?a.has(u,o):l===void 0?d===void 0:t.isMatch(d,l)}}e.matchesProperty=s})(WE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yy,r=LE,n=$E,i=WE;function a(s){if(s==null)return t.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):n.matches(s);case"string":case"symbol":case"number":return r.property(s)}}e.iteratee=a})(ME);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TE,r=Yy,n=DE,i=ME;function a(s,o=r.identity){return n.isArrayLikeObject(s)?t.uniqBy(Array.from(s),i.iteratee(o)):[]}e.uniqBy=a})(AE);var W6=AE.uniqBy;const Rw=di(W6);function K6(e,t,r){return t===!0?Rw(e,r):typeof t=="function"?Rw(e,t):e}var GE={exports:{}},YE={},XE={exports:{}},JE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qs=m;function H6(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var q6=typeof Object.is=="function"?Object.is:H6,V6=qs.useState,G6=qs.useEffect,Y6=qs.useLayoutEffect,X6=qs.useDebugValue;function J6(e,t){var r=t(),n=V6({inst:{value:r,getSnapshot:t}}),i=n[0].inst,a=n[1];return Y6(function(){i.value=r,i.getSnapshot=t,$p(i)&&a({inst:i})},[e,r,t]),G6(function(){return $p(i)&&a({inst:i}),e(function(){$p(i)&&a({inst:i})})},[e]),X6(r),r}function $p(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!q6(e,r)}catch{return!0}}function Q6(e,t){return t()}var Z6=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Q6:J6;JE.useSyncExternalStore=qs.useSyncExternalStore!==void 0?qs.useSyncExternalStore:Z6;XE.exports=JE;var eF=XE.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eh=m,tF=eF;function rF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nF=typeof Object.is=="function"?Object.is:rF,iF=tF.useSyncExternalStore,aF=eh.useRef,sF=eh.useEffect,oF=eh.useMemo,lF=eh.useDebugValue;YE.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=aF(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=oF(function(){function l(p){if(!u){if(u=!0,d=p,p=n(p),i!==void 0&&s.hasValue){var g=s.value;if(i(g,p))return f=g}return f=p}if(g=f,nF(d,p))return g;var v=n(p);return i!==void 0&&i(g,v)?(d=p,g):(d=p,f=v)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,r,n,i]);var o=iF(e,a[0],a[1]);return sF(function(){s.hasValue=!0,s.value=o},[o]),lF(o),o};GE.exports=YE;var cF=GE.exports,i0=m.createContext(null),uF=e=>e,nt=()=>{var e=m.useContext(i0);return e?e.store.dispatch:uF},Lu=()=>{},dF=()=>Lu,fF=(e,t)=>e===t;function oe(e){var t=m.useContext(i0);return cF.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:dF,t?t.store.getState:Lu,t?t.store.getState:Lu,t?e:Lu,fF)}function hF(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function pF(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function mF(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Mw=e=>Array.isArray(e)?e:[e];function gF(e){const t=Array.isArray(e[0])?e[0]:e;return mF(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function vF(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var yF=class{constructor(e){this.value=e}deref(){return this.value}},xF=typeof WeakRef<"u"?WeakRef:yF,bF=0,Lw=1;function su(){return{s:bF,v:void 0,o:null,p:null}}function QE(e,t={}){let r=su();const{resultEqualityCheck:n}=t;let i,a=0;function s(){var f;let o=r;const{length:l}=arguments;for(let h=0,p=l;h<p;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let v=o.o;v===null&&(o.o=v=new WeakMap);const y=v.get(g);y===void 0?(o=su(),v.set(g,o)):o=y}else{let v=o.p;v===null&&(o.p=v=new Map);const y=v.get(g);y===void 0?(o=su(),v.set(g,o)):o=y}}const u=o;let d;if(o.s===Lw)d=o.v;else if(d=e.apply(null,arguments),a++,n){const h=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;h!=null&&n(h,d)&&(d=h,a!==0&&a--),i=typeof d=="object"&&d!==null||typeof d=="function"?new xF(d):d}return u.s=Lw,u.v=d,d}return s.clearCache=()=>{r=su(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function wF(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let a=0,s=0,o,l={},u=i.pop();typeof u=="object"&&(l=u,u=i.pop()),hF(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...l},{memoize:f,memoizeOptions:h=[],argsMemoize:p=QE,argsMemoizeOptions:g=[]}=d,v=Mw(h),y=Mw(g),x=gF(i),w=f(function(){return a++,u.apply(null,arguments)},...v),b=p(function(){s++;const j=vF(x,arguments);return o=w.apply(null,j),o},...y);return Object.assign(b,{resultFunc:u,memoizedResultFunc:w,dependencies:x,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var T=wF(QE),_F=Object.assign((e,t=T)=>{pF(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((s,o,l)=>(s[r[l]]=o,s),{}))},{withTypes:()=>_F}),ZE={},eC={},tC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,a)=>{if(n!==i){const s=t(n),o=t(i);if(s===o&&s===0){if(n<i)return a==="desc"?1:-1;if(n>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};e.compareValues=r})(tC);var rC={},a0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(a0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=a0,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||s!=null&&Object.hasOwn(s,a)}e.isKey=i})(rC);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tC,r=rC,n=Qf;function i(a,s,o,l){if(a==null)return[];o=l?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(p=>String(p));const u=(p,g)=>{let v=p;for(let y=0;y<g.length&&v!=null;++y)v=v[g[y]];return v},d=(p,g)=>g==null||p==null?g:typeof p=="object"&&"key"in p?Object.hasOwn(g,p.key)?g[p.key]:u(g,p.path):typeof p=="function"?p(g):Array.isArray(p)?u(g,p):typeof g=="object"?g[p]:g,f=s.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:n.toPath(p)}));return a.map(p=>({original:p,criteria:f.map(g=>d(g,p))})).slice().sort((p,g)=>{for(let v=0;v<f.length;v++){const y=t.compareValues(p.criteria[v],g.criteria[v],o[v]);if(y!==0)return y}return 0}).map(p=>p.original)}e.orderBy=i})(eC);var nC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const i=[],a=Math.floor(n),s=(o,l)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&l<a?s(d,l+1):i.push(d)}};return s(r,0),i}e.flatten=t})(nC);var s0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=n0,r=Zf,n=Jy,i=Zy;function a(s,o,l){return n.isObject(l)&&(typeof o=="number"&&r.isArrayLike(l)&&t.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?i.eq(l[o],s):!1}e.isIterateeCall=a})(s0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eC,r=nC,n=s0;function i(a,...s){const o=s.length;return o>1&&n.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&n.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),t.orderBy(a,r.flatten(s),["asc"])}e.sortBy=i})(ZE);var jF=ZE.sortBy;const th=di(jF);var iC=e=>e.legend.settings,SF=e=>e.legend.size,kF=e=>e.legend.payload;T([kF,iC],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?th(n,r):n});var ou=1;function NF(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=m.useState({height:0,left:0,top:0,width:0}),n=m.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-t.height)>ou||Math.abs(s.left-t.left)>ou||Math.abs(s.top-t.top)>ou||Math.abs(s.width-t.width)>ou)&&r({height:s.height,left:s.left,top:s.top,width:s.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function It(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var EF=typeof Symbol=="function"&&Symbol.observable||"@@observable",$w=EF,Fp=()=>Math.random().toString(36).substring(7).split("").join("."),CF={INIT:`@@redux/INIT${Fp()}`,REPLACE:`@@redux/REPLACE${Fp()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Fp()}`},Pd=CF;function o0(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function aC(e,t,r){if(typeof e!="function")throw new Error(It(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(It(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(It(1));return r(aC)(e,t)}let n=e,i=t,a=new Map,s=a,o=0,l=!1;function u(){s===a&&(s=new Map,a.forEach((y,x)=>{s.set(x,y)}))}function d(){if(l)throw new Error(It(3));return i}function f(y){if(typeof y!="function")throw new Error(It(4));if(l)throw new Error(It(5));let x=!0;u();const w=o++;return s.set(w,y),function(){if(x){if(l)throw new Error(It(6));x=!1,u(),s.delete(w),a=null}}}function h(y){if(!o0(y))throw new Error(It(7));if(typeof y.type>"u")throw new Error(It(8));if(typeof y.type!="string")throw new Error(It(17));if(l)throw new Error(It(9));try{l=!0,i=n(i,y)}finally{l=!1}return(a=s).forEach(w=>{w()}),y}function p(y){if(typeof y!="function")throw new Error(It(10));n=y,h({type:Pd.REPLACE})}function g(){const y=f;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(It(11));function w(){const _=x;_.next&&_.next(d())}return w(),{unsubscribe:y(w)}},[$w](){return this}}}return h({type:Pd.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:p,[$w]:g}}function PF(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Pd.INIT})>"u")throw new Error(It(12));if(typeof r(void 0,{type:Pd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(It(13))})}function sC(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const s=t[a];typeof e[s]=="function"&&(r[s]=e[s])}const n=Object.keys(r);let i;try{PF(r)}catch(a){i=a}return function(s={},o){if(i)throw i;let l=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],p=s[f],g=h(p,o);if(typeof g>"u")throw o&&o.type,new Error(It(14));u[f]=g,l=l||g!==p}return l=l||n.length!==Object.keys(s).length,l?u:s}}function Od(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function OF(...e){return t=>(r,n)=>{const i=t(r,n);let a=()=>{throw new Error(It(15))};const s={getState:i.getState,dispatch:(l,...u)=>a(l,...u)},o=e.map(l=>l(s));return a=Od(...o)(i.dispatch),{...i,dispatch:a}}}function oC(e){return o0(e)&&"type"in e&&typeof e.type=="string"}var lC=Symbol.for("immer-nothing"),Fw=Symbol.for("immer-draftable"),Pr=Symbol.for("immer-state");function on(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Fl=Object.getPrototypeOf;function $a(e){return!!e&&!!e[Pr]}function ai(e){var t;return e?cC(e)||Array.isArray(e)||!!e[Fw]||!!((t=e.constructor)!=null&&t[Fw])||fc(e)||nh(e):!1}var AF=Object.prototype.constructor.toString(),Bw=new WeakMap;function cC(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=Bw.get(r);return n===void 0&&(n=Function.toString.call(r),Bw.set(r,n)),n===AF}function Ad(e,t,r=!0){rh(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function rh(e){const t=e[Pr];return t?t.type_:Array.isArray(e)?1:fc(e)?2:nh(e)?3:0}function Cg(e,t){return rh(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function uC(e,t,r){const n=rh(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function TF(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function fc(e){return e instanceof Map}function nh(e){return e instanceof Set}function pa(e){return e.copy_||e.base_}function Pg(e,t){if(fc(e))return new Map(e);if(nh(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=cC(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Pr];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const s=i[a],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(Fl(e),n)}else{const n=Fl(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function l0(e,t=!1){return ih(e)||$a(e)||!ai(e)||(rh(e)>1&&Object.defineProperties(e,{set:lu,add:lu,clear:lu,delete:lu}),Object.freeze(e),t&&Object.values(e).forEach(r=>l0(r,!0))),e}function DF(){on(2)}var lu={value:DF};function ih(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var IF={};function Fa(e){const t=IF[e];return t||on(0,e),t}var Bl;function dC(){return Bl}function RF(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Uw(e,t){t&&(Fa("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Og(e){Ag(e),e.drafts_.forEach(MF),e.drafts_=null}function Ag(e){e===Bl&&(Bl=e.parent_)}function zw(e){return Bl=RF(Bl,e)}function MF(e){const t=e[Pr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Ww(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Pr].modified_&&(Og(t),on(4)),ai(e)&&(e=Td(t,e),t.parent_||Dd(t,e)),t.patches_&&Fa("Patches").generateReplacementPatches_(r[Pr].base_,e,t.patches_,t.inversePatches_)):e=Td(t,r,[]),Og(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==lC?e:void 0}function Td(e,t,r){if(ih(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[Pr];if(!i)return Ad(t,(a,s)=>Kw(e,i,t,a,s,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return Dd(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),Ad(s,(l,u)=>Kw(e,i,a,l,u,r,o),n),Dd(e,a,!1),r&&e.patches_&&Fa("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function Kw(e,t,r,n,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=ih(i);if(!(o&&!s)){if($a(i)){const l=a&&t&&t.type_!==3&&!Cg(t.assigned_,n)?a.concat(n):void 0,u=Td(e,i,l);if(uC(r,n,u),$a(u))e.canAutoFreeze_=!1;else return}else s&&r.add(i);if(ai(i)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&o)return;Td(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(fc(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Dd(e,i)}}}function Dd(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&l0(t,r)}function LF(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:dC(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=c0;r&&(i=[n],a=Ul);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,o}var c0={get(e,t){if(t===Pr)return e;const r=pa(e);if(!Cg(r,t))return $F(e,r,t);const n=r[t];return e.finalized_||!ai(n)?n:n===Bp(e.base_,t)?(Up(e),e.copy_[t]=Dg(n,e)):n},has(e,t){return t in pa(e)},ownKeys(e){return Reflect.ownKeys(pa(e))},set(e,t,r){const n=fC(pa(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=Bp(pa(e),t),a=i==null?void 0:i[Pr];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(TF(r,i)&&(r!==void 0||Cg(e.base_,t)))return!0;Up(e),Tg(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Bp(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Up(e),Tg(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=pa(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){on(11)},getPrototypeOf(e){return Fl(e.base_)},setPrototypeOf(){on(12)}},Ul={};Ad(c0,(e,t)=>{Ul[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ul.deleteProperty=function(e,t){return Ul.set.call(this,e,t,void 0)};Ul.set=function(e,t,r){return c0.set.call(this,e[0],t,r,e[0])};function Bp(e,t){const r=e[Pr];return(r?pa(r):e)[t]}function $F(e,t,r){var i;const n=fC(t,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function fC(e,t){if(!(t in e))return;let r=Fl(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Fl(r)}}function Tg(e){e.modified_||(e.modified_=!0,e.parent_&&Tg(e.parent_))}function Up(e){e.copy_||(e.copy_=Pg(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var FF=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const s=this;return function(l=a,...u){return s.produce(l,d=>r.call(this,d,...u))}}typeof r!="function"&&on(6),n!==void 0&&typeof n!="function"&&on(7);let i;if(ai(t)){const a=zw(this),s=Dg(t,void 0);let o=!0;try{i=r(s),o=!1}finally{o?Og(a):Ag(a)}return Uw(a,n),Ww(i,a)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===lC&&(i=void 0),this.autoFreeze_&&l0(i,!0),n){const a=[],s=[];Fa("Patches").generateReplacementPatches_(t,i,a,s),n(a,s)}return i}else on(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(s,...o)=>this.produceWithPatches(s,l=>t(l,...o));let n,i;return[this.produce(t,r,(s,o)=>{n=s,i=o}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ai(e)||on(8),$a(e)&&(e=Xn(e));const t=zw(this),r=Dg(e,void 0);return r[Pr].isManual_=!0,Ag(t),r}finishDraft(e,t){const r=e&&e[Pr];(!r||!r.isManual_)&&on(9);const{scope_:n}=r;return Uw(n,t),Ww(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=Fa("Patches").applyPatches_;return $a(e)?n(e,t):this.produce(e,i=>n(i,t))}};function Dg(e,t){const r=fc(e)?Fa("MapSet").proxyMap_(e,t):nh(e)?Fa("MapSet").proxySet_(e,t):LF(e,t);return(t?t.scope_:dC()).drafts_.push(r),r}function Xn(e){return $a(e)||on(10,e),hC(e)}function hC(e){if(!ai(e)||ih(e))return e;const t=e[Pr];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Pg(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Pg(e,!0);return Ad(r,(i,a)=>{uC(r,i,hC(a))},n),t&&(t.finalized_=!1),r}var Ig=new FF,pC=Ig.produce,BF=Ig.setUseStrictIteration.bind(Ig);function mC(e){return({dispatch:r,getState:n})=>i=>a=>typeof a=="function"?a(r,n,e):i(a)}var UF=mC(),zF=mC,WF=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Od:Od.apply(null,arguments)};function qr(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(Nr(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>oC(n)&&n.type===e,r}var gC=class Yo extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Yo.prototype)}static get[Symbol.species](){return Yo}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Yo(...t[0].concat(this)):new Yo(...t.concat(this))}};function Hw(e){return ai(e)?pC(e,()=>{}):e}function cu(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function KF(e){return typeof e=="boolean"}var HF=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let s=new gC;return r&&(KF(r)?s.push(UF):s.push(zF(r.extraArgument))),s},vC="RTK_autoBatch",pt=()=>e=>({payload:e,meta:{[vC]:!0}}),qw=e=>t=>{setTimeout(t,e)},yC=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,a=!1,s=!1;const o=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:qw(10):e.type==="callback"?e.queueNotification:qw(e.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>i&&d(),h=n.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){var f;try{return i=!((f=d==null?void 0:d.meta)!=null&&f[vC]),a=!i,a&&(s||(s=!0,l(u))),n.dispatch(d)}finally{i=!0}}})},qF=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new gC(e);return n&&i.push(yC(typeof n=="object"?n:void 0)),i};function VF(e){const t=HF(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(o0(r))o=sC(r);else throw new Error(Nr(1));let l;typeof n=="function"?l=n(t):l=t();let u=Od;i&&(u=WF({trace:!1,...typeof i=="object"&&i}));const d=OF(...l),f=qF(d);let h=typeof s=="function"?s(f):f();const p=u(...h);return aC(o,a,p)}function xC(e){const t={},r=[];let n;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(Nr(28));if(o in t)throw new Error(Nr(29));return t[o]=s,i},addAsyncThunk(a,s){return s.pending&&(t[a.pending.type]=s.pending),s.rejected&&(t[a.rejected.type]=s.rejected),s.fulfilled&&(t[a.fulfilled.type]=s.fulfilled),s.settled&&r.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return r.push({matcher:a,reducer:s}),i},addDefaultCase(a){return n=a,i}};return e(i),[t,r,n]}BF(!1);function GF(e){return typeof e=="function"}function YF(e,t){let[r,n,i]=xC(t),a;if(GF(e))a=()=>Hw(e());else{const o=Hw(e);a=()=>o}function s(o=a(),l){let u=[r[l.type],...n.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[i]),u.reduce((d,f)=>{if(f)if($a(d)){const p=f(d,l);return p===void 0?d:p}else{if(ai(d))return pC(d,h=>f(h,l));{const h=f(d,l);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return s.getInitialState=a,s}var XF="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",JF=(e=21)=>{let t="",r=e;for(;r--;)t+=XF[Math.random()*64|0];return t},QF=Symbol.for("rtk-slice-createasyncthunk");function ZF(e,t){return`${e}/${t}`}function eB({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[QF];return function(i){const{name:a,reducerPath:s=a}=i;if(!a)throw new Error(Nr(11));const o=(typeof i.reducers=="function"?i.reducers(rB()):i.reducers)||{},l=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(_,j){const S=typeof _=="string"?_:_.type;if(!S)throw new Error(Nr(12));if(S in u.sliceCaseReducersByType)throw new Error(Nr(13));return u.sliceCaseReducersByType[S]=j,d},addMatcher(_,j){return u.sliceMatchers.push({matcher:_,reducer:j}),d},exposeAction(_,j){return u.actionCreators[_]=j,d},exposeCaseReducer(_,j){return u.sliceCaseReducersByName[_]=j,d}};l.forEach(_=>{const j=o[_],S={reducerName:_,type:ZF(a,_),createNotation:typeof i.reducers=="function"};iB(j)?sB(S,j,d,t):nB(S,j,d)});function f(){const[_={},j=[],S=void 0]=typeof i.extraReducers=="function"?xC(i.extraReducers):[i.extraReducers],k={..._,...u.sliceCaseReducersByType};return YF(i.initialState,N=>{for(let C in k)N.addCase(C,k[C]);for(let C of u.sliceMatchers)N.addMatcher(C.matcher,C.reducer);for(let C of j)N.addMatcher(C.matcher,C.reducer);S&&N.addDefaultCase(S)})}const h=_=>_,p=new Map,g=new WeakMap;let v;function y(_,j){return v||(v=f()),v(_,j)}function x(){return v||(v=f()),v.getInitialState()}function w(_,j=!1){function S(N){let C=N[_];return typeof C>"u"&&j&&(C=cu(g,S,x)),C}function k(N=h){const C=cu(p,j,()=>new WeakMap);return cu(C,N,()=>{const E={};for(const[P,I]of Object.entries(i.selectors??{}))E[P]=tB(I,N,()=>cu(g,N,x),j);return E})}return{reducerPath:_,getSelectors:k,get selectors(){return k(S)},selectSlice:S}}const b={name:a,reducer:y,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:x,...w(s),injectInto(_,{reducerPath:j,...S}={}){const k=j??s;return _.inject({reducerPath:k,reducer:y},S),{...b,...w(k,!0)}}};return b}}function tB(e,t,r,n){function i(a,...s){let o=t(a);return typeof o>"u"&&n&&(o=r()),e(o,...s)}return i.unwrapped=e,i}var mr=eB();function rB(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function nB({type:e,reducerName:t,createNotation:r},n,i){let a,s;if("reducer"in n){if(r&&!aB(n))throw new Error(Nr(17));a=n.reducer,s=n.prepare}else a=n;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,s?qr(e,s):qr(e))}function iB(e){return e._reducerDefinitionType==="asyncThunk"}function aB(e){return e._reducerDefinitionType==="reducerWithPrepare"}function sB({type:e,reducerName:t},r,n,i){if(!i)throw new Error(Nr(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:l,settled:u,options:d}=r,f=i(e,a,d);n.exposeAction(t,f),s&&n.addCase(f.fulfilled,s),o&&n.addCase(f.pending,o),l&&n.addCase(f.rejected,l),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:s||uu,pending:o||uu,rejected:l||uu,settled:u||uu})}function uu(){}var oB="task",bC="listener",wC="completed",u0="cancelled",lB=`task-${u0}`,cB=`task-${wC}`,Rg=`${bC}-${u0}`,uB=`${bC}-${wC}`,ah=class{constructor(e){Vh(this,"name","TaskAbortError");Vh(this,"message");this.code=e,this.message=`${oB} ${u0} (reason: ${e})`}},d0=(e,t)=>{if(typeof e!="function")throw new TypeError(Nr(32))},Id=()=>{},_C=(e,t=Id)=>(e.catch(t),e),jC=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Ca=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Pa=e=>{if(e.aborted){const{reason:t}=e;throw new ah(t)}};function SC(e,t){let r=Id;return new Promise((n,i)=>{const a=()=>i(new ah(e.reason));if(e.aborted){a();return}r=jC(e,a),t.finally(()=>r()).then(n,i)}).finally(()=>{r=Id})}var dB=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof ah?"cancelled":"rejected",error:r}}finally{t==null||t()}},Rd=e=>t=>_C(SC(e,t).then(r=>(Pa(e),r))),kC=e=>{const t=Rd(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Ts}=Object,Vw={},sh="listenerMiddleware",fB=(e,t)=>{const r=n=>jC(e,()=>Ca(n,e.reason));return(n,i)=>{d0(n);const a=new AbortController;r(a);const s=dB(async()=>{Pa(e),Pa(a.signal);const o=await n({pause:Rd(a.signal),delay:kC(a.signal),signal:a.signal});return Pa(a.signal),o},()=>Ca(a,cB));return i!=null&&i.autoJoin&&t.push(s.catch(Id)),{result:Rd(e)(s),cancel(){Ca(a,lB)}}}},hB=(e,t)=>{const r=async(n,i)=>{Pa(t);let a=()=>{};const o=[new Promise((l,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),l([f,h.getState(),h.getOriginalState()])}});a=()=>{d(),u()}})];i!=null&&o.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await SC(t,Promise.race(o));return Pa(t),l}finally{a()}};return(n,i)=>_C(r(n,i))},NC=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:a}=e;if(t)i=qr(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(Nr(21));return d0(a),{predicate:i,type:t,effect:a}},EC=Ts(e=>{const{type:t,predicate:r,effect:n}=NC(e);return{id:JF(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Nr(22))}}},{withTypes:()=>EC}),Gw=(e,t)=>{const{type:r,effect:n,predicate:i}=NC(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===i)&&a.effect===n)},Mg=e=>{e.pending.forEach(t=>{Ca(t,Rg)})},pB=(e,t)=>()=>{for(const r of t.keys())Mg(r);e.clear()},Yw=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},CC=Ts(qr(`${sh}/add`),{withTypes:()=>CC}),mB=qr(`${sh}/removeAll`),PC=Ts(qr(`${sh}/remove`),{withTypes:()=>PC}),gB=(...e)=>{console.error(`${sh}/error`,...e)},hc=(e={})=>{const t=new Map,r=new Map,n=p=>{const g=r.get(p)??0;r.set(p,g+1)},i=p=>{const g=r.get(p)??1;g===1?r.delete(p):r.set(p,g-1)},{extra:a,onError:s=gB}=e;d0(s);const o=p=>(p.unsubscribe=()=>t.delete(p.id),t.set(p.id,p),g=>{p.unsubscribe(),g!=null&&g.cancelActive&&Mg(p)}),l=p=>{const g=Gw(t,p)??EC(p);return o(g)};Ts(l,{withTypes:()=>l});const u=p=>{const g=Gw(t,p);return g&&(g.unsubscribe(),p.cancelActive&&Mg(g)),!!g};Ts(u,{withTypes:()=>u});const d=async(p,g,v,y)=>{const x=new AbortController,w=hB(l,x.signal),b=[];try{p.pending.add(x),n(p),await Promise.resolve(p.effect(g,Ts({},v,{getOriginalState:y,condition:(_,j)=>w(_,j).then(Boolean),take:w,delay:kC(x.signal),pause:Rd(x.signal),extra:a,signal:x.signal,fork:fB(x.signal,b),unsubscribe:p.unsubscribe,subscribe:()=>{t.set(p.id,p)},cancelActiveListeners:()=>{p.pending.forEach((_,j,S)=>{_!==x&&(Ca(_,Rg),S.delete(_))})},cancel:()=>{Ca(x,Rg),p.pending.delete(x)},throwIfCancelled:()=>{Pa(x.signal)}})))}catch(_){_ instanceof ah||Yw(s,_,{raisedBy:"effect"})}finally{await Promise.all(b),Ca(x,uB),i(p),p.pending.delete(x)}},f=pB(t,r);return{middleware:p=>g=>v=>{if(!oC(v))return g(v);if(CC.match(v))return l(v.payload);if(mB.match(v)){f();return}if(PC.match(v))return u(v.payload);let y=p.getState();const x=()=>{if(y===Vw)throw new Error(Nr(23));return y};let w;try{if(w=g(v),t.size>0){const b=p.getState(),_=Array.from(t.values());for(const j of _){let S=!1;try{S=j.predicate(v,b,y)}catch(k){S=!1,Yw(s,k,{raisedBy:"predicate"})}S&&d(j,v,p,x)}}}finally{y=Vw}return w},startListening:l,stopListening:u,clearListeners:f}};function Nr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var vB={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},OC=mr({name:"chartLayout",initialState:vB,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,i,a;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:yB,setLayout:xB,setChartSize:bB,setScale:wB}=OC.actions,_B=OC.reducer;function AC(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Xw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _s(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xw(Object(r),!0).forEach(function(n){jB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jB(e,t,r){return(t=SB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SB(e){var t=kB(e,"string");return typeof t=="symbol"?t:t+""}function kB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Et(e,t,r){return He(e)||He(t)?r:On(t)?Hs(e,t,r):typeof t=="function"?t(e):r}var NB=(e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:a,verticalAlign:s,layout:o}=t;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&ie(e[a]))return _s(_s({},e),{},{[a]:e[a]+(n||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&ie(e[s]))return _s(_s({},e),{},{[s]:e[s]+(i||0)})}return e},ra=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",TC=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var i,a,s=e.map(o=>(o.coordinate===t&&(i=!0),o.coordinate===r&&(a=!0),o.coordinate));return i||s.push(t),a||s.push(r),s},DC=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:a,scale:s,realScaleType:o,isCategorical:l,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:p}=e;if(!s)return null;var g=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,v=i==="category"&&s.bandwidth?s.bandwidth()/g:0;if(v=p==="angleAxis"&&a&&a.length>=2?cr(a[0]-a[1])*2*v:v,f||h){var y=(f||h||[]).map((x,w)=>{var b=n?n.indexOf(x):x;return{coordinate:s(b)+v,value:x,offset:v,index:w}});return y.filter(x=>!mn(x.coordinate))}return l&&u?u.map((x,w)=>({coordinate:s(x)+v,value:x,index:w,offset:v})):s.ticks&&d!=null?s.ticks(d).map((x,w)=>({coordinate:s(x)+v,value:x,offset:v,index:w})):s.domain().map((x,w)=>({coordinate:s(x)+v,value:n?n[x]:x,index:w,offset:v}))},Jw=1e-4,EB=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),i=Math.min(n[0],n[1])-Jw,a=Math.max(n[0],n[1])+Jw,s=e(t[0]),o=e(t[r-1]);(s<i||s>a||o<i||o>a)&&e.domain([t[0],t[r-1]])}},CB=(e,t)=>{if(!t||t.length!==2||!ie(t[0])||!ie(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!ie(e[0])||e[0]<r)&&(i[0]=r),(!ie(e[1])||e[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},PB=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,a=0,s=0;s<t;++s){var o=mn(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=i,e[s][r][1]=i+o,i=e[s][r][1]):(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1])}},OB=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,a=0;a<t;++a){var s=mn(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=i,e[a][r][1]=i+s,i=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},AB={sign:PB,expand:_6,none:Ks,silhouette:j6,wiggle:S6,positive:OB},TB=(e,t,r)=>{var n=AB[r],i=w6().keys(t).value((a,s)=>Number(Et(a,s,0))).order(Ng).offset(n);return i(e)};function DB(e){return e==null?void 0:String(e)}function Qw(e){var{axis:t,ticks:r,bandSize:n,entry:i,index:a,dataKey:s}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!He(i[t.dataKey])){var o=EE(r,"value",i[t.dataKey]);if(o)return o.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var l=Et(i,He(s)?t.dataKey:s);return He(l)?null:t.scale(l)}var Zw=e=>{var{axis:t,ticks:r,offset:n,bandSize:i,entry:a,index:s}=e;if(t.type==="category")return r[s]?r[s].coordinate+n:null;var o=Et(a,t.dataKey,t.scale.domain()[s]);return He(o)?null:t.scale(o)-i/2+n},IB=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},RB=e=>{var t=e.flat(2).filter(ie);return[Math.min(...t),Math.max(...t)]},MB=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],LB=(e,t,r)=>{if(e!=null)return MB(Object.keys(e).reduce((n,i)=>{var a=e[i],{stackedData:s}=a,o=s.reduce((l,u)=>{var d=AC(u,t,r),f=RB(d);return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},e_=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,t_=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Vs=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=th(t,d=>d.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var l=i[s],u=i[s-1];a=Math.min((l.coordinate||0)-(u.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function r_(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:a}=e;return _s(_s({},t),{},{dataKey:r,payload:n,value:i,name:a})}function oh(e,t){if(e)return String(e);if(typeof t=="string")return t}var $B=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},FB=(e,t)=>t==="centric"?e.angle:e.radius,hi=e=>e.layout.width,pi=e=>e.layout.height,BB=e=>e.layout.scale,IC=e=>e.layout.margin,lh=T(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),ch=T(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),UB="data-recharts-item-index",zB="data-recharts-item-data-key",pc=60;function n_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function du(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n_(Object(r),!0).forEach(function(n){WB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WB(e,t,r){return(t=KB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KB(e){var t=HB(e,"string");return typeof t=="symbol"?t:t+""}function HB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qB=e=>e.brush.height;function VB(e){var t=ch(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:pc;return r+i}return r},0)}function GB(e){var t=ch(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:pc;return r+i}return r},0)}function YB(e){var t=lh(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function XB(e){var t=lh(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Ct=T([hi,pi,IC,qB,VB,GB,YB,XB,iC,SF],(e,t,r,n,i,a,s,o,l,u)=>{var d={left:(r.left||0)+i,right:(r.right||0)+a},f={top:(r.top||0)+s,bottom:(r.bottom||0)+o},h=du(du({},f),d),p=h.bottom;h.bottom+=n,h=NB(h,l,u);var g=e-h.left-h.right,v=t-h.top-h.bottom;return du(du({brushBottom:p},h),{},{width:Math.max(g,0),height:Math.max(v,0)})}),JB=T(Ct,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),f0=T(hi,pi,(e,t)=>({x:0,y:0,width:e,height:t})),QB=m.createContext(null),Ht=()=>m.useContext(QB)!=null,uh=e=>e.brush,dh=T([uh,Ct,IC],(e,t,r)=>({height:e.height,x:ie(e.x)?e.x:t.left,y:ie(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:ie(e.width)?e.width:t.width})),RC={},MC={},LC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:i,edges:a}={}){let s,o=null;const l=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),d=()=>{o!==null&&(r.apply(s,o),s=void 0,o=null)},f=()=>{u&&d(),v()};let h=null;const p=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},g=()=>{h!==null&&(clearTimeout(h),h=null)},v=()=>{g(),s=void 0,o=null},y=()=>{d()},x=function(...w){if(i!=null&&i.aborted)return;s=this,o=w;const b=h==null;p(),l&&b&&d()};return x.schedule=p,x.cancel=v,x.flush=y,i==null||i.addEventListener("abort",v,{once:!0}),x}e.debounce=t})(LC);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LC;function r(n,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:l}=a,u=Array(2);s&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...v){d=n.apply(this,v),f=null},i,{edges:u}),p=function(...v){return l!=null&&(f===null&&(f=Date.now()),Date.now()-f>=l)?(d=n.apply(this,v),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,v),d)},g=()=>(h.flush(),d);return p.cancel=h.cancel,p.flush=g,p}e.debounce=r})(MC);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MC;function r(n,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return t.debounce(n,i,{leading:s,maxWait:i,trailing:o})}e.throttle=r})(RC);var ZB=RC.throttle;const eU=di(ZB);var Md=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a]},$C=(e,t,r)=>{var{width:n="100%",height:i="100%",aspect:a,maxHeight:s}=r,o=ii(n)?e:Number(n),l=ii(i)?t:Number(i);return a&&a>0&&(o?l=o/a:l&&(o=l*a),s&&l!=null&&l>s&&(l=s)),{calculatedWidth:o,calculatedHeight:l}},tU={width:0,height:0,overflow:"visible"},rU={width:0,overflowX:"visible"},nU={height:0,overflowY:"visible"},iU={},aU=e=>{var{width:t,height:r}=e,n=ii(t),i=ii(r);return n&&i?tU:n?rU:i?nU:iU};function sU(e){var{width:t,height:r,aspect:n}=e,i=t,a=r;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=n&&n>0?void 0:"100%":a===void 0&&(a=n&&n>0?void 0:"100%"),{width:i,height:a}}function rt(e){return Number.isFinite(e)}function An(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Lg(){return Lg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lg.apply(null,arguments)}function i_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function a_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i_(Object(r),!0).forEach(function(n){oU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oU(e,t,r){return(t=lU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lU(e){var t=cU(e,"string");return typeof t=="symbol"?t:t+""}function cU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FC=m.createContext({width:-1,height:-1});function uU(e){return An(e.width)&&An(e.height)}function BC(e){var{children:t,width:r,height:n}=e,i=m.useMemo(()=>({width:r,height:n}),[r,n]);return uU(i)?m.createElement(FC.Provider,{value:i},t):null}var h0=()=>m.useContext(FC),dU=m.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i,height:a,minWidth:s=0,minHeight:o,maxHeight:l,children:u,debounce:d=0,id:f,className:h,onResize:p,style:g={}}=e,v=m.useRef(null),y=m.useRef();y.current=p,m.useImperativeHandle(t,()=>v.current);var[x,w]=m.useState({containerWidth:n.width,containerHeight:n.height}),b=m.useCallback((N,C)=>{w(E=>{var P=Math.round(N),I=Math.round(C);return E.containerWidth===P&&E.containerHeight===I?E:{containerWidth:P,containerHeight:I}})},[]);m.useEffect(()=>{if(v.current==null||typeof ResizeObserver>"u")return fo;var N=I=>{var W,{width:F,height:K}=I[0].contentRect;b(F,K),(W=y.current)===null||W===void 0||W.call(y,F,K)};d>0&&(N=eU(N,d,{trailing:!0,leading:!1}));var C=new ResizeObserver(N),{width:E,height:P}=v.current.getBoundingClientRect();return b(E,P),C.observe(v.current),()=>{C.disconnect()}},[b,d]);var{containerWidth:_,containerHeight:j}=x;Md(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:S,calculatedHeight:k}=$C(_,j,{width:i,height:a,aspect:r,maxHeight:l});return Md(S!=null&&S>0||k!=null&&k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,S,k,i,a,s,o,r),m.createElement("div",{id:f?"".concat(f):void 0,className:Ae("recharts-responsive-container",h),style:a_(a_({},g),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:l}),ref:v},m.createElement("div",{style:aU({width:i,height:a})},m.createElement(BC,{width:S,height:k},u)))}),s_=m.forwardRef((e,t)=>{var r=h0();if(An(r.width)&&An(r.height))return e.children;var{width:n,height:i}=sU({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:s}=$C(void 0,void 0,{width:n,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return ie(a)&&ie(s)?m.createElement(BC,{width:a,height:s},e.children):m.createElement(dU,Lg({},e,{width:n,height:i,ref:t}))});function UC(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var fh=()=>{var e,t=Ht(),r=oe(JB),n=oe(dh),i=(e=oe(uh))===null||e===void 0?void 0:e.padding;return!t||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},fU={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},zC=()=>{var e;return(e=oe(Ct))!==null&&e!==void 0?e:fU},WC=()=>oe(hi),KC=()=>oe(pi),Ce=e=>e.layout.layoutType,mc=()=>oe(Ce),hU=()=>{var e=mc();return e!==void 0},hh=e=>{var t=nt(),r=Ht(),{width:n,height:i}=e,a=h0(),s=n,o=i;return a&&(s=a.width>0?a.width:n,o=a.height>0?a.height:i),m.useEffect(()=>{!r&&An(s)&&An(o)&&t(bB({width:s,height:o}))},[t,r,s,o]),null},pU={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},HC=mr({name:"legend",initialState:pU,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:pt()},removeLegendPayload:{reducer(e,t){var r=Xn(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:pt()}}}),{setLegendSize:rZ,setLegendSettings:nZ,addLegendPayload:mU,removeLegendPayload:gU}=HC.actions,vU=HC.reducer;function $g(){return $g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$g.apply(null,arguments)}function o_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o_(Object(r),!0).forEach(function(n){yU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yU(e,t,r){return(t=xU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xU(e){var t=bU(e,"string");return typeof t=="symbol"?t:t+""}function bU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wU(e){return Array.isArray(e)&&On(e[0])&&On(e[1])?e.join(" ~ "):e}var _U=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:a,formatter:s,itemSorter:o,wrapperClassName:l,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,p=()=>{if(a&&a.length){var j={padding:0,margin:0},S=(o?th(a,o):a).map((k,N)=>{if(k.type==="none")return null;var C=k.formatter||s||wU,{value:E,name:P}=k,I=E,W=P;if(C){var F=C(E,P,k,N,a);if(Array.isArray(F))[I,W]=F;else if(F!=null)I=F;else return null}var K=zp({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},n);return m.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(N),style:K},On(W)?m.createElement("span",{className:"recharts-tooltip-item-name"},W):null,On(W)?m.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,m.createElement("span",{className:"recharts-tooltip-item-value"},I),m.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return m.createElement("ul",{className:"recharts-tooltip-item-list",style:j},S)}return null},g=zp({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),v=zp({margin:0},i),y=!He(d),x=y?d:"",w=Ae("recharts-default-tooltip",l),b=Ae("recharts-tooltip-label",u);y&&f&&a!==void 0&&a!==null&&(x=f(d,a));var _=h?{role:"status","aria-live":"assertive"}:{};return m.createElement("div",$g({className:w,style:g},_),m.createElement("p",{className:b,style:v},m.isValidElement(x)?x:"".concat(x)),p())},Io="recharts-tooltip-wrapper",jU={visibility:"hidden"};function SU(e){var{coordinate:t,translateX:r,translateY:n}=e;return Ae(Io,{["".concat(Io,"-right")]:ie(r)&&t&&ie(t.x)&&r>=t.x,["".concat(Io,"-left")]:ie(r)&&t&&ie(t.x)&&r<t.x,["".concat(Io,"-bottom")]:ie(n)&&t&&ie(t.y)&&n>=t.y,["".concat(Io,"-top")]:ie(n)&&t&&ie(t.y)&&n<t.y})}function l_(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:l,viewBoxDimension:u}=e;if(a&&ie(a[n]))return a[n];var d=r[n]-o-(i>0?i:0),f=r[n]+i;if(t[n])return s[n]?d:f;var h=l[n];if(h==null)return 0;if(s[n]){var p=d,g=h;return p<g?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var v=f+o,y=h+u;return v>y?Math.max(d,h):Math.max(f,h)}function kU(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function NU(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:a,tooltipBox:s,useTranslate3d:o,viewBox:l}=e,u,d,f;return s.height>0&&s.width>0&&r?(d=l_({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),f=l_({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),u=kU({translateX:d,translateY:f,useTranslate3d:o})):u=jU,{cssProperties:u,cssClasses:SU({translateX:d,translateY:f,coordinate:r})}}function c_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c_(Object(r),!0).forEach(function(n){Fg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fg(e,t,r){return(t=EU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EU(e){var t=CU(e,"string");return typeof t=="symbol"?t:t+""}function CU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class PU extends m.PureComponent{constructor(){super(...arguments),Fg(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Fg(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:l,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:p,wrapperStyle:g,lastBoundingBox:v,innerRef:y,hasPortalFromProps:x}=this.props,{cssClasses:w,cssProperties:b}=NU({allowEscapeViewBox:r,coordinate:s,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:v.height,width:v.width},useTranslate3d:h,viewBox:p}),_=x?{}:fu(fu({transition:l&&t?"transform ".concat(n,"ms ").concat(i):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),j=fu(fu({},_),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},g);return m.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:j,ref:y},a)}}var OU=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Va={devToolsEnabled:!1,isSsr:OU()},qC=()=>{var e;return(e=oe(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Bg(){return Bg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bg.apply(null,arguments)}function u_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function d_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u_(Object(r),!0).forEach(function(n){AU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AU(e,t,r){return(t=TU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TU(e){var t=DU(e,"string");return typeof t=="symbol"?t:t+""}function DU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var f_={curveBasisClosed:u6,curveBasisOpen:d6,curveBasis:c6,curveBumpX:Y3,curveBumpY:X3,curveLinearClosed:f6,curveLinear:Gf,curveMonotoneX:h6,curveMonotoneY:p6,curveNatural:m6,curveStep:g6,curveStepAfter:y6,curveStepBefore:v6},Ld=e=>rt(e.x)&&rt(e.y),h_=e=>e.base!=null&&Ld(e.base)&&Ld(e),Ro=e=>e.x,Mo=e=>e.y,IU=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(dc(e));return(r==="curveMonotone"||r==="curveBump")&&t?f_["".concat(r).concat(t==="vertical"?"Y":"X")]:f_[r]||Gf},RU=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:i,connectNulls:a=!1}=e,s=IU(t,i),o=a?r.filter(Ld):r,l;if(Array.isArray(n)){var u=r.map((p,g)=>d_(d_({},p),{},{base:n[g]}));i==="vertical"?l=au().y(Mo).x1(Ro).x0(p=>p.base.x):l=au().x(Ro).y1(Mo).y0(p=>p.base.y);var d=l.defined(h_).curve(s),f=a?u.filter(h_):u;return d(f)}i==="vertical"&&ie(n)?l=au().y(Mo).x1(Ro).x0(n):ie(n)?l=au().x(Ro).y1(Mo).y0(n):l=hE().x(Ro).y(Mo);var h=l.defined(Ld).curve(s);return h(o)},VC=e=>{var{className:t,points:r,path:n,pathRef:i}=e;if((!r||!r.length)&&!n)return null;var a=r&&r.length?RU(e):n;return m.createElement("path",Bg({},pn(e),Vy(e),{className:Ae("recharts-curve",t),d:a===null?void 0:a,ref:i}))},MU=["x","y","top","left","width","height","className"];function Ug(){return Ug=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ug.apply(null,arguments)}function p_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function LU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p_(Object(r),!0).forEach(function(n){$U(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $U(e,t,r){return(t=FU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FU(e){var t=BU(e,"string");return typeof t=="symbol"?t:t+""}function BU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UU(e,t){if(e==null)return{};var r,n,i=zU(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function zU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var WU=(e,t,r,n,i,a)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),KU=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:a=0,height:s=0,className:o}=e,l=UU(e,MU),u=LU({x:t,y:r,top:n,left:i,width:a,height:s},l);return!ie(t)||!ie(r)||!ie(a)||!ie(s)||!ie(n)||!ie(i)?null:m.createElement("path",Ug({},Qt(u),{className:Ae("recharts-cross",o),d:WU(t,r,a,s,n,i)}))};function HU(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function m_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function g_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m_(Object(r),!0).forEach(function(n){qU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qU(e,t,r){return(t=VU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VU(e){var t=GU(e,"string");return typeof t=="symbol"?t:t+""}function GU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YU=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),GC=(e,t,r)=>e.map(n=>"".concat(YU(n)," ").concat(t,"ms ").concat(r)).join(","),XU=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(i=>n.includes(i))),zl=(e,t)=>Object.keys(t).reduce((r,n)=>g_(g_({},r),{},{[n]:e(n,t[n])}),{});function v_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ft(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v_(Object(r),!0).forEach(function(n){JU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JU(e,t,r){return(t=QU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QU(e){var t=ZU(e,"string");return typeof t=="symbol"?t:t+""}function ZU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $d=(e,t,r)=>e+(t-e)*r,zg=e=>{var{from:t,to:r}=e;return t!==r},YC=(e,t,r)=>{var n=zl((i,a)=>{if(zg(a)){var[s,o]=e(a.from,a.to,a.velocity);return ft(ft({},a),{},{from:s,velocity:o})}return a},t);return r<1?zl((i,a)=>zg(a)?ft(ft({},a),{},{velocity:$d(a.velocity,n[i].velocity,r),from:$d(a.from,n[i].from,r)}):a,t):YC(e,n,r-1)};function ez(e,t,r,n,i,a){var s,o=n.reduce((h,p)=>ft(ft({},h),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),l=()=>zl((h,p)=>p.from,o),u=()=>!Object.values(o).filter(zg).length,d=null,f=h=>{s||(s=h);var p=h-s,g=p/r.dt;o=YC(r,o,g),i(ft(ft(ft({},e),t),l())),s=h,u()||(d=a.setTimeout(f))};return()=>(d=a.setTimeout(f),()=>{var h;(h=d)===null||h===void 0||h()})}function tz(e,t,r,n,i,a,s){var o=null,l=i.reduce((f,h)=>ft(ft({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,p=zl((v,y)=>$d(...y,r(h)),l);if(a(ft(ft(ft({},e),t),p)),h<1)o=s.setTimeout(d);else{var g=zl((v,y)=>$d(...y,r(1)),l);a(ft(ft(ft({},e),t),g))}};return()=>(o=s.setTimeout(d),()=>{var f;(f=o)===null||f===void 0||f()})}const rz=(e,t,r,n,i,a)=>{var s=XU(e,t);return r==null?()=>(i(ft(ft({},e),t)),()=>{}):r.isStepper===!0?ez(e,t,r,s,i,a):tz(e,t,r,n,s,i,a)};var Fd=1e-4,XC=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],JC=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),y_=(e,t)=>r=>{var n=XC(e,t);return JC(n,r)},nz=(e,t)=>r=>{var n=XC(e,t),i=[...n.map((a,s)=>a*s).slice(1),0];return JC(i,r)},iz=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,a=r[0].split("(");if(a[0]==="cubic-bezier"&&((i=a[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var s=a[1].split(")")[0].split(",").map(o=>parseFloat(o));return[s[0],s[1],s[2],s[3]]}}}return r.length===4?r:[0,0,1,1]},az=(e,t,r,n)=>{var i=y_(e,r),a=y_(t,n),s=nz(e,r),o=u=>u>1?1:u<0?0:u,l=u=>{for(var d=u>1?1:u,f=d,h=0;h<8;++h){var p=i(f)-d,g=s(f);if(Math.abs(p-d)<Fd||g<Fd)return a(f);f=o(f-p/g)}return a(f)};return l.isStepper=!1,l},x_=function(){return az(...iz(...arguments))},sz=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=t,a=(s,o,l)=>{var u=-(s-o)*r,d=l*n,f=l+(u-d)*i/1e3,h=l*i/1e3+s;return Math.abs(h-o)<Fd&&Math.abs(f)<Fd?[o,0]:[h,f]};return a.isStepper=!0,a.dt=i,a},oz=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return x_(e);case"spring":return sz();default:if(e.split("(")[0]==="cubic-bezier")return x_(e)}return typeof e=="function"?e:null};function lz(e){var t,r=()=>null,n=!1,i=null,a=s=>{if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,[l,...u]=o;if(typeof l=="number"){i=e.setTimeout(a.bind(null,u),l);return}a(l),i=e.setTimeout(a.bind(null,u));return}typeof s=="string"&&(t=s,r(t)),typeof s=="object"&&(t=s,r(t)),typeof s=="function"&&s()}};return{stop:()=>{n=!0},start:s=>{n=!1,i&&(i(),i=null),a(s)},subscribe:s=>(r=s,()=>{r=()=>null}),getTimeoutController:()=>e}}class cz{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,a=s=>{s-n>=r?t(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function uz(){return lz(new cz)}var dz=m.createContext(uz);function fz(e,t){var r=m.useContext(dz);return m.useMemo(()=>t??r(e),[e,t,r])}var hz={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},b_={t:0},Wp={t:1};function ph(e){var t=rr(e,hz),{isActive:r,canBegin:n,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:l,children:u}=t,d=fz(t.animationId,t.animationManager),[f,h]=m.useState(r?b_:Wp),p=m.useRef(null);return m.useEffect(()=>{r||h(Wp)},[r]),m.useEffect(()=>{if(!r||!n)return fo;var g=rz(b_,Wp,oz(a),i,h,d.getTimeoutController()),v=()=>{p.current=g()};return d.start([l,s,v,i,o]),()=>{d.stop(),p.current&&p.current(),o()}},[r,n,i,a,s,l,o,d]),u(f.t)}function mh(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=m.useRef($l(t)),n=m.useRef(e);return n.current!==e&&(r.current=$l(t),n.current=e),r.current}var pz=["radius"],mz=["radius"];function w_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function __(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w_(Object(r),!0).forEach(function(n){gz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gz(e,t,r){return(t=vz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vz(e){var t=yz(e,"string");return typeof t=="symbol"?t:t+""}function yz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bd(){return Bd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bd.apply(null,arguments)}function j_(e,t){if(e==null)return{};var r,n,i=xz(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function xz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var S_=(e,t,r,n,i)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),s=n>=0?1:-1,o=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0,u;if(a>0&&i instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=i[f]>a?a:i[f];u="M".concat(e,",").concat(t+s*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(l,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(t+s*d[1])),u+="L ".concat(e+r,",").concat(t+n-s*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(l,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(t+n-s*d[3])),u+="Z"}else if(a>0&&i===+i&&i>0){var p=Math.min(a,i);u="M ".concat(e,",").concat(t+s*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+o*p,",").concat(t,`
            L `).concat(e+r-o*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r,",").concat(t+s*p,`
            L `).concat(e+r,",").concat(t+n-s*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r-o*p,",").concat(t+n,`
            L `).concat(e+o*p,",").concat(t+n,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e,",").concat(t+n-s*p," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},k_={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},QC=e=>{var t=rr(e,k_),r=m.useRef(null),[n,i]=m.useState(-1);m.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var H=r.current.getTotalLength();H&&i(H)}catch{}},[]);var{x:a,y:s,width:o,height:l,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isAnimationActive:g,isUpdateAnimationActive:v}=t,y=m.useRef(o),x=m.useRef(l),w=m.useRef(a),b=m.useRef(s),_=m.useMemo(()=>({x:a,y:s,width:o,height:l,radius:u}),[a,s,o,l,u]),j=mh(_,"rectangle-");if(a!==+a||s!==+s||o!==+o||l!==+l||o===0||l===0)return null;var S=Ae("recharts-rectangle",d);if(!v){var k=Qt(t),{radius:N}=k,C=j_(k,pz);return m.createElement("path",Bd({},C,{radius:typeof u=="number"?u:void 0,className:S,d:S_(a,s,o,l,u)}))}var E=y.current,P=x.current,I=w.current,W=b.current,F="0px ".concat(n===-1?1:n,"px"),K="".concat(n,"px 0px"),U=GC(["strokeDasharray"],h,typeof f=="string"?f:k_.animationEasing);return m.createElement(ph,{animationId:j,key:j,canBegin:n>0,duration:h,easing:f,isActive:v,begin:p},H=>{var R=Ze(E,o,H),B=Ze(P,l,H),G=Ze(I,a,H),ae=Ze(W,s,H);r.current&&(y.current=R,x.current=B,w.current=G,b.current=ae);var Q;g?H>0?Q={transition:U,strokeDasharray:K}:Q={strokeDasharray:F}:Q={strokeDasharray:K};var ge=Qt(t),{radius:A}=ge,J=j_(ge,mz);return m.createElement("path",Bd({},J,{radius:typeof u=="number"?u:void 0,className:S,d:S_(G,ae,R,B,u),ref:r,style:__(__({},Q),t.style)}))})};function N_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function E_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N_(Object(r),!0).forEach(function(n){bz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bz(e,t,r){return(t=wz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wz(e){var t=_z(e,"string");return typeof t=="symbol"?t:t+""}function _z(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ud=Math.PI/180,jz=e=>e*180/Math.PI,Mt=(e,t,r,n)=>({x:e+Math.cos(-Ud*n)*r,y:t+Math.sin(-Ud*n)*r}),Sz=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},kz=(e,t)=>{var{x:r,y:n}=e,{x:i,y:a}=t;return Math.sqrt((r-i)**2+(n-a)**2)},Nz=(e,t)=>{var{x:r,y:n}=e,{cx:i,cy:a}=t,s=kz({x:r,y:n},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(r-i)/s,l=Math.acos(o);return n>a&&(l=2*Math.PI-l),{radius:s,angle:jz(l),angleInRadian:l}},Ez=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),a=Math.min(n,i);return{startAngle:t-a*360,endAngle:r-a*360}},Cz=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),a=Math.floor(n/360),s=Math.min(i,a);return e+s*360},Pz=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:i,angle:a}=Nz({x:r,y:n},t),{innerRadius:s,outerRadius:o}=t;if(i<s||i>o||i===0)return null;var{startAngle:l,endAngle:u}=Ez(t),d=a,f;if(l<=u){for(;d>u;)d-=360;for(;d<l;)d+=360;f=d>=l&&d<=u}else{for(;d>l;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=l}return f?E_(E_({},t),{},{radius:i,angle:Cz(d,t)}):null};function ZC(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:a}=e,s=Mt(t,r,n,i),o=Mt(t,r,n,a);return{points:[s,o],cx:t,cy:r,radius:n,startAngle:i,endAngle:a}}function Wg(){return Wg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wg.apply(null,arguments)}var Oz=(e,t)=>{var r=cr(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},hu=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:l}=e,u=o*(s?1:-1)+n,d=Math.asin(o/u)/Ud,f=l?i:i+a*d,h=Mt(t,r,u,f),p=Mt(t,r,n,f),g=l?i-a*d:i,v=Mt(t,r,u*Math.cos(d*Ud),g);return{center:h,circleTangency:p,lineTangency:v,theta:d}},eP=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:a,endAngle:s}=e,o=Oz(a,s),l=a+o,u=Mt(t,r,i,a),d=Mt(t,r,i,l),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(a>l),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=Mt(t,r,n,a),p=Mt(t,r,n,l);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(a<=l),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},Az=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:l,endAngle:u}=e,d=cr(u-l),{circleTangency:f,lineTangency:h,theta:p}=hu({cx:t,cy:r,radius:i,angle:l,sign:d,cornerRadius:a,cornerIsExternal:o}),{circleTangency:g,lineTangency:v,theta:y}=hu({cx:t,cy:r,radius:i,angle:u,sign:-d,cornerRadius:a,cornerIsExternal:o}),x=o?Math.abs(l-u):Math.abs(l-u)-p-y;if(x<0)return s?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):eP({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:l,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(x>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
  `);if(n>0){var{circleTangency:b,lineTangency:_,theta:j}=hu({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:S,lineTangency:k,theta:N}=hu({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),C=o?Math.abs(l-u):Math.abs(l-u)-j-N;if(C<0&&a===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(k.x,",").concat(k.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(S.x,",").concat(S.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(C>180),",").concat(+(d>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},Tz={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},tP=e=>{var t=rr(e,Tz),{cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d,className:f}=t;if(a<i||u===d)return null;var h=Ae("recharts-sector",f),p=a-i,g=gn(s,p,0,!0),v;return g>0&&Math.abs(u-d)<360?v=Az({cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:Math.min(g,p/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d}):v=eP({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:u,endAngle:d}),m.createElement("path",Wg({},Qt(t),{className:h,d:v}))};function Dz(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(OE(t)){if(e==="centric"){var{cx:n,cy:i,innerRadius:a,outerRadius:s,angle:o}=t,l=Mt(n,i,a,o),u=Mt(n,i,s,o);return[{x:l.x,y:l.y},{x:u.x,y:u.y}]}return ZC(t)}}var rP={},nP={},iP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=a0;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(iP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iP;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(nP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s0,r=nP;function n(i,a,s){s&&typeof s!="number"&&t.isIterateeCall(i,a,s)&&(a=s=void 0),i=r.toFinite(i),a===void 0?(a=i,i=0):a=r.toFinite(a),s=s===void 0?i<a?1:-1:r.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),l=new Array(o);for(let u=0;u<o;u++)l[u]=i,i+=s;return l}e.range=n})(rP);var Iz=rP.range;const aP=di(Iz);function Hi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Rz(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function p0(e){let t,r,n;e.length!==2?(t=Hi,r=(o,l)=>Hi(e(o),l),n=(o,l)=>e(o)-l):(t=e===Hi||e===Rz?e:Mz,r=e,n=e);function i(o,l,u=0,d=o.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(o[f],l)<0?u=f+1:d=f}while(u<d)}return u}function a(o,l,u=0,d=o.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(o[f],l)<=0?u=f+1:d=f}while(u<d)}return u}function s(o,l,u=0,d=o.length){const f=i(o,l,u,d-1);return f>u&&n(o[f-1],l)>-n(o[f],l)?f-1:f}return{left:i,center:s,right:a}}function Mz(){return 0}function sP(e){return e===null?NaN:+e}function*Lz(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const $z=p0(Hi),gc=$z.right;p0(sP).center;class C_ extends Map{constructor(t,r=Uz){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(P_(this,t))}has(t){return super.has(P_(this,t))}set(t,r){return super.set(Fz(this,t),r)}delete(t){return super.delete(Bz(this,t))}}function P_({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Fz({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Bz({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Uz(e){return e!==null&&typeof e=="object"?e.valueOf():e}function zz(e=Hi){if(e===Hi)return oP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function oP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Wz=Math.sqrt(50),Kz=Math.sqrt(10),Hz=Math.sqrt(2);function zd(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=Wz?10:a>=Kz?5:a>=Hz?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(e*u),l=Math.round(t*u),o/u<e&&++o,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*s,o=Math.round(e/u),l=Math.round(t/u),o*u<e&&++o,l*u>t&&--l),l<o&&.5<=r&&r<2?zd(e,t,r*2):[o,l,u]}function Kg(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,a,s]=n?zd(t,e,r):zd(e,t,r);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(n)if(s<0)for(let u=0;u<o;++u)l[u]=(a-u)/-s;else for(let u=0;u<o;++u)l[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)l[u]=(i+u)/-s;else for(let u=0;u<o;++u)l[u]=(i+u)*s;return l}function Hg(e,t,r){return t=+t,e=+e,r=+r,zd(e,t,r)[2]}function qg(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?Hg(t,e,r):Hg(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function O_(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function A_(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function lP(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?oP:zz(i);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,d=Math.log(l),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/l+h)),g=Math.min(n,Math.floor(t+(l-u)*f/l+h));lP(e,t,p,g,i)}const a=e[t];let s=r,o=n;for(Lo(e,r,t),i(e[n],a)>0&&Lo(e,r,n);s<o;){for(Lo(e,s,o),++s,--o;i(e[s],a)<0;)++s;for(;i(e[o],a)>0;)--o}i(e[r],a)===0?Lo(e,r,o):(++o,Lo(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function Lo(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function qz(e,t,r){if(e=Float64Array.from(Lz(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return A_(e);if(t>=1)return O_(e);var n,i=(n-1)*t,a=Math.floor(i),s=O_(lP(e,a).subarray(0,a+1)),o=A_(e.subarray(a+1));return s+(o-s)*(i-a)}}function Vz(e,t,r=sP){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,a=Math.floor(i),s=+r(e[a],a,e),o=+r(e[a+1],a+1,e);return s+(o-s)*(i-a)}}function Gz(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(i);++n<i;)a[n]=e+n*r;return a}function Gr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function mi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Vg=Symbol("implicit");function m0(){var e=new C_,t=[],r=[],n=Vg;function i(a){let s=e.get(a);if(s===void 0){if(n!==Vg)return n;e.set(a,s=t.push(a)-1)}return r[s%r.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new C_;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return m0(t,r).unknown(n)},Gr.apply(i,arguments),i}function g0(){var e=m0().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,a,s,o=!1,l=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,p=i<n,g=p?i:n,v=p?n:i;a=(v-g)/Math.max(1,h-l+u*2),o&&(a=Math.floor(a)),g+=(v-g-a*(h-l))*d,s=a*(1-l),o&&(g=Math.round(g),s=Math.round(s));var y=Gz(h).map(function(x){return g+a*x});return r(p?y.reverse():y)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,i]=h,n=+n,i=+i,f()):[n,i]},e.rangeRound=function(h){return[n,i]=h,n=+n,i=+i,o=!0,f()},e.bandwidth=function(){return s},e.step=function(){return a},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return g0(t(),[n,i]).round(o).paddingInner(l).paddingOuter(u).align(d)},Gr.apply(f(),arguments)}function cP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return cP(t())},e}function Yz(){return cP(g0.apply(null,arguments).paddingInner(1))}function v0(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function uP(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function vc(){}var Wl=.7,Wd=1/Wl,Ds="\\s*([+-]?\\d+)\\s*",Kl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Cn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xz=/^#([0-9a-f]{3,8})$/,Jz=new RegExp(`^rgb\\(${Ds},${Ds},${Ds}\\)$`),Qz=new RegExp(`^rgb\\(${Cn},${Cn},${Cn}\\)$`),Zz=new RegExp(`^rgba\\(${Ds},${Ds},${Ds},${Kl}\\)$`),e8=new RegExp(`^rgba\\(${Cn},${Cn},${Cn},${Kl}\\)$`),t8=new RegExp(`^hsl\\(${Kl},${Cn},${Cn}\\)$`),r8=new RegExp(`^hsla\\(${Kl},${Cn},${Cn},${Kl}\\)$`),T_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};v0(vc,Hl,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:D_,formatHex:D_,formatHex8:n8,formatHsl:i8,formatRgb:I_,toString:I_});function D_(){return this.rgb().formatHex()}function n8(){return this.rgb().formatHex8()}function i8(){return dP(this).formatHsl()}function I_(){return this.rgb().formatRgb()}function Hl(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Xz.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?R_(t):r===3?new ur(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?pu(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?pu(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Jz.exec(e))?new ur(t[1],t[2],t[3],1):(t=Qz.exec(e))?new ur(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Zz.exec(e))?pu(t[1],t[2],t[3],t[4]):(t=e8.exec(e))?pu(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=t8.exec(e))?$_(t[1],t[2]/100,t[3]/100,1):(t=r8.exec(e))?$_(t[1],t[2]/100,t[3]/100,t[4]):T_.hasOwnProperty(e)?R_(T_[e]):e==="transparent"?new ur(NaN,NaN,NaN,0):null}function R_(e){return new ur(e>>16&255,e>>8&255,e&255,1)}function pu(e,t,r,n){return n<=0&&(e=t=r=NaN),new ur(e,t,r,n)}function a8(e){return e instanceof vc||(e=Hl(e)),e?(e=e.rgb(),new ur(e.r,e.g,e.b,e.opacity)):new ur}function Gg(e,t,r,n){return arguments.length===1?a8(e):new ur(e,t,r,n??1)}function ur(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}v0(ur,Gg,uP(vc,{brighter(e){return e=e==null?Wd:Math.pow(Wd,e),new ur(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Wl:Math.pow(Wl,e),new ur(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ur(Oa(this.r),Oa(this.g),Oa(this.b),Kd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M_,formatHex:M_,formatHex8:s8,formatRgb:L_,toString:L_}));function M_(){return`#${ja(this.r)}${ja(this.g)}${ja(this.b)}`}function s8(){return`#${ja(this.r)}${ja(this.g)}${ja(this.b)}${ja((isNaN(this.opacity)?1:this.opacity)*255)}`}function L_(){const e=Kd(this.opacity);return`${e===1?"rgb(":"rgba("}${Oa(this.r)}, ${Oa(this.g)}, ${Oa(this.b)}${e===1?")":`, ${e})`}`}function Kd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Oa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ja(e){return e=Oa(e),(e<16?"0":"")+e.toString(16)}function $_(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ln(e,t,r,n)}function dP(e){if(e instanceof ln)return new ln(e.h,e.s,e.l,e.opacity);if(e instanceof vc||(e=Hl(e)),!e)return new ln;if(e instanceof ln)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),s=NaN,o=a-i,l=(a+i)/2;return o?(t===a?s=(r-n)/o+(r<n)*6:r===a?s=(n-t)/o+2:s=(t-r)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new ln(s,o,l,e.opacity)}function o8(e,t,r,n){return arguments.length===1?dP(e):new ln(e,t,r,n??1)}function ln(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}v0(ln,o8,uP(vc,{brighter(e){return e=e==null?Wd:Math.pow(Wd,e),new ln(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Wl:Math.pow(Wl,e),new ln(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new ur(Kp(e>=240?e-240:e+120,i,n),Kp(e,i,n),Kp(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new ln(F_(this.h),mu(this.s),mu(this.l),Kd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Kd(this.opacity);return`${e===1?"hsl(":"hsla("}${F_(this.h)}, ${mu(this.s)*100}%, ${mu(this.l)*100}%${e===1?")":`, ${e})`}`}}));function F_(e){return e=(e||0)%360,e<0?e+360:e}function mu(e){return Math.max(0,Math.min(1,e||0))}function Kp(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const y0=e=>()=>e;function l8(e,t){return function(r){return e+r*t}}function c8(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function u8(e){return(e=+e)==1?fP:function(t,r){return r-t?c8(t,r,e):y0(isNaN(t)?r:t)}}function fP(e,t){var r=t-e;return r?l8(e,r):y0(isNaN(e)?t:e)}const B_=function e(t){var r=u8(t);function n(i,a){var s=r((i=Gg(i)).r,(a=Gg(a)).r),o=r(i.g,a.g),l=r(i.b,a.b),u=fP(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=o(d),i.b=l(d),i.opacity=u(d),i+""}}return n.gamma=e,n}(1);function d8(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=e[i]*(1-a)+t[i]*a;return n}}function f8(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function h8(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)i[s]=ho(e[s],t[s]);for(;s<r;++s)a[s]=t[s];return function(o){for(s=0;s<n;++s)a[s]=i[s](o);return a}}function p8(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Hd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function m8(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=ho(e[i],t[i]):n[i]=t[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var Yg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hp=new RegExp(Yg.source,"g");function g8(e){return function(){return e}}function v8(e){return function(t){return e(t)+""}}function y8(e,t){var r=Yg.lastIndex=Hp.lastIndex=0,n,i,a,s=-1,o=[],l=[];for(e=e+"",t=t+"";(n=Yg.exec(e))&&(i=Hp.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:Hd(n,i)})),r=Hp.lastIndex;return r<t.length&&(a=t.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?v8(l[0].x):g8(t):(t=l.length,function(u){for(var d=0,f;d<t;++d)o[(f=l[d]).i]=f.x(u);return o.join("")})}function ho(e,t){var r=typeof t,n;return t==null||r==="boolean"?y0(t):(r==="number"?Hd:r==="string"?(n=Hl(t))?(t=n,B_):y8:t instanceof Hl?B_:t instanceof Date?p8:f8(t)?d8:Array.isArray(t)?h8:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?m8:Hd)(e,t)}function x0(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function x8(e,t){t===void 0&&(t=e,e=ho);for(var r=0,n=t.length-1,i=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(i,i=t[++r]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[o](s-o)}}function b8(e){return function(){return e}}function qd(e){return+e}var U_=[0,1];function Xt(e){return e}function Xg(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:b8(isNaN(t)?NaN:.5)}function w8(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function _8(e,t,r){var n=e[0],i=e[1],a=t[0],s=t[1];return i<n?(n=Xg(i,n),a=r(s,a)):(n=Xg(n,i),a=r(a,s)),function(o){return a(n(o))}}function j8(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),a=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)i[s]=Xg(e[s],e[s+1]),a[s]=r(t[s],t[s+1]);return function(o){var l=gc(e,o,1,n)-1;return a[l](i[l](o))}}function yc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function gh(){var e=U_,t=U_,r=ho,n,i,a,s=Xt,o,l,u;function d(){var h=Math.min(e.length,t.length);return s!==Xt&&(s=w8(e[0],e[h-1])),o=h>2?j8:_8,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(l||(l=o(e.map(n),t,r)))(n(s(h)))}return f.invert=function(h){return s(i((u||(u=o(t,e.map(n),Hd)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,qd),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=x0,d()},f.clamp=function(h){return arguments.length?(s=h?!0:Xt,d()):s!==Xt},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,p){return n=h,i=p,d()}}function b0(){return gh()(Xt,Xt)}function S8(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Vd(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Gs(e){return e=Vd(Math.abs(e)),e?e[1]:NaN}function k8(e,t){return function(r,n){for(var i=r.length,a=[],s=0,o=e[0],l=0;i>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),a.push(r.substring(i-=o,i+o)),!((l+=o+1)>n));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function N8(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var E8=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ql(e){if(!(t=E8.exec(e)))throw new Error("invalid format: "+e);var t;return new w0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ql.prototype=w0.prototype;function w0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}w0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function C8(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var hP;function P8(e,t){var r=Vd(e,t);if(!r)return e+"";var n=r[0],i=r[1],a=i-(hP=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Vd(e,Math.max(0,t+a-1))[0]}function z_(e,t){var r=Vd(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const W_={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:S8,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>z_(e*100,t),r:z_,s:P8,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function K_(e){return e}var H_=Array.prototype.map,q_=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function O8(e){var t=e.grouping===void 0||e.thousands===void 0?K_:k8(H_.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?K_:N8(H_.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=ql(f);var h=f.fill,p=f.align,g=f.sign,v=f.symbol,y=f.zero,x=f.width,w=f.comma,b=f.precision,_=f.trim,j=f.type;j==="n"?(w=!0,j="g"):W_[j]||(b===void 0&&(b=12),_=!0,j="g"),(y||h==="0"&&p==="=")&&(y=!0,h="0",p="=");var S=v==="$"?r:v==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",k=v==="$"?n:/[%p]/.test(j)?s:"",N=W_[j],C=/[defgprs%]/.test(j);b=b===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function E(P){var I=S,W=k,F,K,U;if(j==="c")W=N(P)+W,P="";else{P=+P;var H=P<0||1/P<0;if(P=isNaN(P)?l:N(Math.abs(P),b),_&&(P=C8(P)),H&&+P==0&&g!=="+"&&(H=!1),I=(H?g==="("?g:o:g==="-"||g==="("?"":g)+I,W=(j==="s"?q_[8+hP/3]:"")+W+(H&&g==="("?")":""),C){for(F=-1,K=P.length;++F<K;)if(U=P.charCodeAt(F),48>U||U>57){W=(U===46?i+P.slice(F+1):P.slice(F))+W,P=P.slice(0,F);break}}}w&&!y&&(P=t(P,1/0));var R=I.length+P.length+W.length,B=R<x?new Array(x-R+1).join(h):"";switch(w&&y&&(P=t(B+P,B.length?x-W.length:1/0),B=""),p){case"<":P=I+P+W+B;break;case"=":P=I+B+P+W;break;case"^":P=B.slice(0,R=B.length>>1)+I+P+W+B.slice(R);break;default:P=B+I+P+W;break}return a(P)}return E.toString=function(){return f+""},E}function d(f,h){var p=u((f=ql(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Gs(h)/3)))*3,v=Math.pow(10,-g),y=q_[8+g/3];return function(x){return p(v*x)+y}}return{format:u,formatPrefix:d}}var gu,_0,pP;A8({thousands:",",grouping:[3],currency:["$",""]});function A8(e){return gu=O8(e),_0=gu.format,pP=gu.formatPrefix,gu}function T8(e){return Math.max(0,-Gs(Math.abs(e)))}function D8(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Gs(t)/3)))*3-Gs(Math.abs(e)))}function I8(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Gs(t)-Gs(e))+1}function mP(e,t,r,n){var i=qg(e,t,r),a;switch(n=ql(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=D8(i,s))&&(n.precision=a),pP(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=I8(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=T8(i))&&(n.precision=a-(n.type==="%")*2);break}}return _0(n)}function na(e){var t=e.domain;return e.ticks=function(r){var n=t();return Kg(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return mP(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,a=n.length-1,s=n[i],o=n[a],l,u,d=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);d-- >0;){if(u=Hg(s,o,r),u===l)return n[i]=s,n[a]=o,t(n);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;l=u}return e},e}function gP(){var e=b0();return e.copy=function(){return yc(e,gP())},Gr.apply(e,arguments),na(e)}function vP(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,qd),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return vP(e).unknown(t)},e=arguments.length?Array.from(e,qd):[0,1],na(r)}function yP(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],a=e[n],s;return a<i&&(s=r,r=n,n=s,s=i,i=a,a=s),e[r]=t.floor(i),e[n]=t.ceil(a),e}function V_(e){return Math.log(e)}function G_(e){return Math.exp(e)}function R8(e){return-Math.log(-e)}function M8(e){return-Math.exp(-e)}function L8(e){return isFinite(e)?+("1e"+e):e<0?0:e}function $8(e){return e===10?L8:e===Math.E?Math.exp:t=>Math.pow(e,t)}function F8(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Y_(e){return(t,r)=>-e(-t,r)}function j0(e){const t=e(V_,G_),r=t.domain;let n=10,i,a;function s(){return i=F8(n),a=$8(n),r()[0]<0?(i=Y_(i),a=Y_(a),e(R8,M8)):e(V_,G_),t}return t.base=function(o){return arguments.length?(n=+o,s()):n},t.domain=function(o){return arguments.length?(r(o),s()):r()},t.ticks=o=>{const l=r();let u=l[0],d=l[l.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=i(u),p=i(d),g,v;const y=o==null?10:+o;let x=[];if(!(n%1)&&p-h<y){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(g=1;g<n;++g)if(v=h<0?g/a(-h):g*a(h),!(v<u)){if(v>d)break;x.push(v)}}else for(;h<=p;++h)for(g=n-1;g>=1;--g)if(v=h>0?g/a(-h):g*a(h),!(v<u)){if(v>d)break;x.push(v)}x.length*2<y&&(x=Kg(u,d,y))}else x=Kg(h,p,Math.min(p-h,y)).map(a);return f?x.reverse():x},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=ql(l)).precision==null&&(l.trim=!0),l=_0(l)),o===1/0)return l;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/a(Math.round(i(d)));return f*n<n-.5&&(f*=n),f<=u?l(d):""}},t.nice=()=>r(yP(r(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),t}function xP(){const e=j0(gh()).domain([1,10]);return e.copy=()=>yc(e,xP()).base(e.base()),Gr.apply(e,arguments),e}function X_(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function J_(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function S0(e){var t=1,r=e(X_(t),J_(t));return r.constant=function(n){return arguments.length?e(X_(t=+n),J_(t)):t},na(r)}function bP(){var e=S0(gh());return e.copy=function(){return yc(e,bP()).constant(e.constant())},Gr.apply(e,arguments)}function Q_(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function B8(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function U8(e){return e<0?-e*e:e*e}function k0(e){var t=e(Xt,Xt),r=1;function n(){return r===1?e(Xt,Xt):r===.5?e(B8,U8):e(Q_(r),Q_(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},na(t)}function N0(){var e=k0(gh());return e.copy=function(){return yc(e,N0()).exponent(e.exponent())},Gr.apply(e,arguments),e}function z8(){return N0.apply(null,arguments).exponent(.5)}function Z_(e){return Math.sign(e)*e*e}function W8(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function wP(){var e=b0(),t=[0,1],r=!1,n;function i(a){var s=W8(e(a));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(a){return e.invert(Z_(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,qd)).map(Z_)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return wP(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Gr.apply(i,arguments),na(i)}function _P(){var e=[],t=[],r=[],n;function i(){var s=0,o=Math.max(1,t.length);for(r=new Array(o-1);++s<o;)r[s-1]=Vz(e,s/o);return a}function a(s){return s==null||isNaN(s=+s)?n:t[gc(r,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Hi),i()},a.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return _P().domain(e).range(t).unknown(n)},Gr.apply(a,arguments)}function jP(){var e=0,t=1,r=1,n=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[gc(n,l,0,r)]:a}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},s.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return n.slice()},s.copy=function(){return jP().domain([e,t]).range(i).unknown(a)},Gr.apply(na(s),arguments)}function SP(){var e=[.5],t=[0,1],r,n=1;function i(a){return a!=null&&a<=a?t[gc(e,a,0,n)]:r}return i.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return SP().domain(e).range(t).unknown(r)},Gr.apply(i,arguments)}const qp=new Date,Vp=new Date;function vt(e,t,r,n){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let u;do l.push(u=new Date(+a)),t(a,o),e(a);while(u<a&&a<s);return l},i.filter=a=>vt(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),r&&(i.count=(a,s)=>(qp.setTime(+a),Vp.setTime(+s),e(qp),e(Vp),Math.floor(r(qp,Vp))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const Gd=vt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Gd.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?vt(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Gd);Gd.range;const qn=1e3,Ur=qn*60,Vn=Ur*60,si=Vn*24,E0=si*7,e1=si*30,Gp=si*365,Sa=vt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*qn)},(e,t)=>(t-e)/qn,e=>e.getUTCSeconds());Sa.range;const C0=vt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*qn)},(e,t)=>{e.setTime(+e+t*Ur)},(e,t)=>(t-e)/Ur,e=>e.getMinutes());C0.range;const P0=vt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ur)},(e,t)=>(t-e)/Ur,e=>e.getUTCMinutes());P0.range;const O0=vt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*qn-e.getMinutes()*Ur)},(e,t)=>{e.setTime(+e+t*Vn)},(e,t)=>(t-e)/Vn,e=>e.getHours());O0.range;const A0=vt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Vn)},(e,t)=>(t-e)/Vn,e=>e.getUTCHours());A0.range;const xc=vt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ur)/si,e=>e.getDate()-1);xc.range;const vh=vt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/si,e=>e.getUTCDate()-1);vh.range;const kP=vt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/si,e=>Math.floor(e/si));kP.range;function Ga(e){return vt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ur)/E0)}const yh=Ga(0),Yd=Ga(1),K8=Ga(2),H8=Ga(3),Ys=Ga(4),q8=Ga(5),V8=Ga(6);yh.range;Yd.range;K8.range;H8.range;Ys.range;q8.range;V8.range;function Ya(e){return vt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/E0)}const xh=Ya(0),Xd=Ya(1),G8=Ya(2),Y8=Ya(3),Xs=Ya(4),X8=Ya(5),J8=Ya(6);xh.range;Xd.range;G8.range;Y8.range;Xs.range;X8.range;J8.range;const T0=vt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());T0.range;const D0=vt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());D0.range;const oi=vt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());oi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:vt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});oi.range;const li=vt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());li.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:vt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});li.range;function NP(e,t,r,n,i,a){const s=[[Sa,1,qn],[Sa,5,5*qn],[Sa,15,15*qn],[Sa,30,30*qn],[a,1,Ur],[a,5,5*Ur],[a,15,15*Ur],[a,30,30*Ur],[i,1,Vn],[i,3,3*Vn],[i,6,6*Vn],[i,12,12*Vn],[n,1,si],[n,2,2*si],[r,1,E0],[t,1,e1],[t,3,3*e1],[e,1,Gp]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:l(u,d,f),g=p?p.range(u,+d+1):[];return h?g.reverse():g}function l(u,d,f){const h=Math.abs(d-u)/f,p=p0(([,,y])=>y).right(s,h);if(p===s.length)return e.every(qg(u/Gp,d/Gp,f));if(p===0)return Gd.every(Math.max(qg(u,d,f),1));const[g,v]=s[h/s[p-1][2]<s[p][2]/h?p-1:p];return g.every(v)}return[o,l]}const[Q8,Z8]=NP(li,D0,xh,kP,A0,P0),[eW,tW]=NP(oi,T0,yh,xc,O0,C0);function Yp(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Xp(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function $o(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function rW(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,a=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,u=Fo(i),d=Bo(i),f=Fo(a),h=Bo(a),p=Fo(s),g=Bo(s),v=Fo(o),y=Bo(o),x=Fo(l),w=Bo(l),b={a:H,A:R,b:B,B:G,c:null,d:s1,e:s1,f:kW,g:RW,G:LW,H:_W,I:jW,j:SW,L:EP,m:NW,M:EW,p:ae,q:Q,Q:c1,s:u1,S:CW,u:PW,U:OW,V:AW,w:TW,W:DW,x:null,X:null,y:IW,Y:MW,Z:$W,"%":l1},_={a:ge,A,b:J,B:re,c:null,d:o1,e:o1,f:zW,g:QW,G:e9,H:FW,I:BW,j:UW,L:PP,m:WW,M:KW,p:he,q:_e,Q:c1,s:u1,S:HW,u:qW,U:VW,V:GW,w:YW,W:XW,x:null,X:null,y:JW,Y:ZW,Z:t9,"%":l1},j={a:E,A:P,b:I,B:W,c:F,d:i1,e:i1,f:yW,g:n1,G:r1,H:a1,I:a1,j:pW,L:vW,m:hW,M:mW,p:C,q:fW,Q:bW,s:wW,S:gW,u:oW,U:lW,V:cW,w:sW,W:uW,x:K,X:U,y:n1,Y:r1,Z:dW,"%":xW};b.x=S(r,b),b.X=S(n,b),b.c=S(t,b),_.x=S(r,_),_.X=S(n,_),_.c=S(t,_);function S(O,L){return function(Y){var M=[],Se=-1,D=0,ce=O.length,ve,q,xe;for(Y instanceof Date||(Y=new Date(+Y));++Se<ce;)O.charCodeAt(Se)===37&&(M.push(O.slice(D,Se)),(q=t1[ve=O.charAt(++Se)])!=null?ve=O.charAt(++Se):q=ve==="e"?" ":"0",(xe=L[ve])&&(ve=xe(Y,q)),M.push(ve),D=Se+1);return M.push(O.slice(D,Se)),M.join("")}}function k(O,L){return function(Y){var M=$o(1900,void 0,1),Se=N(M,O,Y+="",0),D,ce;if(Se!=Y.length)return null;if("Q"in M)return new Date(M.Q);if("s"in M)return new Date(M.s*1e3+("L"in M?M.L:0));if(L&&!("Z"in M)&&(M.Z=0),"p"in M&&(M.H=M.H%12+M.p*12),M.m===void 0&&(M.m="q"in M?M.q:0),"V"in M){if(M.V<1||M.V>53)return null;"w"in M||(M.w=1),"Z"in M?(D=Xp($o(M.y,0,1)),ce=D.getUTCDay(),D=ce>4||ce===0?Xd.ceil(D):Xd(D),D=vh.offset(D,(M.V-1)*7),M.y=D.getUTCFullYear(),M.m=D.getUTCMonth(),M.d=D.getUTCDate()+(M.w+6)%7):(D=Yp($o(M.y,0,1)),ce=D.getDay(),D=ce>4||ce===0?Yd.ceil(D):Yd(D),D=xc.offset(D,(M.V-1)*7),M.y=D.getFullYear(),M.m=D.getMonth(),M.d=D.getDate()+(M.w+6)%7)}else("W"in M||"U"in M)&&("w"in M||(M.w="u"in M?M.u%7:"W"in M?1:0),ce="Z"in M?Xp($o(M.y,0,1)).getUTCDay():Yp($o(M.y,0,1)).getDay(),M.m=0,M.d="W"in M?(M.w+6)%7+M.W*7-(ce+5)%7:M.w+M.U*7-(ce+6)%7);return"Z"in M?(M.H+=M.Z/100|0,M.M+=M.Z%100,Xp(M)):Yp(M)}}function N(O,L,Y,M){for(var Se=0,D=L.length,ce=Y.length,ve,q;Se<D;){if(M>=ce)return-1;if(ve=L.charCodeAt(Se++),ve===37){if(ve=L.charAt(Se++),q=j[ve in t1?L.charAt(Se++):ve],!q||(M=q(O,Y,M))<0)return-1}else if(ve!=Y.charCodeAt(M++))return-1}return M}function C(O,L,Y){var M=u.exec(L.slice(Y));return M?(O.p=d.get(M[0].toLowerCase()),Y+M[0].length):-1}function E(O,L,Y){var M=p.exec(L.slice(Y));return M?(O.w=g.get(M[0].toLowerCase()),Y+M[0].length):-1}function P(O,L,Y){var M=f.exec(L.slice(Y));return M?(O.w=h.get(M[0].toLowerCase()),Y+M[0].length):-1}function I(O,L,Y){var M=x.exec(L.slice(Y));return M?(O.m=w.get(M[0].toLowerCase()),Y+M[0].length):-1}function W(O,L,Y){var M=v.exec(L.slice(Y));return M?(O.m=y.get(M[0].toLowerCase()),Y+M[0].length):-1}function F(O,L,Y){return N(O,t,L,Y)}function K(O,L,Y){return N(O,r,L,Y)}function U(O,L,Y){return N(O,n,L,Y)}function H(O){return s[O.getDay()]}function R(O){return a[O.getDay()]}function B(O){return l[O.getMonth()]}function G(O){return o[O.getMonth()]}function ae(O){return i[+(O.getHours()>=12)]}function Q(O){return 1+~~(O.getMonth()/3)}function ge(O){return s[O.getUTCDay()]}function A(O){return a[O.getUTCDay()]}function J(O){return l[O.getUTCMonth()]}function re(O){return o[O.getUTCMonth()]}function he(O){return i[+(O.getUTCHours()>=12)]}function _e(O){return 1+~~(O.getUTCMonth()/3)}return{format:function(O){var L=S(O+="",b);return L.toString=function(){return O},L},parse:function(O){var L=k(O+="",!1);return L.toString=function(){return O},L},utcFormat:function(O){var L=S(O+="",_);return L.toString=function(){return O},L},utcParse:function(O){var L=k(O+="",!0);return L.toString=function(){return O},L}}}var t1={"-":"",_:" ",0:"0"},Pt=/^\s*\d+/,nW=/^%/,iW=/[\\^$*+?|[\]().{}]/g;function Ne(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function aW(e){return e.replace(iW,"\\$&")}function Fo(e){return new RegExp("^(?:"+e.map(aW).join("|")+")","i")}function Bo(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function sW(e,t,r){var n=Pt.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function oW(e,t,r){var n=Pt.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function lW(e,t,r){var n=Pt.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function cW(e,t,r){var n=Pt.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function uW(e,t,r){var n=Pt.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function r1(e,t,r){var n=Pt.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function n1(e,t,r){var n=Pt.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function dW(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function fW(e,t,r){var n=Pt.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function hW(e,t,r){var n=Pt.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function i1(e,t,r){var n=Pt.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function pW(e,t,r){var n=Pt.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function a1(e,t,r){var n=Pt.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function mW(e,t,r){var n=Pt.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function gW(e,t,r){var n=Pt.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function vW(e,t,r){var n=Pt.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function yW(e,t,r){var n=Pt.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function xW(e,t,r){var n=nW.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function bW(e,t,r){var n=Pt.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function wW(e,t,r){var n=Pt.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function s1(e,t){return Ne(e.getDate(),t,2)}function _W(e,t){return Ne(e.getHours(),t,2)}function jW(e,t){return Ne(e.getHours()%12||12,t,2)}function SW(e,t){return Ne(1+xc.count(oi(e),e),t,3)}function EP(e,t){return Ne(e.getMilliseconds(),t,3)}function kW(e,t){return EP(e,t)+"000"}function NW(e,t){return Ne(e.getMonth()+1,t,2)}function EW(e,t){return Ne(e.getMinutes(),t,2)}function CW(e,t){return Ne(e.getSeconds(),t,2)}function PW(e){var t=e.getDay();return t===0?7:t}function OW(e,t){return Ne(yh.count(oi(e)-1,e),t,2)}function CP(e){var t=e.getDay();return t>=4||t===0?Ys(e):Ys.ceil(e)}function AW(e,t){return e=CP(e),Ne(Ys.count(oi(e),e)+(oi(e).getDay()===4),t,2)}function TW(e){return e.getDay()}function DW(e,t){return Ne(Yd.count(oi(e)-1,e),t,2)}function IW(e,t){return Ne(e.getFullYear()%100,t,2)}function RW(e,t){return e=CP(e),Ne(e.getFullYear()%100,t,2)}function MW(e,t){return Ne(e.getFullYear()%1e4,t,4)}function LW(e,t){var r=e.getDay();return e=r>=4||r===0?Ys(e):Ys.ceil(e),Ne(e.getFullYear()%1e4,t,4)}function $W(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ne(t/60|0,"0",2)+Ne(t%60,"0",2)}function o1(e,t){return Ne(e.getUTCDate(),t,2)}function FW(e,t){return Ne(e.getUTCHours(),t,2)}function BW(e,t){return Ne(e.getUTCHours()%12||12,t,2)}function UW(e,t){return Ne(1+vh.count(li(e),e),t,3)}function PP(e,t){return Ne(e.getUTCMilliseconds(),t,3)}function zW(e,t){return PP(e,t)+"000"}function WW(e,t){return Ne(e.getUTCMonth()+1,t,2)}function KW(e,t){return Ne(e.getUTCMinutes(),t,2)}function HW(e,t){return Ne(e.getUTCSeconds(),t,2)}function qW(e){var t=e.getUTCDay();return t===0?7:t}function VW(e,t){return Ne(xh.count(li(e)-1,e),t,2)}function OP(e){var t=e.getUTCDay();return t>=4||t===0?Xs(e):Xs.ceil(e)}function GW(e,t){return e=OP(e),Ne(Xs.count(li(e),e)+(li(e).getUTCDay()===4),t,2)}function YW(e){return e.getUTCDay()}function XW(e,t){return Ne(Xd.count(li(e)-1,e),t,2)}function JW(e,t){return Ne(e.getUTCFullYear()%100,t,2)}function QW(e,t){return e=OP(e),Ne(e.getUTCFullYear()%100,t,2)}function ZW(e,t){return Ne(e.getUTCFullYear()%1e4,t,4)}function e9(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Xs(e):Xs.ceil(e),Ne(e.getUTCFullYear()%1e4,t,4)}function t9(){return"+0000"}function l1(){return"%"}function c1(e){return+e}function u1(e){return Math.floor(+e/1e3)}var rs,AP,TP;r9({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function r9(e){return rs=rW(e),AP=rs.format,rs.parse,TP=rs.utcFormat,rs.utcParse,rs}function n9(e){return new Date(e)}function i9(e){return e instanceof Date?+e:+new Date(+e)}function I0(e,t,r,n,i,a,s,o,l,u){var d=b0(),f=d.invert,h=d.domain,p=u(".%L"),g=u(":%S"),v=u("%I:%M"),y=u("%I %p"),x=u("%a %d"),w=u("%b %d"),b=u("%B"),_=u("%Y");function j(S){return(l(S)<S?p:o(S)<S?g:s(S)<S?v:a(S)<S?y:n(S)<S?i(S)<S?x:w:r(S)<S?b:_)(S)}return d.invert=function(S){return new Date(f(S))},d.domain=function(S){return arguments.length?h(Array.from(S,i9)):h().map(n9)},d.ticks=function(S){var k=h();return e(k[0],k[k.length-1],S??10)},d.tickFormat=function(S,k){return k==null?j:u(k)},d.nice=function(S){var k=h();return(!S||typeof S.range!="function")&&(S=t(k[0],k[k.length-1],S??10)),S?h(yP(k,S)):d},d.copy=function(){return yc(d,I0(e,t,r,n,i,a,s,o,l,u))},d}function a9(){return Gr.apply(I0(eW,tW,oi,T0,yh,xc,O0,C0,Sa,AP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function s9(){return Gr.apply(I0(Q8,Z8,li,D0,xh,vh,A0,P0,Sa,TP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function bh(){var e=0,t=1,r,n,i,a,s=Xt,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(a(f)-r)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=a(e=+e),n=a(t=+t),i=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(h){var p,g;return arguments.length?([p,g]=h,s=f(p,g),u):[s(0),s(1)]}}return u.range=d(ho),u.rangeRound=d(x0),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,r=f(e),n=f(t),i=r===n?0:1/(n-r),u}}function ia(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function DP(){var e=na(bh()(Xt));return e.copy=function(){return ia(e,DP())},mi.apply(e,arguments)}function IP(){var e=j0(bh()).domain([1,10]);return e.copy=function(){return ia(e,IP()).base(e.base())},mi.apply(e,arguments)}function RP(){var e=S0(bh());return e.copy=function(){return ia(e,RP()).constant(e.constant())},mi.apply(e,arguments)}function R0(){var e=k0(bh());return e.copy=function(){return ia(e,R0()).exponent(e.exponent())},mi.apply(e,arguments)}function o9(){return R0.apply(null,arguments).exponent(.5)}function MP(){var e=[],t=Xt;function r(n){if(n!=null&&!isNaN(n=+n))return t((gc(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Hi),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>qz(e,a/n))},r.copy=function(){return MP(t).domain(e)},mi.apply(r,arguments)}function wh(){var e=0,t=.5,r=1,n=1,i,a,s,o,l,u=Xt,d,f=!1,h;function p(v){return isNaN(v=+v)?h:(v=.5+((v=+d(v))-a)*(n*v<n*a?o:l),u(f?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([e,t,r]=v,i=d(e=+e),a=d(t=+t),s=d(r=+r),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,p):[e,t,r]},p.clamp=function(v){return arguments.length?(f=!!v,p):f},p.interpolator=function(v){return arguments.length?(u=v,p):u};function g(v){return function(y){var x,w,b;return arguments.length?([x,w,b]=y,u=x8(v,[x,w,b]),p):[u(0),u(.5),u(1)]}}return p.range=g(ho),p.rangeRound=g(x0),p.unknown=function(v){return arguments.length?(h=v,p):h},function(v){return d=v,i=v(e),a=v(t),s=v(r),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,p}}function LP(){var e=na(wh()(Xt));return e.copy=function(){return ia(e,LP())},mi.apply(e,arguments)}function $P(){var e=j0(wh()).domain([.1,1,10]);return e.copy=function(){return ia(e,$P()).base(e.base())},mi.apply(e,arguments)}function FP(){var e=S0(wh());return e.copy=function(){return ia(e,FP()).constant(e.constant())},mi.apply(e,arguments)}function M0(){var e=k0(wh());return e.copy=function(){return ia(e,M0()).exponent(e.exponent())},mi.apply(e,arguments)}function l9(){return M0.apply(null,arguments).exponent(.5)}const Xo=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:g0,scaleDiverging:LP,scaleDivergingLog:$P,scaleDivergingPow:M0,scaleDivergingSqrt:l9,scaleDivergingSymlog:FP,scaleIdentity:vP,scaleImplicit:Vg,scaleLinear:gP,scaleLog:xP,scaleOrdinal:m0,scalePoint:Yz,scalePow:N0,scaleQuantile:_P,scaleQuantize:jP,scaleRadial:wP,scaleSequential:DP,scaleSequentialLog:IP,scaleSequentialPow:R0,scaleSequentialQuantile:MP,scaleSequentialSqrt:o9,scaleSequentialSymlog:RP,scaleSqrt:z8,scaleSymlog:bP,scaleThreshold:SP,scaleTime:a9,scaleUtc:s9,tickFormat:mP},Symbol.toStringTag,{value:"Module"}));var aa=e=>e.chartData,c9=T([aa],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),_h=(e,t,r,n)=>n?c9(e):aa(e);function Ba(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(rt(t)&&rt(r))return!0}return!1}function d1(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function BP(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,i,a;if(rt(r))i=r;else if(typeof r=="function")return;if(rt(n))a=n;else if(typeof n=="function")return;var s=[i,a];if(Ba(s))return s}}function u9(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Ba(n))return d1(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[i,a]=e,s,o;if(i==="auto")t!=null&&(s=Math.min(...t));else if(ie(i))s=i;else if(typeof i=="function")try{t!=null&&(s=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&e_.test(i)){var l=e_.exec(i);if(l==null||t==null)s=void 0;else{var u=+l[1];s=t[0]-u}}else s=t==null?void 0:t[0];if(a==="auto")t!=null&&(o=Math.max(...t));else if(ie(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t==null?void 0:t[1]))}catch{}else if(typeof a=="string"&&t_.test(a)){var d=t_.exec(a);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var h=[s,o];if(Ba(h))return t==null?h:d1(h,t,r)}}}var po=1e9,d9={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},$0,We=!0,Vr="[DecimalError] ",Aa=Vr+"Invalid argument: ",L0=Vr+"Exponent out of range: ",mo=Math.floor,ma=Math.pow,f9=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,jr,_t=1e7,Fe=7,UP=9007199254740991,Jd=mo(UP/Fe),te={};te.absoluteValue=te.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};te.comparedTo=te.cmp=function(e){var t,r,n,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};te.decimalPlaces=te.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Fe;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};te.dividedBy=te.div=function(e){return Jn(this,new this.constructor(e))};te.dividedToIntegerBy=te.idiv=function(e){var t=this,r=t.constructor;return De(Jn(t,new r(e),0,1),r.precision)};te.equals=te.eq=function(e){return!this.cmp(e)};te.exponent=function(){return ot(this)};te.greaterThan=te.gt=function(e){return this.cmp(e)>0};te.greaterThanOrEqualTo=te.gte=function(e){return this.cmp(e)>=0};te.isInteger=te.isint=function(){return this.e>this.d.length-2};te.isNegative=te.isneg=function(){return this.s<0};te.isPositive=te.ispos=function(){return this.s>0};te.isZero=function(){return this.s===0};te.lessThan=te.lt=function(e){return this.cmp(e)<0};te.lessThanOrEqualTo=te.lte=function(e){return this.cmp(e)<1};te.logarithm=te.log=function(e){var t,r=this,n=r.constructor,i=n.precision,a=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(jr))throw Error(Vr+"NaN");if(r.s<1)throw Error(Vr+(r.s?"NaN":"-Infinity"));return r.eq(jr)?new n(0):(We=!1,t=Jn(Vl(r,a),Vl(e,a),a),We=!0,De(t,i))};te.minus=te.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?KP(t,e):zP(t,(e.s=-e.s,e))};te.modulo=te.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(Vr+"NaN");return r.s?(We=!1,t=Jn(r,e,0,1).times(e),We=!0,r.minus(t)):De(new n(r),i)};te.naturalExponential=te.exp=function(){return WP(this)};te.naturalLogarithm=te.ln=function(){return Vl(this)};te.negated=te.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};te.plus=te.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?zP(t,e):KP(t,(e.s=-e.s,e))};te.precision=te.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Aa+e);if(t=ot(i)+1,n=i.d.length-1,r=n*Fe+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};te.squareRoot=te.sqrt=function(){var e,t,r,n,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(Vr+"NaN")}for(e=ot(o),We=!1,i=Math.sqrt(+o),i==0||i==1/0?(t=kn(o.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=mo((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(i.toString()),r=l.precision,i=s=r+3;;)if(a=n,n=a.plus(Jn(o,a,s+2)).times(.5),kn(a.d).slice(0,s)===(t=kn(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&t=="4999"){if(De(a,r+1,0),a.times(a).eq(o)){n=a;break}}else if(t!="9999")break;s+=4}return We=!0,De(n,r)};te.times=te.mul=function(e){var t,r,n,i,a,s,o,l,u,d=this,f=d.constructor,h=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,l=h.length,u=p.length,l<u&&(a=h,h=p,p=a,s=l,l=u,u=s),a=[],s=l+u,n=s;n--;)a.push(0);for(n=u;--n>=0;){for(t=0,i=l+n;i>n;)o=a[i]+p[n]*h[i-n-1]+t,a[i--]=o%_t|0,t=o/_t|0;a[i]=(a[i]+t)%_t|0}for(;!a[--s];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,We?De(e,f.precision):e};te.toDecimalPlaces=te.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Tn(e,0,po),t===void 0?t=n.rounding:Tn(t,0,8),De(r,e+ot(r)+1,t))};te.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=Ua(n,!0):(Tn(e,0,po),t===void 0?t=i.rounding:Tn(t,0,8),n=De(new i(n),e+1,t),r=Ua(n,!0,e+1)),r};te.toFixed=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?Ua(i):(Tn(e,0,po),t===void 0?t=a.rounding:Tn(t,0,8),n=De(new a(i),e+ot(i)+1,t),r=Ua(n.abs(),!1,e+ot(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};te.toInteger=te.toint=function(){var e=this,t=e.constructor;return De(new t(e),ot(e)+1,t.rounding)};te.toNumber=function(){return+this};te.toPower=te.pow=function(e){var t,r,n,i,a,s,o=this,l=o.constructor,u=12,d=+(e=new l(e));if(!e.s)return new l(jr);if(o=new l(o),!o.s){if(e.s<1)throw Error(Vr+"Infinity");return o}if(o.eq(jr))return o;if(n=l.precision,e.eq(jr))return De(o,n);if(t=e.e,r=e.d.length-1,s=t>=r,a=o.s,s){if((r=d<0?-d:d)<=UP){for(i=new l(jr),t=Math.ceil(n/Fe+4),We=!1;r%2&&(i=i.times(o),h1(i.d,t)),r=mo(r/2),r!==0;)o=o.times(o),h1(o.d,t);return We=!0,e.s<0?new l(jr).div(i):De(i,n)}}else if(a<0)throw Error(Vr+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,We=!1,i=e.times(Vl(o,n+u)),We=!0,i=WP(i),i.s=a,i};te.toPrecision=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?(r=ot(i),n=Ua(i,r<=a.toExpNeg||r>=a.toExpPos)):(Tn(e,1,po),t===void 0?t=a.rounding:Tn(t,0,8),i=De(new a(i),e,t),r=ot(i),n=Ua(i,e<=r||r<=a.toExpNeg,e)),n};te.toSignificantDigits=te.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Tn(e,1,po),t===void 0?t=n.rounding:Tn(t,0,8)),De(new n(r),e,t)};te.toString=te.valueOf=te.val=te.toJSON=te[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ot(e),r=e.constructor;return Ua(e,t<=r.toExpNeg||t>=r.toExpPos)};function zP(e,t){var r,n,i,a,s,o,l,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),We?De(t,f):t;if(l=e.d,u=t.d,s=e.e,i=t.e,l=l.slice(),a=s-i,a){for(a<0?(n=l,a=-a,o=u.length):(n=u,i=s,o=l.length),s=Math.ceil(f/Fe),o=s>o?s+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=l.length,a=u.length,o-a<0&&(a=o,n=u,u=l,l=n),r=0;a;)r=(l[--a]=l[a]+u[a]+r)/_t|0,l[a]%=_t;for(r&&(l.unshift(r),++i),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=i,We?De(t,f):t}function Tn(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Aa+e)}function kn(e){var t,r,n,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++)n=e[t]+"",r=Fe-n.length,r&&(a+=Ci(r)),a+=n;s=e[t],n=s+"",r=Fe-n.length,r&&(a+=Ci(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Jn=function(){function e(n,i){var a,s=0,o=n.length;for(n=n.slice();o--;)a=n[o]*i+s,n[o]=a%_t|0,s=a/_t|0;return s&&n.unshift(s),n}function t(n,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(n[o]!=i[o]){l=n[o]>i[o]?1:-1;break}return l}function r(n,i,a){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*_t+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s){var o,l,u,d,f,h,p,g,v,y,x,w,b,_,j,S,k,N,C=n.constructor,E=n.s==i.s?1:-1,P=n.d,I=i.d;if(!n.s)return new C(n);if(!i.s)throw Error(Vr+"Division by zero");for(l=n.e-i.e,k=I.length,j=P.length,p=new C(E),g=p.d=[],u=0;I[u]==(P[u]||0);)++u;if(I[u]>(P[u]||0)&&--l,a==null?w=a=C.precision:s?w=a+(ot(n)-ot(i))+1:w=a,w<0)return new C(0);if(w=w/Fe+2|0,u=0,k==1)for(d=0,I=I[0],w++;(u<j||d)&&w--;u++)b=d*_t+(P[u]||0),g[u]=b/I|0,d=b%I|0;else{for(d=_t/(I[0]+1)|0,d>1&&(I=e(I,d),P=e(P,d),k=I.length,j=P.length),_=k,v=P.slice(0,k),y=v.length;y<k;)v[y++]=0;N=I.slice(),N.unshift(0),S=I[0],I[1]>=_t/2&&++S;do d=0,o=t(I,v,k,y),o<0?(x=v[0],k!=y&&(x=x*_t+(v[1]||0)),d=x/S|0,d>1?(d>=_t&&(d=_t-1),f=e(I,d),h=f.length,y=v.length,o=t(f,v,h,y),o==1&&(d--,r(f,k<h?N:I,h))):(d==0&&(o=d=1),f=I.slice()),h=f.length,h<y&&f.unshift(0),r(v,f,y),o==-1&&(y=v.length,o=t(I,v,k,y),o<1&&(d++,r(v,k<y?N:I,y))),y=v.length):o===0&&(d++,v=[0]),g[u++]=d,o&&v[0]?v[y++]=P[_]||0:(v=[P[_]],y=1);while((_++<j||v[0]!==void 0)&&w--)}return g[0]||g.shift(),p.e=l,De(p,s?a+ot(p)+1:a)}}();function WP(e,t){var r,n,i,a,s,o,l=0,u=0,d=e.constructor,f=d.precision;if(ot(e)>16)throw Error(L0+ot(e));if(!e.s)return new d(jr);for(We=!1,o=f,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),u+=5;for(n=Math.log(ma(2,u))/Math.LN10*2+5|0,o+=n,r=i=a=new d(jr),d.precision=o;;){if(i=De(i.times(e),o),r=r.times(++l),s=a.plus(Jn(i,r,o)),kn(s.d).slice(0,o)===kn(a.d).slice(0,o)){for(;u--;)a=De(a.times(a),o);return d.precision=f,t==null?(We=!0,De(a,f)):a}a=s}}function ot(e){for(var t=e.e*Fe,r=e.d[0];r>=10;r/=10)t++;return t}function Jp(e,t,r){if(t>e.LN10.sd())throw We=!0,r&&(e.precision=r),Error(Vr+"LN10 precision limit exceeded");return De(new e(e.LN10),t)}function Ci(e){for(var t="";e--;)t+="0";return t}function Vl(e,t){var r,n,i,a,s,o,l,u,d,f=1,h=10,p=e,g=p.d,v=p.constructor,y=v.precision;if(p.s<1)throw Error(Vr+(p.s?"NaN":"-Infinity"));if(p.eq(jr))return new v(0);if(t==null?(We=!1,u=y):u=t,p.eq(10))return t==null&&(We=!0),Jp(v,u);if(u+=h,v.precision=u,r=kn(g),n=r.charAt(0),a=ot(p),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=kn(p.d),n=r.charAt(0),f++;a=ot(p),n>1?(p=new v("0."+r),a++):p=new v(n+"."+r.slice(1))}else return l=Jp(v,u+2,y).times(a+""),p=Vl(new v(n+"."+r.slice(1)),u-h).plus(l),v.precision=y,t==null?(We=!0,De(p,y)):p;for(o=s=p=Jn(p.minus(jr),p.plus(jr),u),d=De(p.times(p),u),i=3;;){if(s=De(s.times(d),u),l=o.plus(Jn(s,new v(i),u)),kn(l.d).slice(0,u)===kn(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(Jp(v,u+2,y).times(a+""))),o=Jn(o,new v(f),u),v.precision=y,t==null?(We=!0,De(o,y)):o;o=l,i+=2}}function f1(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=mo(r/Fe),e.d=[],n=(r+1)%Fe,r<0&&(n+=Fe),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=Fe;n<i;)e.d.push(+t.slice(n,n+=Fe));t=t.slice(n),n=Fe-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),We&&(e.e>Jd||e.e<-Jd))throw Error(L0+r)}else e.s=0,e.e=0,e.d=[0];return e}function De(e,t,r){var n,i,a,s,o,l,u,d,f=e.d;for(s=1,a=f[0];a>=10;a/=10)s++;if(n=t-s,n<0)n+=Fe,i=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Fe),a=f.length,d>=a)return e;for(u=a=f[d],s=1;a>=10;a/=10)s++;n%=Fe,i=n-Fe+s}if(r!==void 0&&(a=ma(10,s-i-1),o=u/a%10|0,l=t<0||f[d+1]!==void 0||u%a,l=r<4?(o||l)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||l||r==6&&(n>0?i>0?u/ma(10,s-i):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return l?(a=ot(e),f.length=1,t=t-a-1,f[0]=ma(10,(Fe-t%Fe)%Fe),e.e=mo(-t/Fe)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,a=1,d--):(f.length=d+1,a=ma(10,Fe-n),f[d]=i>0?(u/ma(10,s-i)%ma(10,i)|0)*a:0),l)for(;;)if(d==0){(f[0]+=a)==_t&&(f[0]=1,++e.e);break}else{if(f[d]+=a,f[d]!=_t)break;f[d--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(We&&(e.e>Jd||e.e<-Jd))throw Error(L0+ot(e));return e}function KP(e,t){var r,n,i,a,s,o,l,u,d,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),We?De(t,p):t;if(l=e.d,f=t.d,n=t.e,u=e.e,l=l.slice(),s=u-n,s){for(d=s<0,d?(r=l,s=-s,o=f.length):(r=f,n=u,o=l.length),i=Math.max(Math.ceil(p/Fe),o)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=l.length,o=f.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(l[i]!=f[i]){d=l[i]<f[i];break}s=0}for(d&&(r=l,l=f,f=r,t.s=-t.s),o=l.length,i=f.length-o;i>0;--i)l[o++]=0;for(i=f.length;i>s;){if(l[--i]<f[i]){for(a=i;a&&l[--a]===0;)l[a]=_t-1;--l[a],l[i]+=_t}l[i]-=f[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,We?De(t,p):t):new h(0)}function Ua(e,t,r){var n,i=ot(e),a=kn(e.d),s=a.length;return t?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+Ci(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Ci(-i-1)+a,r&&(n=r-s)>0&&(a+=Ci(n))):i>=s?(a+=Ci(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+Ci(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=Ci(n))),e.s<0?"-"+a:a}function h1(e,t){if(e.length>t)return e.length=t,!0}function HP(e){var t,r,n;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Aa+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return f1(s,a.toString())}else if(typeof a!="string")throw Error(Aa+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,f9.test(a))f1(s,a);else throw Error(Aa+a)}if(i.prototype=te,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=HP,i.config=i.set=h9,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function h9(e){if(!e||typeof e!="object")throw Error(Vr+"Object expected");var t,r,n,i=["precision",1,po,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(mo(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(Aa+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Aa+r+": "+n);return this}var $0=HP(d9);jr=new $0(1);const Pe=$0;var p9=e=>e,qP={},VP=e=>e===qP,p1=e=>function t(){return arguments.length===0||arguments.length===1&&VP(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},GP=(e,t)=>e===1?t:p1(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=n.filter(s=>s!==qP).length;return a>=e?t(...n):GP(e-a,p1(function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];var u=n.map(d=>VP(d)?o.shift():d);return t(...u,...o)}))}),jh=e=>GP(e.length,e),Jg=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},m9=jh((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),g9=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return p9;var i=r.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce((o,l)=>l(o),a(...arguments))}},Qg=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),YP=e=>{var t=null,r=null;return function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t&&i.every((s,o)=>{var l;return s===((l=t)===null||l===void 0?void 0:l[o])})||(t=i,r=e(...i)),r}};function XP(e){var t;return e===0?t=1:t=Math.floor(new Pe(e).abs().log(10).toNumber())+1,t}function JP(e,t,r){for(var n=new Pe(e),i=0,a=[];n.lt(t)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}jh((e,t,r)=>{var n=+e,i=+t;return n+r*(i-n)});jh((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});jh((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var QP=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},ZP=(e,t,r)=>{if(e.lte(0))return new Pe(0);var n=XP(e.toNumber()),i=new Pe(10).pow(n),a=e.div(i),s=n!==1?.05:.1,o=new Pe(Math.ceil(a.div(s).toNumber())).add(r).mul(s),l=o.mul(i);return t?new Pe(l.toNumber()):new Pe(Math.ceil(l.toNumber()))},v9=(e,t,r)=>{var n=new Pe(1),i=new Pe(e);if(!i.isint()&&r){var a=Math.abs(e);a<1?(n=new Pe(10).pow(XP(e)-1),i=new Pe(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new Pe(Math.floor(e)))}else e===0?i=new Pe(Math.floor((t-1)/2)):r||(i=new Pe(Math.floor(e)));var s=Math.floor((t-1)/2),o=g9(m9(l=>i.add(new Pe(l-s).mul(n)).toNumber()),Jg);return o(0,t)},eO=function(t,r,n,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Pe(0),tickMin:new Pe(0),tickMax:new Pe(0)};var s=ZP(new Pe(r).sub(t).div(n-1),i,a),o;t<=0&&r>=0?o=new Pe(0):(o=new Pe(t).add(r).div(2),o=o.sub(new Pe(o).mod(s)));var l=Math.ceil(o.sub(t).div(s).toNumber()),u=Math.ceil(new Pe(r).sub(o).div(s).toNumber()),d=l+u+1;return d>n?eO(t,r,n,i,a+1):(d<n&&(u=r>0?u+(n-d):u,l=r>0?l:l+(n-d)),{step:s,tickMin:o.sub(new Pe(l).mul(s)),tickMax:o.add(new Pe(u).mul(s))})};function y9(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(n,2),[s,o]=QP([t,r]);if(s===-1/0||o===1/0){var l=o===1/0?[s,...Jg(0,n-1).map(()=>1/0)]:[...Jg(0,n-1).map(()=>-1/0),o];return t>r?Qg(l):l}if(s===o)return v9(s,n,i);var{step:u,tickMin:d,tickMax:f}=eO(s,o,a,i,0),h=JP(d,f.add(new Pe(.1).mul(u)),u);return t>r?Qg(h):h}function x9(e,t){var[r,n]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,s]=QP([r,n]);if(a===-1/0||s===1/0)return[r,n];if(a===s)return[a];var o=Math.max(t,2),l=ZP(new Pe(s).sub(a).div(o-1),i,0),u=[...JP(new Pe(a),new Pe(s),l),s];return i===!1&&(u=u.map(d=>Math.round(d))),r>n?Qg(u):u}var b9=YP(y9),w9=YP(x9),tO=e=>e.rootProps.maxBarSize,_9=e=>e.rootProps.barGap,rO=e=>e.rootProps.barCategoryGap,j9=e=>e.rootProps.barSize,Sh=e=>e.rootProps.stackOffset,F0=e=>e.options.chartName,B0=e=>e.rootProps.syncId,nO=e=>e.rootProps.syncMethod,U0=e=>e.options.eventEmitter,kt={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},zn={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},br={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},kh=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},S9={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:zn.angleAxisId,includeHidden:!1,name:void 0,reversed:zn.reversed,scale:zn.scale,tick:zn.tick,tickCount:void 0,ticks:void 0,type:zn.type,unit:void 0},k9={allowDataOverflow:br.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:br.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:br.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:br.scale,tick:br.tick,tickCount:br.tickCount,ticks:void 0,type:br.type,unit:void 0},N9={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:zn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:zn.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:zn.scale,tick:zn.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},E9={allowDataOverflow:br.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:br.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:br.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:br.scale,tick:br.tick,tickCount:br.tickCount,ticks:void 0,type:"category",unit:void 0},z0=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?N9:S9,W0=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?E9:k9,Nh=e=>e.polarOptions,K0=T([hi,pi,Ct],Sz),iO=T([Nh,K0],(e,t)=>{if(e!=null)return gn(e.innerRadius,t,0)}),aO=T([Nh,K0],(e,t)=>{if(e!=null)return gn(e.outerRadius,t,t*.8)}),C9=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},sO=T([Nh],C9);T([z0,sO],kh);var oO=T([K0,iO,aO],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});T([W0,oO],kh);var lO=T([Ce,Nh,iO,aO,hi,pi],(e,t,r,n,i,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:s,cy:o,startAngle:l,endAngle:u}=t;return{cx:gn(s,i,i/2),cy:gn(o,a,a/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:u,clockWise:!1}}}),yt=(e,t)=>t,Eh=(e,t,r)=>r;function H0(e){return e==null?void 0:e.id}function cO(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:a}=r,s=new Map;return e.forEach(o=>{var l,u=(l=o.data)!==null&&l!==void 0?l:n;if(!(u==null||u.length===0)){var d=H0(o);u.forEach((f,h)=>{var p=a==null||i?h:String(Et(f,a,null)),g=Et(f,o.dataKey,0),v;s.has(p)?v=s.get(p):v={},Object.assign(v,{[d]:g}),s.set(p,v)})}}),Array.from(s.values())}function Ch(e){return e.stackId!=null&&e.dataKey!=null}var Ph=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Oh(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function P9(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var xt=e=>{var t=Ce(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},go=e=>e.tooltip.settings.axisId;function m1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Qd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m1(Object(r),!0).forEach(function(n){O9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O9(e,t,r){return(t=A9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A9(e){var t=T9(e,"string");return typeof t=="symbol"?t:t+""}function T9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zg=[0,"auto"],vr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},uO=(e,t)=>e.cartesianAxis.xAxis[t],gi=(e,t)=>{var r=uO(e,t);return r??vr},yr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Zg,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:pc},dO=(e,t)=>e.cartesianAxis.yAxis[t],vi=(e,t)=>{var r=dO(e,t);return r??yr},D9={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},q0=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??D9},nr=(e,t,r)=>{switch(t){case"xAxis":return gi(e,r);case"yAxis":return vi(e,r);case"zAxis":return q0(e,r);case"angleAxis":return z0(e,r);case"radiusAxis":return W0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},I9=(e,t,r)=>{switch(t){case"xAxis":return gi(e,r);case"yAxis":return vi(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},bc=(e,t,r)=>{switch(t){case"xAxis":return gi(e,r);case"yAxis":return vi(e,r);case"angleAxis":return z0(e,r);case"radiusAxis":return W0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},fO=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function hO(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Ah=e=>e.graphicalItems.cartesianItems,R9=T([yt,Eh],hO),pO=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),wc=T([Ah,nr,R9],pO,{memoizeOptions:{resultEqualityCheck:Oh}}),mO=T([wc],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Ch)),gO=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),M9=T([wc],gO),vO=e=>e.map(t=>t.data).filter(Boolean).flat(1),L9=T([wc],vO,{memoizeOptions:{resultEqualityCheck:Oh}}),yO=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},V0=T([L9,_h],yO),xO=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Et(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(i=>({value:Et(i,n)}))):e.map(n=>({value:n})),Th=T([V0,nr,wc],xO);function bO(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function $u(e){if(On(e)||e instanceof Date){var t=Number(e);if(rt(t))return t}}function g1(e){if(Array.isArray(e)){var t=[$u(e[0]),$u(e[1])];return Ba(t)?t:void 0}var r=$u(e);if(r!=null)return[r,r]}function ci(e){return e.map($u).filter(E6)}function $9(e,t,r){return!r||typeof t!="number"||mn(t)?[]:r.length?ci(r.flatMap(n=>{var i=Et(e,n.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!rt(a)||!rt(s)))return[t-a,t+s]})):[]}var bt=e=>{var t=xt(e),r=go(e);return bc(e,t,r)},wO=T([bt],e=>e==null?void 0:e.dataKey),F9=T([mO,_h,bt],cO),_O=(e,t,r)=>{var n={},i=t.reduce((a,s)=>(s.stackId==null||(a[s.stackId]==null&&(a[s.stackId]=[]),a[s.stackId].push(s)),a),n);return Object.fromEntries(Object.entries(i).map(a=>{var[s,o]=a,l=o.map(H0);return[s,{stackedData:TB(e,l,r),graphicalItems:o}]}))},ev=T([F9,mO,Sh],_O),jO=(e,t,r,n)=>{var{dataStartIndex:i,dataEndIndex:a}=t;if(n==null&&r!=="zAxis"){var s=LB(e,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},B9=T([nr],e=>e.allowDataOverflow),G0=e=>{var t;if(e==null||!("domain"in e))return Zg;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=ci(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:Zg},SO=T([nr],G0),kO=T([SO,B9],BP),U9=T([ev,aa,yt,kO],jO,{memoizeOptions:{resultEqualityCheck:Ph}}),Y0=e=>e.errorBars,z9=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>bO(r,n)),Zd=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},NO=(e,t,r,n,i)=>{var a,s;if(r.length>0&&e.forEach(o=>{r.forEach(l=>{var u,d,f=(u=n[l.id])===null||u===void 0?void 0:u.filter(x=>bO(i,x)),h=Et(o,(d=t.dataKey)!==null&&d!==void 0?d:l.dataKey),p=$9(o,h,f);if(p.length>=2){var g=Math.min(...p),v=Math.max(...p);(a==null||g<a)&&(a=g),(s==null||v>s)&&(s=v)}var y=g1(h);y!=null&&(a=a==null?y[0]:Math.min(a,y[0]),s=s==null?y[1]:Math.max(s,y[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(o=>{var l=g1(Et(o,t.dataKey));l!=null&&(a=a==null?l[0]:Math.min(a,l[0]),s=s==null?l[1]:Math.max(s,l[1]))}),rt(a)&&rt(s))return[a,s]},W9=T([V0,nr,M9,Y0,yt],NO,{memoizeOptions:{resultEqualityCheck:Ph}});function K9(e){var{value:t}=e;if(On(t)||t instanceof Date)return t}var H9=(e,t,r)=>{var n=e.map(K9).filter(i=>i!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&NE(n))?aP(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},EO=e=>e.referenceElements.dots,vo=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),q9=T([EO,yt,Eh],vo),CO=e=>e.referenceElements.areas,V9=T([CO,yt,Eh],vo),PO=e=>e.referenceElements.lines,G9=T([PO,yt,Eh],vo),OO=(e,t)=>{var r=ci(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Y9=T(q9,yt,OO),AO=(e,t)=>{var r=ci(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},X9=T([V9,yt],AO);function J9(e){var t;if(e.x!=null)return ci([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:ci(r)}function Q9(e){var t;if(e.y!=null)return ci([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:ci(r)}var TO=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?J9(n):Q9(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Z9=T([G9,yt],TO),e7=T(Y9,Z9,X9,(e,t,r)=>Zd(e,r,t)),DO=(e,t,r,n,i,a,s,o)=>{if(r!=null)return r;var l=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=l?Zd(n,a,i):Zd(a,i);return u9(t,u,e.allowDataOverflow)},t7=T([nr,SO,kO,U9,W9,e7,Ce,yt],DO,{memoizeOptions:{resultEqualityCheck:Ph}}),r7=[0,1],IO=(e,t,r,n,i,a,s)=>{if(!((e==null||r==null||r.length===0)&&s===void 0)){var{dataKey:o,type:l}=e,u=ra(t,a);if(u&&o==null){var d;return aP(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return l==="category"?H9(n,e,u):i==="expand"?r7:s}},X0=T([nr,Ce,V0,Th,Sh,yt,t7],IO),RO=(e,t,r,n,i)=>{if(e!=null){var{scale:a,type:s}=e;if(a==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":s==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(dc(a));return o in Xo?o:"point"}}},_c=T([nr,Ce,fO,F0,yt],RO);function n7(e){if(e!=null){if(e in Xo)return Xo[e]();var t="scale".concat(dc(e));if(t in Xo)return Xo[t]()}}function J0(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var i=n7(t);if(i!=null){var a=i.domain(r).range(n);return EB(a),a}}}var MO=(e,t,r)=>{var n=G0(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Ba(e))return b9(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Ba(e))return w9(e,t.tickCount,t.allowDecimals)}},Q0=T([X0,bc,_c],MO),LO=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Ba(t)&&Array.isArray(r)&&r.length>0){var i=t[0],a=r[0],s=t[1],o=r[r.length-1];return[Math.min(i,a),Math.max(s,o)]}return t},i7=T([nr,X0,Q0,yt],LO),a7=T(Th,nr,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(ci(e.map(o=>o.value))).sort((o,l)=>o-l);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(i===0)return 1/0;for(var a=0;a<n.length-1;a++){var s=n[a+1]-n[a];r=Math.min(r,s)}return r/i}}),$O=T(a7,Ce,rO,Ct,(e,t,r,n)=>n,(e,t,r,n,i)=>{if(!rt(e))return 0;var a=t==="vertical"?n.height:n.width;if(i==="gap")return e*a/2;if(i==="no-gap"){var s=gn(r,e*a),o=e*a/2;return o-s-(o-s)/a*s}return 0}),s7=(e,t)=>{var r=gi(e,t);return r==null||typeof r.padding!="string"?0:$O(e,"xAxis",t,r.padding)},o7=(e,t)=>{var r=vi(e,t);return r==null||typeof r.padding!="string"?0:$O(e,"yAxis",t,r.padding)},l7=T(gi,s7,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((r=i.left)!==null&&r!==void 0?r:0)+t,right:((n=i.right)!==null&&n!==void 0?n:0)+t}}),c7=T(vi,o7,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((r=i.top)!==null&&r!==void 0?r:0)+t,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+t}}),u7=T([Ct,l7,dh,uh,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:a}=n;return i?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),d7=T([Ct,Ce,c7,dh,uh,(e,t,r)=>r],(e,t,r,n,i,a)=>{var{padding:s}=i;return a?[n.height-s.bottom,s.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),jc=(e,t,r,n)=>{var i;switch(t){case"xAxis":return u7(e,r,n);case"yAxis":return d7(e,r,n);case"zAxis":return(i=q0(e,r))===null||i===void 0?void 0:i.range;case"angleAxis":return sO(e);case"radiusAxis":return oO(e,r);default:return}},FO=T([nr,jc],kh),yo=T([nr,_c,i7,FO],J0);T([wc,Y0,yt],z9);function BO(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Dh=(e,t)=>t,Ih=(e,t,r)=>r,f7=T(lh,Dh,Ih,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(BO)),h7=T(ch,Dh,Ih,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(BO)),UO=(e,t)=>({width:e.width,height:t.height}),p7=(e,t)=>{var r=typeof t.width=="number"?t.width:pc;return{width:r,height:e.height}},zO=T(Ct,gi,UO),m7=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},g7=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},v7=T(pi,Ct,f7,Dh,Ih,(e,t,r,n,i)=>{var a={},s;return r.forEach(o=>{var l=UO(t,o);s==null&&(s=m7(t,n,e));var u=n==="top"&&!i||n==="bottom"&&i;a[o.id]=s-Number(u)*l.height,s+=(u?-1:1)*l.height}),a}),y7=T(hi,Ct,h7,Dh,Ih,(e,t,r,n,i)=>{var a={},s;return r.forEach(o=>{var l=p7(t,o);s==null&&(s=g7(t,n,e));var u=n==="left"&&!i||n==="right"&&i;a[o.id]=s-Number(u)*l.width,s+=(u?-1:1)*l.width}),a}),x7=(e,t)=>{var r=gi(e,t);if(r!=null)return v7(e,r.orientation,r.mirror)},b7=T([Ct,gi,x7,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r==null?void 0:r[n];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),w7=(e,t)=>{var r=vi(e,t);if(r!=null)return y7(e,r.orientation,r.mirror)},_7=T([Ct,vi,w7,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r==null?void 0:r[n];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),WO=T(Ct,vi,(e,t)=>{var r=typeof t.width=="number"?t.width:pc;return{width:r,height:e.height}}),v1=(e,t,r)=>{switch(t){case"xAxis":return zO(e,r).width;case"yAxis":return WO(e,r).height;default:return}},KO=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=r,o=ra(e,n),l=t.map(u=>u.value);if(s&&o&&a==="category"&&i&&NE(l))return l}},Z0=T([Ce,Th,nr,yt],KO),HO=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:a}=r,s=ra(e,n);if(s&&(i==="number"||a!=="auto"))return t.map(o=>o.value)}},ex=T([Ce,Th,bc,yt],HO),y1=T([Ce,I9,_c,yo,Z0,ex,jc,Q0,yt],(e,t,r,n,i,a,s,o,l)=>{if(t!=null){var u=ra(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:a,duplicateDomain:i,isCategorical:u,niceTicks:o,range:s,realScaleType:r,scale:n}}}),j7=(e,t,r,n,i,a,s,o,l)=>{if(!(t==null||n==null)){var u=ra(e,l),{type:d,ticks:f,tickCount:h}=t,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/p:0;g=l==="angleAxis"&&a!=null&&a.length>=2?cr(a[0]-a[1])*2*g:g;var v=f||i;if(v){var y=v.map((x,w)=>{var b=s?s.indexOf(x):x;return{index:w,coordinate:n(b)+g,value:x,offset:g}});return y.filter(x=>rt(x.coordinate))}return u&&o?o.map((x,w)=>({coordinate:n(x)+g,value:x,index:w,offset:g})).filter(x=>rt(x.coordinate)):n.ticks?n.ticks(h).map(x=>({coordinate:n(x)+g,value:x,offset:g})):n.domain().map((x,w)=>({coordinate:n(x)+g,value:s?s[x]:x,index:w,offset:g}))}},qO=T([Ce,bc,_c,yo,Q0,jc,Z0,ex,yt],j7),S7=(e,t,r,n,i,a,s)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=ra(e,s),{tickCount:l}=t,u=0;return u=s==="angleAxis"&&(n==null?void 0:n.length)>=2?cr(n[0]-n[1])*2*u:u,o&&a?a.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(l).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:i?i[d]:d,index:f,offset:u}))}},Xi=T([Ce,bc,yo,jc,Z0,ex,yt],S7),Ji=T(nr,yo,(e,t)=>{if(!(e==null||t==null))return Qd(Qd({},e),{},{scale:t})}),k7=T([nr,_c,X0,FO],J0);T((e,t,r)=>q0(e,r),k7,(e,t)=>{if(!(e==null||t==null))return Qd(Qd({},e),{},{scale:t})});var N7=T([Ce,lh,ch],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),VO=e=>e.options.defaultTooltipEventType,GO=e=>e.options.validateTooltipEventTypes;function YO(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function tx(e,t){var r=VO(e),n=GO(e);return YO(t,r,n)}function E7(e){return oe(t=>tx(t,e))}var XO=(e,t)=>{var r,n=Number(t);if(!(mn(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},C7=e=>e.tooltip.settings,Di={active:!1,index:null,dataKey:void 0,coordinate:void 0},P7={itemInteraction:{click:Di,hover:Di},axisInteraction:{click:Di,hover:Di},keyboardInteraction:Di,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},JO=mr({name:"tooltip",initialState:P7,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:pt()},removeTooltipEntrySettings:{reducer(e,t){var r=Xn(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:pt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:O7,removeTooltipEntrySettings:A7,setTooltipSettingsState:T7,setActiveMouseOverItemIndex:QO,mouseLeaveItem:D7,mouseLeaveChart:ZO,setActiveClickItemIndex:I7,setMouseOverAxisIndex:eA,setMouseClickAxisIndex:R7,setSyncInteraction:tv,setKeyboardInteraction:rv}=JO.actions,M7=JO.reducer;function x1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function vu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x1(Object(r),!0).forEach(function(n){L7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function L7(e,t,r){return(t=$7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $7(e){var t=F7(e,"string");return typeof t=="symbol"?t:t+""}function F7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B7(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function U7(e){return e.index!=null}var tA=(e,t,r,n)=>{if(t==null)return Di;var i=B7(e,t,r);if(i==null)return Di;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(U7(i)){if(a)return vu(vu({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return vu(vu({},Di),{},{coordinate:i.coordinate})},rx=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!rt(n))return r;var i=0,a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(i,Math.min(n,a)))},rA=(e,t,r,n,i,a,s,o)=>{if(!(a==null||o==null)){var l=s[0],u=l==null?void 0:o(l.positions,a);if(u!=null)return u;var d=i==null?void 0:i[Number(a)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},nA=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return r==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var s;return((s=a.settings)===null||s===void 0?void 0:s.dataKey)===i})},Sc=e=>e.options.tooltipPayloadSearcher,xo=e=>e.tooltip;function b1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function w1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b1(Object(r),!0).forEach(function(n){z7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z7(e,t,r){return(t=W7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W7(e){var t=K7(e,"string");return typeof t=="symbol"?t:t+""}function K7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function H7(e,t){return e??t}var iA=(e,t,r,n,i,a,s)=>{if(!(t==null||a==null)){var{chartData:o,computedData:l,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,p)=>{var g,{dataDefinedOnItem:v,settings:y}=p,x=H7(v,o),w=Array.isArray(x)?AC(x,u,d):x,b=(g=y==null?void 0:y.dataKey)!==null&&g!==void 0?g:n,_=y==null?void 0:y.nameKey,j;if(n&&Array.isArray(w)&&!Array.isArray(w[0])&&s==="axis"?j=EE(w,n,i):j=a(w,t,l,_),Array.isArray(j))j.forEach(k=>{var N=w1(w1({},y),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});h.push(r_({tooltipEntrySettings:N,dataKey:k.dataKey,payload:k.payload,value:Et(k.payload,k.dataKey),name:k.name}))});else{var S;h.push(r_({tooltipEntrySettings:y,dataKey:b,payload:j,value:Et(j,b),name:(S=Et(j,_))!==null&&S!==void 0?S:y==null?void 0:y.name}))}return h},f)}},nx=T([bt,Ce,fO,F0,xt],RO),q7=T([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),V7=T([xt,go],hO),kc=T([q7,bt,V7],pO,{memoizeOptions:{resultEqualityCheck:Oh}}),G7=T([kc],e=>e.filter(Ch)),Y7=T([kc],vO,{memoizeOptions:{resultEqualityCheck:Oh}}),bo=T([Y7,aa],yO),X7=T([G7,aa,bt],cO),ix=T([bo,bt,kc],xO),aA=T([bt],G0),J7=T([bt],e=>e.allowDataOverflow),sA=T([aA,J7],BP),Q7=T([kc],e=>e.filter(Ch)),Z7=T([X7,Q7,Sh],_O),eK=T([Z7,aa,xt,sA],jO),tK=T([kc],gO),rK=T([bo,bt,tK,Y0,xt],NO,{memoizeOptions:{resultEqualityCheck:Ph}}),nK=T([EO,xt,go],vo),iK=T([nK,xt],OO),aK=T([CO,xt,go],vo),sK=T([aK,xt],AO),oK=T([PO,xt,go],vo),lK=T([oK,xt],TO),cK=T([iK,lK,sK],Zd),uK=T([bt,aA,sA,eK,rK,cK,Ce,xt],DO),oA=T([bt,Ce,bo,ix,Sh,xt,uK],IO),dK=T([oA,bt,nx],MO),fK=T([bt,oA,dK,xt],LO),lA=e=>{var t=xt(e),r=go(e),n=!1;return jc(e,t,r,n)},cA=T([bt,lA],kh),uA=T([bt,nx,fK,cA],J0),hK=T([Ce,ix,bt,xt],KO),pK=T([Ce,ix,bt,xt],HO),mK=(e,t,r,n,i,a,s,o)=>{if(t){var{type:l}=t,u=ra(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=l==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?cr(i[0]-i[1])*2*f:f,u&&s?s.map((h,p)=>({coordinate:n(h)+f,value:h,index:p,offset:f})):n.domain().map((h,p)=>({coordinate:n(h)+f,value:a?a[h]:h,index:p,offset:f}))}}},yi=T([Ce,bt,nx,uA,lA,hK,pK,xt],mK),ax=T([VO,GO,C7],(e,t,r)=>YO(r.shared,e,t)),dA=e=>e.tooltip.settings.trigger,sx=e=>e.tooltip.settings.defaultIndex,Rh=T([xo,ax,dA,sx],tA),za=T([Rh,bo],rx),fA=T([yi,za],XO),hA=T([Rh],e=>{if(e)return e.dataKey}),pA=T([xo,ax,dA,sx],nA),gK=T([hi,pi,Ce,Ct,yi,sx,pA,Sc],rA),vK=T([Rh,gK],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),yK=T([Rh],e=>e.active),xK=T([pA,za,aa,wO,fA,Sc,ax],iA),bK=T([xK],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function _1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function j1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_1(Object(r),!0).forEach(function(n){wK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wK(e,t,r){return(t=_K(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _K(e){var t=jK(e,"string");return typeof t=="symbol"?t:t+""}function jK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SK=()=>oe(bt),kK=()=>{var e=SK(),t=oe(yi),r=oe(uA);return Vs(!e||!r?void 0:j1(j1({},e),{},{scale:r}),t)};function S1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ns(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S1(Object(r),!0).forEach(function(n){NK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NK(e,t,r){return(t=EK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EK(e){var t=CK(e,"string");return typeof t=="symbol"?t:t+""}function CK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PK=(e,t,r,n)=>{var i=t.find(a=>a&&a.index===r);if(i){if(e==="horizontal")return{x:i.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},OK=(e,t,r,n)=>{var i=t.find(u=>u&&u.index===r);if(i){if(e==="centric"){var a=i.coordinate,{radius:s}=n;return ns(ns(ns({},n),Mt(n.cx,n.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:l}=n;return ns(ns(ns({},n),Mt(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function AK(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var mA=(e,t,r,n,i)=>{var a,s=-1,o=(a=t==null?void 0:t.length)!==null&&a!==void 0?a:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<o;l++){var u=l>0?r[l-1].coordinate:r[o-1].coordinate,d=r[l].coordinate,f=l>=o-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(cr(d-u)!==cr(f-d)){var p=[];if(cr(f-d)===cr(i[1]-i[0])){h=f;var g=d+i[1]-i[0];p[0]=Math.min(g,(g+u)/2),p[1]=Math.max(g,(g+u)/2)}else{h=u;var v=f+i[1]-i[0];p[0]=Math.min(d,(v+d)/2),p[1]=Math.max(d,(v+d)/2)}var y=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>y[0]&&e<=y[1]||e>=p[0]&&e<=p[1]){({index:s}=r[l]);break}}else{var x=Math.min(u,f),w=Math.max(u,f);if(e>(x+d)/2&&e<=(w+d)/2){({index:s}=r[l]);break}}}else if(t){for(var b=0;b<o;b++)if(b===0&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:s}=t[b]);break}}return s},TK=()=>oe(F0),ox=(e,t)=>t,gA=(e,t,r)=>r,lx=(e,t,r,n)=>n,DK=T(yi,e=>th(e,t=>t.coordinate)),cx=T([xo,ox,gA,lx],tA),vA=T([cx,bo],rx),IK=(e,t,r)=>{if(t!=null){var n=xo(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},yA=T([xo,ox,gA,lx],nA),ef=T([hi,pi,Ce,Ct,yi,lx,yA,Sc],rA),RK=T([cx,ef],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),xA=T([yi,vA],XO),MK=T([yA,vA,aa,wO,xA,Sc,ox],iA),LK=T([cx],e=>({isActive:e.active,activeIndex:e.index})),$K=(e,t,r,n,i,a,s)=>{if(!(!e||!r||!n||!i)&&AK(e,s)){var o=$B(e,t),l=mA(o,a,i,r,n),u=PK(t,i,l,e);return{activeIndex:String(l),activeCoordinate:u}}},FK=(e,t,r,n,i,a,s)=>{if(!(!e||!n||!i||!a||!r)){var o=Pz(e,r);if(o){var l=FB(o,t),u=mA(l,s,a,n,i),d=OK(t,a,u,o);return{activeIndex:String(u),activeCoordinate:d}}}},BK=(e,t,r,n,i,a,s,o)=>{if(!(!e||!t||!n||!i||!a))return t==="horizontal"||t==="vertical"?$K(e,t,n,i,a,s,o):FK(e,t,r,n,i,a,s)},UK=T(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),zK=T(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(kt)),r=Array.from(new Set(t));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:P9}});function k1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function N1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k1(Object(r),!0).forEach(function(n){WK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WK(e,t,r){return(t=KK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KK(e){var t=HK(e,"string");return typeof t=="symbol"?t:t+""}function HK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qK={},VK={zIndexMap:Object.values(kt).reduce((e,t)=>N1(N1({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),qK)},GK=new Set(Object.values(kt));function YK(e){return GK.has(e)}var bA=mr({name:"zIndex",initialState:VK,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:pt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!YK(r)&&delete e.zIndexMap[r])},prepare:pt()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:i}=t.payload;e.zIndexMap[r]?i?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:i?void 0:n,panoramaElementId:i?n:void 0}},prepare:pt()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:pt()}}}),{registerZIndexPortal:XK,unregisterZIndexPortal:JK,registerZIndexPortalId:QK,unregisterZIndexPortalId:ZK}=bA.actions,eH=bA.reducer;function Yr(e){var{zIndex:t,children:r}=e,n=hU(),i=n&&t!==void 0&&t!==0,a=Ht(),s=nt();m.useLayoutEffect(()=>i?(s(XK({zIndex:t})),()=>{s(JK({zIndex:t}))}):fo,[s,t,i]);var o=oe(u=>UK(u,t,a));if(!i)return r;if(!o)return null;var l=document.getElementById(o);return l?Mi.createPortal(r,l):null}function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nv.apply(null,arguments)}function E1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function yu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E1(Object(r),!0).forEach(function(n){tH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tH(e,t,r){return(t=rH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rH(e){var t=nH(e,"string");return typeof t=="symbol"?t:t+""}function nH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iH(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return m.isValidElement(t)?m.cloneElement(t,n):m.createElement(r,n)}function aH(e){var t,{coordinate:r,payload:n,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:l,tooltipEventType:u,chartName:d}=e,f=r,h=n,p=i;if(!l||!f||d!=="ScatterChart"&&u!=="axis")return null;var g,v,y;if(d==="ScatterChart")g=f,v=KU,y=kt.cursorLine;else if(d==="BarChart")g=HU(o,f,a,s),v=QC,y=kt.cursorRectangle;else if(o==="radial"&&OE(f)){var{cx:x,cy:w,radius:b,startAngle:_,endAngle:j}=ZC(f);g={cx:x,cy:w,startAngle:_,endAngle:j,innerRadius:b,outerRadius:b},v=tP,y=kt.cursorLine}else g={points:Dz(o,f,a)},v=VC,y=kt.cursorLine;var S=typeof l=="object"&&"className"in l?l.className:void 0,k=yu(yu(yu(yu({stroke:"#ccc",pointerEvents:"none"},a),g),uc(l)),{},{payload:h,payloadIndex:p,className:Ae("recharts-tooltip-cursor",S)});return m.createElement(Yr,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:y},m.createElement(iH,{cursor:l,cursorComp:v,cursorProps:k}))}function sH(e){var t=kK(),r=zC(),n=mc(),i=TK();return t==null||r==null||n==null||i==null?null:m.createElement(aH,nv({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:i}))}var wA=m.createContext(null),oH=()=>m.useContext(wA),_A={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function a(l,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,f||l,h),g=r?r+u:u;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],p]:l._events[g].push(p):(l._events[g]=p,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,g=new Array(p);h<p;h++)g[h]=f[h].fn;return g},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,p,g){var v=r?r+u:u;if(!this._events[v])return!1;var y=this._events[v],x=arguments.length,w,b;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),x){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,f),!0;case 4:return y.fn.call(y.context,d,f,h),!0;case 5:return y.fn.call(y.context,d,f,h,p),!0;case 6:return y.fn.call(y.context,d,f,h,p,g),!0}for(b=1,w=new Array(x-1);b<x;b++)w[b-1]=arguments[b];y.fn.apply(y.context,w)}else{var _=y.length,j;for(b=0;b<_;b++)switch(y[b].once&&this.removeListener(u,y[b].fn,void 0,!0),x){case 1:y[b].fn.call(y[b].context);break;case 2:y[b].fn.call(y[b].context,d);break;case 3:y[b].fn.call(y[b].context,d,f);break;case 4:y[b].fn.call(y[b].context,d,f,h);break;default:if(!w)for(j=1,w=new Array(x-1);j<x;j++)w[j-1]=arguments[j];y[b].fn.apply(y[b].context,w)}}return!0},o.prototype.on=function(u,d,f){return a(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return a(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return s(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&s(this,p);else{for(var v=0,y=[],x=g.length;v<x;v++)(g[v].fn!==d||h&&!g[v].once||f&&g[v].context!==f)&&y.push(g[v]);y.length?this._events[p]=y.length===1?y[0]:y:s(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&s(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(_A);var lH=_A.exports;const cH=di(lH);var Gl=new cH,iv="recharts.syncEvent.tooltip",C1="recharts.syncEvent.brush";function jA(e,t){if(t){var r=Number.parseInt(t,10);if(!mn(r))return e==null?void 0:e[r]}}var uH={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},SA=mr({name:"options",initialState:uH,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),dH=SA.reducer,{createEventEmitter:fH}=SA.actions;function hH(e){return e.tooltip.syncInteraction}var pH={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},kA=mr({name:"chartData",initialState:pH,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:P1,setDataStartEndIndexes:mH,setComputedData:iZ}=kA.actions,gH=kA.reducer,vH=["x","y"];function O1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function is(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O1(Object(r),!0).forEach(function(n){yH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yH(e,t,r){return(t=xH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xH(e){var t=bH(e,"string");return typeof t=="symbol"?t:t+""}function bH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wH(e,t){if(e==null)return{};var r,n,i=_H(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _H(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function jH(){var e=oe(B0),t=oe(U0),r=nt(),n=oe(nO),i=oe(yi),a=mc(),s=fh(),o=oe(l=>l.rootProps.className);m.useEffect(()=>{if(e==null)return fo;var l=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){var h;if(s&&d!==null&&d!==void 0&&(h=d.payload)!==null&&h!==void 0&&h.coordinate&&d.payload.sourceViewBox){var p=d.payload.coordinate,{x:g,y:v}=p,y=wH(p,vH),{x,y:w,width:b,height:_}=d.payload.sourceViewBox,j=is(is({},y),{},{x:s.x+(b?(g-x)/b:0)*s.width,y:s.y+(_?(v-w)/_:0)*s.height});r(is(is({},d),{},{payload:is(is({},d.payload),{},{coordinate:j})}))}else r(d);return}if(i!=null){var S;if(typeof n=="function"){var k={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},N=n(i,k);S=i[N]}else n==="value"&&(S=i.find(U=>String(U.value)===d.payload.label));var{coordinate:C}=d.payload;if(S==null||d.payload.active===!1||C==null||s==null){r(tv({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:E,y:P}=C,I=Math.min(E,s.x+s.width),W=Math.min(P,s.y+s.height),F={x:a==="horizontal"?S.coordinate:I,y:a==="horizontal"?W:S.coordinate},K=tv({active:d.payload.active,coordinate:F,dataKey:d.payload.dataKey,index:String(S.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox});r(K)}}};return Gl.on(iv,l),()=>{Gl.off(iv,l)}},[o,r,t,e,n,i,a,s])}function SH(){var e=oe(B0),t=oe(U0),r=nt();m.useEffect(()=>{if(e==null)return fo;var n=(i,a,s)=>{t!==s&&e===i&&r(mH(a))};return Gl.on(C1,n),()=>{Gl.off(C1,n)}},[r,t,e])}function kH(){var e=nt();m.useEffect(()=>{e(fH())},[e]),jH(),SH()}function NH(e,t,r,n,i,a){var s=oe(p=>IK(p,e,t)),o=oe(U0),l=oe(B0),u=oe(nO),d=oe(hH),f=d==null?void 0:d.active,h=fh();m.useEffect(()=>{if(!f&&l!=null&&o!=null){var p=tv({active:a,coordinate:r,dataKey:s,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:h});Gl.emit(iv,l,p,o)}},[f,r,s,i,n,o,l,u,a,h])}function A1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function T1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A1(Object(r),!0).forEach(function(n){EH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EH(e,t,r){return(t=CH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CH(e){var t=PH(e,"string");return typeof t=="symbol"?t:t+""}function PH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OH(e){return e.dataKey}function AH(e,t){return m.isValidElement(e)?m.cloneElement(e,t):typeof e=="function"?m.createElement(e,t):m.createElement(_U,t)}var D1=[],TH={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Va.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function I1(e){var t,r,n=rr(e,TH),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:l,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:h,position:p,reverseDirection:g,useTranslate3d:v,wrapperStyle:y,cursor:x,shared:w,trigger:b,defaultIndex:_,portal:j,axisId:S}=n,k=nt(),N=typeof _=="number"?String(_):_;m.useEffect(()=>{k(T7({shared:w,trigger:b,axisId:S,active:i,defaultIndex:N}))},[k,w,b,S,i,N]);var C=fh(),E=qC(),P=E7(w),{activeIndex:I,isActive:W}=(t=oe(he=>LK(he,P,b,N)))!==null&&t!==void 0?t:{},F=oe(he=>MK(he,P,b,N)),K=oe(he=>xA(he,P,b,N)),U=oe(he=>RK(he,P,b,N)),H=F,R=oH(),B=(r=i??W)!==null&&r!==void 0?r:!1,[G,ae]=NF([H,B]),Q=P==="axis"?K:void 0;NH(P,b,U,Q,I,B);var ge=j??R;if(ge==null||C==null||P==null)return null;var A=H??D1;B||(A=D1),u&&A.length&&(A=K6(A.filter(he=>he.value!=null&&(he.hide!==!0||n.includeHidden)),h,OH));var J=A.length>0,re=m.createElement(PU,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:d,active:B,coordinate:U,hasPayload:J,offset:f,position:p,reverseDirection:g,useTranslate3d:v,viewBox:C,wrapperStyle:y,lastBoundingBox:G,innerRef:ae,hasPortalFromProps:!!j},AH(l,T1(T1({},n),{},{payload:A,label:Q,active:B,activeIndex:I,coordinate:U,accessibilityLayer:E})));return m.createElement(m.Fragment,null,Mi.createPortal(re,ge),B&&m.createElement(sH,{cursor:x,tooltipEventType:P,coordinate:U,payload:A,index:I}))}var NA=e=>null;NA.displayName="Cell";function DH(e,t,r){return(t=IH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IH(e){var t=RH(e,"string");return typeof t=="symbol"?t:t+""}function RH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class MH{constructor(t){DH(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function R1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function LH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R1(Object(r),!0).forEach(function(n){$H(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $H(e,t,r){return(t=FH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FH(e){var t=BH(e,"string");return typeof t=="symbol"?t:t+""}function BH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UH={cacheSize:2e3,enableCache:!0},EA=LH({},UH),M1=new MH(EA.cacheSize),zH={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},L1="recharts_measurement_span";function WH(e,t){var r=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",a=t.fontStyle||"",s=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var $1=(e,t)=>{try{var r=document.getElementById(L1);r||(r=document.createElement("span"),r.setAttribute("id",L1),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,zH,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},fl=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Va.isSsr)return{width:0,height:0};if(!EA.enableCache)return $1(t,r);var n=WH(t,r),i=M1.get(n);if(i)return i;var a=$1(t,r);return M1.set(n,a),a},F1=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,B1=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,KH=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,HH=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,CA={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},qH=Object.keys(CA),js="NaN";function VH(e,t){return e*CA[t]}class sr{static parse(t){var r,[,n,i]=(r=HH.exec(t))!==null&&r!==void 0?r:[];return new sr(parseFloat(n),i??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,mn(t)&&(this.unit=""),r!==""&&!KH.test(r)&&(this.num=NaN,this.unit=""),qH.includes(r)&&(this.num=VH(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new sr(NaN,""):new sr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new sr(NaN,""):new sr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new sr(NaN,""):new sr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new sr(NaN,""):new sr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return mn(this.num)}}function PA(e){if(e.includes(js))return js;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,a]=(r=F1.exec(t))!==null&&r!==void 0?r:[],s=sr.parse(n??""),o=sr.parse(a??""),l=i==="*"?s.multiply(o):s.divide(o);if(l.isNaN())return js;t=t.replace(F1,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=B1.exec(t))!==null&&u!==void 0?u:[],p=sr.parse(d??""),g=sr.parse(h??""),v=f==="+"?p.add(g):p.subtract(g);if(v.isNaN())return js;t=t.replace(B1,v.toString())}return t}var U1=/\(([^()]*)\)/;function GH(e){for(var t=e,r;(r=U1.exec(t))!=null;){var[,n]=r;t=t.replace(U1,PA(n))}return t}function YH(e){var t=e.replace(/\s+/g,"");return t=GH(t),t=PA(t),t}function XH(e){try{return YH(e)}catch{return js}}function Qp(e){var t=XH(e.slice(5,-1));return t===js?"":t}var JH=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],QH=["dx","dy","angle","className","breakAll"];function av(){return av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},av.apply(null,arguments)}function z1(e,t){if(e==null)return{};var r,n,i=ZH(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ZH(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var OA=/[ \f\n\r\t\v\u2028\u2029]+/,AA=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];He(t)||(r?i=t.toString().split(""):i=t.toString().split(OA));var a=i.map(o=>({word:o,width:fl(o,n).width})),s=r?0:fl("",n).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function eq(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var TA=(e,t,r,n)=>e.reduce((i,a)=>{var{word:s,width:o}=a,l=i[i.length-1];if(l&&o!=null&&(t==null||n||l.width+o+r<Number(t)))l.words.push(s),l.width+=o+r;else{var u={words:[s],width:o};i.push(u)}return i},[]),DA=e=>e.reduce((t,r)=>t.width>r.width?t:r),tq="",W1=(e,t,r,n,i,a,s,o)=>{var l=e.slice(0,t),u=AA({breakAll:r,style:n,children:l+tq});if(!u)return[!1,[]];var d=TA(u.wordsWithComputedWidth,a,s,o),f=d.length>i||DA(d).width>Number(a);return[f,d]},rq=(e,t,r,n,i)=>{var{maxLines:a,children:s,style:o,breakAll:l}=e,u=ie(a),d=String(s),f=TA(t,n,r,i);if(!u||i)return f;var h=f.length>a||DA(f).width>Number(n);if(!h)return f;for(var p=0,g=d.length-1,v=0,y;p<=g&&v<=d.length-1;){var x=Math.floor((p+g)/2),w=x-1,[b,_]=W1(d,w,l,o,a,n,r,i),[j]=W1(d,x,l,o,a,n,r,i);if(!b&&!j&&(p=x+1),b&&j&&(g=x-1),!b&&j){y=_;break}v++}return y||f},K1=e=>{var t=He(e)?[]:e.toString().split(OA);return[{words:t,width:void 0}]},nq=e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:a,maxLines:s}=e;if((t||r)&&!Va.isSsr){var o,l,u=AA({breakAll:a,children:n,style:i});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,l=f}else return K1(n);return rq({breakAll:a,children:n,maxLines:s,style:i},o,l,t,!!r)}return K1(n)},IA="#808080",iq={breakAll:!1,capHeight:"0.71em",fill:IA,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},ux=m.forwardRef((e,t)=>{var r=rr(e,iq),{x:n,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:l,textAnchor:u,verticalAnchor:d}=r,f=z1(r,JH),h=m.useMemo(()=>nq({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:l,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,l,f.style,f.width]),{dx:p,dy:g,angle:v,className:y,breakAll:x}=f,w=z1(f,QH);if(!On(n)||!On(i)||h.length===0)return null;var b=Number(n)+(ie(p)?p:0),_=Number(i)+(ie(g)?g:0);if(!rt(b)||!rt(_))return null;var j;switch(d){case"start":j=Qp("calc(".concat(s,")"));break;case"middle":j=Qp("calc(".concat((h.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:j=Qp("calc(".concat(h.length-1," * -").concat(a,")"));break}var S=[];if(l){var k=h[0].width,{width:N}=f;S.push("scale(".concat(ie(N)&&ie(k)?N/k:1,")"))}return v&&S.push("rotate(".concat(v,", ").concat(b,", ").concat(_,")")),S.length&&(w.transform=S.join(" ")),m.createElement("text",av({},Qt(w),{ref:t,x:b,y:_,className:Ae("recharts-text",y),textAnchor:u,fill:o.includes("url")?IA:o}),h.map((C,E)=>{var P=C.words.join(x?"":" ");return m.createElement("tspan",{x:b,dy:E===0?j:a,key:"".concat(P,"-").concat(E)},P)}))});ux.displayName="Text";var aq=["labelRef"];function sq(e,t){if(e==null)return{};var r,n,i=oq(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function oq(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function H1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H1(Object(r),!0).forEach(function(n){lq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lq(e,t,r){return(t=cq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cq(e){var t=uq(e,"string");return typeof t=="symbol"?t:t+""}function uq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wn(){return Wn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wn.apply(null,arguments)}var RA=m.createContext(null),dq=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:i,width:a,height:s,children:o}=e,l=m.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:i,width:a,height:s}),[t,r,n,i,a,s]);return m.createElement(RA.Provider,{value:l},o)},MA=()=>{var e=m.useContext(RA),t=fh();return e||UC(t)},fq=m.createContext(null),hq=()=>{var e=m.useContext(fq),t=oe(lO);return e||t},pq=e=>{var{value:t,formatter:r}=e,n=He(e.children)?t:e.children;return typeof r=="function"?r(n):n},dx=e=>e!=null&&typeof e=="function",mq=(e,t)=>{var r=cr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},gq=(e,t,r,n,i)=>{var{offset:a,className:s}=e,{cx:o,cy:l,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:p}=i,g=(u+d)/2,v=mq(f,h),y=v>=0?1:-1,x,w;switch(t){case"insideStart":x=f+y*a,w=p;break;case"insideEnd":x=h-y*a,w=!p;break;case"end":x=h+y*a,w=p;break;default:throw new Error("Unsupported position ".concat(t))}w=v<=0?w:!w;var b=Mt(o,l,g,x),_=Mt(o,l,g,x+(w?1:-1)*359),j="M".concat(b.x,",").concat(b.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(_.x,",").concat(_.y),S=He(e.id)?$l("recharts-radial-line-"):e.id;return m.createElement("text",Wn({},n,{dominantBaseline:"central",className:Ae("recharts-radial-bar-label",s)}),m.createElement("defs",null,m.createElement("path",{id:S,d:j})),m.createElement("textPath",{xlinkHref:"#".concat(S)},r))},vq=(e,t,r)=>{var{cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:l}=e,u=(o+l)/2;if(r==="outside"){var{x:d,y:f}=Mt(n,i,s+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=(a+s)/2,{x:p,y:g}=Mt(n,i,h,u);return{x:p,y:g,textAnchor:"middle",verticalAnchor:"middle"}},sv=e=>"cx"in e&&ie(e.cx),yq=(e,t)=>{var{parentViewBox:r,offset:n,position:i}=e,a;r!=null&&!sv(r)&&(a=r);var{x:s,y:o,upperWidth:l,lowerWidth:u,height:d}=t,f=s,h=s+(l-u)/2,p=(f+h)/2,g=(l+u)/2,v=f+l/2,y=d>=0?1:-1,x=y*n,w=y>0?"end":"start",b=y>0?"start":"end",_=l>=0?1:-1,j=_*n,S=_>0?"end":"start",k=_>0?"start":"end";if(i==="top"){var N={x:f+l/2,y:o-x,textAnchor:"middle",verticalAnchor:w};return et(et({},N),a?{height:Math.max(o-a.y,0),width:l}:{})}if(i==="bottom"){var C={x:h+u/2,y:o+d+x,textAnchor:"middle",verticalAnchor:b};return et(et({},C),a?{height:Math.max(a.y+a.height-(o+d),0),width:u}:{})}if(i==="left"){var E={x:p-j,y:o+d/2,textAnchor:S,verticalAnchor:"middle"};return et(et({},E),a?{width:Math.max(E.x-a.x,0),height:d}:{})}if(i==="right"){var P={x:p+g+j,y:o+d/2,textAnchor:k,verticalAnchor:"middle"};return et(et({},P),a?{width:Math.max(a.x+a.width-P.x,0),height:d}:{})}var I=a?{width:g,height:d}:{};return i==="insideLeft"?et({x:p+j,y:o+d/2,textAnchor:k,verticalAnchor:"middle"},I):i==="insideRight"?et({x:p+g-j,y:o+d/2,textAnchor:S,verticalAnchor:"middle"},I):i==="insideTop"?et({x:f+l/2,y:o+x,textAnchor:"middle",verticalAnchor:b},I):i==="insideBottom"?et({x:h+u/2,y:o+d-x,textAnchor:"middle",verticalAnchor:w},I):i==="insideTopLeft"?et({x:f+j,y:o+x,textAnchor:k,verticalAnchor:b},I):i==="insideTopRight"?et({x:f+l-j,y:o+x,textAnchor:S,verticalAnchor:b},I):i==="insideBottomLeft"?et({x:h+j,y:o+d-x,textAnchor:k,verticalAnchor:w},I):i==="insideBottomRight"?et({x:h+u-j,y:o+d-x,textAnchor:S,verticalAnchor:w},I):i&&typeof i=="object"&&(ie(i.x)||ii(i.x))&&(ie(i.y)||ii(i.y))?et({x:s+gn(i.x,g),y:o+gn(i.y,d),textAnchor:"end",verticalAnchor:"end"},I):et({x:v,y:o+d/2,textAnchor:"middle",verticalAnchor:"middle"},I)},xq={offset:5,zIndex:kt.label};function Pi(e){var t=rr(e,xq),{viewBox:r,position:n,value:i,children:a,content:s,className:o="",textBreakAll:l,labelRef:u}=t,d=hq(),f=MA(),h=n==="center"?f:d??f,p,g,v;if(r==null?p=h:sv(r)?p=r:p=UC(r),!p||He(i)&&He(a)&&!m.isValidElement(s)&&typeof s!="function")return null;var y=et(et({},t),{},{viewBox:p});if(m.isValidElement(s)){var{labelRef:x}=y,w=sq(y,aq);return m.cloneElement(s,w)}if(typeof s=="function"){if(g=m.createElement(s,y),m.isValidElement(g))return g}else g=pq(t);var b=Qt(t);if(sv(p)){if(n==="insideStart"||n==="insideEnd"||n==="end")return gq(t,n,g,b,p);v=vq(p,t.offset,t.position)}else v=yq(t,p);return m.createElement(Yr,{zIndex:t.zIndex},m.createElement(ux,Wn({ref:u,className:Ae("recharts-label",o)},b,v,{textAnchor:eq(b.textAnchor)?b.textAnchor:v.textAnchor,breakAll:l}),g))}Pi.displayName="Label";var bq=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?m.createElement(Pi,Wn({key:"label-implicit"},n)):On(e)?m.createElement(Pi,Wn({key:"label-implicit",value:e},n)):m.isValidElement(e)?e.type===Pi?m.cloneElement(e,et({key:"label-implicit"},n)):m.createElement(Pi,Wn({key:"label-implicit",content:e},n)):dx(e)?m.createElement(Pi,Wn({key:"label-implicit",content:e},n)):e&&typeof e=="object"?m.createElement(Pi,Wn({},e,{key:"label-implicit"},n)):null};function wq(e){var{label:t,labelRef:r}=e,n=MA();return bq(t,n,r)||null}var LA={},$A={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})($A);var FA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(FA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$A,r=FA,n=Zf;function i(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=i})(LA);var _q=LA.last;const jq=di(_q);var Sq=["valueAccessor"],kq=["dataKey","clockWise","id","textBreakAll","zIndex"];function tf(){return tf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tf.apply(null,arguments)}function q1(e,t){if(e==null)return{};var r,n,i=Nq(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Nq(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Eq=e=>Array.isArray(e.value)?jq(e.value):e.value,BA=m.createContext(void 0),UA=BA.Provider,zA=m.createContext(void 0);zA.Provider;function Cq(){return m.useContext(BA)}function Pq(){return m.useContext(zA)}function Fu(e){var{valueAccessor:t=Eq}=e,r=q1(e,Sq),{dataKey:n,clockWise:i,id:a,textBreakAll:s,zIndex:o}=r,l=q1(r,kq),u=Cq(),d=Pq(),f=u||d;return!f||!f.length?null:m.createElement(Yr,{zIndex:o??kt.label},m.createElement(Hr,{className:"recharts-label-list"},f.map((h,p)=>{var g,v=He(n)?t(h,p):Et(h&&h.payload,n),y=He(a)?{}:{id:"".concat(a,"-").concat(p)};return m.createElement(Pi,tf({key:"label-".concat(p)},Qt(h),l,y,{fill:(g=r.fill)!==null&&g!==void 0?g:h.fill,parentViewBox:h.parentViewBox,value:v,textBreakAll:s,viewBox:h.viewBox,index:p,zIndex:0}))})))}Fu.displayName="LabelList";function WA(e){var{label:t}=e;return t?t===!0?m.createElement(Fu,{key:"labelList-implicit"}):m.isValidElement(t)||dx(t)?m.createElement(Fu,{key:"labelList-implicit",content:t}):typeof t=="object"?m.createElement(Fu,tf({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function ov(){return ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ov.apply(null,arguments)}var KA=e=>{var{cx:t,cy:r,r:n,className:i}=e,a=Ae("recharts-dot",i);return ie(t)&&ie(r)&&ie(n)?m.createElement("circle",ov({},pn(e),Vy(e),{className:a,cx:t,cy:r,r:n})):null},Oq={radiusAxis:{},angleAxis:{}},HA=mr({name:"polarAxis",initialState:Oq,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:aZ,removeRadiusAxis:sZ,addAngleAxis:oZ,removeAngleAxis:lZ}=HA.actions,Aq=HA.reducer,qA={exports:{}},Ie={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fx=Symbol.for("react.transitional.element"),hx=Symbol.for("react.portal"),Mh=Symbol.for("react.fragment"),Lh=Symbol.for("react.strict_mode"),$h=Symbol.for("react.profiler"),Fh=Symbol.for("react.consumer"),Bh=Symbol.for("react.context"),Uh=Symbol.for("react.forward_ref"),zh=Symbol.for("react.suspense"),Wh=Symbol.for("react.suspense_list"),Kh=Symbol.for("react.memo"),Hh=Symbol.for("react.lazy"),Tq=Symbol.for("react.view_transition"),Dq=Symbol.for("react.client.reference");function Xr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case fx:switch(e=e.type,e){case Mh:case $h:case Lh:case zh:case Wh:case Tq:return e;default:switch(e=e&&e.$$typeof,e){case Bh:case Uh:case Hh:case Kh:return e;case Fh:return e;default:return t}}case hx:return t}}}Ie.ContextConsumer=Fh;Ie.ContextProvider=Bh;Ie.Element=fx;Ie.ForwardRef=Uh;Ie.Fragment=Mh;Ie.Lazy=Hh;Ie.Memo=Kh;Ie.Portal=hx;Ie.Profiler=$h;Ie.StrictMode=Lh;Ie.Suspense=zh;Ie.SuspenseList=Wh;Ie.isContextConsumer=function(e){return Xr(e)===Fh};Ie.isContextProvider=function(e){return Xr(e)===Bh};Ie.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===fx};Ie.isForwardRef=function(e){return Xr(e)===Uh};Ie.isFragment=function(e){return Xr(e)===Mh};Ie.isLazy=function(e){return Xr(e)===Hh};Ie.isMemo=function(e){return Xr(e)===Kh};Ie.isPortal=function(e){return Xr(e)===hx};Ie.isProfiler=function(e){return Xr(e)===$h};Ie.isStrictMode=function(e){return Xr(e)===Lh};Ie.isSuspense=function(e){return Xr(e)===zh};Ie.isSuspenseList=function(e){return Xr(e)===Wh};Ie.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Mh||e===$h||e===Lh||e===zh||e===Wh||typeof e=="object"&&e!==null&&(e.$$typeof===Hh||e.$$typeof===Kh||e.$$typeof===Bh||e.$$typeof===Fh||e.$$typeof===Uh||e.$$typeof===Dq||e.getModuleId!==void 0)};Ie.typeOf=Xr;qA.exports=Ie;var Iq=qA.exports,V1=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",G1=null,Zp=null,VA=e=>{if(e===G1&&Array.isArray(Zp))return Zp;var t=[];return m.Children.forEach(e,r=>{He(r)||(Iq.isFragment(r)?t=t.concat(VA(r.props.children)):t.push(r))}),Zp=t,G1=e,t};function Rq(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(i=>V1(i)):n=[V1(t)],VA(e).forEach(i=>{var a=Hs(i,"type.displayName")||Hs(i,"type.name");a&&n.indexOf(a)!==-1&&r.push(i)}),r}var GA=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,YA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var i;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const a=r[Symbol.toStringTag];return a==null||!((i=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&i.writable)?!1:r.toString()===`[object ${a}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(YA);var Mq=YA.isPlainObject;const Lq=di(Mq);function Y1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function X1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y1(Object(r),!0).forEach(function(n){$q(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $q(e,t,r){return(t=Fq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fq(e){var t=Bq(e,"string");return typeof t=="symbol"?t:t+""}function Bq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rf(){return rf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rf.apply(null,arguments)}var J1=(e,t,r,n,i)=>{var a=r-n,s;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-a/2,",").concat(t+i),s+="L ".concat(e+r-a/2-n,",").concat(t+i),s+="L ".concat(e,",").concat(t," Z"),s},Uq={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zq=e=>{var t=rr(e,Uq),{x:r,y:n,upperWidth:i,lowerWidth:a,height:s,className:o}=t,{animationEasing:l,animationDuration:u,animationBegin:d,isUpdateAnimationActive:f}=t,h=m.useRef(null),[p,g]=m.useState(-1),v=m.useRef(i),y=m.useRef(a),x=m.useRef(s),w=m.useRef(r),b=m.useRef(n),_=mh(e,"trapezoid-");if(m.useEffect(()=>{if(h.current&&h.current.getTotalLength)try{var F=h.current.getTotalLength();F&&g(F)}catch{}},[]),r!==+r||n!==+n||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var j=Ae("recharts-trapezoid",o);if(!f)return m.createElement("g",null,m.createElement("path",rf({},Qt(t),{className:j,d:J1(r,n,i,a,s)})));var S=v.current,k=y.current,N=x.current,C=w.current,E=b.current,P="0px ".concat(p===-1?1:p,"px"),I="".concat(p,"px 0px"),W=GC(["strokeDasharray"],u,l);return m.createElement(ph,{animationId:_,key:_,canBegin:p>0,duration:u,easing:l,isActive:f,begin:d},F=>{var K=Ze(S,i,F),U=Ze(k,a,F),H=Ze(N,s,F),R=Ze(C,r,F),B=Ze(E,n,F);h.current&&(v.current=K,y.current=U,x.current=H,w.current=R,b.current=B);var G=F>0?{transition:W,strokeDasharray:I}:{strokeDasharray:P};return m.createElement("path",rf({},Qt(t),{className:j,d:J1(R,B,K,U,H),ref:h,style:X1(X1({},G),t.style)}))})},Wq=["option","shapeType","propTransformer","activeClassName","isActive"];function Kq(e,t){if(e==null)return{};var r,n,i=Hq(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Hq(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Q1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q1(Object(r),!0).forEach(function(n){qq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qq(e,t,r){return(t=Vq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vq(e){var t=Gq(e,"string");return typeof t=="symbol"?t:t+""}function Gq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yq(e,t){return nf(nf({},t),e)}function Xq(e,t){return e==="symbols"}function Z1(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return m.createElement(QC,r);case"trapezoid":return m.createElement(zq,r);case"sector":return m.createElement(tP,r);case"symbols":if(Xq(t))return m.createElement(PE,r);break;case"curve":return m.createElement(VC,r);default:return null}}function Jq(e){return m.isValidElement(e)?e.props:e}function XA(e){var{option:t,shapeType:r,propTransformer:n=Yq,activeClassName:i="recharts-active-shape",isActive:a}=e,s=Kq(e,Wq),o;if(m.isValidElement(t))o=m.cloneElement(t,nf(nf({},s),Jq(t)));else if(typeof t=="function")o=t(s);else if(Lq(t)&&typeof t!="boolean"){var l=n(t,s);o=m.createElement(Z1,{shapeType:r,elementProps:l})}else{var u=s;o=m.createElement(Z1,{shapeType:r,elementProps:u})}return a?m.createElement(Hr,{className:i},o):o}var JA=(e,t)=>{var r=nt();return(n,i)=>a=>{e==null||e(n,i,a),r(QO({activeIndex:String(i),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},QA=e=>{var t=nt();return(r,n)=>i=>{e==null||e(r,n,i),t(D7())}},ZA=(e,t)=>{var r=nt();return(n,i)=>a=>{e==null||e(n,i,a),r(I7({activeIndex:String(i),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function eT(e){var{fn:t,args:r}=e,n=nt(),i=Ht();return m.useLayoutEffect(()=>{if(!i){var a=t(r);return n(O7(a)),()=>{n(A7(a))}}},[t,r,n,i]),null}function tT(e){var{legendPayload:t}=e,r=nt(),n=Ht();return m.useLayoutEffect(()=>n?fo:(r(mU(t)),()=>{r(gU(t))}),[r,n,t]),null}var em,Qq=()=>{var[e]=m.useState(()=>$l("uid-"));return e},Zq=(em=nD.useId)!==null&&em!==void 0?em:Qq;function rT(e,t){var r=Zq();return t||(e?"".concat(e,"-").concat(r):r)}var eV=m.createContext(void 0),nT=e=>{var{id:t,type:r,children:n}=e,i=rT("recharts-".concat(r),t);return m.createElement(eV.Provider,{value:i},n(i))},tV={cartesianItems:[],polarItems:[]},iT=mr({name:"graphicalItems",initialState:tV,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:pt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Xn(e).cartesianItems.indexOf(r);i>-1&&(e.cartesianItems[i]=n)},prepare:pt()},removeCartesianGraphicalItem:{reducer(e,t){var r=Xn(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:pt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:pt()},removePolarGraphicalItem:{reducer(e,t){var r=Xn(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:pt()}}}),{addCartesianGraphicalItem:rV,replaceCartesianGraphicalItem:nV,removeCartesianGraphicalItem:iV,addPolarGraphicalItem:cZ,removePolarGraphicalItem:uZ}=iT.actions,aV=iT.reducer;function aT(e){var t=nt(),r=m.useRef(null);return m.useLayoutEffect(()=>{r.current===null?t(rV(e)):r.current!==e&&t(nV({prev:r.current,next:e})),r.current=e},[t,e]),m.useLayoutEffect(()=>()=>{r.current&&(t(iV(r.current)),r.current=null)},[t]),null}var sV=["points"];function ej(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function tm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ej(Object(r),!0).forEach(function(n){oV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ej(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oV(e,t,r){return(t=lV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lV(e){var t=cV(e,"string");return typeof t=="symbol"?t:t+""}function cV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function af(){return af=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},af.apply(null,arguments)}function uV(e,t){if(e==null)return{};var r,n,i=dV(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function dV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fV(e){var{option:t,dotProps:r,className:n}=e;if(m.isValidElement(t))return m.cloneElement(t,r);if(typeof t=="function")return t(r);var i=Ae(n,typeof t!="boolean"?t.className:""),a=r??{},{points:s}=a,o=uV(a,sV);return m.createElement(KA,af({},o,{className:i}))}function hV(e,t){return e==null?!1:t?!0:e.length===1}function pV(e){var{points:t,dot:r,className:n,dotClassName:i,dataKey:a,baseProps:s,needClip:o,clipPathId:l,zIndex:u=kt.scatter}=e;if(!hV(t,r))return null;var d=GA(r),f=$3(r),h=t.map((g,v)=>{var y,x,w=tm(tm(tm({r:3},s),f),{},{index:v,cx:(y=g.x)!==null&&y!==void 0?y:void 0,cy:(x=g.y)!==null&&x!==void 0?x:void 0,dataKey:a,value:g.value,payload:g.payload,points:t});return m.createElement(fV,{key:"dot-".concat(v),option:r,dotProps:w,className:i})}),p={};return o&&l!=null&&(p.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(l,")")),m.createElement(Yr,{zIndex:u},m.createElement(Hr,af({className:n},p),h))}function tj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function rj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tj(Object(r),!0).forEach(function(n){mV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mV(e,t,r){return(t=gV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gV(e){var t=vV(e,"string");return typeof t=="symbol"?t:t+""}function vV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yV={xAxis:{},yAxis:{},zAxis:{}},sT=mr({name:"cartesianAxis",initialState:yV,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:pt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:pt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:pt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:pt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:pt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:pt()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,i=e.yAxis[r];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&n===a[1]&&n!==i.width&&Math.abs(n-a[0])<=1)return;var s=[...a,n].slice(-3);e.yAxis[r]=rj(rj({},e.yAxis[r]),{},{width:n,widthHistory:s})}}}}),{addXAxis:xV,removeXAxis:bV,addYAxis:wV,removeYAxis:_V,addZAxis:dZ,removeZAxis:fZ,updateYAxisWidth:jV}=sT.actions,SV=sT.reducer,kV=T([Ct],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),NV=T([kV,hi,pi],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),px=()=>oe(NV),EV=()=>oe(bK);function nj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function rm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nj(Object(r),!0).forEach(function(n){CV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CV(e,t,r){return(t=PV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PV(e){var t=OV(e,"string");return typeof t=="symbol"?t:t+""}function OV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AV=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:i,dataKey:a}=e;if(i===!1||t.x==null||t.y==null)return null;var s={index:r,dataKey:a,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},o=rm(rm(rm({},s),uc(i)),Vy(i)),l;return m.isValidElement(i)?l=m.cloneElement(i,o):typeof i=="function"?l=i(o):l=m.createElement(KA,o),m.createElement(Hr,{className:"recharts-active-dot"},l)};function TV(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:i,zIndex:a=kt.activeDot}=e,s=oe(za),o=EV();if(t==null||o==null)return null;var l=t.find(u=>o.includes(u.payload));return He(l)?null:m.createElement(Yr,{zIndex:a},m.createElement(AV,{point:l,childIndex:Number(s),mainColor:r,dataKey:i,activeDot:n}))}var DV="Invariant failed";function IV(e,t){throw new Error(DV)}var RV=["x","y"];function lv(){return lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lv.apply(null,arguments)}function ij(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Uo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ij(Object(r),!0).forEach(function(n){MV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ij(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MV(e,t,r){return(t=LV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LV(e){var t=$V(e,"string");return typeof t=="symbol"?t:t+""}function $V(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FV(e,t){if(e==null)return{};var r,n,i=BV(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function BV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function UV(e,t){var{x:r,y:n}=e,i=FV(e,RV),a="".concat(r),s=parseInt(a,10),o="".concat(n),l=parseInt(o,10),u="".concat(t.height||i.height),d=parseInt(u,10),f="".concat(t.width||i.width),h=parseInt(f,10);return Uo(Uo(Uo(Uo(Uo({},t),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function sf(e){return m.createElement(XA,lv({shapeType:"rectangle",propTransformer:UV,activeClassName:"recharts-active-bar"},e))}var zV=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(ie(t))return t;var a=ie(n)||He(n);return a?t(n,i):(a||IV(),r)}},WV={},oT=mr({name:"errorBars",initialState:WV,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:i}=t.payload;e[r]&&(e[r]=e[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?i:a))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:hZ,replaceErrorBar:pZ,removeErrorBar:mZ}=oT.actions,KV=oT.reducer,HV=["children"];function qV(e,t){if(e==null)return{};var r,n,i=VV(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function VV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var GV={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},YV=m.createContext(GV);function lT(e){var{children:t}=e,r=qV(e,HV);return m.createElement(YV.Provider,{value:r},t)}function mx(e,t){var r,n,i=oe(u=>gi(u,e)),a=oe(u=>vi(u,t)),s=(r=i==null?void 0:i.allowDataOverflow)!==null&&r!==void 0?r:vr.allowDataOverflow,o=(n=a==null?void 0:a.allowDataOverflow)!==null&&n!==void 0?n:yr.allowDataOverflow,l=s||o;return{needClip:l,needClipX:s,needClipY:o}}function cT(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,i=px(),{needClipX:a,needClipY:s,needClip:o}=mx(t,r);if(!o||!i)return null;var{x:l,y:u,width:d,height:f}=i;return m.createElement("clipPath",{id:"clipPath-".concat(n)},m.createElement("rect",{x:a?l:l-d/2,y:s?u:u-f/2,width:a?d:d*2,height:s?f:f*2}))}function XV(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&rt(e.zIndex)?e.zIndex:t}var JV=["onMouseEnter","onMouseLeave","onClick"],QV=["value","background","tooltipPosition"],ZV=["id"],eG=["onMouseEnter","onClick","onMouseLeave"];function ui(){return ui=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ui.apply(null,arguments)}function aj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Yt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aj(Object(r),!0).forEach(function(n){tG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tG(e,t,r){return(t=rG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rG(e){var t=nG(e,"string");return typeof t=="symbol"?t:t+""}function nG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function of(e,t){if(e==null)return{};var r,n,i=iG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function iG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var aG=e=>{var{dataKey:t,name:r,fill:n,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:n,value:oh(r,t),payload:e}]};function sG(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:i,name:a,hide:s,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:oh(a,t),hide:s,type:e.tooltipType,color:e.fill,unit:o}}}function oG(e){var t=oe(za),{data:r,dataKey:n,background:i,allOtherBarProps:a}=e,{onMouseEnter:s,onMouseLeave:o,onClick:l}=a,u=of(a,JV),d=JA(s,n),f=QA(o),h=ZA(l,n);if(!i||r==null)return null;var p=uc(i);return m.createElement(Yr,{zIndex:XV(i,kt.barBackground)},r.map((g,v)=>{var{value:y,background:x,tooltipPosition:w}=g,b=of(g,QV);if(!x)return null;var _=d(g,v),j=f(g,v),S=h(g,v),k=Yt(Yt(Yt(Yt(Yt({option:i,isActive:String(v)===t},b),{},{fill:"#eee"},x),p),Gy(u,g,v)),{},{onMouseEnter:_,onMouseLeave:j,onClick:S,dataKey:n,index:v,className:"recharts-bar-background-rectangle"});return m.createElement(sf,ui({key:"background-bar-".concat(v)},k))}))}function lG(e){var{showLabels:t,children:r,rects:n}=e,i=n==null?void 0:n.map(a=>{var s={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return Yt(Yt({},s),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:s,fill:a.fill})});return m.createElement(UA,{value:t?i:void 0},r)}function cG(e){var{shape:t,activeBar:r,baseProps:n,entry:i,index:a,dataKey:s}=e,o=oe(za),l=oe(hA),u=r&&String(a)===o&&(l==null||s===l),d=u?r:t;return u?m.createElement(Yr,{zIndex:kt.activeBar},m.createElement(sf,ui({},n,{name:String(n.name)},i,{isActive:u,option:d,index:a,dataKey:s}))):m.createElement(sf,ui({},n,{name:String(n.name)},i,{isActive:u,option:d,index:a,dataKey:s}))}function uG(e){var{shape:t,baseProps:r,entry:n,index:i,dataKey:a}=e;return m.createElement(sf,ui({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:i,dataKey:a}))}function dG(e){var t,{data:r,props:n}=e,i=(t=pn(n))!==null&&t!==void 0?t:{},{id:a}=i,s=of(i,ZV),{shape:o,dataKey:l,activeBar:u}=n,{onMouseEnter:d,onClick:f,onMouseLeave:h}=n,p=of(n,eG),g=JA(d,l),v=QA(h),y=ZA(f,l);return r?m.createElement(m.Fragment,null,r.map((x,w)=>m.createElement(Hr,ui({key:"rectangle-".concat(x==null?void 0:x.x,"-").concat(x==null?void 0:x.y,"-").concat(x==null?void 0:x.value,"-").concat(w),className:"recharts-bar-rectangle"},Gy(p,x,w),{onMouseEnter:g(x,w),onMouseLeave:v(x,w),onClick:y(x,w)}),u?m.createElement(cG,{shape:o,activeBar:u,baseProps:s,entry:x,index:w,dataKey:l}):m.createElement(uG,{shape:o,baseProps:s,entry:x,index:w,dataKey:l})))):null}function fG(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:l,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=mh(t,"recharts-bar-"),[p,g]=m.useState(!1),v=!p,y=m.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),x=m.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return m.createElement(lG,{showLabels:v,rects:n},m.createElement(ph,{animationId:h,begin:s,duration:o,isActive:a,easing:l,onAnimationEnd:y,onAnimationStart:x,key:h},w=>{var b=w===1?n:n==null?void 0:n.map((_,j)=>{var S=f&&f[j];if(S)return Yt(Yt({},_),{},{x:Ze(S.x,_.x,w),y:Ze(S.y,_.y,w),width:Ze(S.width,_.width,w),height:Ze(S.height,_.height,w)});if(i==="horizontal"){var k=Ze(0,_.height,w),N=Ze(_.stackedBarStart,_.y,w);return Yt(Yt({},_),{},{y:N,height:k})}var C=Ze(0,_.width,w),E=Ze(_.stackedBarStart,_.x,w);return Yt(Yt({},_),{},{width:C,x:E})});return w>0&&(r.current=b??null),b==null?null:m.createElement(Hr,null,m.createElement(dG,{props:t,data:b}))}),m.createElement(WA,{label:t.label}),t.children)}function hG(e){var t=m.useRef(null);return m.createElement(fG,{previousRectanglesRef:t,props:e})}var uT=0,pG=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Et(e,t)}};class mG extends m.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:i,xAxisId:a,yAxisId:s,needClip:o,background:l,id:u}=this.props;if(t||r==null)return null;var d=Ae("recharts-bar",i),f=u;return m.createElement(Hr,{className:d,id:u},o&&m.createElement("defs",null,m.createElement(cT,{clipPathId:f,xAxisId:a,yAxisId:s})),m.createElement(Hr,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},m.createElement(oG,{data:r,dataKey:n,background:l,allOtherBarProps:this.props}),m.createElement(hG,this.props)))}}var gG={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Va.isSsr,legendType:"rect",minPointSize:uT,xAxisId:0,yAxisId:0,zIndex:kt.bar};function vG(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:l,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=mx(t,r),h=mc(),p=Ht(),g=Rq(e.children,NA),v=oe(w=>HG(w,t,r,p,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var y,x=v==null?void 0:v[0];return x==null||x.height==null||x.width==null?y=0:y=h==="vertical"?x.height/2:x.width/2,m.createElement(lT,{xAxisId:t,yAxisId:r,data:v,dataPointFormatter:pG,errorBarOffset:y},m.createElement(mG,ui({},e,{layout:h,needClip:f,data:v,xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:l,animationEasing:u,isAnimationActive:d})))}function yG(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:a,xAxis:s,yAxis:o,xAxisTicks:l,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:p,parentViewBox:g,dataStartIndex:v}=e,y=t==="horizontal"?o:s,x=d?y.scale.domain():null,w=IB({numericAxis:y}),b=y.scale(w);return f.map((_,j)=>{var S,k,N,C,E,P;d?S=CB(d[j+v],x):(S=Et(_,r),Array.isArray(S)||(S=[w,S]));var I=zV(n,uT)(S[1],j);if(t==="horizontal"){var W,[F,K]=[o.scale(S[0]),o.scale(S[1])];k=Zw({axis:s,ticks:l,bandSize:a,offset:i.offset,entry:_,index:j}),N=(W=K??F)!==null&&W!==void 0?W:void 0,C=i.size;var U=F-K;if(E=mn(U)?0:U,P={x:k,y:h.top,width:C,height:h.height},Math.abs(I)>0&&Math.abs(E)<Math.abs(I)){var H=cr(E||I)*(Math.abs(I)-Math.abs(E));N-=H,E+=H}}else{var[R,B]=[s.scale(S[0]),s.scale(S[1])];if(k=R,N=Zw({axis:o,ticks:u,bandSize:a,offset:i.offset,entry:_,index:j}),C=B-R,E=i.size,P={x:h.left,y:N,width:h.width,height:E},Math.abs(I)>0&&Math.abs(C)<Math.abs(I)){var G=cr(C||I)*(Math.abs(I)-Math.abs(C));C+=G}}if(k==null||N==null||C==null||E==null)return null;var ae=Yt(Yt({},_),{},{stackedBarStart:b,x:k,y:N,width:C,height:E,value:d?S:S[1],payload:_,background:P,tooltipPosition:{x:k+C/2,y:N+E/2},parentViewBox:g},p&&p[j]&&p[j].props);return ae}).filter(Boolean)}function xG(e){var t=rr(e,gG),r=Ht();return m.createElement(nT,{id:t.id,type:"bar"},n=>m.createElement(m.Fragment,null,m.createElement(tT,{legendPayload:aG(t)}),m.createElement(eT,{fn:sG,args:t}),m.createElement(aT,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:DB(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),m.createElement(Yr,{zIndex:t.zIndex},m.createElement(vG,ui({},t,{id:n})))))}var dT=m.memo(xG);dT.displayName="Bar";function sj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sj(Object(r),!0).forEach(function(n){bG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bG(e,t,r){return(t=wG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wG(e){var t=_G(e,"string");return typeof t=="symbol"?t:t+""}function _G(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jG=(e,t)=>t,SG=(e,t,r)=>r,kG=(e,t,r,n)=>n,NG=(e,t,r,n,i)=>i,Nc=T([Ah,NG],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),EG=T([Nc],e=>e==null?void 0:e.maxBarSize),CG=(e,t,r,n,i,a)=>a,oj=(e,t,r)=>{var n=r??e;if(!He(n))return gn(n,t,0)},PG=T([Ce,Ah,jG,SG,kG],(e,t,r,n,i)=>t.filter(a=>e==="horizontal"?a.xAxisId===r:a.yAxisId===n).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),OG=(e,t,r,n)=>{var i=Ce(e);return i==="horizontal"?ev(e,"yAxis",r,n):ev(e,"xAxis",t,n)},AG=(e,t,r)=>{var n=Ce(e);return n==="horizontal"?v1(e,"xAxis",t):v1(e,"yAxis",r)},TG=(e,t,r)=>{var n={},i=e.filter(Ch),a=e.filter(u=>u.stackId==null),s=i.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),o=Object.entries(s).map(u=>{var[d,f]=u,h=f.map(g=>g.dataKey),p=oj(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:p}}),l=a.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=oj(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...l]},DG=T([PG,j9,AG],TG),IG=(e,t,r,n,i)=>{var a,s,o=Nc(e,t,r,n,i);if(o!=null){var l=Ce(e),u=tO(e),{maxBarSize:d}=o,f=He(d)?u:d,h,p;return l==="horizontal"?(h=Ji(e,"xAxis",t,n),p=Xi(e,"xAxis",t,n)):(h=Ji(e,"yAxis",r,n),p=Xi(e,"yAxis",r,n)),(a=(s=Vs(h,p,!0))!==null&&s!==void 0?s:f)!==null&&a!==void 0?a:0}},fT=(e,t,r,n)=>{var i=Ce(e),a,s;return i==="horizontal"?(a=Ji(e,"xAxis",t,n),s=Xi(e,"xAxis",t,n)):(a=Ji(e,"yAxis",r,n),s=Xi(e,"yAxis",r,n)),Vs(a,s)};function RG(e,t,r,n,i){var a=n.length;if(!(a<1)){var s=gn(e,r,0,!0),o,l=[];if(rt(n[0].barSize)){var u=!1,d=r/a,f=n.reduce((x,w)=>x+(w.barSize||0),0);f+=(a-1)*s,f>=r&&(f-=(a-1)*s,s=0),f>=r&&d>0&&(u=!0,d*=.9,f=a*d);var h=(r-f)/2>>0,p={offset:h-s,size:0};o=n.reduce((x,w)=>{var b,_={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:p.offset+p.size+s,size:u?d:(b=w.barSize)!==null&&b!==void 0?b:0}},j=[...x,_];return p=j[j.length-1].position,j},l)}else{var g=gn(t,r,0,!0);r-2*g-(a-1)*s<=0&&(s=0);var v=(r-2*g-(a-1)*s)/a;v>1&&(v>>=0);var y=rt(i)?Math.min(v,i):v;o=n.reduce((x,w,b)=>[...x,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:g+(v+s)*b+(v-y)/2,size:y}}],l)}return o}}var MG=(e,t,r,n,i,a,s)=>{var o=He(s)?t:s,l=RG(r,n,i!==a?i:a,e,o);return i!==a&&l!=null&&(l=l.map(u=>xu(xu({},u),{},{position:xu(xu({},u.position),{},{offset:u.position.offset-i/2})}))),l},LG=T([DG,tO,_9,rO,IG,fT,EG],MG),$G=(e,t,r,n)=>Ji(e,"xAxis",t,n),FG=(e,t,r,n)=>Ji(e,"yAxis",r,n),BG=(e,t,r,n)=>Xi(e,"xAxis",t,n),UG=(e,t,r,n)=>Xi(e,"yAxis",r,n),zG=T([LG,Nc],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),WG=(e,t)=>{var r=H0(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var i=e[n];if(i){var{stackedData:a}=i;if(a)return a.find(s=>s.key===r)}}}},KG=T([OG,Nc],WG),HG=T([Ct,f0,$G,FG,BG,UG,zG,Ce,_h,fT,KG,Nc,CG],(e,t,r,n,i,a,s,o,l,u,d,f,h)=>{var{chartData:p,dataStartIndex:g,dataEndIndex:v}=l;if(!(f==null||s==null||t==null||o!=="horizontal"&&o!=="vertical"||r==null||n==null||i==null||a==null||u==null)){var{data:y}=f,x;if(y!=null&&y.length>0?x=y:x=p==null?void 0:p.slice(g,v+1),x!=null)return yG({layout:o,barSettings:f,pos:s,parentViewBox:t,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,stackedData:d,displayedData:x,offset:e,cells:h,dataStartIndex:g})}}),qG=e=>{var{chartData:t}=e,r=nt(),n=Ht();return m.useEffect(()=>n?()=>{}:(r(P1(t)),()=>{r(P1(void 0))}),[t,r,n]),null},lj={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},hT=mr({name:"brush",initialState:lj,reducers:{setBrushSettings(e,t){return t.payload==null?lj:t.payload}}}),{setBrushSettings:gZ}=hT.actions,VG=hT.reducer;function GG(e,t,r){return(t=YG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YG(e){var t=XG(e,"string");return typeof t=="symbol"?t:t+""}function XG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class gx{static create(t){return new gx(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(r){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?t>=n&&t<=i:t>=i&&t<=n}}GG(gx,"EPS",1e-4);function JG(e){return(e%180+180)%180}var QG=function(t){var{width:r,height:n}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=JG(i),s=a*Math.PI/180,o=Math.atan(n/r),l=s>o&&s<Math.PI-o?n/Math.sin(s):r/Math.cos(s);return Math.abs(l)},ZG={dots:[],areas:[],lines:[]},pT=mr({name:"referenceElements",initialState:ZG,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Xn(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Xn(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Xn(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:vZ,removeDot:yZ,addArea:xZ,removeArea:bZ,addLine:wZ,removeLine:_Z}=pT.actions,eY=pT.reducer,tY=m.createContext(void 0),rY=e=>{var{children:t}=e,[r]=m.useState("".concat($l("recharts"),"-clip")),n=px();if(n==null)return null;var{x:i,y:a,width:s,height:o}=n;return m.createElement(tY.Provider,{value:r},m.createElement("defs",null,m.createElement("clipPath",{id:r},m.createElement("rect",{x:i,y:a,height:o,width:s}))),t)};function Js(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function mT(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function nY(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return QG(n,r)}function iY(e,t,r){var n=r==="width",{x:i,y:a,width:s,height:o}=e;return t===1?{start:n?i:a,end:n?i+s:a+o}:{start:n?i+s:a+o,end:n?i:a}}function lf(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-i)<=0}function aY(e,t){return mT(e,t+1)}function sY(e,t,r,n,i){for(var a=(n||[]).slice(),{start:s,end:o}=t,l=0,u=1,d=s,f=function(){var g=n==null?void 0:n[l];if(g===void 0)return{v:mT(n,u)};var v=l,y,x=()=>(y===void 0&&(y=r(g,v)),y),w=g.coordinate,b=l===0||lf(e,w,x,d,o);b||(l=0,d=s,u+=1),b&&(d=w+e*(x()/2+i),l+=u)},h;u<=a.length;)if(h=f(),h)return h.v;return[]}function cj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ut(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cj(Object(r),!0).forEach(function(n){oY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oY(e,t,r){return(t=lY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lY(e){var t=cY(e,"string");return typeof t=="symbol"?t:t+""}function cY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uY(e,t,r,n,i){for(var a=(n||[]).slice(),s=a.length,{start:o}=t,{end:l}=t,u=function(h){var p=a[h],g,v=()=>(g===void 0&&(g=r(p,h)),g);if(h===s-1){var y=e*(p.coordinate+e*v()/2-l);a[h]=p=Ut(Ut({},p),{},{tickCoord:y>0?p.coordinate-y*e:p.coordinate})}else a[h]=p=Ut(Ut({},p),{},{tickCoord:p.coordinate});if(p.tickCoord!=null){var x=lf(e,p.tickCoord,v,o,l);x&&(l=p.tickCoord-e*(v()/2+i),a[h]=Ut(Ut({},p),{},{isShow:!0}))}},d=s-1;d>=0;d--)u(d);return a}function dY(e,t,r,n,i,a){var s=(n||[]).slice(),o=s.length,{start:l,end:u}=t;if(a){var d=n[o-1],f=r(d,o-1),h=e*(d.coordinate+e*f/2-u);if(s[o-1]=d=Ut(Ut({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate}),d.tickCoord!=null){var p=lf(e,d.tickCoord,()=>f,l,u);p&&(u=d.tickCoord-e*(f/2+i),s[o-1]=Ut(Ut({},d),{},{isShow:!0}))}}for(var g=a?o-1:o,v=function(w){var b=s[w],_,j=()=>(_===void 0&&(_=r(b,w)),_);if(w===0){var S=e*(b.coordinate-e*j()/2-l);s[w]=b=Ut(Ut({},b),{},{tickCoord:S<0?b.coordinate-S*e:b.coordinate})}else s[w]=b=Ut(Ut({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var k=lf(e,b.tickCoord,j,l,u);k&&(l=b.tickCoord+e*(j()/2+i),s[w]=Ut(Ut({},b),{},{isShow:!0}))}},y=0;y<g;y++)v(y);return s}function vx(e,t,r){var{tick:n,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:l,tickFormatter:u,unit:d,angle:f}=e;if(!i||!i.length||!n)return[];if(ie(l)||Va.isSsr){var h;return(h=aY(i,ie(l)?l:0))!==null&&h!==void 0?h:[]}var p=[],g=o==="top"||o==="bottom"?"width":"height",v=d&&g==="width"?fl(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},y=(b,_)=>{var j=typeof u=="function"?u(b.value,_):b.value;return g==="width"?nY(fl(j,{fontSize:t,letterSpacing:r}),v,f):fl(j,{fontSize:t,letterSpacing:r})[g]},x=i.length>=2?cr(i[1].coordinate-i[0].coordinate):1,w=iY(a,x,g);return l==="equidistantPreserveStart"?sY(x,w,y,i,s):(l==="preserveStart"||l==="preserveStartEnd"?p=dY(x,w,y,i,s,l==="preserveStartEnd"):p=uY(x,w,y,i,s),p.filter(b=>b.isShow))}var fY=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:a=0}=e,s=0;if(t){Array.from(t).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>s&&(s=f.width)}});var o=r?r.getBoundingClientRect().width:0,l=i+a,u=s+l+o+(r?n:0);return Math.round(u)}return 0},hY=["axisLine","width","height","className","hide","ticks","axisType"],pY=["viewBox"],mY=["viewBox"];function cv(e,t){if(e==null)return{};var r,n,i=gY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function gY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Wa(){return Wa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wa.apply(null,arguments)}function uj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function at(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uj(Object(r),!0).forEach(function(n){vY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vY(e,t,r){return(t=yY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yY(e){var t=xY(e,"string");return typeof t=="symbol"?t:t+""}function xY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yx={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:kt.axis};function bY(e){var{x:t,y:r,width:n,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:l}=e;if(!o)return null;var u=at(at(at({},l),pn(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!s||a==="bottom"&&s);u=at(at({},u),{},{x1:t,y1:r+d*i,x2:t+n,y2:r+d*i})}else{var f=+(a==="left"&&!s||a==="right"&&s);u=at(at({},u),{},{x1:t+f*n,y1:r,x2:t+f*n,y2:r+i})}return m.createElement("line",Wa({},u,{className:Ae("recharts-cartesian-axis-line",Hs(o,"className"))}))}function wY(e,t,r,n,i,a,s,o,l){var u,d,f,h,p,g,v=o?-1:1,y=e.tickSize||s,x=ie(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":u=d=e.coordinate,h=r+ +!o*i,f=h-v*y,g=f-v*l,p=x;break;case"left":f=h=e.coordinate,d=t+ +!o*n,u=d-v*y,p=u-v*l,g=x;break;case"right":f=h=e.coordinate,d=t+ +o*n,u=d+v*y,p=u+v*l,g=x;break;default:u=d=e.coordinate,h=r+ +o*i,f=h+v*y,g=f+v*l,p=x;break}return{line:{x1:u,y1:f,x2:d,y2:h},tick:{x:p,y:g}}}function _Y(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function jY(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function SY(e){var{option:t,tickProps:r,value:n}=e,i,a=Ae(r.className,"recharts-cartesian-axis-tick-value");if(m.isValidElement(t))i=m.cloneElement(t,at(at({},r),{},{className:a}));else if(typeof t=="function")i=t(at(at({},r),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(s=Ae(s,t==null?void 0:t.className)),i=m.createElement(ux,Wa({},r,{className:s}),n)}return i}var kY=m.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:l,tickTextProps:u,orientation:d,mirror:f,x:h,y:p,width:g,height:v,tickSize:y,tickMargin:x,fontSize:w,letterSpacing:b,getTicksConfig:_,events:j,axisType:S}=e,k=vx(at(at({},_),{},{ticks:r}),w,b),N=_Y(d,f),C=jY(d,f),E=pn(_),P=uc(n),I={};typeof i=="object"&&(I=i);var W=at(at({},E),{},{fill:"none"},I),F=k.map(H=>at({entry:H},wY(H,h,p,g,v,d,y,f,x))),K=F.map(H=>{var{entry:R,line:B}=H;return m.createElement(Hr,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(R.value,"-").concat(R.coordinate,"-").concat(R.tickCoord)},i&&m.createElement("line",Wa({},W,B,{className:Ae("recharts-cartesian-axis-tick-line",Hs(i,"className"))})))}),U=F.map((H,R)=>{var{entry:B,tick:G}=H,ae=at(at(at(at({textAnchor:N,verticalAnchor:C},E),{},{stroke:"none",fill:a},P),G),{},{index:R,payload:B,visibleTicksCount:k.length,tickFormatter:s,padding:l},u);return m.createElement(Hr,Wa({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(B.value,"-").concat(B.coordinate,"-").concat(B.tickCoord)},Gy(j,B,R)),n&&m.createElement(SY,{option:n,tickProps:ae,value:"".concat(typeof s=="function"?s(B.value,R):B.value).concat(o||"")}))});return m.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(S,"-ticks")},U.length>0&&m.createElement(Yr,{zIndex:kt.label},m.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(S,"-tick-labels"),ref:t},U)),K.length>0&&m.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(S,"-tick-lines")},K))}),NY=m.forwardRef((e,t)=>{var{axisLine:r,width:n,height:i,className:a,hide:s,ticks:o,axisType:l}=e,u=cv(e,hY),[d,f]=m.useState(""),[h,p]=m.useState(""),g=m.useRef(null);m.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var y;return fY({ticks:g.current,label:(y=e.labelRef)===null||y===void 0?void 0:y.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var v=m.useCallback(y=>{if(y){var x=y.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=x;var w=x[0];if(w){var b=window.getComputedStyle(w),_=b.fontSize,j=b.letterSpacing;(_!==d||j!==h)&&(f(_),p(j))}}},[d,h]);return s||n!=null&&n<=0||i!=null&&i<=0?null:m.createElement(Yr,{zIndex:e.zIndex},m.createElement(Hr,{className:Ae("recharts-cartesian-axis",a)},m.createElement(bY,{x:e.x,y:e.y,width:n,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:pn(e)}),m.createElement(kY,{ref:v,axisType:l,events:u,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:h,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:o,unit:e.unit,width:e.width,x:e.x,y:e.y}),m.createElement(dq,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},m.createElement(wq,{label:e.label,labelRef:e.labelRef}),e.children)))}),EY=m.memo(NY,(e,t)=>{var{viewBox:r}=e,n=cv(e,pY),{viewBox:i}=t,a=cv(t,mY);return Js(r,i)&&Js(n,a)}),xx=m.forwardRef((e,t)=>{var r=rr(e,yx);return m.createElement(EY,Wa({},r,{ref:t}))});xx.displayName="CartesianAxis";var CY=["x1","y1","x2","y2","key"],PY=["offset"],OY=["xAxisId","yAxisId"],AY=["xAxisId","yAxisId"];function dj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Wt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dj(Object(r),!0).forEach(function(n){TY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TY(e,t,r){return(t=DY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DY(e){var t=IY(e,"string");return typeof t=="symbol"?t:t+""}function IY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ka(){return ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ka.apply(null,arguments)}function cf(e,t){if(e==null)return{};var r,n,i=RY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function RY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var MY=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:i,width:a,height:s,ry:o}=e;return m.createElement("rect",{x:n,y:i,ry:o,width:a,height:s,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function gT(e){var{option:t,lineItemProps:r}=e,n;if(m.isValidElement(t))n=m.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var i,{x1:a,y1:s,x2:o,y2:l,key:u}=r,d=cf(r,CY),f=(i=pn(d))!==null&&i!==void 0?i:{},{offset:h}=f,p=cf(f,PY);n=m.createElement("line",ka({},p,{x1:a,y1:s,x2:o,y2:l,fill:"none",key:u}))}return n}function LY(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=e,o=cf(e,OY),l=i.map((u,d)=>{var f=Wt(Wt({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return m.createElement(gT,{key:"line-".concat(d),option:n,lineItemProps:f})});return m.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function $Y(e){var{y:t,height:r,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=e,o=cf(e,AY),l=i.map((u,d)=>{var f=Wt(Wt({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return m.createElement(gT,{option:n,lineItemProps:f,key:"line-".concat(d)})});return m.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function FY(e){var{horizontalFill:t,fillOpacity:r,x:n,y:i,width:a,height:s,horizontalPoints:o,horizontal:l=!0}=e;if(!l||!t||!t.length||o==null)return null;var u=o.map(f=>Math.round(f+i-i)).sort((f,h)=>f-h);i!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],g=p?i+s-f:u[h+1]-f;if(g<=0)return null;var v=h%t.length;return m.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:g,width:a,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return m.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function BY(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:i,y:a,width:s,height:o,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var u=l.map(f=>Math.round(f+i-i)).sort((f,h)=>f-h);i!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],g=p?i+s-f:u[h+1]-f;if(g<=0)return null;var v=h%r.length;return m.createElement("rect",{key:"react-".concat(h),x:f,y:a,width:g,height:o,stroke:"none",fill:r[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return m.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var UY=(e,t)=>{var{xAxis:r,width:n,height:i,offset:a}=e;return TC(vx(Wt(Wt(Wt({},yx),r),{},{ticks:DC(r),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,t)},zY=(e,t)=>{var{yAxis:r,width:n,height:i,offset:a}=e;return TC(vx(Wt(Wt(Wt({},yx),r),{},{ticks:DC(r),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,t)},WY={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:kt.grid};function uv(e){var t=WC(),r=KC(),n=zC(),i=Wt(Wt({},rr(e,WY)),{},{x:ie(e.x)?e.x:n.left,y:ie(e.y)?e.y:n.top,width:ie(e.width)?e.width:n.width,height:ie(e.height)?e.height:n.height}),{xAxisId:a,yAxisId:s,x:o,y:l,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:p}=i,g=Ht(),v=oe(C=>y1(C,"xAxis",a,g)),y=oe(C=>y1(C,"yAxis",s,g));if(!An(u)||!An(d)||!ie(o)||!ie(l))return null;var x=i.verticalCoordinatesGenerator||UY,w=i.horizontalCoordinatesGenerator||zY,{horizontalPoints:b,verticalPoints:_}=i;if((!b||!b.length)&&typeof w=="function"){var j=h&&h.length,S=w({yAxis:y?Wt(Wt({},y),{},{ticks:j?h:y.ticks}):void 0,width:t??u,height:r??d,offset:n},j?!0:f);Md(Array.isArray(S),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof S,"]")),Array.isArray(S)&&(b=S)}if((!_||!_.length)&&typeof x=="function"){var k=p&&p.length,N=x({xAxis:v?Wt(Wt({},v),{},{ticks:k?p:v.ticks}):void 0,width:t??u,height:r??d,offset:n},k?!0:f);Md(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(_=N)}return m.createElement(Yr,{zIndex:i.zIndex},m.createElement("g",{className:"recharts-cartesian-grid"},m.createElement(MY,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),m.createElement(FY,ka({},i,{horizontalPoints:b})),m.createElement(BY,ka({},i,{verticalPoints:_})),m.createElement(LY,ka({},i,{offset:n,horizontalPoints:b,xAxis:v,yAxis:y})),m.createElement($Y,ka({},i,{offset:n,verticalPoints:_,xAxis:v,yAxis:y}))))}uv.displayName="CartesianGrid";var vT=(e,t,r,n)=>Ji(e,"xAxis",t,n),yT=(e,t,r,n)=>Xi(e,"xAxis",t,n),xT=(e,t,r,n)=>Ji(e,"yAxis",r,n),bT=(e,t,r,n)=>Xi(e,"yAxis",r,n),KY=T([Ce,vT,xT,yT,bT],(e,t,r,n,i)=>ra(e,"xAxis")?Vs(t,n,!1):Vs(r,i,!1)),HY=(e,t,r,n,i)=>i;function qY(e){return e.type==="line"}var VY=T([Ah,HY],(e,t)=>e.filter(qY).find(r=>r.id===t)),GY=T([Ce,vT,xT,yT,bT,VY,KY,_h],(e,t,r,n,i,a,s,o)=>{var{chartData:l,dataStartIndex:u,dataEndIndex:d}=o;if(!(a==null||t==null||r==null||n==null||i==null||n.length===0||i.length===0||s==null)){var{dataKey:f,data:h}=a,p;if(h!=null&&h.length>0?p=h:p=l==null?void 0:l.slice(u,d+1),p!=null)return mX({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:f,bandSize:s,displayedData:p})}});function YY(e){var t=uc(e),r=3,n=2;if(t!=null){var{r:i,strokeWidth:a}=t,s=Number(i),o=Number(a);return(Number.isNaN(s)||s<0)&&(s=r),(Number.isNaN(o)||o<0)&&(o=n),{r:s,strokeWidth:o}}return{r,strokeWidth:n}}var XY=["id"],JY=["type","layout","connectNulls","needClip","shape"],QY=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Yl(){return Yl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yl.apply(null,arguments)}function fj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function jn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fj(Object(r),!0).forEach(function(n){ZY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZY(e,t,r){return(t=eX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eX(e){var t=tX(e,"string");return typeof t=="symbol"?t:t+""}function tX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bx(e,t){if(e==null)return{};var r,n,i=rX(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function rX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nX=e=>{var{dataKey:t,name:r,stroke:n,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:n,value:oh(r,t),payload:e}]};function iX(e){var{dataKey:t,data:r,stroke:n,strokeWidth:i,fill:a,name:s,hide:o,unit:l}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:a,dataKey:t,nameKey:void 0,name:oh(s,t),hide:o,type:e.tooltipType,color:e.stroke,unit:l}}}var wT=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function aX(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],i=0;i<t;++i)n=[...n,...r];return n}var sX=(e,t,r)=>{var n=r.reduce((f,h)=>f+h);if(!n)return wT(t,e);for(var i=Math.floor(e/n),a=e%n,s=t-e,o=[],l=0,u=0;l<r.length;u+=r[l],++l)if(u+r[l]>a){o=[...r.slice(0,l),a-u];break}var d=o.length%2===0?[0,s]:[s];return[...aX(r,i),...o,...d].map(f=>"".concat(f,"px")).join(", ")};function oX(e){var{clipPathId:t,points:r,props:n}=e,{dot:i,dataKey:a,needClip:s}=n,{id:o}=n,l=bx(n,XY),u=pn(l);return m.createElement(pV,{points:r,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:a,baseProps:u,needClip:s,clipPathId:t})}function lX(e){var{showLabels:t,children:r,points:n}=e,i=m.useMemo(()=>n==null?void 0:n.map(a=>{var s,o,l={x:(s=a.x)!==null&&s!==void 0?s:0,y:(o=a.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return jn(jn({},l),{},{value:a.value,payload:a.payload,viewBox:l,parentViewBox:void 0,fill:void 0})}),[n]);return m.createElement(UA,{value:t?i:void 0},r)}function hj(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:i,props:a}=e,{type:s,layout:o,connectNulls:l,needClip:u,shape:d}=a,f=bx(a,JY),h=jn(jn({},Qt(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:s,layout:o,connectNulls:l,strokeDasharray:i??a.strokeDasharray});return m.createElement(m.Fragment,null,(n==null?void 0:n.length)>1&&m.createElement(XA,Yl({shapeType:"curve",option:d},h,{pathRef:r})),m.createElement(oX,{points:n,clipPathId:t,props:a}))}function cX(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function uX(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:a}=e,{points:s,strokeDasharray:o,isAnimationActive:l,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:h,width:p,height:g,onAnimationEnd:v,onAnimationStart:y}=r,x=i.current,w=mh(r,"recharts-line-"),[b,_]=m.useState(!1),j=!b,S=m.useCallback(()=>{typeof v=="function"&&v(),_(!1)},[v]),k=m.useCallback(()=>{typeof y=="function"&&y(),_(!0)},[y]),N=cX(n.current),C=a.current;return m.createElement(lX,{points:s,showLabels:j},r.children,m.createElement(ph,{animationId:w,begin:u,duration:d,isActive:l,easing:f,onAnimationEnd:S,onAnimationStart:k,key:w},E=>{var P=Ze(C,N+C,E),I=Math.min(P,N),W;if(l)if(o){var F="".concat(o).split(/[,\s]+/gim).map(H=>parseFloat(H));W=sX(I,N,F)}else W=wT(N,I);else W=o==null?void 0:String(o);if(x){var K=x.length/s.length,U=E===1?s:s.map((H,R)=>{var B=Math.floor(R*K);if(x[B]){var G=x[B];return jn(jn({},H),{},{x:Ze(G.x,H.x,E),y:Ze(G.y,H.y,E)})}return h?jn(jn({},H),{},{x:Ze(p*2,H.x,E),y:Ze(g/2,H.y,E)}):jn(jn({},H),{},{x:H.x,y:H.y})});return i.current=U,m.createElement(hj,{props:r,points:U,clipPathId:t,pathRef:n,strokeDasharray:W})}return E>0&&N>0&&(i.current=s,a.current=I),m.createElement(hj,{props:r,points:s,clipPathId:t,pathRef:n,strokeDasharray:W})}),m.createElement(WA,{label:r.label}))}function dX(e){var{clipPathId:t,props:r}=e,n=m.useRef(null),i=m.useRef(0),a=m.useRef(null);return m.createElement(uX,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:a})}var fX=(e,t)=>{var r,n;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(n=e.y)!==null&&n!==void 0?n:void 0,value:e.value,errorVal:Et(e.payload,t)}};class hX extends m.Component{render(){var{hide:t,dot:r,points:n,className:i,xAxisId:a,yAxisId:s,top:o,left:l,width:u,height:d,id:f,needClip:h,zIndex:p}=this.props;if(t)return null;var g=Ae("recharts-line",i),v=f,{r:y,strokeWidth:x}=YY(r),w=GA(r),b=y*2+x;return m.createElement(Yr,{zIndex:p},m.createElement(Hr,{className:g},h&&m.createElement("defs",null,m.createElement(cT,{clipPathId:v,xAxisId:a,yAxisId:s}),!w&&m.createElement("clipPath",{id:"clipPath-dots-".concat(v)},m.createElement("rect",{x:l-b/2,y:o-b/2,width:u+b,height:d+b}))),m.createElement(lT,{xAxisId:a,yAxisId:s,data:n,dataPointFormatter:fX,errorBarOffset:0},m.createElement(dX,{props:this.props,clipPathId:v}))),m.createElement(TV,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var _T={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Va.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:kt.line};function pX(e){var t=rr(e,_T),{activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:s,connectNulls:o,dot:l,hide:u,isAnimationActive:d,label:f,legendType:h,xAxisId:p,yAxisId:g,id:v}=t,y=bx(t,QY),{needClip:x}=mx(p,g),w=px(),b=mc(),_=Ht(),j=oe(E=>GY(E,p,g,_,v));if(b!=="horizontal"&&b!=="vertical"||j==null||w==null)return null;var{height:S,width:k,x:N,y:C}=w;return m.createElement(hX,Yl({},y,{id:v,connectNulls:o,dot:l,activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:s,isAnimationActive:d,hide:u,label:f,legendType:h,xAxisId:p,yAxisId:g,points:j,layout:b,height:S,width:k,left:N,top:C,needClip:x}))}function mX(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,dataKey:s,bandSize:o,displayedData:l}=e;return l.map((u,d)=>{var f=Et(u,s);if(t==="horizontal"){var h=Qw({axis:r,ticks:i,bandSize:o,entry:u,index:d}),p=He(f)?null:n.scale(f);return{x:h,y:p,value:f,payload:u}}var g=He(f)?null:r.scale(f),v=Qw({axis:n,ticks:a,bandSize:o,entry:u,index:d});return g==null||v==null?null:{x:g,y:v,value:f,payload:u}}).filter(Boolean)}function gX(e){var t=rr(e,_T),r=Ht();return m.createElement(nT,{id:t.id,type:"line"},n=>m.createElement(m.Fragment,null,m.createElement(tT,{legendPayload:nX(t)}),m.createElement(eT,{fn:iX,args:t}),m.createElement(aT,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),m.createElement(pX,Yl({},t,{id:n}))))}var dv=m.memo(gX);dv.displayName="Line";var vX=["dangerouslySetInnerHTML","ticks"],yX=["id"],xX=["domain"],bX=["domain"];function fv(){return fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fv.apply(null,arguments)}function uf(e,t){if(e==null)return{};var r,n,i=wX(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function wX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function _X(e){var t=nt();return m.useLayoutEffect(()=>(t(xV(e)),()=>{t(bV(e))}),[e,t]),null}var jX=e=>{var{xAxisId:t,className:r}=e,n=oe(f0),i=Ht(),a="xAxis",s=oe(y=>yo(y,a,t,i)),o=oe(y=>qO(y,a,t,i)),l=oe(y=>zO(y,t)),u=oe(y=>b7(y,t)),d=oe(y=>uO(y,t));if(l==null||u==null||d==null)return null;var{dangerouslySetInnerHTML:f,ticks:h}=e,p=uf(e,vX),{id:g}=d,v=uf(d,yX);return m.createElement(xx,fv({},p,v,{scale:s,x:u.x,y:u.y,width:l.width,height:l.height,className:Ae("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:o,axisType:a}))},SX={allowDataOverflow:vr.allowDataOverflow,allowDecimals:vr.allowDecimals,allowDuplicatedCategory:vr.allowDuplicatedCategory,height:vr.height,hide:!1,mirror:vr.mirror,orientation:vr.orientation,padding:vr.padding,reversed:vr.reversed,scale:vr.scale,tickCount:vr.tickCount,type:vr.type,xAxisId:0},kX=e=>{var t,r,n,i,a,s=rr(e,SX);return m.createElement(m.Fragment,null,m.createElement(_X,{interval:(t=s.interval)!==null&&t!==void 0?t:"preserveEnd",id:s.xAxisId,scale:s.scale,type:s.type,padding:s.padding,allowDataOverflow:s.allowDataOverflow,domain:s.domain,dataKey:s.dataKey,allowDuplicatedCategory:s.allowDuplicatedCategory,allowDecimals:s.allowDecimals,tickCount:s.tickCount,includeHidden:(r=s.includeHidden)!==null&&r!==void 0?r:!1,reversed:s.reversed,ticks:s.ticks,height:s.height,orientation:s.orientation,mirror:s.mirror,hide:s.hide,unit:s.unit,name:s.name,angle:(n=s.angle)!==null&&n!==void 0?n:0,minTickGap:(i=s.minTickGap)!==null&&i!==void 0?i:5,tick:(a=s.tick)!==null&&a!==void 0?a:!0,tickFormatter:s.tickFormatter}),m.createElement(jX,s))},NX=(e,t)=>{var{domain:r}=e,n=uf(e,xX),{domain:i}=t,a=uf(t,bX);return Js(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(i)&&i.length===2?r[0]===i[0]&&r[1]===i[1]:Js({domain:r},{domain:i}):!1},hv=m.memo(kX,NX);hv.displayName="XAxis";var EX=["dangerouslySetInnerHTML","ticks"],CX=["id"],PX=["domain"],OX=["domain"];function pv(){return pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pv.apply(null,arguments)}function df(e,t){if(e==null)return{};var r,n,i=AX(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function AX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function TX(e){var t=nt();return m.useLayoutEffect(()=>(t(wV(e)),()=>{t(_V(e))}),[e,t]),null}var DX=e=>{var{yAxisId:t,className:r,width:n,label:i}=e,a=m.useRef(null),s=m.useRef(null),o=oe(f0),l=Ht(),u=nt(),d="yAxis",f=oe(j=>yo(j,d,t,l)),h=oe(j=>WO(j,t)),p=oe(j=>_7(j,t)),g=oe(j=>qO(j,d,t,l)),v=oe(j=>dO(j,t));if(m.useLayoutEffect(()=>{if(!(n!=="auto"||!h||dx(i)||m.isValidElement(i)||v==null)){var j=a.current;if(j){var S=j.getCalculatedWidth();Math.round(h.width)!==Math.round(S)&&u(jV({id:t,width:S}))}}},[g,h,u,i,t,n,v]),h==null||p==null||v==null)return null;var{dangerouslySetInnerHTML:y,ticks:x}=e,w=df(e,EX),{id:b}=v,_=df(v,CX);return m.createElement(xx,pv({},w,_,{ref:a,labelRef:s,scale:f,x:p.x,y:p.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:h.width,height:h.height,className:Ae("recharts-".concat(d," ").concat(d),r),viewBox:o,ticks:g,axisType:d}))},IX={allowDataOverflow:yr.allowDataOverflow,allowDecimals:yr.allowDecimals,allowDuplicatedCategory:yr.allowDuplicatedCategory,hide:!1,mirror:yr.mirror,orientation:yr.orientation,padding:yr.padding,reversed:yr.reversed,scale:yr.scale,tickCount:yr.tickCount,type:yr.type,width:yr.width,yAxisId:0},RX=e=>{var t,r,n,i,a,s=rr(e,IX);return m.createElement(m.Fragment,null,m.createElement(TX,{interval:(t=s.interval)!==null&&t!==void 0?t:"preserveEnd",id:s.yAxisId,scale:s.scale,type:s.type,domain:s.domain,allowDataOverflow:s.allowDataOverflow,dataKey:s.dataKey,allowDuplicatedCategory:s.allowDuplicatedCategory,allowDecimals:s.allowDecimals,tickCount:s.tickCount,padding:s.padding,includeHidden:(r=s.includeHidden)!==null&&r!==void 0?r:!1,reversed:s.reversed,ticks:s.ticks,width:s.width,orientation:s.orientation,mirror:s.mirror,hide:s.hide,unit:s.unit,name:s.name,angle:(n=s.angle)!==null&&n!==void 0?n:0,minTickGap:(i=s.minTickGap)!==null&&i!==void 0?i:5,tick:(a=s.tick)!==null&&a!==void 0?a:!0,tickFormatter:s.tickFormatter}),m.createElement(DX,s))},MX=(e,t)=>{var{domain:r}=e,n=df(e,PX),{domain:i}=t,a=df(t,OX);return Js(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(i)&&i.length===2?r[0]===i[0]&&r[1]===i[1]:Js({domain:r},{domain:i}):!1},mv=m.memo(RX,MX);mv.displayName="YAxis";var LX={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ec=m;function $X(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var FX=typeof Object.is=="function"?Object.is:$X,BX=Ec.useSyncExternalStore,UX=Ec.useRef,zX=Ec.useEffect,WX=Ec.useMemo,KX=Ec.useDebugValue;LX.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=UX(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=WX(function(){function l(p){if(!u){if(u=!0,d=p,p=n(p),i!==void 0&&s.hasValue){var g=s.value;if(i(g,p))return f=g}return f=p}if(g=f,FX(d,p))return g;var v=n(p);return i!==void 0&&i(g,v)?(d=p,g):(d=p,f=v)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,r,n,i]);var o=BX(e,a[0],a[1]);return zX(function(){s.hasValue=!0,s.value=o},[o]),KX(o),o};function HX(e){e()}function qX(){let e=null,t=null;return{clear(){e=null,t=null},notify(){HX(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var pj={notify(){},get:()=>[]};function VX(e,t){let r,n=pj,i=0,a=!1;function s(v){d();const y=n.subscribe(v);let x=!1;return()=>{x||(x=!0,y(),f())}}function o(){n.notify()}function l(){g.onStateChange&&g.onStateChange()}function u(){return a}function d(){i++,r||(r=e.subscribe(l),n=qX())}function f(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=pj)}function h(){a||(a=!0,d())}function p(){a&&(a=!1,f())}const g={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>n};return g}var GX=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",YX=GX(),XX=()=>typeof navigator<"u"&&navigator.product==="ReactNative",JX=XX(),QX=()=>YX||JX?m.useLayoutEffect:m.useEffect,ZX=QX(),nm=Symbol.for("react-redux-context"),im=typeof globalThis<"u"?globalThis:{};function eJ(){if(!m.createContext)return{};const e=im[nm]??(im[nm]=new Map);let t=e.get(m.createContext);return t||(t=m.createContext(null),e.set(m.createContext,t)),t}var tJ=eJ();function rJ(e){const{children:t,context:r,serverState:n,store:i}=e,a=m.useMemo(()=>{const l=VX(i);return{store:i,subscription:l,getServerState:n?()=>n:void 0}},[i,n]),s=m.useMemo(()=>i.getState(),[i]);ZX(()=>{const{subscription:l}=a;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),s!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[a,s]);const o=r||tJ;return m.createElement(o.Provider,{value:a},t)}var nJ=rJ,iJ=(e,t)=>t,wx=T([iJ,Ce,lO,xt,cA,yi,DK,Ct],BK),_x=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},jT=qr("mouseClick"),ST=hc();ST.startListening({actionCreator:jT,effect:(e,t)=>{var r=e.payload,n=wx(t.getState(),_x(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(R7({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var gv=qr("mouseMove"),kT=hc();kT.startListening({actionCreator:gv,effect:(e,t)=>{var r=e.payload,n=t.getState(),i=tx(n,n.tooltip.settings.shared),a=wx(n,_x(r));i==="axis"&&((a==null?void 0:a.activeIndex)!=null?t.dispatch(eA({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(ZO()))}});var mj={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},NT=mr({name:"rootProps",initialState:mj,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:mj.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue}}}),aJ=NT.reducer,{updateOptions:sJ}=NT.actions,ET=mr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:jZ}=ET.actions,oJ=ET.reducer,CT=qr("keyDown"),PT=qr("focus"),jx=hc();jx.startListening({actionCreator:CT,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=Number(rx(i,bo(r))),o=yi(r);if(a==="Enter"){var l=ef(r,"axis","hover",String(i.index));t.dispatch(rv({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:l}));return}var u=N7(r),d=u==="left-to-right"?1:-1,f=a==="ArrowRight"?1:-1,h=s+f*d;if(!(o==null||h>=o.length||h<0)){var p=ef(r,"axis","hover",String(h));t.dispatch(rv({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});jx.startListening({actionCreator:PT,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var a="0",s=ef(r,"axis","hover",String(a));t.dispatch(rv({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:s}))}}}});var Rr=qr("externalEvent"),OT=hc();OT.startListening({actionCreator:Rr,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:vK(r),activeDataKey:hA(r),activeIndex:za(r),activeLabel:fA(r),activeTooltipIndex:za(r),isTooltipActive:yK(r)};e.payload.handler(n,e.payload.reactEvent)}}});var lJ=T([xo],e=>e.tooltipItemPayloads),cJ=T([lJ,Sc,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var i=e.find(o=>o.settings.dataKey===n);if(i!=null){var{positions:a}=i;if(a!=null){var s=t(a,r);return s}}}),AT=qr("touchMove"),TT=hc();TT.startListening({actionCreator:AT,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),i=tx(n,n.tooltip.settings.shared);if(i==="axis"){var a=wx(n,_x({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(eA({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var s,o=r.touches[0];if(document.elementFromPoint==null)return;var l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var u=l.getAttribute(UB),d=(s=l.getAttribute(zB))!==null&&s!==void 0?s:void 0,f=cJ(t.getState(),u,d);t.dispatch(QO({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}}});var uJ=sC({brush:VG,cartesianAxis:SV,chartData:gH,errorBars:KV,graphicalItems:aV,layout:_B,legend:vU,options:dH,polarAxis:Aq,polarOptions:oJ,referenceElements:eY,rootProps:aJ,tooltip:M7,zIndex:eH}),dJ=function(t){return VF({reducer:uJ,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([ST.middleware,kT.middleware,jx.middleware,OT.middleware,TT.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(yC({type:"raf"}))},devTools:Va.devToolsEnabled})};function fJ(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=Ht(),a=m.useRef(null);if(i)return r;a.current==null&&(a.current=dJ(t));var s=i0;return m.createElement(nJ,{context:s,store:a.current},r)}function hJ(e){var{layout:t,margin:r}=e,n=nt(),i=Ht();return m.useEffect(()=>{i||(n(xB(t)),n(yB(r)))},[n,i,t,r]),null}function pJ(e){var t=nt();return m.useEffect(()=>{t(sJ(e))},[t,e]),null}function gj(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",i=rT("".concat(n).concat(t)),a=nt();return m.useLayoutEffect(()=>(a(QK({zIndex:t,elementId:i,isPanorama:r})),()=>{a(ZK({zIndex:t,isPanorama:r}))}),[a,t,i,r]),m.createElement("g",{id:i})}function vj(e){var{children:t,isPanorama:r}=e,n=oe(zK);if(!n||n.length===0)return t;var i=n.filter(s=>s<0),a=n.filter(s=>s>0);return m.createElement(m.Fragment,null,i.map(s=>m.createElement(gj,{key:s,zIndex:s,isPanorama:r})),t,a.map(s=>m.createElement(gj,{key:s,zIndex:s,isPanorama:r})))}var mJ=["children"];function gJ(e,t){if(e==null)return{};var r,n,i=vJ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function vJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ff(){return ff=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ff.apply(null,arguments)}var yJ={width:"100%",height:"100%",display:"block"},xJ=m.forwardRef((e,t)=>{var r=WC(),n=KC(),i=qC();if(!An(r)||!An(n))return null;var{children:a,otherAttributes:s,title:o,desc:l}=e,u,d;return s!=null&&(typeof s.tabIndex=="number"?u=s.tabIndex:u=i?0:void 0,typeof s.role=="string"?d=s.role:d=i?"application":void 0),m.createElement(oE,ff({},s,{title:o,desc:l,role:d,tabIndex:u,width:r,height:n,style:yJ,ref:t}),a)}),bJ=e=>{var{children:t}=e,r=oe(dh);if(!r)return null;var{width:n,height:i,y:a,x:s}=r;return m.createElement(oE,{width:n,height:i,x:s,y:a},t)},yj=m.forwardRef((e,t)=>{var{children:r}=e,n=gJ(e,mJ),i=Ht();return i?m.createElement(bJ,null,m.createElement(vj,{isPanorama:!0},r)):m.createElement(xJ,ff({ref:t},n),m.createElement(vj,{isPanorama:!1},r))});function wJ(){var e=nt(),[t,r]=m.useState(null),n=oe(BB);return m.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),a=i.width/t.offsetWidth;rt(a)&&a!==n&&e(wB(a))}},[t,e,n]),r}function xj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _J(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xj(Object(r),!0).forEach(function(n){jJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jJ(e,t,r){return(t=SJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SJ(e){var t=kJ(e,"string");return typeof t=="symbol"?t:t+""}function kJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ka(){return Ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ka.apply(null,arguments)}var NJ=()=>(kH(),null);function hf(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var EJ=m.forwardRef((e,t)=>{var r,n,i=m.useRef(null),[a,s]=m.useState({containerWidth:hf((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:hf((n=e.style)===null||n===void 0?void 0:n.height)}),o=m.useCallback((u,d)=>{s(f=>{var h=Math.round(u),p=Math.round(d);return f.containerWidth===h&&f.containerHeight===p?f:{containerWidth:h,containerHeight:p}})},[]),l=m.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=u.getBoundingClientRect();o(d,f);var h=g=>{var{width:v,height:y}=g[0].contentRect;o(v,y)},p=new ResizeObserver(h);p.observe(u),i.current=p}},[t,o]);return m.useEffect(()=>()=>{var u=i.current;u!=null&&u.disconnect()},[o]),m.createElement(m.Fragment,null,m.createElement(hh,{width:a.containerWidth,height:a.containerHeight}),m.createElement("div",Ka({ref:l},e)))}),CJ=m.forwardRef((e,t)=>{var{width:r,height:n}=e,[i,a]=m.useState({containerWidth:hf(r),containerHeight:hf(n)}),s=m.useCallback((l,u)=>{a(d=>{var f=Math.round(l),h=Math.round(u);return d.containerWidth===f&&d.containerHeight===h?d:{containerWidth:f,containerHeight:h}})},[]),o=m.useCallback(l=>{if(typeof t=="function"&&t(l),l!=null){var{width:u,height:d}=l.getBoundingClientRect();s(u,d)}},[t,s]);return m.createElement(m.Fragment,null,m.createElement(hh,{width:i.containerWidth,height:i.containerHeight}),m.createElement("div",Ka({ref:o},e)))}),PJ=m.forwardRef((e,t)=>{var{width:r,height:n}=e;return m.createElement(m.Fragment,null,m.createElement(hh,{width:r,height:n}),m.createElement("div",Ka({ref:t},e)))}),OJ=m.forwardRef((e,t)=>{var{width:r,height:n}=e;return ii(r)||ii(n)?m.createElement(CJ,Ka({},e,{ref:t})):m.createElement(PJ,Ka({},e,{ref:t}))});function AJ(e){return e===!0?EJ:OJ}var TJ=m.forwardRef((e,t)=>{var{children:r,className:n,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:l,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:p,onTouchMove:g,onTouchStart:v,style:y,width:x,responsive:w,dispatchTouchEvents:b=!0}=e,_=m.useRef(null),j=nt(),[S,k]=m.useState(null),[N,C]=m.useState(null),E=wJ(),P=h0(),I=(P==null?void 0:P.width)>0?P.width:x,W=(P==null?void 0:P.height)>0?P.height:i,F=m.useCallback(O=>{E(O),typeof t=="function"&&t(O),k(O),C(O),O!=null&&(_.current=O)},[E,t,k,C]),K=m.useCallback(O=>{j(jT(O)),j(Rr({handler:a,reactEvent:O}))},[j,a]),U=m.useCallback(O=>{j(gv(O)),j(Rr({handler:u,reactEvent:O}))},[j,u]),H=m.useCallback(O=>{j(ZO()),j(Rr({handler:d,reactEvent:O}))},[j,d]),R=m.useCallback(O=>{j(gv(O)),j(Rr({handler:f,reactEvent:O}))},[j,f]),B=m.useCallback(()=>{j(PT())},[j]),G=m.useCallback(O=>{j(CT(O.key))},[j]),ae=m.useCallback(O=>{j(Rr({handler:s,reactEvent:O}))},[j,s]),Q=m.useCallback(O=>{j(Rr({handler:o,reactEvent:O}))},[j,o]),ge=m.useCallback(O=>{j(Rr({handler:l,reactEvent:O}))},[j,l]),A=m.useCallback(O=>{j(Rr({handler:h,reactEvent:O}))},[j,h]),J=m.useCallback(O=>{j(Rr({handler:v,reactEvent:O}))},[j,v]),re=m.useCallback(O=>{b&&j(AT(O)),j(Rr({handler:g,reactEvent:O}))},[j,b,g]),he=m.useCallback(O=>{j(Rr({handler:p,reactEvent:O}))},[j,p]),_e=AJ(w);return m.createElement(wA.Provider,{value:S},m.createElement(H3.Provider,{value:N},m.createElement(_e,{width:I??(y==null?void 0:y.width),height:W??(y==null?void 0:y.height),className:Ae("recharts-wrapper",n),style:_J({position:"relative",cursor:"default",width:I,height:W},y),onClick:K,onContextMenu:ae,onDoubleClick:Q,onFocus:B,onKeyDown:G,onMouseDown:ge,onMouseEnter:U,onMouseLeave:H,onMouseMove:R,onMouseUp:A,onTouchEnd:he,onTouchMove:re,onTouchStart:J,ref:F},m.createElement(NJ,null),r)))}),DJ=["width","height","responsive","children","className","style","compact","title","desc"];function IJ(e,t){if(e==null)return{};var r,n,i=RJ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function RJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var MJ=m.forwardRef((e,t)=>{var{width:r,height:n,responsive:i,children:a,className:s,style:o,compact:l,title:u,desc:d}=e,f=IJ(e,DJ),h=pn(f);return l?m.createElement(m.Fragment,null,m.createElement(hh,{width:r,height:n}),m.createElement(yj,{otherAttributes:h,title:u,desc:d},a)):m.createElement(TJ,{className:s,style:o,width:r,height:n,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},m.createElement(yj,{otherAttributes:h,title:u,desc:d,ref:t},m.createElement(rY,null,a)))});function vv(){return vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vv.apply(null,arguments)}var LJ={top:5,right:5,bottom:5,left:5},$J={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:LJ,reverseStackOrder:!1,syncMethod:"index",responsive:!1},DT=m.forwardRef(function(t,r){var n,i=rr(t.categoricalChartProps,$J),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,categoricalChartProps:u}=t,d={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,eventEmitter:void 0};return m.createElement(fJ,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:a},m.createElement(qG,{chartData:u.data}),m.createElement(hJ,{layout:i.layout,margin:i.margin}),m.createElement(pJ,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),m.createElement(MJ,vv({},i,{ref:r})))}),FJ=["axis"],BJ=m.forwardRef((e,t)=>m.createElement(DT,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:FJ,tooltipPayloadSearcher:jA,categoricalChartProps:e,ref:t})),UJ=["axis","item"],zJ=m.forwardRef((e,t)=>m.createElement(DT,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:UJ,tooltipPayloadSearcher:jA,categoricalChartProps:e,ref:t}));const bj=["under_contract","pending"],WJ=["closed","dead"],KJ=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],HJ={buyer:"Buyer",seller:"Seller",buyer_and_seller:"Buyer & Seller",renter:"Renter",landlord:"Landlord"},qJ={new_lead:"New Lead",contacted:"Contacted",showing_scheduled:"Showing Scheduled",offer_submitted:"Offer Submitted",under_contract:"Under Contract",pending:"Pending",closed:"Closed",dead:"Lost"},pf=["luma-insights","pipeline-health","alerts-actions","monthly-momentum","deal-type-mix","lead-source","upcoming-deals"],VJ=e=>{const t=e.map(s=>s==="monthly-gci"?"monthly-momentum":s),r=t.filter((s,o)=>t.indexOf(s)===o),n=new Set(pf),i=r.filter(s=>n.has(s)),a=pf.filter(s=>!i.includes(s));return[...i,...a]},mf=e=>{if(!e)return null;const t=e.trim();if(!t)return null;const r=t.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(r){const a=Number(r[1]),s=Number(r[2])-1,o=Number(r[3]);if(Number.isNaN(a)||Number.isNaN(s)||Number.isNaN(o)||s<0||s>11||o<1||o>31)return null;const l=new Date(Date.UTC(a,s,o));return{year:a,month:s,date:l}}const n=t.replace(" ","T").replace(/(\+\d{2})(\d{2})$/,"$1:$2").replace(/(-\d{2})(\d{2})$/,"$1:$2"),i=new Date(n);return Number.isNaN(i.getTime())?null:{year:i.getUTCFullYear(),month:i.getUTCMonth(),date:i}},wj=(e,t)=>{const r=e.split("T")[0],n=t.split("T")[0];return[`and(close_date.gte.${r},close_date.lte.${n})`,`and(close_date.is.null,closed_at.gte.${e},closed_at.lte.${t})`].join(",")},_j=(e,t,r)=>{const n=mf(e.close_date)||mf(e.closed_at);if(!n)return!1;const i=n.date.getTime();return i>=t.getTime()&&i<=r.getTime()};function GJ({id:e,children:t}){const{attributes:r,listeners:n,setNodeRef:i,transform:a,transition:s,isDragging:o}=Uy({id:e}),l={transform:Pn.Transform.toString(a),transition:s,opacity:o?.5:1,position:"relative"};return c.jsxs("div",{ref:i,style:l,className:"relative group",children:[c.jsx("div",{...r,...n,className:"absolute -top-2 -right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing bg-white rounded-lg shadow-lg p-2",children:c.jsx(b2,{className:"w-4 h-4 text-gray-400"})}),t]})}function YJ(){var xe;const{user:e}=gt(),[t,r]=m.useState({ytdGCI:0,ytdDeals:0,ytdVolume:0,avgCommission:0,closingThisMonth:0,conversionRate:0}),[n,i]=m.useState([]),[a,s]=m.useState([]),[o,l]=m.useState([]),[u,d]=m.useState([]),[f,h]=m.useState([]),[p,g]=m.useState(!0),[v,y]=m.useState([]),[x,w]=m.useState(!1),[b,_]=m.useState([]),[j,S]=m.useState([...pf]),[k,N]=m.useState(null),C=A3("ytd"),E=Ty(Ay(lc,{activationConstraint:{distance:8}})),P=m.useMemo(()=>n.reduce(($,V)=>$+V.count,0),[n]),I=m.useMemo(()=>n.reduce(($,V)=>$+V.expectedGCI,0),[n]),W=m.useMemo(()=>n.reduce(($,V)=>$+V.stalledCount,0),[n]),F=m.useMemo(()=>u.reduce(($,V)=>$+la(V),0),[u]);m.useEffect(()=>{K(),ge()},[e]),m.useEffect(()=>{!p&&t.ytdGCI>0&&U()},[p,t,n,o,a]);const K=async()=>{if(!e)return;const $=e.id;g(!0);const V=C.start.toISOString(),Z=C.end.toISOString();try{await Promise.all([H($,V,Z),R($),B($),G($,V,Z),ae($),Q($)])}catch(le){console.error("Error loading dashboard data",le)}finally{g(!1)}},U=async()=>{if(e){w(!0);try{const{data:{session:$}}=await X.auth.getSession();if(!$)return;const Z=await fetch("https://gomwhbewjdcllejifdyf.supabase.co/functions/v1/luma-insights",{method:"POST",headers:{Authorization:`Bearer ${$.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({stats:t,pipelineHealth:n.map(fe=>({id:fe.id,name:fe.name,count:fe.count,expectedGCI:fe.expectedGCI,stalledCount:fe.stalledCount})),leadSourceData:o,monthlyData:a,upcomingDealsCount:u.length,projectedGCI:F})});if(!Z.ok){const fe=await Z.text();console.error("Failed to fetch AI insights:",fe);return}const le=await Z.json();y(le.insights||[])}catch($){console.error("Error loading AI insights:",$)}finally{w(!1)}}},H=async($,V,Z)=>{const le=wj(V,Z),{data:fe,error:ue}=await X.from("deals").select("*").eq("user_id",$).eq("status","closed").or(le);ue&&console.error("loadStats closedDeals error",ue);const{data:we,error:Je}=await X.from("deals").select("*").eq("user_id",$).gte("created_at",V).lte("created_at",Z);Je&&console.error("loadStats allDeals error",Je);const be=new Date().getFullYear(),me=new Date().getMonth(),ye=new Date(be,me,1).toISOString(),lt=new Date(be,me+1,0,23,59,59).toISOString(),{data:Te,error:Ot}=await X.from("deals").select("id").eq("user_id",$).in("status",bj).gte("close_date",ye).lte("close_date",lt);Ot&&console.error("loadStats closingThisMonth error",Ot);let Jr=0,Rn=0;const xi=(fe||[]).filter(Ln=>_j(Ln,C.start,C.end));xi.forEach(Ln=>{const Cc=Ln.actual_sale_price||0;Jr+=Cc,Rn+=la(Ln)});const Mn=xi.length,wo=Mn>0?Rn/Mn:0,qe=(we==null?void 0:we.length)||0,bi=qe>0?Mn/qe:0;r({ytdGCI:Rn,ytdDeals:Mn,ytdVolume:Jr,avgCommission:wo,closingThisMonth:(Te==null?void 0:Te.length)||0,conversionRate:bi})},R=async $=>{const{data:V,error:Z}=await X.from("pipeline_statuses").select("*").eq("user_id",$).order("sort_order");if(Z){console.error("loadPipelineHealth statuses error",Z);return}const{data:le,error:fe}=await X.from("deals").select("*").eq("user_id",$).not("status","in",`(${WJ.join(",")})`);if(fe){console.error("loadPipelineHealth deals error",fe);return}if(!V||!le){i([]),_([]);return}const ue=V.map(me=>{const ye=le.filter(Ot=>Ot.pipeline_status_id===me.id),lt=ye.reduce((Ot,Jr)=>Ot+la(Jr),0),Te=ye.filter(Ot=>Ew(Ot.stage_entered_at,30)).length;return{id:me.id,name:me.name,color:me.color,count:ye.length,expectedGCI:lt,stalledCount:Te}});i(ue);const we=new Map;le.forEach(me=>{const ye=we.get(me.deal_type)??{count:0,gci:0,statusCounts:{}};ye.count+=1,ye.gci+=la(me);const lt=ye.statusCounts[me.status]||0;ye.statusCounts[me.status]=lt+1,we.set(me.deal_type,ye)});const Je=le.length,be=Array.from(we.entries()).map(([me,ye])=>({dealType:me,count:ye.count,gci:ye.gci,percentage:Je>0?ye.count/Je:0,statusCounts:ye.statusCounts})).sort((me,ye)=>ye.count-me.count);_(be)},B=async $=>{const V=new Date().getFullYear(),{data:Z,error:le}=await X.from("deals").select("*").eq("user_id",$).eq("status","closed");if(le){console.error("loadMonthlyTrends error",le);return}if(!Z){s([]);return}const fe=KJ.map(ue=>({month:ue,gci:0,deals:0}));Z.forEach(ue=>{const we=mf(ue.close_date)||mf(ue.closed_at);if(!we||we.year!==V)return;const Je=we.month,be=fe[Je];be.gci+=la(ue),be.deals+=1}),s(fe.map(ue=>({month:ue.month,gci:Math.round(ue.gci),deals:ue.deals})))},G=async($,V,Z)=>{const le=wj(V,Z),{data:fe,error:ue}=await X.from("deals").select("*, lead_sources(*)").eq("user_id",$).eq("status","closed").or(le);if(ue){console.error("loadLeadSourcePerformance error",ue);return}if(!fe){l([]);return}const we=fe.filter(me=>_j(me,C.start,C.end)),Je=new Map;we.forEach(me=>{var Te;const ye=((Te=me.lead_sources)==null?void 0:Te.name)||"Unknown",lt=Je.get(ye)||{deals:0,gci:0};lt.deals+=1,lt.gci+=la(me),Je.set(ye,lt)});const be=Array.from(Je.entries()).map(([me,ye])=>({name:me,deals:ye.deals,gci:Math.round(ye.gci)})).sort((me,ye)=>ye.gci-me.gci).slice(0,5);l(be)},ae=async $=>{const V=new Date,Z=new Date;Z.setDate(V.getDate()+30);const{data:le,error:fe}=await X.from("deals").select("*").eq("user_id",$).in("status",bj).gte("close_date",V.toISOString()).lte("close_date",Z.toISOString()).order("close_date",{ascending:!0}).limit(5);if(fe){console.error("loadUpcomingDeals error",fe),d([]);return}d(le||[])},Q=async $=>{const{data:V,error:Z}=await X.from("deals").select("*").eq("user_id",$).neq("status","closed").neq("status","dead").order("stage_entered_at",{ascending:!0});if(Z){console.error("loadStalledDeals error",Z),h([]);return}const le=(V||[]).filter(fe=>Ew(fe.stage_entered_at,30)).slice(0,5);h(le)},ge=async()=>{if(e)try{const{data:$,error:V}=await X.from("dashboard_layouts").select("widget_order").eq("user_id",e.id).maybeSingle();if(V){console.error("Error loading widget layout:",V);return}$&&$.widget_order?S(VJ($.widget_order)):S([...pf])}catch($){console.error("Error loading widget layout:",$)}},A=async $=>{if(e)try{const{error:V}=await X.from("dashboard_layouts").upsert({user_id:e.id,widget_order:$,updated_at:new Date().toISOString()},{onConflict:"user_id"});V&&console.error("Error saving widget layout:",V)}catch(V){console.error("Error saving widget layout:",V)}},J=$=>{const{active:V,over:Z}=$;if(!Z||V.id===Z.id){N(null);return}const le=j.indexOf(V.id),fe=j.indexOf(Z.id),ue=[...j],[we]=ue.splice(le,1);ue.splice(fe,0,we),S(ue),A(ue),N(null)},re=()=>{window.location.href="/pipeline"},he=()=>{window.location.href="/pipeline"},_e=()=>{window.location.href="/luma"},O=m.useMemo(()=>{const $=[];if(a.length>=2){const Z=a.slice(-2);if(Z.length===2){const[le,fe]=Z;if(fe.gci>le.gci){const ue=(fe.gci-le.gci)/le.gci*100;$.push(`You're on track to beat last month by ${ue.toFixed(0)}% in GCI.`)}else if(fe.gci<le.gci&&le.gci>0){const ue=(le.gci-fe.gci)/le.gci*100;$.push(`GCI is down ${ue.toFixed(0)}% compared to last month.`)}}}const V=new Map;if(n.forEach(Z=>{Z.stalledCount>0&&V.set(Z.name,Z.stalledCount)}),V.size>0){const Z=Array.from(V.entries()).sort((le,fe)=>fe[1]-le[1])[0];$.push(`${Z[1]} deal${Z[1]>1?"s have":" has"} been stalled in '${Z[0]}' for 30+ days.`)}if(o.length>0){const Z=o[0];$.push(`${Z.name} is your top performing lead source with ${ar(Z.gci)} in closed deals.`)}return t.conversionRate>0&&(t.conversionRate>=.3?$.push(`Strong ${iu(t.conversionRate)} conversion rate - keep up the momentum!`):t.conversionRate<.15&&$.push(`Conversion rate at ${iu(t.conversionRate)} - consider focusing on lead quality.`)),u.length>0&&F>0&&$.push(`${u.length} deals projected to close soon with ${ar(F)} potential GCI.`),$.length===0&&$.push("Keep adding deals to your pipeline to get personalized insights."),$},[t,n,o,a,u,F]),L=$=>{switch($){case"luma-insights":return Y();case"pipeline-health":return M();case"alerts-actions":return Se();case"monthly-momentum":return D();case"deal-type-mix":return ce();case"lead-source":return ve();case"upcoming-deals":return u.length>0?q():null;default:return null}},Y=()=>c.jsx("div",{className:"hig-card p-6 bg-gradient-to-br from-blue-50 to-white border-blue-200/60",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-12 h-12 rounded-2xl bg-[rgb(0,122,255)] flex items-center justify-center shadow-lg",children:c.jsx(Ws,{className:"w-6 h-6 text-white",strokeWidth:2})})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"hig-text-heading",children:"Luma Insights"}),x&&c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[rgb(0,122,255)]"})]}),v.length>0?c.jsx("div",{className:"space-y-3",children:v.slice(0,3).map(($,V)=>c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[rgb(0,122,255)] mt-2 flex-shrink-0"}),c.jsx("p",{className:"text-[15px] text-gray-700 leading-relaxed",children:$})]},V))}):c.jsx("div",{className:"space-y-3",children:O.slice(0,3).map(($,V)=>c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[rgb(0,122,255)] mt-2 flex-shrink-0"}),c.jsx("p",{className:"text-[15px] text-gray-700 leading-relaxed",children:$})]},V))})]})]})}),M=()=>c.jsxs("div",{className:"hig-card p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h2",{className:"hig-text-heading",children:"Pipeline Health"}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:P}),c.jsx("div",{className:"text-xs text-gray-500",children:"Active Deals"})]})]}),n.length===0?c.jsx("div",{className:"text-sm text-gray-500",children:"No active deals in your pipeline yet. Add a deal to see health metrics here."}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-xl",children:c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Total Pipeline Value"}),c.jsx("span",{className:"text-lg font-semibold text-[rgb(0,122,255)]",children:ar(I)})]})}),c.jsx("div",{className:"space-y-3",children:n.map($=>{if($.count===0)return null;const V=P>0?$.count/P*100:0;return c.jsxs("div",{className:"group p-4 rounded-xl border border-gray-200/60 hover:border-gray-300 hover:shadow-sm transition-all cursor-pointer",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Hf($.color)}}),c.jsx("span",{className:"font-medium text-gray-900",children:$.name})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[$.stalledCount>0&&c.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-orange-50 rounded-full",children:[c.jsx(Rl,{className:"w-3.5 h-3.5 text-orange-600",strokeWidth:2}),c.jsxs("span",{className:"text-xs font-medium text-orange-700",children:[$.stalledCount," stalled"]})]}),c.jsx("span",{className:"text-lg font-semibold text-gray-900",children:$.count})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"text-sm text-[rgb(0,122,255)] font-medium",children:ar($.expectedGCI)}),c.jsxs("div",{className:"text-xs text-gray-500",children:[V.toFixed(0),"% of pipeline"]})]})]},$.id)})}),W>0&&c.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200/60",children:c.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-orange-50 rounded-xl border border-orange-200/60",children:[c.jsx(ni,{className:"w-4 h-4 text-orange-600",strokeWidth:2}),c.jsxs("span",{className:"text-sm font-medium text-orange-700",children:[W," deals need attention (30+ days)"]})]})})]})]}),Se=()=>c.jsxs("div",{className:"hig-card p-6",children:[c.jsx("div",{className:"flex items-center justify-between mb-6",children:c.jsx("h2",{className:"hig-text-heading",children:"Alerts & Actions"})}),f.length>0?c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2 text-orange-600 mb-3",children:[c.jsx(ni,{className:"w-4 h-4",strokeWidth:2}),c.jsx("span",{className:"text-sm font-medium",children:"Stalled Deals Requiring Attention"})]}),c.jsx("div",{className:"space-y-2",children:f.slice(0,3).map($=>c.jsx("div",{className:"p-3 bg-orange-50 rounded-xl border border-orange-200/60 hover:shadow-sm transition-all cursor-pointer",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-medium text-gray-900 text-sm",children:$.client_name}),c.jsx("div",{className:"text-xs text-gray-600 mt-1",children:$.property_address})]}),c.jsx("div",{className:"ml-3 px-2 py-1 bg-orange-100 rounded-lg",children:c.jsxs("div",{className:"text-xs text-orange-700 font-semibold",children:[nE($.stage_entered_at),"d"]})})]})},$.id))})]}):c.jsx("div",{className:"mb-6 p-4 bg-green-50 rounded-xl border border-green-200/60",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Gi,{className:"w-4 h-4 text-green-600",strokeWidth:2}),c.jsx("span",{className:"text-sm text-green-700",children:"All deals are moving smoothly!"})]})}),c.jsxs("div",{className:"pt-4 border-t border-gray-200/60",children:[c.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Quick Actions"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("button",{className:"hig-btn-secondary py-3 text-sm flex items-center justify-center gap-2",onClick:re,children:[c.jsx(TL,{className:"w-4 h-4",strokeWidth:2}),c.jsx("span",{children:"New Client"})]}),c.jsxs("button",{className:"hig-btn-secondary py-3 text-sm flex items-center justify-center gap-2",onClick:he,children:[c.jsx(x2,{className:"w-4 h-4",strokeWidth:2}),c.jsx("span",{children:"New Task"})]}),c.jsxs("button",{className:"hig-btn-primary py-3 text-sm flex items-center justify-center gap-2",onClick:_e,children:[c.jsx(Ws,{className:"w-4 h-4",strokeWidth:2}),c.jsx("span",{children:"Ask Luma"})]})]})]})]}),D=()=>{const $=a.some(be=>be.gci>0||be.deals>0),V=a.filter(be=>be.gci>0||be.deals>0),Z=V.length>0?V[V.length-1]:null,le=V.length>=2?V[V.length-2]:null,fe=Z&&le&&le.gci>0?(Z.gci-le.gci)/le.gci*100:null,ue=V.reduce((be,me)=>me.gci>((be==null?void 0:be.gci)??0)?me:be,null),we=a.map((be,me,ye)=>{const lt=Math.max(0,me-2),Te=ye.slice(lt,me+1),Ot=Te.reduce((Jr,Rn)=>Jr+Rn.gci,0);return Te.length?Ot/Te.length:be.gci}),Je=a.map((be,me)=>({...be,trend:we[me]??be.gci}));return c.jsxs("div",{className:"hig-card p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"hig-text-heading",children:"Monthly Momentum"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Track production pace and deal count across recent months."})]}),fe!==null&&c.jsxs("div",{className:`inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-semibold ${fe>=0?"bg-emerald-50 text-emerald-600":"bg-rose-50 text-rose-600"}`,children:[fe>=0?c.jsx(v2,{className:"w-3.5 h-3.5"}):c.jsx(cL,{className:"w-3.5 h-3.5"}),fe>=0?"+":"",fe.toFixed(1),"% vs prev. month"]})]}),$?c.jsxs(c.Fragment,{children:[c.jsx(s_,{width:"100%",height:180,children:c.jsxs(BJ,{data:Je,children:[c.jsx(uv,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),c.jsx(hv,{dataKey:"month",tick:{fontSize:11},stroke:"#94a3b8"}),c.jsx(mv,{tick:{fontSize:11},stroke:"#94a3b8",tickFormatter:be=>`$${(be/1e3).toFixed(0)}K`}),c.jsx(I1,{formatter:be=>ar(be),labelFormatter:be=>`Month: ${be}`,contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb"}}),c.jsx(dv,{type:"monotone",dataKey:"gci",stroke:"#0ea5e9",strokeWidth:2,dot:{r:3,fill:"#0ea5e9"},activeDot:{r:5}}),c.jsx(dv,{type:"monotone",dataKey:"trend",stroke:"#ef4444",strokeWidth:1.5,dot:!1,strokeDasharray:"4 4"})]})}),c.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2 text-xs text-gray-600",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"h-1.5 w-6 rounded-full bg-[#0ea5e9]"}),c.jsx("span",{children:"Monthly GCI"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"h-1.5 w-6 rounded-full bg-[#ef4444]"}),c.jsx("span",{children:"3-month trailing mean"})]})]}),ue&&c.jsxs("div",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:["Top month: ",ue.month,"  ",ar(ue.gci)]})]})]}):c.jsx("div",{className:"text-sm text-gray-500",children:"No closed deals yet in this period. Close your first deal to surface momentum insights."})]})},ce=()=>c.jsxs("div",{className:"hig-card p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h2",{className:"hig-text-heading",children:"Deal Type Mix"}),c.jsx("div",{className:"text-xs text-gray-500",children:"Share of active deals by type & status"})]}),b.length>0?c.jsx("div",{className:"space-y-4",children:b.map($=>c.jsxs("div",{className:"rounded-2xl border border-gray-100 p-4",children:[c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-base font-semibold text-gray-900",children:HJ[$.dealType]}),c.jsxs("p",{className:"text-sm text-gray-500",children:[$.count," active ",$.count===1?"deal":"deals"]}),c.jsxs("p",{className:"text-sm text-gray-500",children:[ar($.gci)," expected GCI"]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:iu($.percentage)}),c.jsx("p",{className:"text-xs text-gray-500",children:"of pipeline"})]})]}),c.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:Object.entries($.statusCounts).sort((V,Z)=>Z[1]-V[1]).map(([V,Z])=>c.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-gray-100 px-3 py-1 text-xs font-medium text-gray-700",children:[c.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-gray-400"}),qJ[V]??V.replace(/_/g," "),c.jsxs("span",{className:"text-gray-500",children:["(",Z,")"]})]},V))})]},$.dealType))}):c.jsx("div",{className:"text-sm text-gray-500",children:"No active deals in your pipeline. Add a deal to see the deal-type mix."})]}),ve=()=>c.jsxs("div",{className:"hig-card p-6",children:[c.jsx("h2",{className:"hig-text-heading mb-6",children:"Lead Source Performance"}),o.length>0?c.jsx(s_,{width:"100%",height:250,children:c.jsxs(zJ,{data:o,layout:"vertical",children:[c.jsx(uv,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),c.jsx(hv,{type:"number",tick:{fontSize:12},stroke:"#6b7280",tickFormatter:$=>`$${($/1e3).toFixed(0)}K`}),c.jsx(mv,{type:"category",dataKey:"name",tick:{fontSize:12},stroke:"#6b7280",width:100}),c.jsx(I1,{formatter:$=>ar($),contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb"}}),c.jsx(dT,{dataKey:"gci",fill:"#0ea5e9",radius:[0,4,4,0]})]})}):c.jsx("div",{className:"text-sm text-gray-500",children:"No closed deals in this period, so lead source performance is not available yet."})]}),q=()=>c.jsxs("div",{className:"hig-card p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h2",{className:"hig-text-heading",children:"Forecasted Closings (Next 30 Days)"}),c.jsxs("div",{className:"text-sm text-gray-600",children:[c.jsx("span",{className:"font-medium text-gray-900",children:ar(F)})," ","projected GCI"]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map($=>c.jsxs("div",{className:"p-4 border border-gray-200/60 rounded-xl hover:shadow-sm hover:border-gray-300 transition-all cursor-pointer",children:[c.jsx("div",{className:"font-medium text-gray-900",children:$.client_name}),c.jsx("div",{className:"text-sm text-gray-600 mt-1",children:$.property_address}),c.jsxs("div",{className:"flex items-center justify-between mt-3",children:[c.jsx("div",{className:"text-sm font-semibold text-[rgb(0,122,255)]",children:ar(la($))}),c.jsx(pL,{className:"w-4 h-4 text-gray-400",strokeWidth:2})]})]},$.id))})]});return p?c.jsx("div",{className:"flex items-center justify-center h-96",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[rgb(0,122,255)]"})}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_10px_40px_rgba(15,23,42,0.08)] p-6 space-y-6",children:[c.jsx("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center",children:c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-[0.25em]",children:O3()}),c.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mt-1",children:P3((xe=e==null?void 0:e.user_metadata)==null?void 0:xe.name)}),c.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[t.closingThisMonth," deal",t.closingThisMonth===1?"":"s"," closing soon "," ",ar(F)," projected GCI over the next 30 days."]})]})}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"rounded-2xl border border-blue-100/70 bg-blue-50/40 p-4",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-blue-600",children:"Pipeline Value"}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900 mt-2",children:ar(I)}),c.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Active stages only"})]}),c.jsxs("div",{className:"rounded-2xl border border-emerald-100/70 bg-emerald-50/40 p-4",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-emerald-600",children:"Projected GCI"}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900 mt-2",children:ar(F)}),c.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Next 30 days"})]}),c.jsxs("div",{className:"rounded-2xl border border-purple-100/70 bg-purple-50/40 p-4",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-purple-600",children:"Active Deals"}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900 mt-2",children:P}),c.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Across pipeline"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"hig-card p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx("div",{className:"p-2 rounded-xl bg-blue-50",children:c.jsx(mL,{className:"w-5 h-5 text-[rgb(0,122,255)]",strokeWidth:2})}),c.jsx("span",{className:"text-sm text-gray-600",children:"Total GCI"})]}),c.jsx("div",{className:"text-3xl font-semibold text-gray-900",children:ar(t.ytdGCI)})]}),c.jsxs("div",{className:"hig-card p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx("div",{className:"p-2 rounded-xl bg-green-50",children:c.jsx(Gi,{className:"w-5 h-5 text-green-600",strokeWidth:2})}),c.jsx("span",{className:"text-sm text-gray-600",children:"Closed Deals"})]}),c.jsx("div",{className:"text-3xl font-semibold text-gray-900",children:t.ytdDeals})]}),c.jsxs("div",{className:"hig-card p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx("div",{className:"p-2 rounded-xl bg-orange-50",children:c.jsx(Il,{className:"w-5 h-5 text-orange-600",strokeWidth:2})}),c.jsx("span",{className:"text-sm text-gray-600",children:"Closing Soon"})]}),c.jsx("div",{className:"text-3xl font-semibold text-gray-900",children:t.closingThisMonth})]}),c.jsxs("div",{className:"hig-card p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx("div",{className:"p-2 rounded-xl bg-gray-50",children:c.jsx(lL,{className:"w-5 h-5 text-gray-600",strokeWidth:2})}),c.jsx("span",{className:"text-sm text-gray-600",children:"Conv. Rate"})]}),c.jsx("div",{className:"text-3xl font-semibold text-gray-900",children:iu(t.conversionRate)})]})]}),c.jsx(Ly,{sensors:E,collisionDetection:I2,onDragEnd:J,onDragStart:$=>N($.active.id),children:c.jsx(By,{items:j,strategy:Fy,children:c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:j.map($=>{const V=L($);return V?c.jsx(GJ,{id:$,children:V},$):null})})})})]})}function IT({deal:e,netCommission:t,daysInStage:r,onClick:n,isDragging:i=!1}){const a=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s);return c.jsxs("div",{onClick:n,"data-deal-id":e.id,className:`rounded-2xl border border-gray-100/80 bg-white/95 p-4 shadow-[0_10px_30px_rgba(15,23,42,0.05)] ring-1 ring-black/5 cursor-move transition-transform duration-200 ${i?"opacity-60":"hover:-translate-y-0.5"}`,children:[c.jsxs("div",{className:"flex items-start justify-between gap-3",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:e.client_name}),c.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[c.jsx(w2,{className:"w-3.5 h-3.5 mr-1 text-gray-400"}),c.jsx("span",{className:"truncate",children:e.property_address})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:"Expected"}),c.jsx("div",{className:"text-sm font-semibold text-gray-900",children:a(e.actual_sale_price||e.expected_sale_price)})]})]}),c.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-xs text-gray-600",children:[c.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[c.jsx(Rl,{className:"w-3.5 h-3.5 text-gray-400"}),c.jsxs("span",{children:[r,"d in stage"]})]}),e.lead_sources?c.jsxs("div",{className:"flex items-center gap-1 text-gray-500 justify-end",children:[c.jsx(C2,{className:"w-3.5 h-3.5 text-gray-400"}),c.jsx("span",{className:"truncate",children:e.lead_sources.name})]}):c.jsx("div",{})]}),c.jsxs("div",{className:"mt-4 flex items-center justify-between rounded-xl bg-gray-50 px-3 py-2 text-xs",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:"Net Commission"}),c.jsx("div",{className:"text-sm font-semibold text-emerald-600",children:a(t)})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:"Last Update"}),c.jsx("div",{className:"text-sm font-semibold text-gray-900",children:new Date(e.updated_at).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]})]})]})}const XJ=["buyer","seller","buyer_and_seller","renter","landlord"],zo={buyer:{label:"Buyer",accentDot:"bg-blue-400",labelClass:"text-blue-900",panelBg:"bg-blue-50/60",panelBorder:"border-blue-100"},seller:{label:"Seller",accentDot:"bg-emerald-400",labelClass:"text-emerald-900",panelBg:"bg-emerald-50/60",panelBorder:"border-emerald-100"},buyer_and_seller:{label:"Buyer & Seller",accentDot:"bg-purple-400",labelClass:"text-purple-900",panelBg:"bg-purple-50/60",panelBorder:"border-purple-100"},renter:{label:"Renter",accentDot:"bg-orange-400",labelClass:"text-orange-900",panelBg:"bg-orange-50/60",panelBorder:"border-orange-100"},landlord:{label:"Landlord",accentDot:"bg-teal-400",labelClass:"text-teal-900",panelBg:"bg-teal-50/60",panelBorder:"border-teal-100"}};function JJ({status:e,label:t,color:r,deals:n,onDealClick:i,calculateNetCommission:a,getDaysInStage:s}){const{setNodeRef:o,isOver:l}=Q2({id:e}),u=qf(r),d=XJ.map(f=>({type:f,label:zo[f].label,accentDot:zo[f].accentDot,labelClass:zo[f].labelClass,deals:n.filter(h=>h.deal_type===f),panelBg:zo[f].panelBg,panelBorder:zo[f].panelBorder})).filter(f=>f.deals.length>0);return c.jsxs("div",{className:"flex-shrink-0 w-72 sm:w-80 flex flex-col",children:[c.jsxs("div",{className:"rounded-lg p-2.5 sm:p-3 mb-2 sm:mb-3 flex-shrink-0",style:{backgroundColor:u.bg,color:u.text},children:[c.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:t}),c.jsxs("span",{className:"text-xs sm:text-sm opacity-80",children:[n.length," deal",n.length!==1?"s":""]})]}),c.jsx("div",{ref:o,className:`flex-1 min-h-[600px] rounded-lg p-3 transition overflow-y-auto ${l?"bg-blue-50 ring-2 ring-blue-400":"bg-gray-50"}`,style:{minHeight:"600px"},children:n.length===0?c.jsx("div",{className:"h-full min-h-[560px] flex items-center justify-center",children:c.jsxs("div",{className:"text-center text-gray-400",children:[c.jsx("div",{className:"text-sm font-medium mb-1",children:"Drop deals here"}),c.jsx("div",{className:"text-xs",children:"Drag cards to this column"})]})}):c.jsx("div",{className:"space-y-6",children:d.map((f,h)=>c.jsxs("div",{className:`rounded-2xl border px-3 py-3 sm:px-4 sm:py-4 ${f.panelBg} ${f.panelBorder} ${h>0?"mt-1":""}`,children:[c.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${f.accentDot}`}),c.jsx("span",{className:`text-xs font-semibold ${f.labelClass}`,children:f.label})]}),c.jsxs("span",{className:"text-[11px] font-medium text-gray-400",children:[f.deals.length," deal",f.deals.length!==1?"s":""]})]}),c.jsx(By,{items:f.deals.map(p=>p.id),strategy:Z2,children:c.jsx("div",{className:"mt-3 space-y-2 sm:space-y-3",children:f.deals.map(p=>c.jsx(QJ,{deal:p,onDealClick:i,calculateNetCommission:a,getDaysInStage:s},p.id))})})]},f.type))})})]})}function QJ({deal:e,onDealClick:t,calculateNetCommission:r,getDaysInStage:n}){const{attributes:i,listeners:a,setNodeRef:s,transform:o,transition:l,isDragging:u}=Uy({id:e.id,data:{type:"deal"}}),d={transform:Pn.Transform.toString(o),transition:l,zIndex:u?50:void 0};return c.jsx("div",{ref:s,style:d,...i,...a,children:c.jsx(IT,{deal:e,netCommission:r(e),daysInStage:n(e.stage_entered_at),onClick:()=>t(e),isDragging:u})})}const ZJ={jan:1,january:1,feb:2,february:2,mar:3,march:3,apr:4,april:4,may:5,jun:6,june:6,jul:7,july:7,aug:8,august:8,sep:9,sept:9,september:9,oct:10,october:10,nov:11,november:11,dec:12,december:12};function jj(e){return e.toString().padStart(2,"0")}function eQ(e,t,r){const n=new Date(Date.UTC(e,t-1,r));return n.getUTCFullYear()===e&&n.getUTCMonth()+1===t&&n.getUTCDate()===r}function Wo(e,t,r){return eQ(e,t,r)?`${e}-${jj(t)}-${jj(r)}`:null}function tQ(e){return e<100?e>=70?1900+e:2e3+e:e}function Sj(e){const t=e.toLowerCase();return ZJ[t]||null}function rQ(e){if(!e)return null;const t=e.trim();if(!t)return null;const r=t.replace(/\s+/g," "),n=r.match(/^(\d{4})[\/-](\d{1,2})[\/-](\d{1,2})$/);if(n){const[l,u,d,f]=n;return Wo(parseInt(u,10),parseInt(d,10),parseInt(f,10))}const i=r.match(/^(\d{1,2})[\/\.\-](\d{1,2})[\/\.\-](\d{2}|\d{4})$/);if(i){const[l,u,d,f]=i,h=tQ(parseInt(f,10));return Wo(h,parseInt(u,10),parseInt(d,10))}const a=r.match(/^(\d{4})\.(\d{1,2})\.(\d{1,2})$/);if(a){const[l,u,d,f]=a;return Wo(parseInt(u,10),parseInt(d,10),parseInt(f,10))}const s=r.match(/^([A-Za-z]+)[\s\-](\d{1,2}),?[\s\-]*(\d{4})$/);if(s){const l=Sj(s[1]);if(l)return Wo(parseInt(s[3],10),l,parseInt(s[2],10))}const o=r.match(/^(\d{1,2})[\s\-]([A-Za-z]+),?[\s\-]*(\d{4})$/);if(o){const l=Sj(o[2]);if(l)return Wo(parseInt(o[3],10),l,parseInt(o[1],10))}return null}function nQ(e=[]){const t=["client_name","client_phone","client_email","property_address","city","state","zip","deal_type","lead_source_name","pipeline_status","expected_sale_price","actual_sale_price","gross_commission_rate","brokerage_split_rate","referral_out_rate","referral_in_rate","transaction_fee","close_date"].join(","),r=["New Lead","Contacted","Under Contract"],n=e.length>0?e:r,a=[{client_name:"John Smith",client_phone:"555-123-4567",client_email:"john.smith@example.com",property_address:"123 Main Street",city:"Austin",state:"TX",zip:"78701",deal_type:"buyer",lead_source_name:"Zillow",pipeline_status:n[Math.min(2,n.length-1)]||n[0],expected_sale_price:"450000",actual_sale_price:"",gross_commission_rate:"0.03",brokerage_split_rate:"0.20",referral_out_rate:"",referral_in_rate:"",transaction_fee:"500",close_date:""},{client_name:"Sarah Johnson",client_phone:"555-987-6543",client_email:"sarah.j@example.com",property_address:"456 Oak Avenue",city:"Dallas",state:"TX",zip:"75201",deal_type:"seller",lead_source_name:"Past Client",pipeline_status:n[n.length-1]||n[0],expected_sale_price:"525000",actual_sale_price:"520000",gross_commission_rate:"0.03",brokerage_split_rate:"0.20",referral_out_rate:"0.25",referral_in_rate:"",transaction_fee:"500",close_date:"2024-12-15"},{client_name:"Mike Davis",client_phone:"555-456-7890",client_email:"mike.davis@example.com",property_address:"789 Elm Street",city:"Houston",state:"TX",zip:"77001",deal_type:"renter",lead_source_name:"Referral",pipeline_status:n[Math.min(1,n.length-1)]||n[0],expected_sale_price:"2400",actual_sale_price:"",gross_commission_rate:"0.5",brokerage_split_rate:"0.20",referral_out_rate:"",referral_in_rate:"",transaction_fee:"0",close_date:""}].map(s=>Object.values(s).map(o=>{const l=String(o);return l.includes(",")||l.includes('"')||l.includes(`
`)?`"${l.replace(/"/g,'""')}"`:l}).join(",")).join(`
`);return`${t}
${a}`}function iQ(e,t){const r=new Blob([e],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),i=URL.createObjectURL(r);n.setAttribute("href",i),n.setAttribute("download",t),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function aQ(e){const t=[];let r=[],n="",i=!1;for(let a=0;a<e.length;a++){const s=e[a],o=e[a+1];i?s==='"'&&o==='"'?(n+='"',a++):s==='"'?i=!1:n+=s:s==='"'?i=!0:s===","?(r.push(n.trim()),n=""):s===`
`||s==="\r"?((n||r.length>0)&&(r.push(n.trim()),r.some(l=>l!=="")&&t.push(r),r=[],n=""),s==="\r"&&o===`
`&&a++):n+=s}return(n||r.length>0)&&(r.push(n.trim()),r.some(a=>a!=="")&&t.push(r)),t}function sQ(e,t=[]){const r=[];(!e.client_name||e.client_name.trim()==="")&&r.push("client_name is required"),(!e.lead_source_name||e.lead_source_name.trim()==="")&&r.push("lead_source_name is required");const n=["buyer","seller","buyer_and_seller","renter","landlord"];if((!e.deal_type||!n.includes(e.deal_type))&&r.push(`deal_type must be one of: ${n.join(", ")}`),!e.pipeline_status||e.pipeline_status.trim()==="")r.push("pipeline_status is required");else if(t.length>0){const i=e.pipeline_status.toLowerCase().trim();t.includes(i)||r.push(`pipeline_status must be one of your configured statuses: ${t.join(", ")}`)}return{valid:r.length===0,errors:r}}function oQ(e,t){const r={};return e.forEach((n,i)=>{const a=t[i]||"";r[n]=a}),r}function lQ({onClose:e,onSuccess:t}){const{user:r}=gt(),[n,i]=m.useState(null),[a,s]=m.useState(!1),[o,l]=m.useState(null),u=async()=>{if(!r)return;const{data:h}=await X.from("pipeline_statuses").select("name").eq("user_id",r.id).order("sort_order"),p=(h==null?void 0:h.map(v=>v.name))||[],g=nQ(p);iQ(g,"deals-import-example.csv")},d=h=>{var g;const p=(g=h.target.files)==null?void 0:g[0];p&&p.type==="text/csv"?(i(p),l(null)):alert("Please select a valid CSV file")},f=async()=>{var h,p,g,v,y,x;if(!(!n||!r)){s(!0),l(null);try{const w=await n.text(),b=aQ(w);if(b.length<2){alert("CSV file must contain a header row and at least one data row"),s(!1);return}const _=b[0].map(K=>K.toLowerCase().trim()),j=b.slice(1),{data:S}=await X.from("lead_sources").select("id, name").eq("user_id",r.id),k=new Map((S==null?void 0:S.map(K=>[K.name.toLowerCase(),K.id]))||[]),{data:N}=await X.from("pipeline_statuses").select("id, name").eq("user_id",r.id),C=new Map((N==null?void 0:N.map(K=>[K.name.toLowerCase(),K.id]))||[]),{data:E}=await X.from("user_settings").select("default_brokerage_split_rate").eq("user_id",r.id).single(),P=(E==null?void 0:E.default_brokerage_split_rate)||.2;let I=0,W=0;const F=[];for(let K=0;K<j.length;K++){const U=oQ(_,j[K]),H=sQ(U,Array.from(C.keys()));if(!H.valid){W++,F.push({row:K+2,errors:H.errors});continue}const R=k.get(U.lead_source_name.toLowerCase().trim());if(!R){W++,F.push({row:K+2,errors:[`Lead source "${U.lead_source_name}" not found. Please create it in Lead Sources settings first.`]});continue}let B=null,G="new_lead";if(U.pipeline_status&&U.pipeline_status.trim()!==""){B=C.get(U.pipeline_status.toLowerCase().trim())||null;const A=U.pipeline_status.toLowerCase().trim();A==="closed"?G="closed":A==="dead"&&(G="dead")}let ae=null;if(U.close_date&&U.close_date.trim()!==""&&(ae=rQ(U.close_date),!ae)){W++,F.push({row:K+2,errors:[`Close date "${U.close_date}" is not recognized. Use formats like YYYY-MM-DD, MM/DD/YYYY, or December 15, 2024.`]});continue}const Q={user_id:r.id,client_name:U.client_name.trim(),client_phone:((h=U.client_phone)==null?void 0:h.trim())||null,client_email:((p=U.client_email)==null?void 0:p.trim())||null,property_address:((g=U.property_address)==null?void 0:g.trim())||null,city:((v=U.city)==null?void 0:v.trim())||null,state:((y=U.state)==null?void 0:y.trim())||null,zip:((x=U.zip)==null?void 0:x.trim())||null,deal_type:U.deal_type.trim(),lead_source_id:R,pipeline_status_id:B,status:G,expected_sale_price:U.expected_sale_price&&U.expected_sale_price.trim()!==""?Number(U.expected_sale_price):null,actual_sale_price:U.actual_sale_price&&U.actual_sale_price.trim()!==""?Number(U.actual_sale_price):null,gross_commission_rate:U.gross_commission_rate&&U.gross_commission_rate.trim()!==""?Number(U.gross_commission_rate):.03,brokerage_split_rate:U.brokerage_split_rate&&U.brokerage_split_rate.trim()!==""?Number(U.brokerage_split_rate):P,referral_out_rate:U.referral_out_rate&&U.referral_out_rate.trim()!==""?Number(U.referral_out_rate):null,referral_in_rate:U.referral_in_rate&&U.referral_in_rate.trim()!==""?Number(U.referral_in_rate):null,transaction_fee:U.transaction_fee&&U.transaction_fee.trim()!==""?Number(U.transaction_fee):0,close_date:ae,stage_entered_at:new Date().toISOString(),closed_at:G==="closed"?new Date().toISOString():null},{error:ge}=await X.from("deals").insert(Q);ge?(W++,F.push({row:K+2,errors:[ge.message]})):I++}l({success:I,failed:W,errors:F})}catch(w){console.error("Import error:",w),alert("An error occurred while importing. Please check your file format.")}finally{s(!1)}}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Import Deals from CSV"}),c.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition",children:c.jsx(oo,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How to Import Deals"}),c.jsxs("ol",{className:"text-sm text-blue-800 space-y-1 list-decimal list-inside",children:[c.jsx("li",{children:"Download the example CSV file to see the required format"}),c.jsx("li",{children:"Fill in your deal data following the example structure"}),c.jsx("li",{children:"Save your file as CSV format"}),c.jsx("li",{children:"Upload your CSV file using the button below"})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Step 1: Download Example"}),c.jsxs("button",{onClick:u,className:"w-full px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg flex items-center justify-center space-x-2 transition",children:[c.jsx(gL,{className:"w-5 h-5"}),c.jsx("span",{children:"Download Example CSV"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Step 2: Upload Your CSV"}),c.jsxs("label",{className:"block w-full px-4 py-8 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 cursor-pointer transition text-center",children:[c.jsx("input",{type:"file",accept:".csv",onChange:d,className:"hidden",disabled:a}),c.jsx(vg,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),c.jsx("div",{className:"text-sm text-gray-600",children:n?c.jsx("span",{className:"font-medium text-blue-600",children:n.name}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"font-medium text-blue-600",children:"Click to upload"})," ","or drag and drop"]})}),c.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"CSV files only"})]})]}),n&&!o&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Step 3: Import"}),c.jsx("button",{onClick:f,disabled:a,className:"w-full px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg flex items-center justify-center space-x-2 transition",children:a?c.jsxs(c.Fragment,{children:[c.jsx(wL,{className:"w-5 h-5 animate-spin"}),c.jsx("span",{children:"Importing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(vg,{className:"w-5 h-5"}),c.jsx("span",{children:"Import Deals"})]})})]}),o&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Import Results"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-green-50 rounded-lg p-3 flex items-center space-x-3",children:[c.jsx(Gi,{className:"w-6 h-6 text-green-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.success}),c.jsx("div",{className:"text-xs text-gray-600",children:"Successfully Imported"})]})]}),c.jsxs("div",{className:"bg-red-50 rounded-lg p-3 flex items-center space-x-3",children:[c.jsx(ni,{className:"w-6 h-6 text-red-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-red-600",children:o.failed}),c.jsx("div",{className:"text-xs text-gray-600",children:"Failed"})]})]})]})]}),o.errors.length>0&&c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-h-64 overflow-y-auto",children:[c.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"Errors"}),c.jsx("div",{className:"space-y-2",children:o.errors.map((h,p)=>c.jsxs("div",{className:"text-sm",children:[c.jsxs("div",{className:"font-medium text-red-800",children:["Row ",h.row,":"]}),c.jsx("ul",{className:"list-disc list-inside text-red-700 ml-2",children:h.errors.map((g,v)=>c.jsx("li",{children:g},v))})]},p))})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:()=>{i(null),l(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Import Another File"}),c.jsx("button",{onClick:()=>{o.success>0&&t(),e()},className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition",children:"Done"})]})]})]}),c.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Required Fields"}),c.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[c.jsxs("li",{children:[c.jsx("span",{className:"font-medium",children:"client_name:"})," Client's full name"]}),c.jsxs("li",{children:[c.jsx("span",{className:"font-medium",children:"lead_source_name:"})," Must match one of your configured lead sources"]}),c.jsxs("li",{children:[c.jsx("span",{className:"font-medium",children:"deal_type:"})," buyer, seller, buyer_and_seller, renter, or landlord"]}),c.jsxs("li",{children:[c.jsx("span",{className:"font-medium",children:"pipeline_status:"})," Must match one of your configured pipeline statuses"]})]}),c.jsx("div",{className:"mt-3 text-xs text-gray-600",children:"Note: Property address and price are optional. Lead source and pipeline status names must match exactly or the import will fail."})]})]})]})})}const cQ=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),bu=e=>e==null||Number.isNaN(e)?"":cQ.format(e),wu=e=>e==null||Number.isNaN(e)?"":`${(e*100).toFixed(1)}%`,as=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},kj=e=>e?e.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "):"",Is=[{id:"client",label:"Client",defaultVisible:!0,cellClassName:"px-4 py-4 align-top whitespace-nowrap cursor-pointer",render:({deal:e})=>c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.client_name||""}),e.client_email&&c.jsx("div",{className:"text-xs text-gray-500",children:e.client_email}),e.client_phone&&c.jsx("div",{className:"text-xs text-gray-500",children:e.client_phone})]})},{id:"clientEmail",label:"Client Email",cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>c.jsx("span",{className:e.client_email?"text-gray-700":"text-gray-400",children:e.client_email||""})},{id:"clientPhone",label:"Client Phone",cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>c.jsx("span",{className:e.client_phone?"text-gray-700":"text-gray-400",children:e.client_phone||""})},{id:"property",label:"Property",defaultVisible:!0,cellClassName:"px-4 py-4 text-sm text-gray-900 cursor-pointer min-w-[220px]",render:({deal:e})=>c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx(w2,{className:"w-4 h-4 text-gray-400 flex-shrink-0 mt-0.5"}),c.jsxs("div",{children:[c.jsx("div",{children:e.property_address||""}),(e.city||e.state)&&c.jsx("div",{className:"text-xs text-gray-500",children:[e.city,e.state].filter(Boolean).join(", ")})]})]})},{id:"city",label:"City",cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>c.jsx("span",{className:e.city?"text-gray-700":"text-gray-400",children:e.city||""})},{id:"state",label:"State",cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>c.jsx("span",{className:e.state?"text-gray-700":"text-gray-400",children:e.state||""})},{id:"zip",label:"ZIP",cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>c.jsx("span",{className:e.zip?"text-gray-700":"text-gray-400",children:e.zip||""})},{id:"dealType",label:"Deal Type",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap cursor-pointer",render:({deal:e})=>{const t=e.deal_type==="buyer"?"bg-blue-100 text-blue-700":e.deal_type==="seller"?"bg-green-100 text-green-700":e.deal_type==="buyer_and_seller"?"bg-purple-100 text-purple-700":e.deal_type==="renter"?"bg-orange-100 text-orange-700":e.deal_type==="landlord"?"bg-teal-100 text-teal-700":"bg-gray-100 text-gray-700",r=e.deal_type==="buyer"?"Buyer":e.deal_type==="seller"?"Seller":e.deal_type==="buyer_and_seller"?"Both":e.deal_type==="renter"?"Renter":e.deal_type==="landlord"?"Landlord":kj(e.deal_type);return c.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${t}`,children:r})}},{id:"pipelineStatus",label:"Pipeline Status",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap cursor-pointer",render:({deal:e,getStatusForDeal:t})=>{const r=t(e);if(!r)return c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-700",children:"No Status"});const n=qf(r.color);return c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",style:{backgroundColor:n.bg,color:n.text},children:r.name})}},{id:"status",label:"System Status",cellClassName:"px-4 py-4 whitespace-nowrap cursor-pointer",render:({deal:e})=>c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-700",children:kj(e.status)})},{id:"leadSource",label:"Lead Source",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>{var t,r;return c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(C2,{className:"w-4 h-4 text-gray-400"}),c.jsx("span",{className:(t=e.lead_sources)!=null&&t.name?"text-gray-900":"text-gray-400",children:((r=e.lead_sources)==null?void 0:r.name)||""})]})}},{id:"expectedPrice",label:"Expected Price",defaultVisible:!0,headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 cursor-pointer text-right",render:({deal:e})=>c.jsx("span",{children:bu(e.actual_sale_price||e.expected_sale_price)})},{id:"actualPrice",label:"Actual Price",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 cursor-pointer text-right",render:({deal:e})=>c.jsx("span",{children:bu(e.actual_sale_price)})},{id:"netCommission",label:"Net Commission",defaultVisible:!0,headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm font-semibold text-green-600 cursor-pointer text-right",render:({deal:e,calculateNetCommission:t})=>c.jsx("span",{children:bu(t(e))})},{id:"grossCommissionRate",label:"Commission %",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer text-right",render:({deal:e})=>c.jsx("span",{children:wu(e.gross_commission_rate)})},{id:"brokerageSplitRate",label:"Broker Split %",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer text-right",render:({deal:e})=>c.jsx("span",{children:wu(e.brokerage_split_rate)})},{id:"referralOutRate",label:"Referral Out %",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer text-right",render:({deal:e})=>c.jsx("span",{children:wu(e.referral_out_rate)})},{id:"referralInRate",label:"Referral In %",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer text-right",render:({deal:e})=>c.jsx("span",{children:wu(e.referral_in_rate)})},{id:"transactionFee",label:"Transaction Fee",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 cursor-pointer text-right",render:({deal:e})=>c.jsx("span",{children:bu(e.transaction_fee)})},{id:"daysInStage",label:"Days in Stage",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 cursor-pointer",render:({deal:e,getDaysInStage:t})=>c.jsxs("div",{className:"flex items-center justify-start gap-2",children:[c.jsx(Rl,{className:"w-4 h-4 text-gray-400"}),c.jsxs("span",{children:[t(e.stage_entered_at)," days"]})]})},{id:"stageEnteredAt",label:"Stage Entered",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>c.jsx("span",{children:as(e.stage_entered_at)})},{id:"closeDate",label:"Close Date",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>c.jsx("span",{children:as(e.close_date)})},{id:"closedAt",label:"Closed On",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>c.jsx("span",{children:as(e.closed_at)})},{id:"nextTaskDescription",label:"Next Task",cellClassName:"px-4 py-4 text-sm text-gray-700 cursor-pointer min-w-[200px]",render:({deal:e})=>c.jsx("span",{className:e.next_task_description?"text-gray-700":"text-gray-400",children:e.next_task_description||""})},{id:"nextTaskDueDate",label:"Next Task Due",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>c.jsx("span",{children:as(e.next_task_due_date)})},{id:"createdAt",label:"Created",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Il,{className:"w-4 h-4 text-gray-400"}),c.jsx("span",{children:as(e.created_at)})]})},{id:"updatedAt",label:"Updated",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>c.jsx("span",{children:as(e.updated_at)})}],Nj="pipeline-table-columns-v1",Ej=new Set(Is.map(e=>e.id)),Cj=new Map(Is.map((e,t)=>[e.id,t])),am=Is.filter(e=>e.defaultVisible).map(e=>e.id),sm=e=>[...e].sort((t,r)=>(Cj.get(t)??0)-(Cj.get(r)??0));function uQ({deals:e,statuses:t,onDealClick:r,calculateNetCommission:n,getDaysInStage:i,onBulkDelete:a,onBulkEdit:s,onImportSuccess:o}){const[l,u]=m.useState(new Set),[d,f]=m.useState(!1),[h,p]=m.useState(""),[g,v]=m.useState(""),[y,x]=m.useState(!1),[w,b]=m.useState(!1),[_,j]=m.useState({column:"pipelineOrder",direction:"asc"}),[S,k]=m.useState(()=>{if(typeof window>"u")return am;try{const A=window.localStorage.getItem(Nj);if(A){const re=JSON.parse(A).filter(he=>Ej.has(he));if(re.length>0)return sm(re)}}catch{}return am});m.useEffect(()=>{typeof window>"u"||window.localStorage.setItem(Nj,JSON.stringify(S))},[S]);const N=A=>{k(J=>J.includes(A)?J.length===1?J:J.filter(re=>re!==A):sm([...J,A]))},C=()=>k(sm(Array.from(Ej))),E=()=>k(am),P=Is.filter(A=>S.includes(A.id)),I=P.length+1,W=A=>{const J=new Set(l);J.has(A)?J.delete(A):J.add(A),u(J)},F=()=>{l.size===G.length?u(new Set):u(new Set(G.map(A=>A.id)))},K=()=>{a&&l.size>0&&(a(Array.from(l)),u(new Set))},U=()=>{s&&l.size>0&&h&&(s(Array.from(l),{pipeline_status_id:h}),u(new Set),f(!1),p(""))},H=m.useMemo(()=>new Map(t.map((A,J)=>[A.id,J])),[t]),R=A=>t.find(J=>J.id===A.pipeline_status_id),G=m.useMemo(()=>{let A=e;if(g.trim()){const O=g.toLowerCase(),L=Y=>Y?Y.toLowerCase().includes(O):!1;A=A.filter(Y=>{var M;return L(Y.client_name)||L(Y.property_address)||L(Y.city)||L(Y.state)||L(Y.client_email)||L(Y.client_phone)||L((M=Y.lead_sources)==null?void 0:M.name)})}const J=O=>{if(!O.stage_entered_at)return null;const L=new Date(O.stage_entered_at).getTime();return Number.isNaN(L)?null:Date.now()-L},re=(O,L)=>{var M;const Y=Se=>Se?Se.toLowerCase():null;switch(L){case"pipelineOrder":return H.get(O.pipeline_status_id||"")??9999;case"client":return Y(O.client_name);case"clientEmail":return Y(O.client_email);case"clientPhone":return Y(O.client_phone);case"property":return Y(O.property_address);case"city":return Y(O.city);case"state":return Y(O.state);case"zip":return Y(O.zip);case"dealType":return Y(O.deal_type);case"pipelineStatus":return H.get(O.pipeline_status_id||"")??9999;case"status":return Y(O.status);case"leadSource":return Y(((M=O.lead_sources)==null?void 0:M.name)||O.lead_source_name);case"expectedPrice":return O.expected_sale_price??null;case"actualPrice":return O.actual_sale_price??null;case"netCommission":return n(O);case"grossCommissionRate":return O.gross_commission_rate??null;case"brokerageSplitRate":return O.brokerage_split_rate??null;case"referralOutRate":return O.referral_out_rate??null;case"referralInRate":return O.referral_in_rate??null;case"transactionFee":return O.transaction_fee??null;case"daysInStage":return J(O);case"stageEnteredAt":return O.stage_entered_at?new Date(O.stage_entered_at).getTime():null;case"closeDate":return O.close_date?new Date(O.close_date).getTime():null;case"closedAt":return O.closed_at?new Date(O.closed_at).getTime():null;case"nextTaskDueDate":return O.next_task_due_date?new Date(O.next_task_due_date).getTime():null;case"nextTaskDescription":return Y(O.next_task_description);case"createdAt":return O.created_at?new Date(O.created_at).getTime():null;case"updatedAt":return O.updated_at?new Date(O.updated_at).getTime():null;default:return Y(O[L])}},he=(O,L)=>O==null?L==null?0:1:L==null?-1:typeof O=="number"&&typeof L=="number"?O-L:String(O).localeCompare(String(L));return[...A].sort((O,L)=>{const Y=_.column,M=re(O,Y),Se=re(L,Y),D=he(M,Se);if(D!==0)return D*(_.direction==="asc"?1:-1);const ce=new Date(L.created_at).getTime()-new Date(O.created_at).getTime();return _.direction==="asc"?ce:-ce})},[e,g,_,H,n]),ae=_.column==="pipelineOrder"?"pipelineStatus":_.column,Q=A=>{const J=A==="pipelineStatus"?"pipelineOrder":A;j(re=>re.column===J?{column:J,direction:re.direction==="asc"?"desc":"asc"}:{column:J,direction:"asc"})},ge=A=>ae===A||_.column==="pipelineOrder"&&A==="pipelineStatus"?c.jsx("span",{className:"text-[11px] font-semibold text-gray-500",children:_.direction==="asc"?"":""}):c.jsx(uL,{className:"w-3 h-3 text-gray-300"});return c.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[c.jsxs("div",{className:"p-4 border-b border-gray-200 space-y-3",children:[c.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(k2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),c.jsx("input",{type:"text",value:g,onChange:A=>v(A.target.value),placeholder:"Search by client, property, city, or lead source...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:()=>b(A=>!A),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition whitespace-nowrap",children:[c.jsx(E2,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden sm:inline",children:"Columns"}),c.jsx("span",{className:"sm:hidden",children:"Cols"})]}),c.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-4 py-2 bg-[rgb(0,122,255)] hover:bg-[rgb(0,110,230)] text-white rounded-lg transition-colors whitespace-nowrap",children:[c.jsx(vg,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden sm:inline",children:"Import Deals"}),c.jsx("span",{className:"sm:hidden",children:"Import"})]})]})]}),w&&c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[c.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["Visible Columns (",S.length," of ",Is.length,")"]}),c.jsx("p",{className:"text-xs text-gray-500",children:"Choose which deal fields appear in the table."})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:C,className:"px-3 py-1.5 text-xs font-medium text-gray-600 border border-gray-300 rounded-lg hover:bg-white",children:"Select All"}),c.jsx("button",{onClick:E,className:"px-3 py-1.5 text-xs font-medium text-gray-600 border border-gray-300 rounded-lg hover:bg-white",children:"Reset Defaults"}),c.jsx("button",{onClick:()=>b(!1),className:"px-3 py-1.5 text-xs font-medium text-blue-600",children:"Done"})]})]}),c.jsx("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:Is.map(A=>c.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 bg-white border border-gray-200 rounded-lg px-3 py-2",children:[c.jsx("input",{type:"checkbox",checked:S.includes(A.id),onChange:()=>N(A.id),className:"text-blue-600 rounded"}),c.jsx("span",{children:A.label})]},A.id))})]})]}),l.size>0&&c.jsxs("div",{className:"bg-sky-50 border-b border-sky-200 px-4 py-3 flex items-center justify-between",children:[c.jsxs("div",{className:"text-sm font-medium text-sky-900",children:[l.size," deal",l.size>1?"s":""," selected"]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:()=>f(!d),className:"px-3 py-1.5 bg-white border border-sky-300 text-sky-700 rounded-lg hover:bg-sky-50 transition flex items-center gap-2 text-sm",children:[c.jsx(kL,{className:"w-4 h-4"}),"Update Status"]}),c.jsxs("button",{onClick:K,className:"px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded-lg transition flex items-center gap-2 text-sm",children:[c.jsx(La,{className:"w-4 h-4"}),"Delete"]})]})]}),d&&l.size>0&&c.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center gap-3",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Update status to:"}),c.jsxs("select",{value:h,onChange:A=>p(A.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent text-sm",children:[c.jsx("option",{value:"",children:"Select status..."}),t.map(A=>c.jsx("option",{value:A.id,children:A.name},A.id))]}),c.jsx("button",{onClick:U,disabled:!h,className:"px-4 py-1.5 bg-sky-600 hover:bg-sky-700 text-white rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Apply"}),c.jsx("button",{onClick:()=>{f(!1),p("")},className:"px-4 py-1.5 text-gray-600 hover:text-gray-800 text-sm",children:"Cancel"})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-4 py-3 text-left",children:c.jsx("input",{type:"checkbox",checked:G.length>0&&l.size===G.length,onChange:F,className:"w-4 h-4 text-sky-600 border-gray-300 rounded focus:ring-sky-500 cursor-pointer"})}),P.map(A=>c.jsx("th",{scope:"col",className:`px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider ${A.headerClassName||""}`,children:c.jsxs("button",{type:"button",onClick:()=>Q(A.id),className:"flex items-center gap-1 text-left uppercase tracking-wider text-[11px]",children:[c.jsx("span",{children:A.label}),ge(A.id)]})},A.id))]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:G.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:I,className:"px-4 py-8 text-center text-sm text-gray-500",children:"No deals yet. Create your first deal to get started!"})}):G.map(A=>c.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap",onClick:J=>J.stopPropagation(),children:c.jsx("input",{type:"checkbox",checked:l.has(A.id),onChange:()=>W(A.id),className:"w-4 h-4 text-sky-600 border-gray-300 rounded focus:ring-sky-500 cursor-pointer"})}),P.map(J=>c.jsx("td",{className:J.cellClassName||"px-4 py-4 text-sm text-gray-900 cursor-pointer",onClick:()=>!J.disableClick&&r(A),children:J.render({deal:A,onDealClick:r,calculateNetCommission:n,getDaysInStage:i,getStatusForDeal:R})},J.id))]},A.id))})]})}),y&&c.jsx(lQ,{onClose:()=>x(!1),onSuccess:()=>{x(!1),o==null||o()}})]})}function dQ({dealId:e}){const{user:t}=gt(),[r,n]=m.useState([]),[i,a]=m.useState(!0),[s,o]=m.useState(!1),[l,u]=m.useState(null),[d,f]=m.useState(!1),[h,p]=m.useState("");m.useEffect(()=>{g()},[e]);const g=async()=>{try{const{data:_,error:j}=await X.from("deal_notes").select("*").eq("deal_id",e).order("created_at",{ascending:!1});if(j)throw j;const S=(_||[]).map(k=>{var N,C;return{...k,user_email:t==null?void 0:t.email,user_name:k.user_id===(t==null?void 0:t.id)?((N=t==null?void 0:t.user_metadata)==null?void 0:N.name)||((C=t==null?void 0:t.email)==null?void 0:C.split("@")[0])||"You":"Team Member"}});n(S)}catch(_){console.error("Error loading notes:",_)}finally{a(!1)}},v=async()=>{if(!(!t||!h.trim())){o(!0);try{if(l){const{error:_}=await X.from("deal_notes").update({content:h,updated_at:new Date().toISOString()}).eq("id",l.id);if(_)throw _}else{const{error:_}=await X.from("deal_notes").insert({deal_id:e,user_id:t.id,content:h});if(_)throw _}p(""),u(null),f(!1),g()}catch(_){console.error("Error saving note:",_)}finally{o(!1)}}},y=async _=>{if(confirm("Are you sure you want to delete this note?"))try{const{error:j}=await X.from("deal_notes").delete().eq("id",_);if(j)throw j;g()}catch(j){console.error("Error deleting note:",j)}},x=_=>{u(_),p(_.content),f(!0)},w=()=>{u(null),p(""),f(!1)},b=_=>{const j=new Date(_),k=new Date().getTime()-j.getTime(),N=Math.floor(k/6e4),C=Math.floor(k/36e5),E=Math.floor(k/864e5);return N<1?"Just now":N<60?`${N}m ago`:C<24?`${C}h ago`:E<7?`${E}d ago`:j.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};return i?c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsx(pr,{className:"w-6 h-6 animate-spin text-[rgb(0,122,255)]"})}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(SL,{className:"w-5 h-5 text-gray-600",strokeWidth:2}),c.jsx("h3",{className:"font-semibold text-gray-900",children:"Notes"}),c.jsxs("span",{className:"text-sm text-gray-500",children:["(",r.length,")"]})]}),!d&&c.jsxs("button",{onClick:()=>f(!0),className:"hig-btn-secondary text-sm py-2",children:[c.jsx(Yi,{className:"w-4 h-4",strokeWidth:2}),c.jsx("span",{children:"Add Note"})]})]}),d&&c.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200/60",children:[c.jsx("textarea",{value:h,onChange:_=>p(_.target.value),placeholder:"Write a note...",className:"hig-input min-h-[100px] resize-y",autoFocus:!0}),c.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[c.jsx("button",{onClick:w,className:"hig-btn-secondary text-sm py-2",disabled:s,children:"Cancel"}),c.jsx("button",{onClick:v,disabled:s||!h.trim(),className:"hig-btn-primary text-sm py-2",children:s?c.jsxs(c.Fragment,{children:[c.jsx(pr,{className:"w-4 h-4 animate-spin",strokeWidth:2}),c.jsx("span",{children:"Saving..."})]}):c.jsxs("span",{children:[l?"Update":"Add"," Note"]})})]})]}),r.length===0?c.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:"No notes yet. Add your first note to track important information."}):c.jsx("div",{className:"space-y-3",children:r.map(_=>c.jsxs("div",{className:"bg-white border border-gray-200/60 rounded-xl p-4 hover:shadow-sm transition-all",children:[c.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"flex items-center gap-2 text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-gray-900",children:_.user_name}),c.jsx("span",{className:"text-gray-400",children:""}),c.jsx("span",{className:"text-gray-500",children:b(_.created_at)}),_.updated_at!==_.created_at&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-gray-400",children:""}),c.jsx("span",{className:"text-gray-500 text-xs",children:"edited"})]})]})}),_.user_id===(t==null?void 0:t.id)&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:()=>x(_),className:"p-1.5 text-gray-600 hover:text-[rgb(0,122,255)] hover:bg-blue-50 rounded-lg transition",title:"Edit note",children:c.jsx(j2,{className:"w-4 h-4",strokeWidth:2})}),c.jsx("button",{onClick:()=>y(_.id),className:"p-1.5 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete note",children:c.jsx(La,{className:"w-4 h-4",strokeWidth:2})})]})]}),c.jsx("p",{className:"text-[15px] text-gray-700 whitespace-pre-wrap leading-relaxed",children:_.content})]},_.id))})]})}function RT({deal:e,onClose:t,onDelete:r}){const{user:n}=gt(),[i,a]=m.useState(!1),[s,o]=m.useState(!1),[l,u]=m.useState([]),[d,f]=m.useState([]),[h,p]=m.useState([]),[g,v]=m.useState(""),[y,x]=m.useState(""),[w,b]=m.useState(!1),[_,j]=m.useState(null),[S,k]=m.useState(""),[N,C]=m.useState(""),[E,P]=m.useState({client_name:(e==null?void 0:e.client_name)||"",client_phone:(e==null?void 0:e.client_phone)||"",client_email:(e==null?void 0:e.client_email)||"",property_address:(e==null?void 0:e.property_address)||"",city:(e==null?void 0:e.city)||"",state:(e==null?void 0:e.state)||"",zip:(e==null?void 0:e.zip)||"",deal_type:(e==null?void 0:e.deal_type)||"buyer",lead_source_id:(e==null?void 0:e.lead_source_id)||"",pipeline_status_id:(e==null?void 0:e.pipeline_status_id)||"",expected_sale_price:(e==null?void 0:e.expected_sale_price)||"",actual_sale_price:(e==null?void 0:e.actual_sale_price)||"",gross_commission_rate:(e==null?void 0:e.gross_commission_rate)||.03,brokerage_split_rate:(e==null?void 0:e.brokerage_split_rate)||.2,referral_out_rate:(e==null?void 0:e.referral_out_rate)||"",referral_in_rate:(e==null?void 0:e.referral_in_rate)||"",transaction_fee:(e==null?void 0:e.transaction_fee)||"",close_date:(e==null?void 0:e.close_date)||""});m.useEffect(()=>{I(),W(),e&&F()},[e]);const I=async()=>{if(!n)return;const{data:D}=await X.from("lead_sources").select("*").eq("user_id",n.id).order("name");D&&u(D)},W=async()=>{if(!n)return;const{data:D}=await X.from("pipeline_statuses").select("*").eq("user_id",n.id).order("sort_order");D&&(f(D),!e&&D.length>0&&!E.pipeline_status_id&&P(ce=>({...ce,pipeline_status_id:D[0].id})))},F=async()=>{if(!e||!n)return;const{data:D}=await X.from("tasks").select("*").eq("deal_id",e.id).eq("user_id",n.id);if(D){const ce=D.sort((ve,q)=>!ve.due_date&&!q.due_date?0:ve.due_date?q.due_date?new Date(ve.due_date).getTime()-new Date(q.due_date).getTime():1:-1);p(ce)}},K=D=>{P({...E,lead_source_id:D});const ce=l.find(ve=>ve.id===D);ce&&!e&&P(ve=>({...ve,lead_source_id:D,brokerage_split_rate:ce.brokerage_split_rate}))},U=async D=>{if(D.preventDefault(),!n)return;a(!0);const ce=d.find(q=>q.id===E.pipeline_status_id);if(!E.lead_source_id){alert("Please select a lead source"),a(!1);return}const ve={...E,user_id:n.id,lead_source_id:E.lead_source_id,pipeline_status_id:E.pipeline_status_id||null,status:ce?(ce.slug||ce.name||"new_lead").toLowerCase():"new_lead",expected_sale_price:Number(E.expected_sale_price)||0,actual_sale_price:E.actual_sale_price?Number(E.actual_sale_price):null,referral_out_rate:E.referral_out_rate?Number(E.referral_out_rate):null,referral_in_rate:E.referral_in_rate?Number(E.referral_in_rate):null,transaction_fee:Number(E.transaction_fee)||0,close_date:E.close_date||null};e?await X.from("deals").update(ve).eq("id",e.id):await X.from("deals").insert(ve),a(!1),t()},H=async()=>{!g.trim()||!e||!n||(await X.from("tasks").insert({deal_id:e.id,user_id:n.id,title:g,due_date:y||null,completed:!1}),v(""),x(""),b(!1),F())},R=async(D,ce)=>{await X.from("tasks").update({completed:!ce}).eq("id",D),F()},B=D=>{j(D.id),k(D.title),C(D.due_date||"")},G=async()=>{!S.trim()||!_||(await X.from("tasks").update({title:S,due_date:N||null}).eq("id",_),j(null),k(""),C(""),F())},ae=async D=>{await X.from("tasks").delete().eq("id",D),F()},Q=()=>{j(null),k(""),C("")},ge=async()=>{e&&(a(!0),await X.from("deals").delete().eq("id",e.id),a(!1),r&&r(),t())},A=()=>{if(!e)return;const D={client_name:E.client_name,client_email:E.client_email,client_phone:E.client_phone,property_address:E.property_address,city:E.city,state:E.state,zip:E.zip,deal_type:E.deal_type,expected_sale_price:E.expected_sale_price,actual_sale_price:E.actual_sale_price},ce=new URLSearchParams({source:"pipelineiq",...Object.entries(D).reduce((ve,[q,xe])=>(xe!=null&&xe!==""&&(ve[q]=String(xe)),ve),{})});window.open(`/contractscribe?${ce.toString()}`,"_blank","noopener,noreferrer")},re=(Number(E.actual_sale_price)||Number(E.expected_sale_price)||0)*E.gross_commission_rate,he=re*(1-E.brokerage_split_rate),_e=Number(E.referral_out_rate)||0,O=Number(E.referral_in_rate)||0,L=Number(E.transaction_fee)||0,Y=_e?he*(1-_e):he,Se=(O?Y*(1+O):Y)-L;return c.jsxs(c.Fragment,{children:[s&&c.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-[60]",children:c.jsxs("div",{className:"hig-card max-w-md w-full p-6",children:[c.jsx("h3",{className:"hig-text-heading mb-2",children:"Delete Deal"}),c.jsx("p",{className:"hig-text-body text-gray-600 mb-6",children:"Are you sure you want to delete this deal? This action cannot be undone."}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx("button",{onClick:()=>o(!1),className:"hig-btn-secondary",children:"Cancel"}),c.jsx("button",{onClick:ge,disabled:i,className:"bg-[rgb(255,59,48)] hover:bg-red-600 active:bg-red-700 text-white font-medium px-5 py-2 rounded-lg transition-colors duration-150 disabled:opacity-40 text-[15px] min-h-[44px] inline-flex items-center justify-center gap-2",children:i?"Deleting...":"Delete"})]})]})}),c.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"hig-card max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200/60 px-6 py-5 flex justify-between items-center backdrop-blur-md bg-white/95",children:[c.jsx("h2",{className:"hig-text-display",children:e?"Edit Deal":"New Deal"}),c.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-150",children:c.jsx(oo,{className:"w-5 h-5 text-gray-600",strokeWidth:2})})]}),c.jsxs("form",{onSubmit:U,className:"p-6 space-y-8",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"hig-text-heading mb-4",children:"Client Information"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"Client Name *"}),c.jsx("input",{type:"text",value:E.client_name,onChange:D=>P({...E,client_name:D.target.value}),className:"hig-input",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"Phone"}),c.jsx("input",{type:"tel",value:E.client_phone,onChange:D=>P({...E,client_phone:D.target.value}),className:"hig-input"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"Email"}),c.jsx("input",{type:"email",value:E.client_email,onChange:D=>P({...E,client_email:D.target.value}),className:"hig-input"})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"hig-text-heading mb-4",children:"Property Details"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"hig-label",children:"Property Address"}),c.jsx("input",{type:"text",value:E.property_address,onChange:D=>P({...E,property_address:D.target.value}),className:"hig-input",placeholder:"e.g., 123 Main St"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"City"}),c.jsx("input",{type:"text",value:E.city,onChange:D=>P({...E,city:D.target.value}),className:"hig-input"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"State"}),c.jsx("input",{type:"text",value:E.state,onChange:D=>P({...E,state:D.target.value}),className:"hig-input",maxLength:2,placeholder:"CA"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"ZIP"}),c.jsx("input",{type:"text",value:E.zip,onChange:D=>P({...E,zip:D.target.value}),className:"hig-input",maxLength:10})]})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"hig-text-heading mb-4",children:"Deal Configuration"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"Deal Type *"}),c.jsxs("select",{value:E.deal_type,onChange:D=>P({...E,deal_type:D.target.value}),className:"hig-input",children:[c.jsx("option",{value:"buyer",children:"Buyer"}),c.jsx("option",{value:"seller",children:"Seller"}),c.jsx("option",{value:"buyer_and_seller",children:"Buyer & Seller"}),c.jsx("option",{value:"renter",children:"Renter"}),c.jsx("option",{value:"landlord",children:"Landlord"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"Lead Source *"}),c.jsxs("select",{value:E.lead_source_id,onChange:D=>K(D.target.value),className:"hig-input",required:!0,children:[c.jsx("option",{value:"",children:"Select a source"}),l.map(D=>c.jsxs("option",{value:D.id,children:[D.name," (",(D.brokerage_split_rate*100).toFixed(0),"% split)"]},D.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"Pipeline Status"}),c.jsxs("select",{value:E.pipeline_status_id,onChange:D=>P({...E,pipeline_status_id:D.target.value}),className:"hig-input",children:[c.jsx("option",{value:"",children:"Select a status"}),d.map(D=>c.jsx("option",{value:D.id,children:D.name},D.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"Close Date"}),c.jsx("input",{type:"date",value:E.close_date,onChange:D=>P({...E,close_date:D.target.value}),className:"hig-input"})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"hig-text-heading mb-4",children:"Financial Details"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"Expected Sale Price *"}),c.jsx("input",{type:"number",value:E.expected_sale_price,onChange:D=>P({...E,expected_sale_price:D.target.value}),className:"hig-input",placeholder:"500,000",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"Actual Sale Price"}),c.jsx("input",{type:"number",value:E.actual_sale_price,onChange:D=>P({...E,actual_sale_price:D.target.value}),className:"hig-input",placeholder:"505,000"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"Commission Rate (%)"}),c.jsx("input",{type:"number",step:"0.01",value:E.gross_commission_rate*100,onChange:D=>P({...E,gross_commission_rate:parseFloat(D.target.value)/100||0}),className:"hig-input"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"Brokerage Split (% to broker)"}),c.jsx("input",{type:"number",step:"0.01",value:E.brokerage_split_rate*100,onChange:D=>P({...E,brokerage_split_rate:parseFloat(D.target.value)/100||0}),className:"hig-input"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"Transaction Fee"}),c.jsx("input",{type:"number",value:E.transaction_fee,onChange:D=>P({...E,transaction_fee:D.target.value}),className:"hig-input",placeholder:"500"})]})]})]})]}),c.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 border border-gray-200/60",children:[c.jsx("h3",{className:"hig-text-heading mb-4",children:"Commission Breakdown"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"hig-text-body text-gray-600",children:"Gross Commission"}),c.jsxs("span",{className:"hig-text-body font-medium",children:["$",re.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"hig-text-body text-gray-600",children:"After Brokerage Split"}),c.jsxs("span",{className:"hig-text-body font-medium",children:["$",he.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"hig-text-body text-gray-600",children:"Transaction Fee"}),c.jsxs("span",{className:"hig-text-body font-medium text-gray-500",children:["-$",L.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c.jsx("div",{className:"hig-divider my-3"}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"hig-text-heading",children:"Net to Agent"}),c.jsxs("span",{className:"text-xl font-semibold text-[rgb(52,199,89)]",children:["$",Se.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),e&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(y2,{className:"w-5 h-5 text-gray-600",strokeWidth:2}),c.jsx("h3",{className:"font-semibold text-gray-900",children:"Tasks"}),c.jsxs("span",{className:"text-sm text-gray-500",children:["(",h.length,")"]})]}),!w&&c.jsxs("button",{type:"button",onClick:()=>b(!0),className:"hig-btn-secondary text-sm py-2",children:[c.jsx(Yi,{className:"w-4 h-4",strokeWidth:2}),c.jsx("span",{children:"Add Task"})]})]}),w&&c.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200/60",children:c.jsxs("div",{className:"space-y-3",children:[c.jsx("input",{id:"task-title-input",type:"text",value:g,onChange:D=>v(D.target.value),placeholder:"Task description...",className:"hig-input",autoFocus:!0,onKeyPress:D=>{D.key==="Enter"&&(D.preventDefault(),H())}}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("input",{type:"date",value:y,onChange:D=>x(D.target.value),placeholder:"Due date (optional)",className:"hig-input flex-1"}),c.jsx("button",{type:"button",onClick:()=>{b(!1),v(""),x("")},className:"hig-btn-secondary text-sm py-2",children:"Cancel"}),c.jsx("button",{type:"button",onClick:H,disabled:!g.trim(),className:"hig-btn-primary text-sm py-2",children:c.jsx("span",{children:"Add Task"})})]})]})}),c.jsx("div",{className:"space-y-2",children:h.map(D=>{const ce=D.due_date&&!D.completed&&new Date(D.due_date)<new Date,ve=D.due_date&&!D.completed&&new Date(D.due_date).toDateString()===new Date().toDateString();return _===D.id?c.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200/60",children:c.jsxs("div",{className:"space-y-3",children:[c.jsx("input",{type:"text",value:S,onChange:q=>k(q.target.value),placeholder:"Task description...",className:"hig-input",autoFocus:!0,onKeyPress:q=>{q.key==="Enter"&&(q.preventDefault(),G())}}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("input",{type:"date",value:N,onChange:q=>C(q.target.value),placeholder:"Due date (optional)",className:"hig-input flex-1"}),c.jsx("button",{type:"button",onClick:Q,className:"hig-btn-secondary text-sm py-2",children:"Cancel"}),c.jsx("button",{type:"button",onClick:G,disabled:!S.trim(),className:"hig-btn-primary text-sm py-2",children:"Save"})]})]})},D.id):c.jsx("div",{className:"group flex items-center p-3 bg-white border border-gray-200/60 rounded-xl hover:shadow-sm transition-all",children:c.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[c.jsx("button",{type:"button",onClick:()=>R(D.id,D.completed),className:`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-all duration-150 ${D.completed?"bg-[rgb(52,199,89)] border-[rgb(52,199,89)]":"border-gray-300 hover:border-[rgb(52,199,89)]"}`,children:D.completed&&c.jsx(vd,{className:"w-3 h-3 text-white",strokeWidth:2.5})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("span",{className:D.completed?"line-through text-gray-500 hig-text-body":"text-gray-900 hig-text-body",children:D.title}),D.due_date&&c.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[c.jsx(Il,{className:"w-3.5 h-3.5 text-gray-400",strokeWidth:2}),c.jsxs("span",{className:`hig-text-caption ${ce?"text-[rgb(255,59,48)] font-medium":ve?"text-[rgb(255,149,0)] font-medium":D.completed?"text-gray-400":"text-gray-500"}`,children:[ce?"Overdue: ":ve?"Due today: ":"",new Date(D.due_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[c.jsx("button",{type:"button",onClick:()=>B(D),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",title:"Edit task",children:c.jsx(j2,{className:"w-4 h-4 text-gray-600",strokeWidth:2})}),c.jsx("button",{type:"button",onClick:()=>ae(D.id),className:"p-1.5 hover:bg-red-50 rounded-lg transition-colors",title:"Delete task",children:c.jsx(La,{className:"w-4 h-4 text-red-600",strokeWidth:2})})]})]})},D.id)})})]}),e&&c.jsx("div",{className:"pt-8 border-t border-gray-200/60",children:c.jsx(dQ,{dealId:e.id})}),c.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200/60",children:[c.jsx("div",{className:"flex gap-3",children:e&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{type:"button",onClick:A,className:"hig-btn-secondary gap-2",children:[c.jsx(x2,{className:"w-4 h-4",strokeWidth:2}),c.jsx("span",{children:"Generate Offer"})]}),c.jsxs("button",{type:"button",onClick:()=>o(!0),className:"bg-white hover:bg-red-50 active:bg-red-100 text-[rgb(255,59,48)] font-medium px-5 py-2 rounded-lg border border-red-200 transition-colors duration-150 text-[15px] min-h-[44px] inline-flex items-center justify-center gap-2",children:[c.jsx(La,{className:"w-4 h-4",strokeWidth:2}),c.jsx("span",{children:"Delete"})]})]})}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{type:"button",onClick:t,className:"hig-btn-secondary",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:i,className:"hig-btn-primary",children:i?"Saving...":e?"Update Deal":"Create Deal"})]})]})]})]})})]})}function MT(){const{user:e}=gt(),[t,r]=m.useState([]),[n,i]=m.useState(!0),[a,s]=m.useState(null),o=m.useCallback(async()=>{if(!e){r([]),i(!1);return}try{const{data:g,error:v}=await X.from("pipeline_statuses").select("*").eq("user_id",e.id).order("sort_order",{ascending:!0});if(v)throw v;r(g||[]),s(null)}catch(g){console.error("Error loading pipeline statuses:",g),s(g instanceof Error?g.message:"Failed to load statuses")}finally{i(!1)}},[e]);return m.useEffect(()=>{o()},[o]),{statuses:t,loading:n,error:a,addStatus:async(g,v="gray")=>{if(!e)return;const y=Math.max(...t.map(_=>_.sort_order),0),x=g.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),{data:w,error:b}=await X.from("pipeline_statuses").insert({user_id:e.id,name:g,slug:x,sort_order:y+1,color:v,is_default:!1}).select().single();if(b)throw b;return await o(),w},updateStatus:async(g,v)=>{const{error:y}=await X.from("pipeline_statuses").update(v).eq("id",g);if(y)throw y;await o()},deleteStatus:async g=>{const{data:v}=await X.from("deals").select("id",{count:"exact",head:!0}).eq("pipeline_status_id",g);if(v&&v.count>0)throw new Error("Cannot delete status with active deals. Please reassign deals first.");const{error:y}=await X.from("pipeline_statuses").delete().eq("id",g);if(y)throw y;await o()},reorderStatuses:async g=>{const v=g.map((y,x)=>({id:y.id,sort_order:x+1}));for(const y of v)await X.from("pipeline_statuses").update({sort_order:y.sort_order}).eq("id",y.id);await o()},applyTemplate:async g=>{if(!e)return;const{error:v}=await X.rpc("apply_pipeline_template",{p_user_id:e.id,p_template_name:g});if(v)throw v;const{error:y}=await X.rpc("migrate_user_deals_to_pipeline_statuses",{p_user_id:e.id});y&&console.error("Error migrating deals:",y),await o()},createCustomWorkflow:async g=>{if(!e)return;const v=g.map(_=>_.trim()).filter(_=>_.length>0);if(v.length===0)throw new Error("Please provide at least one stage.");const{error:y}=await X.from("pipeline_statuses").delete().eq("user_id",e.id);if(y)throw y;const x=v.map((_,j)=>({user_id:e.id,name:_,slug:_.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),sort_order:j+1,color:"hsl(220, 70%, 50%)",is_default:j===0})),{error:w}=await X.from("pipeline_statuses").insert(x);if(w)throw w;const{error:b}=await X.rpc("migrate_user_deals_to_pipeline_statuses",{p_user_id:e.id});b&&console.error("Error migrating deals after custom workflow:",b),await o()},reload:o}}function fQ(){const[e,t]=m.useState([]),[r,n]=m.useState(!0);return m.useEffect(()=>{(async()=>{const{data:a,error:s}=await X.from("pipeline_templates").select("*").eq("is_system",!0).order("name");!s&&a&&t(a),n(!1)})()},[]),{templates:e,loading:r}}const hQ={"Basic Pipeline":{description:"Simple 6-stage pipeline ideal for new agents",stages:["New Lead","Contacted","Showing Scheduled","Offer Submitted","Under Contract","Closed"]},"Advanced Transaction Pipeline":{description:"Comprehensive 13-stage pipeline covering all transaction phases",stages:["New Lead","Warm Lead","Hot Lead","Showing Scheduled","Offer Submitted","Inspection","Appraisal","Under Contract","Financing","Title Review","Clear to Close","Closed","Lost"]},Minimalist:{description:"Streamlined 4-stage pipeline for quick deal tracking",stages:["Lead","In Progress","Pending","Closed"]}};function LT({onClose:e,onSelect:t,onCreateCustomWorkflow:r,title:n="Choose Your Pipeline Workflow"}){const{templates:i}=fQ(),[a,s]=m.useState(null),[o,l]=m.useState(!1),[u,d]=m.useState(["New Lead","Contacted","Closed"]),[f,h]=m.useState(""),[p,g]=m.useState(!1),[v,y]=m.useState(null),x=async()=>{if(o){if(!r){y("Custom workflows are not supported here.");return}if(u.length<2){y("Add at least two stages to create a custom workflow.");return}g(!0),y(null);try{await r(u),e()}catch(w){console.error("Error creating custom workflow:",w),y(w instanceof Error?w.message:"Failed to create workflow")}finally{g(!1)}return}if(a){g(!0),y(null);try{await t(a),e()}catch(w){console.error("Error applying template:",w),y(w instanceof Error?w.message:"Failed to apply template")}finally{g(!1)}}};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:c.jsxs("div",{className:"app-surface w-full max-w-4xl max-h-[92vh] overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 px-6 py-5",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-500",children:"Pipeline"}),c.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:n}),c.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Start from a proven template or create a custom workflow tailored to your team."})]}),c.jsx("button",{onClick:e,className:"rounded-full border border-gray-200/80 bg-white p-2 text-gray-500 hover:text-gray-900",children:c.jsx(oo,{className:"h-5 w-5"})})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-5 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Recommended workflows"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Choose the pipeline structure that mirrors your current process."})]}),r&&c.jsxs("button",{onClick:()=>l(w=>!w),className:"inline-flex items-center gap-2 rounded-2xl border border-white/60 bg-white px-4 py-2 text-sm font-semibold text-gray-700 shadow-[0_2px_8px_rgba(15,23,42,0.08)] transition hover:border-[var(--app-accent)]/30 hover:text-[var(--app-accent)]",children:[c.jsx(Yi,{className:"h-4 w-4"}),"Custom workflow"]})]}),o?c.jsxs("div",{className:"rounded-2xl border border-[var(--app-border)] bg-white/90 p-5 shadow-inner",children:[c.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Custom workflow"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Define the stages that reflect your teams unique process. Drag to reorder later in settings."}),c.jsxs("div",{className:"mt-4 space-y-3",children:[u.map((w,b)=>c.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-gray-100 bg-gray-50 px-3 py-2",children:[c.jsxs("span",{className:"text-xs font-semibold text-gray-500",children:["Stage ",b+1]}),c.jsx("span",{className:"flex-1 text-sm font-medium text-gray-900",children:w}),c.jsx("button",{onClick:()=>d(_=>_.filter((j,S)=>S!==b)),className:"text-gray-400 hover:text-red-500",type:"button",children:c.jsx(La,{className:"h-4 w-4"})})]},w)),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{value:f,onChange:w=>h(w.target.value),placeholder:"Add a stage...",className:"hig-input flex-1 text-sm"}),c.jsx("button",{onClick:()=>{f.trim()&&(d(w=>[...w,f.trim()]),h(""))},className:"hig-btn-primary",type:"button",children:"Add"})]})]})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.filter(w=>w.name!=="Buyer/Seller Split Pipeline").map(w=>{const b=hQ[w.name],_=a===w.name;return c.jsxs("button",{onClick:()=>s(w.name),className:`rounded-2xl border px-5 py-4 text-left transition ${_?"border-[var(--app-accent)]/40 bg-[var(--app-surface-muted)] shadow-[inset_0_0_0_1px_rgba(10,132,255,0.08)]":"border-white/70 bg-white hover:border-[var(--app-accent)]/30"}`,children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-lg font-semibold text-gray-900",children:w.name}),c.jsx("p",{className:"text-sm text-gray-600",children:(b==null?void 0:b.description)||w.description})]}),_&&c.jsx("span",{className:"inline-flex h-7 w-7 items-center justify-center rounded-full bg-[var(--app-accent)] text-white",children:c.jsx(vd,{className:"h-4 w-4"})})]}),b&&c.jsxs("div",{className:"mt-3 space-y-1 text-xs text-gray-500",children:[c.jsxs("p",{className:"font-semibold",children:["Stages (",b.stages.length,")"]}),c.jsx("div",{className:"flex flex-wrap gap-1.5",children:b.stages.map((j,S)=>c.jsx("span",{className:"rounded-full border border-gray-200/70 px-2 py-0.5 text-[11px] text-gray-600",children:j},S))})]})]},w.id)})}),v&&c.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:v})]}),c.jsxs("div",{className:"flex items-center justify-between border-t border-gray-100 bg-gray-50/60 px-6 py-4",children:[c.jsx("button",{onClick:e,disabled:p,className:"text-sm font-medium text-gray-600 hover:text-gray-900",children:"Cancel"}),c.jsx("button",{onClick:x,disabled:o&&u.length<2||!o&&!a||p,className:"hig-btn-primary min-w-[140px] justify-center",children:p?"Applying":o?"Create Workflow":"Apply Template"})]})]})})}const pQ="rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_1px_2px_rgba(15,23,42,0.08)]",mQ="inline-flex items-center rounded-full border border-gray-200/70 bg-white px-3 py-1.5 text-sm font-medium text-gray-600 transition",Pj="inline-flex items-center rounded-full border px-3 py-1.5 text-xs font-semibold transition",gQ=["buyer","seller","buyer_and_seller","renter","landlord"],Oj={buyer:{label:"Buyer",accentClass:"bg-blue-50 text-blue-700 border-blue-200",matches:["buyer","buyer_and_seller"]},seller:{label:"Seller",accentClass:"bg-emerald-50 text-emerald-700 border-emerald-200",matches:["seller","buyer_and_seller"]},buyer_and_seller:{label:"Buyer & Seller",accentClass:"bg-purple-50 text-purple-700 border-purple-200",matches:["buyer_and_seller"]},renter:{label:"Renter",accentClass:"bg-orange-50 text-orange-700 border-orange-200",matches:["renter"]},landlord:{label:"Landlord",accentClass:"bg-teal-50 text-teal-700 border-teal-200",matches:["landlord"]}};function vQ(){const{user:e}=gt(),{statuses:t,loading:r,applyTemplate:n,createCustomWorkflow:i}=MT(),[a,s]=m.useState([]),[o,l]=m.useState(!0),[u,d]=m.useState(null),[f,h]=m.useState(!1),[p,g]=m.useState(null),[v,y]=m.useState(!1),[x,w]=m.useState("kanban"),[b,_]=m.useState("all"),[j,S]=DM(),k=j.get("newDeal"),N=Ty(Ay(lc,{activationConstraint:{distance:5}}));m.useEffect(()=>{C()},[e]),m.useEffect(()=>{if(k){g(null),h(!0);const A=new URLSearchParams(j);A.delete("newDeal"),S(A,{replace:!0})}},[k,j,S]),m.useEffect(()=>{!r&&t.length===0&&y(!0)},[r,t]);const C=async()=>{if(!e)return;const{data:A,error:J}=await X.from("deals").select(`
        *,
        lead_sources (*),
        pipeline_statuses (*)
      `).eq("user_id",e.id).order("created_at",{ascending:!1});!J&&A&&s(A),l(!1)},E=A=>{const J=a.find(re=>re.id===A.active.id);d(J||null)},P=async A=>{const{active:J,over:re}=A;if(d(null),!re)return;const he=J.id,_e=a.find(ce=>ce.id===he);if(!_e)return;const O=a.find(ce=>ce.id===re.id),L=O?O.pipeline_status_id:re.id;if(!L)return;if(L===_e.pipeline_status_id){O&&O.id!==_e.id&&O.deal_type===_e.deal_type&&s(ce=>{const ve=ce.findIndex(xe=>xe.id===_e.id),q=ce.findIndex(xe=>xe.id===O.id);return ve===-1||q===-1?ce:$y(ce,ve,q)});return}const Y=t.find(ce=>ce.id===L);if(!Y)return;const M={pipeline_status_id:L,status:(Y.slug||Y.name||"").toLowerCase(),stage_entered_at:new Date().toISOString()};(typeof Y.slug=="string"&&Y.slug.length>0?Y.slug.toLowerCase():(Y.name||"").toLowerCase()).includes("closed")&&(M.closed_at=new Date().toISOString());const{error:D}=await X.from("deals").update(M).eq("id",he);D||C()},I=A=>{g(A),h(!0)},W=()=>{h(!1),g(null),C()},F=b==="all"?a:a.filter(A=>Oj[b].matches.includes(A.deal_type)),K=A=>F.filter(J=>J.pipeline_status_id===A),U=A=>{const he=(A.actual_sale_price||A.expected_sale_price)*A.gross_commission_rate*(1-A.brokerage_split_rate);return(A.referral_out_rate?he*(1-A.referral_out_rate):he)-A.transaction_fee},H=A=>{const J=new Date(A),he=new Date().getTime()-J.getTime();return Math.floor(he/(1e3*60*60*24))},R=async A=>{if(!confirm(`Are you sure you want to delete ${A.length} deal${A.length>1?"s":""}?`))return;const{error:J}=await X.from("deals").delete().in("id",A);J||C()},B=async(A,J)=>{const re={};if(J.pipeline_status_id){re.pipeline_status_id=J.pipeline_status_id,re.stage_entered_at=new Date().toISOString();const _e=t.find(O=>O.id===J.pipeline_status_id);(_e==null?void 0:_e.name.toLowerCase())==="closed"?(re.status="closed",re.closed_at=new Date().toISOString()):(_e==null?void 0:_e.name.toLowerCase())==="dead"&&(re.status="dead")}const{error:he}=await X.from("deals").update(re).in("id",A);he||C()},G=A=>{const J=A.filter(L=>L.deal_type==="buyer"||L.deal_type==="buyer_and_seller").length,re=A.filter(L=>L.deal_type==="seller"||L.deal_type==="buyer_and_seller").length,he=A.filter(L=>L.deal_type==="renter").length,_e=A.filter(L=>L.deal_type==="landlord").length,O=A.reduce((L,Y)=>L+U(Y),0);return{buyers:J,sellers:re,renters:he,landlords:_e,totalCommission:O}},ae=A=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(A),Q=G(F),ge=[{label:"Buyers",value:Q.buyers,display:Q.buyers.toString()},{label:"Sellers",value:Q.sellers,display:Q.sellers.toString()},{label:"Renters",value:Q.renters,display:Q.renters.toString()},{label:"Landlords",value:Q.landlords,display:Q.landlords.toString()},{label:"Net Commission",value:Q.totalCommission,display:ae(Q.totalCommission)}].filter(A=>A.value>0);return o||r?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):c.jsxs("div",{className:"space-y-6 min-h-full",children:[c.jsxs("div",{className:`${pQ} p-6 space-y-4`,children:[c.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-[0.25em]",children:"Pipeline"}),c.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mt-1",children:"Active deals workspace"}),c.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Monitor every opportunity, shift deals between stages, and launch new work without leaving this view."})]}),c.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[c.jsxs("div",{className:"inline-flex items-center rounded-full border border-gray-200/80 bg-white/80 p-1 shadow-inner",children:[c.jsxs("button",{onClick:()=>w("kanban"),className:`inline-flex items-center gap-2 rounded-full px-3 py-1.5 text-sm font-medium ${x==="kanban"?"bg-[var(--app-accent)] text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[c.jsx(bL,{className:"w-4 h-4"}),c.jsx("span",{children:"Kanban"})]}),c.jsxs("button",{onClick:()=>w("table"),className:`inline-flex items-center gap-2 rounded-full px-3 py-1.5 text-sm font-medium ${x==="table"?"bg-[var(--app-accent)] text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[c.jsx(_2,{className:"w-4 h-4"}),c.jsx("span",{children:"Table"})]})]}),c.jsxs("button",{onClick:()=>{g(null),h(!0)},className:"inline-flex items-center justify-center gap-2 rounded-2xl border border-white/50 bg-[var(--app-accent)] px-4 py-2 text-sm font-semibold text-white shadow-[0_8px_16px_rgba(15,23,42,0.12)] transition hover:bg-[var(--app-accent-dark,#0052cc)]",children:[c.jsx(Yi,{className:"w-4 h-4"}),c.jsx("span",{children:"New Deal"})]})]})]}),ge.length>0&&c.jsx("div",{className:"flex flex-wrap gap-3",children:ge.map(A=>c.jsxs("div",{className:`${mQ} gap-2`,children:[c.jsx("span",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:A.label}),c.jsx("span",{className:"font-semibold text-gray-900",children:A.display})]},A.label))}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Deal types"}),b!=="all"&&c.jsx("button",{onClick:()=>_("all"),className:"text-xs font-medium text-[var(--app-accent)] hover:underline",children:"Reset"})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>_("all"),className:`${Pj} ${b==="all"?"bg-gray-900 text-white border-gray-900 shadow-sm":"border-gray-200/70 bg-white text-gray-600 hover:text-gray-900"}`,children:"All deals"}),gQ.map(A=>{const J=Oj[A],re=b===A;return c.jsx("button",{onClick:()=>_(A),className:`${Pj} ${re?`${J.accentClass} shadow-sm ring-1 ring-black/5`:"border-gray-200/70 bg-white text-gray-600 hover:text-gray-900"}`,children:J.label},A)})]})]})]}),t.length===0?c.jsx("div",{className:"flex-1 flex items-center justify-center",children:c.jsxs("div",{className:"text-center max-w-md",children:[c.jsx($f,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Configure Your Pipeline"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Choose a template to get started with your pipeline workflow"}),c.jsx("button",{onClick:()=>y(!0),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition",children:"Choose Pipeline Template"})]})}):x==="kanban"?c.jsxs(Ly,{sensors:N,collisionDetection:l$,onDragStart:E,onDragEnd:P,children:[c.jsx("div",{className:"pb-2 overflow-x-auto",children:c.jsx("div",{className:"flex gap-3 sm:gap-4 pb-4 px-2 sm:px-6 min-w-max",children:t.map(A=>c.jsx(JJ,{status:A.id,label:A.name,color:A.color,deals:K(A.id),onDealClick:I,calculateNetCommission:U,getDaysInStage:H},A.id))})}),c.jsx(v3,{children:u?c.jsx(IT,{deal:u,netCommission:U(u),daysInStage:H(u.stage_entered_at),onClick:()=>{},isDragging:!0}):null})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsx(uQ,{deals:F,statuses:t,onDealClick:I,calculateNetCommission:U,getDaysInStage:H,onBulkDelete:R,onBulkEdit:B,onImportSuccess:C})}),f&&c.jsx(RT,{deal:p,onClose:W,onDelete:W}),v&&c.jsx(LT,{onClose:()=>y(!1),onSelect:n,onCreateCustomWorkflow:i})]})}function yQ({options:e,value:t,onChange:r,className:n=""}){return c.jsx("div",{className:`inline-flex rounded-2xl border border-gray-200/80 bg-white p-1 shadow-sm ${n}`,children:e.map(i=>c.jsx("button",{onClick:()=>r(i.value),className:`px-4 py-2 text-sm font-semibold rounded-xl transition-all duration-150 min-h-[40px] ${t===i.value?"bg-[rgb(0,122,255)] text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:i.label},i.value))})}function xQ(){const{user:e}=gt(),[t,r]=m.useState(new Date().getFullYear()),[n,i]=m.useState({closedDeals:0,totalVolume:0,totalGCI:0,avgSalePrice:0,avgCommission:0,buyerDeals:0,sellerDeals:0,avgDaysToClose:0}),[a,s]=m.useState([]),[o,l]=m.useState([]),[u,d]=m.useState({count:0,gci:0}),[f,h]=m.useState(0),[p,g]=m.useState(!0),v=q=>{if(!q)return null;const xe=q.trim();if(!xe)return null;const $=xe.match(/^(\d{4})-(\d{2})-(\d{2})$/);if($){const le=Number($[1]),fe=Number($[2])-1,ue=Number($[3]);if(Number.isNaN(le)||Number.isNaN(fe)||Number.isNaN(ue)||fe<0||fe>11||ue<1||ue>31)return null;const we=new Date(Date.UTC(le,fe,ue));return{year:le,month:fe,date:we}}const V=xe.replace(" ","T").replace(/(\+\d{2})(\d{2})$/,"$1:$2").replace(/(-\d{2})(\d{2})$/,"$1:$2"),Z=new Date(V);return Number.isNaN(Z.getTime())?null:{year:Z.getUTCFullYear(),month:Z.getUTCMonth(),date:Z}};m.useEffect(()=>{y()},[e,t]);const y=async()=>{if(!e)return;g(!0);const q=new Date(t,0,1).toISOString(),xe=new Date(t,11,31,23,59,59).toISOString(),{data:$}=await X.from("user_settings").select("annual_gci_goal").eq("user_id",e.id).maybeSingle();$&&h($.annual_gci_goal||0);const{data:V}=await X.from("deals").select(`
        *,
        lead_sources (name)
      `).eq("user_id",e.id).eq("status","closed"),{data:Z}=await X.from("deals").select(`
        *,
        lead_sources (name)
      `).eq("user_id",e.id).gte("created_at",q).lte("created_at",xe);if(V){const le=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];let fe=0,ue=0,we=0,Je=0,be=0,me=0,ye=0;const lt={},Te={},Ot={count:0,gci:0},Jr=new Date,Rn=Jr.getMonth(),xi=Jr.getFullYear()===t;V.forEach(qe=>{const bi=v(qe.close_date)||v(qe.closed_at);if(!bi||bi.year!==t)return;ye+=1;const Ln=qe.actual_sale_price||qe.expected_sale_price||0;fe+=Ln;const ct=Ln*(qe.gross_commission_rate||0)*(1-(qe.brokerage_split_rate||0)),At=(qe.referral_out_rate?ct*(1-qe.referral_out_rate):ct)-(qe.transaction_fee||0);ue+=At,qe.deal_type==="buyer"&&we++,qe.deal_type==="seller"&&Je++,qe.deal_type==="buyer_and_seller"&&(we++,Je++);const Qr=v(qe.created_at);if(Qr){const xn=(bi.date.getTime()-Qr.date.getTime())/(1e3*60*60*24);!Number.isNaN(xn)&&xn>=0&&(be+=xn,me++)}const qt=bi.month,wt=le[qt];lt[wt]=(lt[wt]||0)+At,Te[wt]=(Te[wt]||0)+1,xi&&qt===Rn&&(Ot.count+=1,Ot.gci+=At)}),d(Ot);const Mn=me>0?be/me:0;i({closedDeals:ye,totalVolume:fe,totalGCI:ue,avgSalePrice:ye>0?fe/ye:0,avgCommission:ye>0?ue/ye:0,buyerDeals:we,sellerDeals:Je,avgDaysToClose:Mn});const wo=le.map(qe=>({month:qe,gci:lt[qe]||0,deals:Te[qe]||0}));l(wo)}else i(le=>({...le,closedDeals:0,totalVolume:0,totalGCI:0,avgSalePrice:0,avgCommission:0,buyerDeals:0,sellerDeals:0,avgDaysToClose:0})),l([]),d({count:0,gci:0});if(Z){const le={};Z.forEach(ue=>{var Je;const we=((Je=ue.lead_sources)==null?void 0:Je.name)||"Unknown";if(le[we]||(le[we]={total:0,closed:0,commission:0}),le[we].total++,ue.status==="closed"){le[we].closed++;const ye=(ue.actual_sale_price||ue.expected_sale_price||0)*(ue.gross_commission_rate||0)*(1-(ue.brokerage_split_rate||0)),Te=(ue.referral_out_rate?ye*(1-ue.referral_out_rate):ye)-(ue.transaction_fee||0);le[we].commission+=Te}});const fe=Object.entries(le).map(([ue,we])=>({name:ue,totalDeals:we.total,closedDeals:we.closed,conversionRate:we.total>0?we.closed/we.total*100:0,totalCommission:we.commission}));s(fe.sort((ue,we)=>we.totalCommission-ue.totalCommission))}else s([]);g(!1)},x=q=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(q),w=q=>new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(q),b=f>0?n.totalGCI/f*100:0,_=new Date,j=t===_.getFullYear(),S=new Date(t,0,1),k=new Date(t,11,31,23,59,59),N=j?Math.max(0,Math.min(_.getTime(),k.getTime())-S.getTime()):k.getTime()-S.getTime(),C=k.getTime()-S.getTime(),E=C>0?N/C:1,P=E>0?n.totalGCI/E:n.totalGCI,I=Math.max(0,f-n.totalGCI),W=j&&_.getFullYear()===t?12-_.getMonth():0,F=f>0&&W>0?I/W:0,{bestMonth:K,worstMonth:U}=m.useMemo(()=>{const q=o.filter(V=>V.gci>0);if(q.length===0)return{bestMonth:null,worstMonth:null};const xe=q.reduce((V,Z)=>Z.gci>V.gci?Z:V),$=q.reduce((V,Z)=>Z.gci<V.gci?Z:V);return{bestMonth:xe,worstMonth:$}},[o]),H=m.useMemo(()=>o.filter(q=>q.gci>0),[o]),R=H.length,B=R>0?n.totalGCI/R:0,G=H.reduce((q,xe)=>q+xe.deals,0),ae=R>0?G/R:0,Q=R>0?H[R-1]:null,ge=R>1?H[R-2]:null,A=Q&&ge?Q.gci-ge.gci:null,J=m.useMemo(()=>o.reduce((q,xe)=>Math.max(q,xe.gci),0),[o]),re=m.useMemo(()=>o.reduce((q,xe)=>Math.max(q,xe.deals),0),[o]),he=K?o.find(q=>q.month===K.month):null,_e=U?o.find(q=>q.month===U.month):null,O="rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_1px_2px_rgba(15,23,42,0.08)]",L="inline-flex items-center rounded-full border border-gray-200/70 bg-white px-2.5 py-0.5 text-[11px] font-medium text-gray-600",Y="rounded-xl border border-gray-100/80 bg-white px-4 py-3",M=a[0]||null,Se=a.length>1?[...a].filter(q=>q.totalDeals>=3).sort((q,xe)=>q.conversionRate-xe.conversionRate)[0]:null,ce=Array.from({length:5},(q,xe)=>new Date().getFullYear()-xe).map(q=>({value:q.toString(),label:q.toString()})),ve=`Jan 1  Dec 31, ${t}${j?"  In progress":""}`;return p?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):c.jsxs("div",{className:"space-y-8",children:[c.jsxs("section",{className:`${O} p-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between`,children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-[0.25em]",children:"Analytics"}),c.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mt-1",children:"Year in Review"}),c.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"A cohesive digest of production, pace, and lead-source efficiency for your selected year."})]}),c.jsxs("div",{className:"flex flex-col gap-3 items-start sm:items-end",children:[c.jsxs("div",{className:"text-left sm:text-right",children:[c.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Timeframe"}),c.jsx("p",{className:"text-sm text-gray-500",children:ve})]}),c.jsx(yQ,{options:ce,value:String(t),onChange:q=>r(parseInt(q,10)),className:"self-start sm:self-end w-max"})]})]}),c.jsx("section",{children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[c.jsxs("div",{className:`${O} p-5`,children:[c.jsx("p",{className:"text-xs font-semibold text-blue-600 uppercase tracking-wide",children:"Pipeline"}),c.jsx("div",{className:"text-2xl font-semibold text-gray-900 mt-2",children:w(n.closedDeals)}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Closed deals"}),c.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:[n.buyerDeals," buyer  ",n.sellerDeals," seller"]})]}),c.jsxs("div",{className:`${O} p-5`,children:[c.jsx("p",{className:"text-xs font-semibold text-green-600 uppercase tracking-wide",children:"Volume"}),c.jsx("div",{className:"text-2xl font-semibold text-gray-900 mt-2",children:x(n.totalVolume)}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Total sales volume"}),c.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Avg sale price  ",x(n.avgSalePrice)]})]}),c.jsxs("div",{className:`${O} p-5`,children:[c.jsx("p",{className:"text-xs font-semibold text-amber-600 uppercase tracking-wide",children:"Net GCI"}),c.jsx("div",{className:"text-2xl font-semibold text-gray-900 mt-2",children:x(n.totalGCI)}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Total earnings after splits"}),c.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Avg commission  ",x(n.avgCommission)]})]}),c.jsxs("div",{className:`${O} p-5`,children:[c.jsx("p",{className:"text-xs font-semibold text-indigo-600 uppercase tracking-wide",children:"Pace"}),c.jsx("div",{className:"text-2xl font-semibold text-gray-900 mt-2",children:w(u.count)}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Deals closing this month"}),c.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["GCI this month  ",x(u.gci)]}),n.avgDaysToClose>0&&c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Avg time to close  ",n.avgDaysToClose.toFixed(0)," days"]})]})]})}),c.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:`${O} p-6`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-5",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Monthly Performance"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How each producing month contributes to pace and income."})]}),c.jsx("div",{className:"text-xs text-gray-500",children:R>0?c.jsxs("span",{className:L,children:[R," active months"]}):c.jsx("span",{className:"text-gray-400",children:"No closed months yet"})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsxs("div",{className:Y,children:[c.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide",children:"Top Month"}),K?c.jsxs(c.Fragment,{children:[c.jsxs("p",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[K.month,c.jsxs("span",{className:L,children:[(he==null?void 0:he.deals)??0," deals"]})]}),c.jsx("p",{className:"text-sm text-gray-600",children:x(K.gci)})]}):c.jsx("p",{className:"text-sm text-gray-500",children:"No producing months yet."})]}),c.jsxs("div",{className:Y,children:[c.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide",children:"Slow Month"}),U&&K&&U.month!==K.month?c.jsxs(c.Fragment,{children:[c.jsxs("p",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[U.month,c.jsxs("span",{className:L,children:[(_e==null?void 0:_e.deals)??0," deals"]})]}),c.jsx("p",{className:"text-sm text-gray-600",children:x(U.gci)})]}):K?c.jsx("p",{className:"text-sm text-gray-500",children:"Only one producing month so far."}):c.jsx("p",{className:"text-sm text-gray-500",children:"No data yet."})]}),c.jsxs("div",{className:Y,children:[c.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide",children:"Avg Active Month"}),c.jsx("p",{className:"text-lg font-semibold text-gray-900",children:x(B||0)}),c.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[R||0," active month",R===1?"":"s",c.jsxs("span",{className:L,children:[ae.toFixed(1)," deals/mo"]})]})]}),c.jsxs("div",{className:Y,children:[c.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide",children:"Momentum"}),A!==null&&Q?c.jsxs(c.Fragment,{children:[c.jsxs("p",{className:`text-lg font-semibold ${A>=0?"text-emerald-600":"text-rose-600"}`,children:[A>=0?"+":"-",x(Math.abs(A))]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Vs. ",(ge==null?void 0:ge.month)??"previous month"," GCI"]})]}):c.jsx("p",{className:"text-sm text-gray-500",children:"Log at least two producing months to see momentum."})]})]}),c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Monthly Ledger"}),c.jsxs("span",{className:"text-xs text-gray-500",children:["Peak GCI: ",J?x(J):"","  Peak deals:"," ",re||""]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full text-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"text-left text-xs uppercase tracking-wide text-gray-500 border-b border-gray-100",children:[c.jsx("th",{className:"pb-2 pr-4",children:"Month"}),c.jsx("th",{className:"pb-2 pr-4",children:"Deals"}),c.jsx("th",{className:"pb-2 pr-4",children:"GCI"}),c.jsx("th",{className:"pb-2 pr-4",children:"Avg / Deal"}),c.jsx("th",{className:"pb-2 text-right",children:"Share"})]})}),c.jsx("tbody",{children:o.map(q=>{const xe=q.deals>0?q.gci/q.deals:0,$=n.totalGCI>0?q.gci/n.totalGCI*100:0;return c.jsxs("tr",{className:"border-b border-gray-50",children:[c.jsx("td",{className:"py-2 pr-4 font-medium text-gray-900",children:q.month}),c.jsx("td",{className:"py-2 pr-4 text-gray-700",children:q.deals}),c.jsx("td",{className:"py-2 pr-4 text-gray-700",children:x(q.gci)}),c.jsx("td",{className:"py-2 pr-4 text-gray-700",children:q.deals>0?x(xe):""}),c.jsx("td",{className:"py-2 text-right text-gray-700",children:n.totalGCI>0?`${$.toFixed(1)}%`:""})]},q.month)})})]})})]})]}),c.jsxs("div",{className:`${O} p-6`,children:[c.jsx("div",{className:"flex items-center justify-between mb-4",children:c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Momentum & Pace"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Are you ahead or behind last years GCI at this point on the calendar?"})]})}),c.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[c.jsxs("div",{className:"rounded-2xl border border-gray-100/80 bg-gradient-to-br from-white to-[var(--app-bg-start)] p-5 shadow-inner",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Year-over-year pace"}),c.jsxs("div",{className:"mt-3 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:x(n.totalGCI)}),c.jsx("p",{className:"text-sm text-gray-600",children:"Current GCI"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Pace needed"}),c.jsx("p",{className:"text-lg font-semibold text-gray-900",children:x(P)})]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[c.jsx("span",{children:"Current"}),c.jsx("span",{children:"Goal"})]}),c.jsx("div",{className:"mt-1 h-3 rounded-full bg-gray-100",children:c.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-blue-500 to-cyan-400 transition-all",style:{width:`${Math.min(100,n.totalGCI/(f||1)*100)}%`}})}),c.jsxs("div",{className:"mt-1 text-xs font-semibold text-gray-600",children:[b.toFixed(1),"% of goal  year is ",(E*100).toFixed(1),"% complete"]})]})]}),c.jsxs("div",{className:"rounded-2xl border border-gray-100/80 bg-white/90 p-5",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Active pipeline outlook"}),c.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:w(u.count)}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Deals expected to close this month"})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:x(u.gci)}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Projected monthly GCI"})]})]}),c.jsx("div",{className:"mt-4 rounded-xl bg-[var(--app-surface-muted)] p-4 text-sm text-gray-600",children:A!==null&&Q?c.jsxs(c.Fragment,{children:[c.jsxs("span",{className:"font-semibold",children:[A>=0?"Ahead":"Trailing"," pace"]})," ","by ",x(Math.abs(A))," versus ",(ge==null?void 0:ge.month)??"previous",". Keep this cadence to end the year at"," ",c.jsx("span",{className:"font-semibold",children:x(P)}),"."]}):"Once two months close well highlight whether you are accelerating or slowing down."})]})]})]})]}),c.jsxs("section",{className:`${O} overflow-hidden`,children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center justify-between",children:c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:"Lead Source Performance"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Compare volume, conversion, and commissions by source."})]})}),c.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Deals"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Closed"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Conv. Rate"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Commission"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Insight"})]})}),c.jsxs("tbody",{className:"bg-white/70 divide-y divide-gray-100",children:[a.map(q=>{let xe="Solid";return q.conversionRate>=25&&q.totalCommission>(n.totalGCI||0)/4?xe="Power Source":q.conversionRate<10&&q.totalDeals>=3&&(xe="Underperformer"),c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:q.name}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:q.totalDeals}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:q.closedDeals}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[q.conversionRate.toFixed(1),"%"]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600",children:x(q.totalCommission)}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:c.jsx("span",{className:xe==="Power Source"?"inline-flex px-2 py-1 rounded-full bg-green-50 text-green-700":xe==="Underperformer"?"inline-flex px-2 py-1 rounded-full bg-amber-50 text-amber-700":"inline-flex px-2 py-1 rounded-full bg-gray-50 text-gray-600",children:xe})})]},q.name)}),a.length===0&&c.jsx("tr",{children:c.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:["No data available for ",t]})})]})]})]}),c.jsxs("section",{className:`${O} p-6`,children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Suggested Focus Areas"}),c.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Practical follow-ups informed by what the data is highlighting this year."}),c.jsxs("ul",{className:"space-y-3 text-sm text-gray-700",children:[f>0&&I>0&&c.jsxs("li",{className:"leading-relaxed",children:["You need approximately"," ",c.jsx("span",{className:"font-semibold",children:x(I)})," ","more GCI to hit your annual goal.",F>0&&c.jsxs(c.Fragment,{children:[" ","That's about"," ",c.jsxs("span",{className:"font-semibold",children:[x(F)," per month"]})," ","for the rest of the year."]})]}),M&&c.jsxs("li",{className:"leading-relaxed",children:[c.jsx("span",{className:"font-semibold",children:M.name})," continues to be your most profitable channel with"," ",c.jsx("span",{className:"font-semibold",children:x(M.totalCommission)})," ","in GCI. Consider increasing budget or nurture time here."]}),Se&&c.jsxs("li",{className:"leading-relaxed",children:[c.jsx("span",{className:"font-semibold",children:Se.name})," is converting at"," ",Se.conversionRate.toFixed(1),"%. Revisit the script or pause the spend until it improves."]}),n.avgDaysToClose>0&&c.jsxs("li",{className:"leading-relaxed",children:["Average time from lead to close is"," ",c.jsxs("span",{className:"font-semibold",children:[n.avgDaysToClose.toFixed(0)," days"]}),". Tighten follow-up cadences or pre-qualification steps to reduce the cycle."]}),(!M||!Se)&&n.closedDeals===0&&c.jsx("li",{className:"leading-relaxed",children:"Add a few deals to the pipeline this year to unlock richer insight. Once production starts, this dashboard will reveal which channels earn the most."})]})]})]})}const om="rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_1px_2px_rgba(15,23,42,0.08)]",bQ="inline-flex items-center rounded-full border px-3 py-1.5 text-xs font-semibold transition",wQ=[{label:"All tasks",value:"all",accentClass:"bg-gray-900 text-white border-gray-900 shadow-sm"},{label:"Overdue",value:"overdue",accentClass:"bg-red-50 text-red-700 border-red-200 shadow-sm ring-1 ring-red-100"},{label:"Due today",value:"today",accentClass:"bg-amber-50 text-amber-700 border-amber-200 shadow-sm ring-1 ring-amber-100"},{label:"Upcoming",value:"upcoming",accentClass:"bg-sky-50 text-sky-700 border-sky-200 shadow-sm ring-1 ring-sky-100"}];function _Q(){const{user:e}=gt(),[t,r]=m.useState([]),[n,i]=m.useState([]),[a,s]=m.useState("all"),[o,l]=m.useState(""),[u,d]=m.useState(!0),[f,h]=m.useState(null),[p,g]=m.useState(!1),[v,y]=m.useState(null),x=m.useMemo(()=>{const N=new Date;N.setHours(0,0,0,0);let C=0,E=0,P=0,I=0;const W=[];return t.forEach(F=>{if(!F.due_date){I+=1;return}const K=new Date(F.due_date);K.setHours(0,0,0,0),K<N?C+=1:K.getTime()===N.getTime()?E+=1:P+=1,W.push(F)}),W.sort((F,K)=>F.due_date?K.due_date?new Date(F.due_date).getTime()-new Date(K.due_date).getTime():-1:1),{total:t.length,overdue:C,dueToday:E,upcoming:P,unscheduled:I,nextTask:W[0]||null}},[t]);m.useEffect(()=>{e&&w()},[e]),m.useEffect(()=>{let N=[...t];const C=new Date;if(C.setHours(0,0,0,0),a==="overdue"?N=N.filter(E=>E.due_date&&new Date(E.due_date)<C):a==="today"?N=N.filter(E=>{if(!E.due_date)return!1;const P=new Date(E.due_date);return P.setHours(0,0,0,0),P.getTime()===C.getTime()}):a==="upcoming"&&(N=N.filter(E=>E.due_date&&new Date(E.due_date)>C)),o.trim()){const E=o.toLowerCase();N=N.filter(P=>P.title.toLowerCase().includes(E)||P.deals.client_name.toLowerCase().includes(E)||P.deals.property_address.toLowerCase().includes(E))}i(N)},[a,o,t]);const w=async()=>{if(!e)return;d(!0);const{data:N,error:C}=await X.from("tasks").select("*, deals(*, lead_sources(*))").eq("user_id",e.id).eq("completed",!1).order("due_date",{ascending:!0});!C&&N&&r(N.filter(E=>E.deals).map(E=>E)),d(!1)},b=N=>N?new Date(N).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"No due date",_=N=>{if(!N.due_date)return c.jsx("span",{className:"text-xs font-medium text-gray-500",children:"No due date"});const C=new Date(N.due_date),E=new Date;return E.setHours(0,0,0,0),C<E?c.jsx("span",{className:"text-xs font-semibold text-red-600",children:"Overdue"}):C.getTime()===E.getTime()?c.jsx("span",{className:"text-xs font-semibold text-orange-600",children:"Due today"}):c.jsx("span",{className:"text-xs font-semibold text-emerald-600",children:"Upcoming"})},j=N=>{y(N.deals),g(!0)},S=async(N,C)=>{if(C.stopPropagation(),!!e){h(N.id);try{const{error:E}=await X.from("tasks").update({completed:!0}).eq("id",N.id).eq("user_id",e.id);if(E)throw E;r(P=>P.filter(I=>I.id!==N.id)),i(P=>P.filter(I=>I.id!==N.id))}catch(E){console.error("Error completing task",E)}finally{h(null)}}},k=()=>{g(!1),y(null),w()};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:`${om} p-6 space-y-5`,children:[c.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-[0.25em]",children:"Tasks"}),c.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mt-1",children:"Outstanding work"}),c.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Track every open commitment across all deals in a single, prioritized list."})]}),c.jsx("div",{className:"w-full md:w-auto",children:c.jsx("input",{value:o,onChange:N=>l(N.target.value),placeholder:"Search by client, task, property...",className:"w-full rounded-2xl border border-white/60 bg-white/90 py-2.5 pl-4 pr-4 text-sm text-gray-900 shadow-inner placeholder:text-gray-400 focus:border-[var(--app-accent)]/40 focus:ring-2 focus:ring-[var(--app-accent)]/15 md:min-w-[280px]"})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Task status"}),a!=="all"&&c.jsx("button",{onClick:()=>s("all"),className:"text-xs font-medium text-[var(--app-accent)] hover:underline",children:"Reset"})]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:wQ.map(N=>{const C=a===N.value;return c.jsx("button",{onClick:()=>s(N.value),className:`${bQ} ${C?N.accentClass:"border-gray-200/70 bg-white text-gray-600 hover:text-gray-900"}`,children:N.label},N.value)})})]})]}),c.jsx("div",{className:`${om} p-0 overflow-hidden`,children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{className:"text-left text-xs uppercase tracking-wide text-gray-500",children:[c.jsx("th",{className:"px-5 py-3",children:"Task"}),c.jsx("th",{className:"px-5 py-3",children:"Due"}),c.jsx("th",{className:"px-5 py-3",children:"Deal"}),c.jsx("th",{className:"px-5 py-3",children:"Status"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100 bg-white/90",children:u?c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"px-5 py-8 text-center text-gray-500 text-sm",children:"Loading tasks"})}):n.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"px-5 py-12 text-center text-gray-500 text-sm",children:"Nothing to show here  take a moment to plan your next steps."})}):n.map(N=>{var C;return c.jsxs("tr",{className:"hover:bg-[var(--app-surface-muted)]/60 cursor-pointer",onClick:()=>j(N),children:[c.jsx("td",{className:"px-5 py-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("button",{type:"button",className:"pt-1",onClick:E=>S(N,E),disabled:f===N.id,"aria-label":"Mark task complete",children:f===N.id?c.jsx(pr,{className:"h-4 w-4 text-emerald-500 animate-spin"}):N.completed?c.jsx(Gi,{className:"h-4 w-4 text-emerald-500"}):c.jsx(hw,{className:"h-4 w-4 text-gray-300"})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:N.title}),((C=N.deals)==null?void 0:C.next_task_description)&&c.jsxs("p",{className:"text-xs text-gray-500",children:["Related: ",N.deals.next_task_description]})]})]})}),c.jsx("td",{className:"px-5 py-4 text-sm text-gray-700",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Il,{className:"h-4 w-4 text-gray-400"}),c.jsx("span",{children:b(N.due_date)})]})}),c.jsx("td",{className:"px-5 py-4 text-sm text-gray-700",children:c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ff,{className:"h-3.5 w-3.5 text-gray-400"}),c.jsx("span",{className:"font-medium text-gray-900",children:N.deals.client_name})]}),N.deals.property_address&&c.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[c.jsx(jL,{className:"h-3 w-3"}),c.jsxs("span",{className:"truncate",children:[N.deals.property_address,N.deals.city?`, ${N.deals.city}`:""]})]})]})}),c.jsx("td",{className:"px-5 py-4 text-sm text-gray-700",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Rl,{className:"h-4 w-4 text-gray-400"}),_(N)]})})]},N.id)})})]})})}),c.jsxs("section",{className:`${om} p-6`,children:[c.jsx("div",{className:"flex items-center justify-between mb-6",children:c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Focus cues"}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Where attention is needed"})]})}),c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[c.jsxs("div",{className:"rounded-2xl border border-red-100/60 bg-red-50/70 p-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm font-semibold uppercase tracking-wide",children:[c.jsx(g2,{className:"h-4 w-4"}),"Overdue"]}),c.jsx("p",{className:"mt-2 text-2xl font-semibold text-red-700",children:x.overdue}),c.jsx("p",{className:"text-xs text-red-600",children:"Tasks waiting on you"})]}),c.jsxs("div",{className:"rounded-2xl border border-amber-100/70 bg-amber-50/60 p-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-amber-600 text-sm font-semibold uppercase tracking-wide",children:[c.jsx(Rl,{className:"h-4 w-4"}),"Due today"]}),c.jsx("p",{className:"mt-2 text-2xl font-semibold text-amber-700",children:x.dueToday}),c.jsx("p",{className:"text-xs text-amber-600",children:"Expected before midnight"})]}),c.jsxs("div",{className:"rounded-2xl border border-emerald-100/70 bg-emerald-50/60 p-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 text-sm font-semibold uppercase tracking-wide",children:[c.jsx(v2,{className:"h-4 w-4"}),"Upcoming"]}),c.jsx("p",{className:"mt-2 text-2xl font-semibold text-emerald-700",children:x.upcoming}),c.jsx("p",{className:"text-xs text-emerald-600",children:"On the horizon"})]}),c.jsxs("div",{className:"rounded-2xl border border-gray-100/70 bg-gray-50/80 p-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm font-semibold uppercase tracking-wide",children:[c.jsx(hw,{className:"h-4 w-4"}),"Unscheduled"]}),c.jsx("p",{className:"mt-2 text-2xl font-semibold text-gray-700",children:x.unscheduled}),c.jsx("p",{className:"text-xs text-gray-500",children:"Add due dates to keep momentum"})]})]}),c.jsxs("div",{className:"mt-6 rounded-2xl border border-gray-100/80 bg-[var(--app-surface-muted)] p-5",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Next actionable"}),x.nextTask?c.jsxs("div",{className:"mt-3 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-lg font-semibold text-gray-900",children:x.nextTask.title}),c.jsx("p",{className:"text-sm text-gray-600",children:x.nextTask.deals.client_name})]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[c.jsx(Il,{className:"h-4 w-4 text-gray-400"}),c.jsx("span",{children:b(x.nextTask.due_date)})]})]}):c.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"No dated tasks remain. Assign due dates to keep focus on high-leverage work."})]})]}),p&&v&&c.jsx(RT,{deal:v,onClose:k,onDelete:k})]})}const Aj="rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_8px_20px_rgba(15,23,42,0.08)]",jQ="inline-flex items-center gap-2 rounded-2xl border border-white/80 bg-white/80 px-4 py-1.5 text-sm font-medium text-gray-700 shadow-inner transition hover:-translate-y-0.5 hover:border-[var(--app-accent)]/40 hover:text-gray-900";function SQ(){const[e,t]=m.useState([]),[r,n]=m.useState(""),[i,a]=m.useState(!1),s=["Show me the deals expected to close this month.","Which clients need new activity this week?","Summarize my pipeline stage mix.","How is my projected GCI pacing for Q3?","Who owns the next step on the Torres deal?"],o=async u=>{if(u.preventDefault(),!r.trim()||i)return;const d={role:"user",content:r};t(f=>[...f,d]),n(""),a(!0);try{const{data:{session:f}}=await X.auth.getSession();if(!f)throw new Error("Not authenticated");const h="https://gomwhbewjdcllejifdyf.supabase.co/functions/v1/luma-query",p={Authorization:`Bearer ${f.access_token}`,"Content-Type":"application/json"},g=e.slice(-6).map(w=>({role:w.role,content:w.content})),y=await(await fetch(h,{method:"POST",headers:p,body:JSON.stringify({query:d.content,conversation_history:g})})).json();if(y.error)throw new Error(y.error);const x={role:"assistant",content:y.answer,supportingData:y.supporting_data};t(w=>[...w,x])}catch(f){console.error("Luma query error:",f);const h={role:"assistant",content:"Sorry, I encountered an error processing your request. Please try again."};t(p=>[...p,h])}finally{a(!1)}},l=u=>{n(u)};return c.jsxs("div",{className:"flex h-full flex-col gap-6",children:[c.jsx("section",{className:`${Aj} space-y-4 bg-white/95 px-6 py-6 sm:px-8 sm:py-8`,children:c.jsxs("div",{className:"space-y-3",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-gray-500",children:"Luma AI"}),c.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Chat with your data-aware copilot"}),c.jsx("p",{className:"max-w-3xl text-sm text-gray-600",children:"Ask natural questions about deals, tasks, lead sources, or performance and get calm answers without breaking your workflow. Luma keeps context from your workspace so you can move quickly."})]})}),c.jsxs("section",{className:`${Aj} flex flex-1 flex-col overflow-hidden bg-gradient-to-b from-[#f5f9ff] to-white`,children:[c.jsxs("div",{className:"border-b border-white/60 px-4 py-5 sm:px-6",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-gray-500",children:"Conversation"}),c.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Bring up deals, follow-ups, or performance goalsLuma replies with grounded insight."})]}),c.jsxs("div",{className:"border-b border-white/60 px-4 py-4 sm:px-6",children:[c.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-gray-400",children:"Starter prompts"}),c.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:s.map((u,d)=>c.jsxs("button",{type:"button",onClick:()=>l(u),className:jQ,children:[c.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-gray-300"}),u]},d))})]}),c.jsxs("div",{className:"flex-1 space-y-4 overflow-y-auto px-4 py-6 pr-2 sm:px-6",children:[e.map((u,d)=>c.jsx("div",{className:`flex ${u.role==="user"?"justify-end":"justify-start"}`,children:c.jsxs("div",{className:`max-w-3xl rounded-3xl px-5 py-4 ${u.role==="user"?"bg-[var(--app-accent)] text-white shadow-[0_25px_50px_rgba(0,122,255,0.25)]":"border border-white/80 bg-white/90 shadow-[0_15px_30px_rgba(15,23,42,0.08)]"}`,children:[u.role==="assistant"&&c.jsxs("div",{className:"mb-3 flex items-center gap-2 text-gray-500",children:[c.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-[var(--app-accent)]/10 text-[var(--app-accent)]",children:c.jsx(Ws,{className:"h-4 w-4",strokeWidth:2})}),c.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Luma"})]}),c.jsx("div",{className:`whitespace-pre-wrap text-sm leading-relaxed ${u.role==="user"?"text-white":"text-gray-900"}`,children:u.content}),u.supportingData&&c.jsx("div",{className:"mt-4 border-t border-gray-100 pt-4",children:c.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[u.supportingData.total_deals!==void 0&&c.jsx(ss,{label:"Total Deals",value:u.supportingData.total_deals,accent:"blue"}),u.supportingData.total_gci!==void 0&&c.jsx(ss,{label:"Total GCI",value:`$${u.supportingData.total_gci.toLocaleString("en-US",{maximumFractionDigits:0})}`,accent:"green"}),u.supportingData.closed_deals!==void 0&&c.jsx(ss,{label:"Closed Deals",value:u.supportingData.closed_deals,accent:"indigo"}),u.supportingData.active_deals!==void 0&&c.jsx(ss,{label:"Active Deals",value:u.supportingData.active_deals,accent:"orange"}),u.supportingData.under_contract!==void 0&&c.jsx(ss,{label:"Under Contract",value:u.supportingData.under_contract,accent:"purple"}),u.supportingData.team_members!==void 0&&c.jsx(ss,{label:"Team Members",value:u.supportingData.team_members,accent:"teal"})]})})]})},d)),i&&c.jsx("div",{className:"flex justify-start",children:c.jsxs("div",{className:"max-w-3xl rounded-3xl border border-white/80 bg-white/90 px-5 py-4 shadow-[0_15px_30px_rgba(15,23,42,0.08)]",children:[c.jsxs("div",{className:"mb-2 flex items-center gap-2 text-gray-500",children:[c.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-[var(--app-accent)]/10 text-[var(--app-accent)]",children:c.jsx(Ws,{className:"h-4 w-4"})}),c.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Luma"})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400"}),c.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400",style:{animationDelay:"0.1s"}}),c.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400",style:{animationDelay:"0.2s"}})]})]})})]}),c.jsx("form",{onSubmit:o,className:"border-t border-white/60 bg-white/80 px-4 py-4 backdrop-blur sm:px-6",children:c.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end",children:[c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("div",{className:"rounded-2xl border border-[#d0e2ff] bg-white px-4 py-3 shadow-inner focus-within:border-[var(--app-accent)]/40 focus-within:ring-2 focus-within:ring-[var(--app-accent)]/15",children:c.jsx("input",{type:"text",value:r,onChange:u=>n(u.target.value),placeholder:"Ask Luma anything about your pipeline...",className:"w-full border-none bg-transparent text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none",disabled:i})}),c.jsx("p",{className:"text-[11px] text-gray-500",children:"Enter to send  Luma respects the same roles as PipelineIQ."})]}),c.jsxs("button",{type:"submit",disabled:i||!r.trim(),className:"inline-flex items-center justify-center gap-2 rounded-2xl bg-[rgb(0,122,255)] px-6 py-3 text-sm font-semibold text-white shadow-[0_20px_40px_rgba(0,122,255,0.35)] transition hover:bg-[rgb(0,100,210)] disabled:opacity-60",children:[c.jsx(CL,{className:"h-4 w-4"}),c.jsx("span",{children:"Send"})]})]})})]})]})}const kQ={blue:"from-blue-50 to-blue-100 text-blue-900",green:"from-emerald-50 to-emerald-100 text-emerald-900",indigo:"from-indigo-50 to-indigo-100 text-indigo-900",orange:"from-orange-50 to-orange-100 text-orange-900",purple:"from-purple-50 to-purple-100 text-purple-900",teal:"from-teal-50 to-teal-100 text-teal-900"};function ss({label:e,value:t,accent:r}){return c.jsxs("div",{className:`rounded-2xl bg-gradient-to-br ${kQ[r]} px-4 py-3`,children:[c.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-500",children:e}),c.jsx("div",{className:"text-xl font-semibold text-gray-900",children:t})]})}const yv=[{name:"Snow",value:"#F9FAFB"},{name:"Pearl",value:"#F3F4F6"},{name:"Mist",value:"#E5E7EB"},{name:"Silver Fog",value:"#D1D5DB"},{name:"Ice Blue",value:"#E8F1FF"},{name:"Cloud Blue",value:"#D6E7FF"},{name:"Sky Wash",value:"#C3DBFF"},{name:"Pale Azure",value:"#AECFFF"},{name:"Soft Blue",value:"#98C3FF"},{name:"Bluebell",value:"#87B6F9"},{name:"Foggy Indigo",value:"#AEB8D9"},{name:"Lavender Mist",value:"#F2EDFF"},{name:"Lilac Whisper",value:"#E8E2FF"},{name:"Soft Violet",value:"#D8D0FF"},{name:"Periwinkle Light",value:"#C7C3FF"},{name:"Muted Orchid",value:"#B7B2F2"},{name:"Barely Purple",value:"#DDD6F6"},{name:"Blush Tint",value:"#FFE8F3"},{name:"Pink Dew",value:"#FFD6E8"},{name:"Rosewater",value:"#F9C8DB"},{name:"Petal Pink",value:"#F5B8CD"},{name:"Soft Berry",value:"#E8A7C3"},{name:"Muted Magenta",value:"#D3A6C9"},{name:"Rose Mist",value:"#FFE5E5"},{name:"Pale Coral",value:"#FFD4D4"},{name:"Soft Clay",value:"#F5B8B8"},{name:"Muted Red",value:"#EFA9A9"},{name:"Peach Wash",value:"#FFF1E6"},{name:"Apricot Mist",value:"#FFE3CC"},{name:"Soft Tangerine",value:"#FFD1AE"},{name:"Warm Peach",value:"#F7C39C"},{name:"Muted Orange",value:"#E7B690"},{name:"Sunhaze",value:"#FFF8DD"},{name:"Lemon Tint",value:"#FFF2BB"},{name:"Buttercream",value:"#FFECA1"},{name:"Golden Mist",value:"#FFE38C"},{name:"Muted Amber",value:"#F6D67C"},{name:"Mint Wash",value:"#E6FFF5"},{name:"Soft Mint",value:"#CFF9EA"},{name:"Pale Green",value:"#B7F0D9"},{name:"Seafoam",value:"#A1E8CC"},{name:"Soft Teal",value:"#8EDCC0"},{name:"Muted Green",value:"#7BCDB1"},{name:"Aqua Mist",value:"#E5FAFF"},{name:"Arctic Blue",value:"#CDF2FA"},{name:"Icy Teal",value:"#B5E8F0"},{name:"Soft Cyan",value:"#A1DEEA"},{name:"Muted Teal",value:"#8DCFD9"},{name:"Sandstone",value:"#F7EFE6"},{name:"Driftwood",value:"#EADFD2"},{name:"Clay Neutral",value:"#DDCEBF"},{name:"Soft Taupe",value:"#CFC1B2"}],Jo=yv[0].value;function NQ({value:e,onChange:t}){const r=e?Hf(e):Jo,n=r.toLowerCase(),i=yv.find(a=>a.value.toLowerCase()===n);return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-gray-200/70 bg-white/80 p-4 shadow-inner",children:[c.jsxs("div",{className:"relative flex h-12 w-12 items-center justify-center rounded-2xl border border-white/40 shadow",children:[c.jsx("span",{className:"absolute inset-0 rounded-2xl",style:{backgroundColor:r}}),c.jsx(vd,{className:"relative h-5 w-5 text-white drop-shadow",strokeWidth:2.5})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Selected color"}),c.jsx("span",{className:"text-xs text-gray-500",children:i?"From palette":"Custom"})]})]}),c.jsx("div",{className:"grid grid-cols-6 gap-3 sm:grid-cols-8",children:yv.map(a=>{const s=a.value.toLowerCase()===n;return c.jsxs("button",{type:"button",onClick:()=>t(a.value),className:`relative h-10 w-10 rounded-2xl border transition focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--app-accent)]/40 ${s?"border-[var(--app-accent)] shadow-[0_8px_18px_rgba(15,23,42,0.15)]":"border-white/70 shadow-inner hover:border-gray-300"}`,style:{backgroundColor:a.value},"aria-label":`${a.name} color`,children:[s&&c.jsx(vd,{className:"absolute inset-0 m-auto h-4 w-4 text-white drop-shadow",strokeWidth:2.5}),c.jsx("span",{className:"sr-only",children:a.name})]},a.value)})})]})}function EQ({status:e,onEdit:t,onDelete:r}){const{attributes:n,listeners:i,setNodeRef:a,transform:s,transition:o,isDragging:l}=Uy({id:e.id}),u={transform:Pn.Transform.toString(s),transition:o,opacity:l?.5:1},d=qf(e.color);return c.jsxs("div",{ref:a,style:u,className:"bg-white border border-gray-200/60 rounded-xl p-4 flex items-center gap-4 hover:shadow-sm hover:border-gray-300 transition-all",children:[c.jsx("div",{...n,...i,className:"cursor-grab active:cursor-grabbing",children:c.jsx(b2,{className:"w-5 h-5 text-gray-400"})}),c.jsxs("div",{className:"flex-1 flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-4 h-4 rounded-full shadow-sm",style:{backgroundColor:d.bg}}),c.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.name})]}),c.jsxs("span",{className:"text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded-lg",children:["Order: ",e.sort_order]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>t(e),className:"p-2 text-gray-600 hover:text-[rgb(0,122,255)] hover:bg-blue-50 rounded-lg transition",title:"Edit status",children:c.jsx(S2,{className:"w-4 h-4",strokeWidth:2})}),c.jsx("button",{onClick:()=>r(e.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete status",children:c.jsx(La,{className:"w-4 h-4",strokeWidth:2})})]})]})}function CQ({status:e}){const t=qf(e.color);return c.jsxs("div",{className:"bg-white border border-gray-200/60 rounded-xl p-4 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:t.bg}}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.name}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Order ",e.sort_order]})]})]}),c.jsx("span",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:"View only"})]})}function PQ({canEdit:e=!0}){const{statuses:t,loading:r,addStatus:n,updateStatus:i,deleteStatus:a,reorderStatuses:s,applyTemplate:o,createCustomWorkflow:l}=MT(),[u,d]=m.useState(!1),[f,h]=m.useState(!1),[p,g]=m.useState(null),[v,y]=m.useState(""),[x,w]=m.useState(Jo),[b,_]=m.useState(null),[j,S]=m.useState(!1),k=Ty(Ay(lc,{activationConstraint:{distance:8}})),N=async F=>{const{active:K,over:U}=F;if(!U||K.id===U.id)return;const H=t.findIndex(ae=>ae.id===K.id),R=t.findIndex(ae=>ae.id===U.id),B=[...t],[G]=B.splice(H,1);B.splice(R,0,G);try{await s(B)}catch(ae){console.error("Error reordering:",ae),_("Failed to reorder statuses")}},C=async()=>{if(!v.trim()){_("Status name is required");return}S(!0),_(null);try{p?await i(p.id,{name:v.trim(),color:x}):await n(v.trim(),x),E()}catch(F){console.error("Error saving status:",F),_(F instanceof Error?F.message:"Failed to save status")}finally{S(!1)}},E=()=>{h(!1),g(null),y(""),w(Jo),_(null)},P=async F=>{if(confirm("Are you sure you want to delete this status? This action cannot be undone."))try{await a(F)}catch(K){console.error("Error deleting status:",K),_(K instanceof Error?K.message:"Failed to delete status")}},I=F=>{g(F),y(F.name),w(Hf(F.color)||Jo),h(!0)},W=async F=>{try{await o(F)}catch(K){throw console.error("Error applying template:",K),K}};return r?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx(pr,{className:"w-8 h-8 animate-spin text-[rgb(0,122,255)]"})}):c.jsxs("div",{children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"hig-text-heading mb-2",children:"Pipeline Statuses"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Customize your pipeline stages, colors, and workflow order"}),!e&&c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Viewing workspace stages. Only admins can modify pipeline statuses."})]}),b&&c.jsxs("div",{className:"mb-4 flex items-center gap-3 p-4 rounded-xl bg-red-50 text-red-700 border border-red-200/60",children:[c.jsx(ni,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),c.jsx("span",{className:"text-sm font-medium",children:b})]}),e&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-6",children:[c.jsxs("button",{onClick:()=>{y(""),w(Jo),h(!0)},className:"hig-btn-primary",children:[c.jsx(Yi,{className:"w-4 h-4",strokeWidth:2}),c.jsx("span",{children:"Add Status"})]}),c.jsxs("button",{onClick:()=>d(!0),className:"hig-btn-secondary",children:[c.jsx(EL,{className:"w-4 h-4",strokeWidth:2}),c.jsx("span",{children:"Load Template"})]})]}),u&&c.jsx(LT,{onClose:()=>d(!1),onSelect:W,onCreateCustomWorkflow:l})]}),t.length===0?c.jsxs("div",{className:"bg-gray-50 rounded-xl p-12 text-center border border-gray-200/60",children:[c.jsx("p",{className:"text-gray-600 mb-4",children:"No pipeline stages configured"}),e?c.jsx("button",{onClick:()=>d(!0),className:"hig-btn-primary",children:"Load a Template to Get Started"}):c.jsx("p",{className:"text-sm text-gray-500",children:"Ask an admin to configure stages for this workspace."})]}):e?c.jsx(Ly,{sensors:k,collisionDetection:I2,onDragEnd:N,children:c.jsx(By,{items:t.map(F=>F.id),strategy:Z2,children:c.jsx("div",{className:"space-y-3",children:t.map(F=>c.jsx(EQ,{status:F,onEdit:I,onDelete:P},F.id))})})}):c.jsx("div",{className:"space-y-3",children:t.map(F=>c.jsx(CQ,{status:F},F.id))}),e&&f&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[c.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200/60",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:p?"Edit Status":"Add New Status"}),c.jsx("button",{onClick:E,className:"text-gray-400 hover:text-gray-600 transition p-2 hover:bg-gray-100 rounded-lg",children:c.jsx(oo,{className:"w-5 h-5",strokeWidth:2})})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Status Name"}),c.jsx("input",{type:"text",value:v,onChange:F=>y(F.target.value),className:"hig-input",placeholder:"e.g., Inspection, Appraisal",autoFocus:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:"Color"}),c.jsx(NQ,{value:x,onChange:w})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200/60 bg-gray-50/50",children:[c.jsx("button",{onClick:E,className:"hig-btn-secondary",children:"Cancel"}),c.jsx("button",{onClick:C,disabled:j||!v.trim(),className:"hig-btn-primary",children:j?c.jsxs(c.Fragment,{children:[c.jsx(pr,{className:"w-4 h-4 animate-spin",strokeWidth:2}),c.jsx("span",{children:"Saving..."})]}):c.jsxs("span",{children:[p?"Update":"Add"," Status"]})})]})]})})]})}const os=()=>({name:"",category:"",brokerage_split_rate:20,payout_structure:"standard",partnership_split_rate:35,partnership_notes:""});function OQ({canEdit:e=!0}){const{user:t}=gt(),[r,n]=m.useState([]),[i,a]=m.useState(!0),[s,o]=m.useState(!1),[l,u]=m.useState(!1),[d,f]=m.useState(null),[h,p]=m.useState(os()),[g,v]=m.useState(null);m.useEffect(()=>{y()},[t]);const y=async()=>{if(!t)return;const{data:k}=await X.from("lead_sources").select("*").eq("user_id",t.id).order("name");k&&n(k),a(!1)},x=async k=>{if(k.preventDefault(),!e||!t||!h.name.trim()){v("Lead source name is required");return}o(!0),v(null);try{const N={name:h.name,category:h.category||null,brokerage_split_rate:h.brokerage_split_rate/100,payout_structure:h.payout_structure,partnership_split_rate:h.payout_structure==="partnership"?h.partnership_split_rate/100:null,partnership_notes:h.payout_structure==="partnership"&&h.partnership_notes.trim()||null};if(d){const{error:C}=await X.from("lead_sources").update(N).eq("id",d.id);if(C)throw C}else{const{error:C}=await X.from("lead_sources").insert({user_id:t.id,...N});if(C)throw C}u(!1),p(os()),f(null),y()}catch(N){console.error("Error saving lead source:",N),v(N instanceof Error?N.message:"Failed to save lead source")}finally{o(!1)}},w=k=>{e&&(f(k),p({name:k.name,category:k.category||"",brokerage_split_rate:k.brokerage_split_rate*100,payout_structure:k.payout_structure,partnership_split_rate:(k.partnership_split_rate??.35)*100,partnership_notes:k.partnership_notes||""}),u(!0),v(null))},b=async k=>{if(e&&confirm("Are you sure you want to delete this lead source? This action cannot be undone."))try{const{error:N}=await X.from("lead_sources").delete().eq("id",k);if(N)throw N;y()}catch(N){console.error("Error deleting lead source:",N),v(N instanceof Error?N.message:"Failed to delete lead source")}},_=[{value:"online",label:"Online"},{value:"referral",label:"Referral"},{value:"event",label:"Event"},{value:"farming",label:"Farming"},{value:"advertising",label:"Advertising"},{value:"direct",label:"Direct"},{value:"other",label:"Other"}],j=[{value:"standard",title:"Standard Split",description:"Only your brokerage split applies."},{value:"partnership",title:"Partnership Program",description:"Pay the partner first, then split the remainder with your brokerage."}],S=k=>{const N={online:"bg-blue-50 text-blue-700 border-blue-200/60",referral:"bg-green-50 text-green-700 border-green-200/60",event:"bg-purple-50 text-purple-700 border-purple-200/60",farming:"bg-orange-50 text-orange-700 border-orange-200/60",advertising:"bg-pink-50 text-pink-700 border-pink-200/60",direct:"bg-cyan-50 text-cyan-700 border-cyan-200/60",other:"bg-gray-50 text-gray-700 border-gray-200/60"};return N[k||"other"]||N.other};return i?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx(pr,{className:"w-8 h-8 animate-spin text-[rgb(0,122,255)]"})}):c.jsxs("div",{children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"hig-text-heading mb-2",children:"Lead Sources"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Track where your leads come from and manage commission splits"}),!e&&c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"You can review workspace lead sources. Only admins can make edits."})]}),g&&c.jsxs("div",{className:"mb-4 flex items-center gap-3 p-4 rounded-xl bg-red-50 text-red-700 border border-red-200/60",children:[c.jsx(ni,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),c.jsx("span",{className:"text-sm font-medium",children:g})]}),e&&c.jsx("div",{className:"mb-6",children:c.jsxs("button",{onClick:()=>{u(!0),f(null),p(os()),v(null)},className:"hig-btn-primary",children:[c.jsx(Yi,{className:"w-4 h-4",strokeWidth:2}),c.jsx("span",{children:"Add Lead Source"})]})}),r.length===0?c.jsxs("div",{className:"bg-gray-50 rounded-xl p-12 text-center border border-gray-200/60",children:[c.jsx(gg,{className:"w-12 h-12 text-gray-400 mx-auto mb-4",strokeWidth:1.5}),c.jsx("p",{className:"text-gray-600 mb-4",children:"No lead sources configured yet"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Add your first lead source to start tracking where your deals come from"}),e?c.jsxs("button",{onClick:()=>{u(!0),f(null),p(os()),v(null)},className:"hig-btn-primary",children:[c.jsx(Yi,{className:"w-4 h-4",strokeWidth:2}),c.jsx("span",{children:"Add Lead Source"})]}):c.jsx("p",{className:"text-sm text-gray-500",children:"Ask an admin to add lead sources for your workspace."})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(k=>{var E;const N=k.payout_structure==="partnership",C=Math.round((k.partnership_split_rate??0)*100*10)/10;return c.jsxs("div",{className:"bg-white border border-gray-200/60 rounded-2xl p-5 hover:shadow-sm hover:border-gray-300 transition-all space-y-4",children:[c.jsxs("div",{className:"flex items-start justify-between gap-3",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:k.name}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[k.category&&c.jsxs("span",{className:`inline-flex items-center gap-1 text-xs font-medium px-2 py-1 rounded-lg border ${S(k.category)}`,children:[c.jsx(gg,{className:"w-3 h-3",strokeWidth:2}),((E=_.find(P=>P.value===k.category))==null?void 0:E.label)||k.category]}),c.jsxs("span",{className:`inline-flex items-center gap-1 text-xs font-medium px-2.5 py-1 rounded-full border ${N?"border-[rgb(0,122,255)]/30 text-[rgb(0,122,255)] bg-[rgb(0,122,255)]/5":"border-gray-200 text-gray-600 bg-gray-50"}`,children:[N?c.jsx(vL,{className:"w-3 h-3",strokeWidth:2}):c.jsx(Ws,{className:"w-3 h-3",strokeWidth:2}),N?"Partnership":"Standard Split"]})]})]}),e?c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:()=>w(k),className:"p-1.5 text-gray-600 hover:text-[rgb(0,122,255)] hover:bg-blue-50 rounded-lg transition",title:"Edit",children:c.jsx(S2,{className:"w-4 h-4",strokeWidth:2})}),c.jsx("button",{onClick:()=>b(k.id),className:"p-1.5 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete",children:c.jsx(La,{className:"w-4 h-4",strokeWidth:2})})]}):c.jsx("span",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:"View only"})]}),c.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50/60 p-4 space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-gray-600",children:"Brokerage Split"}),c.jsxs("span",{className:"font-semibold text-gray-900",children:[(k.brokerage_split_rate*100).toFixed(1),"%"]})]}),N&&c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-gray-600",children:"Partner Program"}),c.jsxs("span",{className:"font-semibold text-gray-900",children:[C.toFixed(1),"%"]})]}),c.jsxs("div",{className:"pt-3 border-t border-gray-200/70",children:[c.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-2",children:"Payout Flow"}),c.jsxs("ol",{className:"space-y-2 text-sm text-gray-700",children:[N&&c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"inline-flex w-6 h-6 items-center justify-center rounded-full bg-[rgb(0,122,255)]/10 text-[rgb(0,122,255)] text-xs font-semibold",children:"1"}),"Pay partner first (",C.toFixed(1),"% of gross commission)"]}),c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"inline-flex w-6 h-6 items-center justify-center rounded-full bg-[rgb(0,122,255)]/10 text-[rgb(0,122,255)] text-xs font-semibold",children:N?"2":"1"}),"Split remainder with brokerage (",(k.brokerage_split_rate*100).toFixed(1),"% to broker)"]})]})]})]}),N&&k.partnership_notes&&c.jsx("div",{className:"text-xs text-gray-500 bg-[rgb(0,122,255)]/5 border border-[rgb(0,122,255)]/10 rounded-xl p-3",children:k.partnership_notes})]},k.id)})}),e&&l&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[c.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200/60",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:d?"Edit Lead Source":"Add Lead Source"}),c.jsx("button",{onClick:()=>{u(!1),f(null),p(os()),v(null)},className:"text-gray-400 hover:text-gray-600 transition p-2 hover:bg-gray-100 rounded-lg",children:c.jsx(oo,{className:"w-5 h-5",strokeWidth:2})})]}),c.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Source Name"}),c.jsx("input",{type:"text",value:h.name,onChange:k=>p({...h,name:k.target.value}),className:"hig-input",placeholder:"e.g., Zillow, Past Client, Open House",required:!0,autoFocus:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:"Deal Structure"}),c.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:j.map(k=>{const N=h.payout_structure===k.value;return c.jsxs("button",{type:"button",onClick:()=>p({...h,payout_structure:k.value}),className:`text-left rounded-2xl border p-4 transition-all ${N?"border-[rgb(0,122,255)] bg-[rgb(0,122,255)]/5":"border-gray-200 hover:border-gray-300"}`,children:[c.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-1",children:k.title}),c.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:k.description})]},k.value)})}),c.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Choose partnership when working with platforms like Redfin or Zillow that take their fee before your team split."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Brokerage Split Rate"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"number",step:"0.5",value:h.brokerage_split_rate,onChange:k=>p({...h,brokerage_split_rate:Number.isNaN(parseFloat(k.target.value))?0:parseFloat(k.target.value)}),className:"hig-input pr-8",placeholder:"20",min:"0",max:"100"}),c.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]}),c.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Percentage of the remaining commission that goes to your brokerage/team."})]}),h.payout_structure==="partnership"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Partner Split Rate"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"number",step:"0.5",value:h.partnership_split_rate,onChange:k=>p({...h,partnership_split_rate:Number.isNaN(parseFloat(k.target.value))?0:parseFloat(k.target.value)}),className:"hig-input pr-8",placeholder:"35",min:"0",max:"100"}),c.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]}),c.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Portion of the gross commission that goes to the partner program before any brokerage split."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Partner Notes"}),c.jsx("textarea",{value:h.partnership_notes,onChange:k=>p({...h,partnership_notes:k.target.value}),className:"hig-input min-h-[88px]",placeholder:"e.g., Pay Redfin 35% within 5 days, then 50/50 split with brokerage"})]})]}),c.jsxs("div",{className:"rounded-2xl border border-gray-200/70 bg-gray-50/60 p-4",children:[c.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-3",children:"Payout Preview"}),c.jsxs("ol",{className:"space-y-3 text-sm text-gray-800",children:[h.payout_structure==="partnership"&&c.jsxs("li",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"inline-flex w-7 h-7 items-center justify-center rounded-full bg-[rgb(0,122,255)]/10 text-[rgb(0,122,255)] text-xs font-semibold",children:"1"}),"Pay partner first (",h.partnership_split_rate||0,"% of gross commission)"]}),c.jsxs("li",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"inline-flex w-7 h-7 items-center justify-center rounded-full bg-[rgb(0,122,255)]/10 text-[rgb(0,122,255)] text-xs font-semibold",children:h.payout_structure==="partnership"?"2":"1"}),"Split the remaining commission with your brokerage (",h.brokerage_split_rate||0,"% to broker)"]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2 border-t border-gray-200/60",children:[c.jsx("button",{type:"button",onClick:()=>{u(!1),f(null),p(os()),v(null)},className:"hig-btn-secondary",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:s||!h.name.trim(),className:"hig-btn-primary",children:s?c.jsxs(c.Fragment,{children:[c.jsx(pr,{className:"w-4 h-4 animate-spin",strokeWidth:2}),c.jsx("span",{children:"Saving..."})]}):c.jsxs("span",{children:[d?"Update":"Add"," Source"]})})]})]})]})})]})}function $T(){const{roleInfo:e}=gt(),t=(e==null?void 0:e.workspaceId)||null,[r,n]=m.useState(null),[i,a]=m.useState(!0),[s,o]=m.useState(null),l=m.useCallback(async()=>{if(!t){n(null),a(!1);return}a(!0),o(null);const{data:d,error:f}=await X.from("workspace_settings").select("*").eq("id",t).maybeSingle();f?(console.error("Error loading workspace settings:",f),o("Unable to load workspace settings.")):n(d),a(!1)},[t]);return m.useEffect(()=>{l()},[l]),{workspace:r,loading:i,error:s,refresh:l,updateWorkspace:async d=>{if(!t)return{error:new Error("Workspace not found")};const{data:f,error:h}=await X.from("workspace_settings").update({...d,updated_at:new Date().toISOString()}).eq("id",t).select("*").maybeSingle();return h?(console.error("Error updating workspace settings:",h),{error:h}):(f&&n(f),{error:null})}}}function AQ({canEdit:e}){const{workspace:t,loading:r,updateWorkspace:n}=$T(),[i,a]=m.useState({name:"",company_name:"",timezone:"America/Los_Angeles",locale:"en-US"}),[s,o]=m.useState(!1),[l,u]=m.useState(null);m.useEffect(()=>{t&&a({name:t.name||"",company_name:t.company_name||"",timezone:t.timezone||"America/Los_Angeles",locale:t.locale||"en-US"})},[t]);const d=async f=>{if(f.preventDefault(),!e)return;o(!0),u(null);const{error:h}=await n(i);u(h?{type:"error",text:"Unable to update workspace info."}:{type:"success",text:"Workspace updated."}),o(!1)};return r?c.jsx("div",{className:"flex items-center justify-center py-10",children:c.jsx(pr,{className:"w-6 h-6 animate-spin text-[var(--app-accent)]"})}):c.jsxs("div",{className:"max-w-2xl",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"hig-text-heading mb-2",children:"Workspace Info"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Identity, locale, and defaults shared across your workspace."}),!e&&c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Workspace details are managed by admins. You can view but not edit."})]}),c.jsxs("form",{onSubmit:d,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"Workspace Name"}),c.jsx("input",{type:"text",value:i.name,onChange:f=>a(h=>({...h,name:f.target.value})),className:"hig-input",disabled:!e,placeholder:"Northern Virginia Team"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"Company / Team"}),c.jsx("input",{type:"text",value:i.company_name,onChange:f=>a(h=>({...h,company_name:f.target.value})),className:"hig-input",disabled:!e,placeholder:"Luminex Ventures Realestate Group"})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"Timezone"}),c.jsxs("select",{value:i.timezone,onChange:f=>a(h=>({...h,timezone:f.target.value})),className:"hig-input",disabled:!e,children:[c.jsx("option",{value:"America/Los_Angeles",children:"Pacific (PT)"}),c.jsx("option",{value:"America/Denver",children:"Mountain (MT)"}),c.jsx("option",{value:"America/Chicago",children:"Central (CT)"}),c.jsx("option",{value:"America/New_York",children:"Eastern (ET)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"Locale"}),c.jsxs("select",{value:i.locale,onChange:f=>a(h=>({...h,locale:f.target.value})),className:"hig-input",disabled:!e,children:[c.jsx("option",{value:"en-US",children:"English (US)"}),c.jsx("option",{value:"en-CA",children:"English (Canada)"}),c.jsx("option",{value:"es-US",children:"Espaol"})]})]})]}),l&&c.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${l.type==="error"?"bg-red-50 text-red-700 border-red-200/60":"bg-green-50 text-green-700 border-green-200/60"}`,children:[l.type==="error"?c.jsx(ni,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}):c.jsx(Gi,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),c.jsx("span",{className:"text-sm font-medium",children:l.text})]}),e&&c.jsx("button",{type:"submit",className:"hig-btn-primary",disabled:s,children:s?c.jsxs(c.Fragment,{children:[c.jsx(pr,{className:"w-4 h-4 animate-spin",strokeWidth:2}),c.jsx("span",{children:"Saving"})]}):c.jsxs(c.Fragment,{children:[c.jsx(Lf,{className:"w-4 h-4",strokeWidth:2}),c.jsx("span",{children:"Save Workspace"})]})})]})]})}const Tj={crm:{provider:"Follow Up Boss",description:"Sync contacts + deals bi-directionally.",status:"not_connected"},email:{provider:"Google Workspace",description:"Log emails to deals and trigger automations.",status:"not_connected"},marketing:{provider:"Zapier",description:"Push new leads into PipelineIQ automatically.",status:"not_connected"}};function TQ({canEdit:e}){const{workspace:t,updateWorkspace:r}=$T(),[n,i]=m.useState(Tj),[a,s]=m.useState(null);m.useEffect(()=>{if(t!=null&&t.integration_settings){const l=t.integration_settings;i({...Tj,...l})}},[t==null?void 0:t.integration_settings]);const o=async l=>{if(!e)return;s(l);const u=n[l].status==="connected"?"not_connected":"connected",d={...n,[l]:{...n[l],status:u,lastSync:u==="connected"?new Date().toISOString():void 0}};i(d),await r({integration_settings:d}),s(null)};return c.jsxs("div",{children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"hig-text-heading mb-2",children:"Integrations"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Connect your CRM, email, and marketing tools so deals stay in sync."}),!e&&c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only workspace admins can manage integrations."})]}),c.jsx("div",{className:"space-y-4",children:Object.entries(n).map(([l,u])=>c.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-gray-200/70 bg-white/80 px-4 py-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-900",children:u.provider}),c.jsx("p",{className:"text-xs text-gray-500",children:u.description}),u.lastSync&&c.jsxs("p",{className:"text-[11px] text-gray-400 mt-1",children:["Last sync ",new Date(u.lastSync).toLocaleString()]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:`text-xs font-semibold ${u.status==="connected"?"text-emerald-600":"text-gray-500"}`,children:u.status==="connected"?"Connected":"Not connected"}),c.jsx("button",{type:"button",onClick:()=>o(l),disabled:!e||a===l,className:`rounded-full border px-4 py-2 text-sm font-semibold transition ${u.status==="connected"?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-gray-50 text-gray-600 border-gray-200"} ${e?"":"opacity-50 cursor-not-allowed"}`,children:u.status==="connected"?c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(OL,{className:"w-4 h-4"}),"Disconnect"]}):c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(PL,{className:"w-4 h-4"}),"Connect"]})})]})]},l))})]})}const DQ=[{title:"Deal Templates",description:"Define repeatable sets of tasks, stages, and documents for each pipeline type."},{title:"Custom Fields",description:"Capture additional data points (loan type, co-borrower, transaction coordinator) across every deal."},{title:"Default Views",description:"Control which boards, filters, and metrics new team members inherit on first login."}];function IQ({canEdit:e}){return c.jsxs("div",{children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"hig-text-heading mb-2",children:"Shared Configuration"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Templates, custom fields, and default views that keep your workspace aligned."}),!e&&c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ask an admin to adjust shared templates or defaults for the workspace."})]}),c.jsx("div",{className:"space-y-4",children:DQ.map(t=>c.jsx("div",{className:"rounded-2xl border border-gray-200/70 bg-white px-4 py-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:t.title}),c.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),c.jsx("button",{type:"button",className:`px-4 py-2 rounded-2xl border text-sm font-medium ${e?"border-gray-200 text-gray-700 hover:bg-gray-50":"border-gray-100 text-gray-400 cursor-not-allowed"}`,disabled:!e,children:e?"Configure":"View only"})]})},t.title))})]})}const RQ=[{id:"workspace.info",label:"Workspace Info",description:"Identity, locale, and defaults",icon:hL},{id:"workspace.pipeline-statuses",label:"Pipeline Statuses",description:"Shared stage definitions",icon:_2},{id:"workspace.lead-sources",label:"Lead Sources",description:"Partner & portal sources",icon:gg},{id:"workspace.integrations",label:"Integrations",description:"CRM & email connections",icon:NL},{id:"workspace.configuration",label:"Shared Configuration",description:"Templates & custom fields",icon:yL}];function MQ(){const{user:e,roleInfo:t}=gt(),r=Mf(t==null?void 0:t.globalRole),n=iL(t),[i,a]=m.useState("workspace.info"),s=()=>{switch(i){case"workspace.info":return c.jsx(AQ,{canEdit:n});case"workspace.pipeline-statuses":return c.jsx(PQ,{canEdit:n});case"workspace.lead-sources":return c.jsx(OQ,{canEdit:n});case"workspace.integrations":return c.jsx(TQ,{canEdit:n});case"workspace.configuration":default:return c.jsx(IQ,{canEdit:n})}};return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"flex flex-col gap-4 rounded-[var(--app-radius)] border border-[var(--app-border)] bg-white/90 p-6 shadow-[0_15px_45px_rgba(15,23,42,0.08)]",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 rounded-2xl bg-gray-100",children:c.jsx($f,{className:"w-6 h-6 text-gray-700"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Workspace Settings"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Configuration shared across your entire workspace"})]})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[c.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-gray-200/70 bg-white px-3 py-1",children:[c.jsx("span",{className:"text-[10px] uppercase tracking-[0.4em] text-gray-400",children:"Role"}),c.jsx("span",{className:"font-semibold text-gray-900",children:r})]}),!n&&c.jsx("span",{className:"text-xs text-gray-500",children:"Workspace configuration is managed by admins. You have read-only access."})]})]}),c.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[c.jsx("aside",{className:"lg:w-72 space-y-6",children:c.jsxs("div",{children:[c.jsx("p",{className:"px-2 pb-2 text-[11px] font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Workspace"}),c.jsx("div",{className:"space-y-1",children:RQ.map(o=>{const l=o.icon,u=i===o.id;return c.jsx("button",{onClick:()=>a(o.id),className:`w-full rounded-2xl border px-4 py-3 text-left transition ${u?"border-[rgb(0,122,255)] bg-[rgba(0,122,255,0.06)] shadow-[inset_0_0_0_1px_rgba(0,122,255,0.2)]":"border-white/60 bg-white hover:border-gray-200"}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:`rounded-2xl border p-2 ${u?"border-[rgba(0,122,255,0.3)] bg-white":"border-gray-100 bg-gray-50"}`,children:c.jsx(l,{className:`w-4 h-4 ${u?"text-[rgb(0,122,255)]":"text-gray-500"}`})}),c.jsxs("div",{children:[c.jsx("p",{className:`text-sm font-semibold ${u?"text-[rgb(0,122,255)]":"text-gray-800"}`,children:o.label}),c.jsx("p",{className:"text-xs text-gray-500",children:o.description})]})]})},o.id)})})]})}),c.jsx("section",{className:"flex-1 hig-card p-6",children:s()})]})]})}function LQ(){var f;const{user:e,roleInfo:t}=gt(),[r,n]=m.useState(((f=e==null?void 0:e.user_metadata)==null?void 0:f.name)||""),[i,a]=m.useState(!1),[s,o]=m.useState(null),l=async h=>{if(h.preventDefault(),!e)return;a(!0),o(null);const{error:p}=await X.auth.updateUser({data:{...e.user_metadata,name:r.trim()||e.email}});o(p?{type:"error",text:p.message||"Unable to update profile."}:{type:"success",text:"Profile updated."}),a(!1)},u=(r||(e==null?void 0:e.email)||"PI").split(" ").map(h=>h.charAt(0).toUpperCase()).slice(0,2).join(""),d=Mf(t==null?void 0:t.globalRole);return c.jsxs("div",{className:"max-w-2xl",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"hig-text-heading mb-2",children:"Profile"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Manage your display name, login email, and view the role assigned by your workspace admin."})]}),c.jsxs("form",{onSubmit:l,className:"space-y-8",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"h-16 w-16 rounded-2xl bg-[var(--app-accent)] text-white flex items-center justify-center text-xl font-semibold",children:u}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Signed in as"}),c.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e==null?void 0:e.email})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"Full Name"}),c.jsx("input",{type:"text",value:r,onChange:h=>n(h.target.value),className:"hig-input",placeholder:"Jane Agent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"Primary Email"}),c.jsx("input",{type:"email",value:(e==null?void 0:e.email)||"",disabled:!0,className:"hig-input bg-gray-50 text-gray-500"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Contact support to change your login email."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"Role"}),c.jsxs("div",{className:"hig-input bg-gray-50 text-gray-700 flex items-center gap-2",children:[c.jsx("span",{className:"inline-flex rounded-full bg-gray-100 px-2 py-0.5 text-[11px] uppercase tracking-wide text-gray-500",children:d}),c.jsx("span",{className:"text-sm text-gray-600",children:"Workspace permissions are managed by your admin."})]})]})]}),s&&c.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${s.type==="error"?"bg-red-50 text-red-700 border-red-200/60":"bg-green-50 text-green-700 border-green-200/60"}`,children:[s.type==="error"?c.jsx(ni,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}):c.jsx(Gi,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),c.jsx("span",{className:"text-sm font-medium",children:s.text})]}),c.jsx("div",{className:"flex gap-3",children:c.jsx("button",{type:"submit",className:"hig-btn-primary",disabled:i,children:i?c.jsxs(c.Fragment,{children:[c.jsx(pr,{className:"w-4 h-4 animate-spin",strokeWidth:2}),c.jsx("span",{children:"Saving"})]}):c.jsxs(c.Fragment,{children:[c.jsx(Lf,{className:"w-4 h-4",strokeWidth:2}),c.jsx("span",{children:"Save Profile"})]})})})]})]})}function $Q(){const[e,t]=m.useState({newPassword:"",confirmPassword:""}),[r,n]=m.useState(!1),[i,a]=m.useState(null),s=async o=>{if(o.preventDefault(),!e.newPassword||e.newPassword!==e.confirmPassword){a({type:"error",text:"Passwords must match."});return}n(!0),a(null);const{error:l}=await X.auth.updateUser({password:e.newPassword});l?a({type:"error",text:l.message||"Unable to update password."}):(a({type:"success",text:"Password updated successfully."}),t({newPassword:"",confirmPassword:""})),n(!1)};return c.jsxs("div",{className:"max-w-xl",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"hig-text-heading mb-2",children:"Password & Security"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Update your login password. Changes apply immediately across all PipelineIQ sessions."})]}),c.jsxs("form",{onSubmit:s,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"New Password"}),c.jsx("input",{type:"password",value:e.newPassword,onChange:o=>t(l=>({...l,newPassword:o.target.value})),className:"hig-input",minLength:8,required:!0}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use at least 8 characters including a number or symbol."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"hig-label",children:"Confirm Password"}),c.jsx("input",{type:"password",value:e.confirmPassword,onChange:o=>t(l=>({...l,confirmPassword:o.target.value})),className:"hig-input",required:!0})]}),i&&c.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${i.type==="error"?"bg-red-50 text-red-700 border-red-200/60":"bg-green-50 text-emerald-700 border-emerald-200/60"}`,children:[i.type==="error"?c.jsx(g2,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}):c.jsx(N2,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),c.jsx("span",{className:"text-sm font-medium",children:i.text})]}),c.jsx("button",{type:"submit",className:"hig-btn-primary",disabled:r,children:r?c.jsxs(c.Fragment,{children:[c.jsx(pr,{className:"w-4 h-4 animate-spin",strokeWidth:2}),c.jsx("span",{children:"Updating"})]}):c.jsx("span",{children:"Update Password"})})]})]})}const FQ=[{id:"new_lead",label:"New lead assigned"},{id:"stage_change",label:"Deal moved to a new stage"},{id:"reminders",label:"Task & follow-up reminders"},{id:"analytics",label:"Weekly pipeline summary"}],Dj={new_lead:!0,stage_change:!0,reminders:!0,analytics:!1};function BQ(){var l;const{user:e}=gt(),[t,r]=m.useState(Dj),[n,i]=m.useState(!1),[a,s]=m.useState(null);m.useEffect(()=>{var u;(u=e==null?void 0:e.user_metadata)!=null&&u.notifications&&r({...Dj,...e.user_metadata.notifications})},[(l=e==null?void 0:e.user_metadata)==null?void 0:l.notifications]);const o=async()=>{if(!e)return;i(!0),s(null);const{error:u}=await X.auth.updateUser({data:{...e.user_metadata,notifications:t}});s(u?{type:"error",text:u.message||"Unable to update notifications."}:{type:"success",text:"Notification preferences saved."}),i(!1)};return c.jsxs("div",{className:"max-w-2xl",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"hig-text-heading mb-2",children:"Notifications"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Choose which alerts to receive. These preferences only affect your PipelineIQ account."})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"space-y-4",children:FQ.map(u=>c.jsxs("label",{className:"flex items-center justify-between rounded-2xl border border-gray-200/70 bg-white/90 px-4 py-3",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:u.label}),c.jsx("p",{className:"text-xs text-gray-500",children:"Delivered via email & in-app"})]}),c.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-[var(--app-accent)] focus:ring-[var(--app-accent)]",checked:t[u.id]??!1,onChange:d=>r(f=>({...f,[u.id]:d.target.checked}))})]},u.id))}),a&&c.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${a.type==="error"?"bg-red-50 text-red-700 border-red-200/60":"bg-green-50 text-green-700 border-green-200/60"}`,children:[a.type==="error"?c.jsx(ni,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}):c.jsx(Gi,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),c.jsx("span",{className:"text-sm font-medium",children:a.text})]}),c.jsx("button",{onClick:o,className:"hig-btn-primary",disabled:n,children:n?c.jsxs(c.Fragment,{children:[c.jsx(pr,{className:"w-4 h-4 animate-spin",strokeWidth:2}),c.jsx("span",{children:"Saving"})]}):c.jsxs(c.Fragment,{children:[c.jsx(Lf,{className:"w-4 h-4",strokeWidth:2}),c.jsx("span",{children:"Save Preferences"})]})})]})]})}function UQ(){const{user:e}=gt(),[t,r]=m.useState(!0),[n,i]=m.useState(!1),[a,s]=m.useState(null),[o,l]=m.useState({annual_gci_goal:0,default_tax_rate:25,default_brokerage_split_rate:20});m.useEffect(()=>{u()},[e]);const u=async()=>{if(!e)return;const{data:f}=await X.from("user_settings").select("*").eq("user_id",e.id).maybeSingle();f&&l({annual_gci_goal:f.annual_gci_goal,default_tax_rate:f.default_tax_rate*100,default_brokerage_split_rate:f.default_brokerage_split_rate*100}),r(!1)},d=async f=>{if(f.preventDefault(),!e)return;i(!0),s(null);const{error:h}=await X.from("user_settings").upsert({user_id:e.id,annual_gci_goal:o.annual_gci_goal,default_tax_rate:o.default_tax_rate/100,default_brokerage_split_rate:o.default_brokerage_split_rate/100});h?s({type:"error",text:"Failed to save preferences. Please try again."}):(s({type:"success",text:"Preferences updated!"}),setTimeout(()=>s(null),3e3)),i(!1)};return t?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx(pr,{className:"w-8 h-8 animate-spin text-[rgb(0,122,255)]"})}):c.jsxs("div",{className:"max-w-2xl",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"hig-text-heading mb-2",children:"Personal Preferences"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Set your financial targets and default assumptions. These only apply to your profile."})]}),c.jsxs("form",{onSubmit:d,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Annual GCI Goal"}),c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"$"}),c.jsx("input",{type:"number",value:o.annual_gci_goal,onChange:f=>l({...o,annual_gci_goal:parseFloat(f.target.value)||0}),className:"hig-input pl-8",placeholder:"100000",min:"0",step:"1000"})]}),c.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Your personal net commission goal for the year."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Default Tax Allocation"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"number",step:"0.5",value:o.default_tax_rate,onChange:f=>l({...o,default_tax_rate:parseFloat(f.target.value)||0}),className:"hig-input pr-8",placeholder:"25",min:"0",max:"100"}),c.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]}),c.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Used to forecast take-home pay inside PipelineIQ."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Default Brokerage Split"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"number",step:"0.5",value:o.default_brokerage_split_rate,onChange:f=>l({...o,default_brokerage_split_rate:parseFloat(f.target.value)||0}),className:"hig-input pr-8",placeholder:"20",min:"0",max:"100"}),c.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]}),c.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Determines what portion of each deal is allocated to your brokerage by default."})]}),a&&c.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${a.type==="error"?"bg-red-50 text-red-700 border-red-200/60":"bg-green-50 text-green-700 border-green-200/60"}`,children:[a.type==="error"?c.jsx(ni,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}):c.jsx(Gi,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),c.jsx("span",{className:"text-sm font-medium",children:a.text})]}),c.jsx("div",{className:"pt-4 border-t border-gray-200/60 flex flex-wrap gap-3",children:c.jsx("button",{type:"submit",disabled:n,className:"hig-btn-primary px-8",children:n?c.jsxs(c.Fragment,{children:[c.jsx(pr,{className:"w-4 h-4 animate-spin",strokeWidth:2}),c.jsx("span",{children:"Saving"})]}):c.jsxs(c.Fragment,{children:[c.jsx(Lf,{className:"w-4 h-4",strokeWidth:2}),c.jsx("span",{children:"Save Preferences"})]})})})]})]})}const zQ=[{id:"personal.profile",label:"Profile",description:"Name & identity",icon:Ff},{id:"personal.security",label:"Password & Security",description:"Account protection",icon:N2},{id:"personal.notifications",label:"Notifications",description:"Email + in-app alerts",icon:fL},{id:"personal.preferences",label:"Preferences",description:"Goals & defaults",icon:E2}];function WQ(){const{user:e,roleInfo:t}=gt(),r=Mf(t==null?void 0:t.globalRole),[n,i]=m.useState("personal.profile"),a=()=>{switch(n){case"personal.profile":return c.jsx(LQ,{});case"personal.security":return c.jsx($Q,{});case"personal.notifications":return c.jsx(BQ,{});case"personal.preferences":default:return c.jsx(UQ,{})}};return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"flex flex-col gap-4 rounded-[var(--app-radius)] border border-[var(--app-border)] bg-white/90 p-6 shadow-[0_15px_45px_rgba(15,23,42,0.08)]",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 rounded-2xl bg-gray-100",children:c.jsx(Ff,{className:"w-6 h-6 text-gray-700"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Account Settings"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Preferences that only apply to your login."})]})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[c.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-gray-200/70 bg-white px-3 py-1",children:[c.jsx("span",{className:"text-[10px] uppercase tracking-[0.4em] text-gray-400",children:"Signed in"}),c.jsx("span",{className:"font-semibold text-gray-900",children:e==null?void 0:e.email})]}),c.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-gray-200/70 bg-white px-3 py-1",children:[c.jsx("span",{className:"text-[10px] uppercase tracking-[0.4em] text-gray-400",children:"Role"}),c.jsx("span",{className:"font-semibold text-gray-900",children:r})]})]})]}),c.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[c.jsx("aside",{className:"lg:w-72 space-y-6",children:c.jsxs("div",{children:[c.jsx("p",{className:"px-2 pb-2 text-[11px] font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Account"}),c.jsx("div",{className:"space-y-1",children:zQ.map(s=>{const o=s.icon,l=n===s.id;return c.jsx("button",{onClick:()=>i(s.id),className:`w-full rounded-2xl border px-4 py-3 text-left transition ${l?"border-[rgb(0,122,255)] bg-[rgba(0,122,255,0.06)] shadow-[inset_0_0_0_1px_rgba(0,122,255,0.2)]":"border-white/60 bg-white hover:border-gray-200"}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:`rounded-2xl border p-2 ${l?"border-[rgba(0,122,255,0.3)] bg-white":"border-gray-100 bg-gray-50"}`,children:c.jsx(o,{className:`w-4 h-4 ${l?"text-[rgb(0,122,255)]":"text-gray-500"}`})}),c.jsxs("div",{children:[c.jsx("p",{className:`text-sm font-semibold ${l?"text-[rgb(0,122,255)]":"text-gray-800"}`,children:s.label}),c.jsx("p",{className:"text-xs text-gray-500",children:s.description})]})]})},s.id)})})]})}),c.jsx("section",{className:"flex-1 hig-card p-6",children:a()})]})]})}const KQ=[{title:"AI Contract Drafting",description:"Instinctively assemble Dotloop-ready agreements from natural-language prompts."},{title:"Smart Field Autofill",description:"Pull buyer, seller, property, and financing data directly from your CRM or files."},{title:"Amendments in Seconds",description:"Request edits in plain English and regenerate updated paperwork instantly."},{title:"Compliance Checker",description:"Let AI scan for missing signatures, incorrect clauses, or jurisdictional nuances."},{title:"Team Collaboration Tools",description:"Shared templates, version history, and real-time updates for every stakeholder."}];function HQ(){const[e,t]=m.useState(""),[r,n]=m.useState("idle"),i=a=>{if(a.preventDefault(),!e.trim()){n("error");return}n("loading"),setTimeout(()=>{n("success"),t("")},1200)};return c.jsxs("div",{className:"min-h-screen bg-white text-slate-900 flex flex-col",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#f4f7fb] via-white to-[#eef4fa] pointer-events-none"}),c.jsx("header",{className:"relative z-10 border-b border-slate-200/60",children:c.jsx("div",{className:"max-w-5xl mx-auto px-6 py-6 flex items-center",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(qQ,{}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs tracking-[0.3em] text-slate-500 uppercase font-semibold",children:"Contract"}),c.jsx("p",{className:"text-xl font-semibold tracking-tight text-slate-800",children:"Scribe"})]})]})})}),c.jsxs("main",{className:"relative z-10 flex-1",children:[c.jsxs("section",{className:"max-w-4xl mx-auto px-6 py-16 text-center",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.4em] text-slate-500 mb-4",children:"ContractScribe"}),c.jsx("h1",{className:"text-4xl md:text-5xl font-semibold text-slate-900 leading-tight mb-4",children:"ContractScribe is Coming Soon"}),c.jsx("p",{className:"text-lg text-slate-600 mb-8 max-w-3xl mx-auto",children:"The fastest way for real-estate professionals to draft, edit, and manage contracts with AI-powered precision. Automation that feels human, accuracy that feels inevitable."}),c.jsxs("form",{onSubmit:i,className:"flex flex-col sm:flex-row gap-3 justify-center max-w-2xl mx-auto",children:[c.jsx("input",{type:"email",value:e,onChange:a=>{t(a.target.value),r!=="idle"&&n("idle")},placeholder:"Enter your work email",className:"flex-1 rounded-2xl border border-slate-200/80 bg-white/90 px-5 py-3 text-sm shadow-inner focus:outline-none focus:ring-2 focus:ring-[#0E4B72]/20 focus:border-[#0E4B72]/50"}),c.jsx("button",{type:"submit",className:"rounded-2xl bg-[#0E4B72] text-white font-semibold px-6 py-3 text-sm shadow-[0_12px_24px_rgba(14,75,114,0.25)] hover:bg-[#0b3c5b] transition-colors",disabled:r==="loading",children:r==="loading"?"Joining":r==="success"?"Added!":"Join the Waitlist"})]}),r==="success"&&c.jsx("p",{className:"mt-3 text-sm text-emerald-600 animate-fade-in",children:"Thanks! Well be in touch shortly."}),r==="error"&&c.jsx("p",{className:"mt-3 text-sm text-rose-500",children:"Please enter a valid email address."})]}),c.jsx("section",{className:"max-w-6xl mx-auto px-6 pb-16",children:c.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:KQ.map(a=>c.jsxs("div",{className:"rounded-2xl border border-slate-200/70 bg-white/80 p-6 shadow-[0_12px_30px_rgba(15,23,42,0.08)] hover:-translate-y-1 transition-transform",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-[#0E4B72] mb-3",children:"Coming Feature"}),c.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:a.title}),c.jsx("p",{className:"text-sm text-slate-600",children:a.description})]},a.title))})}),c.jsx("section",{className:"max-w-3xl mx-auto px-6 pb-20 text-center",children:c.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"ContractScribe empowers agents, teams, and brokerages with lightning-fast contract workflows so you can spend more time closing dealsnot filling out paperwork."})})]}),c.jsx("footer",{className:"relative z-10 border-t border-slate-200/70 bg-white/80 backdrop-blur",children:c.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-8 flex flex-col md:flex-row items-center justify-between gap-4 text-xs text-slate-500",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("span",{children:[" ",new Date().getFullYear()," ContractScribe"]}),c.jsx("span",{children:"Terms"}),c.jsx("span",{children:"Privacy"}),c.jsx("span",{children:"Security"})]}),c.jsxs("div",{className:"text-xs text-slate-500",children:["Made by ",c.jsx("span",{className:"font-semibold text-slate-700",children:"Luminex Ventures"})]})]})})]})}const qQ=()=>c.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 48 56","aria-hidden":"true",className:"drop-shadow-sm",children:[c.jsx("path",{d:"M2 12L22 0L22 32L2 44Z",fill:"#F3C6C5"}),c.jsx("path",{d:"M12 18L32 6V38L12 50Z",fill:"#CF7A7A"}),c.jsx("path",{d:"M22 24L42 12V44L22 56Z",fill:"#C85757"})]});function ca({children:e}){const{user:t,loading:r}=gt();return r?c.jsx("div",{className:"min-h-screen bg-[rgb(var(--color-app-bg))] flex items-center justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[rgb(0,122,255)]"})}):t?c.jsx($L,{children:e}):c.jsx(dd,{to:"/login",replace:!0})}function VQ({children:e}){const{user:t,loading:r}=gt();return r?c.jsx("div",{className:"min-h-screen bg-[rgb(var(--color-app-bg))] flex items-center justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[rgb(0,122,255)]"})}):t?c.jsx(dd,{to:"/",replace:!0}):c.jsx(c.Fragment,{children:e})}function GQ(){const[e,t]=m.useState(!0);return e?c.jsx(FL,{onToggle:()=>t(!1)}):c.jsx(BL,{onToggle:()=>t(!0)})}function YQ(){return c.jsx(aL,{children:c.jsx(CM,{children:c.jsxs(iM,{children:[c.jsx(Ir,{path:"/login",element:c.jsx(VQ,{children:c.jsx(GQ,{})})}),c.jsx(Ir,{path:"/",element:c.jsx(ca,{children:c.jsx(YJ,{})})}),c.jsx(Ir,{path:"/pipeline",element:c.jsx(ca,{children:c.jsx(vQ,{})})}),c.jsx(Ir,{path:"/tasks",element:c.jsx(ca,{children:c.jsx(_Q,{})})}),c.jsx(Ir,{path:"/luma",element:c.jsx(ca,{children:c.jsx(SQ,{})})}),c.jsx(Ir,{path:"/analytics",element:c.jsx(ca,{children:c.jsx(xQ,{})})}),c.jsx(Ir,{path:"/workspace-settings",element:c.jsx(ca,{children:c.jsx(MQ,{})})}),c.jsx(Ir,{path:"/settings",element:c.jsx(ca,{children:c.jsx(WQ,{})})}),c.jsx(Ir,{path:"/lead-sources",element:c.jsx(dd,{to:"/workspace-settings",replace:!0})}),c.jsx(Ir,{path:"/pipeline-settings",element:c.jsx(dd,{to:"/workspace-settings",replace:!0})}),c.jsx(Ir,{path:"/contractscribe",element:c.jsx(HQ,{})})]})})})}Vk(document.getElementById("root")).render(c.jsx(m.StrictMode,{children:c.jsx(YQ,{})}));
