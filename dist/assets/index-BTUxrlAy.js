var nI=Object.defineProperty;var aI=(e,t,r)=>t in e?nI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Hp=(e,t,r)=>aI(e,typeof t!="symbol"?t+"":t,r);function WS(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function Ga(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function iI(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var KS={exports:{}},sh={},HS={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bc=Symbol.for("react.element"),sI=Symbol.for("react.portal"),oI=Symbol.for("react.fragment"),lI=Symbol.for("react.strict_mode"),cI=Symbol.for("react.profiler"),uI=Symbol.for("react.provider"),dI=Symbol.for("react.context"),fI=Symbol.for("react.forward_ref"),hI=Symbol.for("react.suspense"),pI=Symbol.for("react.memo"),mI=Symbol.for("react.lazy"),Nb=Symbol.iterator;function gI(e){return e===null||typeof e!="object"?null:(e=Nb&&e[Nb]||e["@@iterator"],typeof e=="function"?e:null)}var qS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VS=Object.assign,GS={};function Ko(e,t,r){this.props=e,this.context=t,this.refs=GS,this.updater=r||qS}Ko.prototype.isReactComponent={};Ko.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ko.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function YS(){}YS.prototype=Ko.prototype;function yy(e,t,r){this.props=e,this.context=t,this.refs=GS,this.updater=r||qS}var xy=yy.prototype=new YS;xy.constructor=yy;VS(xy,Ko.prototype);xy.isPureReactComponent=!0;var kb=Array.isArray,XS=Object.prototype.hasOwnProperty,by={current:null},JS={key:!0,ref:!0,__self:!0,__source:!0};function QS(e,t,r){var n,a={},i=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)XS.call(t,n)&&!JS.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:Bc,type:e,key:i,ref:s,props:a,_owner:by.current}}function vI(e,t){return{$$typeof:Bc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function wy(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bc}function yI(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Cb=/\/+/g;function qp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yI(""+e.key):t.toString(36)}function hd(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Bc:case sI:s=!0}}if(s)return s=e,a=a(s),e=n===""?"."+qp(s,0):n,kb(a)?(r="",e!=null&&(r=e.replace(Cb,"$&/")+"/"),hd(a,t,r,"",function(u){return u})):a!=null&&(wy(a)&&(a=vI(a,r+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(Cb,"$&/")+"/")+e)),t.push(a)),1;if(s=0,n=n===""?".":n+":",kb(e))for(var o=0;o<e.length;o++){i=e[o];var c=n+qp(i,o);s+=hd(i,t,r,c,a)}else if(c=gI(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=n+qp(i,o++),s+=hd(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function xu(e,t,r){if(e==null)return e;var n=[],a=0;return hd(e,n,"","",function(i){return t.call(r,i,a++)}),n}function xI(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Dr={current:null},pd={transition:null},bI={ReactCurrentDispatcher:Dr,ReactCurrentBatchConfig:pd,ReactCurrentOwner:by};function ZS(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:xu,forEach:function(e,t,r){xu(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return xu(e,function(){t++}),t},toArray:function(e){return xu(e,function(t){return t})||[]},only:function(e){if(!wy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Fe.Component=Ko;Fe.Fragment=oI;Fe.Profiler=cI;Fe.PureComponent=yy;Fe.StrictMode=lI;Fe.Suspense=hI;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bI;Fe.act=ZS;Fe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=VS({},e.props),a=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=by.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)XS.call(t,c)&&!JS.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Bc,type:e.type,key:a,ref:i,props:n,_owner:s}};Fe.createContext=function(e){return e={$$typeof:dI,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:uI,_context:e},e.Consumer=e};Fe.createElement=QS;Fe.createFactory=function(e){var t=QS.bind(null,e);return t.type=e,t};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(e){return{$$typeof:fI,render:e}};Fe.isValidElement=wy;Fe.lazy=function(e){return{$$typeof:mI,_payload:{_status:-1,_result:e},_init:xI}};Fe.memo=function(e,t){return{$$typeof:pI,type:e,compare:t===void 0?null:t}};Fe.startTransition=function(e){var t=pd.transition;pd.transition={};try{e()}finally{pd.transition=t}};Fe.unstable_act=ZS;Fe.useCallback=function(e,t){return Dr.current.useCallback(e,t)};Fe.useContext=function(e){return Dr.current.useContext(e)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(e){return Dr.current.useDeferredValue(e)};Fe.useEffect=function(e,t){return Dr.current.useEffect(e,t)};Fe.useId=function(){return Dr.current.useId()};Fe.useImperativeHandle=function(e,t,r){return Dr.current.useImperativeHandle(e,t,r)};Fe.useInsertionEffect=function(e,t){return Dr.current.useInsertionEffect(e,t)};Fe.useLayoutEffect=function(e,t){return Dr.current.useLayoutEffect(e,t)};Fe.useMemo=function(e,t){return Dr.current.useMemo(e,t)};Fe.useReducer=function(e,t,r){return Dr.current.useReducer(e,t,r)};Fe.useRef=function(e){return Dr.current.useRef(e)};Fe.useState=function(e){return Dr.current.useState(e)};Fe.useSyncExternalStore=function(e,t,r){return Dr.current.useSyncExternalStore(e,t,r)};Fe.useTransition=function(){return Dr.current.useTransition()};Fe.version="18.3.1";HS.exports=Fe;var p=HS.exports;const ft=Ga(p),wI=WS({__proto__:null,default:ft},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _I=p,jI=Symbol.for("react.element"),SI=Symbol.for("react.fragment"),NI=Object.prototype.hasOwnProperty,kI=_I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CI={key:!0,ref:!0,__self:!0,__source:!0};function eN(e,t,r){var n,a={},i=null,s=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)NI.call(t,n)&&!CI.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:jI,type:e,key:i,ref:s,props:a,_owner:kI.current}}sh.Fragment=SI;sh.jsx=eN;sh.jsxs=eN;KS.exports=sh;var l=KS.exports,tN={exports:{}},mn={},rN={exports:{}},nN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,R){var F=D.length;D.push(R);e:for(;0<F;){var le=F-1>>>1,re=D[le];if(0<a(re,R))D[le]=R,D[F]=re,F=le;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var R=D[0],F=D.pop();if(F!==R){D[0]=F;e:for(var le=0,re=D.length,Ne=re>>>1;le<Ne;){var O=2*(le+1)-1,V=D[O],te=O+1,M=D[te];if(0>a(V,F))te<re&&0>a(M,V)?(D[le]=M,D[te]=F,le=te):(D[le]=V,D[O]=F,le=O);else if(te<re&&0>a(M,F))D[le]=M,D[te]=F,le=te;else break e}}return R}function a(D,R){var F=D.sortIndex-R.sortIndex;return F!==0?F:D.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var c=[],u=[],d=1,f=null,h=3,m=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var R=r(u);R!==null;){if(R.callback===null)n(u);else if(R.startTime<=D)n(u),R.sortIndex=R.expirationTime,t(c,R);else break;R=r(u)}}function _(D){if(y=!1,b(D),!g)if(r(c)!==null)g=!0,B(j);else{var R=r(u);R!==null&&K(_,R.startTime-D)}}function j(D,R){g=!1,y&&(y=!1,x(k),k=-1),m=!0;var F=h;try{for(b(R),f=r(c);f!==null&&(!(f.expirationTime>R)||D&&!P());){var le=f.callback;if(typeof le=="function"){f.callback=null,h=f.priorityLevel;var re=le(f.expirationTime<=R);R=e.unstable_now(),typeof re=="function"?f.callback=re:f===r(c)&&n(c),b(R)}else n(c);f=r(c)}if(f!==null)var Ne=!0;else{var O=r(u);O!==null&&K(_,O.startTime-R),Ne=!1}return Ne}finally{f=null,h=F,m=!1}}var S=!1,N=null,k=-1,C=5,E=-1;function P(){return!(e.unstable_now()-E<C)}function A(){if(N!==null){var D=e.unstable_now();E=D;var R=!0;try{R=N(!0,D)}finally{R?H():(S=!1,N=null)}}else S=!1}var H;if(typeof w=="function")H=function(){w(A)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ee=J.port2;J.port1.onmessage=A,H=function(){ee.postMessage(null)}}else H=function(){v(A,0)};function B(D){N=D,S||(S=!0,H())}function K(D,R){k=v(function(){D(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,B(j))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(D){switch(h){case 1:case 2:case 3:var R=3;break;default:R=h}var F=h;h=R;try{return D()}finally{h=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,R){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var F=h;h=D;try{return R()}finally{h=F}},e.unstable_scheduleCallback=function(D,R,F){var le=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?le+F:le):F=le,D){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=F+re,D={id:d++,callback:R,priorityLevel:D,startTime:F,expirationTime:re,sortIndex:-1},F>le?(D.sortIndex=F,t(u,D),r(c)===null&&D===r(u)&&(y?(x(k),k=-1):y=!0,K(_,F-le))):(D.sortIndex=re,t(c,D),g||m||(g=!0,B(j))),D},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(D){var R=h;return function(){var F=h;h=R;try{return D.apply(this,arguments)}finally{h=F}}}})(nN);rN.exports=nN;var EI=rN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PI=p,fn=EI;function ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var aN=new Set,tc={};function Ts(e,t){Eo(e,t),Eo(e+"Capture",t)}function Eo(e,t){for(tc[e]=t,e=0;e<t.length;e++)aN.add(t[e])}var Da=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lg=Object.prototype.hasOwnProperty,OI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Eb={},Pb={};function AI(e){return lg.call(Pb,e)?!0:lg.call(Eb,e)?!1:OI.test(e)?Pb[e]=!0:(Eb[e]=!0,!1)}function TI(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function DI(e,t,r,n){if(t===null||typeof t>"u"||TI(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ir(e,t,r,n,a,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var vr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vr[e]=new Ir(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vr[t]=new Ir(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){vr[e]=new Ir(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vr[e]=new Ir(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vr[e]=new Ir(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){vr[e]=new Ir(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){vr[e]=new Ir(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){vr[e]=new Ir(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){vr[e]=new Ir(e,5,!1,e.toLowerCase(),null,!1,!1)});var _y=/[\-:]([a-z])/g;function jy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(_y,jy);vr[t]=new Ir(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(_y,jy);vr[t]=new Ir(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(_y,jy);vr[t]=new Ir(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){vr[e]=new Ir(e,1,!1,e.toLowerCase(),null,!1,!1)});vr.xlinkHref=new Ir("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){vr[e]=new Ir(e,1,!1,e.toLowerCase(),null,!0,!0)});function Sy(e,t,r,n){var a=vr.hasOwnProperty(t)?vr[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(DI(t,r,a,n)&&(r=null),n||a===null?AI(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ya=PI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bu=Symbol.for("react.element"),to=Symbol.for("react.portal"),ro=Symbol.for("react.fragment"),Ny=Symbol.for("react.strict_mode"),cg=Symbol.for("react.profiler"),iN=Symbol.for("react.provider"),sN=Symbol.for("react.context"),ky=Symbol.for("react.forward_ref"),ug=Symbol.for("react.suspense"),dg=Symbol.for("react.suspense_list"),Cy=Symbol.for("react.memo"),oi=Symbol.for("react.lazy"),oN=Symbol.for("react.offscreen"),Ob=Symbol.iterator;function hl(e){return e===null||typeof e!="object"?null:(e=Ob&&e[Ob]||e["@@iterator"],typeof e=="function"?e:null)}var Ct=Object.assign,Vp;function Dl(e){if(Vp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Vp=t&&t[1]||""}return`
`+Vp+e}var Gp=!1;function Yp(e,t){if(!e||Gp)return"";Gp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(s!==1||o!==1)do if(s--,o--,0>o||a[s]!==i[o]){var c=`
`+a[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=o);break}}}finally{Gp=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Dl(e):""}function II(e){switch(e.tag){case 5:return Dl(e.type);case 16:return Dl("Lazy");case 13:return Dl("Suspense");case 19:return Dl("SuspenseList");case 0:case 2:case 15:return e=Yp(e.type,!1),e;case 11:return e=Yp(e.type.render,!1),e;case 1:return e=Yp(e.type,!0),e;default:return""}}function fg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ro:return"Fragment";case to:return"Portal";case cg:return"Profiler";case Ny:return"StrictMode";case ug:return"Suspense";case dg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case sN:return(e.displayName||"Context")+".Consumer";case iN:return(e._context.displayName||"Context")+".Provider";case ky:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Cy:return t=e.displayName||null,t!==null?t:fg(e.type)||"Memo";case oi:t=e._payload,e=e._init;try{return fg(e(t))}catch{}}return null}function RI(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fg(t);case 8:return t===Ny?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ei(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function lN(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function MI(e){var t=lN(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wu(e){e._valueTracker||(e._valueTracker=MI(e))}function cN(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=lN(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ad(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function hg(e,t){var r=t.checked;return Ct({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Ab(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ei(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function uN(e,t){t=t.checked,t!=null&&Sy(e,"checked",t,!1)}function pg(e,t){uN(e,t);var r=Ei(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?mg(e,t.type,r):t.hasOwnProperty("defaultValue")&&mg(e,t.type,Ei(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Tb(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function mg(e,t,r){(t!=="number"||Ad(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Il=Array.isArray;function go(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ei(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function gg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ne(91));return Ct({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Db(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ne(92));if(Il(r)){if(1<r.length)throw Error(ne(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ei(r)}}function dN(e,t){var r=Ei(t.value),n=Ei(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Ib(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function fN(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?fN(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var _u,hN=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(_u=_u||document.createElement("div"),_u.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_u.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Bl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$I=["Webkit","ms","Moz","O"];Object.keys(Bl).forEach(function(e){$I.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Bl[t]=Bl[e]})});function pN(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Bl.hasOwnProperty(e)&&Bl[e]?(""+t).trim():t+"px"}function mN(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=pN(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var LI=Ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yg(e,t){if(t){if(LI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ne(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ne(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ne(62))}}function xg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bg=null;function Ey(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wg=null,vo=null,yo=null;function Rb(e){if(e=Wc(e)){if(typeof wg!="function")throw Error(ne(280));var t=e.stateNode;t&&(t=dh(t),wg(e.stateNode,e.type,t))}}function gN(e){vo?yo?yo.push(e):yo=[e]:vo=e}function vN(){if(vo){var e=vo,t=yo;if(yo=vo=null,Rb(e),t)for(e=0;e<t.length;e++)Rb(t[e])}}function yN(e,t){return e(t)}function xN(){}var Xp=!1;function bN(e,t,r){if(Xp)return e(t,r);Xp=!0;try{return yN(e,t,r)}finally{Xp=!1,(vo!==null||yo!==null)&&(xN(),vN())}}function nc(e,t){var r=e.stateNode;if(r===null)return null;var n=dh(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ne(231,t,typeof r));return r}var _g=!1;if(Da)try{var pl={};Object.defineProperty(pl,"passive",{get:function(){_g=!0}}),window.addEventListener("test",pl,pl),window.removeEventListener("test",pl,pl)}catch{_g=!1}function FI(e,t,r,n,a,i,s,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Ul=!1,Td=null,Dd=!1,jg=null,BI={onError:function(e){Ul=!0,Td=e}};function UI(e,t,r,n,a,i,s,o,c){Ul=!1,Td=null,FI.apply(BI,arguments)}function zI(e,t,r,n,a,i,s,o,c){if(UI.apply(this,arguments),Ul){if(Ul){var u=Td;Ul=!1,Td=null}else throw Error(ne(198));Dd||(Dd=!0,jg=u)}}function Ds(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function wN(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Mb(e){if(Ds(e)!==e)throw Error(ne(188))}function WI(e){var t=e.alternate;if(!t){if(t=Ds(e),t===null)throw Error(ne(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Mb(a),e;if(i===n)return Mb(a),t;i=i.sibling}throw Error(ne(188))}if(r.return!==n.return)r=a,n=i;else{for(var s=!1,o=a.child;o;){if(o===r){s=!0,r=a,n=i;break}if(o===n){s=!0,n=a,r=i;break}o=o.sibling}if(!s){for(o=i.child;o;){if(o===r){s=!0,r=i,n=a;break}if(o===n){s=!0,n=i,r=a;break}o=o.sibling}if(!s)throw Error(ne(189))}}if(r.alternate!==n)throw Error(ne(190))}if(r.tag!==3)throw Error(ne(188));return r.stateNode.current===r?e:t}function _N(e){return e=WI(e),e!==null?jN(e):null}function jN(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=jN(e);if(t!==null)return t;e=e.sibling}return null}var SN=fn.unstable_scheduleCallback,$b=fn.unstable_cancelCallback,KI=fn.unstable_shouldYield,HI=fn.unstable_requestPaint,It=fn.unstable_now,qI=fn.unstable_getCurrentPriorityLevel,Py=fn.unstable_ImmediatePriority,NN=fn.unstable_UserBlockingPriority,Id=fn.unstable_NormalPriority,VI=fn.unstable_LowPriority,kN=fn.unstable_IdlePriority,oh=null,ha=null;function GI(e){if(ha&&typeof ha.onCommitFiberRoot=="function")try{ha.onCommitFiberRoot(oh,e,void 0,(e.current.flags&128)===128)}catch{}}var qn=Math.clz32?Math.clz32:JI,YI=Math.log,XI=Math.LN2;function JI(e){return e>>>=0,e===0?32:31-(YI(e)/XI|0)|0}var ju=64,Su=4194304;function Rl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Rd(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,s=r&268435455;if(s!==0){var o=s&~a;o!==0?n=Rl(o):(i&=s,i!==0&&(n=Rl(i)))}else s=r&~a,s!==0?n=Rl(s):i!==0&&(n=Rl(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-qn(t),a=1<<r,n|=e[r],t&=~a;return n}function QI(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZI(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-qn(i),o=1<<s,c=a[s];c===-1?(!(o&r)||o&n)&&(a[s]=QI(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function Sg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function CN(){var e=ju;return ju<<=1,!(ju&4194240)&&(ju=64),e}function Jp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Uc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-qn(t),e[t]=r}function eR(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-qn(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Oy(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-qn(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var et=0;function EN(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var PN,Ay,ON,AN,TN,Ng=!1,Nu=[],xi=null,bi=null,wi=null,ac=new Map,ic=new Map,fi=[],tR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lb(e,t){switch(e){case"focusin":case"focusout":xi=null;break;case"dragenter":case"dragleave":bi=null;break;case"mouseover":case"mouseout":wi=null;break;case"pointerover":case"pointerout":ac.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ic.delete(t.pointerId)}}function ml(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Wc(t),t!==null&&Ay(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function rR(e,t,r,n,a){switch(t){case"focusin":return xi=ml(xi,e,t,r,n,a),!0;case"dragenter":return bi=ml(bi,e,t,r,n,a),!0;case"mouseover":return wi=ml(wi,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return ac.set(i,ml(ac.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,ic.set(i,ml(ic.get(i)||null,e,t,r,n,a)),!0}return!1}function DN(e){var t=as(e.target);if(t!==null){var r=Ds(t);if(r!==null){if(t=r.tag,t===13){if(t=wN(r),t!==null){e.blockedOn=t,TN(e.priority,function(){ON(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function md(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=kg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);bg=n,r.target.dispatchEvent(n),bg=null}else return t=Wc(r),t!==null&&Ay(t),e.blockedOn=r,!1;t.shift()}return!0}function Fb(e,t,r){md(e)&&r.delete(t)}function nR(){Ng=!1,xi!==null&&md(xi)&&(xi=null),bi!==null&&md(bi)&&(bi=null),wi!==null&&md(wi)&&(wi=null),ac.forEach(Fb),ic.forEach(Fb)}function gl(e,t){e.blockedOn===t&&(e.blockedOn=null,Ng||(Ng=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,nR)))}function sc(e){function t(a){return gl(a,e)}if(0<Nu.length){gl(Nu[0],e);for(var r=1;r<Nu.length;r++){var n=Nu[r];n.blockedOn===e&&(n.blockedOn=null)}}for(xi!==null&&gl(xi,e),bi!==null&&gl(bi,e),wi!==null&&gl(wi,e),ac.forEach(t),ic.forEach(t),r=0;r<fi.length;r++)n=fi[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<fi.length&&(r=fi[0],r.blockedOn===null);)DN(r),r.blockedOn===null&&fi.shift()}var xo=Ya.ReactCurrentBatchConfig,Md=!0;function aR(e,t,r,n){var a=et,i=xo.transition;xo.transition=null;try{et=1,Ty(e,t,r,n)}finally{et=a,xo.transition=i}}function iR(e,t,r,n){var a=et,i=xo.transition;xo.transition=null;try{et=4,Ty(e,t,r,n)}finally{et=a,xo.transition=i}}function Ty(e,t,r,n){if(Md){var a=kg(e,t,r,n);if(a===null)om(e,t,n,$d,r),Lb(e,n);else if(rR(a,e,t,r,n))n.stopPropagation();else if(Lb(e,n),t&4&&-1<tR.indexOf(e)){for(;a!==null;){var i=Wc(a);if(i!==null&&PN(i),i=kg(e,t,r,n),i===null&&om(e,t,n,$d,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else om(e,t,n,null,r)}}var $d=null;function kg(e,t,r,n){if($d=null,e=Ey(n),e=as(e),e!==null)if(t=Ds(e),t===null)e=null;else if(r=t.tag,r===13){if(e=wN(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $d=e,null}function IN(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qI()){case Py:return 1;case NN:return 4;case Id:case VI:return 16;case kN:return 536870912;default:return 16}default:return 16}}var gi=null,Dy=null,gd=null;function RN(){if(gd)return gd;var e,t=Dy,r=t.length,n,a="value"in gi?gi.value:gi.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===a[i-n];n++);return gd=a.slice(e,1<n?1-n:void 0)}function vd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ku(){return!0}function Bb(){return!1}function gn(e){function t(r,n,a,i,s){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ku:Bb,this.isPropagationStopped=Bb,this}return Ct(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ku)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ku)},persist:function(){},isPersistent:ku}),t}var Ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Iy=gn(Ho),zc=Ct({},Ho,{view:0,detail:0}),sR=gn(zc),Qp,Zp,vl,lh=Ct({},zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ry,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vl&&(vl&&e.type==="mousemove"?(Qp=e.screenX-vl.screenX,Zp=e.screenY-vl.screenY):Zp=Qp=0,vl=e),Qp)},movementY:function(e){return"movementY"in e?e.movementY:Zp}}),Ub=gn(lh),oR=Ct({},lh,{dataTransfer:0}),lR=gn(oR),cR=Ct({},zc,{relatedTarget:0}),em=gn(cR),uR=Ct({},Ho,{animationName:0,elapsedTime:0,pseudoElement:0}),dR=gn(uR),fR=Ct({},Ho,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hR=gn(fR),pR=Ct({},Ho,{data:0}),zb=gn(pR),mR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yR(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=vR[e])?!!t[e]:!1}function Ry(){return yR}var xR=Ct({},zc,{key:function(e){if(e.key){var t=mR[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=vd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ry,charCode:function(e){return e.type==="keypress"?vd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bR=gn(xR),wR=Ct({},lh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wb=gn(wR),_R=Ct({},zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ry}),jR=gn(_R),SR=Ct({},Ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),NR=gn(SR),kR=Ct({},lh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),CR=gn(kR),ER=[9,13,27,32],My=Da&&"CompositionEvent"in window,zl=null;Da&&"documentMode"in document&&(zl=document.documentMode);var PR=Da&&"TextEvent"in window&&!zl,MN=Da&&(!My||zl&&8<zl&&11>=zl),Kb=" ",Hb=!1;function $N(e,t){switch(e){case"keyup":return ER.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LN(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var no=!1;function OR(e,t){switch(e){case"compositionend":return LN(t);case"keypress":return t.which!==32?null:(Hb=!0,Kb);case"textInput":return e=t.data,e===Kb&&Hb?null:e;default:return null}}function AR(e,t){if(no)return e==="compositionend"||!My&&$N(e,t)?(e=RN(),gd=Dy=gi=null,no=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return MN&&t.locale!=="ko"?null:t.data;default:return null}}var TR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!TR[e.type]:t==="textarea"}function FN(e,t,r,n){gN(n),t=Ld(t,"onChange"),0<t.length&&(r=new Iy("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Wl=null,oc=null;function DR(e){XN(e,0)}function ch(e){var t=so(e);if(cN(t))return e}function IR(e,t){if(e==="change")return t}var BN=!1;if(Da){var tm;if(Da){var rm="oninput"in document;if(!rm){var Vb=document.createElement("div");Vb.setAttribute("oninput","return;"),rm=typeof Vb.oninput=="function"}tm=rm}else tm=!1;BN=tm&&(!document.documentMode||9<document.documentMode)}function Gb(){Wl&&(Wl.detachEvent("onpropertychange",UN),oc=Wl=null)}function UN(e){if(e.propertyName==="value"&&ch(oc)){var t=[];FN(t,oc,e,Ey(e)),bN(DR,t)}}function RR(e,t,r){e==="focusin"?(Gb(),Wl=t,oc=r,Wl.attachEvent("onpropertychange",UN)):e==="focusout"&&Gb()}function MR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ch(oc)}function $R(e,t){if(e==="click")return ch(t)}function LR(e,t){if(e==="input"||e==="change")return ch(t)}function FR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gn=typeof Object.is=="function"?Object.is:FR;function lc(e,t){if(Gn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!lg.call(t,a)||!Gn(e[a],t[a]))return!1}return!0}function Yb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xb(e,t){var r=Yb(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Yb(r)}}function zN(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zN(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function WN(){for(var e=window,t=Ad();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ad(e.document)}return t}function $y(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function BR(e){var t=WN(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&zN(r.ownerDocument.documentElement,r)){if(n!==null&&$y(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Xb(r,i);var s=Xb(r,n);a&&s&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var UR=Da&&"documentMode"in document&&11>=document.documentMode,ao=null,Cg=null,Kl=null,Eg=!1;function Jb(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Eg||ao==null||ao!==Ad(n)||(n=ao,"selectionStart"in n&&$y(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Kl&&lc(Kl,n)||(Kl=n,n=Ld(Cg,"onSelect"),0<n.length&&(t=new Iy("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ao)))}function Cu(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var io={animationend:Cu("Animation","AnimationEnd"),animationiteration:Cu("Animation","AnimationIteration"),animationstart:Cu("Animation","AnimationStart"),transitionend:Cu("Transition","TransitionEnd")},nm={},KN={};Da&&(KN=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function uh(e){if(nm[e])return nm[e];if(!io[e])return e;var t=io[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in KN)return nm[e]=t[r];return e}var HN=uh("animationend"),qN=uh("animationiteration"),VN=uh("animationstart"),GN=uh("transitionend"),YN=new Map,Qb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(e,t){YN.set(e,t),Ts(t,[e])}for(var am=0;am<Qb.length;am++){var im=Qb[am],zR=im.toLowerCase(),WR=im[0].toUpperCase()+im.slice(1);Ii(zR,"on"+WR)}Ii(HN,"onAnimationEnd");Ii(qN,"onAnimationIteration");Ii(VN,"onAnimationStart");Ii("dblclick","onDoubleClick");Ii("focusin","onFocus");Ii("focusout","onBlur");Ii(GN,"onTransitionEnd");Eo("onMouseEnter",["mouseout","mouseover"]);Eo("onMouseLeave",["mouseout","mouseover"]);Eo("onPointerEnter",["pointerout","pointerover"]);Eo("onPointerLeave",["pointerout","pointerover"]);Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ml));function Zb(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,zI(n,t,void 0,e),e.currentTarget=null}function XN(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;Zb(a,o,u),i=c}else for(s=0;s<n.length;s++){if(o=n[s],c=o.instance,u=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;Zb(a,o,u),i=c}}}if(Dd)throw e=jg,Dd=!1,jg=null,e}function ut(e,t){var r=t[Dg];r===void 0&&(r=t[Dg]=new Set);var n=e+"__bubble";r.has(n)||(JN(t,e,2,!1),r.add(n))}function sm(e,t,r){var n=0;t&&(n|=4),JN(r,e,n,t)}var Eu="_reactListening"+Math.random().toString(36).slice(2);function cc(e){if(!e[Eu]){e[Eu]=!0,aN.forEach(function(r){r!=="selectionchange"&&(KR.has(r)||sm(r,!1,e),sm(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Eu]||(t[Eu]=!0,sm("selectionchange",!1,t))}}function JN(e,t,r,n){switch(IN(t)){case 1:var a=aR;break;case 4:a=iR;break;default:a=Ty}r=a.bind(null,t,r,e),a=void 0,!_g||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function om(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(s===4)for(s=n.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;s=s.return}for(;o!==null;){if(s=as(o),s===null)return;if(c=s.tag,c===5||c===6){n=i=s;continue e}o=o.parentNode}}n=n.return}bN(function(){var u=i,d=Ey(r),f=[];e:{var h=YN.get(e);if(h!==void 0){var m=Iy,g=e;switch(e){case"keypress":if(vd(r)===0)break e;case"keydown":case"keyup":m=bR;break;case"focusin":g="focus",m=em;break;case"focusout":g="blur",m=em;break;case"beforeblur":case"afterblur":m=em;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Ub;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=lR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=jR;break;case HN:case qN:case VN:m=dR;break;case GN:m=NR;break;case"scroll":m=sR;break;case"wheel":m=CR;break;case"copy":case"cut":case"paste":m=hR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Wb}var y=(t&4)!==0,v=!y&&e==="scroll",x=y?h!==null?h+"Capture":null:h;y=[];for(var w=u,b;w!==null;){b=w;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,x!==null&&(_=nc(w,x),_!=null&&y.push(uc(w,_,b)))),v)break;w=w.return}0<y.length&&(h=new m(h,g,null,r,d),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==bg&&(g=r.relatedTarget||r.fromElement)&&(as(g)||g[Ia]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=u,g=g?as(g):null,g!==null&&(v=Ds(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(y=Ub,_="onMouseLeave",x="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(y=Wb,_="onPointerLeave",x="onPointerEnter",w="pointer"),v=m==null?h:so(m),b=g==null?h:so(g),h=new y(_,w+"leave",m,r,d),h.target=v,h.relatedTarget=b,_=null,as(d)===u&&(y=new y(x,w+"enter",g,r,d),y.target=b,y.relatedTarget=v,_=y),v=_,m&&g)t:{for(y=m,x=g,w=0,b=y;b;b=Fs(b))w++;for(b=0,_=x;_;_=Fs(_))b++;for(;0<w-b;)y=Fs(y),w--;for(;0<b-w;)x=Fs(x),b--;for(;w--;){if(y===x||x!==null&&y===x.alternate)break t;y=Fs(y),x=Fs(x)}y=null}else y=null;m!==null&&ew(f,h,m,y,!1),g!==null&&v!==null&&ew(f,v,g,y,!0)}}e:{if(h=u?so(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var j=IR;else if(qb(h))if(BN)j=LR;else{j=MR;var S=RR}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=$R);if(j&&(j=j(e,u))){FN(f,j,r,d);break e}S&&S(e,h,u),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&mg(h,"number",h.value)}switch(S=u?so(u):window,e){case"focusin":(qb(S)||S.contentEditable==="true")&&(ao=S,Cg=u,Kl=null);break;case"focusout":Kl=Cg=ao=null;break;case"mousedown":Eg=!0;break;case"contextmenu":case"mouseup":case"dragend":Eg=!1,Jb(f,r,d);break;case"selectionchange":if(UR)break;case"keydown":case"keyup":Jb(f,r,d)}var N;if(My)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else no?$N(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(MN&&r.locale!=="ko"&&(no||k!=="onCompositionStart"?k==="onCompositionEnd"&&no&&(N=RN()):(gi=d,Dy="value"in gi?gi.value:gi.textContent,no=!0)),S=Ld(u,k),0<S.length&&(k=new zb(k,e,null,r,d),f.push({event:k,listeners:S}),N?k.data=N:(N=LN(r),N!==null&&(k.data=N)))),(N=PR?OR(e,r):AR(e,r))&&(u=Ld(u,"onBeforeInput"),0<u.length&&(d=new zb("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=N))}XN(f,t)})}function uc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ld(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=nc(e,r),i!=null&&n.unshift(uc(e,i,a)),i=nc(e,t),i!=null&&n.push(uc(e,i,a))),e=e.return}return n}function Fs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ew(e,t,r,n,a){for(var i=t._reactName,s=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,a?(c=nc(r,i),c!=null&&s.unshift(uc(r,c,o))):a||(c=nc(r,i),c!=null&&s.push(uc(r,c,o)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var HR=/\r\n?/g,qR=/\u0000|\uFFFD/g;function tw(e){return(typeof e=="string"?e:""+e).replace(HR,`
`).replace(qR,"")}function Pu(e,t,r){if(t=tw(t),tw(e)!==t&&r)throw Error(ne(425))}function Fd(){}var Pg=null,Og=null;function Ag(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Tg=typeof setTimeout=="function"?setTimeout:void 0,VR=typeof clearTimeout=="function"?clearTimeout:void 0,rw=typeof Promise=="function"?Promise:void 0,GR=typeof queueMicrotask=="function"?queueMicrotask:typeof rw<"u"?function(e){return rw.resolve(null).then(e).catch(YR)}:Tg;function YR(e){setTimeout(function(){throw e})}function lm(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),sc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);sc(t)}function _i(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function nw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var qo=Math.random().toString(36).slice(2),da="__reactFiber$"+qo,dc="__reactProps$"+qo,Ia="__reactContainer$"+qo,Dg="__reactEvents$"+qo,XR="__reactListeners$"+qo,JR="__reactHandles$"+qo;function as(e){var t=e[da];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ia]||r[da]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=nw(e);e!==null;){if(r=e[da])return r;e=nw(e)}return t}e=r,r=e.parentNode}return null}function Wc(e){return e=e[da]||e[Ia],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function so(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ne(33))}function dh(e){return e[dc]||null}var Ig=[],oo=-1;function Ri(e){return{current:e}}function ht(e){0>oo||(e.current=Ig[oo],Ig[oo]=null,oo--)}function lt(e,t){oo++,Ig[oo]=e.current,e.current=t}var Pi={},Sr=Ri(Pi),Hr=Ri(!1),ys=Pi;function Po(e,t){var r=e.type.contextTypes;if(!r)return Pi;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function qr(e){return e=e.childContextTypes,e!=null}function Bd(){ht(Hr),ht(Sr)}function aw(e,t,r){if(Sr.current!==Pi)throw Error(ne(168));lt(Sr,t),lt(Hr,r)}function QN(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(ne(108,RI(e)||"Unknown",a));return Ct({},r,n)}function Ud(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pi,ys=Sr.current,lt(Sr,e),lt(Hr,Hr.current),!0}function iw(e,t,r){var n=e.stateNode;if(!n)throw Error(ne(169));r?(e=QN(e,t,ys),n.__reactInternalMemoizedMergedChildContext=e,ht(Hr),ht(Sr),lt(Sr,e)):ht(Hr),lt(Hr,r)}var _a=null,fh=!1,cm=!1;function ZN(e){_a===null?_a=[e]:_a.push(e)}function QR(e){fh=!0,ZN(e)}function Mi(){if(!cm&&_a!==null){cm=!0;var e=0,t=et;try{var r=_a;for(et=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}_a=null,fh=!1}catch(a){throw _a!==null&&(_a=_a.slice(e+1)),SN(Py,Mi),a}finally{et=t,cm=!1}}return null}var lo=[],co=0,zd=null,Wd=0,_n=[],jn=0,xs=null,Na=1,ka="";function Yi(e,t){lo[co++]=Wd,lo[co++]=zd,zd=e,Wd=t}function ek(e,t,r){_n[jn++]=Na,_n[jn++]=ka,_n[jn++]=xs,xs=e;var n=Na;e=ka;var a=32-qn(n)-1;n&=~(1<<a),r+=1;var i=32-qn(t)+a;if(30<i){var s=a-a%5;i=(n&(1<<s)-1).toString(32),n>>=s,a-=s,Na=1<<32-qn(t)+a|r<<a|n,ka=i+e}else Na=1<<i|r<<a|n,ka=e}function Ly(e){e.return!==null&&(Yi(e,1),ek(e,1,0))}function Fy(e){for(;e===zd;)zd=lo[--co],lo[co]=null,Wd=lo[--co],lo[co]=null;for(;e===xs;)xs=_n[--jn],_n[jn]=null,ka=_n[--jn],_n[jn]=null,Na=_n[--jn],_n[jn]=null}var un=null,cn=null,mt=!1,Wn=null;function tk(e,t){var r=Sn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function sw(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,un=e,cn=_i(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,un=e,cn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=xs!==null?{id:Na,overflow:ka}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Sn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,un=e,cn=null,!0):!1;default:return!1}}function Rg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Mg(e){if(mt){var t=cn;if(t){var r=t;if(!sw(e,t)){if(Rg(e))throw Error(ne(418));t=_i(r.nextSibling);var n=un;t&&sw(e,t)?tk(n,r):(e.flags=e.flags&-4097|2,mt=!1,un=e)}}else{if(Rg(e))throw Error(ne(418));e.flags=e.flags&-4097|2,mt=!1,un=e}}}function ow(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;un=e}function Ou(e){if(e!==un)return!1;if(!mt)return ow(e),mt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ag(e.type,e.memoizedProps)),t&&(t=cn)){if(Rg(e))throw rk(),Error(ne(418));for(;t;)tk(e,t),t=_i(t.nextSibling)}if(ow(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){cn=_i(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}cn=null}}else cn=un?_i(e.stateNode.nextSibling):null;return!0}function rk(){for(var e=cn;e;)e=_i(e.nextSibling)}function Oo(){cn=un=null,mt=!1}function By(e){Wn===null?Wn=[e]:Wn.push(e)}var ZR=Ya.ReactCurrentBatchConfig;function yl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ne(309));var n=r.stateNode}if(!n)throw Error(ne(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var o=a.refs;s===null?delete o[i]:o[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(ne(284));if(!r._owner)throw Error(ne(290,e))}return e}function Au(e,t){throw e=Object.prototype.toString.call(t),Error(ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function lw(e){var t=e._init;return t(e._payload)}function nk(e){function t(x,w){if(e){var b=x.deletions;b===null?(x.deletions=[w],x.flags|=16):b.push(w)}}function r(x,w){if(!e)return null;for(;w!==null;)t(x,w),w=w.sibling;return null}function n(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function a(x,w){return x=ki(x,w),x.index=0,x.sibling=null,x}function i(x,w,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<w?(x.flags|=2,w):b):(x.flags|=2,w)):(x.flags|=1048576,w)}function s(x){return e&&x.alternate===null&&(x.flags|=2),x}function o(x,w,b,_){return w===null||w.tag!==6?(w=gm(b,x.mode,_),w.return=x,w):(w=a(w,b),w.return=x,w)}function c(x,w,b,_){var j=b.type;return j===ro?d(x,w,b.props.children,_,b.key):w!==null&&(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===oi&&lw(j)===w.type)?(_=a(w,b.props),_.ref=yl(x,w,b),_.return=x,_):(_=Sd(b.type,b.key,b.props,null,x.mode,_),_.ref=yl(x,w,b),_.return=x,_)}function u(x,w,b,_){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=vm(b,x.mode,_),w.return=x,w):(w=a(w,b.children||[]),w.return=x,w)}function d(x,w,b,_,j){return w===null||w.tag!==7?(w=fs(b,x.mode,_,j),w.return=x,w):(w=a(w,b),w.return=x,w)}function f(x,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=gm(""+w,x.mode,b),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case bu:return b=Sd(w.type,w.key,w.props,null,x.mode,b),b.ref=yl(x,null,w),b.return=x,b;case to:return w=vm(w,x.mode,b),w.return=x,w;case oi:var _=w._init;return f(x,_(w._payload),b)}if(Il(w)||hl(w))return w=fs(w,x.mode,b,null),w.return=x,w;Au(x,w)}return null}function h(x,w,b,_){var j=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:o(x,w,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case bu:return b.key===j?c(x,w,b,_):null;case to:return b.key===j?u(x,w,b,_):null;case oi:return j=b._init,h(x,w,j(b._payload),_)}if(Il(b)||hl(b))return j!==null?null:d(x,w,b,_,null);Au(x,b)}return null}function m(x,w,b,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return x=x.get(b)||null,o(w,x,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case bu:return x=x.get(_.key===null?b:_.key)||null,c(w,x,_,j);case to:return x=x.get(_.key===null?b:_.key)||null,u(w,x,_,j);case oi:var S=_._init;return m(x,w,b,S(_._payload),j)}if(Il(_)||hl(_))return x=x.get(b)||null,d(w,x,_,j,null);Au(w,_)}return null}function g(x,w,b,_){for(var j=null,S=null,N=w,k=w=0,C=null;N!==null&&k<b.length;k++){N.index>k?(C=N,N=null):C=N.sibling;var E=h(x,N,b[k],_);if(E===null){N===null&&(N=C);break}e&&N&&E.alternate===null&&t(x,N),w=i(E,w,k),S===null?j=E:S.sibling=E,S=E,N=C}if(k===b.length)return r(x,N),mt&&Yi(x,k),j;if(N===null){for(;k<b.length;k++)N=f(x,b[k],_),N!==null&&(w=i(N,w,k),S===null?j=N:S.sibling=N,S=N);return mt&&Yi(x,k),j}for(N=n(x,N);k<b.length;k++)C=m(N,x,k,b[k],_),C!==null&&(e&&C.alternate!==null&&N.delete(C.key===null?k:C.key),w=i(C,w,k),S===null?j=C:S.sibling=C,S=C);return e&&N.forEach(function(P){return t(x,P)}),mt&&Yi(x,k),j}function y(x,w,b,_){var j=hl(b);if(typeof j!="function")throw Error(ne(150));if(b=j.call(b),b==null)throw Error(ne(151));for(var S=j=null,N=w,k=w=0,C=null,E=b.next();N!==null&&!E.done;k++,E=b.next()){N.index>k?(C=N,N=null):C=N.sibling;var P=h(x,N,E.value,_);if(P===null){N===null&&(N=C);break}e&&N&&P.alternate===null&&t(x,N),w=i(P,w,k),S===null?j=P:S.sibling=P,S=P,N=C}if(E.done)return r(x,N),mt&&Yi(x,k),j;if(N===null){for(;!E.done;k++,E=b.next())E=f(x,E.value,_),E!==null&&(w=i(E,w,k),S===null?j=E:S.sibling=E,S=E);return mt&&Yi(x,k),j}for(N=n(x,N);!E.done;k++,E=b.next())E=m(N,x,k,E.value,_),E!==null&&(e&&E.alternate!==null&&N.delete(E.key===null?k:E.key),w=i(E,w,k),S===null?j=E:S.sibling=E,S=E);return e&&N.forEach(function(A){return t(x,A)}),mt&&Yi(x,k),j}function v(x,w,b,_){if(typeof b=="object"&&b!==null&&b.type===ro&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case bu:e:{for(var j=b.key,S=w;S!==null;){if(S.key===j){if(j=b.type,j===ro){if(S.tag===7){r(x,S.sibling),w=a(S,b.props.children),w.return=x,x=w;break e}}else if(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===oi&&lw(j)===S.type){r(x,S.sibling),w=a(S,b.props),w.ref=yl(x,S,b),w.return=x,x=w;break e}r(x,S);break}else t(x,S);S=S.sibling}b.type===ro?(w=fs(b.props.children,x.mode,_,b.key),w.return=x,x=w):(_=Sd(b.type,b.key,b.props,null,x.mode,_),_.ref=yl(x,w,b),_.return=x,x=_)}return s(x);case to:e:{for(S=b.key;w!==null;){if(w.key===S)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){r(x,w.sibling),w=a(w,b.children||[]),w.return=x,x=w;break e}else{r(x,w);break}else t(x,w);w=w.sibling}w=vm(b,x.mode,_),w.return=x,x=w}return s(x);case oi:return S=b._init,v(x,w,S(b._payload),_)}if(Il(b))return g(x,w,b,_);if(hl(b))return y(x,w,b,_);Au(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(r(x,w.sibling),w=a(w,b),w.return=x,x=w):(r(x,w),w=gm(b,x.mode,_),w.return=x,x=w),s(x)):r(x,w)}return v}var Ao=nk(!0),ak=nk(!1),Kd=Ri(null),Hd=null,uo=null,Uy=null;function zy(){Uy=uo=Hd=null}function Wy(e){var t=Kd.current;ht(Kd),e._currentValue=t}function $g(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function bo(e,t){Hd=e,Uy=uo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(zr=!0),e.firstContext=null)}function En(e){var t=e._currentValue;if(Uy!==e)if(e={context:e,memoizedValue:t,next:null},uo===null){if(Hd===null)throw Error(ne(308));uo=e,Hd.dependencies={lanes:0,firstContext:e}}else uo=uo.next=e;return t}var is=null;function Ky(e){is===null?is=[e]:is.push(e)}function ik(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Ky(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ra(e,n)}function Ra(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var li=!1;function Hy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ji(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,We&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Ra(e,r)}return a=n.interleaved,a===null?(t.next=t,Ky(n)):(t.next=a.next,a.next=t),n.interleaved=t,Ra(e,r)}function yd(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Oy(e,r)}}function cw(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=s:i=i.next=s,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function qd(e,t,r,n){var a=e.updateQueue;li=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,u=c.next;c.next=null,s===null?i=u:s.next=u,s=c;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==s&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;s=0,d=u=c=null,o=i;do{var h=o.lane,m=o.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,y=o;switch(h=t,m=r,y.tag){case 1:if(g=y.payload,typeof g=="function"){f=g.call(m,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,h=typeof g=="function"?g.call(m,f,h):g,h==null)break e;f=Ct({},f,h);break e;case 2:li=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,s|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do s|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);ws|=s,e.lanes=s,e.memoizedState=f}}function uw(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(ne(191,a));a.call(n)}}}var Kc={},pa=Ri(Kc),fc=Ri(Kc),hc=Ri(Kc);function ss(e){if(e===Kc)throw Error(ne(174));return e}function qy(e,t){switch(lt(hc,t),lt(fc,e),lt(pa,Kc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:vg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=vg(t,e)}ht(pa),lt(pa,t)}function To(){ht(pa),ht(fc),ht(hc)}function ok(e){ss(hc.current);var t=ss(pa.current),r=vg(t,e.type);t!==r&&(lt(fc,e),lt(pa,r))}function Vy(e){fc.current===e&&(ht(pa),ht(fc))}var Nt=Ri(0);function Vd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var um=[];function Gy(){for(var e=0;e<um.length;e++)um[e]._workInProgressVersionPrimary=null;um.length=0}var xd=Ya.ReactCurrentDispatcher,dm=Ya.ReactCurrentBatchConfig,bs=0,kt=null,Wt=null,tr=null,Gd=!1,Hl=!1,pc=0,e5=0;function xr(){throw Error(ne(321))}function Yy(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Gn(e[r],t[r]))return!1;return!0}function Xy(e,t,r,n,a,i){if(bs=i,kt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,xd.current=e===null||e.memoizedState===null?a5:i5,e=r(n,a),Hl){i=0;do{if(Hl=!1,pc=0,25<=i)throw Error(ne(301));i+=1,tr=Wt=null,t.updateQueue=null,xd.current=s5,e=r(n,a)}while(Hl)}if(xd.current=Yd,t=Wt!==null&&Wt.next!==null,bs=0,tr=Wt=kt=null,Gd=!1,t)throw Error(ne(300));return e}function Jy(){var e=pc!==0;return pc=0,e}function ca(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tr===null?kt.memoizedState=tr=e:tr=tr.next=e,tr}function Pn(){if(Wt===null){var e=kt.alternate;e=e!==null?e.memoizedState:null}else e=Wt.next;var t=tr===null?kt.memoizedState:tr.next;if(t!==null)tr=t,Wt=e;else{if(e===null)throw Error(ne(310));Wt=e,e={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},tr===null?kt.memoizedState=tr=e:tr=tr.next=e}return tr}function mc(e,t){return typeof t=="function"?t(e):t}function fm(e){var t=Pn(),r=t.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=e;var n=Wt,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var o=s=null,c=null,u=i;do{var d=u.lane;if((bs&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,s=n):c=c.next=f,kt.lanes|=d,ws|=d}u=u.next}while(u!==null&&u!==i);c===null?s=n:c.next=o,Gn(n,t.memoizedState)||(zr=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,kt.lanes|=i,ws|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function hm(e){var t=Pn(),r=t.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var s=a=a.next;do i=e(i,s.action),s=s.next;while(s!==a);Gn(i,t.memoizedState)||(zr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function lk(){}function ck(e,t){var r=kt,n=Pn(),a=t(),i=!Gn(n.memoizedState,a);if(i&&(n.memoizedState=a,zr=!0),n=n.queue,Qy(fk.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||tr!==null&&tr.memoizedState.tag&1){if(r.flags|=2048,gc(9,dk.bind(null,r,n,a,t),void 0,null),ar===null)throw Error(ne(349));bs&30||uk(r,t,a)}return a}function uk(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=kt.updateQueue,t===null?(t={lastEffect:null,stores:null},kt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function dk(e,t,r,n){t.value=r,t.getSnapshot=n,hk(t)&&pk(e)}function fk(e,t,r){return r(function(){hk(t)&&pk(e)})}function hk(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Gn(e,r)}catch{return!0}}function pk(e){var t=Ra(e,1);t!==null&&Vn(t,e,1,-1)}function dw(e){var t=ca();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mc,lastRenderedState:e},t.queue=e,e=e.dispatch=n5.bind(null,kt,e),[t.memoizedState,e]}function gc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=kt.updateQueue,t===null?(t={lastEffect:null,stores:null},kt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function mk(){return Pn().memoizedState}function bd(e,t,r,n){var a=ca();kt.flags|=e,a.memoizedState=gc(1|t,r,void 0,n===void 0?null:n)}function hh(e,t,r,n){var a=Pn();n=n===void 0?null:n;var i=void 0;if(Wt!==null){var s=Wt.memoizedState;if(i=s.destroy,n!==null&&Yy(n,s.deps)){a.memoizedState=gc(t,r,i,n);return}}kt.flags|=e,a.memoizedState=gc(1|t,r,i,n)}function fw(e,t){return bd(8390656,8,e,t)}function Qy(e,t){return hh(2048,8,e,t)}function gk(e,t){return hh(4,2,e,t)}function vk(e,t){return hh(4,4,e,t)}function yk(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xk(e,t,r){return r=r!=null?r.concat([e]):null,hh(4,4,yk.bind(null,t,e),r)}function Zy(){}function bk(e,t){var r=Pn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Yy(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function wk(e,t){var r=Pn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Yy(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function _k(e,t,r){return bs&21?(Gn(r,t)||(r=CN(),kt.lanes|=r,ws|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,zr=!0),e.memoizedState=r)}function t5(e,t){var r=et;et=r!==0&&4>r?r:4,e(!0);var n=dm.transition;dm.transition={};try{e(!1),t()}finally{et=r,dm.transition=n}}function jk(){return Pn().memoizedState}function r5(e,t,r){var n=Ni(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Sk(e))Nk(t,r);else if(r=ik(e,t,r,n),r!==null){var a=Ar();Vn(r,e,n,a),kk(r,t,n)}}function n5(e,t,r){var n=Ni(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Sk(e))Nk(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,o=i(s,r);if(a.hasEagerState=!0,a.eagerState=o,Gn(o,s)){var c=t.interleaved;c===null?(a.next=a,Ky(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=ik(e,t,a,n),r!==null&&(a=Ar(),Vn(r,e,n,a),kk(r,t,n))}}function Sk(e){var t=e.alternate;return e===kt||t!==null&&t===kt}function Nk(e,t){Hl=Gd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function kk(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Oy(e,r)}}var Yd={readContext:En,useCallback:xr,useContext:xr,useEffect:xr,useImperativeHandle:xr,useInsertionEffect:xr,useLayoutEffect:xr,useMemo:xr,useReducer:xr,useRef:xr,useState:xr,useDebugValue:xr,useDeferredValue:xr,useTransition:xr,useMutableSource:xr,useSyncExternalStore:xr,useId:xr,unstable_isNewReconciler:!1},a5={readContext:En,useCallback:function(e,t){return ca().memoizedState=[e,t===void 0?null:t],e},useContext:En,useEffect:fw,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,bd(4194308,4,yk.bind(null,t,e),r)},useLayoutEffect:function(e,t){return bd(4194308,4,e,t)},useInsertionEffect:function(e,t){return bd(4,2,e,t)},useMemo:function(e,t){var r=ca();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ca();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=r5.bind(null,kt,e),[n.memoizedState,e]},useRef:function(e){var t=ca();return e={current:e},t.memoizedState=e},useState:dw,useDebugValue:Zy,useDeferredValue:function(e){return ca().memoizedState=e},useTransition:function(){var e=dw(!1),t=e[0];return e=t5.bind(null,e[1]),ca().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=kt,a=ca();if(mt){if(r===void 0)throw Error(ne(407));r=r()}else{if(r=t(),ar===null)throw Error(ne(349));bs&30||uk(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,fw(fk.bind(null,n,i,e),[e]),n.flags|=2048,gc(9,dk.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=ca(),t=ar.identifierPrefix;if(mt){var r=ka,n=Na;r=(n&~(1<<32-qn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=pc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=e5++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},i5={readContext:En,useCallback:bk,useContext:En,useEffect:Qy,useImperativeHandle:xk,useInsertionEffect:gk,useLayoutEffect:vk,useMemo:wk,useReducer:fm,useRef:mk,useState:function(){return fm(mc)},useDebugValue:Zy,useDeferredValue:function(e){var t=Pn();return _k(t,Wt.memoizedState,e)},useTransition:function(){var e=fm(mc)[0],t=Pn().memoizedState;return[e,t]},useMutableSource:lk,useSyncExternalStore:ck,useId:jk,unstable_isNewReconciler:!1},s5={readContext:En,useCallback:bk,useContext:En,useEffect:Qy,useImperativeHandle:xk,useInsertionEffect:gk,useLayoutEffect:vk,useMemo:wk,useReducer:hm,useRef:mk,useState:function(){return hm(mc)},useDebugValue:Zy,useDeferredValue:function(e){var t=Pn();return Wt===null?t.memoizedState=e:_k(t,Wt.memoizedState,e)},useTransition:function(){var e=hm(mc)[0],t=Pn().memoizedState;return[e,t]},useMutableSource:lk,useSyncExternalStore:ck,useId:jk,unstable_isNewReconciler:!1};function Bn(e,t){if(e&&e.defaultProps){t=Ct({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Lg(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ct({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ph={isMounted:function(e){return(e=e._reactInternals)?Ds(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ar(),a=Ni(e),i=Pa(n,a);i.payload=t,r!=null&&(i.callback=r),t=ji(e,i,a),t!==null&&(Vn(t,e,a,n),yd(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ar(),a=Ni(e),i=Pa(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=ji(e,i,a),t!==null&&(Vn(t,e,a,n),yd(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ar(),n=Ni(e),a=Pa(r,n);a.tag=2,t!=null&&(a.callback=t),t=ji(e,a,n),t!==null&&(Vn(t,e,n,r),yd(t,e,n))}};function hw(e,t,r,n,a,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,s):t.prototype&&t.prototype.isPureReactComponent?!lc(r,n)||!lc(a,i):!0}function Ck(e,t,r){var n=!1,a=Pi,i=t.contextType;return typeof i=="object"&&i!==null?i=En(i):(a=qr(t)?ys:Sr.current,n=t.contextTypes,i=(n=n!=null)?Po(e,a):Pi),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ph,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function pw(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ph.enqueueReplaceState(t,t.state,null)}function Fg(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Hy(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=En(i):(i=qr(t)?ys:Sr.current,a.context=Po(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Lg(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ph.enqueueReplaceState(a,a.state,null),qd(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Do(e,t){try{var r="",n=t;do r+=II(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function pm(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Bg(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var o5=typeof WeakMap=="function"?WeakMap:Map;function Ek(e,t,r){r=Pa(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Jd||(Jd=!0,Xg=n),Bg(e,t)},r}function Pk(e,t,r){r=Pa(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Bg(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Bg(e,t),typeof n!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function mw(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new o5;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=w5.bind(null,e,t,r),t.then(e,e))}function gw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function vw(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Pa(-1,1),t.tag=2,ji(r,t,1))),r.lanes|=1),e)}var l5=Ya.ReactCurrentOwner,zr=!1;function Cr(e,t,r,n){t.child=e===null?ak(t,null,r,n):Ao(t,e.child,r,n)}function yw(e,t,r,n,a){r=r.render;var i=t.ref;return bo(t,a),n=Xy(e,t,r,n,i,a),r=Jy(),e!==null&&!zr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ma(e,t,a)):(mt&&r&&Ly(t),t.flags|=1,Cr(e,t,n,a),t.child)}function xw(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!o0(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Ok(e,t,i,n,a)):(e=Sd(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var s=i.memoizedProps;if(r=r.compare,r=r!==null?r:lc,r(s,n)&&e.ref===t.ref)return Ma(e,t,a)}return t.flags|=1,e=ki(i,n),e.ref=t.ref,e.return=t,t.child=e}function Ok(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(lc(i,n)&&e.ref===t.ref)if(zr=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(zr=!0);else return t.lanes=e.lanes,Ma(e,t,a)}return Ug(e,t,r,n,a)}function Ak(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(ho,nn),nn|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,lt(ho,nn),nn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,lt(ho,nn),nn|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,lt(ho,nn),nn|=n;return Cr(e,t,a,r),t.child}function Tk(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ug(e,t,r,n,a){var i=qr(r)?ys:Sr.current;return i=Po(t,i),bo(t,a),r=Xy(e,t,r,n,i,a),n=Jy(),e!==null&&!zr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ma(e,t,a)):(mt&&n&&Ly(t),t.flags|=1,Cr(e,t,r,a),t.child)}function bw(e,t,r,n,a){if(qr(r)){var i=!0;Ud(t)}else i=!1;if(bo(t,a),t.stateNode===null)wd(e,t),Ck(t,r,n),Fg(t,r,n,a),n=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var c=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=En(u):(u=qr(r)?ys:Sr.current,u=Po(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==n||c!==u)&&pw(t,s,n,u),li=!1;var h=t.memoizedState;s.state=h,qd(t,n,s,a),c=t.memoizedState,o!==n||h!==c||Hr.current||li?(typeof d=="function"&&(Lg(t,r,d,n),c=t.memoizedState),(o=li||hw(t,r,o,n,h,c,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=u,n=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,sk(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Bn(t.type,o),s.props=u,f=t.pendingProps,h=s.context,c=r.contextType,typeof c=="object"&&c!==null?c=En(c):(c=qr(r)?ys:Sr.current,c=Po(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||h!==c)&&pw(t,s,n,c),li=!1,h=t.memoizedState,s.state=h,qd(t,n,s,a);var g=t.memoizedState;o!==f||h!==g||Hr.current||li?(typeof m=="function"&&(Lg(t,r,m,n),g=t.memoizedState),(u=li||hw(t,r,u,n,h,g,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,g,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,g,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),s.props=n,s.state=g,s.context=c,n=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return zg(e,t,r,n,i,a)}function zg(e,t,r,n,a,i){Tk(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return a&&iw(t,r,!1),Ma(e,t,i);n=t.stateNode,l5.current=t;var o=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=Ao(t,e.child,null,i),t.child=Ao(t,null,o,i)):Cr(e,t,o,i),t.memoizedState=n.state,a&&iw(t,r,!0),t.child}function Dk(e){var t=e.stateNode;t.pendingContext?aw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&aw(e,t.context,!1),qy(e,t.containerInfo)}function ww(e,t,r,n,a){return Oo(),By(a),t.flags|=256,Cr(e,t,r,n),t.child}var Wg={dehydrated:null,treeContext:null,retryLane:0};function Kg(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ik(e,t,r){var n=t.pendingProps,a=Nt.current,i=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),lt(Nt,a&1),e===null)return Mg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,i?(n=t.mode,i=t.child,s={mode:"hidden",children:s},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=vh(s,n,0,null),e=fs(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Kg(r),t.memoizedState=Wg,e):e0(t,s));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return c5(e,t,s,n,o,a,r);if(i){i=n.fallback,s=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(s&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ki(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=ki(o,i):(i=fs(i,s,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,s=e.child.memoizedState,s=s===null?Kg(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~r,t.memoizedState=Wg,n}return i=e.child,e=i.sibling,n=ki(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function e0(e,t){return t=vh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Tu(e,t,r,n){return n!==null&&By(n),Ao(t,e.child,null,r),e=e0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function c5(e,t,r,n,a,i,s){if(r)return t.flags&256?(t.flags&=-257,n=pm(Error(ne(422))),Tu(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=vh({mode:"visible",children:n.children},a,0,null),i=fs(i,a,s,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Ao(t,e.child,null,s),t.child.memoizedState=Kg(s),t.memoizedState=Wg,i);if(!(t.mode&1))return Tu(e,t,s,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(ne(419)),n=pm(i,n,void 0),Tu(e,t,s,n)}if(o=(s&e.childLanes)!==0,zr||o){if(n=ar,n!==null){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|s)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Ra(e,a),Vn(n,e,a,-1))}return s0(),n=pm(Error(ne(421))),Tu(e,t,s,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=_5.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,cn=_i(a.nextSibling),un=t,mt=!0,Wn=null,e!==null&&(_n[jn++]=Na,_n[jn++]=ka,_n[jn++]=xs,Na=e.id,ka=e.overflow,xs=t),t=e0(t,n.children),t.flags|=4096,t)}function _w(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),$g(e.return,t,r)}function mm(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function Rk(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Cr(e,t,n.children,r),n=Nt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_w(e,r,t);else if(e.tag===19)_w(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(lt(Nt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Vd(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),mm(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Vd(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}mm(t,!0,r,null,i);break;case"together":mm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ma(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ws|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ne(153));if(t.child!==null){for(e=t.child,r=ki(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ki(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function u5(e,t,r){switch(t.tag){case 3:Dk(t),Oo();break;case 5:ok(t);break;case 1:qr(t.type)&&Ud(t);break;case 4:qy(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;lt(Kd,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(lt(Nt,Nt.current&1),t.flags|=128,null):r&t.child.childLanes?Ik(e,t,r):(lt(Nt,Nt.current&1),e=Ma(e,t,r),e!==null?e.sibling:null);lt(Nt,Nt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Rk(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),lt(Nt,Nt.current),n)break;return null;case 22:case 23:return t.lanes=0,Ak(e,t,r)}return Ma(e,t,r)}var Mk,Hg,$k,Lk;Mk=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Hg=function(){};$k=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,ss(pa.current);var i=null;switch(r){case"input":a=hg(e,a),n=hg(e,n),i=[];break;case"select":a=Ct({},a,{value:void 0}),n=Ct({},n,{value:void 0}),i=[];break;case"textarea":a=gg(e,a),n=gg(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Fd)}yg(r,n);var s;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var o=a[u];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(tc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(o=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&o[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(tc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ut("scroll",e),i||o===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Lk=function(e,t,r,n){r!==n&&(t.flags|=4)};function xl(e,t){if(!mt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function br(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function d5(e,t,r){var n=t.pendingProps;switch(Fy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return br(t),null;case 1:return qr(t.type)&&Bd(),br(t),null;case 3:return n=t.stateNode,To(),ht(Hr),ht(Sr),Gy(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ou(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wn!==null&&(Zg(Wn),Wn=null))),Hg(e,t),br(t),null;case 5:Vy(t);var a=ss(hc.current);if(r=t.type,e!==null&&t.stateNode!=null)$k(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ne(166));return br(t),null}if(e=ss(pa.current),Ou(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[da]=t,n[dc]=i,e=(t.mode&1)!==0,r){case"dialog":ut("cancel",n),ut("close",n);break;case"iframe":case"object":case"embed":ut("load",n);break;case"video":case"audio":for(a=0;a<Ml.length;a++)ut(Ml[a],n);break;case"source":ut("error",n);break;case"img":case"image":case"link":ut("error",n),ut("load",n);break;case"details":ut("toggle",n);break;case"input":Ab(n,i),ut("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ut("invalid",n);break;case"textarea":Db(n,i),ut("invalid",n)}yg(r,i),a=null;for(var s in i)if(i.hasOwnProperty(s)){var o=i[s];s==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&Pu(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Pu(n.textContent,o,e),a=["children",""+o]):tc.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&ut("scroll",n)}switch(r){case"input":wu(n),Tb(n,i,!0);break;case"textarea":wu(n),Ib(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Fd)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=fN(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[da]=t,e[dc]=n,Mk(e,t,!1,!1),t.stateNode=e;e:{switch(s=xg(r,n),r){case"dialog":ut("cancel",e),ut("close",e),a=n;break;case"iframe":case"object":case"embed":ut("load",e),a=n;break;case"video":case"audio":for(a=0;a<Ml.length;a++)ut(Ml[a],e);a=n;break;case"source":ut("error",e),a=n;break;case"img":case"image":case"link":ut("error",e),ut("load",e),a=n;break;case"details":ut("toggle",e),a=n;break;case"input":Ab(e,n),a=hg(e,n),ut("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Ct({},n,{value:void 0}),ut("invalid",e);break;case"textarea":Db(e,n),a=gg(e,n),ut("invalid",e);break;default:a=n}yg(r,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?mN(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&hN(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&rc(e,c):typeof c=="number"&&rc(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(tc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ut("scroll",e):c!=null&&Sy(e,i,c,s))}switch(r){case"input":wu(e),Tb(e,n,!1);break;case"textarea":wu(e),Ib(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ei(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?go(e,!!n.multiple,i,!1):n.defaultValue!=null&&go(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Fd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return br(t),null;case 6:if(e&&t.stateNode!=null)Lk(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ne(166));if(r=ss(hc.current),ss(pa.current),Ou(t)){if(n=t.stateNode,r=t.memoizedProps,n[da]=t,(i=n.nodeValue!==r)&&(e=un,e!==null))switch(e.tag){case 3:Pu(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Pu(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[da]=t,t.stateNode=n}return br(t),null;case 13:if(ht(Nt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(mt&&cn!==null&&t.mode&1&&!(t.flags&128))rk(),Oo(),t.flags|=98560,i=!1;else if(i=Ou(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(ne(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ne(317));i[da]=t}else Oo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;br(t),i=!1}else Wn!==null&&(Zg(Wn),Wn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Nt.current&1?Vt===0&&(Vt=3):s0())),t.updateQueue!==null&&(t.flags|=4),br(t),null);case 4:return To(),Hg(e,t),e===null&&cc(t.stateNode.containerInfo),br(t),null;case 10:return Wy(t.type._context),br(t),null;case 17:return qr(t.type)&&Bd(),br(t),null;case 19:if(ht(Nt),i=t.memoizedState,i===null)return br(t),null;if(n=(t.flags&128)!==0,s=i.rendering,s===null)if(n)xl(i,!1);else{if(Vt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Vd(e),s!==null){for(t.flags|=128,xl(i,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return lt(Nt,Nt.current&1|2),t.child}e=e.sibling}i.tail!==null&&It()>Io&&(t.flags|=128,n=!0,xl(i,!1),t.lanes=4194304)}else{if(!n)if(e=Vd(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),xl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!mt)return br(t),null}else 2*It()-i.renderingStartTime>Io&&r!==1073741824&&(t.flags|=128,n=!0,xl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(r=i.last,r!==null?r.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=It(),t.sibling=null,r=Nt.current,lt(Nt,n?r&1|2:r&1),t):(br(t),null);case 22:case 23:return i0(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?nn&1073741824&&(br(t),t.subtreeFlags&6&&(t.flags|=8192)):br(t),null;case 24:return null;case 25:return null}throw Error(ne(156,t.tag))}function f5(e,t){switch(Fy(t),t.tag){case 1:return qr(t.type)&&Bd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return To(),ht(Hr),ht(Sr),Gy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Vy(t),null;case 13:if(ht(Nt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ne(340));Oo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ht(Nt),null;case 4:return To(),null;case 10:return Wy(t.type._context),null;case 22:case 23:return i0(),null;case 24:return null;default:return null}}var Du=!1,_r=!1,h5=typeof WeakSet=="function"?WeakSet:Set,ge=null;function fo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Pt(e,t,n)}else r.current=null}function qg(e,t,r){try{r()}catch(n){Pt(e,t,n)}}var jw=!1;function p5(e,t){if(Pg=Md,e=WN(),$y(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var s=0,o=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==r||a!==0&&f.nodeType!==3||(o=s+a),f!==i||n!==0&&f.nodeType!==3||(c=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===r&&++u===a&&(o=s),h===i&&++d===n&&(c=s),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Og={focusedElem:e,selectionRange:r},Md=!1,ge=t;ge!==null;)if(t=ge,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ge=e;else for(;ge!==null;){t=ge;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,v=g.memoizedState,x=t.stateNode,w=x.getSnapshotBeforeUpdate(t.elementType===t.type?y:Bn(t.type,y),v);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(_){Pt(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,ge=e;break}ge=t.return}return g=jw,jw=!1,g}function ql(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&qg(t,r,i)}a=a.next}while(a!==n)}}function mh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Vg(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Fk(e){var t=e.alternate;t!==null&&(e.alternate=null,Fk(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[da],delete t[dc],delete t[Dg],delete t[XR],delete t[JR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Bk(e){return e.tag===5||e.tag===3||e.tag===4}function Sw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bk(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Fd));else if(n!==4&&(e=e.child,e!==null))for(Gg(e,t,r),e=e.sibling;e!==null;)Gg(e,t,r),e=e.sibling}function Yg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Yg(e,t,r),e=e.sibling;e!==null;)Yg(e,t,r),e=e.sibling}var pr=null,zn=!1;function ii(e,t,r){for(r=r.child;r!==null;)Uk(e,t,r),r=r.sibling}function Uk(e,t,r){if(ha&&typeof ha.onCommitFiberUnmount=="function")try{ha.onCommitFiberUnmount(oh,r)}catch{}switch(r.tag){case 5:_r||fo(r,t);case 6:var n=pr,a=zn;pr=null,ii(e,t,r),pr=n,zn=a,pr!==null&&(zn?(e=pr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):pr.removeChild(r.stateNode));break;case 18:pr!==null&&(zn?(e=pr,r=r.stateNode,e.nodeType===8?lm(e.parentNode,r):e.nodeType===1&&lm(e,r),sc(e)):lm(pr,r.stateNode));break;case 4:n=pr,a=zn,pr=r.stateNode.containerInfo,zn=!0,ii(e,t,r),pr=n,zn=a;break;case 0:case 11:case 14:case 15:if(!_r&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&qg(r,t,s),a=a.next}while(a!==n)}ii(e,t,r);break;case 1:if(!_r&&(fo(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Pt(r,t,o)}ii(e,t,r);break;case 21:ii(e,t,r);break;case 22:r.mode&1?(_r=(n=_r)||r.memoizedState!==null,ii(e,t,r),_r=n):ii(e,t,r);break;default:ii(e,t,r)}}function Nw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new h5),t.forEach(function(n){var a=j5.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Ln(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:pr=o.stateNode,zn=!1;break e;case 3:pr=o.stateNode.containerInfo,zn=!0;break e;case 4:pr=o.stateNode.containerInfo,zn=!0;break e}o=o.return}if(pr===null)throw Error(ne(160));Uk(i,s,a),pr=null,zn=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Pt(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)zk(t,e),t=t.sibling}function zk(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ln(t,e),la(e),n&4){try{ql(3,e,e.return),mh(3,e)}catch(y){Pt(e,e.return,y)}try{ql(5,e,e.return)}catch(y){Pt(e,e.return,y)}}break;case 1:Ln(t,e),la(e),n&512&&r!==null&&fo(r,r.return);break;case 5:if(Ln(t,e),la(e),n&512&&r!==null&&fo(r,r.return),e.flags&32){var a=e.stateNode;try{rc(a,"")}catch(y){Pt(e,e.return,y)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,s=r!==null?r.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&uN(a,i),xg(o,s);var u=xg(o,i);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];d==="style"?mN(a,f):d==="dangerouslySetInnerHTML"?hN(a,f):d==="children"?rc(a,f):Sy(a,d,f,u)}switch(o){case"input":pg(a,i);break;case"textarea":dN(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?go(a,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?go(a,!!i.multiple,i.defaultValue,!0):go(a,!!i.multiple,i.multiple?[]:"",!1))}a[dc]=i}catch(y){Pt(e,e.return,y)}}break;case 6:if(Ln(t,e),la(e),n&4){if(e.stateNode===null)throw Error(ne(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(y){Pt(e,e.return,y)}}break;case 3:if(Ln(t,e),la(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{sc(t.containerInfo)}catch(y){Pt(e,e.return,y)}break;case 4:Ln(t,e),la(e);break;case 13:Ln(t,e),la(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(n0=It())),n&4&&Nw(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(_r=(u=_r)||d,Ln(t,e),_r=u):Ln(t,e),la(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(ge=e,d=e.child;d!==null;){for(f=ge=d;ge!==null;){switch(h=ge,m=h.child,h.tag){case 0:case 11:case 14:case 15:ql(4,h,h.return);break;case 1:fo(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(y){Pt(n,r,y)}}break;case 5:fo(h,h.return);break;case 22:if(h.memoizedState!==null){Cw(f);continue}}m!==null?(m.return=h,ge=m):Cw(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,c=f.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=pN("display",s))}catch(y){Pt(e,e.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){Pt(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ln(t,e),la(e),n&4&&Nw(e);break;case 21:break;default:Ln(t,e),la(e)}}function la(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Bk(r)){var n=r;break e}r=r.return}throw Error(ne(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(rc(a,""),n.flags&=-33);var i=Sw(e);Yg(e,i,a);break;case 3:case 4:var s=n.stateNode.containerInfo,o=Sw(e);Gg(e,o,s);break;default:throw Error(ne(161))}}catch(c){Pt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function m5(e,t,r){ge=e,Wk(e)}function Wk(e,t,r){for(var n=(e.mode&1)!==0;ge!==null;){var a=ge,i=a.child;if(a.tag===22&&n){var s=a.memoizedState!==null||Du;if(!s){var o=a.alternate,c=o!==null&&o.memoizedState!==null||_r;o=Du;var u=_r;if(Du=s,(_r=c)&&!u)for(ge=a;ge!==null;)s=ge,c=s.child,s.tag===22&&s.memoizedState!==null?Ew(a):c!==null?(c.return=s,ge=c):Ew(a);for(;i!==null;)ge=i,Wk(i),i=i.sibling;ge=a,Du=o,_r=u}kw(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,ge=i):kw(e)}}function kw(e){for(;ge!==null;){var t=ge;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:_r||mh(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!_r)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Bn(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&uw(t,i,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}uw(t,s,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&sc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}_r||t.flags&512&&Vg(t)}catch(h){Pt(t,t.return,h)}}if(t===e){ge=null;break}if(r=t.sibling,r!==null){r.return=t.return,ge=r;break}ge=t.return}}function Cw(e){for(;ge!==null;){var t=ge;if(t===e){ge=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ge=r;break}ge=t.return}}function Ew(e){for(;ge!==null;){var t=ge;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{mh(4,t)}catch(c){Pt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Pt(t,a,c)}}var i=t.return;try{Vg(t)}catch(c){Pt(t,i,c)}break;case 5:var s=t.return;try{Vg(t)}catch(c){Pt(t,s,c)}}}catch(c){Pt(t,t.return,c)}if(t===e){ge=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ge=o;break}ge=t.return}}var g5=Math.ceil,Xd=Ya.ReactCurrentDispatcher,t0=Ya.ReactCurrentOwner,kn=Ya.ReactCurrentBatchConfig,We=0,ar=null,Bt=null,gr=0,nn=0,ho=Ri(0),Vt=0,vc=null,ws=0,gh=0,r0=0,Vl=null,Ur=null,n0=0,Io=1/0,ba=null,Jd=!1,Xg=null,Si=null,Iu=!1,vi=null,Qd=0,Gl=0,Jg=null,_d=-1,jd=0;function Ar(){return We&6?It():_d!==-1?_d:_d=It()}function Ni(e){return e.mode&1?We&2&&gr!==0?gr&-gr:ZR.transition!==null?(jd===0&&(jd=CN()),jd):(e=et,e!==0||(e=window.event,e=e===void 0?16:IN(e.type)),e):1}function Vn(e,t,r,n){if(50<Gl)throw Gl=0,Jg=null,Error(ne(185));Uc(e,r,n),(!(We&2)||e!==ar)&&(e===ar&&(!(We&2)&&(gh|=r),Vt===4&&hi(e,gr)),Vr(e,n),r===1&&We===0&&!(t.mode&1)&&(Io=It()+500,fh&&Mi()))}function Vr(e,t){var r=e.callbackNode;ZI(e,t);var n=Rd(e,e===ar?gr:0);if(n===0)r!==null&&$b(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&$b(r),t===1)e.tag===0?QR(Pw.bind(null,e)):ZN(Pw.bind(null,e)),GR(function(){!(We&6)&&Mi()}),r=null;else{switch(EN(n)){case 1:r=Py;break;case 4:r=NN;break;case 16:r=Id;break;case 536870912:r=kN;break;default:r=Id}r=Jk(r,Kk.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Kk(e,t){if(_d=-1,jd=0,We&6)throw Error(ne(327));var r=e.callbackNode;if(wo()&&e.callbackNode!==r)return null;var n=Rd(e,e===ar?gr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Zd(e,n);else{t=n;var a=We;We|=2;var i=qk();(ar!==e||gr!==t)&&(ba=null,Io=It()+500,ds(e,t));do try{x5();break}catch(o){Hk(e,o)}while(!0);zy(),Xd.current=i,We=a,Bt!==null?t=0:(ar=null,gr=0,t=Vt)}if(t!==0){if(t===2&&(a=Sg(e),a!==0&&(n=a,t=Qg(e,a))),t===1)throw r=vc,ds(e,0),hi(e,n),Vr(e,It()),r;if(t===6)hi(e,n);else{if(a=e.current.alternate,!(n&30)&&!v5(a)&&(t=Zd(e,n),t===2&&(i=Sg(e),i!==0&&(n=i,t=Qg(e,i))),t===1))throw r=vc,ds(e,0),hi(e,n),Vr(e,It()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(ne(345));case 2:Xi(e,Ur,ba);break;case 3:if(hi(e,n),(n&130023424)===n&&(t=n0+500-It(),10<t)){if(Rd(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Ar(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Tg(Xi.bind(null,e,Ur,ba),t);break}Xi(e,Ur,ba);break;case 4:if(hi(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var s=31-qn(n);i=1<<s,s=t[s],s>a&&(a=s),n&=~i}if(n=a,n=It()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*g5(n/1960))-n,10<n){e.timeoutHandle=Tg(Xi.bind(null,e,Ur,ba),n);break}Xi(e,Ur,ba);break;case 5:Xi(e,Ur,ba);break;default:throw Error(ne(329))}}}return Vr(e,It()),e.callbackNode===r?Kk.bind(null,e):null}function Qg(e,t){var r=Vl;return e.current.memoizedState.isDehydrated&&(ds(e,t).flags|=256),e=Zd(e,t),e!==2&&(t=Ur,Ur=r,t!==null&&Zg(t)),e}function Zg(e){Ur===null?Ur=e:Ur.push.apply(Ur,e)}function v5(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Gn(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hi(e,t){for(t&=~r0,t&=~gh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-qn(t),n=1<<r;e[r]=-1,t&=~n}}function Pw(e){if(We&6)throw Error(ne(327));wo();var t=Rd(e,0);if(!(t&1))return Vr(e,It()),null;var r=Zd(e,t);if(e.tag!==0&&r===2){var n=Sg(e);n!==0&&(t=n,r=Qg(e,n))}if(r===1)throw r=vc,ds(e,0),hi(e,t),Vr(e,It()),r;if(r===6)throw Error(ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xi(e,Ur,ba),Vr(e,It()),null}function a0(e,t){var r=We;We|=1;try{return e(t)}finally{We=r,We===0&&(Io=It()+500,fh&&Mi())}}function _s(e){vi!==null&&vi.tag===0&&!(We&6)&&wo();var t=We;We|=1;var r=kn.transition,n=et;try{if(kn.transition=null,et=1,e)return e()}finally{et=n,kn.transition=r,We=t,!(We&6)&&Mi()}}function i0(){nn=ho.current,ht(ho)}function ds(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,VR(r)),Bt!==null)for(r=Bt.return;r!==null;){var n=r;switch(Fy(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Bd();break;case 3:To(),ht(Hr),ht(Sr),Gy();break;case 5:Vy(n);break;case 4:To();break;case 13:ht(Nt);break;case 19:ht(Nt);break;case 10:Wy(n.type._context);break;case 22:case 23:i0()}r=r.return}if(ar=e,Bt=e=ki(e.current,null),gr=nn=t,Vt=0,vc=null,r0=gh=ws=0,Ur=Vl=null,is!==null){for(t=0;t<is.length;t++)if(r=is[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var s=i.next;i.next=a,n.next=s}r.pending=n}is=null}return e}function Hk(e,t){do{var r=Bt;try{if(zy(),xd.current=Yd,Gd){for(var n=kt.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Gd=!1}if(bs=0,tr=Wt=kt=null,Hl=!1,pc=0,t0.current=null,r===null||r.return===null){Vt=1,vc=t,Bt=null;break}e:{var i=e,s=r.return,o=r,c=t;if(t=gr,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=gw(s);if(m!==null){m.flags&=-257,vw(m,s,o,i,t),m.mode&1&&mw(i,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var y=new Set;y.add(c),t.updateQueue=y}else g.add(c);break e}else{if(!(t&1)){mw(i,u,t),s0();break e}c=Error(ne(426))}}else if(mt&&o.mode&1){var v=gw(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),vw(v,s,o,i,t),By(Do(c,o));break e}}i=c=Do(c,o),Vt!==4&&(Vt=2),Vl===null?Vl=[i]:Vl.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=Ek(i,c,t);cw(i,x);break e;case 1:o=c;var w=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Si===null||!Si.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=Pk(i,o,t);cw(i,_);break e}}i=i.return}while(i!==null)}Gk(r)}catch(j){t=j,Bt===r&&r!==null&&(Bt=r=r.return);continue}break}while(!0)}function qk(){var e=Xd.current;return Xd.current=Yd,e===null?Yd:e}function s0(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),ar===null||!(ws&268435455)&&!(gh&268435455)||hi(ar,gr)}function Zd(e,t){var r=We;We|=2;var n=qk();(ar!==e||gr!==t)&&(ba=null,ds(e,t));do try{y5();break}catch(a){Hk(e,a)}while(!0);if(zy(),We=r,Xd.current=n,Bt!==null)throw Error(ne(261));return ar=null,gr=0,Vt}function y5(){for(;Bt!==null;)Vk(Bt)}function x5(){for(;Bt!==null&&!KI();)Vk(Bt)}function Vk(e){var t=Xk(e.alternate,e,nn);e.memoizedProps=e.pendingProps,t===null?Gk(e):Bt=t,t0.current=null}function Gk(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=f5(r,t),r!==null){r.flags&=32767,Bt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Vt=6,Bt=null;return}}else if(r=d5(r,t,nn),r!==null){Bt=r;return}if(t=t.sibling,t!==null){Bt=t;return}Bt=t=e}while(t!==null);Vt===0&&(Vt=5)}function Xi(e,t,r){var n=et,a=kn.transition;try{kn.transition=null,et=1,b5(e,t,r,n)}finally{kn.transition=a,et=n}return null}function b5(e,t,r,n){do wo();while(vi!==null);if(We&6)throw Error(ne(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ne(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(eR(e,i),e===ar&&(Bt=ar=null,gr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Iu||(Iu=!0,Jk(Id,function(){return wo(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=kn.transition,kn.transition=null;var s=et;et=1;var o=We;We|=4,t0.current=null,p5(e,r),zk(r,e),BR(Og),Md=!!Pg,Og=Pg=null,e.current=r,m5(r),HI(),We=o,et=s,kn.transition=i}else e.current=r;if(Iu&&(Iu=!1,vi=e,Qd=a),i=e.pendingLanes,i===0&&(Si=null),GI(r.stateNode),Vr(e,It()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Jd)throw Jd=!1,e=Xg,Xg=null,e;return Qd&1&&e.tag!==0&&wo(),i=e.pendingLanes,i&1?e===Jg?Gl++:(Gl=0,Jg=e):Gl=0,Mi(),null}function wo(){if(vi!==null){var e=EN(Qd),t=kn.transition,r=et;try{if(kn.transition=null,et=16>e?16:e,vi===null)var n=!1;else{if(e=vi,vi=null,Qd=0,We&6)throw Error(ne(331));var a=We;for(We|=4,ge=e.current;ge!==null;){var i=ge,s=i.child;if(ge.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(ge=u;ge!==null;){var d=ge;switch(d.tag){case 0:case 11:case 15:ql(8,d,i)}var f=d.child;if(f!==null)f.return=d,ge=f;else for(;ge!==null;){d=ge;var h=d.sibling,m=d.return;if(Fk(d),d===u){ge=null;break}if(h!==null){h.return=m,ge=h;break}ge=m}}}var g=i.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}ge=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,ge=s;else e:for(;ge!==null;){if(i=ge,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ql(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,ge=x;break e}ge=i.return}}var w=e.current;for(ge=w;ge!==null;){s=ge;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,ge=b;else e:for(s=w;ge!==null;){if(o=ge,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:mh(9,o)}}catch(j){Pt(o,o.return,j)}if(o===s){ge=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,ge=_;break e}ge=o.return}}if(We=a,Mi(),ha&&typeof ha.onPostCommitFiberRoot=="function")try{ha.onPostCommitFiberRoot(oh,e)}catch{}n=!0}return n}finally{et=r,kn.transition=t}}return!1}function Ow(e,t,r){t=Do(r,t),t=Ek(e,t,1),e=ji(e,t,1),t=Ar(),e!==null&&(Uc(e,1,t),Vr(e,t))}function Pt(e,t,r){if(e.tag===3)Ow(e,e,r);else for(;t!==null;){if(t.tag===3){Ow(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Si===null||!Si.has(n))){e=Do(r,e),e=Pk(t,e,1),t=ji(t,e,1),e=Ar(),t!==null&&(Uc(t,1,e),Vr(t,e));break}}t=t.return}}function w5(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ar(),e.pingedLanes|=e.suspendedLanes&r,ar===e&&(gr&r)===r&&(Vt===4||Vt===3&&(gr&130023424)===gr&&500>It()-n0?ds(e,0):r0|=r),Vr(e,t)}function Yk(e,t){t===0&&(e.mode&1?(t=Su,Su<<=1,!(Su&130023424)&&(Su=4194304)):t=1);var r=Ar();e=Ra(e,t),e!==null&&(Uc(e,t,r),Vr(e,r))}function _5(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Yk(e,r)}function j5(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ne(314))}n!==null&&n.delete(t),Yk(e,r)}var Xk;Xk=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Hr.current)zr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return zr=!1,u5(e,t,r);zr=!!(e.flags&131072)}else zr=!1,mt&&t.flags&1048576&&ek(t,Wd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;wd(e,t),e=t.pendingProps;var a=Po(t,Sr.current);bo(t,r),a=Xy(null,t,n,e,a,r);var i=Jy();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qr(n)?(i=!0,Ud(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Hy(t),a.updater=ph,t.stateNode=a,a._reactInternals=t,Fg(t,n,e,r),t=zg(null,t,n,!0,i,r)):(t.tag=0,mt&&i&&Ly(t),Cr(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(wd(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=N5(n),e=Bn(n,e),a){case 0:t=Ug(null,t,n,e,r);break e;case 1:t=bw(null,t,n,e,r);break e;case 11:t=yw(null,t,n,e,r);break e;case 14:t=xw(null,t,n,Bn(n.type,e),r);break e}throw Error(ne(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Bn(n,a),Ug(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Bn(n,a),bw(e,t,n,a,r);case 3:e:{if(Dk(t),e===null)throw Error(ne(387));n=t.pendingProps,i=t.memoizedState,a=i.element,sk(e,t),qd(t,n,null,r);var s=t.memoizedState;if(n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Do(Error(ne(423)),t),t=ww(e,t,n,r,a);break e}else if(n!==a){a=Do(Error(ne(424)),t),t=ww(e,t,n,r,a);break e}else for(cn=_i(t.stateNode.containerInfo.firstChild),un=t,mt=!0,Wn=null,r=ak(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Oo(),n===a){t=Ma(e,t,r);break e}Cr(e,t,n,r)}t=t.child}return t;case 5:return ok(t),e===null&&Mg(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,s=a.children,Ag(n,a)?s=null:i!==null&&Ag(n,i)&&(t.flags|=32),Tk(e,t),Cr(e,t,s,r),t.child;case 6:return e===null&&Mg(t),null;case 13:return Ik(e,t,r);case 4:return qy(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ao(t,null,n,r):Cr(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Bn(n,a),yw(e,t,n,a,r);case 7:return Cr(e,t,t.pendingProps,r),t.child;case 8:return Cr(e,t,t.pendingProps.children,r),t.child;case 12:return Cr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,s=a.value,lt(Kd,n._currentValue),n._currentValue=s,i!==null)if(Gn(i.value,s)){if(i.children===a.children&&!Hr.current){t=Ma(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){s=i.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Pa(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),$g(i.return,r,t),o.lanes|=r;break}c=c.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(ne(341));s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),$g(s,r,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}Cr(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,bo(t,r),a=En(a),n=n(a),t.flags|=1,Cr(e,t,n,r),t.child;case 14:return n=t.type,a=Bn(n,t.pendingProps),a=Bn(n.type,a),xw(e,t,n,a,r);case 15:return Ok(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Bn(n,a),wd(e,t),t.tag=1,qr(n)?(e=!0,Ud(t)):e=!1,bo(t,r),Ck(t,n,a),Fg(t,n,a,r),zg(null,t,n,!0,e,r);case 19:return Rk(e,t,r);case 22:return Ak(e,t,r)}throw Error(ne(156,t.tag))};function Jk(e,t){return SN(e,t)}function S5(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(e,t,r,n){return new S5(e,t,r,n)}function o0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function N5(e){if(typeof e=="function")return o0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ky)return 11;if(e===Cy)return 14}return 2}function ki(e,t){var r=e.alternate;return r===null?(r=Sn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Sd(e,t,r,n,a,i){var s=2;if(n=e,typeof e=="function")o0(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case ro:return fs(r.children,a,i,t);case Ny:s=8,a|=8;break;case cg:return e=Sn(12,r,t,a|2),e.elementType=cg,e.lanes=i,e;case ug:return e=Sn(13,r,t,a),e.elementType=ug,e.lanes=i,e;case dg:return e=Sn(19,r,t,a),e.elementType=dg,e.lanes=i,e;case oN:return vh(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case iN:s=10;break e;case sN:s=9;break e;case ky:s=11;break e;case Cy:s=14;break e;case oi:s=16,n=null;break e}throw Error(ne(130,e==null?e:typeof e,""))}return t=Sn(s,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function fs(e,t,r,n){return e=Sn(7,e,n,t),e.lanes=r,e}function vh(e,t,r,n){return e=Sn(22,e,n,t),e.elementType=oN,e.lanes=r,e.stateNode={isHidden:!1},e}function gm(e,t,r){return e=Sn(6,e,null,t),e.lanes=r,e}function vm(e,t,r){return t=Sn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function k5(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jp(0),this.expirationTimes=Jp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jp(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function l0(e,t,r,n,a,i,s,o,c){return e=new k5(e,t,r,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Sn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hy(i),e}function C5(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:to,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Qk(e){if(!e)return Pi;e=e._reactInternals;e:{if(Ds(e)!==e||e.tag!==1)throw Error(ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ne(171))}if(e.tag===1){var r=e.type;if(qr(r))return QN(e,r,t)}return t}function Zk(e,t,r,n,a,i,s,o,c){return e=l0(r,n,!0,e,a,i,s,o,c),e.context=Qk(null),r=e.current,n=Ar(),a=Ni(r),i=Pa(n,a),i.callback=t??null,ji(r,i,a),e.current.lanes=a,Uc(e,a,n),Vr(e,n),e}function yh(e,t,r,n){var a=t.current,i=Ar(),s=Ni(a);return r=Qk(r),t.context===null?t.context=r:t.pendingContext=r,t=Pa(i,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ji(a,t,s),e!==null&&(Vn(e,a,s,i),yd(e,a,s)),s}function ef(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Aw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function c0(e,t){Aw(e,t),(e=e.alternate)&&Aw(e,t)}function E5(){return null}var e2=typeof reportError=="function"?reportError:function(e){console.error(e)};function u0(e){this._internalRoot=e}xh.prototype.render=u0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ne(409));yh(e,t,null,null)};xh.prototype.unmount=u0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_s(function(){yh(null,e,null,null)}),t[Ia]=null}};function xh(e){this._internalRoot=e}xh.prototype.unstable_scheduleHydration=function(e){if(e){var t=AN();e={blockedOn:null,target:e,priority:t};for(var r=0;r<fi.length&&t!==0&&t<fi[r].priority;r++);fi.splice(r,0,e),r===0&&DN(e)}};function d0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Tw(){}function P5(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=ef(s);i.call(u)}}var s=Zk(t,n,e,0,null,!1,!1,"",Tw);return e._reactRootContainer=s,e[Ia]=s.current,cc(e.nodeType===8?e.parentNode:e),_s(),s}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var u=ef(c);o.call(u)}}var c=l0(e,0,!1,null,null,!1,!1,"",Tw);return e._reactRootContainer=c,e[Ia]=c.current,cc(e.nodeType===8?e.parentNode:e),_s(function(){yh(t,c,r,n)}),c}function wh(e,t,r,n,a){var i=r._reactRootContainer;if(i){var s=i;if(typeof a=="function"){var o=a;a=function(){var c=ef(s);o.call(c)}}yh(t,s,e,a)}else s=P5(r,t,e,a,n);return ef(s)}PN=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Rl(t.pendingLanes);r!==0&&(Oy(t,r|1),Vr(t,It()),!(We&6)&&(Io=It()+500,Mi()))}break;case 13:_s(function(){var n=Ra(e,1);if(n!==null){var a=Ar();Vn(n,e,1,a)}}),c0(e,1)}};Ay=function(e){if(e.tag===13){var t=Ra(e,134217728);if(t!==null){var r=Ar();Vn(t,e,134217728,r)}c0(e,134217728)}};ON=function(e){if(e.tag===13){var t=Ni(e),r=Ra(e,t);if(r!==null){var n=Ar();Vn(r,e,t,n)}c0(e,t)}};AN=function(){return et};TN=function(e,t){var r=et;try{return et=e,t()}finally{et=r}};wg=function(e,t,r){switch(t){case"input":if(pg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=dh(n);if(!a)throw Error(ne(90));cN(n),pg(n,a)}}}break;case"textarea":dN(e,r);break;case"select":t=r.value,t!=null&&go(e,!!r.multiple,t,!1)}};yN=a0;xN=_s;var O5={usingClientEntryPoint:!1,Events:[Wc,so,dh,gN,vN,a0]},bl={findFiberByHostInstance:as,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},A5={bundleType:bl.bundleType,version:bl.version,rendererPackageName:bl.rendererPackageName,rendererConfig:bl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ya.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_N(e),e===null?null:e.stateNode},findFiberByHostInstance:bl.findFiberByHostInstance||E5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ru.isDisabled&&Ru.supportsFiber)try{oh=Ru.inject(A5),ha=Ru}catch{}}mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O5;mn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d0(t))throw Error(ne(200));return C5(e,t,null,r)};mn.createRoot=function(e,t){if(!d0(e))throw Error(ne(299));var r=!1,n="",a=e2;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=l0(e,1,!1,null,null,r,!1,n,a),e[Ia]=t.current,cc(e.nodeType===8?e.parentNode:e),new u0(t)};mn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ne(188)):(e=Object.keys(e).join(","),Error(ne(268,e)));return e=_N(t),e=e===null?null:e.stateNode,e};mn.flushSync=function(e){return _s(e)};mn.hydrate=function(e,t,r){if(!bh(t))throw Error(ne(200));return wh(null,e,t,!0,r)};mn.hydrateRoot=function(e,t,r){if(!d0(e))throw Error(ne(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",s=e2;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=Zk(t,null,e,1,r??null,a,!1,i,s),e[Ia]=t.current,cc(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new xh(t)};mn.render=function(e,t,r){if(!bh(t))throw Error(ne(200));return wh(null,e,t,!1,r)};mn.unmountComponentAtNode=function(e){if(!bh(e))throw Error(ne(40));return e._reactRootContainer?(_s(function(){wh(null,null,e,!1,function(){e._reactRootContainer=null,e[Ia]=null})}),!0):!1};mn.unstable_batchedUpdates=a0;mn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!bh(r))throw Error(ne(200));if(e==null||e._reactInternals===void 0)throw Error(ne(38));return wh(e,t,r,!1,n)};mn.version="18.3.1-next-f1338f8080-20240426";function t2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t2)}catch(e){console.error(e)}}t2(),tN.exports=mn;var yi=tN.exports,r2,Dw=yi;r2=Dw.createRoot,Dw.hydrateRoot;/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Iw="popstate";function T5(e={}){function t(n,a){let{pathname:i,search:s,hash:o}=n.location;return ev("",{pathname:i,search:s,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:yc(a)}return I5(t,r,null,e)}function vt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function D5(){return Math.random().toString(36).substring(2,10)}function Rw(e,t){return{usr:e.state,key:e.key,idx:t}}function ev(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Vo(t):t,state:r,key:t&&t.key||n||D5()}}function yc({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Vo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function I5(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,s=a.history,o="POP",c=null,u=d();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function d(){return(s.state||{idx:null}).idx}function f(){o="POP";let v=d(),x=v==null?null:v-u;u=v,c&&c({action:o,location:y.location,delta:x})}function h(v,x){o="PUSH";let w=ev(y.location,v,x);u=d()+1;let b=Rw(w,u),_=y.createHref(w);try{s.pushState(b,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(_)}i&&c&&c({action:o,location:y.location,delta:1})}function m(v,x){o="REPLACE";let w=ev(y.location,v,x);u=d();let b=Rw(w,u),_=y.createHref(w);s.replaceState(b,"",_),i&&c&&c({action:o,location:y.location,delta:0})}function g(v){return R5(v)}let y={get action(){return o},get location(){return e(a,s)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Iw,f),c=v,()=>{a.removeEventListener(Iw,f),c=null}},createHref(v){return t(a,v)},createURL:g,encodeLocation(v){let x=g(v);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:m,go(v){return s.go(v)}};return y}function R5(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),vt(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:yc(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function n2(e,t,r="/"){return M5(e,t,r,!1)}function M5(e,t,r,n){let a=typeof t=="string"?Vo(t):t,i=$a(a.pathname||"/",r);if(i==null)return null;let s=a2(e);$5(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=G5(i);o=q5(s[c],u,n)}return o}function a2(e,t=[],r=[],n="",a=!1){let i=(s,o,c=a,u)=>{let d={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;vt(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let f=Oa([n,d.relativePath]),h=r.concat(d);s.children&&s.children.length>0&&(vt(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),a2(s.children,t,h,f,c)),!(s.path==null&&!s.index)&&t.push({path:f,score:K5(f,s.index),routesMeta:h})};return e.forEach((s,o)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))i(s,o);else for(let u of i2(s.path))i(s,o,!0,u)}),t}function i2(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let s=i2(n.join("/")),o=[];return o.push(...s.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...s),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function $5(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:H5(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var L5=/^:[\w-]+$/,F5=3,B5=2,U5=1,z5=10,W5=-2,Mw=e=>e==="*";function K5(e,t){let r=e.split("/"),n=r.length;return r.some(Mw)&&(n+=W5),t&&(n+=B5),r.filter(a=>!Mw(a)).reduce((a,i)=>a+(L5.test(i)?F5:i===""?U5:z5),n)}function H5(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function q5(e,t,r=!1){let{routesMeta:n}=e,a={},i="/",s=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=tf({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=tf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),s.push({params:a,pathname:Oa([i,f.pathname]),pathnameBase:Z5(Oa([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=Oa([i,f.pathnameBase]))}return s}function tf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=V5(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},h)=>{if(d==="*"){let g=o[h]||"";s=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const m=o[h];return f&&!m?u[d]=void 0:u[d]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:s,pattern:e}}function V5(e,t=!1,r=!0){hn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function G5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function $a(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var Y5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,X5=e=>Y5.test(e);function J5(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Vo(e):e,i;if(r)if(X5(r))i=r;else{if(r.includes("//")){let s=r;r=r.replace(/\/\/+/g,"/"),hn(!1,`Pathnames cannot have embedded double slashes - normalizing ${s} -> ${r}`)}r.startsWith("/")?i=$w(r.substring(1),"/"):i=$w(r,t)}else i=t;return{pathname:i,search:eM(n),hash:tM(a)}}function $w(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function ym(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Q5(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function f0(e){let t=Q5(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function h0(e,t,r,n=!1){let a;typeof e=="string"?a=Vo(e):(a={...e},vt(!a.pathname||!a.pathname.includes("?"),ym("?","pathname","search",a)),vt(!a.pathname||!a.pathname.includes("#"),ym("#","pathname","hash",a)),vt(!a.search||!a.search.includes("#"),ym("#","search","hash",a)));let i=e===""||a.pathname==="",s=i?"/":a.pathname,o;if(s==null)o=r;else{let f=t.length-1;if(!n&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}o=f>=0?t[f]:"/"}let c=J5(a,o),u=s&&s!=="/"&&s.endsWith("/"),d=(i||s===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Oa=e=>e.join("/").replace(/\/\/+/g,"/"),Z5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),eM=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,tM=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function rM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var s2=["POST","PUT","PATCH","DELETE"];new Set(s2);var nM=["GET",...s2];new Set(nM);var Go=p.createContext(null);Go.displayName="DataRouter";var _h=p.createContext(null);_h.displayName="DataRouterState";p.createContext(!1);var o2=p.createContext({isTransitioning:!1});o2.displayName="ViewTransition";var aM=p.createContext(new Map);aM.displayName="Fetchers";var iM=p.createContext(null);iM.displayName="Await";var ta=p.createContext(null);ta.displayName="Navigation";var Hc=p.createContext(null);Hc.displayName="Location";var ra=p.createContext({outlet:null,matches:[],isDataRoute:!1});ra.displayName="Route";var p0=p.createContext(null);p0.displayName="RouteError";function sM(e,{relative:t}={}){vt(Yo(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=p.useContext(ta),{hash:a,pathname:i,search:s}=qc(e,{relative:t}),o=i;return r!=="/"&&(o=i==="/"?r:Oa([r,i])),n.createHref({pathname:o,search:s,hash:a})}function Yo(){return p.useContext(Hc)!=null}function xa(){return vt(Yo(),"useLocation() may be used only in the context of a <Router> component."),p.useContext(Hc).location}var l2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function c2(e){p.useContext(ta).static||p.useLayoutEffect(e)}function Xo(){let{isDataRoute:e}=p.useContext(ra);return e?bM():oM()}function oM(){vt(Yo(),"useNavigate() may be used only in the context of a <Router> component.");let e=p.useContext(Go),{basename:t,navigator:r}=p.useContext(ta),{matches:n}=p.useContext(ra),{pathname:a}=xa(),i=JSON.stringify(f0(n)),s=p.useRef(!1);return c2(()=>{s.current=!0}),p.useCallback((c,u={})=>{if(hn(s.current,l2),!s.current)return;if(typeof c=="number"){r.go(c);return}let d=h0(c,JSON.parse(i),a,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Oa([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,i,a,e])}p.createContext(null);function lM(){let{matches:e}=p.useContext(ra),t=e[e.length-1];return t?t.params:{}}function qc(e,{relative:t}={}){let{matches:r}=p.useContext(ra),{pathname:n}=xa(),a=JSON.stringify(f0(r));return p.useMemo(()=>h0(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function cM(e,t){return u2(e,t)}function u2(e,t,r,n,a){var w;vt(Yo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=p.useContext(ta),{matches:s}=p.useContext(ra),o=s[s.length-1],c=o?o.params:{},u=o?o.pathname:"/",d=o?o.pathnameBase:"/",f=o&&o.route;{let b=f&&f.path||"";d2(u,!f||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let h=xa(),m;if(t){let b=typeof t=="string"?Vo(t):t;vt(d==="/"||((w=b.pathname)==null?void 0:w.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${b.pathname}" was given in the \`location\` prop.`),m=b}else m=h;let g=m.pathname||"/",y=g;if(d!=="/"){let b=d.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=n2(e,{pathname:y});hn(f||v!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),hn(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=pM(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:Oa([d,i.encodeLocation?i.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?d:Oa([d,i.encodeLocation?i.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),s,r,n,a);return t&&x?p.createElement(Hc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},x):x}function uM(){let e=xM(),t=rM(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=p.createElement(p.Fragment,null,p.createElement("p",null," Hey developer "),p.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",p.createElement("code",{style:i},"ErrorBoundary")," or"," ",p.createElement("code",{style:i},"errorElement")," prop on your route.")),p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:a},r):null,s)}var dM=p.createElement(uM,null),fM=class extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?p.createElement(ra.Provider,{value:this.props.routeContext},p.createElement(p0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function hM({routeContext:e,match:t,children:r}){let n=p.useContext(Go);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),p.createElement(ra.Provider,{value:e},r)}function pM(e,t=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,s=r==null?void 0:r.errors;if(s!=null){let d=i.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);vt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let o=!1,c=-1;if(r)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:h,errors:m}=r,g=f.route.loader&&!h.hasOwnProperty(f.route.id)&&(!m||m[f.route.id]===void 0);if(f.route.lazy||g){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let u=r&&n?(d,f)=>{var h,m;n(d,{location:r.location,params:((m=(h=r.matches)==null?void 0:h[0])==null?void 0:m.params)??{},errorInfo:f})}:void 0;return i.reduceRight((d,f,h)=>{let m,g=!1,y=null,v=null;r&&(m=s&&f.route.id?s[f.route.id]:void 0,y=f.route.errorElement||dM,o&&(c<0&&h===0?(d2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,v=null):c===h&&(g=!0,v=f.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,h+1)),w=()=>{let b;return m?b=y:g?b=v:f.route.Component?b=p.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,p.createElement(hM,{match:f,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?p.createElement(fM,{location:r.location,revalidation:r.revalidation,component:y,error:m,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0},onError:u}):w()},null)}function m0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mM(e){let t=p.useContext(Go);return vt(t,m0(e)),t}function gM(e){let t=p.useContext(_h);return vt(t,m0(e)),t}function vM(e){let t=p.useContext(ra);return vt(t,m0(e)),t}function g0(e){let t=vM(e),r=t.matches[t.matches.length-1];return vt(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function yM(){return g0("useRouteId")}function xM(){var n;let e=p.useContext(p0),t=gM("useRouteError"),r=g0("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function bM(){let{router:e}=mM("useNavigate"),t=g0("useNavigate"),r=p.useRef(!1);return c2(()=>{r.current=!0}),p.useCallback(async(a,i={})=>{hn(r.current,l2),r.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var Lw={};function d2(e,t,r){!t&&!Lw[e]&&(Lw[e]=!0,hn(!1,r))}p.memo(wM);function wM({routes:e,future:t,state:r,unstable_onError:n}){return u2(e,void 0,r,n,t)}function rf({to:e,replace:t,state:r,relative:n}){vt(Yo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=p.useContext(ta);hn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=p.useContext(ra),{pathname:s}=xa(),o=Xo(),c=h0(e,f0(i),s,n==="path"),u=JSON.stringify(c);return p.useEffect(()=>{o(JSON.parse(u),{replace:t,state:r,relative:n})},[o,u,n,t,r]),null}function Zr(e){vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _M({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:i=!1}){vt(!Yo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=e.replace(/^\/*/,"/"),o=p.useMemo(()=>({basename:s,navigator:a,static:i,future:{}}),[s,a,i]);typeof r=="string"&&(r=Vo(r));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:h="default"}=r,m=p.useMemo(()=>{let g=$a(c,s);return g==null?null:{location:{pathname:g,search:u,hash:d,state:f,key:h},navigationType:n}},[s,c,u,d,f,h,n]);return hn(m!=null,`<Router basename="${s}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:p.createElement(ta.Provider,{value:o},p.createElement(Hc.Provider,{children:t,value:m}))}function jM({children:e,location:t}){return cM(tv(e),t)}function tv(e,t=[]){let r=[];return p.Children.forEach(e,(n,a)=>{if(!p.isValidElement(n))return;let i=[...t,a];if(n.type===p.Fragment){r.push.apply(r,tv(n.props.children,i));return}vt(n.type===Zr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let s={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=tv(n.props.children,i)),r.push(s)}),r}var Nd="get",kd="application/x-www-form-urlencoded";function jh(e){return e!=null&&typeof e.tagName=="string"}function SM(e){return jh(e)&&e.tagName.toLowerCase()==="button"}function NM(e){return jh(e)&&e.tagName.toLowerCase()==="form"}function kM(e){return jh(e)&&e.tagName.toLowerCase()==="input"}function CM(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function EM(e,t){return e.button===0&&(!t||t==="_self")&&!CM(e)}function rv(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function PM(e,t){let r=rv(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}var Mu=null;function OM(){if(Mu===null)try{new FormData(document.createElement("form"),0),Mu=!1}catch{Mu=!0}return Mu}var AM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xm(e){return e!=null&&!AM.has(e)?(hn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${kd}"`),null):e}function TM(e,t){let r,n,a,i,s;if(NM(e)){let o=e.getAttribute("action");n=o?$a(o,t):null,r=e.getAttribute("method")||Nd,a=xm(e.getAttribute("enctype"))||kd,i=new FormData(e)}else if(SM(e)||kM(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||o.getAttribute("action");if(n=c?$a(c,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||Nd,a=xm(e.getAttribute("formenctype"))||xm(o.getAttribute("enctype"))||kd,i=new FormData(o,e),!OM()){let{name:u,type:d,value:f}=e;if(d==="image"){let h=u?`${u}.`:"";i.append(`${h}x`,"0"),i.append(`${h}y`,"0")}else u&&i.append(u,f)}}else{if(jh(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Nd,n=null,a=kd,s=e}return i&&a==="text/plain"&&(s=i,i=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:i,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function v0(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function DM(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&$a(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function IM(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function RM(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function MM(e,t,r){let n=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let s=await IM(i,r);return s.links?s.links():[]}return[]}));return BM(n.flat(1).filter(RM).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Fw(e,t,r,n,a,i){let s=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,o=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return i==="assets"?t.filter((c,u)=>s(c,u)||o(c,u)):i==="data"?t.filter((c,u)=>{var f;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(s(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function $M(e,t,{includeHydrateFallback:r}={}){return LM(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function LM(e){return[...new Set(e)]}function FM(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function BM(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let i=JSON.stringify(FM(a));return r.has(i)||(r.add(i),n.push({key:i,link:a})),n},[])}function f2(){let e=p.useContext(Go);return v0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function UM(){let e=p.useContext(_h);return v0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var y0=p.createContext(void 0);y0.displayName="FrameworkContext";function h2(){let e=p.useContext(y0);return v0(e,"You must render this element inside a <HydratedRouter> element"),e}function zM(e,t){let r=p.useContext(y0),[n,a]=p.useState(!1),[i,s]=p.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,h=p.useRef(null);p.useEffect(()=>{if(e==="render"&&s(!0),e==="viewport"){let y=x=>{x.forEach(w=>{s(w.isIntersecting)})},v=new IntersectionObserver(y,{threshold:.5});return h.current&&v.observe(h.current),()=>{v.disconnect()}}},[e]),p.useEffect(()=>{if(n){let y=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(y)}}},[n]);let m=()=>{a(!0)},g=()=>{a(!1),s(!1)};return r?e!=="intent"?[i,h,{}]:[i,h,{onFocus:wl(o,m),onBlur:wl(c,g),onMouseEnter:wl(u,m),onMouseLeave:wl(d,g),onTouchStart:wl(f,m)}]:[!1,h,{}]}function wl(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function WM({page:e,...t}){let{router:r}=f2(),n=p.useMemo(()=>n2(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?p.createElement(HM,{page:e,matches:n,...t}):null}function KM(e){let{manifest:t,routeModules:r}=h2(),[n,a]=p.useState([]);return p.useEffect(()=>{let i=!1;return MM(e,t,r).then(s=>{i||a(s)}),()=>{i=!0}},[e,t,r]),n}function HM({page:e,matches:t,...r}){let n=xa(),{manifest:a,routeModules:i}=h2(),{basename:s}=f2(),{loaderData:o,matches:c}=UM(),u=p.useMemo(()=>Fw(e,t,c,a,n,"data"),[e,t,c,a,n]),d=p.useMemo(()=>Fw(e,t,c,a,n,"assets"),[e,t,c,a,n]),f=p.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let g=new Set,y=!1;if(t.forEach(x=>{var b;let w=a.routes[x.route.id];!w||!w.hasLoader||(!u.some(_=>_.route.id===x.route.id)&&x.route.id in o&&((b=i[x.route.id])!=null&&b.shouldRevalidate)||w.hasClientLoader?y=!0:g.add(x.route.id))}),g.size===0)return[];let v=DM(e,s,"data");return y&&g.size>0&&v.searchParams.set("_routes",t.filter(x=>g.has(x.route.id)).map(x=>x.route.id).join(",")),[v.pathname+v.search]},[s,o,n,a,u,t,e,i]),h=p.useMemo(()=>$M(d,a),[d,a]),m=KM(d);return p.createElement(p.Fragment,null,f.map(g=>p.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),h.map(g=>p.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),m.map(({key:g,link:y})=>p.createElement("link",{key:g,nonce:r.nonce,...y})))}function qM(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var p2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{p2&&(window.__reactRouterVersion="7.9.6")}catch{}function VM({basename:e,children:t,window:r}){let n=p.useRef();n.current==null&&(n.current=T5({window:r,v5Compat:!0}));let a=n.current,[i,s]=p.useState({action:a.action,location:a.location}),o=p.useCallback(c=>{p.startTransition(()=>s(c))},[s]);return p.useLayoutEffect(()=>a.listen(o),[a,o]),p.createElement(_M,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:a})}var m2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,g2=p.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:i,replace:s,state:o,target:c,to:u,preventScrollReset:d,viewTransition:f,...h},m){let{basename:g}=p.useContext(ta),y=typeof u=="string"&&m2.test(u),v,x=!1;if(typeof u=="string"&&y&&(v=u,p2))try{let C=new URL(window.location.href),E=u.startsWith("//")?new URL(C.protocol+u):new URL(u),P=$a(E.pathname,g);E.origin===C.origin&&P!=null?u=P+E.search+E.hash:x=!0}catch{hn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=sM(u,{relative:a}),[b,_,j]=zM(n,h),S=JM(u,{replace:s,state:o,target:c,preventScrollReset:d,relative:a,viewTransition:f});function N(C){t&&t(C),C.defaultPrevented||S(C)}let k=p.createElement("a",{...h,...j,href:v||w,onClick:x||i?t:N,ref:qM(m,_),target:c,"data-discover":!y&&r==="render"?"true":void 0});return b&&!y?p.createElement(p.Fragment,null,k,p.createElement(WM,{page:w})):k});g2.displayName="Link";var GM=p.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:i,to:s,viewTransition:o,children:c,...u},d){let f=qc(s,{relative:u.relative}),h=xa(),m=p.useContext(_h),{navigator:g,basename:y}=p.useContext(ta),v=m!=null&&r4(f)&&o===!0,x=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=h.pathname,b=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(w=w.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&y&&(b=$a(b,y)||b);const _=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let j=w===x||!a&&w.startsWith(x)&&w.charAt(_)==="/",S=b!=null&&(b===x||!a&&b.startsWith(x)&&b.charAt(x.length)==="/"),N={isActive:j,isPending:S,isTransitioning:v},k=j?t:void 0,C;typeof n=="function"?C=n(N):C=[n,j?"active":null,S?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let E=typeof i=="function"?i(N):i;return p.createElement(g2,{...u,"aria-current":k,className:C,ref:d,style:E,to:s,viewTransition:o},typeof c=="function"?c(N):c)});GM.displayName="NavLink";var YM=p.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:i,method:s=Nd,action:o,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...h},m)=>{let g=e4(),y=t4(o,{relative:u}),v=s.toLowerCase()==="get"?"get":"post",x=typeof o=="string"&&m2.test(o),w=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let _=b.nativeEvent.submitter,j=(_==null?void 0:_.getAttribute("formmethod"))||s;g(_||b.currentTarget,{fetcherKey:t,method:j,navigate:r,replace:a,state:i,relative:u,preventScrollReset:d,viewTransition:f})};return p.createElement("form",{ref:m,method:v,action:y,onSubmit:n?c:w,...h,"data-discover":!x&&e==="render"?"true":void 0})});YM.displayName="Form";function XM(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function v2(e){let t=p.useContext(Go);return vt(t,XM(e)),t}function JM(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:i,viewTransition:s}={}){let o=Xo(),c=xa(),u=qc(e,{relative:i});return p.useCallback(d=>{if(EM(d,t)){d.preventDefault();let f=r!==void 0?r:yc(c)===yc(u);o(e,{replace:f,state:n,preventScrollReset:a,relative:i,viewTransition:s})}},[c,o,u,r,n,t,e,a,i,s])}function y2(e){hn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=p.useRef(rv(e)),r=p.useRef(!1),n=xa(),a=p.useMemo(()=>PM(n.search,r.current?null:t.current),[n.search]),i=Xo(),s=p.useCallback((o,c)=>{const u=rv(typeof o=="function"?o(new URLSearchParams(a)):o);r.current=!0,i("?"+u,c)},[i,a]);return[a,s]}var QM=0,ZM=()=>`__${String(++QM)}__`;function e4(){let{router:e}=v2("useSubmit"),{basename:t}=p.useContext(ta),r=yM();return p.useCallback(async(n,a={})=>{let{action:i,method:s,encType:o,formData:c,body:u}=TM(n,t);if(a.navigate===!1){let d=a.fetcherKey||ZM();await e.fetch(d,r,a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||s,formEncType:a.encType||o,flushSync:a.flushSync})}else await e.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||s,formEncType:a.encType||o,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,r])}function t4(e,{relative:t}={}){let{basename:r}=p.useContext(ta),n=p.useContext(ra);vt(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...qc(e||".",{relative:t})},s=xa();if(e==null){i.search=s.search;let o=new URLSearchParams(i.search),c=o.getAll("index");if(c.some(d=>d==="")){o.delete("index"),c.filter(f=>f).forEach(f=>o.append("index",f));let d=o.toString();i.search=d?`?${d}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Oa([r,i.pathname])),yc(i)}function r4(e,{relative:t}={}){let r=p.useContext(o2);vt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=v2("useViewTransitionState"),a=qc(e,{relative:t});if(!r.isTransitioning)return!1;let i=$a(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=$a(r.nextLocation.pathname,n)||r.nextLocation.pathname;return tf(a.pathname,s)!=null||tf(a.pathname,i)!=null}var nv=function(e,t){return nv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},nv(e,t)};function x2(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");nv(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var nf=function(){return nf=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},nf.apply(this,arguments)};function Jo(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function b2(e,t,r,n){var a=arguments.length,i=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(a<3?s(i):a>3?s(t,r,i):s(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function w2(e,t){return function(r,n){t(r,n,e)}}function _2(e,t,r,n,a,i){function s(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=n.kind,c=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f,h=!1,m=r.length-1;m>=0;m--){var g={};for(var y in n)g[y]=y==="access"?{}:n[y];for(var y in n.access)g.access[y]=n.access[y];g.addInitializer=function(x){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(x||null))};var v=(0,r[m])(o==="accessor"?{get:d.get,set:d.set}:d[c],g);if(o==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(f=s(v.get))&&(d.get=f),(f=s(v.set))&&(d.set=f),(f=s(v.init))&&a.unshift(f)}else(f=s(v))&&(o==="field"?a.unshift(f):d[c]=f)}u&&Object.defineProperty(u,n.name,d),h=!0}function j2(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function S2(e){return typeof e=="symbol"?e:"".concat(e)}function N2(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function k2(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function be(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})}function C2(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Sh=Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function E2(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Sh(t,e,r)}function af(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function x0(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function P2(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(x0(arguments[t]));return e}function O2(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var i=arguments[t],s=0,o=i.length;s<o;s++,a++)n[a]=i[s];return n}function A2(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Ro(e){return this instanceof Ro?(this.v=e,this):new Ro(e)}function T2(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",s),a[Symbol.asyncIterator]=function(){return this},a;function s(m){return function(g){return Promise.resolve(g).then(m,f)}}function o(m,g){n[m]&&(a[m]=function(y){return new Promise(function(v,x){i.push([m,y,v,x])>1||c(m,y)})},g&&(a[m]=g(a[m])))}function c(m,g){try{u(n[m](g))}catch(y){h(i[0][3],y)}}function u(m){m.value instanceof Ro?Promise.resolve(m.value.v).then(d,f):h(i[0][2],m)}function d(m){c("next",m)}function f(m){c("throw",m)}function h(m,g){m(g),i.shift(),i.length&&c(i[0][0],i[0][1])}}function D2(e){var t,r;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,i){t[a]=e[a]?function(s){return(r=!r)?{value:Ro(e[a](s)),done:!1}:i?i(s):s}:i}}function I2(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof af=="function"?af(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(s){return new Promise(function(o,c){s=e[i](s),a(o,c,s.done,s.value)})}}function a(i,s,o,c){Promise.resolve(c).then(function(u){i({value:u,done:o})},s)}}function R2(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var n4=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},av=function(e){return av=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},av(e)};function M2(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=av(e),n=0;n<r.length;n++)r[n]!=="default"&&Sh(t,e,r[n]);return n4(t,e),t}function $2(e){return e&&e.__esModule?e:{default:e}}function L2(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function F2(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function B2(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function U2(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var a4=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function z2(e){function t(i){e.error=e.hasError?new a4(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function a(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(a,function(s){return t(s),a()})}else n|=1}catch(s){t(s)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function W2(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,i,s){return n?t?".jsx":".js":a&&(!i||!s)?r:a+i+"."+s.toLowerCase()+"js"}):e}const i4={__extends:x2,__assign:nf,__rest:Jo,__decorate:b2,__param:w2,__esDecorate:_2,__runInitializers:j2,__propKey:S2,__setFunctionName:N2,__metadata:k2,__awaiter:be,__generator:C2,__createBinding:Sh,__exportStar:E2,__values:af,__read:x0,__spread:P2,__spreadArrays:O2,__spreadArray:A2,__await:Ro,__asyncGenerator:T2,__asyncDelegator:D2,__asyncValues:I2,__makeTemplateObject:R2,__importStar:M2,__importDefault:$2,__classPrivateFieldGet:L2,__classPrivateFieldSet:F2,__classPrivateFieldIn:B2,__addDisposableResource:U2,__disposeResources:z2,__rewriteRelativeImportExtension:W2},s4=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:U2,get __assign(){return nf},__asyncDelegator:D2,__asyncGenerator:T2,__asyncValues:I2,__await:Ro,__awaiter:be,__classPrivateFieldGet:L2,__classPrivateFieldIn:B2,__classPrivateFieldSet:F2,__createBinding:Sh,__decorate:b2,__disposeResources:z2,__esDecorate:_2,__exportStar:E2,__extends:x2,__generator:C2,__importDefault:$2,__importStar:M2,__makeTemplateObject:R2,__metadata:k2,__param:w2,__propKey:S2,__read:x0,__rest:Jo,__rewriteRelativeImportExtension:W2,__runInitializers:j2,__setFunctionName:N2,__spread:P2,__spreadArray:A2,__spreadArrays:O2,__values:af,default:i4},Symbol.toStringTag,{value:"Module"})),o4=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class b0 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class l4 extends b0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Bw extends b0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Uw extends b0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var iv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(iv||(iv={}));class c4{constructor(t,{headers:r={},customFetch:n,region:a=iv.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=o4(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return be(this,arguments,void 0,function*(r,n={}){var a;let i,s;try{const{headers:o,method:c,body:u,signal:d,timeout:f}=n;let h={},{region:m}=n;m||(m=this.region);const g=new URL(`${this.url}/${r}`);m&&m!=="any"&&(h["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let y;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(h["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(h["Content-Type"]="application/json",y=JSON.stringify(u)):y=u;let v=d;f&&(s=new AbortController,i=setTimeout(()=>s.abort(),f),d?(v=s.signal,d.addEventListener("abort",()=>s.abort())):v=s.signal);const x=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),o),body:y,signal:v}).catch(j=>{throw new l4(j)}),w=x.headers.get("x-relay-error");if(w&&w==="true")throw new Bw(x);if(!x.ok)throw new Uw(x);let b=((a=x.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),_;return b==="application/json"?_=yield x.json():b==="application/octet-stream"||b==="application/pdf"?_=yield x.blob():b==="text/event-stream"?_=x:b==="multipart/form-data"?_=yield x.formData():_=yield x.text(),{data:_,error:null,response:x}}catch(o){return{data:null,error:o,response:o instanceof Uw||o instanceof Bw?o.context:void 0}}finally{i&&clearTimeout(i)}})}}var Er={};const Qo=iI(s4);var $u={},Lu={},Fu={},Bu={},Uu={},zu={},zw;function K2(){if(zw)return zu;zw=1,Object.defineProperty(zu,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return zu.default=e,zu}var Ww;function H2(){if(Ww)return Uu;Ww=1,Object.defineProperty(Uu,"__esModule",{value:!0});const t=Qo.__importDefault(K2());class r{constructor(a){var i,s;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(i=a.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=a.signal,this.isMaybeSingle=(s=a.isMaybeSingle)!==null&&s!==void 0?s:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=new Headers(this.headers),this.headers.set(a,i),this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let o=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,f,h;let m=null,g=null,y=null,v=c.status,x=c.statusText;if(c.ok){if(this.method!=="HEAD"){const j=await c.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?g=j:g=JSON.parse(j))}const b=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),_=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");b&&_&&_.length>1&&(y=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(m={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,y=null,v=406,x="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const b=await c.text();try{m=JSON.parse(b),Array.isArray(m)&&c.status===404&&(g=[],m=null,v=200,x="OK")}catch{c.status===404&&b===""?(v=204,x="No Content"):m={message:b}}if(m&&this.isMaybeSingle&&(!((h=m==null?void 0:m.details)===null||h===void 0)&&h.includes("0 rows"))&&(m=null,v=200,x="OK"),m&&this.shouldThrowOnError)throw new t.default(m)}return{error:m,data:g,count:y,status:v,statusText:x}});return this.shouldThrowOnError||(o=o.catch(c=>{var u,d,f,h,m,g;let y="";const v=c==null?void 0:c.cause;if(v){const x=(u=v==null?void 0:v.message)!==null&&u!==void 0?u:"",w=(d=v==null?void 0:v.code)!==null&&d!==void 0?d:"";y=`${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"FetchError"}: ${c==null?void 0:c.message}`,y+=`

Caused by: ${(h=v==null?void 0:v.name)!==null&&h!==void 0?h:"Error"}: ${x}`,w&&(y+=` (${w})`),v!=null&&v.stack&&(y+=`
${v.stack}`)}else y=(m=c==null?void 0:c.stack)!==null&&m!==void 0?m:"";return{error:{message:`${(g=c==null?void 0:c.name)!==null&&g!==void 0?g:"FetchError"}: ${c==null?void 0:c.message}`,details:y,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(a,i)}returns(){return this}overrideTypes(){return this}}return Uu.default=r,Uu}var Kw;function q2(){if(Kw)return Bu;Kw=1,Object.defineProperty(Bu,"__esModule",{value:!0});const t=Qo.__importDefault(H2());class r extends t.default{select(a){let i=!1;const s=(a??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:s,foreignTable:o,referencedTable:c=o}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${a}.${i?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:s=i}={}){const o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${a}`),this}range(a,i,{foreignTable:s,referencedTable:o=s}={}){const c=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(u,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:s=!1,buffers:o=!1,wal:c=!1,format:u="text"}={}){var d;const f=[a?"analyze":null,i?"verbose":null,s?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),h=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${h}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Bu.default=r,Bu}var Hw;function w0(){if(Hw)return Fu;Hw=1,Object.defineProperty(Fu,"__esModule",{value:!0});const t=Qo.__importDefault(q2()),r=new RegExp("[,()]");class n extends t.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${u}fts${d}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return Fu.default=n,Fu}var qw;function V2(){if(qw)return Lu;qw=1,Object.defineProperty(Lu,"__esModule",{value:!0});const t=Qo.__importDefault(w0());class r{constructor(a,{headers:i={},schema:s,fetch:o}){this.url=a,this.headers=new Headers(i),this.schema=s,this.fetch=o}select(a,i){const{head:s=!1,count:o}=i??{},c=s?"HEAD":"GET";let u=!1;const d=(a??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",d),o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:s=!0}={}){var o;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const u=a.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:s=!1,count:o,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const f=a.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(f.length>0){const h=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(a,{count:i}={}){var s;const o="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:a}={}){var i;const s="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Lu.default=r,Lu}var Vw;function u4(){if(Vw)return $u;Vw=1,Object.defineProperty($u,"__esModule",{value:!0});const e=Qo,t=e.__importDefault(V2()),r=e.__importDefault(w0());class n{constructor(i,{headers:s={},schema:o,fetch:c}={}){this.url=i,this.headers=new Headers(s),this.schemaName=o,this.fetch=c}from(i){const s=new URL(`${this.url}/${i}`);return new t.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,s={},{head:o=!1,get:c=!1,count:u}={}){var d;let f;const h=new URL(`${this.url}/rpc/${i}`);let m;o||c?(f=o?"HEAD":"GET",Object.entries(s).filter(([y,v])=>v!==void 0).map(([y,v])=>[y,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([y,v])=>{h.searchParams.append(y,v)})):(f="POST",m=s);const g=new Headers(this.headers);return u&&g.set("Prefer",`count=${u}`),new r.default({method:f,url:h,headers:g,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return $u.default=n,$u}Object.defineProperty(Er,"__esModule",{value:!0});var G2=Er.PostgrestError=aC=Er.PostgrestBuilder=rC=Er.PostgrestTransformBuilder=eC=Er.PostgrestFilterBuilder=Q2=Er.PostgrestQueryBuilder=X2=Er.PostgrestClient=void 0;const Zo=Qo,Y2=Zo.__importDefault(u4());var X2=Er.PostgrestClient=Y2.default;const J2=Zo.__importDefault(V2());var Q2=Er.PostgrestQueryBuilder=J2.default;const Z2=Zo.__importDefault(w0());var eC=Er.PostgrestFilterBuilder=Z2.default;const tC=Zo.__importDefault(q2());var rC=Er.PostgrestTransformBuilder=tC.default;const nC=Zo.__importDefault(H2());var aC=Er.PostgrestBuilder=nC.default;const iC=Zo.__importDefault(K2());G2=Er.PostgrestError=iC.default;var sC=Er.default={PostgrestClient:Y2.default,PostgrestQueryBuilder:J2.default,PostgrestFilterBuilder:Z2.default,PostgrestTransformBuilder:tC.default,PostgrestBuilder:nC.default,PostgrestError:iC.default};const d4=WS({__proto__:null,get PostgrestBuilder(){return aC},get PostgrestClient(){return X2},get PostgrestError(){return G2},get PostgrestFilterBuilder(){return eC},get PostgrestQueryBuilder(){return Q2},get PostgrestTransformBuilder(){return rC},default:sC},[Er]),{PostgrestClient:f4,PostgrestQueryBuilder:Tee,PostgrestFilterBuilder:Dee,PostgrestTransformBuilder:Iee,PostgrestBuilder:Ree,PostgrestError:Mee}=sC||d4;class h4{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const p4="2.83.0",m4=`realtime-js/${p4}`,oC="1.0.0",g4="2.0.0",Gw=oC,sv=1e4,v4=1e3,y4=100;var ts;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ts||(ts={}));var zt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(zt||(zt={}));var bn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(bn||(bn={}));var ov;(function(e){e.websocket="websocket"})(ov||(ov={}));var rs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(rs||(rs={}));class x4{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(t,r){if(this._isArrayBuffer(t.payload))return r(this._binaryEncodePush(t));if(t.event===this.BROADCAST&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodePush(t){var r,n;const{event:a,topic:i,payload:s}=t,o=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",u=this.META_LENGTH+c.length+o.length+i.length+a.length,d=new ArrayBuffer(this.HEADER_LENGTH+u);let f=new DataView(d),h=0;f.setUint8(h++,this.KINDS.push),f.setUint8(h++,c.length),f.setUint8(h++,o.length),f.setUint8(h++,i.length),f.setUint8(h++,a.length),Array.from(c,g=>f.setUint8(h++,g.charCodeAt(0))),Array.from(o,g=>f.setUint8(h++,g.charCodeAt(0))),Array.from(i,g=>f.setUint8(h++,g.charCodeAt(0))),Array.from(a,g=>f.setUint8(h++,g.charCodeAt(0)));var m=new Uint8Array(d.byteLength+s.byteLength);return m.set(new Uint8Array(d),0),m.set(new Uint8Array(s),d.byteLength),m.buffer}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n,a,i;const s=t.topic,o=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",u=t.payload.event,d=(i=(a=t.payload)===null||a===void 0?void 0:a.payload)!==null&&i!==void 0?i:new ArrayBuffer(0),f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+s.length+u.length,h=new ArrayBuffer(this.HEADER_LENGTH+f);let m=new DataView(h),g=0;m.setUint8(g++,this.KINDS.userBroadcastPush),m.setUint8(g++,c.length),m.setUint8(g++,o.length),m.setUint8(g++,s.length),m.setUint8(g++,u.length),m.setUint8(g++,this.BINARY_ENCODING),Array.from(c,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(o,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(s,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(u,v=>m.setUint8(g++,v.charCodeAt(0)));var y=new Uint8Array(h.byteLength+d.byteLength);return y.set(new Uint8Array(h),0),y.set(new Uint8Array(d),h.byteLength),y.buffer}_encodeJsonUserBroadcastPush(t){var r,n,a,i;const s=t.topic,o=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",u=t.payload.event,d=(i=(a=t.payload)===null||a===void 0?void 0:a.payload)!==null&&i!==void 0?i:{},h=new TextEncoder().encode(JSON.stringify(d)).buffer,m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+s.length+u.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let y=new DataView(g),v=0;y.setUint8(v++,this.KINDS.userBroadcastPush),y.setUint8(v++,c.length),y.setUint8(v++,o.length),y.setUint8(v++,s.length),y.setUint8(v++,u.length),y.setUint8(v++,this.JSON_ENCODING),Array.from(c,w=>y.setUint8(v++,w.charCodeAt(0))),Array.from(o,w=>y.setUint8(v++,w.charCodeAt(0))),Array.from(s,w=>y.setUint8(v++,w.charCodeAt(0))),Array.from(u,w=>y.setUint8(v++,w.charCodeAt(0)));var x=new Uint8Array(g.byteLength+h.byteLength);return x.set(new Uint8Array(g),0),x.set(new Uint8Array(h),g.byteLength),x.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,i,s,o,c]=n;return r({join_ref:a,ref:i,topic:s,event:o,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.push:return this._decodePush(t,r,a);case this.KINDS.reply:return this._decodeReply(t,r,a);case this.KINDS.broadcast:return this._decodeBroadcast(t,r,a);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodePush(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),s=r.getUint8(3);let o=this.HEADER_LENGTH+this.META_LENGTH-1;const c=n.decode(t.slice(o,o+a));o=o+a;const u=n.decode(t.slice(o,o+i));o=o+i;const d=n.decode(t.slice(o,o+s));o=o+s;const f=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{join_ref:c,ref:null,topic:u,event:d,payload:f}}_decodeReply(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),s=r.getUint8(3),o=r.getUint8(4);let c=this.HEADER_LENGTH+this.META_LENGTH;const u=n.decode(t.slice(c,c+a));c=c+a;const d=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+s));c=c+s;const h=n.decode(t.slice(c,c+o));c=c+o;const m=JSON.parse(n.decode(t.slice(c,t.byteLength))),g={status:h,response:m};return{join_ref:u,ref:d,topic:f,event:bn.reply,payload:g}}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let s=this.HEADER_LENGTH+2;const o=n.decode(t.slice(s,s+a));s=s+a;const c=n.decode(t.slice(s,s+i));s=s+i;const u=JSON.parse(n.decode(t.slice(s,t.byteLength)));return{join_ref:null,ref:null,topic:o,event:c,payload:u}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),s=r.getUint8(3),o=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+a));c=c+a;const d=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+s));c=c+s;const h=t.slice(c,t.byteLength),m=o===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,g={type:this.BROADCAST,event:d,payload:m};return s>0&&(g.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST,payload:g}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class lC{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var st;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(st||(st={}));const Yw=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,s)=>(i[s]=b4(s,e,t,a),i),{}):{}},b4=(e,t,r,n)=>{const a=t.find(o=>o.name===e),i=a==null?void 0:a.type,s=r[e];return i&&!n.includes(i)?cC(i,s):lv(s)},cC=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return S4(t,r)}switch(e){case st.bool:return w4(t);case st.float4:case st.float8:case st.int2:case st.int4:case st.int8:case st.numeric:case st.oid:return _4(t);case st.json:case st.jsonb:return j4(t);case st.timestamp:return N4(t);case st.abstime:case st.date:case st.daterange:case st.int4range:case st.int8range:case st.money:case st.reltime:case st.text:case st.time:case st.timestamptz:case st.timetz:case st.tsrange:case st.tstzrange:return lv(t);default:return lv(t)}},lv=e=>e,w4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},_4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},j4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},S4=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const s=e.slice(1,r);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(o=>cC(t,o))}return e},N4=e=>typeof e=="string"?e.replace(" ","T"):e,uC=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class bm{constructor(t,r,n={},a=sv){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Xw;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Xw||(Xw={}));class Yl{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:s,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Yl.syncState(this.state,a,i,s),this.pendingDiffs.forEach(c=>{this.state=Yl.syncDiff(this.state,c,i,s)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:s,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Yl.syncDiff(this.state,a,i,s),o())}),this.onJoin((a,i,s)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:s})}),this.onLeave((a,i,s)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),s=this.transformState(r),o={},c={};return this.map(i,(u,d)=>{s[u]||(c[u]=d)}),this.map(s,(u,d)=>{const f=i[u];if(f){const h=d.map(v=>v.presence_ref),m=f.map(v=>v.presence_ref),g=d.filter(v=>m.indexOf(v.presence_ref)<0),y=f.filter(v=>h.indexOf(v.presence_ref)<0);g.length>0&&(o[u]=g),y.length>0&&(c[u]=y)}else o[u]=d}),this.syncDiff(i,{joins:o,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(o,c)=>{var u;const d=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(c),d.length>0){const f=t[o].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[o].unshift(...h)}n(o,d,c)}),this.map(s,(o,c)=>{let u=t[o];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[o]=u,a(o,u,c),u.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Jw;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Jw||(Jw={}));var Xl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Xl||(Xl={}));var wa;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(wa||(wa={}));class _0{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new bm(this,bn.join,this.params,this.timeout),this.rejoinTimer=new lC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=zt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(bn.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Yl(this),this.broadcastEndpointURL=uC(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==zt.closed){const{config:{broadcast:s,presence:o,private:c}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[Xl.PRESENCE]&&this.bindings[Xl.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},h={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(wa.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(wa.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket.setAuth(),m===void 0){t==null||t(wa.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,v=(g=y==null?void 0:y.length)!==null&&g!==void 0?g:0,x=[];for(let w=0;w<v;w++){const b=y[w],{filter:{event:_,schema:j,table:S,filter:N}}=b,k=m&&m[w];if(k&&k.event===_&&k.schema===j&&k.table===S&&k.filter===N)x.push(Object.assign(Object.assign({},b),{id:k.id}));else{this.unsubscribe(),this.state=zt.errored,t==null||t(wa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(wa.SUBSCRIBED);return}}).receive("error",m=>{this.state=zt.errored,t==null||t(wa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(wa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===zt.joined&&t===Xl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const u=await o.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:s}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var s,o,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(s=this.params)===null||s===void 0?void 0:s.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=zt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(bn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new bm(this,bn.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=zt.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),s=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),s}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new bm(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>y4){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const s=t.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=bn;if(n&&[o,c,u,d].indexOf(s)>=0&&n!==this._joinRef())return;let h=this._onMessage(s,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var g,y,v;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((v=(y=m.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===s}).map(m=>m.callback(h,n)):(i=this.bindings[s])===null||i===void 0||i.filter(m=>{var g,y,v,x,w,b;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in m){const _=m.id,j=(g=m.filter)===null||g===void 0?void 0:g.event;return _&&((y=r.ids)===null||y===void 0?void 0:y.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const _=(w=(x=m==null?void 0:m.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return _==="*"||_===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===s}).map(m=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:y,table:v,commit_timestamp:x,type:w,errors:b}=g;h=Object.assign(Object.assign({},{schema:y,table:v,commit_timestamp:x,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(g))}m.callback(h,n)})}_isClosed(){return this.state===zt.closed}_isJoined(){return this.state===zt.joined}_isJoining(){return this.state===zt.joining}_isLeaving(){return this.state===zt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&_0.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(bn.close,{},t)}_onError(t){this._on(bn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=zt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Yw(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Yw(t.columns,t.old_record)),r}}const wm=()=>{},Wu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},k4=[1e3,2e3,5e3,1e4],C4=1e4,E4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class P4{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=sv,this.transport=null,this.heartbeatIntervalMs=Wu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=wm,this.ref=0,this.reconnectTimer=null,this.vsn=Gw,this.logger=wm,this.conn=null,this.sendBuffer=[],this.serializer=new x4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${ov.websocket}`,this.httpEndpoint=uC(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=h4.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ts.connecting:return rs.Connecting;case ts.open:return rs.Open;case ts.closing:return rs.Closing;default:return rs.Closed}}isConnected(){return this.connectionState()===rs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new _0(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,s=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(v4,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Wu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:s}=r,o=s?`(${s})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${o}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,s)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ts.open||this.conn.readyState===ts.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(bn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([E4],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:m4};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(bn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new lC(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Wu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,s,o,c,u,d,f,h,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:sv,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Wu.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:wm,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Gw,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:g=>k4[g-1]||C4,this.vsn){case oC:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(g,y)=>y(JSON.stringify(g)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(g,y)=>y(JSON.parse(g));break;case g4:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class j0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function St(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class O4 extends j0{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class cv extends j0{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const S0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),A4=()=>Response,uv=e=>{if(Array.isArray(e))return e.map(r=>uv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=uv(n)}),t},T4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},_m=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},D4=(e,t,r)=>be(void 0,void 0,void 0,function*(){const n=yield A4();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,s=(a==null?void 0:a.statusCode)||i+"";t(new O4(_m(a),i,s))}).catch(a=>{t(new cv(_m(a),a))}):t(new cv(_m(e),e))}),I4=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(T4(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Vc(e,t,r,n,a,i){return be(this,void 0,void 0,function*(){return new Promise((s,o)=>{e(r,I4(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>D4(c,o,n))})})}function xc(e,t,r,n){return be(this,void 0,void 0,function*(){return Vc(e,"GET",t,r,n)})}function Un(e,t,r,n,a){return be(this,void 0,void 0,function*(){return Vc(e,"POST",t,n,a,r)})}function dv(e,t,r,n,a){return be(this,void 0,void 0,function*(){return Vc(e,"PUT",t,n,a,r)})}function R4(e,t,r,n){return be(this,void 0,void 0,function*(){return Vc(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function N0(e,t,r,n,a){return be(this,void 0,void 0,function*(){return Vc(e,"DELETE",t,n,a,r)})}class M4{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return be(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(St(t))return{data:null,error:t};throw t}})}}var dC;class $4{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[dC]="BlobDownloadBuilder",this.promise=null}asStream(){return new M4(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return be(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(St(t))return{data:null,error:t};throw t}})}}dC=Symbol.toStringTag;const L4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Qw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class F4{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=S0(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return be(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},Qw),a);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",s.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=n,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!s.duplex&&(s.duplex="half")),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(t=="PUT"?dv:Un)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:o},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(St(i))return{data:null,error:i};throw i}})}upload(t,r,n){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return be(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),s=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${s}`);o.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Qw.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield dv(this.fetch,o.toString(),c,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(St(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return be(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield Un(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),s=new URL(this.url+i.url),o=s.searchParams.get("token");if(!o)throw new j0("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n))return{data:null,error:n};throw n}})}update(t,r,n){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return be(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(St(a))return{data:null,error:a};throw a}})}copy(t,r,n){return be(this,void 0,void 0,function*(){try{return{data:{path:(yield Un(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(St(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return be(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Un(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(St(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return be(this,void 0,void 0,function*(){try{const a=yield Un(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(St(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),s=i?`?${i}`:"",o=this._getFinalPath(t),c=()=>xc(this.fetch,`${this.url}/${a}/${o}${s}`,{headers:this.headers,noResolveJson:!0});return new $4(c,this.shouldThrowOnError)}info(t){return be(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield xc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:uv(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n))return{data:null,error:n};throw n}})}exists(t){return be(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield R4(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n)&&n instanceof cv){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(t){return be(this,void 0,void 0,function*(){try{return{data:yield N0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(St(r))return{data:null,error:r};throw r}})}list(t,r,n){return be(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},L4),r),{prefix:t||""});return{data:yield Un(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(St(a))return{data:null,error:a};throw a}})}listV2(t,r){return be(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Un(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const fC="2.83.0",hC={"X-Client-Info":`storage-js/${fC}`};class B4{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hC),r),this.fetch=S0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return be(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield xc(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(St(r))return{data:null,error:r};throw r}})}getBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield xc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(St(r))return{data:null,error:r};throw r}})}createBucket(t){return be(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Un(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(St(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return be(this,void 0,void 0,function*(){try{return{data:yield dv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n))return{data:null,error:n};throw n}})}emptyBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(St(r))return{data:null,error:r};throw r}})}deleteBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield N0(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(St(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class U4{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hC),r),this.fetch=S0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(St(r))return{data:null,error:r};throw r}})}listBuckets(t){return be(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield xc(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(St(r))return{data:null,error:r};throw r}})}deleteBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield N0(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(St(r))return{data:null,error:r};throw r}})}}const k0={"X-Client-Info":`storage-js/${fC}`,"Content-Type":"application/json"};class pC extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function sn(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class jm extends pC{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class z4 extends pC{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var Zw;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Zw||(Zw={}));const C0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),W4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},e_=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),K4=(e,t,r)=>be(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e.status||500,i=e;if(typeof i.json=="function")i.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||a+"";t(new jm(e_(s),a,o))}).catch(()=>{const s=a+"",o=i.statusText||`HTTP ${a} error`;t(new jm(o,a,s))});else{const s=a+"",o=i.statusText||`HTTP ${a} error`;t(new jm(o,a,s))}}else t(new z4(e_(e),e))}),H4=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(W4(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function q4(e,t,r,n,a,i){return be(this,void 0,void 0,function*(){return new Promise((s,o)=>{e(r,H4(t,n,a,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>s(c)).catch(c=>K4(c,o,n))})})}function on(e,t,r,n,a){return be(this,void 0,void 0,function*(){return q4(e,"POST",t,n,a,r)})}class V4{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},k0),r),this.fetch=C0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return be(this,void 0,void 0,function*(){try{return{data:(yield on(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}getIndex(t,r){return be(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(sn(n))return{data:null,error:n};throw n}})}listIndexes(t){return be(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return be(this,void 0,void 0,function*(){try{return{data:(yield on(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(sn(n))return{data:null,error:n};throw n}})}}class G4{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},k0),r),this.fetch=C0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return be(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield on(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}getVectors(t){return be(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}listVectors(t){return be(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield on(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}queryVectors(t){return be(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}deleteVectors(t){return be(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield on(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}}class Y4{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},k0),r),this.fetch=C0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return be(this,void 0,void 0,function*(){try{return{data:(yield on(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}getBucket(t){return be(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}listBuckets(){return be(this,arguments,void 0,function*(t={}){try{return{data:yield on(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return be(this,void 0,void 0,function*(){try{return{data:(yield on(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}}class X4 extends Y4{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new J4(this.url,this.headers,t,this.fetch)}}class J4 extends V4{constructor(t,r,n,a){super(t,r,a),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return be(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return be(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return be(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return be(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new Q4(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class Q4 extends G4{constructor(t,r,n,a,i){super(t,r,i),this.vectorBucketName=n,this.indexName=a}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return be(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return be(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return be(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return be(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return be(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Z4 extends B4{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new F4(this.url,this.headers,t,this.fetch)}get vectors(){return new X4(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new U4(this.url+"/iceberg",this.headers,this.fetch)}}const e3="2.83.0";let $l="";typeof Deno<"u"?$l="deno":typeof document<"u"?$l="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$l="react-native":$l="node";const t3={"X-Client-Info":`supabase-js-${$l}/${e3}`},r3={headers:t3},n3={schema:"public"},a3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},i3={},s3=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),o3=()=>Headers,l3=(e,t,r)=>{const n=s3(r),a=o3();return async(i,s)=>{var o;const c=(o=await t())!==null&&o!==void 0?o:e;let u=new a(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},s),{headers:u}))}};function c3(e){return e.endsWith("/")?e:e+"/"}function u3(e,t){var r,n;const{db:a,auth:i,realtime:s,global:o}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),s),storage:{},global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function d3(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(c3(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const mC="2.83.0",Qs=30*1e3,fv=3,Sm=fv*Qs,f3="http://localhost:9999",h3="supabase.auth.token",p3={"X-Client-Info":`gotrue-js/${mC}`},hv="X-Supabase-Api-Version",gC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},m3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,g3=10*60*1e3;class bc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function je(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class v3 extends bc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function y3(e){return je(e)&&e.name==="AuthApiError"}class ns extends bc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class $i extends bc{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class en extends $i{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function x3(e){return je(e)&&e.name==="AuthSessionMissingError"}class Bs extends $i{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ku extends $i{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Hu extends $i{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function b3(e){return je(e)&&e.name==="AuthImplicitGrantRedirectError"}class t_ extends $i{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pv extends $i{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Nm(e){return je(e)&&e.name==="AuthRetryableFetchError"}class r_ extends $i{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class mv extends $i{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const sf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),n_=` 	
\r=`.split(""),w3=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<n_.length;t+=1)e[n_[t].charCodeAt(0)]=-2;for(let t=0;t<sf.length;t+=1)e[sf[t].charCodeAt(0)]=t;return e})();function a_(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(sf[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(sf[n]),t.queuedBits-=6}}function vC(e,t,r){const n=w3[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function i_(e){const t=[],r=s=>{t.push(String.fromCodePoint(s))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=s=>{S3(s,n,r)};for(let s=0;s<e.length;s+=1)vC(e.charCodeAt(s),a,i);return t.join("")}function _3(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function j3(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}_3(n,t)}}function S3(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function _o(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)vC(e.charCodeAt(a),r,n);return new Uint8Array(t)}function N3(e){const t=[];return j3(e,r=>t.push(r)),new Uint8Array(t)}function os(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>a_(a,r,n)),a_(null,r,n),t.join("")}function k3(e){return Math.round(Date.now()/1e3)+e}function C3(){return Symbol("auth-callback")}const fr=()=>typeof window<"u"&&typeof document<"u",Hi={tested:!1,writable:!1},yC=()=>{if(!fr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Hi.tested)return Hi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Hi.tested=!0,Hi.writable=!0}catch{Hi.tested=!0,Hi.writable=!1}return Hi.writable};function E3(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const xC=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),P3=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Zs=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},qi=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},si=async(e,t)=>{await e.removeItem(t)};class Nh{constructor(){this.promise=new Nh.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Nh.promiseConstructor=Promise;function km(e){const t=e.split(".");if(t.length!==3)throw new mv("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!m3.test(t[n]))throw new mv("JWT not in base64url format");return{header:JSON.parse(i_(t[0])),payload:JSON.parse(i_(t[1])),signature:_o(t[2]),raw:{header:t[0],payload:t[1]}}}async function O3(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function A3(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const s=await e(i);if(!t(i,null,s)){n(s);return}}catch(s){if(!t(i,s)){a(s);return}}})()})}function T3(e){return("0"+e.toString(16)).substr(-2)}function D3(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,T3).join("")}async function I3(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function R3(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await I3(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Us(e,t,r=!1){const n=D3();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Zs(e,`${t}-code-verifier`,a);const i=await R3(n);return[i,n===i?"plain":"s256"]}const M3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $3(e){const t=e.headers.get(hv);if(!t||!t.match(M3))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function L3(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function F3(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const B3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function zs(e){if(!B3.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Cm(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function U3(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function s_(e){return JSON.parse(JSON.stringify(e))}const Ji=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),z3=[502,503,504];async function o_(e){var t;if(!P3(e))throw new pv(Ji(e),0);if(z3.includes(e.status))throw new pv(Ji(e),e.status);let r;try{r=await e.json()}catch(i){throw new ns(Ji(i),i)}let n;const a=$3(e);if(a&&a.getTime()>=gC["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new r_(Ji(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new en}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0))throw new r_(Ji(r),e.status,r.weak_password.reasons);throw new v3(Ji(r),e.status||500,n)}const W3=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function De(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[hv]||(i[hv]=gC["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const s=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(s.redirect_to=n.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await K3(e,t,r+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function K3(e,t,r,n,a,i){const s=W3(t,n,a,i);let o;try{o=await e(r,Object.assign({},s))}catch(c){throw console.error(c),new pv(Ji(c),0)}if(o.ok||await o_(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await o_(c)}}function Fn(e){var t;let r=null;V3(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=k3(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function l_(e){const t=Fn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function pi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function H3(e){return{data:e,error:null}}function q3(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,s=Jo(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},s);return{data:{properties:o,user:c},error:null}}function c_(e){return e}function V3(e){return e.access_token&&e.refresh_token&&e.expires_in}const Em=["global","local","others"];class G3{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=xC(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Em[0]){if(Em.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Em.join(", ")}`);try{return await De(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await De(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:pi})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Jo(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await De(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:q3,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(je(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await De(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:pi})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,s,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await De(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:c_});if(d.error)throw d.error;const f=await d.json(),h=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,m=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=y}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(je(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){zs(t);try{return await De(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:pi})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){zs(t);try{return await De(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:pi})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){zs(t);try{return await De(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:pi})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){zs(t.userId);try{const{data:r,error:n}=await De(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(je(r))return{data:null,error:r};throw r}}async _deleteFactor(t){zs(t.userId),zs(t.id);try{return{data:await De(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,s,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await De(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:c_});if(d.error)throw d.error;const f=await d.json(),h=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,m=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=y}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(je(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await De(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(je(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await De(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(je(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await De(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(je(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await De(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await De(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(je(r))return{data:null,error:r};throw r}}}function u_(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ws={debug:!!(globalThis&&yC()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class bC extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Y3 extends bC{}async function X3(e,t,r){Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Y3(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ws.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function J3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function wC(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Q3(e){return parseInt(e,16)}function Z3(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function e$(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:s,notBefore:o,requestId:c,resources:u,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=wC(e.address),g=d?`${d}://${n}`:n,y=e.statement?`${e.statement}
`:"",v=`${g} wants you to sign in with your Ethereum account:
${m}

${y}`;let x=`URI: ${f}
Version: ${h}
Chain ID: ${r}${s?`
Nonce: ${s}`:""}
Issued At: ${i.toISOString()}`;if(a&&(x+=`
Expiration Time: ${a.toISOString()}`),o&&(x+=`
Not Before: ${o.toISOString()}`),c&&(x+=`
Request ID: ${c}`),u){let w=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);w+=`
- ${b}`}x+=w}return`${v}
${x}`}class Lt extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class of extends Lt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function t$({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Lt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Lt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Lt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Lt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Lt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Lt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new Lt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Lt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(_C(s)){if(i.rp.id!==s)return new Lt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Lt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Lt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Lt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Lt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function r$({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Lt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Lt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(_C(n)){if(r.rpId!==n)return new Lt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Lt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Lt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Lt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class n${createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const a$=new n$;function i$(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=Jo(e,["challenge","user","excludeCredentials"]),i=_o(t).buffer,s=Object.assign(Object.assign({},r),{id:_o(r.id).buffer}),o=Object.assign(Object.assign({},a),{challenge:i,user:s});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];o.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:_o(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function s$(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Jo(e,["challenge","allowCredentials"]),a=_o(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let s=0;s<r.length;s++){const o=r[s];i.allowCredentials[s]=Object.assign(Object.assign({},o),{id:_o(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return i}function o$(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:os(new Uint8Array(e.response.attestationObject)),clientDataJSON:os(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function l$(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:os(new Uint8Array(a.authenticatorData)),clientDataJSON:os(new Uint8Array(a.clientDataJSON)),signature:os(new Uint8Array(a.signature)),userHandle:a.userHandle?os(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function _C(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function d_(){var e,t;return!!(fr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function c$(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new of("Browser returned unexpected credential type",t)}:{data:null,error:new of("Empty credential response",t)}}catch(t){return{data:null,error:t$({error:t,options:e})}}}async function u$(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new of("Browser returned unexpected credential type",t)}:{data:null,error:new of("Empty credential response",t)}}catch(t){return{data:null,error:r$({error:t,options:e})}}}const d$={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},f$={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function lf(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const s=a[i];if(s!==void 0)if(Array.isArray(s))n[i]=s;else if(r(s))n[i]=s;else if(t(s)){const o=n[i];t(o)?n[i]=lf(o,s):n[i]=lf(s)}else n[i]=s}return n}function h$(e,t){return lf(d$,e,t||{})}function p$(e,t){return lf(f$,e,t||{})}class m${constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){try{const{data:s,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!s)return{data:null,error:o};const c=a??a$.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=h$(s.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:f}=await c$({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=p$(s.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:f}=await u$(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(s){return je(s)?{data:null,error:s}:{data:null,error:new ns("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new bc("rpId is required for WebAuthn authentication")};try{if(!d_())return{data:null,error:new ns("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!s)return{data:null,error:o};const{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(s){return je(s)?{data:null,error:s}:{data:null,error:new ns("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new bc("rpId is required for WebAuthn registration")};try{if(!d_())return{data:null,error:new ns("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:o};const{data:c,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(s){return je(s)?{data:null,error:s}:{data:null,error:new ns("Unexpected error in register",s)}}}}J3();const g$={url:f3,storageKey:h3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:p3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function f_(e,t,r){return await r()}const Ks={};class wc{get jwks(){var t,r;return(r=(t=Ks[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ks[this.storageKey]=Object.assign(Object.assign({},Ks[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ks[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ks[this.storageKey]=Object.assign(Object.assign({},Ks[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},g$),t);if(this.storageKey=i.storageKey,this.instanceID=(r=wc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,wc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&fr()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new G3({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=xC(i.fetch),this.lock=i.lock||f_,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:fr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=X3:this.lock=f_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new m$(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:yC()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=u_(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=u_(this.memoryStorage)),fr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${mC}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(fr()&&(r=E3(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),fr()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),b3(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:s,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return je(r)?this._returnResult({error:r}):this._returnResult({error:new ns("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Fn}),{data:s,error:o}=i;if(o||!s)return this._returnResult({data:{user:null,session:null},error:o});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(je(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await Us(this.storage,this.storageKey)),i=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:g},xform:Fn})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Fn})}else throw new Ku("You must provide either an email or phone number and a password");const{data:s,error:o}=i;if(o||!s)return this._returnResult({data:{user:null,session:null},error:o});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(je(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:s,options:o}=t;r=await De(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:l_})}else if("phone"in t){const{phone:i,password:s,options:o}=t;r=await De(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:l_})}else throw new Ku("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new Bs;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,s,o,c,u,d,f,h;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:y,wallet:v,statement:x,options:w}=t;let b;if(fr())if(typeof v=="object")b=v;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")b=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=v}const _=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href),j=await b.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=wC(j[0]);let N=(n=w==null?void 0:w.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!N){const C=await b.request({method:"eth_chainId"});N=Q3(C)}const k={domain:_.host,address:S,statement:x,uri:_.href,version:"1",chainId:N,nonce:(a=w==null?void 0:w.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(s=(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(o=w==null?void 0:w.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=w==null?void 0:w.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=w==null?void 0:w.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=w==null?void 0:w.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=e$(k),g=await b.request({method:"personal_sign",params:[Z3(m),S]})}try{const{data:y,error:v}=await De(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:g},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Fn});if(v)throw v;if(!y||!y.session||!y.user){const x=new Bs;return this._returnResult({data:{user:null,session:null},error:x})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:v})}catch(y){if(je(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(t){var r,n,a,i,s,o,c,u,d,f,h,m;let g,y;if("message"in t)g=t.message,y=t.signature;else{const{chain:v,wallet:x,statement:w,options:b}=t;let _;if(fr())if(typeof x=="object")_=x;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=x}const j=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),w?{statement:w}:null));let N;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")N=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)N=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)g=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),y=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=S}}try{const{data:v,error:x}=await De(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:os(y)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Fn});if(x)throw x;if(!v||!v.session||!v.user){const w=new Bs;return this._returnResult({data:{user:null,session:null},error:w})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:x})}catch(v){if(je(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(t){const r=await qi(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:s}=await De(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Fn});if(await si(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!i||!i.session||!i.user){const o=new Bs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:s})}catch(i){if(je(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:s}=t,o=await De(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Fn}),{data:c,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Bs;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,i,s;try{if("email"in t){const{email:o,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Us(this.storage,this.storageKey));const{error:f}=await De(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:o,options:c}=t,{data:u,error:d}=await De(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(s=c==null?void 0:c.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Ku("You must provide either an email or phone number.")}catch(o){if(je(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:o}=await De(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Fn});if(o)throw o;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,u=s.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(je(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,i,s;try{let o=null,c=null;this.flowType==="pkce"&&([o,c]=await Us(this.storage,this.storageKey));const u=await De(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:H3});return!((i=u.data)===null||i===void 0)&&i.url&&fr()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if(je(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new en;const{error:a}=await De(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(je(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:s}=await De(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:s,error:o}=await De(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:o})}throw new Ku("You must provide either an email or phone number and a type")}catch(r){if(je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await qi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Sm:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const s=await qi(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=Cm()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=U3(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await De(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:pi}):await this._useSession(async r=>{var n,a,i;const{data:s,error:o}=r;if(o)throw o;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new en}:await De(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:pi})})}catch(r){if(je(r))return x3(r)&&(await this._removeSession(),await si(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new en;const s=a.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await Us(this.storage,this.storageKey));const{data:u,error:d}=await De(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:s.access_token,xform:pi});if(d)throw d;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(n){if(je(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new en;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:s}=km(t.access_token);if(s.exp&&(n=s.exp,a=n<=r),a){const{data:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(je(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:s,error:o}=r;if(o)throw o;t=(n=s.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new en;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!fr())throw new Hu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Hu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new t_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new t_("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:s,expires_in:o,expires_at:c,token_type:u}=t;if(!i||!o||!s||!u)throw new Hu("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let h=d+f;c&&(h=parseInt(c));const m=h-d;m*1e3<=Qs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const g=h-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:y,error:v}=await this._getUser(i);if(v)throw v;const x={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:s,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:t.type},error:null})}catch(n){if(je(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await qi(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const s=(n=a.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:o}=await this.admin.signOut(s,t);if(o&&!(y3(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await si(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=C3(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Us(this.storage,this.storageKey,!0));try{return await De(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(je(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var s,o,c,u,d;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await De(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return fr()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(je(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:s,provider:o,token:c,access_token:u,nonce:d}=t,f=await De(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Fn}),{data:h,error:m}=f;return m?this._returnResult({data:{user:null,session:null},error:m}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new Bs}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:m}))}catch(a){if(je(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)throw s;return await De(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await A3(async a=>(a>0&&await O3(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await De(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Fn})),(a,i)=>{const s=200*Math.pow(2,a);return i&&Nm(i)&&Date.now()+s-n<Qs})}catch(n){if(this._debug(r,"error",n),je(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),fr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await qi(this.storage,this.storageKey);if(a&&this.userStorage){let s=await qi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:a.user},await Zs(this.userStorage,this.storageKey+"-user",s)),a.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:Cm()}else if(a&&!a.user&&!a.user){const s=await qi(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(a.user=s.user,await si(this.storage,this.storageKey+"-user"),await Zs(this.storage,this.storageKey,a)):a.user=Cm()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Sm;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Sm}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:s}=await this._callRefreshToken(a.refresh_token);s&&(console.error(s),Nm(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:o}=await this._getUser(a.access_token);!o&&(s!=null&&s.user)?(a.user=s.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new en;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Nh;const{data:i,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!i.session)throw new en;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={data:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),je(i)){const s={data:null,error:i};return Nm(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],s=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(s),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Zs(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=s_(a);await Zs(this.storage,this.storageKey,i)}else{const a=s_(r);await Zs(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await si(this.storage,this.storageKey),await si(this.storage,this.storageKey+"-code-verifier"),await si(this.storage,this.storageKey+"-user"),this.userStorage&&await si(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&fr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Qs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Qs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Qs}ms, refresh threshold is ${fv} ticks`),a<=fv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof bC)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!fr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,s]=await Us(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(s)}`});a.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await De(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await De(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?o$(t.webauthn.credential_response):l$(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:c}=await De(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const s=await De(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(s.error)return s;const{data:o}=s;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:i$(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:s$(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=km(n.access_token);let s=null;i.aal&&(s=i.aal);let o=s;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const u=i.amr||[];return{data:{currentLevel:s,nextLevel:o,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await De(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new en})})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new en});const s=await De(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&fr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(je(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new en});const s=await De(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&fr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(je(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await De(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new en})})}catch(t){if(je(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await De(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new en})})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+g3>a)return n;const{data:i,error:s}=await De(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:g}=await this.getSession();if(g||!m.session)return this._returnResult({data:null,error:g});n=m.session.access_token}const{header:a,payload:i,signature:s,raw:{header:o,payload:c}}=km(n);r!=null&&r.allowExpired||L3(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:a,signature:s},error:null}}const d=F3(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,s,N3(`${o}.${c}`)))throw new mv("Invalid JWT signature");return{data:{claims:i,header:a,signature:s},error:null}}catch(n){if(je(n))return this._returnResult({data:null,error:n});throw n}}}wc.nextInstanceID={};const v$=wc;class y$ extends v${constructor(t){super(t)}}class x${constructor(t,r,n){var a,i,s;this.supabaseUrl=t,this.supabaseKey=r;const o=d3(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:n3,realtime:i3,auth:Object.assign(Object.assign({},a3),{storageKey:c}),global:r3},d=u3(n??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=d.auth)!==null&&s!==void 0?s:{},this.headers,d.global.fetch),this.fetch=l3(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new f4(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Z4(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new c4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:s,flowType:o,lock:c,debug:u,throwOnError:d},f,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new y$({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),f),storageKey:s,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:o,lock:c,debug:u,throwOnError:d,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new P4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const b$=(e,t,r)=>new x$(e,t,r);function w$(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}w$()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const jC="https://gomwhbewjdcllejifdyf.supabase.co",SC="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdvbXdoYmV3amRjbGxlamlmZHlmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM1MTUzNjYsImV4cCI6MjA3OTA5MTM2Nn0.fvIW61htbjtfkT5ZP4FGBTw96KSGZbr9qxSJiMDp-qQ",Pm=[!jC,!SC].filter(Boolean);if(Pm.length>0){const e=`Missing Supabase environment variable${Pm.length>1?"s":""}: ${Pm.join(", ")}. Copy .env.example to .env and provide your Supabase project credentials.`;throw new Error(e)}const G=b$(jC,SC);async function h_(e){const{data:t}=await G.from("user_settings").select("global_role, workspace_id").eq("user_id",e).maybeSingle(),{data:r}=await G.from("user_teams").select("team_id, role").eq("user_id",e).maybeSingle();return t?{userId:e,globalRole:t.global_role,teamId:(r==null?void 0:r.team_id)||null,teamRole:(r==null?void 0:r.role)||null,workspaceId:t.workspace_id||null,isActive:t.is_active??!0}:null}async function Cn(e){const{data:t,error:r}=await G.rpc("get_accessible_agents");if(!r&&t){const n=t.map(a=>a.user_id);if(n.length)return n}if(e.globalRole==="admin"||e.globalRole==="sales_manager"){const{data:n}=await G.from("user_settings").select("user_id"),a=n==null?void 0:n.map(i=>i.user_id).filter(Boolean);if(a&&a.length)return a}return[e.userId]}function NC(e){return(e==null?void 0:e.globalRole)==="admin"}function _$(e){return(e==null?void 0:e.teamRole)==="team_lead"||(e==null?void 0:e.globalRole)==="team_lead"}function j$(e){return(e==null?void 0:e.globalRole)==="sales_manager"||(e==null?void 0:e.globalRole)==="admin"}function p_(e){return!!e&&e.globalRole==="admin"}function Oi(e){if(!e)return"";switch(e){case"admin":return"Admin";case"sales_manager":return"Sales Manager";case"team_lead":return"Team Lead";case"agent":return"Agent";default:return""}}function kC(e){return e?["admin","sales_manager","team_lead"].includes(e.globalRole):!1}function S$(e){return(e==null?void 0:e.globalRole)==="admin"}function CC(e){return(e==null?void 0:e.globalRole)==="admin"}const EC=p.createContext(void 0);function N$({children:e}){const[t,r]=p.useState(null),[n,a]=p.useState(null),[i,s]=p.useState(!0);p.useEffect(()=>{G.auth.getSession().then(async({data:{session:f}})=>{if(r((f==null?void 0:f.user)??null),f!=null&&f.user){const h=await h_(f.user.id);a(h)}s(!1)});const{data:{subscription:d}}=G.auth.onAuthStateChange((f,h)=>{(async()=>{if(r((h==null?void 0:h.user)??null),h!=null&&h.user){const m=await h_(h.user.id);a(m)}else a(null)})()});return()=>d.unsubscribe()},[]);const o=async(d,f,h,m)=>{if(!m)return{error:{message:"An invite code is required to create an account"}};const{data:g,error:y}=await G.auth.signUp({email:d,password:f,options:{data:{name:h}}});if(y||!g.user)return{error:y};const{error:v}=await G.rpc("accept_workspace_invite",{invite_token:m});return v?{error:{message:v.message}}:{error:null}},c=async(d,f)=>{const{error:h}=await G.auth.signInWithPassword({email:d,password:f});return{error:h}},u=async()=>{await G.auth.signOut()};return l.jsx(EC.Provider,{value:{user:t,roleInfo:n,loading:i,signUp:o,signIn:c,signOut:u},children:e})}function At(){const e=p.useContext(EC);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var k$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ye=(e,t)=>{const r=p.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:o="",children:c,...u},d)=>p.createElement("svg",{ref:d,...k$,width:a,height:a,stroke:n,strokeWidth:s?Number(i)*24/Number(a):i,className:["lucide",`lucide-${C$(e)}`,o].join(" "),...u},[...t.map(([f,h])=>p.createElement(f,h)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E$=ye("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=ye("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=ye("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=ye("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$=ye("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=ye("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A$=ye("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=ye("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$=ye("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=ye("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=ye("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$=ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=ye("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I$=ye("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=ye("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=ye("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=ye("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=ye("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=ye("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $$=ye("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L$=ye("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=ye("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B$=ye("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=ye("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=ye("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U$=ye("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z$=ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$=ye("MailPlus",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M16 19h6",key:"xwg31i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K$=ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=ye("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H$=ye("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q$=ye("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=ye("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=ye("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V$=ye("PlugZap",[["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m18 3-4 4h6l-4 4",key:"16psg9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$=ye("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$=ye("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$=ye("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=ye("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J$=ye("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=ye("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=ye("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=ye("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=ye("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$=ye("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z$=ye("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=ye("Trello",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["rect",{width:"3",height:"9",x:"7",y:"7",key:"14n3xi"}],["rect",{width:"3",height:"5",x:"14",y:"7",key:"s4azjd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=ye("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=ye("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function rL(){const{user:e,roleInfo:t}=At(),r=Xo(),[n,a]=p.useState(!1),[i,s]=p.useState(""),[o,c]=p.useState([]),[u,d]=p.useState(!1),[f,h]=p.useState(!1),m=p.useRef(null),[g,y]=p.useState([]),[v,x]=p.useState(!1),[w,b]=p.useState(!1),[_,j]=p.useState({}),[S,N]=p.useState([]),[k,C]=p.useState(new Date(0)),[E,P]=p.useState(new Date(0)),[A,H]=p.useState([]),J=p.useCallback(async()=>{let O=G.from("activity_events").select("id, event_type, actor_id, target_user_id, deal_id, task_id, payload, created_at").order("created_at",{ascending:!1}).limit(10);if(S.length>0){const M=S.join(",");O=O.or(`target_user_id.in.(${M}),actor_id.in.(${M})`)}const{data:V,error:te}=await O;if(!te&&V){const M=V.map(X=>({id:X.id,eventType:X.event_type,actorId:X.actor_id,targetUserId:X.target_user_id,dealId:X.deal_id,taskId:X.task_id,payload:X.payload||{},timestamp:new Date(X.created_at)})).filter(X=>X.timestamp.getTime()>E.getTime());y(M),M.some(X=>X.timestamp.getTime()>k.getTime())&&b(!0)}},[S,k,E]);p.useEffect(()=>{(async()=>{if(!t)return;const V=await Cn(t);H(V.length?V:e?[e.id]:[])})()},[t,e]),p.useEffect(()=>{const O=V=>{m.current&&!m.current.contains(V.target)&&d(!1),V.target.closest("#notification-popover")||x(!1)};return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[]),p.useEffect(()=>{const V=setTimeout(async()=>{if(!i.trim()||i.length<2){c([]),d(!1);return}h(!0),d(!0);try{let te=G.from("deals").select("id, client_name, property_address, client_email, client_phone, status, expected_sale_price, user_id").or(`client_name.ilike.%${i}%,property_address.ilike.%${i}%,client_email.ilike.%${i}%,client_phone.ilike.%${i}%`).limit(8);A.length===1?te=te.eq("user_id",A[0]):A.length>1?te=te.in("user_id",A):e!=null&&e.id&&(te=te.eq("user_id",e.id));const{data:M,error:X}=await te;if(X)throw X;c(M||[])}catch(te){console.error("Search error:",te),c([])}finally{h(!1)}},300);return()=>clearTimeout(V)},[i,e==null?void 0:e.id,A]),p.useEffect(()=>{(async()=>{try{const{data:V,error:te}=await G.rpc("get_accessible_agents");if(!te&&V){const M={};V.forEach(X=>{M[X.user_id]=X.display_name||X.email||"Agent"}),j(M)}}catch(V){console.error("Error loading agents for notifications",V)}})()},[]),p.useEffect(()=>{if(!t||t.globalRole!=="sales_manager"&&t.globalRole!=="team_lead"&&t.globalRole!=="admin")return;let O=null;return(async()=>{const te=await Cn(t);N(te),await J(),O=G.channel("activity-events"),O.on("postgres_changes",{event:"*",schema:"public",table:"activity_events"},M=>{const X=M.new;X&&(te.length&&!te.includes(X.target_user_id)&&!te.includes(X.actor_id)||new Date(X.created_at).getTime()<=E.getTime()||(y(T=>[{id:X.id,eventType:X.event_type,actorId:X.actor_id,targetUserId:X.target_user_id,dealId:X.deal_id,taskId:X.task_id,payload:X.payload||{},timestamp:new Date(X.created_at)},...T].slice(0,10)),b(!0)))}).subscribe()})(),()=>{O&&G.removeChannel(O)}},[t,J]);const ee=O=>{s(""),d(!1),r(`/pipeline?dealId=${O}`)},B=()=>{s(""),c([]),d(!1)},K=async()=>{await G.auth.signOut(),r("/login")},D=()=>{r("/pipeline?newDeal=true")},R=Oi(t==null?void 0:t.globalRole),F=Date.now(),le=g.some(O=>F-O.timestamp.getTime()<=60*60*1e3&&O.timestamp.getTime()>k.getTime());p.useEffect(()=>{g.some(O=>O.timestamp.getTime()>k.getTime())&&b(!0)},[g,k]),p.useEffect(()=>{if(!t||t.globalRole!=="sales_manager"&&t.globalRole!=="team_lead"&&t.globalRole!=="admin")return;const O=setInterval(()=>{J()},45e3);return()=>clearInterval(O)},[t,J]);const re=O=>O?O==="dead"?"Archived":O==="closed"?"Closed Won":O.replace(/_/g," "):"",Ne=O=>{var te,M,X,T,z,Z,$,pe,ce,Me;const V=_[O.actorId]||"An agent";switch(O.eventType){case"deal_status_change":{const Ie=((M=(te=O.payload)==null?void 0:te.from_status)==null?void 0:M.replace(/_/g," "))||"previous stage",Je=((T=(X=O.payload)==null?void 0:X.to_status)==null?void 0:T.replace(/_/g," "))||"new stage",Ke=((z=O.payload)==null?void 0:z.client_name)||"a client",lr=((Z=O.payload)==null?void 0:Z.property_address)||"deal";return`${V} moved the ${Ke}  ${lr} deal from ${Ie} to ${Je}.`}case"deal_deleted":{const Ie=(($=O.payload)==null?void 0:$.client_name)||"a client",Je=((pe=O.payload)==null?void 0:pe.property_address)||"deal";return`${V} deleted the ${Ie}  ${Je} deal.`}case"task_created":{const Ie=((ce=O.payload)==null?void 0:ce.title)||"a task",Je=(Me=O.payload)!=null&&Me.due_date?` with a due date of ${new Date(O.payload.due_date).toLocaleDateString()}`:"";return`${V} created a new task "${Ie}"${Je}.`}default:return`${V} made an update.`}};return l.jsx("header",{className:"sticky top-0 z-50 border-b border-white/30 bg-white/75 backdrop-blur-2xl shadow-[0_12px_30px_rgba(15,23,42,0.08)]",children:l.jsxs("div",{className:"mx-auto flex h-16 w-full items-center gap-4 px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:()=>r("/"),className:"flex items-center gap-2 rounded-2xl border border-white/40 bg-white/80 px-3 py-2 text-sm font-semibold text-gray-900 shadow-[0_2px_8px_rgba(15,23,42,0.08)]",children:l.jsx("img",{src:"/PipelineIQ.png",alt:"PipelineIQ",className:"h-8 w-auto"})}),l.jsx("div",{className:"hidden lg:flex w-96",ref:m,children:l.jsxs("div",{className:"relative w-full",children:[l.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-3 flex items-center",children:l.jsx(P0,{className:"h-4 w-4 text-gray-400"})}),l.jsx("input",{type:"text",value:i,onChange:O=>s(O.target.value),placeholder:"Search deals, people, addresses...",className:"w-full rounded-2xl border border-white/60 bg-white/90 py-2 pl-10 pr-10 text-sm text-gray-900 shadow-inner focus:border-[var(--app-accent)]/40 focus:ring-2 focus:ring-[var(--app-accent)]/15"}),i&&l.jsx("button",{onClick:B,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l.jsx(Ss,{className:"h-4 w-4"})}),u&&l.jsx("div",{className:"absolute top-full left-0 right-0 z-50 mt-3 rounded-2xl border border-white/70 bg-white/95 shadow-[0_15px_40px_rgba(15,23,42,0.16)]",children:f?l.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"Searching"}):o.length>0?o.map(O=>l.jsxs("button",{onClick:()=>ee(O.id),className:"flex w-full items-start justify-between px-4 py-3 text-left hover:bg-gray-50",children:[l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("p",{className:"truncate text-sm font-medium text-gray-900",children:O.client_name}),l.jsx("p",{className:"truncate text-xs text-gray-500",children:O.property_address}),(O.client_email||O.client_phone)&&l.jsx("p",{className:"truncate text-xs text-gray-400",children:O.client_email||O.client_phone})]}),l.jsxs("div",{className:"ml-3 flex flex-col items-end gap-1",children:[l.jsx("span",{className:"rounded-full bg-blue-50 px-2 py-0.5 text-xs font-medium text-blue-700",children:re(O.status)}),l.jsxs("span",{className:"text-xs text-gray-500",children:["$",O.expected_sale_price.toLocaleString()]})]})]},O.id)):l.jsxs("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:["No deals found matching ",i,"."]})})]})})]}),l.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[l.jsxs("button",{onClick:D,className:"hidden sm:inline-flex items-center gap-2 rounded-2xl border border-white/40 bg-white/80 px-3 py-2 text-sm font-medium text-gray-700 shadow-[0_2px_8px_rgba(15,23,42,0.08)] transition hover:border-[var(--app-accent)]/40 hover:text-[var(--app-accent)]",children:[l.jsx(Ba,{className:"h-4 w-4"}),"New deal"]}),((t==null?void 0:t.globalRole)==="sales_manager"||(t==null?void 0:t.globalRole)==="team_lead"||(t==null?void 0:t.globalRole)==="admin")&&l.jsxs("div",{className:"relative",id:"notification-popover",children:[l.jsxs("button",{onClick:()=>{v||J(),x(O=>!O),b(!1),C(new Date)},className:"relative inline-flex items-center gap-2 rounded-2xl border border-white/50 bg-white/80 px-2.5 py-1.5 shadow-[0_2px_8px_rgba(15,23,42,0.08)] transition hover:border-[var(--app-accent)]/30",children:[l.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-gray-100 text-gray-700",children:l.jsx(AC,{className:"h-4 w-4"})}),l.jsxs("div",{className:"hidden text-left sm:block",children:[l.jsx("p",{className:"text-xs font-semibold text-gray-900",children:"Notifications"}),l.jsx("p",{className:"text-[11px] text-gray-500",children:"Team activity"})]}),w&&l.jsx("span",{className:"absolute -right-0.5 -top-0.5 h-2.5 w-2.5 rounded-full bg-[rgb(0,122,255)] shadow-[0_0_0_4px_rgba(0,122,255,0.14)]"}),!w&&le&&l.jsx("span",{className:"absolute -right-0.5 -top-0.5 h-2.5 w-2.5 rounded-full bg-gray-300 shadow-[0_0_0_4px_rgba(148,163,184,0.25)]"})]}),v&&l.jsxs("div",{className:"absolute right-0 mt-3 w-96 max-w-[90vw] rounded-2xl border border-white/70 bg-white/95 p-3 shadow-[0_20px_60px_rgba(15,23,42,0.16)]",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Recent activity"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Latest 10 actions"})]}),l.jsx("button",{onClick:()=>{const O=new Date;y([]),b(!1),C(O),P(O)},className:"text-[11px] font-semibold text-[var(--app-accent)] hover:underline",children:"Clear"})]}),l.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2",children:g.length===0?l.jsx("div",{className:"rounded-xl border border-dashed border-gray-200 bg-gray-50/80 px-3 py-2 text-sm text-gray-500",children:"Nothing yet  team updates will appear here."}):g.map(O=>l.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white/90 px-3 py-2 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-900",children:Ne(O)}),l.jsxs("div",{className:"mt-1 flex items-center gap-1 text-[11px] text-gray-500",children:[l.jsx(hs,{className:"h-3.5 w-3.5"}),l.jsx("span",{children:O.timestamp.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})})]})]},O.id))})]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>a(O=>!O),className:"flex items-center gap-2 rounded-2xl border border-white/50 bg-white/80 px-2.5 py-1.5 shadow-[0_2px_8px_rgba(15,23,42,0.08)] transition hover:border-[var(--app-accent)]/30",children:[l.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-[var(--app-accent)] text-white",children:l.jsx(jc,{className:"h-4 w-4"})}),l.jsxs("div",{className:"hidden text-left sm:block",children:[l.jsx("p",{className:"text-xs font-semibold text-gray-900",children:e==null?void 0:e.email}),l.jsx("p",{className:"text-[11px] text-gray-500",children:R})]})]}),n&&l.jsxs("div",{className:"absolute right-0 mt-3 w-64 rounded-2xl border border-white/70 bg-white/95 shadow-[0_25px_60px_rgba(15,23,42,0.16)]",children:[l.jsxs("div",{className:"border-b border-gray-100 px-4 py-3 space-y-1",children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e==null?void 0:e.email}),l.jsxs("p",{className:"text-xs font-medium text-gray-500 flex items-center gap-2",children:[l.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-[10px] uppercase tracking-wide text-gray-600",children:R}),"Signed in"]})]}),l.jsxs("button",{onClick:()=>{a(!1),r("/settings")},className:"flex w-full items-center gap-3 px-4 py-2 text-sm text-gray-700 transition hover:bg-gray-50",children:[l.jsx(Ch,{className:"h-4 w-4"}),l.jsx("span",{children:"Personal Settings"})]}),l.jsxs("button",{onClick:K,className:"flex w-full items-center gap-3 px-4 py-2 text-sm text-red-600 transition hover:bg-red-50",children:[l.jsx(z$,{className:"h-4 w-4"}),l.jsx("span",{children:"Sign out"})]})]})]})]})]})})}const nL=[{icon:L$,label:"Dashboard",path:"/"},{icon:eL,label:"Pipeline",path:"/pipeline"},{icon:gv,label:"Tasks",path:"/tasks"},{icon:A$,label:"Analytics",path:"/analytics"}],aL=[{icon:js,label:"Luma AI",path:"/luma"}],iL=[{icon:Ch,label:"Settings",path:"/workspace-settings"}];function sL({isCollapsed:e,onToggle:t}){const r=xa(),n=Xo(),a=(i,s)=>l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:`flex items-center gap-3 px-2 ${e?"justify-center":"justify-start"}`,children:[l.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-[var(--app-accent)]","aria-hidden":!0}),!e&&l.jsx("span",{className:"text-[12px] font-semibold uppercase tracking-[0.28em] text-gray-500",children:i})]}),l.jsx("div",{className:"space-y-1",children:s.map(o=>{const c=o.icon,u=r.pathname===o.path,d=e?"justify-center px-2":"gap-3 px-4 text-left";return l.jsxs("button",{onClick:()=>n(o.path),"aria-label":o.label,title:o.label,className:`group flex w-full items-center rounded-2xl border border-transparent py-3 text-[15px] font-semibold transition-all duration-200 ${d} ${u?"bg-[rgba(10,132,255,0.12)] text-[var(--app-accent)] shadow-[inset_0_0_0_1px_rgba(10,132,255,0.2)] border-[rgba(10,132,255,0.2)]":"text-gray-600 hover:-translate-y-[1px] hover:border-[rgba(10,132,255,0.25)] hover:bg-[rgba(10,132,255,0.06)] hover:text-[var(--app-accent)] hover:shadow-[0_12px_30px_rgba(15,23,42,0.08)]"} focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[rgba(10,132,255,0.35)]`,children:[l.jsx("span",{className:`flex h-10 w-10 items-center justify-center rounded-2xl border ${u?"border-[rgba(10,132,255,0.3)] bg-white/80 text-[var(--app-accent)]":"border-white/60 bg-white/90 text-gray-700 group-hover:border-[rgba(10,132,255,0.25)] group-hover:bg-white group-hover:text-[var(--app-accent)]"}`,children:l.jsx(c,{className:"h-[18px] w-[18px]",strokeWidth:2})}),!e&&l.jsx("span",{className:"whitespace-nowrap",children:o.label})]},o.path)})})]});return l.jsx("nav",{className:`sticky top-24 rounded-[var(--app-radius)] border border-[var(--app-border)] bg-white/80 shadow-[0_15px_40px_rgba(15,23,42,0.12)] transition-all duration-300 ${e?"p-3":"p-4"}`,children:l.jsxs("div",{className:"space-y-6",children:[a("Primary",nL),a("Intelligence",aL),l.jsx("div",{className:`pt-4 ${e?"":"border-t border-[var(--app-border)]"}`,children:a("Workspace",iL)}),l.jsx("div",{className:`pt-4 ${e?"":"border-t border-[var(--app-border)]"}`,children:l.jsxs("button",{type:"button",onClick:t,"aria-pressed":!e,"aria-expanded":!e,"aria-label":e?"Expand sidebar":"Collapse sidebar",className:`group flex w-full items-center rounded-2xl py-3 text-[15px] font-semibold transition ${e?"justify-center px-2":"gap-3 px-4 text-left"} text-gray-700 hover:bg-white/70 hover:text-[var(--app-accent)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[var(--app-accent)]`,children:[l.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-2xl border border-white/70 bg-white/95 shadow-[inset_0_0_0_1px_rgba(255,255,255,0.5)] transition-colors group-hover:border-[rgba(10,132,255,0.3)] group-hover:text-[var(--app-accent)]",children:e?l.jsx(cf,{className:"h-5 w-5 transition group-hover:text-[var(--app-accent)]"}):l.jsx(D$,{className:"h-5 w-5 transition group-hover:text-[var(--app-accent)]"})}),!e&&l.jsx("span",{className:"whitespace-nowrap",children:"Hide"})]})})]})})}function oL({children:e}){const[t,r]=p.useState(!1);return l.jsxs("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_var(--app-bg-start),_var(--app-bg-mid)_45%,_var(--app-bg-end))] text-[var(--app-text-primary)] overflow-x-hidden",children:[l.jsx(rL,{}),l.jsxs("div",{className:"relative mx-auto flex w-full flex-col gap-6 px-4 pb-10 pt-6 lg:flex-row lg:px-8",children:[l.jsx("div",{className:`transition-[width] duration-300 ease-in-out w-full lg:flex-shrink-0 ${t?"lg:w-20":"lg:w-64"}`,children:l.jsx(sL,{isCollapsed:t,onToggle:()=>r(n=>!n)})}),l.jsx("main",{className:"flex-1 overflow-x-hidden transition-[margin] duration-300 ease-in-out",children:l.jsx("div",{className:"min-h-[calc(100vh-10rem)] rounded-[var(--app-radius)] border border-[var(--app-border)] bg-white/85 p-4 shadow-[0_10px_50px_rgba(15,23,42,0.08)] sm:p-6 lg:p-8",children:e})})]})]})}function lL({onToggle:e}){const[t,r]=p.useState(""),[n,a]=p.useState(""),[i,s]=p.useState(!1),[o,c]=p.useState(""),u=async d=>{d.preventDefault(),s(!0),c("");const{error:f}=await G.auth.signInWithPassword({email:t,password:n});f&&c(f.message),s(!1)};return l.jsxs("div",{className:"min-h-screen bg-[rgb(var(--color-app-bg))] flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[l.jsx("div",{className:"flex justify-center mb-8",children:l.jsx("img",{src:"/PipelineIQ.png",alt:"PipelineIQ",className:"h-16"})}),l.jsx("h2",{className:"text-center text-2xl font-semibold text-gray-900 mb-2",children:"Sign in to PipelineIQ"}),l.jsx("p",{className:"text-center hig-text-caption",children:"Welcome back! Please sign in to continue."})]}),l.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:l.jsxs("div",{className:"hig-card p-8",children:[l.jsxs("form",{onSubmit:u,className:"space-y-5",children:[o&&l.jsx("div",{className:"bg-red-50 border border-red-200/60 text-red-700 px-4 py-3 rounded-xl text-sm",children:o}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"hig-label",children:"Email address"}),l.jsx("input",{id:"email",type:"email",required:!0,value:t,onChange:d=>r(d.target.value),className:"hig-input",placeholder:"you@example.com"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"hig-label",children:"Password"}),l.jsx("input",{id:"password",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"hig-input",placeholder:"Enter your password"})]}),l.jsx("button",{type:"submit",disabled:i,className:"hig-btn-primary w-full",children:i?"Signing in...":"Sign in"})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-200/60"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-2 bg-white text-gray-500",children:"New to PipelineIQ?"})})]}),l.jsx("div",{className:"mt-6",children:l.jsx("button",{onClick:e,className:"hig-btn-secondary w-full",children:"Create an account"})})]})]})})]})}function KC({onToggle:e,presetToken:t}){const{signUp:r}=At(),[n]=y2(),[a,i]=p.useState(""),[s,o]=p.useState(t||n.get("invite")||""),[c,u]=p.useState(null),[d,f]=p.useState(""),[h,m]=p.useState(""),[g,y]=p.useState(""),[v,x]=p.useState(""),[w,b]=p.useState(!1),[_,j]=p.useState(!1);p.useEffect(()=>{t&&t!==s&&o(t)},[t]);const S=c&&!_&&!w,N=async E=>{if(!E){u(null),f(""),m("");return}j(!0),f(""),u(null),x("");const{data:P,error:A}=await G.rpc("get_invite_preview",{invite_token:E});if(A){f("Unable to validate invite. Please check the code or contact your admin."),j(!1);return}const H=Array.isArray(P)?P[0]:P;if(!H){f("No invitation found for this code."),j(!1);return}if(H.status!=="pending"){f("This invitation has already been used or canceled."),j(!1);return}if(new Date(H.expires_at).getTime()<Date.now()){f("This invitation has expired. Please ask your admin to resend."),j(!1);return}u(H),m(H.email),f(""),j(!1)};p.useEffect(()=>{const E=setTimeout(()=>{s&&s.length>=6?N(s.trim()):(u(null),m(""))},300);return()=>clearTimeout(E)},[s]);const k=async E=>{if(E.preventDefault(),x(""),b(!0),!c||!s){x("A valid invite code is required to join the workspace."),b(!1);return}if(g.length<6){x("Password must be at least 6 characters"),b(!1);return}const{error:P}=await r(h,g,a,s.trim());P&&x(P.message),b(!1)},C=p.useMemo(()=>c?c.workspace_name||"Workspace":"",[c]);return l.jsxs("div",{className:"min-h-screen bg-[rgb(var(--color-app-bg))] flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[l.jsx("div",{className:"flex justify-center mb-8",children:l.jsx("img",{src:"/PipelineIQ.png",alt:"PipelineIQ",className:"h-16"})}),l.jsx("h2",{className:"text-center text-2xl font-semibold text-gray-900 mb-2",children:"Accept your invitation"}),l.jsx("p",{className:"text-center hig-text-caption",children:"PipelineIQ access is invite-only. Paste the invite code from your email to continue."})]}),l.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:l.jsxs("div",{className:"hig-card p-8",children:[l.jsxs("form",{onSubmit:k,className:"space-y-5",children:[v&&l.jsx("div",{className:"bg-red-50 border border-red-200/60 text-red-700 px-4 py-3 rounded-xl text-sm",children:v}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"invite",className:"hig-label flex items-center justify-between",children:["Invitation code",t&&l.jsx("span",{className:"text-[11px] text-gray-500",children:"Autofilled from your link"})]}),l.jsx("input",{id:"invite",type:"text",required:!0,value:s,onChange:E=>o(E.target.value),className:"hig-input uppercase tracking-[0.3em]",placeholder:"Paste your invite code"}),d&&l.jsx("p",{className:"text-xs text-red-600 mt-1",children:d})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Email"}),l.jsx("input",{type:"email",value:h,readOnly:!0,className:"hig-input bg-gray-50 text-gray-600",placeholder:"Invite required"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Role"}),l.jsx("input",{type:"text",value:c?Oi(c.intended_role):"",readOnly:!0,className:"hig-input bg-gray-50 text-gray-600",placeholder:"Invite required"})]})]}),c&&l.jsxs("div",{className:"rounded-2xl border border-gray-200/70 bg-gray-50/70 px-4 py-3 text-sm text-gray-600",children:["Joining ",l.jsx("span",{className:"font-semibold text-gray-900",children:C})," as"," ",l.jsx("span",{className:"font-semibold text-gray-900",children:Oi(c.intended_role)})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"hig-label",children:"Full name"}),l.jsx("input",{id:"name",type:"text",required:!0,value:a,onChange:E=>i(E.target.value),className:"hig-input",placeholder:"John Doe",disabled:!c})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"hig-label",children:"Password"}),l.jsx("input",{id:"password",type:"password",required:!0,value:g,onChange:E=>y(E.target.value),className:"hig-input",placeholder:"At least 6 characters",disabled:!c})]}),l.jsx("button",{type:"submit",disabled:!S,className:"hig-btn-primary w-full",children:w?"Creating account...":"Join workspace"})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-200/60"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Already have an account?"})})]}),l.jsxs("div",{className:"mt-6",children:[l.jsx("button",{onClick:e,className:"hig-btn-secondary w-full",children:"Back to sign in"}),l.jsx("p",{className:"mt-3 text-center text-xs text-gray-500",children:"Dont have an invite? Contact an admin in your workspace."})]})]})]})})]})}function cL(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return p.useMemo(()=>n=>{t.forEach(a=>a(n))},t)}const Eh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function el(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function O0(e){return"nodeType"in e}function Rr(e){var t,r;return e?el(e)?e:O0(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function A0(e){const{Document:t}=Rr(e);return e instanceof t}function Gc(e){return el(e)?!1:e instanceof Rr(e).HTMLElement}function HC(e){return e instanceof Rr(e).SVGElement}function tl(e){return e?el(e)?e.document:O0(e)?A0(e)?e:Gc(e)||HC(e)?e.ownerDocument:document:document:document}const Yn=Eh?p.useLayoutEffect:p.useEffect;function Ph(e){const t=p.useRef(e);return Yn(()=>{t.current=e}),p.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t.current==null?void 0:t.current(...n)},[])}function uL(){const e=p.useRef(null),t=p.useCallback((n,a)=>{e.current=setInterval(n,a)},[]),r=p.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function Sc(e,t){t===void 0&&(t=[e]);const r=p.useRef(e);return Yn(()=>{r.current!==e&&(r.current=e)},t),r}function Yc(e,t){const r=p.useRef();return p.useMemo(()=>{const n=e(r.current);return r.current=n,n},[...t])}function uf(e){const t=Ph(e),r=p.useRef(null),n=p.useCallback(a=>{a!==r.current&&(t==null||t(a,r.current)),r.current=a},[]);return[r,n]}function df(e){const t=p.useRef();return p.useEffect(()=>{t.current=e},[e]),t.current}let Am={};function Xc(e,t){return p.useMemo(()=>{if(t)return t;const r=Am[e]==null?0:Am[e]+1;return Am[e]=r,e+"-"+r},[e,t])}function qC(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((i,s)=>{const o=Object.entries(s);for(const[c,u]of o){const d=i[c];d!=null&&(i[c]=d+e*u)}return i},{...t})}}const So=qC(1),ff=qC(-1);function dL(e){return"clientX"in e&&"clientY"in e}function Oh(e){if(!e)return!1;const{KeyboardEvent:t}=Rr(e.target);return t&&e instanceof t}function fL(e){if(!e)return!1;const{TouchEvent:t}=Rr(e.target);return t&&e instanceof t}function hf(e){if(fL(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return dL(e)?{x:e.clientX,y:e.clientY}:null}const Xn=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Xn.Translate.toString(e),Xn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),v_="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function hL(e){return e.matches(v_)?e:e.querySelector(v_)}const pL={display:"none"};function mL(e){let{id:t,value:r}=e;return ft.createElement("div",{id:t,style:pL},r)}function gL(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ft.createElement("div",{id:t,style:a,role:"status","aria-live":n,"aria-atomic":!0},r)}function vL(){const[e,t]=p.useState("");return{announce:p.useCallback(n=>{n!=null&&t(n)},[]),announcement:e}}const VC=p.createContext(null);function yL(e){const t=p.useContext(VC);p.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function xL(){const[e]=p.useState(()=>new Set),t=p.useCallback(n=>(e.add(n),()=>e.delete(n)),[e]);return[p.useCallback(n=>{let{type:a,event:i}=n;e.forEach(s=>{var o;return(o=s[a])==null?void 0:o.call(s,i)})},[e]),t]}const bL={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},wL={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function _L(e){let{announcements:t=wL,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=bL}=e;const{announce:i,announcement:s}=vL(),o=Xc("DndLiveRegion"),[c,u]=p.useState(!1);if(p.useEffect(()=>{u(!0)},[]),yL(p.useMemo(()=>({onDragStart(f){let{active:h}=f;i(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:m}=f;t.onDragMove&&i(t.onDragMove({active:h,over:m}))},onDragOver(f){let{active:h,over:m}=f;i(t.onDragOver({active:h,over:m}))},onDragEnd(f){let{active:h,over:m}=f;i(t.onDragEnd({active:h,over:m}))},onDragCancel(f){let{active:h,over:m}=f;i(t.onDragCancel({active:h,over:m}))}}),[i,t])),!c)return null;const d=ft.createElement(ft.Fragment,null,ft.createElement(mL,{id:n,value:a.draggable}),ft.createElement(gL,{id:o,announcement:s}));return r?yi.createPortal(d,r):d}var Ht;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ht||(Ht={}));function pf(){}function Ah(e,t){return p.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Th(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return p.useMemo(()=>[...t].filter(n=>n!=null),[...t])}const Jn=Object.freeze({x:0,y:0});function GC(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function jL(e,t){const r=hf(e);if(!r)return"0 0";const n={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return n.x+"% "+n.y+"%"}function YC(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function SL(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function NL(e){let{left:t,top:r,height:n,width:a}=e;return[{x:t,y:r},{x:t+a,y:r},{x:t,y:r+n},{x:t+a,y:r+n}]}function kL(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function y_(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const T0=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=y_(t,t.left,t.top),i=[];for(const s of n){const{id:o}=s,c=r.get(o);if(c){const u=GC(y_(c),a);i.push({id:o,data:{droppableContainer:s,value:u}})}}return i.sort(YC)};function CL(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),s=a-n,o=i-r;if(n<a&&r<i){const c=t.width*t.height,u=e.width*e.height,d=s*o,f=d/(c+u-d);return Number(f.toFixed(4))}return 0}const EL=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=[];for(const i of n){const{id:s}=i,o=r.get(s);if(o){const c=CL(o,t);c>0&&a.push({id:s,data:{droppableContainer:i,value:c}})}}return a.sort(SL)};function PL(e,t){const{top:r,left:n,bottom:a,right:i}=t;return r<=e.y&&e.y<=a&&n<=e.x&&e.x<=i}const OL=e=>{let{droppableContainers:t,droppableRects:r,pointerCoordinates:n}=e;if(!n)return[];const a=[];for(const i of t){const{id:s}=i,o=r.get(s);if(o&&PL(n,o)){const u=NL(o).reduce((f,h)=>f+GC(n,h),0),d=Number((u/4).toFixed(4));a.push({id:s,data:{droppableContainer:i,value:d}})}}return a.sort(YC)};function AL(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function XC(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Jn}function TL(e){return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((s,o)=>({...s,top:s.top+e*o.y,bottom:s.bottom+e*o.y,left:s.left+e*o.x,right:s.right+e*o.x}),{...r})}}const DL=TL(1);function JC(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function IL(e,t,r){const n=JC(t);if(!n)return e;const{scaleX:a,scaleY:i,x:s,y:o}=n,c=e.left-s-(1-a)*parseFloat(r),u=e.top-o-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),d=a?e.width/a:e.width,f=i?e.height/i:e.height;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c}}const RL={ignoreTransform:!1};function rl(e,t){t===void 0&&(t=RL);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=Rr(e).getComputedStyle(e);u&&(r=IL(r,u,d))}const{top:n,left:a,width:i,height:s,bottom:o,right:c}=r;return{top:n,left:a,width:i,height:s,bottom:o,right:c}}function x_(e){return rl(e,{ignoreTransform:!0})}function ML(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function $L(e,t){return t===void 0&&(t=Rr(e).getComputedStyle(e)),t.position==="fixed"}function LL(e,t){t===void 0&&(t=Rr(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?r.test(i):!1})}function D0(e,t){const r=[];function n(a){if(t!=null&&r.length>=t||!a)return r;if(A0(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!Gc(a)||HC(a)||r.includes(a))return r;const i=Rr(e).getComputedStyle(a);return a!==e&&LL(a,i)&&r.push(a),$L(a,i)?r:n(a.parentNode)}return e?n(e):r}function QC(e){const[t]=D0(e,1);return t??null}function Tm(e){return!Eh||!e?null:el(e)?e:O0(e)?A0(e)||e===tl(e).scrollingElement?window:Gc(e)?e:null:null}function ZC(e){return el(e)?e.scrollX:e.scrollLeft}function eE(e){return el(e)?e.scrollY:e.scrollTop}function yv(e){return{x:ZC(e),y:eE(e)}}var rr;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(rr||(rr={}));function tE(e){return!Eh||!e?!1:e===document.scrollingElement}function rE(e){const t={x:0,y:0},r=tE(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,s=e.scrollTop>=n.y,o=e.scrollLeft>=n.x;return{isTop:a,isLeft:i,isBottom:s,isRight:o,maxScroll:n,minScroll:t}}const FL={x:.2,y:.2};function BL(e,t,r,n,a){let{top:i,left:s,right:o,bottom:c}=r;n===void 0&&(n=10),a===void 0&&(a=FL);const{isTop:u,isBottom:d,isLeft:f,isRight:h}=rE(e),m={x:0,y:0},g={x:0,y:0},y={height:t.height*a.y,width:t.width*a.x};return!u&&i<=t.top+y.height?(m.y=rr.Backward,g.y=n*Math.abs((t.top+y.height-i)/y.height)):!d&&c>=t.bottom-y.height&&(m.y=rr.Forward,g.y=n*Math.abs((t.bottom-y.height-c)/y.height)),!h&&o>=t.right-y.width?(m.x=rr.Forward,g.x=n*Math.abs((t.right-y.width-o)/y.width)):!f&&s<=t.left+y.width&&(m.x=rr.Backward,g.x=n*Math.abs((t.left+y.width-s)/y.width)),{direction:m,speed:g}}function UL(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}const{top:t,left:r,right:n,bottom:a}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:a,width:e.clientWidth,height:e.clientHeight}}function nE(e){return e.reduce((t,r)=>So(t,yv(r)),Jn)}function zL(e){return e.reduce((t,r)=>t+ZC(r),0)}function WL(e){return e.reduce((t,r)=>t+eE(r),0)}function aE(e,t){if(t===void 0&&(t=rl),!e)return;const{top:r,left:n,bottom:a,right:i}=t(e);QC(e)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const KL=[["x",["left","right"],zL],["y",["top","bottom"],WL]];class I0{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=D0(r),a=nE(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,s,o]of KL)for(const c of s)Object.defineProperty(this,c,{get:()=>{const u=o(n),d=a[i]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Jl{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=t}add(t,r,n){var a;(a=this.target)==null||a.addEventListener(t,r,n),this.listeners.push([t,r,n])}}function HL(e){const{EventTarget:t}=Rr(e);return e instanceof t?e:tl(e)}function Dm(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t?n>t.y:!1}var wn;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(wn||(wn={}));function b_(e){e.preventDefault()}function qL(e){e.stopPropagation()}var Ye;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Ye||(Ye={}));const iE={start:[Ye.Space,Ye.Enter],cancel:[Ye.Esc],end:[Ye.Space,Ye.Enter,Ye.Tab]},VL=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case Ye.Right:return{...r,x:r.x+25};case Ye.Left:return{...r,x:r.x-25};case Ye.Down:return{...r,y:r.y+25};case Ye.Up:return{...r,y:r.y-25}}};class sE{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new Jl(tl(r)),this.windowListeners=new Jl(Rr(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(wn.Resize,this.handleCancel),this.windowListeners.add(wn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(wn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,n=t.node.current;n&&aE(n),r(Jn)}handleKeyDown(t){if(Oh(t)){const{active:r,context:n,options:a}=this.props,{keyboardCodes:i=iE,coordinateGetter:s=VL,scrollBehavior:o="smooth"}=a,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=n.current,d=u?{x:u.left,y:u.top}:Jn;this.referenceCoordinates||(this.referenceCoordinates=d);const f=s(t,{active:r,context:n.current,currentCoordinates:d});if(f){const h=ff(f,d),m={x:0,y:0},{scrollableAncestors:g}=n.current;for(const y of g){const v=t.code,{isTop:x,isRight:w,isLeft:b,isBottom:_,maxScroll:j,minScroll:S}=rE(y),N=UL(y),k={x:Math.min(v===Ye.Right?N.right-N.width/2:N.right,Math.max(v===Ye.Right?N.left:N.left+N.width/2,f.x)),y:Math.min(v===Ye.Down?N.bottom-N.height/2:N.bottom,Math.max(v===Ye.Down?N.top:N.top+N.height/2,f.y))},C=v===Ye.Right&&!w||v===Ye.Left&&!b,E=v===Ye.Down&&!_||v===Ye.Up&&!x;if(C&&k.x!==f.x){const P=y.scrollLeft+h.x,A=v===Ye.Right&&P<=j.x||v===Ye.Left&&P>=S.x;if(A&&!h.y){y.scrollTo({left:P,behavior:o});return}A?m.x=y.scrollLeft-P:m.x=v===Ye.Right?y.scrollLeft-j.x:y.scrollLeft-S.x,m.x&&y.scrollBy({left:-m.x,behavior:o});break}else if(E&&k.y!==f.y){const P=y.scrollTop+h.y,A=v===Ye.Down&&P<=j.y||v===Ye.Up&&P>=S.y;if(A&&!h.x){y.scrollTo({top:P,behavior:o});return}A?m.y=y.scrollTop-P:m.y=v===Ye.Down?y.scrollTop-j.y:y.scrollTop-S.y,m.y&&y.scrollBy({top:-m.y,behavior:o});break}}this.handleMove(t,So(ff(f,this.referenceCoordinates),m))}}}handleMove(t,r){const{onMove:n}=this.props;t.preventDefault(),n(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}sE.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=iE,onActivation:a}=t,{active:i}=r;const{code:s}=e.nativeEvent;if(n.start.includes(s)){const o=i.activatorNode.current;return o&&e.target!==o?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function w_(e){return!!(e&&"distance"in e)}function __(e){return!!(e&&"delay"in e)}class R0{constructor(t,r,n){var a;n===void 0&&(n=HL(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:i}=t,{target:s}=i;this.props=t,this.events=r,this.document=tl(s),this.documentListeners=new Jl(this.document),this.listeners=new Jl(n),this.windowListeners=new Jl(Rr(s)),this.initialCoordinates=(a=hf(i))!=null?a:Jn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(wn.Resize,this.handleCancel),this.windowListeners.add(wn.DragStart,b_),this.windowListeners.add(wn.VisibilityChange,this.handleCancel),this.windowListeners.add(wn.ContextMenu,b_),this.documentListeners.add(wn.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(__(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(w_(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:n,onPending:a}=this.props;a(n,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(wn.Click,qL,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(wn.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:n,initialCoordinates:a,props:i}=this,{onMove:s,options:{activationConstraint:o}}=i;if(!a)return;const c=(r=hf(t))!=null?r:Jn,u=ff(a,c);if(!n&&o){if(w_(o)){if(o.tolerance!=null&&Dm(u,o.tolerance))return this.handleCancel();if(Dm(u,o.distance))return this.handleStart()}if(__(o)&&Dm(u,o.tolerance))return this.handleCancel();this.handlePending(o,u);return}t.cancelable&&t.preventDefault(),s(c)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===Ye.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const GL={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class nl extends R0{constructor(t){const{event:r}=t,n=tl(r.target);super(t,GL,n)}}nl.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const YL={move:{name:"mousemove"},end:{name:"mouseup"}};var xv;(function(e){e[e.RightClick=2]="RightClick"})(xv||(xv={}));class XL extends R0{constructor(t){super(t,YL,tl(t.event.target))}}XL.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button===xv.RightClick?!1:(n==null||n({event:r}),!0)}}];const Im={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class JL extends R0{constructor(t){super(t,Im)}static setup(){return window.addEventListener(Im.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Im.move.name,t)};function t(){}}}JL.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:a}=r;return a.length>1?!1:(n==null||n({event:r}),!0)}}];var Ql;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ql||(Ql={}));var mf;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(mf||(mf={}));function QL(e){let{acceleration:t,activator:r=Ql.Pointer,canScroll:n,draggingRect:a,enabled:i,interval:s=5,order:o=mf.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:h}=e;const m=e6({delta:f,disabled:!i}),[g,y]=uL(),v=p.useRef({x:0,y:0}),x=p.useRef({x:0,y:0}),w=p.useMemo(()=>{switch(r){case Ql.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Ql.DraggableRect:return a}},[r,a,c]),b=p.useRef(null),_=p.useCallback(()=>{const S=b.current;if(!S)return;const N=v.current.x*x.current.x,k=v.current.y*x.current.y;S.scrollBy(N,k)},[]),j=p.useMemo(()=>o===mf.TreeOrder?[...u].reverse():u,[o,u]);p.useEffect(()=>{if(!i||!u.length||!w){y();return}for(const S of j){if((n==null?void 0:n(S))===!1)continue;const N=u.indexOf(S),k=d[N];if(!k)continue;const{direction:C,speed:E}=BL(S,k,w,t,h);for(const P of["x","y"])m[P][C[P]]||(E[P]=0,C[P]=0);if(E.x>0||E.y>0){y(),b.current=S,g(_,s),v.current=E,x.current=C;return}}v.current={x:0,y:0},x.current={x:0,y:0},y()},[t,_,n,y,i,s,JSON.stringify(w),JSON.stringify(m),g,u,j,d,JSON.stringify(h)])}const ZL={x:{[rr.Backward]:!1,[rr.Forward]:!1},y:{[rr.Backward]:!1,[rr.Forward]:!1}};function e6(e){let{delta:t,disabled:r}=e;const n=df(t);return Yc(a=>{if(r||!n||!a)return ZL;const i={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[rr.Backward]:a.x[rr.Backward]||i.x===-1,[rr.Forward]:a.x[rr.Forward]||i.x===1},y:{[rr.Backward]:a.y[rr.Backward]||i.y===-1,[rr.Forward]:a.y[rr.Forward]||i.y===1}}},[r,t,n])}function t6(e,t){const r=t!=null?e.get(t):void 0,n=r?r.node.current:null;return Yc(a=>{var i;return t==null?null:(i=n??a)!=null?i:null},[n,t])}function r6(e,t){return p.useMemo(()=>e.reduce((r,n)=>{const{sensor:a}=n,i=a.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,n)}));return[...r,...i]},[]),[e,t])}var Nc;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Nc||(Nc={}));var bv;(function(e){e.Optimized="optimized"})(bv||(bv={}));const j_=new Map;function n6(e,t){let{dragging:r,dependencies:n,config:a}=t;const[i,s]=p.useState(null),{frequency:o,measure:c,strategy:u}=a,d=p.useRef(e),f=v(),h=Sc(f),m=p.useCallback(function(x){x===void 0&&(x=[]),!h.current&&s(w=>w===null?x:w.concat(x.filter(b=>!w.includes(b))))},[h]),g=p.useRef(null),y=Yc(x=>{if(f&&!r)return j_;if(!x||x===j_||d.current!==e||i!=null){const w=new Map;for(let b of e){if(!b)continue;if(i&&i.length>0&&!i.includes(b.id)&&b.rect.current){w.set(b.id,b.rect.current);continue}const _=b.node.current,j=_?new I0(c(_),_):null;b.rect.current=j,j&&w.set(b.id,j)}return w}return x},[e,i,r,f,c]);return p.useEffect(()=>{d.current=e},[e]),p.useEffect(()=>{f||m()},[r,f]),p.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),p.useEffect(()=>{f||typeof o!="number"||g.current!==null||(g.current=setTimeout(()=>{m(),g.current=null},o))},[o,f,m,...n]),{droppableRects:y,measureDroppableContainers:m,measuringScheduled:i!=null};function v(){switch(u){case Nc.Always:return!1;case Nc.BeforeDragging:return r;default:return!r}}}function M0(e,t){return Yc(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function a6(e,t){return M0(e,t)}function i6(e){let{callback:t,disabled:r}=e;const n=Ph(t),a=p.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return p.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Dh(e){let{callback:t,disabled:r}=e;const n=Ph(t),a=p.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return p.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function s6(e){return new I0(rl(e),e)}function S_(e,t,r){t===void 0&&(t=s6);const[n,a]=p.useState(null);function i(){a(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??r)!=null?u:null}const d=t(e);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const s=i6({callback(c){if(e)for(const u of c){const{type:d,target:f}=u;if(d==="childList"&&f instanceof HTMLElement&&f.contains(e)){i();break}}}}),o=Dh({callback:i});return Yn(()=>{i(),e?(o==null||o.observe(e),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),s==null||s.disconnect())},[e]),n}function o6(e){const t=M0(e);return XC(e,t)}const N_=[];function l6(e){const t=p.useRef(e),r=Yc(n=>e?n&&n!==N_&&e&&t.current&&e.parentNode===t.current.parentNode?n:D0(e):N_,[e]);return p.useEffect(()=>{t.current=e},[e]),r}function c6(e){const[t,r]=p.useState(null),n=p.useRef(e),a=p.useCallback(i=>{const s=Tm(i.target);s&&r(o=>o?(o.set(s,yv(s)),new Map(o)):null)},[]);return p.useEffect(()=>{const i=n.current;if(e!==i){s(i);const o=e.map(c=>{const u=Tm(c);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,yv(u)]):null}).filter(c=>c!=null);r(o.length?new Map(o):null),n.current=e}return()=>{s(e),s(i)};function s(o){o.forEach(c=>{const u=Tm(c);u==null||u.removeEventListener("scroll",a)})}},[a,e]),p.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,s)=>So(i,s),Jn):nE(e):Jn,[e,t])}function k_(e,t){t===void 0&&(t=[]);const r=p.useRef(null);return p.useEffect(()=>{r.current=null},t),p.useEffect(()=>{const n=e!==Jn;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?ff(e,r.current):Jn}function u6(e){p.useEffect(()=>{if(!Eh)return;const t=e.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function d6(e,t){return p.useMemo(()=>e.reduce((r,n)=>{let{eventName:a,handler:i}=n;return r[a]=s=>{i(s,t)},r},{}),[e,t])}function oE(e){return p.useMemo(()=>e?ML(e):null,[e])}const C_=[];function f6(e,t){t===void 0&&(t=rl);const[r]=e,n=oE(r?Rr(r):null),[a,i]=p.useState(C_);function s(){i(()=>e.length?e.map(c=>tE(c)?n:new I0(t(c),c)):C_)}const o=Dh({callback:s});return Yn(()=>{o==null||o.disconnect(),s(),e.forEach(c=>o==null?void 0:o.observe(c))},[e]),a}function lE(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Gc(t)?t:e}function h6(e){let{measure:t}=e;const[r,n]=p.useState(null),a=p.useCallback(u=>{for(const{target:d}of u)if(Gc(d)){n(f=>{const h=t(d);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),i=Dh({callback:a}),s=p.useCallback(u=>{const d=lE(u);i==null||i.disconnect(),d&&(i==null||i.observe(d)),n(d?t(d):null)},[t,i]),[o,c]=uf(s);return p.useMemo(()=>({nodeRef:o,rect:r,setRef:c}),[r,o,c])}const p6=[{sensor:nl,options:{}},{sensor:sE,options:{}}],m6={current:{}},Cd={draggable:{measure:x_},droppable:{measure:x_,strategy:Nc.WhileDragging,frequency:bv.Optimized},dragOverlay:{measure:rl}};class Zl extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,n;return(r=(n=this.get(t))==null?void 0:n.node.current)!=null?r:void 0}}const g6={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Zl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:pf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Cd,measureDroppableContainers:pf,windowRect:null,measuringScheduled:!1},cE={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:pf,draggableNodes:new Map,over:null,measureDroppableContainers:pf},Jc=p.createContext(cE),uE=p.createContext(g6);function v6(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Zl}}}function y6(e,t){switch(t.type){case Ht.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ht.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ht.DragEnd:case Ht.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ht.RegisterDroppable:{const{element:r}=t,{id:n}=r,a=new Zl(e.droppable.containers);return a.set(n,r),{...e,droppable:{...e.droppable,containers:a}}}case Ht.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;const s=new Zl(e.droppable.containers);return s.set(r,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:s}}}case Ht.UnregisterDroppable:{const{id:r,key:n}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;const i=new Zl(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function x6(e){let{disabled:t}=e;const{active:r,activatorEvent:n,draggableNodes:a}=p.useContext(Jc),i=df(n),s=df(r==null?void 0:r.id);return p.useEffect(()=>{if(!t&&!n&&i&&s!=null){if(!Oh(i)||document.activeElement===i.target)return;const o=a.get(s);if(!o)return;const{activatorNode:c,node:u}=o;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const f=hL(d);if(f){f.focus();break}}})}},[n,t,a,s,i]),null}function dE(e,t){let{transform:r,...n}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...n}),r):r}function b6(e){return p.useMemo(()=>({draggable:{...Cd.draggable,...e==null?void 0:e.draggable},droppable:{...Cd.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Cd.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function w6(e){let{activeNode:t,measure:r,initialRect:n,config:a=!0}=e;const i=p.useRef(!1),{x:s,y:o}=typeof a=="boolean"?{x:a,y:a}:a;Yn(()=>{if(!s&&!o||!t){i.current=!1;return}if(i.current||!n)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=r(u),f=XC(d,n);if(s||(f.x=0),o||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=QC(u);h&&h.scrollBy({top:f.y,left:f.x})}},[t,s,o,n,r])}const Ih=p.createContext({...Jn,scaleX:1,scaleY:1});var ci;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ci||(ci={}));const Rh=p.memo(function(t){var r,n,a,i;let{id:s,accessibility:o,autoScroll:c=!0,children:u,sensors:d=p6,collisionDetection:f=EL,measuring:h,modifiers:m,...g}=t;const y=p.useReducer(y6,void 0,v6),[v,x]=y,[w,b]=xL(),[_,j]=p.useState(ci.Uninitialized),S=_===ci.Initialized,{draggable:{active:N,nodes:k,translate:C},droppable:{containers:E}}=v,P=N!=null?k.get(N):null,A=p.useRef({initial:null,translated:null}),H=p.useMemo(()=>{var ze;return N!=null?{id:N,data:(ze=P==null?void 0:P.data)!=null?ze:m6,rect:A}:null},[N,P]),J=p.useRef(null),[ee,B]=p.useState(null),[K,D]=p.useState(null),R=Sc(g,Object.values(g)),F=Xc("DndDescribedBy",s),le=p.useMemo(()=>E.getEnabled(),[E]),re=b6(h),{droppableRects:Ne,measureDroppableContainers:O,measuringScheduled:V}=n6(le,{dragging:S,dependencies:[C.x,C.y],config:re.droppable}),te=t6(k,N),M=p.useMemo(()=>K?hf(K):null,[K]),X=ni(),T=a6(te,re.draggable.measure);w6({activeNode:N!=null?k.get(N):null,config:X.layoutShiftCompensation,initialRect:T,measure:re.draggable.measure});const z=S_(te,re.draggable.measure,T),Z=S_(te?te.parentElement:null),$=p.useRef({activatorEvent:null,active:null,activeNode:te,collisionRect:null,collisions:null,droppableRects:Ne,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:E,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),pe=E.getNodeFor((r=$.current.over)==null?void 0:r.id),ce=h6({measure:re.dragOverlay.measure}),Me=(n=ce.nodeRef.current)!=null?n:te,Ie=S?(a=ce.rect)!=null?a:z:null,Je=!!(ce.nodeRef.current&&ce.rect),Ke=o6(Je?null:z),lr=oE(Me?Rr(Me):null),Ve=l6(S?pe??te:null),q=f6(Ve),He=dE(m,{transform:{x:C.x-Ke.x,y:C.y-Ke.y,scaleX:1,scaleY:1},activatorEvent:K,active:H,activeNodeRect:z,containerNodeRect:Z,draggingNodeRect:Ie,over:$.current.over,overlayNodeRect:ce.rect,scrollableAncestors:Ve,scrollableAncestorRects:q,windowRect:lr}),ke=M?So(M,C):null,Ue=c6(Ve),xt=k_(Ue),L=k_(Ue,[z]),Q=So(He,xt),oe=Ie?DL(Ie,He):null,Ee=H&&oe?f({active:H,collisionRect:oe,droppableRects:Ne,droppableContainers:le,pointerCoordinates:ke}):null,Le=kL(Ee,"id"),[Pe,cr]=p.useState(null),Qt=Je?He:So(He,L),aa=AL(Qt,(i=Pe==null?void 0:Pe.rect)!=null?i:null,z),ia=p.useRef(null),zi=p.useCallback((ze,bt)=>{let{sensor:nt,options:wt}=bt;if(J.current==null)return;const yr=k.get(J.current);if(!yr)return;const ur=ze.nativeEvent,Lr=new nt({active:J.current,activeNode:yr,event:ur,options:wt,context:$,onAbort(tt){if(!k.get(tt))return;const{onDragAbort:kr}=R.current,Xr={id:tt};kr==null||kr(Xr),w({type:"onDragAbort",event:Xr})},onPending(tt,Zt,kr,Xr){if(!k.get(tt))return;const{onDragPending:$n}=R.current,_t={id:tt,constraint:Zt,initialCoordinates:kr,offset:Xr};$n==null||$n(_t),w({type:"onDragPending",event:_t})},onStart(tt){const Zt=J.current;if(Zt==null)return;const kr=k.get(Zt);if(!kr)return;const{onDragStart:Xr}=R.current,Mn={activatorEvent:ur,active:{id:Zt,data:kr.data,rect:A}};yi.unstable_batchedUpdates(()=>{Xr==null||Xr(Mn),j(ci.Initializing),x({type:Ht.DragStart,initialCoordinates:tt,active:Zt}),w({type:"onDragStart",event:Mn}),B(ia.current),D(ur)})},onMove(tt){x({type:Ht.DragMove,coordinates:tt})},onEnd:Yr(Ht.DragEnd),onCancel:Yr(Ht.DragCancel)});ia.current=Lr;function Yr(tt){return async function(){const{active:kr,collisions:Xr,over:Mn,scrollAdjustedTranslate:$n}=$.current;let _t=null;if(kr&&$n){const{cancelDrop:Jr}=R.current;_t={activatorEvent:ur,active:kr,collisions:Xr,delta:$n,over:Mn},tt===Ht.DragEnd&&typeof Jr=="function"&&await Promise.resolve(Jr(_t))&&(tt=Ht.DragCancel)}J.current=null,yi.unstable_batchedUpdates(()=>{x({type:tt}),j(ci.Uninitialized),cr(null),B(null),D(null),ia.current=null;const Jr=tt===Ht.DragEnd?"onDragEnd":"onDragCancel";if(_t){const oa=R.current[Jr];oa==null||oa(_t),w({type:Jr,event:_t})}})}}},[k]),Wi=p.useCallback((ze,bt)=>(nt,wt)=>{const yr=nt.nativeEvent,ur=k.get(wt);if(J.current!==null||!ur||yr.dndKit||yr.defaultPrevented)return;const Lr={active:ur};ze(nt,bt.options,Lr)===!0&&(yr.dndKit={capturedBy:bt.sensor},J.current=wt,zi(nt,bt))},[k,zi]),sa=r6(d,Wi);u6(d),Yn(()=>{z&&_===ci.Initializing&&j(ci.Initialized)},[z,_]),p.useEffect(()=>{const{onDragMove:ze}=R.current,{active:bt,activatorEvent:nt,collisions:wt,over:yr}=$.current;if(!bt||!nt)return;const ur={active:bt,activatorEvent:nt,collisions:wt,delta:{x:Q.x,y:Q.y},over:yr};yi.unstable_batchedUpdates(()=>{ze==null||ze(ur),w({type:"onDragMove",event:ur})})},[Q.x,Q.y]),p.useEffect(()=>{const{active:ze,activatorEvent:bt,collisions:nt,droppableContainers:wt,scrollAdjustedTranslate:yr}=$.current;if(!ze||J.current==null||!bt||!yr)return;const{onDragOver:ur}=R.current,Lr=wt.get(Le),Yr=Lr&&Lr.rect.current?{id:Lr.id,rect:Lr.rect.current,data:Lr.data,disabled:Lr.disabled}:null,tt={active:ze,activatorEvent:bt,collisions:nt,delta:{x:yr.x,y:yr.y},over:Yr};yi.unstable_batchedUpdates(()=>{cr(Yr),ur==null||ur(tt),w({type:"onDragOver",event:tt})})},[Le]),Yn(()=>{$.current={activatorEvent:K,active:H,activeNode:te,collisionRect:oe,collisions:Ee,droppableRects:Ne,draggableNodes:k,draggingNode:Me,draggingNodeRect:Ie,droppableContainers:E,over:Pe,scrollableAncestors:Ve,scrollAdjustedTranslate:Q},A.current={initial:Ie,translated:oe}},[H,te,Ee,oe,k,Me,Ie,Ne,E,Pe,Ve,Q]),QL({...X,delta:C,draggingRect:oe,pointerCoordinates:ke,scrollableAncestors:Ve,scrollableAncestorRects:q});const ri=p.useMemo(()=>({active:H,activeNode:te,activeNodeRect:z,activatorEvent:K,collisions:Ee,containerNodeRect:Z,dragOverlay:ce,draggableNodes:k,droppableContainers:E,droppableRects:Ne,over:Pe,measureDroppableContainers:O,scrollableAncestors:Ve,scrollableAncestorRects:q,measuringConfiguration:re,measuringScheduled:V,windowRect:lr}),[H,te,z,K,Ee,Z,ce,k,E,Ne,Pe,O,Ve,q,re,V,lr]),Ki=p.useMemo(()=>({activatorEvent:K,activators:sa,active:H,activeNodeRect:z,ariaDescribedById:{draggable:F},dispatch:x,draggableNodes:k,over:Pe,measureDroppableContainers:O}),[K,sa,H,z,x,F,k,Pe,O]);return ft.createElement(VC.Provider,{value:b},ft.createElement(Jc.Provider,{value:Ki},ft.createElement(uE.Provider,{value:ri},ft.createElement(Ih.Provider,{value:aa},u)),ft.createElement(x6,{disabled:(o==null?void 0:o.restoreFocus)===!1})),ft.createElement(_L,{...o,hiddenTextDescribedById:F}));function ni(){const ze=(ee==null?void 0:ee.autoScrollEnabled)===!1,bt=typeof c=="object"?c.enabled===!1:c===!1,nt=S&&!ze&&!bt;return typeof c=="object"?{...c,enabled:nt}:{enabled:nt}}}),_6=p.createContext(null),E_="button",j6="Draggable";function S6(e){let{id:t,data:r,disabled:n=!1,attributes:a}=e;const i=Xc(j6),{activators:s,activatorEvent:o,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:h}=p.useContext(Jc),{role:m=E_,roleDescription:g="draggable",tabIndex:y=0}=a??{},v=(c==null?void 0:c.id)===t,x=p.useContext(v?Ih:_6),[w,b]=uf(),[_,j]=uf(),S=d6(s,t),N=Sc(r);Yn(()=>(f.set(t,{id:t,key:i,node:w,activatorNode:_,data:N}),()=>{const C=f.get(t);C&&C.key===i&&f.delete(t)}),[f,t]);const k=p.useMemo(()=>({role:m,tabIndex:y,"aria-disabled":n,"aria-pressed":v&&m===E_?!0:void 0,"aria-roledescription":g,"aria-describedby":d.draggable}),[n,m,y,v,g,d.draggable]);return{active:c,activatorEvent:o,activeNodeRect:u,attributes:k,isDragging:v,listeners:n?void 0:S,node:w,over:h,setNodeRef:b,setActivatorNodeRef:j,transform:x}}function fE(){return p.useContext(uE)}const N6="Droppable",k6={timeout:25};function hE(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:a}=e;const i=Xc(N6),{active:s,dispatch:o,over:c,measureDroppableContainers:u}=p.useContext(Jc),d=p.useRef({disabled:r}),f=p.useRef(!1),h=p.useRef(null),m=p.useRef(null),{disabled:g,updateMeasurementsFor:y,timeout:v}={...k6,...a},x=Sc(y??n),w=p.useCallback(()=>{if(!f.current){f.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),m.current=null},v)},[v]),b=Dh({callback:w,disabled:g||!s}),_=p.useCallback((k,C)=>{b&&(C&&(b.unobserve(C),f.current=!1),k&&b.observe(k))},[b]),[j,S]=uf(_),N=Sc(t);return p.useEffect(()=>{!b||!j.current||(b.disconnect(),f.current=!1,b.observe(j.current))},[j,b]),p.useEffect(()=>(o({type:Ht.RegisterDroppable,element:{id:n,key:i,disabled:r,node:j,rect:h,data:N}}),()=>o({type:Ht.UnregisterDroppable,key:i,id:n})),[n]),p.useEffect(()=>{r!==d.current.disabled&&(o({type:Ht.SetDroppableDisabled,id:n,key:i,disabled:r}),d.current.disabled=r)},[n,i,r,o]),{active:s,rect:h,isOver:(c==null?void 0:c.id)===n,node:j,over:c,setNodeRef:S}}function C6(e){let{animation:t,children:r}=e;const[n,a]=p.useState(null),[i,s]=p.useState(null),o=df(r);return!r&&!n&&o&&a(o),Yn(()=>{if(!i)return;const c=n==null?void 0:n.key,u=n==null?void 0:n.props.id;if(c==null||u==null){a(null);return}Promise.resolve(t(u,i)).then(()=>{a(null)})},[t,n,i]),ft.createElement(ft.Fragment,null,r,n?p.cloneElement(n,{ref:s}):null)}const E6={x:0,y:0,scaleX:1,scaleY:1};function P6(e){let{children:t}=e;return ft.createElement(Jc.Provider,{value:cE},ft.createElement(Ih.Provider,{value:E6},t))}const O6={position:"fixed",touchAction:"none"},A6=e=>Oh(e)?"transform 250ms ease":void 0,T6=p.forwardRef((e,t)=>{let{as:r,activatorEvent:n,adjustScale:a,children:i,className:s,rect:o,style:c,transform:u,transition:d=A6}=e;if(!o)return null;const f=a?u:{...u,scaleX:1,scaleY:1},h={...O6,width:o.width,height:o.height,top:o.top,left:o.left,transform:Xn.Transform.toString(f),transformOrigin:a&&n?jL(n,o):void 0,transition:typeof d=="function"?d(n):d,...c};return ft.createElement(r,{className:s,style:h,ref:t},i)}),D6=e=>t=>{let{active:r,dragOverlay:n}=t;const a={},{styles:i,className:s}=e;if(i!=null&&i.active)for(const[o,c]of Object.entries(i.active))c!==void 0&&(a[o]=r.node.style.getPropertyValue(o),r.node.style.setProperty(o,c));if(i!=null&&i.dragOverlay)for(const[o,c]of Object.entries(i.dragOverlay))c!==void 0&&n.node.style.setProperty(o,c);return s!=null&&s.active&&r.node.classList.add(s.active),s!=null&&s.dragOverlay&&n.node.classList.add(s.dragOverlay),function(){for(const[c,u]of Object.entries(a))r.node.style.setProperty(c,u);s!=null&&s.active&&r.node.classList.remove(s.active)}},I6=e=>{let{transform:{initial:t,final:r}}=e;return[{transform:Xn.Transform.toString(t)},{transform:Xn.Transform.toString(r)}]},R6={duration:250,easing:"ease",keyframes:I6,sideEffects:D6({styles:{active:{opacity:"0"}}})};function M6(e){let{config:t,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=e;return Ph((i,s)=>{if(t===null)return;const o=r.get(i);if(!o)return;const c=o.node.current;if(!c)return;const u=lE(s);if(!u)return;const{transform:d}=Rr(s).getComputedStyle(s),f=JC(d);if(!f)return;const h=typeof t=="function"?t:$6(t);return aE(c,a.draggable.measure),h({active:{id:i,data:o.data,node:c,rect:a.draggable.measure(c)},draggableNodes:r,dragOverlay:{node:s,rect:a.dragOverlay.measure(u)},droppableContainers:n,measuringConfiguration:a,transform:f})})}function $6(e){const{duration:t,easing:r,sideEffects:n,keyframes:a}={...R6,...e};return i=>{let{active:s,dragOverlay:o,transform:c,...u}=i;if(!t)return;const d={x:o.rect.left-s.rect.left,y:o.rect.top-s.rect.top},f={scaleX:c.scaleX!==1?s.rect.width*c.scaleX/o.rect.width:1,scaleY:c.scaleY!==1?s.rect.height*c.scaleY/o.rect.height:1},h={x:c.x-d.x,y:c.y-d.y,...f},m=a({...u,active:s,dragOverlay:o,transform:{initial:c,final:h}}),[g]=m,y=m[m.length-1];if(JSON.stringify(g)===JSON.stringify(y))return;const v=n==null?void 0:n({active:s,dragOverlay:o,...u}),x=o.node.animate(m,{duration:t,easing:r,fill:"forwards"});return new Promise(w=>{x.onfinish=()=>{v==null||v(),w()}})}}let P_=0;function L6(e){return p.useMemo(()=>{if(e!=null)return P_++,P_},[e])}const pE=ft.memo(e=>{let{adjustScale:t=!1,children:r,dropAnimation:n,style:a,transition:i,modifiers:s,wrapperElement:o="div",className:c,zIndex:u=999}=e;const{activatorEvent:d,active:f,activeNodeRect:h,containerNodeRect:m,draggableNodes:g,droppableContainers:y,dragOverlay:v,over:x,measuringConfiguration:w,scrollableAncestors:b,scrollableAncestorRects:_,windowRect:j}=fE(),S=p.useContext(Ih),N=L6(f==null?void 0:f.id),k=dE(s,{activatorEvent:d,active:f,activeNodeRect:h,containerNodeRect:m,draggingNodeRect:v.rect,over:x,overlayNodeRect:v.rect,scrollableAncestors:b,scrollableAncestorRects:_,transform:S,windowRect:j}),C=M0(h),E=M6({config:n,draggableNodes:g,droppableContainers:y,measuringConfiguration:w}),P=C?v.setRef:void 0;return ft.createElement(P6,null,ft.createElement(C6,{animation:E},f&&N?ft.createElement(T6,{key:N,id:f.id,ref:P,as:o,activatorEvent:d,adjustScale:t,className:c,transition:i,rect:C,style:{zIndex:u,...a},transform:k},r):null))});function Mh(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function F6(e,t){return e.reduce((r,n,a)=>{const i=t.get(n);return i&&(r[a]=i),r},Array(e.length))}function qu(e){return e!==null&&e>=0}function B6(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function U6(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const $h=e=>{let{rects:t,activeIndex:r,overIndex:n,index:a}=e;const i=Mh(t,n,r),s=t[a],o=i[a];return!o||!s?null:{x:o.left-s.left,y:o.top-s.top,scaleX:o.width/s.width,scaleY:o.height/s.height}},Vu={scaleX:1,scaleY:1},mE=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:a,rects:i,overIndex:s}=e;const o=(t=i[r])!=null?t:n;if(!o)return null;if(a===r){const u=i[s];return u?{x:0,y:r<s?u.top+u.height-(o.top+o.height):u.top-o.top,...Vu}:null}const c=z6(i,a,r);return a>r&&a<=s?{x:0,y:-o.height-c,...Vu}:a<r&&a>=s?{x:0,y:o.height+c,...Vu}:{x:0,y:0,...Vu}};function z6(e,t,r){const n=e[t],a=e[t-1],i=e[t+1];return n?r<t?a?n.top-(a.top+a.height):i?i.top-(n.top+n.height):0:i?i.top-(n.top+n.height):a?n.top-(a.top+a.height):0:0}const gE="Sortable",vE=ft.createContext({activeIndex:-1,containerId:gE,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:$h,disabled:{draggable:!1,droppable:!1}});function Lh(e){let{children:t,id:r,items:n,strategy:a=$h,disabled:i=!1}=e;const{active:s,dragOverlay:o,droppableRects:c,over:u,measureDroppableContainers:d}=fE(),f=Xc(gE,r),h=o.rect!==null,m=p.useMemo(()=>n.map(S=>typeof S=="object"&&"id"in S?S.id:S),[n]),g=s!=null,y=s?m.indexOf(s.id):-1,v=u?m.indexOf(u.id):-1,x=p.useRef(m),w=!B6(m,x.current),b=v!==-1&&y===-1||w,_=U6(i);Yn(()=>{w&&g&&d(m)},[w,m,g,d]),p.useEffect(()=>{x.current=m},[m]);const j=p.useMemo(()=>({activeIndex:y,containerId:f,disabled:_,disableTransforms:b,items:m,overIndex:v,useDragOverlay:h,sortedRects:F6(m,c),strategy:a}),[y,f,_.draggable,_.droppable,b,m,v,c,h,a]);return ft.createElement(vE.Provider,{value:j},t)}const W6=e=>{let{id:t,items:r,activeIndex:n,overIndex:a}=e;return Mh(r,n,a).indexOf(t)},K6=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:a,items:i,newIndex:s,previousItems:o,previousContainerId:c,transition:u}=e;return!u||!n||o!==i&&a===s?!1:r?!0:s!==a&&t===c},H6={duration:200,easing:"ease"},yE="transform",q6=Xn.Transition.toString({property:yE,duration:0,easing:"linear"}),V6={roleDescription:"sortable"};function G6(e){let{disabled:t,index:r,node:n,rect:a}=e;const[i,s]=p.useState(null),o=p.useRef(r);return Yn(()=>{if(!t&&r!==o.current&&n.current){const c=a.current;if(c){const u=rl(n.current,{ignoreTransform:!0}),d={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(d.x||d.y)&&s(d)}}r!==o.current&&(o.current=r)},[t,r,n,a]),p.useEffect(()=>{i&&s(null)},[i]),i}function Fh(e){let{animateLayoutChanges:t=K6,attributes:r,disabled:n,data:a,getNewIndex:i=W6,id:s,strategy:o,resizeObserverConfig:c,transition:u=H6}=e;const{items:d,containerId:f,activeIndex:h,disabled:m,disableTransforms:g,sortedRects:y,overIndex:v,useDragOverlay:x,strategy:w}=p.useContext(vE),b=Y6(n,m),_=d.indexOf(s),j=p.useMemo(()=>({sortable:{containerId:f,index:_,items:d},...a}),[f,a,_,d]),S=p.useMemo(()=>d.slice(d.indexOf(s)),[d,s]),{rect:N,node:k,isOver:C,setNodeRef:E}=hE({id:s,data:j,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...c}}),{active:P,activatorEvent:A,activeNodeRect:H,attributes:J,setNodeRef:ee,listeners:B,isDragging:K,over:D,setActivatorNodeRef:R,transform:F}=S6({id:s,data:j,attributes:{...V6,...r},disabled:b.draggable}),le=cL(E,ee),re=!!P,Ne=re&&!g&&qu(h)&&qu(v),O=!x&&K,V=O&&Ne?F:null,M=Ne?V??(o??w)({rects:y,activeNodeRect:H,activeIndex:h,overIndex:v,index:_}):null,X=qu(h)&&qu(v)?i({id:s,items:d,activeIndex:h,overIndex:v}):_,T=P==null?void 0:P.id,z=p.useRef({activeId:T,items:d,newIndex:X,containerId:f}),Z=d!==z.current.items,$=t({active:P,containerId:f,isDragging:K,isSorting:re,id:s,index:_,items:d,newIndex:z.current.newIndex,previousItems:z.current.items,previousContainerId:z.current.containerId,transition:u,wasDragging:z.current.activeId!=null}),pe=G6({disabled:!$,index:_,node:k,rect:N});return p.useEffect(()=>{re&&z.current.newIndex!==X&&(z.current.newIndex=X),f!==z.current.containerId&&(z.current.containerId=f),d!==z.current.items&&(z.current.items=d)},[re,X,f,d]),p.useEffect(()=>{if(T===z.current.activeId)return;if(T!=null&&z.current.activeId==null){z.current.activeId=T;return}const Me=setTimeout(()=>{z.current.activeId=T},50);return()=>clearTimeout(Me)},[T]),{active:P,activeIndex:h,attributes:J,data:j,rect:N,index:_,newIndex:X,items:d,isOver:C,isSorting:re,isDragging:K,listeners:B,node:k,overIndex:v,over:D,setNodeRef:le,setActivatorNodeRef:R,setDroppableNodeRef:E,setDraggableNodeRef:ee,transform:pe??M,transition:ce()};function ce(){if(pe||Z&&z.current.newIndex===_)return q6;if(!(O&&!Oh(A)||!u)&&(re||$))return Xn.Transition.toString({...u,property:yE})}}function Y6(e,t){var r,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(n=e==null?void 0:e.droppable)!=null?n:t.droppable}}Ye.Down,Ye.Right,Ye.Up,Ye.Left;function Fr(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function Gu(e){return`${(e*100).toFixed(1)}%`}function O_(e,t){const r=new Date().getHours(),n=r<12?"Good morning":r<18?"Good afternoon":"Good evening",a=["Let's close some deals","Time to crush your goals","Ready to dominate the market","Another day, another opportunity","Let's make it a winning day","Time to turn leads into gold","Your next closing is waiting","Great things happen to closers","Let's build your empire","Success is calling your name","Time to level up your game","Let's make today count"],i=["Rally the team to a strong finish","Spot the blockers and clear the way","Guide the pipeline to momentum","Coach for better follow-through today","Keep your team sharp and focused","Measure, adjust, and push the pace"],s=["Lead from the frontshow them the way","Tee up the right opportunities for the team","Mentor and keep the cadence tight","Keep your squad synced and confident","Set the tone and celebrate small wins","Align the team to the next milestones"],o=["Keep operations humming smoothly","Check the pulse and anticipate needs","Steady hands keep the flywheel spinning","Align the org and let the teams run","Remove friction and raise the bar","Your oversight keeps momentum steady"],c=e?e.split(" ")[0]:"",u=c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",d=u?`, ${u}`:"";let f=a;t==="sales_manager"?f=i:t==="team_lead"?f=s:t==="admin"&&(f=o);const h=f[Math.floor(Math.random()*f.length)];return`${n}${d}. ${h}!`}function X6(){return new Intl.DateTimeFormat("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}).format(new Date)}function J6(e,t,r){const n=new Date,a=n.getFullYear(),i=n.getMonth(),s=Math.floor(i/3);switch(e){case"this_month":return{start:new Date(a,i,1),end:new Date(a,i+1,0,23,59,59)};case"last_30_days":const o=new Date(n);return o.setDate(o.getDate()-30),{start:o,end:n};case"this_quarter":return{start:new Date(a,s*3,1),end:new Date(a,(s+1)*3,0,23,59,59)};case"ytd":return{start:new Date(a,0,1),end:n};case"custom":return{start:t||new Date(a,0,1),end:r||n};default:return{start:new Date(a,0,1),end:n}}}function Vi(e){const n=(e.actual_sale_price||e.expected_sale_price)*e.gross_commission_rate*(1-e.brokerage_split_rate);return(e.referral_out_rate?n*(1-e.referral_out_rate):n)-e.transaction_fee}function xE(e){const t=new Date(e),n=new Date().getTime()-t.getTime();return Math.floor(n/(1e3*60*60*24))}function A_(e,t=30){return xE(e)>t}function Q6(e){if(!e||!e.startsWith("hsl("))return null;const t=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);return t?{h:parseInt(t[1],10),s:parseInt(t[2],10),l:parseInt(t[3],10)}:null}function Z6(e){if(!e||!e.toLowerCase().startsWith("rgb("))return null;const t=e.match(/rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)/i);if(!t)return null;const[r,n,a]=t.slice(1).map(i=>parseInt(i,10));return[r,n,a].some(i=>Number.isNaN(i)||i<0||i>255)?null:{r,g:n,b:a}}function eF(e){if(!e||!e.startsWith("#"))return null;const r=e.trim().match(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i);if(!r)return null;let n=r[1];n.length===3&&(n=n.split("").map(o=>o+o).join(""));const a=parseInt(n.slice(0,2),16),i=parseInt(n.slice(2,4),16),s=parseInt(n.slice(4,6),16);return{r:a,g:i,b:s}}function tF(e){if(!e)return"#ffffff";const t=eF(e);if(t)return(.2126*t.r+.7152*t.g+.0722*t.b)/255>.6?"#000000":"#ffffff";const r=Q6(e);if(r)return r.l>60?"#000000":"#ffffff";const n=Z6(e);return n&&(.2126*n.r+.7152*n.g+.0722*n.b)/255>.6?"#000000":"#ffffff"}function Bh(e){if(!e)return"hsl(220, 70%, 50%)";const t=e.toLowerCase(),r=e.match(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i);return r?r[0]:t.startsWith("hsl(")||t.startsWith("rgb(")?e:{blue:"hsl(220, 70%, 50%)",cyan:"hsl(190, 65%, 48%)",teal:"hsl(165, 60%, 45%)",green:"hsl(145, 65%, 45%)",lime:"hsl(80, 60%, 50%)",yellow:"hsl(45, 100%, 50%)",orange:"hsl(25, 95%, 55%)",red:"hsl(5, 75%, 55%)",pink:"hsl(340, 70%, 55%)",purple:"hsl(280, 65%, 55%)",violet:"hsl(260, 60%, 55%)",indigo:"hsl(240, 65%, 55%)",slate:"hsl(200, 20%, 50%)",gray:"hsl(0, 0%, 50%)",brown:"hsl(30, 40%, 45%)",amber:"hsl(40, 95%, 50%)",emerald:"hsl(160, 70%, 45%)",sky:"hsl(200, 90%, 50%)",rose:"hsl(350, 80%, 55%)",mint:"hsl(175, 60%, 45%)"}[t]||"hsl(220, 70%, 50%)"}function Uh(e){const t=Bh(e),r=tF(t);return{bg:t,text:r}}function bE(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=bE(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function rt(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=bE(e))&&(n&&(n+=" "),n+=t);return n}var rF=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function $0(e){if(typeof e!="string")return!1;var t=rF;return t.includes(e)}var nF=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function wE(e){if(typeof e!="string")return!1;var t=nF;return t.includes(e)}function _E(e){return typeof e=="string"&&e.startsWith("data-")}function Qn(e){var t=Object.entries(e).filter(r=>{var[n]=r;return wE(n)||_E(n)});return Object.fromEntries(t)}function Qc(e){if(e==null)return null;if(p.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Qn(t)}return typeof e=="object"&&!Array.isArray(e)?Qn(e):null}function Tr(e){var t=Object.entries(e).filter(r=>{var[n]=r;return wE(n)||_E(n)||$0(n)});return Object.fromEntries(t)}function aF(e){return e==null?null:p.isValidElement(e)?Tr(e.props):typeof e=="object"&&!Array.isArray(e)?Tr(e):null}var iF=["children","width","height","viewBox","className","style","title","desc"];function wv(){return wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wv.apply(null,arguments)}function sF(e,t){if(e==null)return{};var r,n,a=oF(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function oF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var jE=p.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:i,className:s,style:o,title:c,desc:u}=e,d=sF(e,iF),f=i||{width:n,height:a,x:0,y:0},h=rt("recharts-surface",s);return p.createElement("svg",wv({},Tr(d),{className:h,width:n,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),p.createElement("title",null,c),p.createElement("desc",null,u),r)}),lF=["children","className"];function _v(){return _v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_v.apply(null,arguments)}function cF(e,t){if(e==null)return{};var r,n,a=uF(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function uF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var On=p.forwardRef((e,t)=>{var{children:r,className:n}=e,a=cF(e,lF),i=rt("recharts-layer",n);return p.createElement("g",_v({className:i},Tr(a),{ref:t}),r)}),dF=p.createContext(null);function ot(e){return function(){return e}}const SE=Math.cos,gf=Math.sin,na=Math.sqrt,vf=Math.PI,zh=2*vf,jv=Math.PI,Sv=2*jv,Qi=1e-6,fF=Sv-Qi;function NE(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function hF(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return NE;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class pF{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?NE:hF(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,s){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,o=this._y1,c=n-t,u=a-r,d=s-t,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Qi)if(!(Math.abs(f*c-u*d)>Qi)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-s,g=a-o,y=c*c+u*u,v=m*m+g*g,x=Math.sqrt(y),w=Math.sqrt(h),b=i*Math.tan((jv-Math.acos((y+h-v)/(2*x*w)))/2),_=b/w,j=b/x;Math.abs(_-1)>Qi&&this._append`L${t+_*d},${r+_*f}`,this._append`A${i},${i},0,0,${+(f*m>d*g)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,a,i,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),c=n*Math.sin(a),u=t+o,d=r+c,f=1^s,h=s?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Qi||Math.abs(this._y1-d)>Qi)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%Sv+Sv),h>fF?this._append`A${n},${n},0,1,${f},${t-o},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Qi&&this._append`A${n},${n},0,${+(h>=jv)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function L0(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new pF(t)}function F0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function kE(e){this._context=e}kE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Wh(e){return new kE(e)}function CE(e){return e[0]}function EE(e){return e[1]}function PE(e,t){var r=ot(!0),n=null,a=Wh,i=null,s=L0(o);e=typeof e=="function"?e:e===void 0?CE:ot(e),t=typeof t=="function"?t:t===void 0?EE:ot(t);function o(c){var u,d=(c=F0(c)).length,f,h=!1,m;for(n==null&&(i=a(m=s())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,c),+t(f,u,c));if(m)return i=null,m+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:ot(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:ot(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:ot(!!c),o):r},o.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),o):a},o.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),o):n},o}function Yu(e,t,r){var n=null,a=ot(!0),i=null,s=Wh,o=null,c=L0(u);e=typeof e=="function"?e:e===void 0?CE:ot(+e),t=typeof t=="function"?t:ot(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?EE:ot(+r);function u(f){var h,m,g,y=(f=F0(f)).length,v,x=!1,w,b=new Array(y),_=new Array(y);for(i==null&&(o=s(w=c())),h=0;h<=y;++h){if(!(h<y&&a(v=f[h],h,f))===x)if(x=!x)m=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=h-1;g>=m;--g)o.point(b[g],_[g]);o.lineEnd(),o.areaEnd()}x&&(b[h]=+e(v,h,f),_[h]=+t(v,h,f),o.point(n?+n(v,h,f):b[h],r?+r(v,h,f):_[h]))}if(w)return o=null,w+""||null}function d(){return PE().defined(a).curve(s).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:ot(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ot(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ot(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:ot(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ot(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ot(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:ot(!!f),u):a},u.curve=function(f){return arguments.length?(s=f,i!=null&&(o=s(i)),u):s},u.context=function(f){return arguments.length?(f==null?i=o=null:o=s(i=f),u):i},u}class OE{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function mF(e){return new OE(e,!0)}function gF(e){return new OE(e,!1)}const B0={draw(e,t){const r=na(t/vf);e.moveTo(r,0),e.arc(0,0,r,0,zh)}},vF={draw(e,t){const r=na(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},AE=na(1/3),yF=AE*2,xF={draw(e,t){const r=na(t/yF),n=r*AE;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},bF={draw(e,t){const r=na(t),n=-r/2;e.rect(n,n,r,r)}},wF=.8908130915292852,TE=gf(vf/10)/gf(7*vf/10),_F=gf(zh/10)*TE,jF=-SE(zh/10)*TE,SF={draw(e,t){const r=na(t*wF),n=_F*r,a=jF*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const s=zh*i/5,o=SE(s),c=gf(s);e.lineTo(c*r,-o*r),e.lineTo(o*n-c*a,c*n+o*a)}e.closePath()}},Rm=na(3),NF={draw(e,t){const r=-na(t/(Rm*3));e.moveTo(0,r*2),e.lineTo(-Rm*r,-r),e.lineTo(Rm*r,-r),e.closePath()}},vn=-.5,yn=na(3)/2,Nv=1/na(12),kF=(Nv/2+1)*3,CF={draw(e,t){const r=na(t/kF),n=r/2,a=r*Nv,i=n,s=r*Nv+r,o=-i,c=s;e.moveTo(n,a),e.lineTo(i,s),e.lineTo(o,c),e.lineTo(vn*n-yn*a,yn*n+vn*a),e.lineTo(vn*i-yn*s,yn*i+vn*s),e.lineTo(vn*o-yn*c,yn*o+vn*c),e.lineTo(vn*n+yn*a,vn*a-yn*n),e.lineTo(vn*i+yn*s,vn*s-yn*i),e.lineTo(vn*o+yn*c,vn*c-yn*o),e.closePath()}};function EF(e,t){let r=null,n=L0(a);e=typeof e=="function"?e:ot(e||B0),t=typeof t=="function"?t:ot(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:ot(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:ot(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function yf(){}function xf(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function DE(e){this._context=e}DE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function PF(e){return new DE(e)}function IE(e){this._context=e}IE.prototype={areaStart:yf,areaEnd:yf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:xf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function OF(e){return new IE(e)}function RE(e){this._context=e}RE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:xf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function AF(e){return new RE(e)}function ME(e){this._context=e}ME.prototype={areaStart:yf,areaEnd:yf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function TF(e){return new ME(e)}function T_(e){return e<0?-1:1}function D_(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),s=(r-e._y1)/(a||n<0&&-0),o=(i*a+s*n)/(n+a);return(T_(i)+T_(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(o))||0}function I_(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Mm(e,t,r){var n=e._x0,a=e._y0,i=e._x1,s=e._y1,o=(i-n)/3;e._context.bezierCurveTo(n+o,a+o*t,i-o,s-o*r,i,s)}function bf(e){this._context=e}bf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Mm(this,this._t0,I_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Mm(this,I_(this,r=D_(this,e,t)),r);break;default:Mm(this,this._t0,r=D_(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function $E(e){this._context=new LE(e)}($E.prototype=Object.create(bf.prototype)).point=function(e,t){bf.prototype.point.call(this,t,e)};function LE(e){this._context=e}LE.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function DF(e){return new bf(e)}function IF(e){return new $E(e)}function FE(e){this._context=e}FE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=R_(e),a=R_(t),i=0,s=1;s<r;++i,++s)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function R_(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),s=new Array(r);for(a[0]=0,i[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,s[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,s[t]-=n*s[t-1];for(a[r-1]=s[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(s[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function RF(e){return new FE(e)}function Kh(e,t){this._context=e,this._t=t}Kh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function MF(e){return new Kh(e,.5)}function $F(e){return new Kh(e,0)}function LF(e){return new Kh(e,1)}function Mo(e,t){if((s=e.length)>1)for(var r=1,n,a,i=e[t[0]],s,o=i.length;r<s;++r)for(a=i,i=e[t[r]],n=0;n<o;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function kv(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function FF(e,t){return e[t]}function BF(e){const t=[];return t.key=e,t}function UF(){var e=ot([]),t=kv,r=Mo,n=FF;function a(i){var s=Array.from(e.apply(this,arguments),BF),o,c=s.length,u=-1,d;for(const f of i)for(o=0,++u;o<c;++o)(s[o][u]=[0,+n(f,s[o].key,u,i)]).data=f;for(o=0,d=F0(t(s));o<c;++o)s[d[o]].index=o;return r(s,d),s}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:ot(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:ot(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?kv:typeof i=="function"?i:ot(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Mo,a):r},a}function zF(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,s;a<i;++a){for(s=r=0;r<n;++r)s+=e[r][a][1]||0;if(s)for(r=0;r<n;++r)e[r][a][1]/=s}Mo(e,t)}}function WF(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var s=0,o=0;s<a;++s)o+=e[s][r][1]||0;n[r][1]+=n[r][0]=-o/2}Mo(e,t)}}function KF(e,t){if(!(!((s=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,s;n<i;++n){for(var o=0,c=0,u=0;o<s;++o){for(var d=e[t[o]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,g=0;g<o;++g){var y=e[t[g]],v=y[n][1]||0,x=y[n-1][1]||0;m+=v-x}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Mo(e,t)}}var Hh={},BE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(BE);var U0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(U0);var qh={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(qh);var Vh={},UE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(UE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UE,r=qh;function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=t.toString(a);const i=[],s=a.length;if(s===0)return i;let o=0,c="",u="",d=!1;for(a.charCodeAt(0)===46&&(i.push(""),o++);o<s;){const f=a[o];u?f==="\\"&&o+1<s?(o++,c+=a[o]):f===u?u="":c+=f:d?f==='"'||f==="'"?u=f:f==="]"?(d=!1,i.push(c),c=""):c+=f:f==="["?(d=!0,c&&(i.push(c),c="")):f==="."?c&&(i.push(c),c=""):c+=f,o++}return c&&i.push(c),i}e.toPath=n})(Vh);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BE,r=U0,n=qh,a=Vh;function i(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?r.isDeepKey(c)?i(o,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=o[c];return d===void 0?u:d}default:{if(Array.isArray(c))return s(o,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?u:d}}}function s(o,c,u){if(c.length===0)return u;let d=o;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=i})(Hh);var HF=Hh.get;const $o=Ga(HF);var Wr=e=>e===0?0:e>0?1:-1,Zn=e=>typeof e=="number"&&e!=+e,Ua=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,we=e=>(typeof e=="number"||e instanceof Number)&&!Zn(e),ga=e=>we(e)||typeof e=="string",qF=0,kc=e=>{var t=++qF;return"".concat(e||"").concat(t)},ea=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!we(t)&&typeof t!="string")return n;var i;if(Ua(t)){if(r==null)return n;var s=t.indexOf("%");i=r*parseFloat(t.slice(0,s))/100}else i=+t;return Zn(i)&&(i=n),a&&r!=null&&i>r&&(i=r),i},zE=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Ot(e,t,r){return we(e)&&we(t)?e+r*(t-e):t}function WE(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):$o(n,t))===r)}var yt=e=>e===null||typeof e>"u",Zc=e=>yt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function VF(e){return e!=null}function al(){}var GF=["type","size","sizeType"];function Cv(){return Cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cv.apply(null,arguments)}function M_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M_(Object(r),!0).forEach(function(n){YF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YF(e,t,r){return(t=XF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XF(e){var t=JF(e,"string");return typeof t=="symbol"?t:t+""}function JF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QF(e,t){if(e==null)return{};var r,n,a=ZF(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ZF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var KE={symbolCircle:B0,symbolCross:vF,symbolDiamond:xF,symbolSquare:bF,symbolStar:SF,symbolTriangle:NF,symbolWye:CF},eB=Math.PI/180,tB=e=>{var t="symbol".concat(Zc(e));return KE[t]||B0},rB=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*eB;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},nB=(e,t)=>{KE["symbol".concat(Zc(e))]=t},HE=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=QF(e,GF),i=$_($_({},a),{},{type:t,size:r,sizeType:n}),s="circle";typeof t=="string"&&(s=t);var o=()=>{var h=tB(s),m=EF().type(h).size(rB(r,n,s)),g=m();if(g!==null)return g},{className:c,cx:u,cy:d}=i,f=Tr(i);return we(u)&&we(d)&&we(r)?p.createElement("path",Cv({},f,{className:rt("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:o()})):null};HE.registerSymbol=nB;var qE=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,z0=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(p.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{$0(a)&&(n[a]=i=>r[a](r,i))}),n},aB=(e,t,r)=>n=>(e(t,r,n),null),W0=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var i=e[a];$0(a)&&typeof i=="function"&&(n||(n={}),n[a]=aB(i,t,r))}),n};function L_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function iB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L_(Object(r),!0).forEach(function(n){sB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sB(e,t,r){return(t=oB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oB(e){var t=lB(e,"string");return typeof t=="symbol"?t:t+""}function lB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mr(e,t){var r=iB({},e),n=t,a=Object.keys(t),i=a.reduce((s,o)=>(s[o]===void 0&&n[o]!==void 0&&(s[o]=n[o]),s),r);return i}var VE={},GE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let i=0;i<r.length;i++){const s=r[i],o=n(s);a.has(o)||a.set(o,s)}return Array.from(a.values())}e.uniqBy=t})(GE);var K0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(K0);var YE={},Gh={},XE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(XE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XE;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Gh);var JE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(JE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Gh,r=JE;function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(YE);var QE={},ZE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Hh;function r(n){return function(a){return t.get(a,n)}}e.property=r})(ZE);var eP={},H0={},tP={},q0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(q0);var V0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(V0);var G0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(G0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=q0,r=V0,n=G0;function a(d,f,h){return typeof h!="function"?a(d,f,()=>{}):i(d,f,function m(g,y,v,x,w,b){const _=h(g,y,v,x,w,b);return _!==void 0?!!_:i(g,y,m,b)},new Map)}function i(d,f,h,m){if(f===d)return!0;switch(typeof f){case"object":return s(d,f,h,m);case"function":return Object.keys(f).length>0?i(d,{...f},h,m):n.eq(d,f);default:return t.isObject(d)?typeof f=="string"?f==="":!0:n.eq(d,f)}}function s(d,f,h,m){if(f==null)return!0;if(Array.isArray(f))return c(d,f,h,m);if(f instanceof Map)return o(d,f,h,m);if(f instanceof Set)return u(d,f,h,m);const g=Object.keys(f);if(d==null)return g.length===0;if(g.length===0)return!0;if(m!=null&&m.has(f))return m.get(f)===d;m==null||m.set(f,d);try{for(let y=0;y<g.length;y++){const v=g[y];if(!r.isPrimitive(d)&&!(v in d)||f[v]===void 0&&d[v]!==void 0||f[v]===null&&d[v]!==null||!h(d[v],f[v],v,d,f,m))return!1}return!0}finally{m==null||m.delete(f)}}function o(d,f,h,m){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[g,y]of f.entries()){const v=d.get(g);if(h(v,y,g,d,f,m)===!1)return!1}return!0}function c(d,f,h,m){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const g=new Set;for(let y=0;y<f.length;y++){const v=f[y];let x=!1;for(let w=0;w<d.length;w++){if(g.has(w))continue;const b=d[w];let _=!1;if(h(b,v,y,d,f,m)&&(_=!0),_){g.add(w),x=!0;break}}if(!x)return!1}return!0}function u(d,f,h,m){return f.size===0?!0:d instanceof Set?c([...d],[...f],h,m):!1}e.isMatchWith=a,e.isSetMatch=u})(tP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tP;function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r})(H0);var rP={},Y0={},nP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(nP);var X0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(X0);var J0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",i="[object Arguments]",s="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",m="[object Object]",g="[object Error]",y="[object DataView]",v="[object Uint8Array]",x="[object Uint8ClampedArray]",w="[object Uint16Array]",b="[object Uint32Array]",_="[object BigUint64Array]",j="[object Int8Array]",S="[object Int16Array]",N="[object Int32Array]",k="[object BigInt64Array]",C="[object Float32Array]",E="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=k,e.bigUint64ArrayTag=_,e.booleanTag=a,e.dataViewTag=y,e.dateTag=o,e.errorTag=g,e.float32ArrayTag=C,e.float64ArrayTag=E,e.functionTag=f,e.int16ArrayTag=S,e.int32ArrayTag=N,e.int8ArrayTag=j,e.mapTag=c,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=s,e.uint16ArrayTag=w,e.uint32ArrayTag=b,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=x})(J0);var aP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(aP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nP,r=X0,n=J0,a=V0,i=aP;function s(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,m=new Map,g=void 0){const y=g==null?void 0:g(d,f,h,m);if(y!==void 0)return y;if(a.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const v=new Array(d.length);m.set(d,v);for(let x=0;x<d.length;x++)v[x]=o(d[x],x,h,m,g);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;m.set(d,v);for(const[x,w]of d)v.set(x,o(w,x,h,m,g));return v}if(d instanceof Set){const v=new Set;m.set(d,v);for(const x of d)v.add(o(x,void 0,h,m,g));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,v);for(let x=0;x<d.length;x++)v[x]=o(d[x],x,h,m,g);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,v),c(v,d,h,m,g),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(typeof Blob<"u"&&d instanceof Blob){const v=new Blob([d],{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Error){const v=new d.constructor;return m.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,c(v,d,h,m,g),v}if(d instanceof Boolean){const v=new Boolean(d.valueOf());return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Number){const v=new Number(d.valueOf());return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof String){const v=new String(d.valueOf());return m.set(d,v),c(v,d,h,m,g),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return m.set(d,v),c(v,d,h,m,g),v}return d}function c(d,f,h=d,m,g){const y=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<y.length;v++){const x=y[v],w=Object.getOwnPropertyDescriptor(d,x);(w==null||w.writable)&&(d[x]=o(f[x],x,h,m,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=s,e.cloneDeepWithImpl=o,e.copyProperties=c})(Y0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Y0;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(rP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H0,r=rP;function n(a){return a=r.cloneDeep(a),i=>t.isMatch(i,a)}e.matches=n})(eP);var iP={},sP={},oP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Y0,r=J0;function n(a,i){return t.cloneDeepWith(a,(s,o,c,u)=>{const d=i==null?void 0:i(s,o,c,u);if(d!==void 0)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(oP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oP;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(sP);var lP={},Q0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(Q0);var cP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X0;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(cP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U0,r=Q0,n=cP,a=Vh;function i(s,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&(s==null?void 0:s[o])==null?c=a.toPath(o):c=[o],c.length===0)return!1;let u=s;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=i})(lP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H0,r=qh,n=sP,a=Hh,i=lP;function s(o,c){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,o);return d===void 0?i.has(u,o):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=s})(iP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=K0,r=ZE,n=eP,a=iP;function i(s){if(s==null)return t.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?a.matchesProperty(s[0],s[1]):n.matches(s);case"string":case"symbol":case"number":return r.property(s)}}e.iteratee=i})(QE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GE,r=K0,n=YE,a=QE;function i(s,o=r.identity){return n.isArrayLikeObject(s)?t.uniqBy(Array.from(s),a.iteratee(o)):[]}e.uniqBy=i})(VE);var cB=VE.uniqBy;const F_=Ga(cB);function uB(e,t,r){return t===!0?F_(e,r):typeof t=="function"?F_(e,t):e}var uP={exports:{}},dP={},fP={exports:{}},hP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lo=p;function dB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fB=typeof Object.is=="function"?Object.is:dB,hB=Lo.useState,pB=Lo.useEffect,mB=Lo.useLayoutEffect,gB=Lo.useDebugValue;function vB(e,t){var r=t(),n=hB({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return mB(function(){a.value=r,a.getSnapshot=t,$m(a)&&i({inst:a})},[e,r,t]),pB(function(){return $m(a)&&i({inst:a}),e(function(){$m(a)&&i({inst:a})})},[e]),gB(r),r}function $m(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!fB(e,r)}catch{return!0}}function yB(e,t){return t()}var xB=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?yB:vB;hP.useSyncExternalStore=Lo.useSyncExternalStore!==void 0?Lo.useSyncExternalStore:xB;fP.exports=hP;var bB=fP.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yh=p,wB=bB;function _B(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jB=typeof Object.is=="function"?Object.is:_B,SB=wB.useSyncExternalStore,NB=Yh.useRef,kB=Yh.useEffect,CB=Yh.useMemo,EB=Yh.useDebugValue;dP.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=NB(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=CB(function(){function c(m){if(!u){if(u=!0,d=m,m=n(m),a!==void 0&&s.hasValue){var g=s.value;if(a(g,m))return f=g}return f=m}if(g=f,jB(d,m))return g;var y=n(m);return a!==void 0&&a(g,y)?(d=m,g):(d=m,f=y)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,a]);var o=SB(e,i[0],i[1]);return kB(function(){s.hasValue=!0,s.value=o},[o]),EB(o),o};uP.exports=dP;var PB=uP.exports,Z0=p.createContext(null),OB=e=>e,$t=()=>{var e=p.useContext(Z0);return e?e.store.dispatch:OB},Ed=()=>{},AB=()=>Ed,TB=(e,t)=>e===t;function Se(e){var t=p.useContext(Z0);return PB.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:AB,t?t.store.getState:Ed,t?t.store.getState:Ed,t?e:Ed,TB)}function DB(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function IB(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function RB(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var B_=e=>Array.isArray(e)?e:[e];function MB(e){const t=Array.isArray(e[0])?e[0]:e;return RB(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function $B(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var LB=class{constructor(e){this.value=e}deref(){return this.value}},FB=typeof WeakRef<"u"?WeakRef:LB,BB=0,U_=1;function Xu(){return{s:BB,v:void 0,o:null,p:null}}function pP(e,t={}){let r=Xu();const{resultEqualityCheck:n}=t;let a,i=0;function s(){var f;let o=r;const{length:c}=arguments;for(let h=0,m=c;h<m;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let y=o.o;y===null&&(o.o=y=new WeakMap);const v=y.get(g);v===void 0?(o=Xu(),y.set(g,o)):o=v}else{let y=o.p;y===null&&(o.p=y=new Map);const v=y.get(g);v===void 0?(o=Xu(),y.set(g,o)):o=v}}const u=o;let d;if(o.s===U_)d=o.v;else if(d=e.apply(null,arguments),i++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,i!==0&&i--),a=typeof d=="object"&&d!==null||typeof d=="function"?new FB(d):d}return u.s=U_,u.v=d,d}return s.clearCache=()=>{r=Xu(),s.resetResultsCount()},s.resultsCount=()=>i,s.resetResultsCount=()=>{i=0},s}function UB(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let i=0,s=0,o,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),DB(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:m=pP,argsMemoizeOptions:g=[]}=d,y=B_(h),v=B_(g),x=MB(a),w=f(function(){return i++,u.apply(null,arguments)},...y),b=m(function(){s++;const j=$B(x,arguments);return o=w.apply(null,j),o},...v);return Object.assign(b,{resultFunc:u,memoizedResultFunc:w,dependencies:x,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var U=UB(pP),zB=Object.assign((e,t=U)=>{IB(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((s,o,c)=>(s[r[c]]=o,s),{}))},{withTypes:()=>zB}),mP={},gP={},vP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,i)=>{if(n!==a){const s=t(n),o=t(a);if(s===o&&s===0){if(n<a)return i==="desc"?1:-1;if(n>a)return i==="desc"?-1:1}return i==="desc"?o-s:s-o}return 0};e.compareValues=r})(vP);var yP={},ex={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(ex);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ex,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,s){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||s!=null&&Object.hasOwn(s,i)}e.isKey=a})(yP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vP,r=yP,n=Vh;function a(i,s,o,c){if(i==null)return[];o=c?void 0:o,Array.isArray(i)||(i=Object.values(i)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(m=>String(m));const u=(m,g)=>{let y=m;for(let v=0;v<g.length&&y!=null;++v)y=y[g[v]];return y},d=(m,g)=>g==null||m==null?g:typeof m=="object"&&"key"in m?Object.hasOwn(g,m.key)?g[m.key]:u(g,m.path):typeof m=="function"?m(g):Array.isArray(m)?u(g,m):typeof g=="object"?g[m]:g,f=s.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return i.map(m=>({original:m,criteria:f.map(g=>d(g,m))})).slice().sort((m,g)=>{for(let y=0;y<f.length;y++){const v=t.compareValues(m.criteria[y],g.criteria[y],o[y]);if(v!==0)return v}return 0}).map(m=>m.original)}e.orderBy=a})(gP);var xP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],i=Math.floor(n),s=(o,c)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&c<i?s(d,c+1):a.push(d)}};return s(r,0),a}e.flatten=t})(xP);var tx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Q0,r=Gh,n=q0,a=G0;function i(s,o,c){return n.isObject(c)&&(typeof o=="number"&&r.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?a.eq(c[o],s):!1}e.isIterateeCall=i})(tx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gP,r=xP,n=tx;function a(i,...s){const o=s.length;return o>1&&n.isIterateeCall(i,s[0],s[1])?s=[]:o>2&&n.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),t.orderBy(i,r.flatten(s),["asc"])}e.sortBy=a})(mP);var WB=mP.sortBy;const Xh=Ga(WB);var bP=e=>e.legend.settings,KB=e=>e.legend.size,HB=e=>e.legend.payload;U([HB,bP],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Xh(n,r):n});var Ju=1;function qB(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=p.useState({height:0,left:0,top:0,width:0}),n=p.useCallback(a=>{if(a!=null){var i=a.getBoundingClientRect(),s={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(s.height-t.height)>Ju||Math.abs(s.left-t.left)>Ju||Math.abs(s.top-t.top)>Ju||Math.abs(s.width-t.width)>Ju)&&r({height:s.height,left:s.left,top:s.top,width:s.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function hr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var VB=typeof Symbol=="function"&&Symbol.observable||"@@observable",z_=VB,Lm=()=>Math.random().toString(36).substring(7).split("").join("."),GB={INIT:`@@redux/INIT${Lm()}`,REPLACE:`@@redux/REPLACE${Lm()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Lm()}`},wf=GB;function rx(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function wP(e,t,r){if(typeof e!="function")throw new Error(hr(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(hr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(hr(1));return r(wP)(e,t)}let n=e,a=t,i=new Map,s=i,o=0,c=!1;function u(){s===i&&(s=new Map,i.forEach((v,x)=>{s.set(x,v)}))}function d(){if(c)throw new Error(hr(3));return a}function f(v){if(typeof v!="function")throw new Error(hr(4));if(c)throw new Error(hr(5));let x=!0;u();const w=o++;return s.set(w,v),function(){if(x){if(c)throw new Error(hr(6));x=!1,u(),s.delete(w),i=null}}}function h(v){if(!rx(v))throw new Error(hr(7));if(typeof v.type>"u")throw new Error(hr(8));if(typeof v.type!="string")throw new Error(hr(17));if(c)throw new Error(hr(9));try{c=!0,a=n(a,v)}finally{c=!1}return(i=s).forEach(w=>{w()}),v}function m(v){if(typeof v!="function")throw new Error(hr(10));n=v,h({type:wf.REPLACE})}function g(){const v=f;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(hr(11));function w(){const _=x;_.next&&_.next(d())}return w(),{unsubscribe:v(w)}},[z_](){return this}}}return h({type:wf.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:m,[z_]:g}}function YB(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:wf.INIT})>"u")throw new Error(hr(12));if(typeof r(void 0,{type:wf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(hr(13))})}function _P(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const s=t[i];typeof e[s]=="function"&&(r[s]=e[s])}const n=Object.keys(r);let a;try{YB(r)}catch(i){a=i}return function(s={},o){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],m=s[f],g=h(m,o);if(typeof g>"u")throw o&&o.type,new Error(hr(14));u[f]=g,c=c||g!==m}return c=c||n.length!==Object.keys(s).length,c?u:s}}function _f(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function XB(...e){return t=>(r,n)=>{const a=t(r,n);let i=()=>{throw new Error(hr(15))};const s={getState:a.getState,dispatch:(c,...u)=>i(c,...u)},o=e.map(c=>c(s));return i=_f(...o)(a.dispatch),{...a,dispatch:i}}}function jP(e){return rx(e)&&"type"in e&&typeof e.type=="string"}var SP=Symbol.for("immer-nothing"),W_=Symbol.for("immer-draftable"),pn=Symbol.for("immer-state");function Kn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Cc=Object.getPrototypeOf;function Ns(e){return!!e&&!!e[pn]}function za(e){var t;return e?NP(e)||Array.isArray(e)||!!e[W_]||!!((t=e.constructor)!=null&&t[W_])||eu(e)||Qh(e):!1}var JB=Object.prototype.constructor.toString(),K_=new WeakMap;function NP(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=K_.get(r);return n===void 0&&(n=Function.toString.call(r),K_.set(r,n)),n===JB}function jf(e,t,r=!0){Jh(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function Jh(e){const t=e[pn];return t?t.type_:Array.isArray(e)?1:eu(e)?2:Qh(e)?3:0}function Ev(e,t){return Jh(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function kP(e,t,r){const n=Jh(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function QB(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function eu(e){return e instanceof Map}function Qh(e){return e instanceof Set}function Zi(e){return e.copy_||e.base_}function Pv(e,t){if(eu(e))return new Map(e);if(Qh(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=NP(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[pn];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){const s=a[i],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(Cc(e),n)}else{const n=Cc(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function nx(e,t=!1){return Zh(e)||Ns(e)||!za(e)||(Jh(e)>1&&Object.defineProperties(e,{set:Qu,add:Qu,clear:Qu,delete:Qu}),Object.freeze(e),t&&Object.values(e).forEach(r=>nx(r,!0))),e}function ZB(){Kn(2)}var Qu={value:ZB};function Zh(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var eU={};function ks(e){const t=eU[e];return t||Kn(0,e),t}var Ec;function CP(){return Ec}function tU(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function H_(e,t){t&&(ks("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ov(e){Av(e),e.drafts_.forEach(rU),e.drafts_=null}function Av(e){e===Ec&&(Ec=e.parent_)}function q_(e){return Ec=tU(Ec,e)}function rU(e){const t=e[pn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function V_(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[pn].modified_&&(Ov(t),Kn(4)),za(e)&&(e=Sf(t,e),t.parent_||Nf(t,e)),t.patches_&&ks("Patches").generateReplacementPatches_(r[pn].base_,e,t.patches_,t.inversePatches_)):e=Sf(t,r,[]),Ov(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==SP?e:void 0}function Sf(e,t,r){if(Zh(t))return t;const n=e.immer_.shouldUseStrictIteration(),a=t[pn];if(!a)return jf(t,(i,s)=>G_(e,a,t,i,s,r),n),t;if(a.scope_!==e)return t;if(!a.modified_)return Nf(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const i=a.copy_;let s=i,o=!1;a.type_===3&&(s=new Set(i),i.clear(),o=!0),jf(s,(c,u)=>G_(e,a,i,c,u,r,o),n),Nf(e,i,!1),r&&e.patches_&&ks("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function G_(e,t,r,n,a,i,s){if(a==null||typeof a!="object"&&!s)return;const o=Zh(a);if(!(o&&!s)){if(Ns(a)){const c=i&&t&&t.type_!==3&&!Ev(t.assigned_,n)?i.concat(n):void 0,u=Sf(e,a,c);if(kP(r,n,u),Ns(u))e.canAutoFreeze_=!1;else return}else s&&r.add(a);if(za(a)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===a&&o)return;Sf(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(eu(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Nf(e,a)}}}function Nf(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&nx(t,r)}function nU(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:CP(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=ax;r&&(a=[n],i=Pc);const{revoke:s,proxy:o}=Proxy.revocable(a,i);return n.draft_=o,n.revoke_=s,o}var ax={get(e,t){if(t===pn)return e;const r=Zi(e);if(!Ev(r,t))return aU(e,r,t);const n=r[t];return e.finalized_||!za(n)?n:n===Fm(e.base_,t)?(Bm(e),e.copy_[t]=Dv(n,e)):n},has(e,t){return t in Zi(e)},ownKeys(e){return Reflect.ownKeys(Zi(e))},set(e,t,r){const n=EP(Zi(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=Fm(Zi(e),t),i=a==null?void 0:a[pn];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(QB(r,a)&&(r!==void 0||Ev(e.base_,t)))return!0;Bm(e),Tv(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Fm(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Bm(e),Tv(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Zi(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Kn(11)},getPrototypeOf(e){return Cc(e.base_)},setPrototypeOf(){Kn(12)}},Pc={};jf(ax,(e,t)=>{Pc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Pc.deleteProperty=function(e,t){return Pc.set.call(this,e,t,void 0)};Pc.set=function(e,t,r){return ax.set.call(this,e[0],t,r,e[0])};function Fm(e,t){const r=e[pn];return(r?Zi(r):e)[t]}function aU(e,t,r){var a;const n=EP(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function EP(e,t){if(!(t in e))return;let r=Cc(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Cc(r)}}function Tv(e){e.modified_||(e.modified_=!0,e.parent_&&Tv(e.parent_))}function Bm(e){e.copy_||(e.copy_=Pv(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var iU=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const s=this;return function(c=i,...u){return s.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Kn(6),n!==void 0&&typeof n!="function"&&Kn(7);let a;if(za(t)){const i=q_(this),s=Dv(t,void 0);let o=!0;try{a=r(s),o=!1}finally{o?Ov(i):Av(i)}return H_(i,n),V_(a,i)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===SP&&(a=void 0),this.autoFreeze_&&nx(a,!0),n){const i=[],s=[];ks("Patches").generateReplacementPatches_(t,a,i,s),n(i,s)}return a}else Kn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(s,...o)=>this.produceWithPatches(s,c=>t(c,...o));let n,a;return[this.produce(t,r,(s,o)=>{n=s,a=o}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){za(e)||Kn(8),Ns(e)&&(e=Aa(e));const t=q_(this),r=Dv(e,void 0);return r[pn].isManual_=!0,Av(t),r}finishDraft(e,t){const r=e&&e[pn];(!r||!r.isManual_)&&Kn(9);const{scope_:n}=r;return H_(n,t),V_(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=ks("Patches").applyPatches_;return Ns(e)?n(e,t):this.produce(e,a=>n(a,t))}};function Dv(e,t){const r=eu(e)?ks("MapSet").proxyMap_(e,t):Qh(e)?ks("MapSet").proxySet_(e,t):nU(e,t);return(t?t.scope_:CP()).drafts_.push(r),r}function Aa(e){return Ns(e)||Kn(10,e),PP(e)}function PP(e){if(!za(e)||Zh(e))return e;const t=e[pn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Pv(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Pv(e,!0);return jf(r,(a,i)=>{kP(r,a,PP(i))},n),t&&(t.finalized_=!1),r}var Iv=new iU,OP=Iv.produce,sU=Iv.setUseStrictIteration.bind(Iv);function AP(e){return({dispatch:r,getState:n})=>a=>i=>typeof i=="function"?i(r,n,e):a(i)}var oU=AP(),lU=AP,cU=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?_f:_f.apply(null,arguments)};function An(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(dn(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>jP(n)&&n.type===e,r}var TP=class Ll extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Ll.prototype)}static get[Symbol.species](){return Ll}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Ll(...t[0].concat(this)):new Ll(...t.concat(this))}};function Y_(e){return za(e)?OP(e,()=>{}):e}function Zu(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function uU(e){return typeof e=="boolean"}var dU=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t??{};let s=new TP;return r&&(uU(r)?s.push(oU):s.push(lU(r.extraArgument))),s},DP="RTK_autoBatch",qt=()=>e=>({payload:e,meta:{[DP]:!0}}),X_=e=>t=>{setTimeout(t,e)},IP=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,i=!1,s=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:X_(10):e.type==="callback"?e.queueNotification:X_(e.timeout),u=()=>{s=!1,i&&(i=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[DP]),i=!a,i&&(s||(s=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},fU=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new TP(e);return n&&a.push(IP(typeof n=="object"?n:void 0)),a};function hU(e){const t=dU(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:i=void 0,enhancers:s=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(rx(r))o=_P(r);else throw new Error(dn(1));let c;typeof n=="function"?c=n(t):c=t();let u=_f;a&&(u=cU({trace:!1,...typeof a=="object"&&a}));const d=XB(...c),f=fU(d);let h=typeof s=="function"?s(f):f();const m=u(...h);return wP(o,i,m)}function RP(e){const t={},r=[];let n;const a={addCase(i,s){const o=typeof i=="string"?i:i.type;if(!o)throw new Error(dn(28));if(o in t)throw new Error(dn(29));return t[o]=s,a},addAsyncThunk(i,s){return s.pending&&(t[i.pending.type]=s.pending),s.rejected&&(t[i.rejected.type]=s.rejected),s.fulfilled&&(t[i.fulfilled.type]=s.fulfilled),s.settled&&r.push({matcher:i.settled,reducer:s.settled}),a},addMatcher(i,s){return r.push({matcher:i,reducer:s}),a},addDefaultCase(i){return n=i,a}};return e(a),[t,r,n]}sU(!1);function pU(e){return typeof e=="function"}function mU(e,t){let[r,n,a]=RP(t),i;if(pU(e))i=()=>Y_(e());else{const o=Y_(e);i=()=>o}function s(o=i(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(Ns(d)){const m=f(d,c);return m===void 0?d:m}else{if(za(d))return OP(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return s.getInitialState=i,s}var gU="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",vU=(e=21)=>{let t="",r=e;for(;r--;)t+=gU[Math.random()*64|0];return t},yU=Symbol.for("rtk-slice-createasyncthunk");function xU(e,t){return`${e}/${t}`}function bU({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[yU];return function(a){const{name:i,reducerPath:s=i}=a;if(!i)throw new Error(dn(11));const o=(typeof a.reducers=="function"?a.reducers(_U()):a.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(_,j){const S=typeof _=="string"?_:_.type;if(!S)throw new Error(dn(12));if(S in u.sliceCaseReducersByType)throw new Error(dn(13));return u.sliceCaseReducersByType[S]=j,d},addMatcher(_,j){return u.sliceMatchers.push({matcher:_,reducer:j}),d},exposeAction(_,j){return u.actionCreators[_]=j,d},exposeCaseReducer(_,j){return u.sliceCaseReducersByName[_]=j,d}};c.forEach(_=>{const j=o[_],S={reducerName:_,type:xU(i,_),createNotation:typeof a.reducers=="function"};SU(j)?kU(S,j,d,t):jU(S,j,d)});function f(){const[_={},j=[],S=void 0]=typeof a.extraReducers=="function"?RP(a.extraReducers):[a.extraReducers],N={..._,...u.sliceCaseReducersByType};return mU(a.initialState,k=>{for(let C in N)k.addCase(C,N[C]);for(let C of u.sliceMatchers)k.addMatcher(C.matcher,C.reducer);for(let C of j)k.addMatcher(C.matcher,C.reducer);S&&k.addDefaultCase(S)})}const h=_=>_,m=new Map,g=new WeakMap;let y;function v(_,j){return y||(y=f()),y(_,j)}function x(){return y||(y=f()),y.getInitialState()}function w(_,j=!1){function S(k){let C=k[_];return typeof C>"u"&&j&&(C=Zu(g,S,x)),C}function N(k=h){const C=Zu(m,j,()=>new WeakMap);return Zu(C,k,()=>{const E={};for(const[P,A]of Object.entries(a.selectors??{}))E[P]=wU(A,k,()=>Zu(g,k,x),j);return E})}return{reducerPath:_,getSelectors:N,get selectors(){return N(S)},selectSlice:S}}const b={name:i,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:x,...w(s),injectInto(_,{reducerPath:j,...S}={}){const N=j??s;return _.inject({reducerPath:N,reducer:v},S),{...b,...w(N,!0)}}};return b}}function wU(e,t,r,n){function a(i,...s){let o=t(i);return typeof o>"u"&&n&&(o=r()),e(o,...s)}return a.unwrapped=e,a}var Gr=bU();function _U(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function jU({type:e,reducerName:t,createNotation:r},n,a){let i,s;if("reducer"in n){if(r&&!NU(n))throw new Error(dn(17));i=n.reducer,s=n.prepare}else i=n;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,s?An(e,s):An(e))}function SU(e){return e._reducerDefinitionType==="asyncThunk"}function NU(e){return e._reducerDefinitionType==="reducerWithPrepare"}function kU({type:e,reducerName:t},r,n,a){if(!a)throw new Error(dn(18));const{payloadCreator:i,fulfilled:s,pending:o,rejected:c,settled:u,options:d}=r,f=a(e,i,d);n.exposeAction(t,f),s&&n.addCase(f.fulfilled,s),o&&n.addCase(f.pending,o),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:s||ed,pending:o||ed,rejected:c||ed,settled:u||ed})}function ed(){}var CU="task",MP="listener",$P="completed",ix="cancelled",EU=`task-${ix}`,PU=`task-${$P}`,Rv=`${MP}-${ix}`,OU=`${MP}-${$P}`,ep=class{constructor(e){Hp(this,"name","TaskAbortError");Hp(this,"message");this.code=e,this.message=`${CU} ${ix} (reason: ${e})`}},sx=(e,t)=>{if(typeof e!="function")throw new TypeError(dn(32))},kf=()=>{},LP=(e,t=kf)=>(e.catch(t),e),FP=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ps=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ms=e=>{if(e.aborted){const{reason:t}=e;throw new ep(t)}};function BP(e,t){let r=kf;return new Promise((n,a)=>{const i=()=>a(new ep(e.reason));if(e.aborted){i();return}r=FP(e,i),t.finally(()=>r()).then(n,a)}).finally(()=>{r=kf})}var AU=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof ep?"cancelled":"rejected",error:r}}finally{t==null||t()}},Cf=e=>t=>LP(BP(e,t).then(r=>(ms(e),r))),UP=e=>{const t=Cf(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:No}=Object,J_={},tp="listenerMiddleware",TU=(e,t)=>{const r=n=>FP(e,()=>ps(n,e.reason));return(n,a)=>{sx(n);const i=new AbortController;r(i);const s=AU(async()=>{ms(e),ms(i.signal);const o=await n({pause:Cf(i.signal),delay:UP(i.signal),signal:i.signal});return ms(i.signal),o},()=>ps(i,PU));return a!=null&&a.autoJoin&&t.push(s.catch(kf)),{result:Cf(e)(s),cancel(){ps(i,EU)}}}},DU=(e,t)=>{const r=async(n,a)=>{ms(t);let i=()=>{};const o=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});i=()=>{d(),u()}})];a!=null&&o.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await BP(t,Promise.race(o));return ms(t),c}finally{i()}};return(n,a)=>LP(r(n,a))},zP=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:i}=e;if(t)a=An(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(dn(21));return sx(i),{predicate:a,type:t,effect:i}},WP=No(e=>{const{type:t,predicate:r,effect:n}=zP(e);return{id:vU(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(dn(22))}}},{withTypes:()=>WP}),Q_=(e,t)=>{const{type:r,effect:n,predicate:a}=zP(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===a)&&i.effect===n)},Mv=e=>{e.pending.forEach(t=>{ps(t,Rv)})},IU=(e,t)=>()=>{for(const r of t.keys())Mv(r);e.clear()},Z_=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},KP=No(An(`${tp}/add`),{withTypes:()=>KP}),RU=An(`${tp}/removeAll`),HP=No(An(`${tp}/remove`),{withTypes:()=>HP}),MU=(...e)=>{console.error(`${tp}/error`,...e)},tu=(e={})=>{const t=new Map,r=new Map,n=m=>{const g=r.get(m)??0;r.set(m,g+1)},a=m=>{const g=r.get(m)??1;g===1?r.delete(m):r.set(m,g-1)},{extra:i,onError:s=MU}=e;sx(s);const o=m=>(m.unsubscribe=()=>t.delete(m.id),t.set(m.id,m),g=>{m.unsubscribe(),g!=null&&g.cancelActive&&Mv(m)}),c=m=>{const g=Q_(t,m)??WP(m);return o(g)};No(c,{withTypes:()=>c});const u=m=>{const g=Q_(t,m);return g&&(g.unsubscribe(),m.cancelActive&&Mv(g)),!!g};No(u,{withTypes:()=>u});const d=async(m,g,y,v)=>{const x=new AbortController,w=DU(c,x.signal),b=[];try{m.pending.add(x),n(m),await Promise.resolve(m.effect(g,No({},y,{getOriginalState:v,condition:(_,j)=>w(_,j).then(Boolean),take:w,delay:UP(x.signal),pause:Cf(x.signal),extra:i,signal:x.signal,fork:TU(x.signal,b),unsubscribe:m.unsubscribe,subscribe:()=>{t.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((_,j,S)=>{_!==x&&(ps(_,Rv),S.delete(_))})},cancel:()=>{ps(x,Rv),m.pending.delete(x)},throwIfCancelled:()=>{ms(x.signal)}})))}catch(_){_ instanceof ep||Z_(s,_,{raisedBy:"effect"})}finally{await Promise.all(b),ps(x,OU),a(m),m.pending.delete(x)}},f=IU(t,r);return{middleware:m=>g=>y=>{if(!jP(y))return g(y);if(KP.match(y))return c(y.payload);if(RU.match(y)){f();return}if(HP.match(y))return u(y.payload);let v=m.getState();const x=()=>{if(v===J_)throw new Error(dn(23));return v};let w;try{if(w=g(y),t.size>0){const b=m.getState(),_=Array.from(t.values());for(const j of _){let S=!1;try{S=j.predicate(y,b,v)}catch(N){S=!1,Z_(s,N,{raisedBy:"predicate"})}S&&d(j,y,m,x)}}}finally{v=J_}return w},startListening:c,stopListening:u,clearListeners:f}};function dn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var $U={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},qP=Gr({name:"chartLayout",initialState:$U,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,a,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(a=t.payload.bottom)!==null&&a!==void 0?a:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:LU,setLayout:FU,setChartSize:BU,setScale:UU}=qP.actions,zU=qP.reducer;function VP(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function e1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function po(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e1(Object(r),!0).forEach(function(n){WU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WU(e,t,r){return(t=KU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KU(e){var t=HU(e,"string");return typeof t=="symbol"?t:t+""}function HU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ir(e,t,r){return yt(e)||yt(t)?r:ga(t)?$o(e,t,r):typeof t=="function"?t(e):r}var qU=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:i,verticalAlign:s,layout:o}=t;if((o==="vertical"||o==="horizontal"&&s==="middle")&&i!=="center"&&we(e[i]))return po(po({},e),{},{[i]:e[i]+(n||0)});if((o==="horizontal"||o==="vertical"&&i==="center")&&s!=="middle"&&we(e[s]))return po(po({},e),{},{[s]:e[s]+(a||0)})}return e},Li=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",GP=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var a,i,s=e.map(o=>(o.coordinate===t&&(a=!0),o.coordinate===r&&(i=!0),o.coordinate));return a||s.push(t),i||s.push(r),s},YP=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:i,scale:s,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:m}=e;if(!s)return null;var g=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,y=a==="category"&&s.bandwidth?s.bandwidth()/g:0;if(y=m==="angleAxis"&&i&&i.length>=2?Wr(i[0]-i[1])*2*y:y,f||h){var v=(f||h||[]).map((x,w)=>{var b=n?n.indexOf(x):x;return{coordinate:s(b)+y,value:x,offset:y,index:w}});return v.filter(x=>!Zn(x.coordinate))}return c&&u?u.map((x,w)=>({coordinate:s(x)+y,value:x,index:w,offset:y})):s.ticks&&d!=null?s.ticks(d).map((x,w)=>({coordinate:s(x)+y,value:x,offset:y,index:w})):s.domain().map((x,w)=>({coordinate:s(x)+y,value:n?n[x]:x,index:w,offset:y}))},t1=1e-4,VU=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-t1,i=Math.max(n[0],n[1])+t1,s=e(t[0]),o=e(t[r-1]);(s<a||s>i||o<a||o>i)&&e.domain([t[0],t[r-1]])}},GU=(e,t)=>{if(!t||t.length!==2||!we(t[0])||!we(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!we(e[0])||e[0]<r)&&(a[0]=r),(!we(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},YU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0,s=0;s<t;++s){var o=Zn(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=i,e[s][r][1]=i+o,i=e[s][r][1])}},XU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0;i<t;++i){var s=Zn(e[i][r][1])?e[i][r][0]:e[i][r][1];s>=0?(e[i][r][0]=a,e[i][r][1]=a+s,a=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},JU={sign:YU,expand:zF,none:Mo,silhouette:WF,wiggle:KF,positive:XU},QU=(e,t,r)=>{var n=JU[r],a=UF().keys(t).value((i,s)=>Number(ir(i,s,0))).order(kv).offset(n);return a(e)};function ZU(e){return e==null?void 0:String(e)}function r1(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:i,dataKey:s}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!yt(a[t.dataKey])){var o=WE(r,"value",a[t.dataKey]);if(o)return o.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=ir(a,yt(s)?t.dataKey:s);return yt(c)?null:t.scale(c)}var n1=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:i,index:s}=e;if(t.type==="category")return r[s]?r[s].coordinate+n:null;var o=ir(i,t.dataKey,t.scale.domain()[s]);return yt(o)?null:t.scale(o)-a/2+n},ez=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},tz=e=>{var t=e.flat(2).filter(we);return[Math.min(...t),Math.max(...t)]},rz=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],nz=(e,t,r)=>{if(e!=null)return rz(Object.keys(e).reduce((n,a)=>{var i=e[a],{stackedData:s}=i,o=s.reduce((c,u)=>{var d=VP(u,t,r),f=tz(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},a1=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,i1=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Fo=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=Xh(t,d=>d.coordinate),i=1/0,s=1,o=a.length;s<o;s++){var c=a[s],u=a[s-1];i=Math.min((c.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function s1(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:i}=e;return po(po({},t),{},{dataKey:r,payload:n,value:a,name:i})}function rp(e,t){if(e)return String(e);if(typeof t=="string")return t}var az=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},iz=(e,t)=>t==="centric"?e.angle:e.radius,Xa=e=>e.layout.width,Ja=e=>e.layout.height,sz=e=>e.layout.scale,XP=e=>e.layout.margin,np=U(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),ap=U(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),oz="data-recharts-item-index",lz="data-recharts-item-data-key",ru=60;function o1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function td(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o1(Object(r),!0).forEach(function(n){cz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cz(e,t,r){return(t=uz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uz(e){var t=dz(e,"string");return typeof t=="symbol"?t:t+""}function dz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fz=e=>e.brush.height;function hz(e){var t=ap(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:ru;return r+a}return r},0)}function pz(e){var t=ap(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:ru;return r+a}return r},0)}function mz(e){var t=np(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function gz(e){var t=np(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var sr=U([Xa,Ja,XP,fz,hz,pz,mz,gz,bP,KB],(e,t,r,n,a,i,s,o,c,u)=>{var d={left:(r.left||0)+a,right:(r.right||0)+i},f={top:(r.top||0)+s,bottom:(r.bottom||0)+o},h=td(td({},f),d),m=h.bottom;h.bottom+=n,h=qU(h,c,u);var g=e-h.left-h.right,y=t-h.top-h.bottom;return td(td({brushBottom:m},h),{},{width:Math.max(g,0),height:Math.max(y,0)})}),vz=U(sr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),ox=U(Xa,Ja,(e,t)=>({x:0,y:0,width:e,height:t})),yz=p.createContext(null),Nr=()=>p.useContext(yz)!=null,ip=e=>e.brush,sp=U([ip,sr,XP],(e,t,r)=>({height:e.height,x:we(e.x)?e.x:t.left,y:we(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:we(e.width)?e.width:t.width})),JP={},QP={},ZP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:i}={}){let s,o=null;const c=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),d=()=>{o!==null&&(r.apply(s,o),s=void 0,o=null)},f=()=>{u&&d(),y()};let h=null;const m=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},g=()=>{h!==null&&(clearTimeout(h),h=null)},y=()=>{g(),s=void 0,o=null},v=()=>{d()},x=function(...w){if(a!=null&&a.aborted)return;s=this,o=w;const b=h==null;m(),c&&b&&d()};return x.schedule=m,x.cancel=y,x.flush=v,a==null||a.addEventListener("abort",y,{once:!0}),x}e.debounce=t})(ZP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZP;function r(n,a=0,i={}){typeof i!="object"&&(i={});const{leading:s=!1,trailing:o=!0,maxWait:c}=i,u=Array(2);s&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...y){d=n.apply(this,y),f=null},a,{edges:u}),m=function(...y){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,y),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,y),d)},g=()=>(h.flush(),d);return m.cancel=h.cancel,m.flush=g,m}e.debounce=r})(QP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QP;function r(n,a=0,i={}){const{leading:s=!0,trailing:o=!0}=i;return t.debounce(n,a,{leading:s,maxWait:a,trailing:o})}e.throttle=r})(JP);var xz=JP.throttle;const bz=Ga(xz);var Ef=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},eO=(e,t,r)=>{var{width:n="100%",height:a="100%",aspect:i,maxHeight:s}=r,o=Ua(n)?e:Number(n),c=Ua(a)?t:Number(a);return i&&i>0&&(o?c=o/i:c&&(o=c*i),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:o,calculatedHeight:c}},wz={width:0,height:0,overflow:"visible"},_z={width:0,overflowX:"visible"},jz={height:0,overflowY:"visible"},Sz={},Nz=e=>{var{width:t,height:r}=e,n=Ua(t),a=Ua(r);return n&&a?wz:n?_z:a?jz:Sz};function kz(e){var{width:t,height:r,aspect:n}=e,a=t,i=r;return a===void 0&&i===void 0?(a="100%",i="100%"):a===void 0?a=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:a,height:i}}function Mt(e){return Number.isFinite(e)}function va(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function $v(){return $v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$v.apply(null,arguments)}function l1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function c1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l1(Object(r),!0).forEach(function(n){Cz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cz(e,t,r){return(t=Ez(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ez(e){var t=Pz(e,"string");return typeof t=="symbol"?t:t+""}function Pz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tO=p.createContext({width:-1,height:-1});function Oz(e){return va(e.width)&&va(e.height)}function rO(e){var{children:t,width:r,height:n}=e,a=p.useMemo(()=>({width:r,height:n}),[r,n]);return Oz(a)?p.createElement(tO.Provider,{value:a},t):null}var lx=()=>p.useContext(tO),Az=p.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:i,minWidth:s=0,minHeight:o,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:m,style:g={}}=e,y=p.useRef(null),v=p.useRef();v.current=m,p.useImperativeHandle(t,()=>y.current);var[x,w]=p.useState({containerWidth:n.width,containerHeight:n.height}),b=p.useCallback((k,C)=>{w(E=>{var P=Math.round(k),A=Math.round(C);return E.containerWidth===P&&E.containerHeight===A?E:{containerWidth:P,containerHeight:A}})},[]);p.useEffect(()=>{if(y.current==null||typeof ResizeObserver>"u")return al;var k=A=>{var H,{width:J,height:ee}=A[0].contentRect;b(J,ee),(H=v.current)===null||H===void 0||H.call(v,J,ee)};d>0&&(k=bz(k,d,{trailing:!0,leading:!1}));var C=new ResizeObserver(k),{width:E,height:P}=y.current.getBoundingClientRect();return b(E,P),C.observe(y.current),()=>{C.disconnect()}},[b,d]);var{containerWidth:_,containerHeight:j}=x;Ef(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:S,calculatedHeight:N}=eO(_,j,{width:a,height:i,aspect:r,maxHeight:c});return Ef(S!=null&&S>0||N!=null&&N>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,S,N,a,i,s,o,r),p.createElement("div",{id:f?"".concat(f):void 0,className:rt("recharts-responsive-container",h),style:c1(c1({},g),{},{width:a,height:i,minWidth:s,minHeight:o,maxHeight:c}),ref:y},p.createElement("div",{style:Nz({width:a,height:i})},p.createElement(rO,{width:S,height:N},u)))}),u1=p.forwardRef((e,t)=>{var r=lx();if(va(r.width)&&va(r.height))return e.children;var{width:n,height:a}=kz({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:s}=eO(void 0,void 0,{width:n,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return we(i)&&we(s)?p.createElement(rO,{width:i,height:s},e.children):p.createElement(Az,$v({},e,{width:n,height:a,ref:t}))});function nO(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var op=()=>{var e,t=Nr(),r=Se(vz),n=Se(sp),a=(e=Se(ip))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},Tz={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},aO=()=>{var e;return(e=Se(sr))!==null&&e!==void 0?e:Tz},iO=()=>Se(Xa),sO=()=>Se(Ja),Xe=e=>e.layout.layoutType,nu=()=>Se(Xe),Dz=()=>{var e=nu();return e!==void 0},lp=e=>{var t=$t(),r=Nr(),{width:n,height:a}=e,i=lx(),s=n,o=a;return i&&(s=i.width>0?i.width:n,o=i.height>0?i.height:a),p.useEffect(()=>{!r&&va(s)&&va(o)&&t(BU({width:s,height:o}))},[t,r,s,o]),null},Iz={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},oO=Gr({name:"legend",initialState:Iz,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:qt()},removeLegendPayload:{reducer(e,t){var r=Aa(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:qt()}}}),{setLegendSize:$ee,setLegendSettings:Lee,addLegendPayload:Rz,removeLegendPayload:Mz}=oO.actions,$z=oO.reducer;function Lv(){return Lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lv.apply(null,arguments)}function d1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Um(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d1(Object(r),!0).forEach(function(n){Lz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lz(e,t,r){return(t=Fz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fz(e){var t=Bz(e,"string");return typeof t=="symbol"?t:t+""}function Bz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uz(e){return Array.isArray(e)&&ga(e[0])&&ga(e[1])?e.join(" ~ "):e}var zz=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:i,formatter:s,itemSorter:o,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,m=()=>{if(i&&i.length){var j={padding:0,margin:0},S=(o?Xh(i,o):i).map((N,k)=>{if(N.type==="none")return null;var C=N.formatter||s||Uz,{value:E,name:P}=N,A=E,H=P;if(C){var J=C(E,P,N,k,i);if(Array.isArray(J))[A,H]=J;else if(J!=null)A=J;else return null}var ee=Um({display:"block",paddingTop:4,paddingBottom:4,color:N.color||"#000"},n);return p.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(k),style:ee},ga(H)?p.createElement("span",{className:"recharts-tooltip-item-name"},H):null,ga(H)?p.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,p.createElement("span",{className:"recharts-tooltip-item-value"},A),p.createElement("span",{className:"recharts-tooltip-item-unit"},N.unit||""))});return p.createElement("ul",{className:"recharts-tooltip-item-list",style:j},S)}return null},g=Um({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),y=Um({margin:0},a),v=!yt(d),x=v?d:"",w=rt("recharts-default-tooltip",c),b=rt("recharts-tooltip-label",u);v&&f&&i!==void 0&&i!==null&&(x=f(d,i));var _=h?{role:"status","aria-live":"assertive"}:{};return p.createElement("div",Lv({className:w,style:g},_),p.createElement("p",{className:b,style:y},p.isValidElement(x)?x:"".concat(x)),m())},_l="recharts-tooltip-wrapper",Wz={visibility:"hidden"};function Kz(e){var{coordinate:t,translateX:r,translateY:n}=e;return rt(_l,{["".concat(_l,"-right")]:we(r)&&t&&we(t.x)&&r>=t.x,["".concat(_l,"-left")]:we(r)&&t&&we(t.x)&&r<t.x,["".concat(_l,"-bottom")]:we(n)&&t&&we(t.y)&&n>=t.y,["".concat(_l,"-top")]:we(n)&&t&&we(t.y)&&n<t.y})}function f1(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=e;if(i&&we(i[n]))return i[n];var d=r[n]-o-(a>0?a:0),f=r[n]+a;if(t[n])return s[n]?d:f;var h=c[n];if(h==null)return 0;if(s[n]){var m=d,g=h;return m<g?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var y=f+o,v=h+u;return y>v?Math.max(d,h):Math.max(f,h)}function Hz(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function qz(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:i,tooltipBox:s,useTranslate3d:o,viewBox:c}=e,u,d,f;return s.height>0&&s.width>0&&r?(d=f1({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),f=f1({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=Hz({translateX:d,translateY:f,useTranslate3d:o})):u=Wz,{cssProperties:u,cssClasses:Kz({translateX:d,translateY:f,coordinate:r})}}function h1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h1(Object(r),!0).forEach(function(n){Fv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fv(e,t,r){return(t=Vz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vz(e){var t=Gz(e,"string");return typeof t=="symbol"?t:t+""}function Gz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Yz extends p.PureComponent{constructor(){super(...arguments),Fv(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Fv(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:i,coordinate:s,hasPayload:o,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:m,wrapperStyle:g,lastBoundingBox:y,innerRef:v,hasPortalFromProps:x}=this.props,{cssClasses:w,cssProperties:b}=qz({allowEscapeViewBox:r,coordinate:s,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:y.height,width:y.width},useTranslate3d:h,viewBox:m}),_=x?{}:rd(rd({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),j=rd(rd({},_),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},g);return p.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:j,ref:v},i)}}var Xz=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Is={devToolsEnabled:!1,isSsr:Xz()},lO=()=>{var e;return(e=Se(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Bv(){return Bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bv.apply(null,arguments)}function p1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function m1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p1(Object(r),!0).forEach(function(n){Jz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jz(e,t,r){return(t=Qz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qz(e){var t=Zz(e,"string");return typeof t=="symbol"?t:t+""}function Zz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var g1={curveBasisClosed:OF,curveBasisOpen:AF,curveBasis:PF,curveBumpX:mF,curveBumpY:gF,curveLinearClosed:TF,curveLinear:Wh,curveMonotoneX:DF,curveMonotoneY:IF,curveNatural:RF,curveStep:MF,curveStepAfter:LF,curveStepBefore:$F},Pf=e=>Mt(e.x)&&Mt(e.y),v1=e=>e.base!=null&&Pf(e.base)&&Pf(e),jl=e=>e.x,Sl=e=>e.y,e8=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Zc(e));return(r==="curveMonotone"||r==="curveBump")&&t?g1["".concat(r).concat(t==="vertical"?"Y":"X")]:g1[r]||Wh},t8=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:i=!1}=e,s=e8(t,a),o=i?r.filter(Pf):r,c;if(Array.isArray(n)){var u=r.map((m,g)=>m1(m1({},m),{},{base:n[g]}));a==="vertical"?c=Yu().y(Sl).x1(jl).x0(m=>m.base.x):c=Yu().x(jl).y1(Sl).y0(m=>m.base.y);var d=c.defined(v1).curve(s),f=i?u.filter(v1):u;return d(f)}a==="vertical"&&we(n)?c=Yu().y(Sl).x1(jl).x0(n):we(n)?c=Yu().x(jl).y1(Sl).y0(n):c=PE().x(jl).y(Sl);var h=c.defined(Pf).curve(s);return h(o)},cO=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?t8(e):n;return p.createElement("path",Bv({},Qn(e),z0(e),{className:rt("recharts-curve",t),d:i===null?void 0:i,ref:a}))},r8=["x","y","top","left","width","height","className"];function Uv(){return Uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uv.apply(null,arguments)}function y1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function n8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y1(Object(r),!0).forEach(function(n){a8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a8(e,t,r){return(t=i8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i8(e){var t=s8(e,"string");return typeof t=="symbol"?t:t+""}function s8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function o8(e,t){if(e==null)return{};var r,n,a=l8(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function l8(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var c8=(e,t,r,n,a,i)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),u8=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:i=0,height:s=0,className:o}=e,c=o8(e,r8),u=n8({x:t,y:r,top:n,left:a,width:i,height:s},c);return!we(t)||!we(r)||!we(i)||!we(s)||!we(n)||!we(a)?null:p.createElement("path",Uv({},Tr(u),{className:rt("recharts-cross",o),d:c8(t,r,i,s,n,a)}))};function d8(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function x1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function b1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x1(Object(r),!0).forEach(function(n){f8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f8(e,t,r){return(t=h8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h8(e){var t=p8(e,"string");return typeof t=="symbol"?t:t+""}function p8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m8=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),uO=(e,t,r)=>e.map(n=>"".concat(m8(n)," ").concat(t,"ms ").concat(r)).join(","),g8=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),Oc=(e,t)=>Object.keys(t).reduce((r,n)=>b1(b1({},r),{},{[n]:e(n,t[n])}),{});function w1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w1(Object(r),!0).forEach(function(n){v8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function v8(e,t,r){return(t=y8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y8(e){var t=x8(e,"string");return typeof t=="symbol"?t:t+""}function x8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Of=(e,t,r)=>e+(t-e)*r,zv=e=>{var{from:t,to:r}=e;return t!==r},dO=(e,t,r)=>{var n=Oc((a,i)=>{if(zv(i)){var[s,o]=e(i.from,i.to,i.velocity);return Kt(Kt({},i),{},{from:s,velocity:o})}return i},t);return r<1?Oc((a,i)=>zv(i)?Kt(Kt({},i),{},{velocity:Of(i.velocity,n[a].velocity,r),from:Of(i.from,n[a].from,r)}):i,t):dO(e,n,r-1)};function b8(e,t,r,n,a,i){var s,o=n.reduce((h,m)=>Kt(Kt({},h),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>Oc((h,m)=>m.from,o),u=()=>!Object.values(o).filter(zv).length,d=null,f=h=>{s||(s=h);var m=h-s,g=m/r.dt;o=dO(r,o,g),a(Kt(Kt(Kt({},e),t),c())),s=h,u()||(d=i.setTimeout(f))};return()=>(d=i.setTimeout(f),()=>{var h;(h=d)===null||h===void 0||h()})}function w8(e,t,r,n,a,i,s){var o=null,c=a.reduce((f,h)=>Kt(Kt({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,m=Oc((y,v)=>Of(...v,r(h)),c);if(i(Kt(Kt(Kt({},e),t),m)),h<1)o=s.setTimeout(d);else{var g=Oc((y,v)=>Of(...v,r(1)),c);i(Kt(Kt(Kt({},e),t),g))}};return()=>(o=s.setTimeout(d),()=>{var f;(f=o)===null||f===void 0||f()})}const _8=(e,t,r,n,a,i)=>{var s=g8(e,t);return r==null?()=>(a(Kt(Kt({},e),t)),()=>{}):r.isStepper===!0?b8(e,t,r,s,a,i):w8(e,t,r,n,s,a,i)};var Af=1e-4,fO=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],hO=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),_1=(e,t)=>r=>{var n=fO(e,t);return hO(n,r)},j8=(e,t)=>r=>{var n=fO(e,t),a=[...n.map((i,s)=>i*s).slice(1),0];return hO(a,r)},S8=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a,i=r[0].split("(");if(i[0]==="cubic-bezier"&&((a=i[1])===null||a===void 0?void 0:a.split(")")[0].split(",").length)===4){var s=i[1].split(")")[0].split(",").map(o=>parseFloat(o));return[s[0],s[1],s[2],s[3]]}}}return r.length===4?r:[0,0,1,1]},N8=(e,t,r,n)=>{var a=_1(e,r),i=_1(t,n),s=j8(e,r),o=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,f=d,h=0;h<8;++h){var m=a(f)-d,g=s(f);if(Math.abs(m-d)<Af||g<Af)return i(f);f=o(f-m/g)}return i(f)};return c.isStepper=!1,c},j1=function(){return N8(...S8(...arguments))},k8=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,i=(s,o,c)=>{var u=-(s-o)*r,d=c*n,f=c+(u-d)*a/1e3,h=c*a/1e3+s;return Math.abs(h-o)<Af&&Math.abs(f)<Af?[o,0]:[h,f]};return i.isStepper=!0,i.dt=a,i},C8=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return j1(e);case"spring":return k8();default:if(e.split("(")[0]==="cubic-bezier")return j1(e)}return typeof e=="function"?e:null};function E8(e){var t,r=()=>null,n=!1,a=null,i=s=>{if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,[c,...u]=o;if(typeof c=="number"){a=e.setTimeout(i.bind(null,u),c);return}i(c),a=e.setTimeout(i.bind(null,u));return}typeof s=="string"&&(t=s,r(t)),typeof s=="object"&&(t=s,r(t)),typeof s=="function"&&s()}};return{stop:()=>{n=!0},start:s=>{n=!1,a&&(a(),a=null),i(s)},subscribe:s=>(r=s,()=>{r=()=>null}),getTimeoutController:()=>e}}class P8{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,i=s=>{s-n>=r?t(s):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(i))};return a=requestAnimationFrame(i),()=>{a!=null&&cancelAnimationFrame(a)}}}function O8(){return E8(new P8)}var A8=p.createContext(O8);function T8(e,t){var r=p.useContext(A8);return p.useMemo(()=>t??r(e),[e,t,r])}var D8={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},S1={t:0},zm={t:1};function cp(e){var t=Mr(e,D8),{isActive:r,canBegin:n,duration:a,easing:i,begin:s,onAnimationEnd:o,onAnimationStart:c,children:u}=t,d=T8(t.animationId,t.animationManager),[f,h]=p.useState(r?S1:zm),m=p.useRef(null);return p.useEffect(()=>{r||h(zm)},[r]),p.useEffect(()=>{if(!r||!n)return al;var g=_8(S1,zm,C8(i),a,h,d.getTimeoutController()),y=()=>{m.current=g()};return d.start([c,s,y,a,o]),()=>{d.stop(),m.current&&m.current(),o()}},[r,n,a,i,s,c,o,d]),u(f.t)}function up(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=p.useRef(kc(t)),n=p.useRef(e);return n.current!==e&&(r.current=kc(t),n.current=e),r.current}var I8=["radius"],R8=["radius"];function N1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function k1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N1(Object(r),!0).forEach(function(n){M8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M8(e,t,r){return(t=$8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $8(e){var t=L8(e,"string");return typeof t=="symbol"?t:t+""}function L8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tf(){return Tf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tf.apply(null,arguments)}function C1(e,t){if(e==null)return{};var r,n,a=F8(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function F8(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var E1=(e,t,r,n,a)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),s=n>=0?1:-1,o=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(i>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=a[f]>i?i:a[f];u="M".concat(e,",").concat(t+s*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+s*d[1])),u+="L ".concat(e+r,",").concat(t+n-s*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-s*d[3])),u+="Z"}else if(i>0&&a===+a&&a>0){var m=Math.min(i,a);u="M ".concat(e,",").concat(t+s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+o*m,",").concat(t,`
            L `).concat(e+r-o*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+s*m,`
            L `).concat(e+r,",").concat(t+n-s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-o*m,",").concat(t+n,`
            L `).concat(e+o*m,",").concat(t+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+n-s*m," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},P1={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},pO=e=>{var t=Mr(e,P1),r=p.useRef(null),[n,a]=p.useState(-1);p.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var K=r.current.getTotalLength();K&&a(K)}catch{}},[]);var{x:i,y:s,width:o,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isAnimationActive:g,isUpdateAnimationActive:y}=t,v=p.useRef(o),x=p.useRef(c),w=p.useRef(i),b=p.useRef(s),_=p.useMemo(()=>({x:i,y:s,width:o,height:c,radius:u}),[i,s,o,c,u]),j=up(_,"rectangle-");if(i!==+i||s!==+s||o!==+o||c!==+c||o===0||c===0)return null;var S=rt("recharts-rectangle",d);if(!y){var N=Tr(t),{radius:k}=N,C=C1(N,I8);return p.createElement("path",Tf({},C,{radius:typeof u=="number"?u:void 0,className:S,d:E1(i,s,o,c,u)}))}var E=v.current,P=x.current,A=w.current,H=b.current,J="0px ".concat(n===-1?1:n,"px"),ee="".concat(n,"px 0px"),B=uO(["strokeDasharray"],h,typeof f=="string"?f:P1.animationEasing);return p.createElement(cp,{animationId:j,key:j,canBegin:n>0,duration:h,easing:f,isActive:y,begin:m},K=>{var D=Ot(E,o,K),R=Ot(P,c,K),F=Ot(A,i,K),le=Ot(H,s,K);r.current&&(v.current=D,x.current=R,w.current=F,b.current=le);var re;g?K>0?re={transition:B,strokeDasharray:ee}:re={strokeDasharray:J}:re={strokeDasharray:ee};var Ne=Tr(t),{radius:O}=Ne,V=C1(Ne,R8);return p.createElement("path",Tf({},V,{radius:typeof u=="number"?u:void 0,className:S,d:E1(F,le,D,R,u),ref:r,style:k1(k1({},re),t.style)}))})};function O1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function A1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O1(Object(r),!0).forEach(function(n){B8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function B8(e,t,r){return(t=U8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U8(e){var t=z8(e,"string");return typeof t=="symbol"?t:t+""}function z8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Df=Math.PI/180,W8=e=>e*180/Math.PI,mr=(e,t,r,n)=>({x:e+Math.cos(-Df*n)*r,y:t+Math.sin(-Df*n)*r}),K8=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},H8=(e,t)=>{var{x:r,y:n}=e,{x:a,y:i}=t;return Math.sqrt((r-a)**2+(n-i)**2)},q8=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:i}=t,s=H8({x:r,y:n},{x:a,y:i});if(s<=0)return{radius:s,angle:0};var o=(r-a)/s,c=Math.acos(o);return n>i&&(c=2*Math.PI-c),{radius:s,angle:W8(c),angleInRadian:c}},V8=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),i=Math.min(n,a);return{startAngle:t-i*360,endAngle:r-i*360}},G8=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),i=Math.floor(n/360),s=Math.min(a,i);return e+s*360},Y8=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:a,angle:i}=q8({x:r,y:n},t),{innerRadius:s,outerRadius:o}=t;if(a<s||a>o||a===0)return null;var{startAngle:c,endAngle:u}=V8(t),d=i,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?A1(A1({},t),{},{radius:a,angle:G8(d,t)}):null};function mO(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:i}=e,s=mr(t,r,n,a),o=mr(t,r,n,i);return{points:[s,o],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function Wv(){return Wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wv.apply(null,arguments)}var X8=(e,t)=>{var r=Wr(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},nd=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:i,isExternal:s,cornerRadius:o,cornerIsExternal:c}=e,u=o*(s?1:-1)+n,d=Math.asin(o/u)/Df,f=c?a:a+i*d,h=mr(t,r,u,f),m=mr(t,r,n,f),g=c?a-i*d:a,y=mr(t,r,u*Math.cos(d*Df),g);return{center:h,circleTangency:m,lineTangency:y,theta:d}},gO=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:i,endAngle:s}=e,o=X8(i,s),c=i+o,u=mr(t,r,a,i),d=mr(t,r,a,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(i>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=mr(t,r,n,i),m=mr(t,r,n,c);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(i<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},J8=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:i,forceCornerRadius:s,cornerIsExternal:o,startAngle:c,endAngle:u}=e,d=Wr(u-c),{circleTangency:f,lineTangency:h,theta:m}=nd({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:i,cornerIsExternal:o}),{circleTangency:g,lineTangency:y,theta:v}=nd({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:o}),x=o?Math.abs(c-u):Math.abs(c-u)-m-v;if(x<0)return s?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):gO({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(x>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(n>0){var{circleTangency:b,lineTangency:_,theta:j}=nd({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),{circleTangency:S,lineTangency:N,theta:k}=nd({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),C=o?Math.abs(c-u):Math.abs(c-u)-j-k;if(C<0&&i===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(N.x,",").concat(N.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(S.x,",").concat(S.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(C>180),",").concat(+(d>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},Q8={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},vO=e=>{var t=Mr(e,Q8),{cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(i<a||u===d)return null;var h=rt("recharts-sector",f),m=i-a,g=ea(s,m,0,!0),y;return g>0&&Math.abs(u-d)<360?y=J8({cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:Math.min(g,m/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d}):y=gO({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d}),p.createElement("path",Wv({},Tr(t),{className:h,d:y}))};function Z8(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(qE(t)){if(e==="centric"){var{cx:n,cy:a,innerRadius:i,outerRadius:s,angle:o}=t,c=mr(n,a,i,o),u=mr(n,a,s,o);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return mO(t)}}var yO={},xO={},bO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ex;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(bO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bO;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(xO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tx,r=xO;function n(a,i,s){s&&typeof s!="number"&&t.isIterateeCall(a,i,s)&&(i=s=void 0),a=r.toFinite(a),i===void 0?(i=a,a=0):i=r.toFinite(i),s=s===void 0?a<i?1:-1:r.toFinite(s);const o=Math.max(Math.ceil((i-a)/(s||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=a,a+=s;return c}e.range=n})(yO);var e9=yO.range;const wO=Ga(e9);function Ci(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function t9(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function cx(e){let t,r,n;e.length!==2?(t=Ci,r=(o,c)=>Ci(e(o),c),n=(o,c)=>e(o)-c):(t=e===Ci||e===t9?e:r9,r=e,n=e);function a(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function s(o,c,u=0,d=o.length){const f=a(o,c,u,d-1);return f>u&&n(o[f-1],c)>-n(o[f],c)?f-1:f}return{left:a,center:s,right:i}}function r9(){return 0}function _O(e){return e===null?NaN:+e}function*n9(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const a9=cx(Ci),au=a9.right;cx(_O).center;class T1 extends Map{constructor(t,r=o9){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(D1(this,t))}has(t){return super.has(D1(this,t))}set(t,r){return super.set(i9(this,t),r)}delete(t){return super.delete(s9(this,t))}}function D1({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function i9({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function s9({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function o9(e){return e!==null&&typeof e=="object"?e.valueOf():e}function l9(e=Ci){if(e===Ci)return jO;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function jO(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const c9=Math.sqrt(50),u9=Math.sqrt(10),d9=Math.sqrt(2);function If(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),s=i>=c9?10:i>=u9?5:i>=d9?2:1;let o,c,u;return a<0?(u=Math.pow(10,-a)/s,o=Math.round(e*u),c=Math.round(t*u),o/u<e&&++o,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*s,o=Math.round(e/u),c=Math.round(t/u),o*u<e&&++o,c*u>t&&--c),c<o&&.5<=r&&r<2?If(e,t,r*2):[o,c,u]}function Kv(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,s]=n?If(t,e,r):If(e,t,r);if(!(i>=a))return[];const o=i-a+1,c=new Array(o);if(n)if(s<0)for(let u=0;u<o;++u)c[u]=(i-u)/-s;else for(let u=0;u<o;++u)c[u]=(i-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(a+u)/-s;else for(let u=0;u<o;++u)c[u]=(a+u)*s;return c}function Hv(e,t,r){return t=+t,e=+e,r=+r,If(e,t,r)[2]}function qv(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?Hv(t,e,r):Hv(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function I1(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function R1(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function SO(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?jO:l9(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(n,Math.floor(t+(c-u)*f/c+h));SO(e,t,m,g,a)}const i=e[t];let s=r,o=n;for(Nl(e,r,t),a(e[n],i)>0&&Nl(e,r,n);s<o;){for(Nl(e,s,o),++s,--o;a(e[s],i)<0;)++s;for(;a(e[o],i)>0;)--o}a(e[r],i)===0?Nl(e,r,o):(++o,Nl(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function Nl(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function f9(e,t,r){if(e=Float64Array.from(n9(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return R1(e);if(t>=1)return I1(e);var n,a=(n-1)*t,i=Math.floor(a),s=I1(SO(e,i).subarray(0,i+1)),o=R1(e.subarray(i+1));return s+(o-s)*(a-i)}}function h9(e,t,r=_O){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),s=+r(e[i],i,e),o=+r(e[i+1],i+1,e);return s+(o-s)*(a-i)}}function p9(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function Dn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Qa(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Vv=Symbol("implicit");function ux(){var e=new T1,t=[],r=[],n=Vv;function a(i){let s=e.get(i);if(s===void 0){if(n!==Vv)return n;e.set(i,s=t.push(i)-1)}return r[s%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new T1;for(const s of i)e.has(s)||e.set(s,t.push(s)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return ux(t,r).unknown(n)},Dn.apply(a,arguments),a}function dx(){var e=ux().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,s,o=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<n,g=m?a:n,y=m?n:a;i=(y-g)/Math.max(1,h-c+u*2),o&&(i=Math.floor(i)),g+=(y-g-i*(h-c))*d,s=i*(1-c),o&&(g=Math.round(g),s=Math.round(s));var v=p9(h).map(function(x){return g+i*x});return r(m?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,o=!0,f()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return dx(t(),[n,a]).round(o).paddingInner(c).paddingOuter(u).align(d)},Dn.apply(f(),arguments)}function NO(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return NO(t())},e}function m9(){return NO(dx.apply(null,arguments).paddingInner(1))}function fx(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function kO(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function iu(){}var Ac=.7,Rf=1/Ac,ko="\\s*([+-]?\\d+)\\s*",Tc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ma="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",g9=/^#([0-9a-f]{3,8})$/,v9=new RegExp(`^rgb\\(${ko},${ko},${ko}\\)$`),y9=new RegExp(`^rgb\\(${ma},${ma},${ma}\\)$`),x9=new RegExp(`^rgba\\(${ko},${ko},${ko},${Tc}\\)$`),b9=new RegExp(`^rgba\\(${ma},${ma},${ma},${Tc}\\)$`),w9=new RegExp(`^hsl\\(${Tc},${ma},${ma}\\)$`),_9=new RegExp(`^hsla\\(${Tc},${ma},${ma},${Tc}\\)$`),M1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fx(iu,Dc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$1,formatHex:$1,formatHex8:j9,formatHsl:S9,formatRgb:L1,toString:L1});function $1(){return this.rgb().formatHex()}function j9(){return this.rgb().formatHex8()}function S9(){return CO(this).formatHsl()}function L1(){return this.rgb().formatRgb()}function Dc(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=g9.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?F1(t):r===3?new Kr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?ad(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?ad(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=v9.exec(e))?new Kr(t[1],t[2],t[3],1):(t=y9.exec(e))?new Kr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=x9.exec(e))?ad(t[1],t[2],t[3],t[4]):(t=b9.exec(e))?ad(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=w9.exec(e))?z1(t[1],t[2]/100,t[3]/100,1):(t=_9.exec(e))?z1(t[1],t[2]/100,t[3]/100,t[4]):M1.hasOwnProperty(e)?F1(M1[e]):e==="transparent"?new Kr(NaN,NaN,NaN,0):null}function F1(e){return new Kr(e>>16&255,e>>8&255,e&255,1)}function ad(e,t,r,n){return n<=0&&(e=t=r=NaN),new Kr(e,t,r,n)}function N9(e){return e instanceof iu||(e=Dc(e)),e?(e=e.rgb(),new Kr(e.r,e.g,e.b,e.opacity)):new Kr}function Gv(e,t,r,n){return arguments.length===1?N9(e):new Kr(e,t,r,n??1)}function Kr(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}fx(Kr,Gv,kO(iu,{brighter(e){return e=e==null?Rf:Math.pow(Rf,e),new Kr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ac:Math.pow(Ac,e),new Kr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Kr(gs(this.r),gs(this.g),gs(this.b),Mf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:B1,formatHex:B1,formatHex8:k9,formatRgb:U1,toString:U1}));function B1(){return`#${ls(this.r)}${ls(this.g)}${ls(this.b)}`}function k9(){return`#${ls(this.r)}${ls(this.g)}${ls(this.b)}${ls((isNaN(this.opacity)?1:this.opacity)*255)}`}function U1(){const e=Mf(this.opacity);return`${e===1?"rgb(":"rgba("}${gs(this.r)}, ${gs(this.g)}, ${gs(this.b)}${e===1?")":`, ${e})`}`}function Mf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function gs(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ls(e){return e=gs(e),(e<16?"0":"")+e.toString(16)}function z1(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Hn(e,t,r,n)}function CO(e){if(e instanceof Hn)return new Hn(e.h,e.s,e.l,e.opacity);if(e instanceof iu||(e=Dc(e)),!e)return new Hn;if(e instanceof Hn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),s=NaN,o=i-a,c=(i+a)/2;return o?(t===i?s=(r-n)/o+(r<n)*6:r===i?s=(n-t)/o+2:s=(t-r)/o+4,o/=c<.5?i+a:2-i-a,s*=60):o=c>0&&c<1?0:s,new Hn(s,o,c,e.opacity)}function C9(e,t,r,n){return arguments.length===1?CO(e):new Hn(e,t,r,n??1)}function Hn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}fx(Hn,C9,kO(iu,{brighter(e){return e=e==null?Rf:Math.pow(Rf,e),new Hn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ac:Math.pow(Ac,e),new Hn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Kr(Wm(e>=240?e-240:e+120,a,n),Wm(e,a,n),Wm(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Hn(W1(this.h),id(this.s),id(this.l),Mf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Mf(this.opacity);return`${e===1?"hsl(":"hsla("}${W1(this.h)}, ${id(this.s)*100}%, ${id(this.l)*100}%${e===1?")":`, ${e})`}`}}));function W1(e){return e=(e||0)%360,e<0?e+360:e}function id(e){return Math.max(0,Math.min(1,e||0))}function Wm(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const hx=e=>()=>e;function E9(e,t){return function(r){return e+r*t}}function P9(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function O9(e){return(e=+e)==1?EO:function(t,r){return r-t?P9(t,r,e):hx(isNaN(t)?r:t)}}function EO(e,t){var r=t-e;return r?E9(e,r):hx(isNaN(e)?t:e)}const K1=function e(t){var r=O9(t);function n(a,i){var s=r((a=Gv(a)).r,(i=Gv(i)).r),o=r(a.g,i.g),c=r(a.b,i.b),u=EO(a.opacity,i.opacity);return function(d){return a.r=s(d),a.g=o(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function A9(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function T9(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function D9(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),s;for(s=0;s<n;++s)a[s]=il(e[s],t[s]);for(;s<r;++s)i[s]=t[s];return function(o){for(s=0;s<n;++s)i[s]=a[s](o);return i}}function I9(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function $f(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function R9(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=il(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var Yv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Km=new RegExp(Yv.source,"g");function M9(e){return function(){return e}}function $9(e){return function(t){return e(t)+""}}function L9(e,t){var r=Yv.lastIndex=Km.lastIndex=0,n,a,i,s=-1,o=[],c=[];for(e=e+"",t=t+"";(n=Yv.exec(e))&&(a=Km.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),o[s]?o[s]+=i:o[++s]=i),(n=n[0])===(a=a[0])?o[s]?o[s]+=a:o[++s]=a:(o[++s]=null,c.push({i:s,x:$f(n,a)})),r=Km.lastIndex;return r<t.length&&(i=t.slice(r),o[s]?o[s]+=i:o[++s]=i),o.length<2?c[0]?$9(c[0].x):M9(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function il(e,t){var r=typeof t,n;return t==null||r==="boolean"?hx(t):(r==="number"?$f:r==="string"?(n=Dc(t))?(t=n,K1):L9:t instanceof Dc?K1:t instanceof Date?I9:T9(t)?A9:Array.isArray(t)?D9:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?R9:$f)(e,t)}function px(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function F9(e,t){t===void 0&&(t=e,e=il);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return i[o](s-o)}}function B9(e){return function(){return e}}function Lf(e){return+e}var H1=[0,1];function Or(e){return e}function Xv(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:B9(isNaN(t)?NaN:.5)}function U9(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function z9(e,t,r){var n=e[0],a=e[1],i=t[0],s=t[1];return a<n?(n=Xv(a,n),i=r(s,i)):(n=Xv(n,a),i=r(i,s)),function(o){return i(n(o))}}function W9(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)a[s]=Xv(e[s],e[s+1]),i[s]=r(t[s],t[s+1]);return function(o){var c=au(e,o,1,n)-1;return i[c](a[c](o))}}function su(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function dp(){var e=H1,t=H1,r=il,n,a,i,s=Or,o,c,u;function d(){var h=Math.min(e.length,t.length);return s!==Or&&(s=U9(e[0],e[h-1])),o=h>2?W9:z9,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=o(e.map(n),t,r)))(n(s(h)))}return f.invert=function(h){return s(a((u||(u=o(t,e.map(n),$f)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Lf),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=px,d()},f.clamp=function(h){return arguments.length?(s=h?!0:Or,d()):s!==Or},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,m){return n=h,a=m,d()}}function mx(){return dp()(Or,Or)}function K9(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ff(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Bo(e){return e=Ff(Math.abs(e)),e?e[1]:NaN}function H9(e,t){return function(r,n){for(var a=r.length,i=[],s=0,o=e[0],c=0;a>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),i.push(r.substring(a-=o,a+o)),!((c+=o+1)>n));)o=e[s=(s+1)%e.length];return i.reverse().join(t)}}function q9(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var V9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ic(e){if(!(t=V9.exec(e)))throw new Error("invalid format: "+e);var t;return new gx({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ic.prototype=gx.prototype;function gx(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}gx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function G9(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var PO;function Y9(e,t){var r=Ff(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(PO=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=n.length;return i===s?n:i>s?n+new Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Ff(e,Math.max(0,t+i-1))[0]}function q1(e,t){var r=Ff(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const V1={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:K9,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>q1(e*100,t),r:q1,s:Y9,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function G1(e){return e}var Y1=Array.prototype.map,X1=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function X9(e){var t=e.grouping===void 0||e.thousands===void 0?G1:H9(Y1.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?G1:q9(Y1.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Ic(f);var h=f.fill,m=f.align,g=f.sign,y=f.symbol,v=f.zero,x=f.width,w=f.comma,b=f.precision,_=f.trim,j=f.type;j==="n"?(w=!0,j="g"):V1[j]||(b===void 0&&(b=12),_=!0,j="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var S=y==="$"?r:y==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",N=y==="$"?n:/[%p]/.test(j)?s:"",k=V1[j],C=/[defgprs%]/.test(j);b=b===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function E(P){var A=S,H=N,J,ee,B;if(j==="c")H=k(P)+H,P="";else{P=+P;var K=P<0||1/P<0;if(P=isNaN(P)?c:k(Math.abs(P),b),_&&(P=G9(P)),K&&+P==0&&g!=="+"&&(K=!1),A=(K?g==="("?g:o:g==="-"||g==="("?"":g)+A,H=(j==="s"?X1[8+PO/3]:"")+H+(K&&g==="("?")":""),C){for(J=-1,ee=P.length;++J<ee;)if(B=P.charCodeAt(J),48>B||B>57){H=(B===46?a+P.slice(J+1):P.slice(J))+H,P=P.slice(0,J);break}}}w&&!v&&(P=t(P,1/0));var D=A.length+P.length+H.length,R=D<x?new Array(x-D+1).join(h):"";switch(w&&v&&(P=t(R+P,R.length?x-H.length:1/0),R=""),m){case"<":P=A+P+H+R;break;case"=":P=A+R+P+H;break;case"^":P=R.slice(0,D=R.length>>1)+A+P+H+R.slice(D);break;default:P=R+A+P+H;break}return i(P)}return E.toString=function(){return f+""},E}function d(f,h){var m=u((f=Ic(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Bo(h)/3)))*3,y=Math.pow(10,-g),v=X1[8+g/3];return function(x){return m(y*x)+v}}return{format:u,formatPrefix:d}}var sd,vx,OO;J9({thousands:",",grouping:[3],currency:["$",""]});function J9(e){return sd=X9(e),vx=sd.format,OO=sd.formatPrefix,sd}function Q9(e){return Math.max(0,-Bo(Math.abs(e)))}function Z9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Bo(t)/3)))*3-Bo(Math.abs(e)))}function e7(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Bo(t)-Bo(e))+1}function AO(e,t,r,n){var a=qv(e,t,r),i;switch(n=Ic(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=Z9(a,s))&&(n.precision=i),OO(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=e7(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=Q9(a))&&(n.precision=i-(n.type==="%")*2);break}}return vx(n)}function Fi(e){var t=e.domain;return e.ticks=function(r){var n=t();return Kv(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return AO(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,s=n[a],o=n[i],c,u,d=10;for(o<s&&(u=s,s=o,o=u,u=a,a=i,i=u);d-- >0;){if(u=Hv(s,o,r),u===c)return n[a]=s,n[i]=o,t(n);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return e},e}function TO(){var e=mx();return e.copy=function(){return su(e,TO())},Dn.apply(e,arguments),Fi(e)}function DO(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Lf),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return DO(e).unknown(t)},e=arguments.length?Array.from(e,Lf):[0,1],Fi(r)}function IO(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],s;return i<a&&(s=r,r=n,n=s,s=a,a=i,i=s),e[r]=t.floor(a),e[n]=t.ceil(i),e}function J1(e){return Math.log(e)}function Q1(e){return Math.exp(e)}function t7(e){return-Math.log(-e)}function r7(e){return-Math.exp(-e)}function n7(e){return isFinite(e)?+("1e"+e):e<0?0:e}function a7(e){return e===10?n7:e===Math.E?Math.exp:t=>Math.pow(e,t)}function i7(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Z1(e){return(t,r)=>-e(-t,r)}function yx(e){const t=e(J1,Q1),r=t.domain;let n=10,a,i;function s(){return a=i7(n),i=a7(n),r()[0]<0?(a=Z1(a),i=Z1(i),e(t7,r7)):e(J1,Q1),t}return t.base=function(o){return arguments.length?(n=+o,s()):n},t.domain=function(o){return arguments.length?(r(o),s()):r()},t.ticks=o=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),g,y;const v=o==null?10:+o;let x=[];if(!(n%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<n;++g)if(y=h<0?g/i(-h):g*i(h),!(y<u)){if(y>d)break;x.push(y)}}else for(;h<=m;++h)for(g=n-1;g>=1;--g)if(y=h>0?g/i(-h):g*i(h),!(y<u)){if(y>d)break;x.push(y)}x.length*2<v&&(x=Kv(u,d,v))}else x=Kv(h,m,Math.min(m-h,v)).map(i);return f?x.reverse():x},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Ic(c)).precision==null&&(c.trim=!0),c=vx(c)),o===1/0)return c;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(IO(r(),{floor:o=>i(Math.floor(a(o))),ceil:o=>i(Math.ceil(a(o)))})),t}function RO(){const e=yx(dp()).domain([1,10]);return e.copy=()=>su(e,RO()).base(e.base()),Dn.apply(e,arguments),e}function ej(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function tj(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function xx(e){var t=1,r=e(ej(t),tj(t));return r.constant=function(n){return arguments.length?e(ej(t=+n),tj(t)):t},Fi(r)}function MO(){var e=xx(dp());return e.copy=function(){return su(e,MO()).constant(e.constant())},Dn.apply(e,arguments)}function rj(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function s7(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function o7(e){return e<0?-e*e:e*e}function bx(e){var t=e(Or,Or),r=1;function n(){return r===1?e(Or,Or):r===.5?e(s7,o7):e(rj(r),rj(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Fi(t)}function wx(){var e=bx(dp());return e.copy=function(){return su(e,wx()).exponent(e.exponent())},Dn.apply(e,arguments),e}function l7(){return wx.apply(null,arguments).exponent(.5)}function nj(e){return Math.sign(e)*e*e}function c7(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function $O(){var e=mx(),t=[0,1],r=!1,n;function a(i){var s=c7(e(i));return isNaN(s)?n:r?Math.round(s):s}return a.invert=function(i){return e.invert(nj(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,Lf)).map(nj)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return $O(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Dn.apply(a,arguments),Fi(a)}function LO(){var e=[],t=[],r=[],n;function a(){var s=0,o=Math.max(1,t.length);for(r=new Array(o-1);++s<o;)r[s-1]=h9(e,s/o);return i}function i(s){return s==null||isNaN(s=+s)?n:t[au(r,s)]}return i.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},i.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Ci),a()},i.range=function(s){return arguments.length?(t=Array.from(s),a()):t.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return LO().domain(e).range(t).unknown(n)},Dn.apply(i,arguments)}function FO(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function s(c){return c!=null&&c<=c?a[au(n,c,0,r)]:i}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},s.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,o()):a.slice()},s.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},s.unknown=function(c){return arguments.length&&(i=c),s},s.thresholds=function(){return n.slice()},s.copy=function(){return FO().domain([e,t]).range(a).unknown(i)},Dn.apply(Fi(s),arguments)}function BO(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[au(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var s=t.indexOf(i);return[e[s-1],e[s]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return BO().domain(e).range(t).unknown(r)},Dn.apply(a,arguments)}const Hm=new Date,qm=new Date;function Gt(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const s=a(i),o=a.ceil(i);return i-s<o-i?s:o},a.offset=(i,s)=>(t(i=new Date(+i),s==null?1:Math.floor(s)),i),a.range=(i,s,o)=>{const c=[];if(i=a.ceil(i),o=o==null?1:Math.floor(o),!(i<s)||!(o>0))return c;let u;do c.push(u=new Date(+i)),t(i,o),e(i);while(u<i&&i<s);return c},a.filter=i=>Gt(s=>{if(s>=s)for(;e(s),!i(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!i(s););else for(;--o>=0;)for(;t(s,1),!i(s););}),r&&(a.count=(i,s)=>(Hm.setTime(+i),qm.setTime(+s),e(Hm),e(qm),Math.floor(r(Hm,qm))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?s=>n(s)%i===0:s=>a.count(0,s)%i===0):a)),a}const Bf=Gt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Bf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Gt(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Bf);Bf.range;const Ca=1e3,Nn=Ca*60,Ea=Nn*60,Wa=Ea*24,_x=Wa*7,aj=Wa*30,Vm=Wa*365,cs=Gt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ca)},(e,t)=>(t-e)/Ca,e=>e.getUTCSeconds());cs.range;const jx=Gt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ca)},(e,t)=>{e.setTime(+e+t*Nn)},(e,t)=>(t-e)/Nn,e=>e.getMinutes());jx.range;const Sx=Gt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Nn)},(e,t)=>(t-e)/Nn,e=>e.getUTCMinutes());Sx.range;const Nx=Gt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ca-e.getMinutes()*Nn)},(e,t)=>{e.setTime(+e+t*Ea)},(e,t)=>(t-e)/Ea,e=>e.getHours());Nx.range;const kx=Gt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ea)},(e,t)=>(t-e)/Ea,e=>e.getUTCHours());kx.range;const ou=Gt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Nn)/Wa,e=>e.getDate()-1);ou.range;const fp=Gt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Wa,e=>e.getUTCDate()-1);fp.range;const UO=Gt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Wa,e=>Math.floor(e/Wa));UO.range;function Rs(e){return Gt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Nn)/_x)}const hp=Rs(0),Uf=Rs(1),u7=Rs(2),d7=Rs(3),Uo=Rs(4),f7=Rs(5),h7=Rs(6);hp.range;Uf.range;u7.range;d7.range;Uo.range;f7.range;h7.range;function Ms(e){return Gt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/_x)}const pp=Ms(0),zf=Ms(1),p7=Ms(2),m7=Ms(3),zo=Ms(4),g7=Ms(5),v7=Ms(6);pp.range;zf.range;p7.range;m7.range;zo.range;g7.range;v7.range;const Cx=Gt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Cx.range;const Ex=Gt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ex.range;const Ka=Gt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ka.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Gt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ka.range;const Ha=Gt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ha.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Gt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ha.range;function zO(e,t,r,n,a,i){const s=[[cs,1,Ca],[cs,5,5*Ca],[cs,15,15*Ca],[cs,30,30*Ca],[i,1,Nn],[i,5,5*Nn],[i,15,15*Nn],[i,30,30*Nn],[a,1,Ea],[a,3,3*Ea],[a,6,6*Ea],[a,12,12*Ea],[n,1,Wa],[n,2,2*Wa],[r,1,_x],[t,1,aj],[t,3,3*aj],[e,1,Vm]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,m=cx(([,,v])=>v).right(s,h);if(m===s.length)return e.every(qv(u/Vm,d/Vm,f));if(m===0)return Bf.every(Math.max(qv(u,d,f),1));const[g,y]=s[h/s[m-1][2]<s[m][2]/h?m-1:m];return g.every(y)}return[o,c]}const[y7,x7]=zO(Ha,Ex,pp,UO,kx,Sx),[b7,w7]=zO(Ka,Cx,hp,ou,Nx,jx);function Gm(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ym(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function kl(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function _7(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,s=e.shortDays,o=e.months,c=e.shortMonths,u=Cl(a),d=El(a),f=Cl(i),h=El(i),m=Cl(s),g=El(s),y=Cl(o),v=El(o),x=Cl(c),w=El(c),b={a:K,A:D,b:R,B:F,c:null,d:uj,e:uj,f:H7,g:tW,G:nW,H:z7,I:W7,j:K7,L:WO,m:q7,M:V7,p:le,q:re,Q:hj,s:pj,S:G7,u:Y7,U:X7,V:J7,w:Q7,W:Z7,x:null,X:null,y:eW,Y:rW,Z:aW,"%":fj},_={a:Ne,A:O,b:V,B:te,c:null,d:dj,e:dj,f:lW,g:yW,G:bW,H:iW,I:sW,j:oW,L:HO,m:cW,M:uW,p:M,q:X,Q:hj,s:pj,S:dW,u:fW,U:hW,V:pW,w:mW,W:gW,x:null,X:null,y:vW,Y:xW,Z:wW,"%":fj},j={a:E,A:P,b:A,B:H,c:J,d:lj,e:lj,f:L7,g:oj,G:sj,H:cj,I:cj,j:I7,L:$7,m:D7,M:R7,p:C,q:T7,Q:B7,s:U7,S:M7,u:C7,U:E7,V:P7,w:k7,W:O7,x:ee,X:B,y:oj,Y:sj,Z:A7,"%":F7};b.x=S(r,b),b.X=S(n,b),b.c=S(t,b),_.x=S(r,_),_.X=S(n,_),_.c=S(t,_);function S(T,z){return function(Z){var $=[],pe=-1,ce=0,Me=T.length,Ie,Je,Ke;for(Z instanceof Date||(Z=new Date(+Z));++pe<Me;)T.charCodeAt(pe)===37&&($.push(T.slice(ce,pe)),(Je=ij[Ie=T.charAt(++pe)])!=null?Ie=T.charAt(++pe):Je=Ie==="e"?" ":"0",(Ke=z[Ie])&&(Ie=Ke(Z,Je)),$.push(Ie),ce=pe+1);return $.push(T.slice(ce,pe)),$.join("")}}function N(T,z){return function(Z){var $=kl(1900,void 0,1),pe=k($,T,Z+="",0),ce,Me;if(pe!=Z.length)return null;if("Q"in $)return new Date($.Q);if("s"in $)return new Date($.s*1e3+("L"in $?$.L:0));if(z&&!("Z"in $)&&($.Z=0),"p"in $&&($.H=$.H%12+$.p*12),$.m===void 0&&($.m="q"in $?$.q:0),"V"in $){if($.V<1||$.V>53)return null;"w"in $||($.w=1),"Z"in $?(ce=Ym(kl($.y,0,1)),Me=ce.getUTCDay(),ce=Me>4||Me===0?zf.ceil(ce):zf(ce),ce=fp.offset(ce,($.V-1)*7),$.y=ce.getUTCFullYear(),$.m=ce.getUTCMonth(),$.d=ce.getUTCDate()+($.w+6)%7):(ce=Gm(kl($.y,0,1)),Me=ce.getDay(),ce=Me>4||Me===0?Uf.ceil(ce):Uf(ce),ce=ou.offset(ce,($.V-1)*7),$.y=ce.getFullYear(),$.m=ce.getMonth(),$.d=ce.getDate()+($.w+6)%7)}else("W"in $||"U"in $)&&("w"in $||($.w="u"in $?$.u%7:"W"in $?1:0),Me="Z"in $?Ym(kl($.y,0,1)).getUTCDay():Gm(kl($.y,0,1)).getDay(),$.m=0,$.d="W"in $?($.w+6)%7+$.W*7-(Me+5)%7:$.w+$.U*7-(Me+6)%7);return"Z"in $?($.H+=$.Z/100|0,$.M+=$.Z%100,Ym($)):Gm($)}}function k(T,z,Z,$){for(var pe=0,ce=z.length,Me=Z.length,Ie,Je;pe<ce;){if($>=Me)return-1;if(Ie=z.charCodeAt(pe++),Ie===37){if(Ie=z.charAt(pe++),Je=j[Ie in ij?z.charAt(pe++):Ie],!Je||($=Je(T,Z,$))<0)return-1}else if(Ie!=Z.charCodeAt($++))return-1}return $}function C(T,z,Z){var $=u.exec(z.slice(Z));return $?(T.p=d.get($[0].toLowerCase()),Z+$[0].length):-1}function E(T,z,Z){var $=m.exec(z.slice(Z));return $?(T.w=g.get($[0].toLowerCase()),Z+$[0].length):-1}function P(T,z,Z){var $=f.exec(z.slice(Z));return $?(T.w=h.get($[0].toLowerCase()),Z+$[0].length):-1}function A(T,z,Z){var $=x.exec(z.slice(Z));return $?(T.m=w.get($[0].toLowerCase()),Z+$[0].length):-1}function H(T,z,Z){var $=y.exec(z.slice(Z));return $?(T.m=v.get($[0].toLowerCase()),Z+$[0].length):-1}function J(T,z,Z){return k(T,t,z,Z)}function ee(T,z,Z){return k(T,r,z,Z)}function B(T,z,Z){return k(T,n,z,Z)}function K(T){return s[T.getDay()]}function D(T){return i[T.getDay()]}function R(T){return c[T.getMonth()]}function F(T){return o[T.getMonth()]}function le(T){return a[+(T.getHours()>=12)]}function re(T){return 1+~~(T.getMonth()/3)}function Ne(T){return s[T.getUTCDay()]}function O(T){return i[T.getUTCDay()]}function V(T){return c[T.getUTCMonth()]}function te(T){return o[T.getUTCMonth()]}function M(T){return a[+(T.getUTCHours()>=12)]}function X(T){return 1+~~(T.getUTCMonth()/3)}return{format:function(T){var z=S(T+="",b);return z.toString=function(){return T},z},parse:function(T){var z=N(T+="",!1);return z.toString=function(){return T},z},utcFormat:function(T){var z=S(T+="",_);return z.toString=function(){return T},z},utcParse:function(T){var z=N(T+="",!0);return z.toString=function(){return T},z}}}var ij={"-":"",_:" ",0:"0"},or=/^\s*\d+/,j7=/^%/,S7=/[\\^$*+?|[\]().{}]/g;function qe(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function N7(e){return e.replace(S7,"\\$&")}function Cl(e){return new RegExp("^(?:"+e.map(N7).join("|")+")","i")}function El(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function k7(e,t,r){var n=or.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function C7(e,t,r){var n=or.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function E7(e,t,r){var n=or.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function P7(e,t,r){var n=or.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function O7(e,t,r){var n=or.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function sj(e,t,r){var n=or.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function oj(e,t,r){var n=or.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function A7(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function T7(e,t,r){var n=or.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function D7(e,t,r){var n=or.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function lj(e,t,r){var n=or.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function I7(e,t,r){var n=or.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function cj(e,t,r){var n=or.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function R7(e,t,r){var n=or.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function M7(e,t,r){var n=or.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function $7(e,t,r){var n=or.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function L7(e,t,r){var n=or.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function F7(e,t,r){var n=j7.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function B7(e,t,r){var n=or.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function U7(e,t,r){var n=or.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function uj(e,t){return qe(e.getDate(),t,2)}function z7(e,t){return qe(e.getHours(),t,2)}function W7(e,t){return qe(e.getHours()%12||12,t,2)}function K7(e,t){return qe(1+ou.count(Ka(e),e),t,3)}function WO(e,t){return qe(e.getMilliseconds(),t,3)}function H7(e,t){return WO(e,t)+"000"}function q7(e,t){return qe(e.getMonth()+1,t,2)}function V7(e,t){return qe(e.getMinutes(),t,2)}function G7(e,t){return qe(e.getSeconds(),t,2)}function Y7(e){var t=e.getDay();return t===0?7:t}function X7(e,t){return qe(hp.count(Ka(e)-1,e),t,2)}function KO(e){var t=e.getDay();return t>=4||t===0?Uo(e):Uo.ceil(e)}function J7(e,t){return e=KO(e),qe(Uo.count(Ka(e),e)+(Ka(e).getDay()===4),t,2)}function Q7(e){return e.getDay()}function Z7(e,t){return qe(Uf.count(Ka(e)-1,e),t,2)}function eW(e,t){return qe(e.getFullYear()%100,t,2)}function tW(e,t){return e=KO(e),qe(e.getFullYear()%100,t,2)}function rW(e,t){return qe(e.getFullYear()%1e4,t,4)}function nW(e,t){var r=e.getDay();return e=r>=4||r===0?Uo(e):Uo.ceil(e),qe(e.getFullYear()%1e4,t,4)}function aW(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+qe(t/60|0,"0",2)+qe(t%60,"0",2)}function dj(e,t){return qe(e.getUTCDate(),t,2)}function iW(e,t){return qe(e.getUTCHours(),t,2)}function sW(e,t){return qe(e.getUTCHours()%12||12,t,2)}function oW(e,t){return qe(1+fp.count(Ha(e),e),t,3)}function HO(e,t){return qe(e.getUTCMilliseconds(),t,3)}function lW(e,t){return HO(e,t)+"000"}function cW(e,t){return qe(e.getUTCMonth()+1,t,2)}function uW(e,t){return qe(e.getUTCMinutes(),t,2)}function dW(e,t){return qe(e.getUTCSeconds(),t,2)}function fW(e){var t=e.getUTCDay();return t===0?7:t}function hW(e,t){return qe(pp.count(Ha(e)-1,e),t,2)}function qO(e){var t=e.getUTCDay();return t>=4||t===0?zo(e):zo.ceil(e)}function pW(e,t){return e=qO(e),qe(zo.count(Ha(e),e)+(Ha(e).getUTCDay()===4),t,2)}function mW(e){return e.getUTCDay()}function gW(e,t){return qe(zf.count(Ha(e)-1,e),t,2)}function vW(e,t){return qe(e.getUTCFullYear()%100,t,2)}function yW(e,t){return e=qO(e),qe(e.getUTCFullYear()%100,t,2)}function xW(e,t){return qe(e.getUTCFullYear()%1e4,t,4)}function bW(e,t){var r=e.getUTCDay();return e=r>=4||r===0?zo(e):zo.ceil(e),qe(e.getUTCFullYear()%1e4,t,4)}function wW(){return"+0000"}function fj(){return"%"}function hj(e){return+e}function pj(e){return Math.floor(+e/1e3)}var Hs,VO,GO;_W({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _W(e){return Hs=_7(e),VO=Hs.format,Hs.parse,GO=Hs.utcFormat,Hs.utcParse,Hs}function jW(e){return new Date(e)}function SW(e){return e instanceof Date?+e:+new Date(+e)}function Px(e,t,r,n,a,i,s,o,c,u){var d=mx(),f=d.invert,h=d.domain,m=u(".%L"),g=u(":%S"),y=u("%I:%M"),v=u("%I %p"),x=u("%a %d"),w=u("%b %d"),b=u("%B"),_=u("%Y");function j(S){return(c(S)<S?m:o(S)<S?g:s(S)<S?y:i(S)<S?v:n(S)<S?a(S)<S?x:w:r(S)<S?b:_)(S)}return d.invert=function(S){return new Date(f(S))},d.domain=function(S){return arguments.length?h(Array.from(S,SW)):h().map(jW)},d.ticks=function(S){var N=h();return e(N[0],N[N.length-1],S??10)},d.tickFormat=function(S,N){return N==null?j:u(N)},d.nice=function(S){var N=h();return(!S||typeof S.range!="function")&&(S=t(N[0],N[N.length-1],S??10)),S?h(IO(N,S)):d},d.copy=function(){return su(d,Px(e,t,r,n,a,i,s,o,c,u))},d}function NW(){return Dn.apply(Px(b7,w7,Ka,Cx,hp,ou,Nx,jx,cs,VO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function kW(){return Dn.apply(Px(y7,x7,Ha,Ex,pp,fp,kx,Sx,cs,GO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function mp(){var e=0,t=1,r,n,a,i,s=Or,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:s(a===0?.5:(f=(i(f)-r)*a,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(h){var m,g;return arguments.length?([m,g]=h,s=f(m,g),u):[s(0),s(1)]}}return u.range=d(il),u.rangeRound=d(px),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Bi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function YO(){var e=Fi(mp()(Or));return e.copy=function(){return Bi(e,YO())},Qa.apply(e,arguments)}function XO(){var e=yx(mp()).domain([1,10]);return e.copy=function(){return Bi(e,XO()).base(e.base())},Qa.apply(e,arguments)}function JO(){var e=xx(mp());return e.copy=function(){return Bi(e,JO()).constant(e.constant())},Qa.apply(e,arguments)}function Ox(){var e=bx(mp());return e.copy=function(){return Bi(e,Ox()).exponent(e.exponent())},Qa.apply(e,arguments)}function CW(){return Ox.apply(null,arguments).exponent(.5)}function QO(){var e=[],t=Or;function r(n){if(n!=null&&!isNaN(n=+n))return t((au(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Ci),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>f9(e,i/n))},r.copy=function(){return QO(t).domain(e)},Qa.apply(r,arguments)}function gp(){var e=0,t=.5,r=1,n=1,a,i,s,o,c,u=Or,d,f=!1,h;function m(y){return isNaN(y=+y)?h:(y=.5+((y=+d(y))-i)*(n*y<n*i?o:c),u(f?Math.max(0,Math.min(1,y)):y))}m.domain=function(y){return arguments.length?([e,t,r]=y,a=d(e=+e),i=d(t=+t),s=d(r=+r),o=a===i?0:.5/(i-a),c=i===s?0:.5/(s-i),n=i<a?-1:1,m):[e,t,r]},m.clamp=function(y){return arguments.length?(f=!!y,m):f},m.interpolator=function(y){return arguments.length?(u=y,m):u};function g(y){return function(v){var x,w,b;return arguments.length?([x,w,b]=v,u=F9(y,[x,w,b]),m):[u(0),u(.5),u(1)]}}return m.range=g(il),m.rangeRound=g(px),m.unknown=function(y){return arguments.length?(h=y,m):h},function(y){return d=y,a=y(e),i=y(t),s=y(r),o=a===i?0:.5/(i-a),c=i===s?0:.5/(s-i),n=i<a?-1:1,m}}function ZO(){var e=Fi(gp()(Or));return e.copy=function(){return Bi(e,ZO())},Qa.apply(e,arguments)}function eA(){var e=yx(gp()).domain([.1,1,10]);return e.copy=function(){return Bi(e,eA()).base(e.base())},Qa.apply(e,arguments)}function tA(){var e=xx(gp());return e.copy=function(){return Bi(e,tA()).constant(e.constant())},Qa.apply(e,arguments)}function Ax(){var e=bx(gp());return e.copy=function(){return Bi(e,Ax()).exponent(e.exponent())},Qa.apply(e,arguments)}function EW(){return Ax.apply(null,arguments).exponent(.5)}const Fl=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:dx,scaleDiverging:ZO,scaleDivergingLog:eA,scaleDivergingPow:Ax,scaleDivergingSqrt:EW,scaleDivergingSymlog:tA,scaleIdentity:DO,scaleImplicit:Vv,scaleLinear:TO,scaleLog:RO,scaleOrdinal:ux,scalePoint:m9,scalePow:wx,scaleQuantile:LO,scaleQuantize:FO,scaleRadial:$O,scaleSequential:YO,scaleSequentialLog:XO,scaleSequentialPow:Ox,scaleSequentialQuantile:QO,scaleSequentialSqrt:CW,scaleSequentialSymlog:JO,scaleSqrt:l7,scaleSymlog:MO,scaleThreshold:BO,scaleTime:NW,scaleUtc:kW,tickFormat:AO},Symbol.toStringTag,{value:"Module"}));var Ui=e=>e.chartData,PW=U([Ui],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),vp=(e,t,r,n)=>n?PW(e):Ui(e);function Cs(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Mt(t)&&Mt(r))return!0}return!1}function mj(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function rA(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,i;if(Mt(r))a=r;else if(typeof r=="function")return;if(Mt(n))i=n;else if(typeof n=="function")return;var s=[a,i];if(Cs(s))return s}}function OW(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Cs(n))return mj(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,i]=e,s,o;if(a==="auto")t!=null&&(s=Math.min(...t));else if(we(a))s=a;else if(typeof a=="function")try{t!=null&&(s=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&a1.test(a)){var c=a1.exec(a);if(c==null||t==null)s=void 0;else{var u=+c[1];s=t[0]-u}}else s=t==null?void 0:t[0];if(i==="auto")t!=null&&(o=Math.max(...t));else if(we(i))o=i;else if(typeof i=="function")try{t!=null&&(o=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&i1.test(i)){var d=i1.exec(i);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var h=[s,o];if(Cs(h))return t==null?h:mj(h,t,r)}}}var sl=1e9,AW={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Dx,gt=!0,Tn="[DecimalError] ",vs=Tn+"Invalid argument: ",Tx=Tn+"Exponent out of range: ",ol=Math.floor,es=Math.pow,TW=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ln,er=1e7,dt=7,nA=9007199254740991,Wf=ol(nA/dt),ve={};ve.absoluteValue=ve.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ve.comparedTo=ve.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};ve.decimalPlaces=ve.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*dt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};ve.dividedBy=ve.div=function(e){return Ta(this,new this.constructor(e))};ve.dividedToIntegerBy=ve.idiv=function(e){var t=this,r=t.constructor;return at(Ta(t,new r(e),0,1),r.precision)};ve.equals=ve.eq=function(e){return!this.cmp(e)};ve.exponent=function(){return Ut(this)};ve.greaterThan=ve.gt=function(e){return this.cmp(e)>0};ve.greaterThanOrEqualTo=ve.gte=function(e){return this.cmp(e)>=0};ve.isInteger=ve.isint=function(){return this.e>this.d.length-2};ve.isNegative=ve.isneg=function(){return this.s<0};ve.isPositive=ve.ispos=function(){return this.s>0};ve.isZero=function(){return this.s===0};ve.lessThan=ve.lt=function(e){return this.cmp(e)<0};ve.lessThanOrEqualTo=ve.lte=function(e){return this.cmp(e)<1};ve.logarithm=ve.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(ln))throw Error(Tn+"NaN");if(r.s<1)throw Error(Tn+(r.s?"NaN":"-Infinity"));return r.eq(ln)?new n(0):(gt=!1,t=Ta(Rc(r,i),Rc(e,i),i),gt=!0,at(t,a))};ve.minus=ve.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?sA(t,e):aA(t,(e.s=-e.s,e))};ve.modulo=ve.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Tn+"NaN");return r.s?(gt=!1,t=Ta(r,e,0,1).times(e),gt=!0,r.minus(t)):at(new n(r),a)};ve.naturalExponential=ve.exp=function(){return iA(this)};ve.naturalLogarithm=ve.ln=function(){return Rc(this)};ve.negated=ve.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ve.plus=ve.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?aA(t,e):sA(t,(e.s=-e.s,e))};ve.precision=ve.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(vs+e);if(t=Ut(a)+1,n=a.d.length-1,r=n*dt+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};ve.squareRoot=ve.sqrt=function(){var e,t,r,n,a,i,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Tn+"NaN")}for(e=Ut(o),gt=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=fa(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=ol((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=s=r+3;;)if(i=n,n=i.plus(Ta(o,i,s+2)).times(.5),fa(i.d).slice(0,s)===(t=fa(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),a==s&&t=="4999"){if(at(i,r+1,0),i.times(i).eq(o)){n=i;break}}else if(t!="9999")break;s+=4}return gt=!0,at(n,r)};ve.times=ve.mul=function(e){var t,r,n,a,i,s,o,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(i=h,h=m,m=i,s=c,c=u,u=s),i=[],s=c+u,n=s;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)o=i[a]+m[n]*h[a-n-1]+t,i[a--]=o%er|0,t=o/er|0;i[a]=(i[a]+t)%er|0}for(;!i[--s];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,gt?at(e,f.precision):e};ve.toDecimalPlaces=ve.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(ya(e,0,sl),t===void 0?t=n.rounding:ya(t,0,8),at(r,e+Ut(r)+1,t))};ve.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Es(n,!0):(ya(e,0,sl),t===void 0?t=a.rounding:ya(t,0,8),n=at(new a(n),e+1,t),r=Es(n,!0,e+1)),r};ve.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?Es(a):(ya(e,0,sl),t===void 0?t=i.rounding:ya(t,0,8),n=at(new i(a),e+Ut(a)+1,t),r=Es(n.abs(),!1,e+Ut(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};ve.toInteger=ve.toint=function(){var e=this,t=e.constructor;return at(new t(e),Ut(e)+1,t.rounding)};ve.toNumber=function(){return+this};ve.toPower=ve.pow=function(e){var t,r,n,a,i,s,o=this,c=o.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(ln);if(o=new c(o),!o.s){if(e.s<1)throw Error(Tn+"Infinity");return o}if(o.eq(ln))return o;if(n=c.precision,e.eq(ln))return at(o,n);if(t=e.e,r=e.d.length-1,s=t>=r,i=o.s,s){if((r=d<0?-d:d)<=nA){for(a=new c(ln),t=Math.ceil(n/dt+4),gt=!1;r%2&&(a=a.times(o),vj(a.d,t)),r=ol(r/2),r!==0;)o=o.times(o),vj(o.d,t);return gt=!0,e.s<0?new c(ln).div(a):at(a,n)}}else if(i<0)throw Error(Tn+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,gt=!1,a=e.times(Rc(o,n+u)),gt=!0,a=iA(a),a.s=i,a};ve.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Ut(a),n=Es(a,r<=i.toExpNeg||r>=i.toExpPos)):(ya(e,1,sl),t===void 0?t=i.rounding:ya(t,0,8),a=at(new i(a),e,t),r=Ut(a),n=Es(a,e<=r||r<=i.toExpNeg,e)),n};ve.toSignificantDigits=ve.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(ya(e,1,sl),t===void 0?t=n.rounding:ya(t,0,8)),at(new n(r),e,t)};ve.toString=ve.valueOf=ve.val=ve.toJSON=ve[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ut(e),r=e.constructor;return Es(e,t<=r.toExpNeg||t>=r.toExpPos)};function aA(e,t){var r,n,a,i,s,o,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),gt?at(t,f):t;if(c=e.d,u=t.d,s=e.e,a=t.e,c=c.slice(),i=s-a,i){for(i<0?(n=c,i=-i,o=u.length):(n=u,a=s,o=c.length),s=Math.ceil(f/dt),o=s>o?s+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=c.length,i=u.length,o-i<0&&(i=o,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/er|0,c[i]%=er;for(r&&(c.unshift(r),++a),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=a,gt?at(t,f):t}function ya(e,t,r){if(e!==~~e||e<t||e>r)throw Error(vs+e)}function fa(e){var t,r,n,a=e.length-1,i="",s=e[0];if(a>0){for(i+=s,t=1;t<a;t++)n=e[t]+"",r=dt-n.length,r&&(i+=ui(r)),i+=n;s=e[t],n=s+"",r=dt-n.length,r&&(i+=ui(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}var Ta=function(){function e(n,a){var i,s=0,o=n.length;for(n=n.slice();o--;)i=n[o]*a+s,n[o]=i%er|0,s=i/er|0;return s&&n.unshift(s),n}function t(n,a,i,s){var o,c;if(i!=s)c=i>s?1:-1;else for(o=c=0;o<i;o++)if(n[o]!=a[o]){c=n[o]>a[o]?1:-1;break}return c}function r(n,a,i){for(var s=0;i--;)n[i]-=s,s=n[i]<a[i]?1:0,n[i]=s*er+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,s){var o,c,u,d,f,h,m,g,y,v,x,w,b,_,j,S,N,k,C=n.constructor,E=n.s==a.s?1:-1,P=n.d,A=a.d;if(!n.s)return new C(n);if(!a.s)throw Error(Tn+"Division by zero");for(c=n.e-a.e,N=A.length,j=P.length,m=new C(E),g=m.d=[],u=0;A[u]==(P[u]||0);)++u;if(A[u]>(P[u]||0)&&--c,i==null?w=i=C.precision:s?w=i+(Ut(n)-Ut(a))+1:w=i,w<0)return new C(0);if(w=w/dt+2|0,u=0,N==1)for(d=0,A=A[0],w++;(u<j||d)&&w--;u++)b=d*er+(P[u]||0),g[u]=b/A|0,d=b%A|0;else{for(d=er/(A[0]+1)|0,d>1&&(A=e(A,d),P=e(P,d),N=A.length,j=P.length),_=N,y=P.slice(0,N),v=y.length;v<N;)y[v++]=0;k=A.slice(),k.unshift(0),S=A[0],A[1]>=er/2&&++S;do d=0,o=t(A,y,N,v),o<0?(x=y[0],N!=v&&(x=x*er+(y[1]||0)),d=x/S|0,d>1?(d>=er&&(d=er-1),f=e(A,d),h=f.length,v=y.length,o=t(f,y,h,v),o==1&&(d--,r(f,N<h?k:A,h))):(d==0&&(o=d=1),f=A.slice()),h=f.length,h<v&&f.unshift(0),r(y,f,v),o==-1&&(v=y.length,o=t(A,y,N,v),o<1&&(d++,r(y,N<v?k:A,v))),v=y.length):o===0&&(d++,y=[0]),g[u++]=d,o&&y[0]?y[v++]=P[_]||0:(y=[P[_]],v=1);while((_++<j||y[0]!==void 0)&&w--)}return g[0]||g.shift(),m.e=c,at(m,s?i+Ut(m)+1:i)}}();function iA(e,t){var r,n,a,i,s,o,c=0,u=0,d=e.constructor,f=d.precision;if(Ut(e)>16)throw Error(Tx+Ut(e));if(!e.s)return new d(ln);for(gt=!1,o=f,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),u+=5;for(n=Math.log(es(2,u))/Math.LN10*2+5|0,o+=n,r=a=i=new d(ln),d.precision=o;;){if(a=at(a.times(e),o),r=r.times(++c),s=i.plus(Ta(a,r,o)),fa(s.d).slice(0,o)===fa(i.d).slice(0,o)){for(;u--;)i=at(i.times(i),o);return d.precision=f,t==null?(gt=!0,at(i,f)):i}i=s}}function Ut(e){for(var t=e.e*dt,r=e.d[0];r>=10;r/=10)t++;return t}function Xm(e,t,r){if(t>e.LN10.sd())throw gt=!0,r&&(e.precision=r),Error(Tn+"LN10 precision limit exceeded");return at(new e(e.LN10),t)}function ui(e){for(var t="";e--;)t+="0";return t}function Rc(e,t){var r,n,a,i,s,o,c,u,d,f=1,h=10,m=e,g=m.d,y=m.constructor,v=y.precision;if(m.s<1)throw Error(Tn+(m.s?"NaN":"-Infinity"));if(m.eq(ln))return new y(0);if(t==null?(gt=!1,u=v):u=t,m.eq(10))return t==null&&(gt=!0),Xm(y,u);if(u+=h,y.precision=u,r=fa(g),n=r.charAt(0),i=Ut(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=fa(m.d),n=r.charAt(0),f++;i=Ut(m),n>1?(m=new y("0."+r),i++):m=new y(n+"."+r.slice(1))}else return c=Xm(y,u+2,v).times(i+""),m=Rc(new y(n+"."+r.slice(1)),u-h).plus(c),y.precision=v,t==null?(gt=!0,at(m,v)):m;for(o=s=m=Ta(m.minus(ln),m.plus(ln),u),d=at(m.times(m),u),a=3;;){if(s=at(s.times(d),u),c=o.plus(Ta(s,new y(a),u)),fa(c.d).slice(0,u)===fa(o.d).slice(0,u))return o=o.times(2),i!==0&&(o=o.plus(Xm(y,u+2,v).times(i+""))),o=Ta(o,new y(f),u),y.precision=v,t==null?(gt=!0,at(o,v)):o;o=c,a+=2}}function gj(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=ol(r/dt),e.d=[],n=(r+1)%dt,r<0&&(n+=dt),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=dt;n<a;)e.d.push(+t.slice(n,n+=dt));t=t.slice(n),n=dt-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),gt&&(e.e>Wf||e.e<-Wf))throw Error(Tx+r)}else e.s=0,e.e=0,e.d=[0];return e}function at(e,t,r){var n,a,i,s,o,c,u,d,f=e.d;for(s=1,i=f[0];i>=10;i/=10)s++;if(n=t-s,n<0)n+=dt,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/dt),i=f.length,d>=i)return e;for(u=i=f[d],s=1;i>=10;i/=10)s++;n%=dt,a=n-dt+s}if(r!==void 0&&(i=es(10,s-a-1),o=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?a>0?u/es(10,s-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=Ut(e),f.length=1,t=t-i-1,f[0]=es(10,(dt-t%dt)%dt),e.e=ol(-t/dt)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=es(10,dt-n),f[d]=a>0?(u/es(10,s-a)%es(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==er&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=er)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(gt&&(e.e>Wf||e.e<-Wf))throw Error(Tx+Ut(e));return e}function sA(e,t){var r,n,a,i,s,o,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),gt?at(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),s=u-n,s){for(d=s<0,d?(r=c,s=-s,o=f.length):(r=f,n=u,o=c.length),a=Math.max(Math.ceil(m/dt),o)+2,s>a&&(s=a,r.length=1),r.reverse(),a=s;a--;)r.push(0);r.reverse()}else{for(a=c.length,o=f.length,d=a<o,d&&(o=a),a=0;a<o;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}s=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),o=c.length,a=f.length-o;a>0;--a)c[o++]=0;for(a=f.length;a>s;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=er-1;--c[i],c[a]+=er}c[a]-=f[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,gt?at(t,m):t):new h(0)}function Es(e,t,r){var n,a=Ut(e),i=fa(e.d),s=i.length;return t?(r&&(n=r-s)>0?i=i.charAt(0)+"."+i.slice(1)+ui(n):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+ui(-a-1)+i,r&&(n=r-s)>0&&(i+=ui(n))):a>=s?(i+=ui(a+1-s),r&&(n=r-a-1)>0&&(i=i+"."+ui(n))):((n=a+1)<s&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-s)>0&&(a+1===s&&(i+="."),i+=ui(n))),e.s<0?"-"+i:i}function vj(e,t){if(e.length>t)return e.length=t,!0}function oA(e){var t,r,n;function a(i){var s=this;if(!(s instanceof a))return new a(i);if(s.constructor=a,i instanceof a){s.s=i.s,s.e=i.e,s.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(vs+i);if(i>0)s.s=1;else if(i<0)i=-i,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(i===~~i&&i<1e7){s.e=0,s.d=[i];return}return gj(s,i.toString())}else if(typeof i!="string")throw Error(vs+i);if(i.charCodeAt(0)===45?(i=i.slice(1),s.s=-1):s.s=1,TW.test(i))gj(s,i);else throw Error(vs+i)}if(a.prototype=ve,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=oA,a.config=a.set=DW,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function DW(e){if(!e||typeof e!="object")throw Error(Tn+"Object expected");var t,r,n,a=["precision",1,sl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(ol(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(vs+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(vs+r+": "+n);return this}var Dx=oA(AW);ln=new Dx(1);const Ze=Dx;var IW=e=>e,lA={},cA=e=>e===lA,yj=e=>function t(){return arguments.length===0||arguments.length===1&&cA(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},uA=(e,t)=>e===1?t:yj(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n.filter(s=>s!==lA).length;return i>=e?t(...n):uA(e-i,yj(function(){for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];var u=n.map(d=>cA(d)?o.shift():d);return t(...u,...o)}))}),yp=e=>uA(e.length,e),Jv=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},RW=yp((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),MW=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return IW;var a=r.reverse(),i=a[0],s=a.slice(1);return function(){return s.reduce((o,c)=>c(o),i(...arguments))}},Qv=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),dA=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t&&a.every((s,o)=>{var c;return s===((c=t)===null||c===void 0?void 0:c[o])})||(t=a,r=e(...a)),r}};function fA(e){var t;return e===0?t=1:t=Math.floor(new Ze(e).abs().log(10).toNumber())+1,t}function hA(e,t,r){for(var n=new Ze(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}yp((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});yp((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});yp((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var pA=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},mA=(e,t,r)=>{if(e.lte(0))return new Ze(0);var n=fA(e.toNumber()),a=new Ze(10).pow(n),i=e.div(a),s=n!==1?.05:.1,o=new Ze(Math.ceil(i.div(s).toNumber())).add(r).mul(s),c=o.mul(a);return t?new Ze(c.toNumber()):new Ze(Math.ceil(c.toNumber()))},$W=(e,t,r)=>{var n=new Ze(1),a=new Ze(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Ze(10).pow(fA(e)-1),a=new Ze(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Ze(Math.floor(e)))}else e===0?a=new Ze(Math.floor((t-1)/2)):r||(a=new Ze(Math.floor(e)));var s=Math.floor((t-1)/2),o=MW(RW(c=>a.add(new Ze(c-s).mul(n)).toNumber()),Jv);return o(0,t)},gA=function(t,r,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Ze(0),tickMin:new Ze(0),tickMax:new Ze(0)};var s=mA(new Ze(r).sub(t).div(n-1),a,i),o;t<=0&&r>=0?o=new Ze(0):(o=new Ze(t).add(r).div(2),o=o.sub(new Ze(o).mod(s)));var c=Math.ceil(o.sub(t).div(s).toNumber()),u=Math.ceil(new Ze(r).sub(o).div(s).toNumber()),d=c+u+1;return d>n?gA(t,r,n,a,i+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:s,tickMin:o.sub(new Ze(c).mul(s)),tickMax:o.add(new Ze(u).mul(s))})};function LW(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[s,o]=pA([t,r]);if(s===-1/0||o===1/0){var c=o===1/0?[s,...Jv(0,n-1).map(()=>1/0)]:[...Jv(0,n-1).map(()=>-1/0),o];return t>r?Qv(c):c}if(s===o)return $W(s,n,a);var{step:u,tickMin:d,tickMax:f}=gA(s,o,i,a,0),h=hA(d,f.add(new Ze(.1).mul(u)),u);return t>r?Qv(h):h}function FW(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,s]=pA([r,n]);if(i===-1/0||s===1/0)return[r,n];if(i===s)return[i];var o=Math.max(t,2),c=mA(new Ze(s).sub(i).div(o-1),a,0),u=[...hA(new Ze(i),new Ze(s),c),s];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?Qv(u):u}var BW=dA(LW),UW=dA(FW),vA=e=>e.rootProps.maxBarSize,zW=e=>e.rootProps.barGap,yA=e=>e.rootProps.barCategoryGap,WW=e=>e.rootProps.barSize,xp=e=>e.rootProps.stackOffset,Ix=e=>e.options.chartName,Rx=e=>e.rootProps.syncId,xA=e=>e.rootProps.syncMethod,Mx=e=>e.options.eventEmitter,nr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},ja={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},an={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},bp=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},KW={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ja.angleAxisId,includeHidden:!1,name:void 0,reversed:ja.reversed,scale:ja.scale,tick:ja.tick,tickCount:void 0,ticks:void 0,type:ja.type,unit:void 0},HW={allowDataOverflow:an.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:an.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:an.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:an.scale,tick:an.tick,tickCount:an.tickCount,ticks:void 0,type:an.type,unit:void 0},qW={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ja.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ja.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ja.scale,tick:ja.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},VW={allowDataOverflow:an.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:an.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:an.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:an.scale,tick:an.tick,tickCount:an.tickCount,ticks:void 0,type:"category",unit:void 0},$x=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?qW:KW,Lx=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?VW:HW,wp=e=>e.polarOptions,Fx=U([Xa,Ja,sr],K8),bA=U([wp,Fx],(e,t)=>{if(e!=null)return ea(e.innerRadius,t,0)}),wA=U([wp,Fx],(e,t)=>{if(e!=null)return ea(e.outerRadius,t,t*.8)}),GW=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},_A=U([wp],GW);U([$x,_A],bp);var jA=U([Fx,bA,wA],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});U([Lx,jA],bp);var SA=U([Xe,wp,bA,wA,Xa,Ja],(e,t,r,n,a,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:s,cy:o,startAngle:c,endAngle:u}=t;return{cx:ea(s,a,a/2),cy:ea(o,i,i/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Yt=(e,t)=>t,_p=(e,t,r)=>r;function Bx(e){return e==null?void 0:e.id}function NA(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:a,dataKey:i}=r,s=new Map;return e.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=Bx(o);u.forEach((f,h)=>{var m=i==null||a?h:String(ir(f,i,null)),g=ir(f,o.dataKey,0),y;s.has(m)?y=s.get(m):y={},Object.assign(y,{[d]:g}),s.set(m,y)})}}),Array.from(s.values())}function jp(e){return e.stackId!=null&&e.dataKey!=null}var Sp=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Np(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function YW(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Xt=e=>{var t=Xe(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},ll=e=>e.tooltip.settings.axisId;function xj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Kf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xj(Object(r),!0).forEach(function(n){XW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XW(e,t,r){return(t=JW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JW(e){var t=QW(e,"string");return typeof t=="symbol"?t:t+""}function QW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zv=[0,"auto"],tn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},kA=(e,t)=>e.cartesianAxis.xAxis[t],Za=(e,t)=>{var r=kA(e,t);return r??tn},rn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Zv,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:ru},CA=(e,t)=>e.cartesianAxis.yAxis[t],ei=(e,t)=>{var r=CA(e,t);return r??rn},ZW={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Ux=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??ZW},$r=(e,t,r)=>{switch(t){case"xAxis":return Za(e,r);case"yAxis":return ei(e,r);case"zAxis":return Ux(e,r);case"angleAxis":return $x(e,r);case"radiusAxis":return Lx(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},eK=(e,t,r)=>{switch(t){case"xAxis":return Za(e,r);case"yAxis":return ei(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},lu=(e,t,r)=>{switch(t){case"xAxis":return Za(e,r);case"yAxis":return ei(e,r);case"angleAxis":return $x(e,r);case"radiusAxis":return Lx(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},EA=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function PA(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var kp=e=>e.graphicalItems.cartesianItems,tK=U([Yt,_p],PA),OA=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),cu=U([kp,$r,tK],OA,{memoizeOptions:{resultEqualityCheck:Np}}),AA=U([cu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(jp)),TA=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),rK=U([cu],TA),DA=e=>e.map(t=>t.data).filter(Boolean).flat(1),nK=U([cu],DA,{memoizeOptions:{resultEqualityCheck:Np}}),IA=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},zx=U([nK,vp],IA),RA=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:ir(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:ir(a,n)}))):e.map(n=>({value:n})),Cp=U([zx,$r,cu],RA);function MA(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Pd(e){if(ga(e)||e instanceof Date){var t=Number(e);if(Mt(t))return t}}function bj(e){if(Array.isArray(e)){var t=[Pd(e[0]),Pd(e[1])];return Cs(t)?t:void 0}var r=Pd(e);if(r!=null)return[r,r]}function qa(e){return e.map(Pd).filter(VF)}function aK(e,t,r){return!r||typeof t!="number"||Zn(t)?[]:r.length?qa(r.flatMap(n=>{var a=ir(e,n.dataKey),i,s;if(Array.isArray(a)?[i,s]=a:i=s=a,!(!Mt(i)||!Mt(s)))return[t-i,t+s]})):[]}var Jt=e=>{var t=Xt(e),r=ll(e);return lu(e,t,r)},$A=U([Jt],e=>e==null?void 0:e.dataKey),iK=U([AA,vp,Jt],NA),LA=(e,t,r)=>{var n={},a=t.reduce((i,s)=>(s.stackId==null||(i[s.stackId]==null&&(i[s.stackId]=[]),i[s.stackId].push(s)),i),n);return Object.fromEntries(Object.entries(a).map(i=>{var[s,o]=i,c=o.map(Bx);return[s,{stackedData:QU(e,c,r),graphicalItems:o}]}))},ey=U([iK,AA,xp],LA),FA=(e,t,r,n)=>{var{dataStartIndex:a,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var s=nz(e,a,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},sK=U([$r],e=>e.allowDataOverflow),Wx=e=>{var t;if(e==null||!("domain"in e))return Zv;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=qa(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:Zv},BA=U([$r],Wx),UA=U([BA,sK],rA),oK=U([ey,Ui,Yt,UA],FA,{memoizeOptions:{resultEqualityCheck:Sp}}),Kx=e=>e.errorBars,lK=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>MA(r,n)),Hf=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var i=a.flat(),s=Math.min(...i),o=Math.max(...i);return[s,o]}},zA=(e,t,r,n,a)=>{var i,s;if(r.length>0&&e.forEach(o=>{r.forEach(c=>{var u,d,f=(u=n[c.id])===null||u===void 0?void 0:u.filter(x=>MA(a,x)),h=ir(o,(d=t.dataKey)!==null&&d!==void 0?d:c.dataKey),m=aK(o,h,f);if(m.length>=2){var g=Math.min(...m),y=Math.max(...m);(i==null||g<i)&&(i=g),(s==null||y>s)&&(s=y)}var v=bj(h);v!=null&&(i=i==null?v[0]:Math.min(i,v[0]),s=s==null?v[1]:Math.max(s,v[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(o=>{var c=bj(ir(o,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),Mt(i)&&Mt(s))return[i,s]},cK=U([zx,$r,rK,Kx,Yt],zA,{memoizeOptions:{resultEqualityCheck:Sp}});function uK(e){var{value:t}=e;if(ga(t)||t instanceof Date)return t}var dK=(e,t,r)=>{var n=e.map(uK).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&zE(n))?wO(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},WA=e=>e.referenceElements.dots,cl=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),fK=U([WA,Yt,_p],cl),KA=e=>e.referenceElements.areas,hK=U([KA,Yt,_p],cl),HA=e=>e.referenceElements.lines,pK=U([HA,Yt,_p],cl),qA=(e,t)=>{var r=qa(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},mK=U(fK,Yt,qA),VA=(e,t)=>{var r=qa(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},gK=U([hK,Yt],VA);function vK(e){var t;if(e.x!=null)return qa([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:qa(r)}function yK(e){var t;if(e.y!=null)return qa([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:qa(r)}var GA=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?vK(n):yK(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},xK=U([pK,Yt],GA),bK=U(mK,xK,gK,(e,t,r)=>Hf(e,r,t)),YA=(e,t,r,n,a,i,s,o)=>{if(r!=null)return r;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?Hf(n,i,a):Hf(i,a);return OW(t,u,e.allowDataOverflow)},wK=U([$r,BA,UA,oK,cK,bK,Xe,Yt],YA,{memoizeOptions:{resultEqualityCheck:Sp}}),_K=[0,1],XA=(e,t,r,n,a,i,s)=>{if(!((e==null||r==null||r.length===0)&&s===void 0)){var{dataKey:o,type:c}=e,u=Li(t,i);if(u&&o==null){var d;return wO(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?dK(n,e,u):a==="expand"?_K:s}},Hx=U([$r,Xe,zx,Cp,xp,Yt,wK],XA),JA=(e,t,r,n,a)=>{if(e!=null){var{scale:i,type:s}=e;if(i==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":s==="category"?"band":"linear";if(typeof i=="string"){var o="scale".concat(Zc(i));return o in Fl?o:"point"}}},uu=U([$r,Xe,EA,Ix,Yt],JA);function jK(e){if(e!=null){if(e in Fl)return Fl[e]();var t="scale".concat(Zc(e));if(t in Fl)return Fl[t]()}}function qx(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=jK(t);if(a!=null){var i=a.domain(r).range(n);return VU(i),i}}}var QA=(e,t,r)=>{var n=Wx(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Cs(e))return BW(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Cs(e))return UW(e,t.tickCount,t.allowDecimals)}},Vx=U([Hx,lu,uu],QA),ZA=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Cs(t)&&Array.isArray(r)&&r.length>0){var a=t[0],i=r[0],s=t[1],o=r[r.length-1];return[Math.min(a,i),Math.max(s,o)]}return t},SK=U([$r,Hx,Vx,Yt],ZA),NK=U(Cp,$r,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(qa(e.map(o=>o.value))).sort((o,c)=>o-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var i=0;i<n.length-1;i++){var s=n[i+1]-n[i];r=Math.min(r,s)}return r/a}}),eT=U(NK,Xe,yA,sr,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Mt(e))return 0;var i=t==="vertical"?n.height:n.width;if(a==="gap")return e*i/2;if(a==="no-gap"){var s=ea(r,e*i),o=e*i/2;return o-s-(o-s)/i*s}return 0}),kK=(e,t)=>{var r=Za(e,t);return r==null||typeof r.padding!="string"?0:eT(e,"xAxis",t,r.padding)},CK=(e,t)=>{var r=ei(e,t);return r==null||typeof r.padding!="string"?0:eT(e,"yAxis",t,r.padding)},EK=U(Za,kK,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),PK=U(ei,CK,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),OK=U([sr,EK,sp,ip,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:i}=n;return a?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),AK=U([sr,Xe,PK,sp,ip,(e,t,r)=>r],(e,t,r,n,a,i)=>{var{padding:s}=a;return i?[n.height-s.bottom,s.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),du=(e,t,r,n)=>{var a;switch(t){case"xAxis":return OK(e,r,n);case"yAxis":return AK(e,r,n);case"zAxis":return(a=Ux(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return _A(e);case"radiusAxis":return jA(e,r);default:return}},tT=U([$r,du],bp),ul=U([$r,uu,SK,tT],qx);U([cu,Kx,Yt],lK);function rT(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Ep=(e,t)=>t,Pp=(e,t,r)=>r,TK=U(np,Ep,Pp,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(rT)),DK=U(ap,Ep,Pp,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(rT)),nT=(e,t)=>({width:e.width,height:t.height}),IK=(e,t)=>{var r=typeof t.width=="number"?t.width:ru;return{width:r,height:e.height}},aT=U(sr,Za,nT),RK=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},MK=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},$K=U(Ja,sr,TK,Ep,Pp,(e,t,r,n,a)=>{var i={},s;return r.forEach(o=>{var c=nT(t,o);s==null&&(s=RK(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;i[o.id]=s-Number(u)*c.height,s+=(u?-1:1)*c.height}),i}),LK=U(Xa,sr,DK,Ep,Pp,(e,t,r,n,a)=>{var i={},s;return r.forEach(o=>{var c=IK(t,o);s==null&&(s=MK(t,n,e));var u=n==="left"&&!a||n==="right"&&a;i[o.id]=s-Number(u)*c.width,s+=(u?-1:1)*c.width}),i}),FK=(e,t)=>{var r=Za(e,t);if(r!=null)return $K(e,r.orientation,r.mirror)},BK=U([sr,Za,FK,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:e.left,y:0}:{x:e.left,y:a}}}),UK=(e,t)=>{var r=ei(e,t);if(r!=null)return LK(e,r.orientation,r.mirror)},zK=U([sr,ei,UK,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:e.top}:{x:a,y:e.top}}}),iT=U(sr,ei,(e,t)=>{var r=typeof t.width=="number"?t.width:ru;return{width:r,height:e.height}}),wj=(e,t,r)=>{switch(t){case"xAxis":return aT(e,r).width;case"yAxis":return iT(e,r).height;default:return}},sT=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:i,dataKey:s}=r,o=Li(e,n),c=t.map(u=>u.value);if(s&&o&&i==="category"&&a&&zE(c))return c}},Gx=U([Xe,Cp,$r,Yt],sT),oT=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:i}=r,s=Li(e,n);if(s&&(a==="number"||i!=="auto"))return t.map(o=>o.value)}},Yx=U([Xe,Cp,lu,Yt],oT),_j=U([Xe,eK,uu,ul,Gx,Yx,du,Vx,Yt],(e,t,r,n,a,i,s,o,c)=>{if(t!=null){var u=Li(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:a,isCategorical:u,niceTicks:o,range:s,realScaleType:r,scale:n}}}),WK=(e,t,r,n,a,i,s,o,c)=>{if(!(t==null||n==null)){var u=Li(e,c),{type:d,ticks:f,tickCount:h}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/m:0;g=c==="angleAxis"&&i!=null&&i.length>=2?Wr(i[0]-i[1])*2*g:g;var y=f||a;if(y){var v=y.map((x,w)=>{var b=s?s.indexOf(x):x;return{index:w,coordinate:n(b)+g,value:x,offset:g}});return v.filter(x=>Mt(x.coordinate))}return u&&o?o.map((x,w)=>({coordinate:n(x)+g,value:x,index:w,offset:g})).filter(x=>Mt(x.coordinate)):n.ticks?n.ticks(h).map(x=>({coordinate:n(x)+g,value:x,offset:g})):n.domain().map((x,w)=>({coordinate:n(x)+g,value:s?s[x]:x,index:w,offset:g}))}},lT=U([Xe,lu,uu,ul,Vx,du,Gx,Yx,Yt],WK),KK=(e,t,r,n,a,i,s)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=Li(e,s),{tickCount:c}=t,u=0;return u=s==="angleAxis"&&(n==null?void 0:n.length)>=2?Wr(n[0]-n[1])*2*u:u,o&&i?i.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},Ti=U([Xe,lu,ul,du,Gx,Yx,Yt],KK),Di=U($r,ul,(e,t)=>{if(!(e==null||t==null))return Kf(Kf({},e),{},{scale:t})}),HK=U([$r,uu,Hx,tT],qx);U((e,t,r)=>Ux(e,r),HK,(e,t)=>{if(!(e==null||t==null))return Kf(Kf({},e),{},{scale:t})});var qK=U([Xe,np,ap],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),cT=e=>e.options.defaultTooltipEventType,uT=e=>e.options.validateTooltipEventTypes;function dT(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Xx(e,t){var r=cT(e),n=uT(e);return dT(t,r,n)}function VK(e){return Se(t=>Xx(t,e))}var fT=(e,t)=>{var r,n=Number(t);if(!(Zn(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},GK=e=>e.tooltip.settings,mi={active:!1,index:null,dataKey:void 0,coordinate:void 0},YK={itemInteraction:{click:mi,hover:mi},axisInteraction:{click:mi,hover:mi},keyboardInteraction:mi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},hT=Gr({name:"tooltip",initialState:YK,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:qt()},removeTooltipEntrySettings:{reducer(e,t){var r=Aa(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:qt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:XK,removeTooltipEntrySettings:JK,setTooltipSettingsState:QK,setActiveMouseOverItemIndex:pT,mouseLeaveItem:ZK,mouseLeaveChart:mT,setActiveClickItemIndex:eH,setMouseOverAxisIndex:gT,setMouseClickAxisIndex:tH,setSyncInteraction:ty,setKeyboardInteraction:ry}=hT.actions,rH=hT.reducer;function jj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function od(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jj(Object(r),!0).forEach(function(n){nH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nH(e,t,r){return(t=aH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aH(e){var t=iH(e,"string");return typeof t=="symbol"?t:t+""}function iH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sH(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function oH(e){return e.index!=null}var vT=(e,t,r,n)=>{if(t==null)return mi;var a=sH(e,t,r);if(a==null)return mi;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(oH(a)){if(i)return od(od({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return od(od({},mi),{},{coordinate:a.coordinate})},Jx=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Mt(n))return r;var a=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(a,Math.min(n,i)))},yT=(e,t,r,n,a,i,s,o)=>{if(!(i==null||o==null)){var c=s[0],u=c==null?void 0:o(c.positions,i);if(u!=null)return u;var d=a==null?void 0:a[Number(i)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},xT=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var s;return((s=i.settings)===null||s===void 0?void 0:s.dataKey)===a})},fu=e=>e.options.tooltipPayloadSearcher,dl=e=>e.tooltip;function Sj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sj(Object(r),!0).forEach(function(n){lH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lH(e,t,r){return(t=cH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cH(e){var t=uH(e,"string");return typeof t=="symbol"?t:t+""}function uH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dH(e,t){return e??t}var bT=(e,t,r,n,a,i,s)=>{if(!(t==null||i==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,m)=>{var g,{dataDefinedOnItem:y,settings:v}=m,x=dH(y,o),w=Array.isArray(x)?VP(x,u,d):x,b=(g=v==null?void 0:v.dataKey)!==null&&g!==void 0?g:n,_=v==null?void 0:v.nameKey,j;if(n&&Array.isArray(w)&&!Array.isArray(w[0])&&s==="axis"?j=WE(w,n,a):j=i(w,t,c,_),Array.isArray(j))j.forEach(N=>{var k=Nj(Nj({},v),{},{name:N.name,unit:N.unit,color:void 0,fill:void 0});h.push(s1({tooltipEntrySettings:k,dataKey:N.dataKey,payload:N.payload,value:ir(N.payload,N.dataKey),name:N.name}))});else{var S;h.push(s1({tooltipEntrySettings:v,dataKey:b,payload:j,value:ir(j,b),name:(S=ir(j,_))!==null&&S!==void 0?S:v==null?void 0:v.name}))}return h},f)}},Qx=U([Jt,Xe,EA,Ix,Xt],JA),fH=U([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),hH=U([Xt,ll],PA),hu=U([fH,Jt,hH],OA,{memoizeOptions:{resultEqualityCheck:Np}}),pH=U([hu],e=>e.filter(jp)),mH=U([hu],DA,{memoizeOptions:{resultEqualityCheck:Np}}),fl=U([mH,Ui],IA),gH=U([pH,Ui,Jt],NA),Zx=U([fl,Jt,hu],RA),wT=U([Jt],Wx),vH=U([Jt],e=>e.allowDataOverflow),_T=U([wT,vH],rA),yH=U([hu],e=>e.filter(jp)),xH=U([gH,yH,xp],LA),bH=U([xH,Ui,Xt,_T],FA),wH=U([hu],TA),_H=U([fl,Jt,wH,Kx,Xt],zA,{memoizeOptions:{resultEqualityCheck:Sp}}),jH=U([WA,Xt,ll],cl),SH=U([jH,Xt],qA),NH=U([KA,Xt,ll],cl),kH=U([NH,Xt],VA),CH=U([HA,Xt,ll],cl),EH=U([CH,Xt],GA),PH=U([SH,EH,kH],Hf),OH=U([Jt,wT,_T,bH,_H,PH,Xe,Xt],YA),jT=U([Jt,Xe,fl,Zx,xp,Xt,OH],XA),AH=U([jT,Jt,Qx],QA),TH=U([Jt,jT,AH,Xt],ZA),ST=e=>{var t=Xt(e),r=ll(e),n=!1;return du(e,t,r,n)},NT=U([Jt,ST],bp),kT=U([Jt,Qx,TH,NT],qx),DH=U([Xe,Zx,Jt,Xt],sT),IH=U([Xe,Zx,Jt,Xt],oT),RH=(e,t,r,n,a,i,s,o)=>{if(t){var{type:c}=t,u=Li(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Wr(a[0]-a[1])*2*f:f,u&&s?s.map((h,m)=>({coordinate:n(h)+f,value:h,index:m,offset:f})):n.domain().map((h,m)=>({coordinate:n(h)+f,value:i?i[h]:h,index:m,offset:f}))}}},ti=U([Xe,Jt,Qx,kT,ST,DH,IH,Xt],RH),eb=U([cT,uT,GK],(e,t,r)=>dT(r.shared,e,t)),CT=e=>e.tooltip.settings.trigger,tb=e=>e.tooltip.settings.defaultIndex,Op=U([dl,eb,CT,tb],vT),Ps=U([Op,fl],Jx),ET=U([ti,Ps],fT),PT=U([Op],e=>{if(e)return e.dataKey}),OT=U([dl,eb,CT,tb],xT),MH=U([Xa,Ja,Xe,sr,ti,tb,OT,fu],yT),$H=U([Op,MH],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),LH=U([Op],e=>e.active),FH=U([OT,Ps,Ui,$A,ET,fu,eb],bT),BH=U([FH],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function kj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kj(Object(r),!0).forEach(function(n){UH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UH(e,t,r){return(t=zH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zH(e){var t=WH(e,"string");return typeof t=="symbol"?t:t+""}function WH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KH=()=>Se(Jt),HH=()=>{var e=KH(),t=Se(ti),r=Se(kT);return Fo(!e||!r?void 0:Cj(Cj({},e),{},{scale:r}),t)};function Ej(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ej(Object(r),!0).forEach(function(n){qH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ej(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qH(e,t,r){return(t=VH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VH(e){var t=GH(e,"string");return typeof t=="symbol"?t:t+""}function GH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YH=(e,t,r,n)=>{var a=t.find(i=>i&&i.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},XH=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="centric"){var i=a.coordinate,{radius:s}=n;return qs(qs(qs({},n),mr(n.cx,n.cy,s,i)),{},{angle:i,radius:s})}var o=a.coordinate,{angle:c}=n;return qs(qs(qs({},n),mr(n.cx,n.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function JH(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var AT=(e,t,r,n,a)=>{var i,s=-1,o=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<o;c++){var u=c>0?r[c-1].coordinate:r[o-1].coordinate,d=r[c].coordinate,f=c>=o-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(Wr(d-u)!==Wr(f-d)){var m=[];if(Wr(f-d)===Wr(a[1]-a[0])){h=f;var g=d+a[1]-a[0];m[0]=Math.min(g,(g+u)/2),m[1]=Math.max(g,(g+u)/2)}else{h=u;var y=f+a[1]-a[0];m[0]=Math.min(d,(y+d)/2),m[1]=Math.max(d,(y+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=m[0]&&e<=m[1]){({index:s}=r[c]);break}}else{var x=Math.min(u,f),w=Math.max(u,f);if(e>(x+d)/2&&e<=(w+d)/2){({index:s}=r[c]);break}}}else if(t){for(var b=0;b<o;b++)if(b===0&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:s}=t[b]);break}}return s},QH=()=>Se(Ix),rb=(e,t)=>t,TT=(e,t,r)=>r,nb=(e,t,r,n)=>n,ZH=U(ti,e=>Xh(e,t=>t.coordinate)),ab=U([dl,rb,TT,nb],vT),DT=U([ab,fl],Jx),eq=(e,t,r)=>{if(t!=null){var n=dl(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},IT=U([dl,rb,TT,nb],xT),qf=U([Xa,Ja,Xe,sr,ti,nb,IT,fu],yT),tq=U([ab,qf],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),RT=U([ti,DT],fT),rq=U([IT,DT,Ui,$A,RT,fu,rb],bT),nq=U([ab],e=>({isActive:e.active,activeIndex:e.index})),aq=(e,t,r,n,a,i,s)=>{if(!(!e||!r||!n||!a)&&JH(e,s)){var o=az(e,t),c=AT(o,i,a,r,n),u=YH(t,a,c,e);return{activeIndex:String(c),activeCoordinate:u}}},iq=(e,t,r,n,a,i,s)=>{if(!(!e||!n||!a||!i||!r)){var o=Y8(e,r);if(o){var c=iz(o,t),u=AT(c,s,i,n,a),d=XH(t,i,u,o);return{activeIndex:String(u),activeCoordinate:d}}}},sq=(e,t,r,n,a,i,s,o)=>{if(!(!e||!t||!n||!a||!i))return t==="horizontal"||t==="vertical"?aq(e,t,n,a,i,s,o):iq(e,t,r,n,a,i,s)},oq=U(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),lq=U(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(nr)),r=Array.from(new Set(t));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:YW}});function Pj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Oj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pj(Object(r),!0).forEach(function(n){cq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cq(e,t,r){return(t=uq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uq(e){var t=dq(e,"string");return typeof t=="symbol"?t:t+""}function dq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fq={},hq={zIndexMap:Object.values(nr).reduce((e,t)=>Oj(Oj({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),fq)},pq=new Set(Object.values(nr));function mq(e){return pq.has(e)}var MT=Gr({name:"zIndex",initialState:hq,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:qt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!mq(r)&&delete e.zIndexMap[r])},prepare:qt()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:a}=t.payload;e.zIndexMap[r]?a?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:a?void 0:n,panoramaElementId:a?n:void 0}},prepare:qt()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:qt()}}}),{registerZIndexPortal:gq,unregisterZIndexPortal:vq,registerZIndexPortalId:yq,unregisterZIndexPortalId:xq}=MT.actions,bq=MT.reducer;function In(e){var{zIndex:t,children:r}=e,n=Dz(),a=n&&t!==void 0&&t!==0,i=Nr(),s=$t();p.useLayoutEffect(()=>a?(s(gq({zIndex:t})),()=>{s(vq({zIndex:t}))}):al,[s,t,a]);var o=Se(u=>oq(u,t,i));if(!a)return r;if(!o)return null;var c=document.getElementById(o);return c?yi.createPortal(r,c):null}function ny(){return ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ny.apply(null,arguments)}function Aj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ld(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Aj(Object(r),!0).forEach(function(n){wq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Aj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wq(e,t,r){return(t=_q(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _q(e){var t=jq(e,"string");return typeof t=="symbol"?t:t+""}function jq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sq(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return p.isValidElement(t)?p.cloneElement(t,n):p.createElement(r,n)}function Nq(e){var t,{coordinate:r,payload:n,index:a,offset:i,tooltipAxisBandSize:s,layout:o,cursor:c,tooltipEventType:u,chartName:d}=e,f=r,h=n,m=a;if(!c||!f||d!=="ScatterChart"&&u!=="axis")return null;var g,y,v;if(d==="ScatterChart")g=f,y=u8,v=nr.cursorLine;else if(d==="BarChart")g=d8(o,f,i,s),y=pO,v=nr.cursorRectangle;else if(o==="radial"&&qE(f)){var{cx:x,cy:w,radius:b,startAngle:_,endAngle:j}=mO(f);g={cx:x,cy:w,startAngle:_,endAngle:j,innerRadius:b,outerRadius:b},y=vO,v=nr.cursorLine}else g={points:Z8(o,f,i)},y=cO,v=nr.cursorLine;var S=typeof c=="object"&&"className"in c?c.className:void 0,N=ld(ld(ld(ld({stroke:"#ccc",pointerEvents:"none"},i),g),Qc(c)),{},{payload:h,payloadIndex:m,className:rt("recharts-tooltip-cursor",S)});return p.createElement(In,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:v},p.createElement(Sq,{cursor:c,cursorComp:y,cursorProps:N}))}function kq(e){var t=HH(),r=aO(),n=nu(),a=QH();return t==null||r==null||n==null||a==null?null:p.createElement(Nq,ny({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var $T=p.createContext(null),Cq=()=>p.useContext($T),LT={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,g=new Array(m);h<m;h++)g[h]=f[h].fn;return g},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,m,g){var y=r?r+u:u;if(!this._events[y])return!1;var v=this._events[y],x=arguments.length,w,b;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),x){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,m),!0;case 6:return v.fn.call(v.context,d,f,h,m,g),!0}for(b=1,w=new Array(x-1);b<x;b++)w[b-1]=arguments[b];v.fn.apply(v.context,w)}else{var _=v.length,j;for(b=0;b<_;b++)switch(v[b].once&&this.removeListener(u,v[b].fn,void 0,!0),x){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,d);break;case 3:v[b].fn.call(v[b].context,d,f);break;case 4:v[b].fn.call(v[b].context,d,f,h);break;default:if(!w)for(j=1,w=new Array(x-1);j<x;j++)w[j-1]=arguments[j];v[b].fn.apply(v[b].context,w)}}return!0},o.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return s(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&s(this,m);else{for(var y=0,v=[],x=g.length;y<x;y++)(g[y].fn!==d||h&&!g[y].once||f&&g[y].context!==f)&&v.push(g[y]);v.length?this._events[m]=v.length===1?v[0]:v:s(this,m)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&s(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(LT);var Eq=LT.exports;const Pq=Ga(Eq);var Mc=new Pq,ay="recharts.syncEvent.tooltip",Tj="recharts.syncEvent.brush";function FT(e,t){if(t){var r=Number.parseInt(t,10);if(!Zn(r))return e==null?void 0:e[r]}}var Oq={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},BT=Gr({name:"options",initialState:Oq,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Aq=BT.reducer,{createEventEmitter:Tq}=BT.actions;function Dq(e){return e.tooltip.syncInteraction}var Iq={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},UT=Gr({name:"chartData",initialState:Iq,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:Dj,setDataStartEndIndexes:Rq,setComputedData:Fee}=UT.actions,Mq=UT.reducer,$q=["x","y"];function Ij(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ij(Object(r),!0).forEach(function(n){Lq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ij(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lq(e,t,r){return(t=Fq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fq(e){var t=Bq(e,"string");return typeof t=="symbol"?t:t+""}function Bq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uq(e,t){if(e==null)return{};var r,n,a=zq(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function zq(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Wq(){var e=Se(Rx),t=Se(Mx),r=$t(),n=Se(xA),a=Se(ti),i=nu(),s=op(),o=Se(c=>c.rootProps.className);p.useEffect(()=>{if(e==null)return al;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){var h;if(s&&d!==null&&d!==void 0&&(h=d.payload)!==null&&h!==void 0&&h.coordinate&&d.payload.sourceViewBox){var m=d.payload.coordinate,{x:g,y}=m,v=Uq(m,$q),{x,y:w,width:b,height:_}=d.payload.sourceViewBox,j=Vs(Vs({},v),{},{x:s.x+(b?(g-x)/b:0)*s.width,y:s.y+(_?(y-w)/_:0)*s.height});r(Vs(Vs({},d),{},{payload:Vs(Vs({},d.payload),{},{coordinate:j})}))}else r(d);return}if(a!=null){var S;if(typeof n=="function"){var N={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},k=n(a,N);S=a[k]}else n==="value"&&(S=a.find(B=>String(B.value)===d.payload.label));var{coordinate:C}=d.payload;if(S==null||d.payload.active===!1||C==null||s==null){r(ty({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:E,y:P}=C,A=Math.min(E,s.x+s.width),H=Math.min(P,s.y+s.height),J={x:i==="horizontal"?S.coordinate:A,y:i==="horizontal"?H:S.coordinate},ee=ty({active:d.payload.active,coordinate:J,dataKey:d.payload.dataKey,index:String(S.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox});r(ee)}}};return Mc.on(ay,c),()=>{Mc.off(ay,c)}},[o,r,t,e,n,a,i,s])}function Kq(){var e=Se(Rx),t=Se(Mx),r=$t();p.useEffect(()=>{if(e==null)return al;var n=(a,i,s)=>{t!==s&&e===a&&r(Rq(i))};return Mc.on(Tj,n),()=>{Mc.off(Tj,n)}},[r,t,e])}function Hq(){var e=$t();p.useEffect(()=>{e(Tq())},[e]),Wq(),Kq()}function qq(e,t,r,n,a,i){var s=Se(m=>eq(m,e,t)),o=Se(Mx),c=Se(Rx),u=Se(xA),d=Se(Dq),f=d==null?void 0:d.active,h=op();p.useEffect(()=>{if(!f&&c!=null&&o!=null){var m=ty({active:i,coordinate:r,dataKey:s,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:h});Mc.emit(ay,c,m,o)}},[f,r,s,a,n,o,c,u,i,h])}function Rj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rj(Object(r),!0).forEach(function(n){Vq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vq(e,t,r){return(t=Gq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gq(e){var t=Yq(e,"string");return typeof t=="symbol"?t:t+""}function Yq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xq(e){return e.dataKey}function Jq(e,t){return p.isValidElement(e)?p.cloneElement(e,t):typeof e=="function"?p.createElement(e,t):p.createElement(zz,t)}var $j=[],Qq={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Is.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Lj(e){var t,r,n=Mr(e,Qq),{active:a,allowEscapeViewBox:i,animationDuration:s,animationEasing:o,content:c,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:h,position:m,reverseDirection:g,useTranslate3d:y,wrapperStyle:v,cursor:x,shared:w,trigger:b,defaultIndex:_,portal:j,axisId:S}=n,N=$t(),k=typeof _=="number"?String(_):_;p.useEffect(()=>{N(QK({shared:w,trigger:b,axisId:S,active:a,defaultIndex:k}))},[N,w,b,S,a,k]);var C=op(),E=lO(),P=VK(w),{activeIndex:A,isActive:H}=(t=Se(M=>nq(M,P,b,k)))!==null&&t!==void 0?t:{},J=Se(M=>rq(M,P,b,k)),ee=Se(M=>RT(M,P,b,k)),B=Se(M=>tq(M,P,b,k)),K=J,D=Cq(),R=(r=a??H)!==null&&r!==void 0?r:!1,[F,le]=qB([K,R]),re=P==="axis"?ee:void 0;qq(P,b,B,re,A,R);var Ne=j??D;if(Ne==null||C==null||P==null)return null;var O=K??$j;R||(O=$j),u&&O.length&&(O=uB(O.filter(M=>M.value!=null&&(M.hide!==!0||n.includeHidden)),h,Xq));var V=O.length>0,te=p.createElement(Yz,{allowEscapeViewBox:i,animationDuration:s,animationEasing:o,isAnimationActive:d,active:R,coordinate:B,hasPayload:V,offset:f,position:m,reverseDirection:g,useTranslate3d:y,viewBox:C,wrapperStyle:v,lastBoundingBox:F,innerRef:le,hasPortalFromProps:!!j},Jq(c,Mj(Mj({},n),{},{payload:O,label:re,active:R,activeIndex:A,coordinate:B,accessibilityLayer:E})));return p.createElement(p.Fragment,null,yi.createPortal(te,Ne),R&&p.createElement(kq,{cursor:x,tooltipEventType:P,coordinate:B,payload:O,index:A}))}var zT=e=>null;zT.displayName="Cell";function Zq(e,t,r){return(t=eV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eV(e){var t=tV(e,"string");return typeof t=="symbol"?t:t+""}function tV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class rV{constructor(t){Zq(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function Fj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fj(Object(r),!0).forEach(function(n){aV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aV(e,t,r){return(t=iV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iV(e){var t=sV(e,"string");return typeof t=="symbol"?t:t+""}function sV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oV={cacheSize:2e3,enableCache:!0},WT=nV({},oV),Bj=new rV(WT.cacheSize),lV={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Uj="recharts_measurement_span";function cV(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",i=t.fontStyle||"",s=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(i,"|").concat(s,"|").concat(o)}var zj=(e,t)=>{try{var r=document.getElementById(Uj);r||(r=document.createElement("span"),r.setAttribute("id",Uj),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,lV,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},ec=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Is.isSsr)return{width:0,height:0};if(!WT.enableCache)return zj(t,r);var n=cV(t,r),a=Bj.get(n);if(a)return a;var i=zj(t,r);return Bj.set(n,i),i},Wj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Kj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uV=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,dV=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,KT={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},fV=Object.keys(KT),mo="NaN";function hV(e,t){return e*KT[t]}class Br{static parse(t){var r,[,n,a]=(r=dV.exec(t))!==null&&r!==void 0?r:[];return new Br(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Zn(t)&&(this.unit=""),r!==""&&!uV.test(r)&&(this.num=NaN,this.unit=""),fV.includes(r)&&(this.num=hV(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Br(NaN,""):new Br(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Br(NaN,""):new Br(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Br(NaN,""):new Br(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Br(NaN,""):new Br(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Zn(this.num)}}function HT(e){if(e.includes(mo))return mo;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,i]=(r=Wj.exec(t))!==null&&r!==void 0?r:[],s=Br.parse(n??""),o=Br.parse(i??""),c=a==="*"?s.multiply(o):s.divide(o);if(c.isNaN())return mo;t=t.replace(Wj,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=Kj.exec(t))!==null&&u!==void 0?u:[],m=Br.parse(d??""),g=Br.parse(h??""),y=f==="+"?m.add(g):m.subtract(g);if(y.isNaN())return mo;t=t.replace(Kj,y.toString())}return t}var Hj=/\(([^()]*)\)/;function pV(e){for(var t=e,r;(r=Hj.exec(t))!=null;){var[,n]=r;t=t.replace(Hj,HT(n))}return t}function mV(e){var t=e.replace(/\s+/g,"");return t=pV(t),t=HT(t),t}function gV(e){try{return mV(e)}catch{return mo}}function Jm(e){var t=gV(e.slice(5,-1));return t===mo?"":t}var vV=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],yV=["dx","dy","angle","className","breakAll"];function iy(){return iy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iy.apply(null,arguments)}function qj(e,t){if(e==null)return{};var r,n,a=xV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var qT=/[ \f\n\r\t\v\u2028\u2029]+/,VT=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];yt(t)||(r?a=t.toString().split(""):a=t.toString().split(qT));var i=a.map(o=>({word:o,width:ec(o,n).width})),s=r?0:ec("",n).width;return{wordsWithComputedWidth:i,spaceWidth:s}}catch{return null}};function bV(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var GT=(e,t,r,n)=>e.reduce((a,i)=>{var{word:s,width:o}=i,c=a[a.length-1];if(c&&o!=null&&(t==null||n||c.width+o+r<Number(t)))c.words.push(s),c.width+=o+r;else{var u={words:[s],width:o};a.push(u)}return a},[]),YT=e=>e.reduce((t,r)=>t.width>r.width?t:r),wV="",Vj=(e,t,r,n,a,i,s,o)=>{var c=e.slice(0,t),u=VT({breakAll:r,style:n,children:c+wV});if(!u)return[!1,[]];var d=GT(u.wordsWithComputedWidth,i,s,o),f=d.length>a||YT(d).width>Number(i);return[f,d]},_V=(e,t,r,n,a)=>{var{maxLines:i,children:s,style:o,breakAll:c}=e,u=we(i),d=String(s),f=GT(t,n,r,a);if(!u||a)return f;var h=f.length>i||YT(f).width>Number(n);if(!h)return f;for(var m=0,g=d.length-1,y=0,v;m<=g&&y<=d.length-1;){var x=Math.floor((m+g)/2),w=x-1,[b,_]=Vj(d,w,c,o,i,n,r,a),[j]=Vj(d,x,c,o,i,n,r,a);if(!b&&!j&&(m=x+1),b&&j&&(g=x-1),!b&&j){v=_;break}y++}return v||f},Gj=e=>{var t=yt(e)?[]:e.toString().split(qT);return[{words:t,width:void 0}]},jV=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:i,maxLines:s}=e;if((t||r)&&!Is.isSsr){var o,c,u=VT({breakAll:i,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,c=f}else return Gj(n);return _V({breakAll:i,children:n,maxLines:s,style:a},o,c,t,!!r)}return Gj(n)},XT="#808080",SV={breakAll:!1,capHeight:"0.71em",fill:XT,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},ib=p.forwardRef((e,t)=>{var r=Mr(e,SV),{x:n,y:a,lineHeight:i,capHeight:s,fill:o,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,f=qj(r,vV),h=p.useMemo(()=>jV({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:m,dy:g,angle:y,className:v,breakAll:x}=f,w=qj(f,yV);if(!ga(n)||!ga(a)||h.length===0)return null;var b=Number(n)+(we(m)?m:0),_=Number(a)+(we(g)?g:0);if(!Mt(b)||!Mt(_))return null;var j;switch(d){case"start":j=Jm("calc(".concat(s,")"));break;case"middle":j=Jm("calc(".concat((h.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:j=Jm("calc(".concat(h.length-1," * -").concat(i,")"));break}var S=[];if(c){var N=h[0].width,{width:k}=f;S.push("scale(".concat(we(k)&&we(N)?k/N:1,")"))}return y&&S.push("rotate(".concat(y,", ").concat(b,", ").concat(_,")")),S.length&&(w.transform=S.join(" ")),p.createElement("text",iy({},Tr(w),{ref:t,x:b,y:_,className:rt("recharts-text",v),textAnchor:u,fill:o.includes("url")?XT:o}),h.map((C,E)=>{var P=C.words.join(x?"":" ");return p.createElement("tspan",{x:b,dy:E===0?j:i,key:"".concat(P,"-").concat(E)},P)}))});ib.displayName="Text";var NV=["labelRef"];function kV(e,t){if(e==null)return{};var r,n,a=CV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function CV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Yj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yj(Object(r),!0).forEach(function(n){EV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EV(e,t,r){return(t=PV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PV(e){var t=OV(e,"string");return typeof t=="symbol"?t:t+""}function OV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sa(){return Sa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sa.apply(null,arguments)}var JT=p.createContext(null),AV=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:a,width:i,height:s,children:o}=e,c=p.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:a,width:i,height:s}),[t,r,n,a,i,s]);return p.createElement(JT.Provider,{value:c},o)},QT=()=>{var e=p.useContext(JT),t=op();return e||nO(t)},TV=p.createContext(null),DV=()=>{var e=p.useContext(TV),t=Se(SA);return e||t},IV=e=>{var{value:t,formatter:r}=e,n=yt(e.children)?t:e.children;return typeof r=="function"?r(n):n},sb=e=>e!=null&&typeof e=="function",RV=(e,t)=>{var r=Wr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},MV=(e,t,r,n,a)=>{var{offset:i,className:s}=e,{cx:o,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:m}=a,g=(u+d)/2,y=RV(f,h),v=y>=0?1:-1,x,w;switch(t){case"insideStart":x=f+v*i,w=m;break;case"insideEnd":x=h-v*i,w=!m;break;case"end":x=h+v*i,w=m;break;default:throw new Error("Unsupported position ".concat(t))}w=y<=0?w:!w;var b=mr(o,c,g,x),_=mr(o,c,g,x+(w?1:-1)*359),j="M".concat(b.x,",").concat(b.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(_.x,",").concat(_.y),S=yt(e.id)?kc("recharts-radial-line-"):e.id;return p.createElement("text",Sa({},n,{dominantBaseline:"central",className:rt("recharts-radial-bar-label",s)}),p.createElement("defs",null,p.createElement("path",{id:S,d:j})),p.createElement("textPath",{xlinkHref:"#".concat(S)},r))},$V=(e,t,r)=>{var{cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:o,endAngle:c}=e,u=(o+c)/2;if(r==="outside"){var{x:d,y:f}=mr(n,a,s+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(i+s)/2,{x:m,y:g}=mr(n,a,h,u);return{x:m,y:g,textAnchor:"middle",verticalAnchor:"middle"}},sy=e=>"cx"in e&&we(e.cx),LV=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,i;r!=null&&!sy(r)&&(i=r);var{x:s,y:o,upperWidth:c,lowerWidth:u,height:d}=t,f=s,h=s+(c-u)/2,m=(f+h)/2,g=(c+u)/2,y=f+c/2,v=d>=0?1:-1,x=v*n,w=v>0?"end":"start",b=v>0?"start":"end",_=c>=0?1:-1,j=_*n,S=_>0?"end":"start",N=_>0?"start":"end";if(a==="top"){var k={x:f+c/2,y:o-x,textAnchor:"middle",verticalAnchor:w};return Dt(Dt({},k),i?{height:Math.max(o-i.y,0),width:c}:{})}if(a==="bottom"){var C={x:h+u/2,y:o+d+x,textAnchor:"middle",verticalAnchor:b};return Dt(Dt({},C),i?{height:Math.max(i.y+i.height-(o+d),0),width:u}:{})}if(a==="left"){var E={x:m-j,y:o+d/2,textAnchor:S,verticalAnchor:"middle"};return Dt(Dt({},E),i?{width:Math.max(E.x-i.x,0),height:d}:{})}if(a==="right"){var P={x:m+g+j,y:o+d/2,textAnchor:N,verticalAnchor:"middle"};return Dt(Dt({},P),i?{width:Math.max(i.x+i.width-P.x,0),height:d}:{})}var A=i?{width:g,height:d}:{};return a==="insideLeft"?Dt({x:m+j,y:o+d/2,textAnchor:N,verticalAnchor:"middle"},A):a==="insideRight"?Dt({x:m+g-j,y:o+d/2,textAnchor:S,verticalAnchor:"middle"},A):a==="insideTop"?Dt({x:f+c/2,y:o+x,textAnchor:"middle",verticalAnchor:b},A):a==="insideBottom"?Dt({x:h+u/2,y:o+d-x,textAnchor:"middle",verticalAnchor:w},A):a==="insideTopLeft"?Dt({x:f+j,y:o+x,textAnchor:N,verticalAnchor:b},A):a==="insideTopRight"?Dt({x:f+c-j,y:o+x,textAnchor:S,verticalAnchor:b},A):a==="insideBottomLeft"?Dt({x:h+j,y:o+d-x,textAnchor:N,verticalAnchor:w},A):a==="insideBottomRight"?Dt({x:h+u-j,y:o+d-x,textAnchor:S,verticalAnchor:w},A):a&&typeof a=="object"&&(we(a.x)||Ua(a.x))&&(we(a.y)||Ua(a.y))?Dt({x:s+ea(a.x,g),y:o+ea(a.y,d),textAnchor:"end",verticalAnchor:"end"},A):Dt({x:y,y:o+d/2,textAnchor:"middle",verticalAnchor:"middle"},A)},FV={offset:5,zIndex:nr.label};function di(e){var t=Mr(e,FV),{viewBox:r,position:n,value:a,children:i,content:s,className:o="",textBreakAll:c,labelRef:u}=t,d=DV(),f=QT(),h=n==="center"?f:d??f,m,g,y;if(r==null?m=h:sy(r)?m=r:m=nO(r),!m||yt(a)&&yt(i)&&!p.isValidElement(s)&&typeof s!="function")return null;var v=Dt(Dt({},t),{},{viewBox:m});if(p.isValidElement(s)){var{labelRef:x}=v,w=kV(v,NV);return p.cloneElement(s,w)}if(typeof s=="function"){if(g=p.createElement(s,v),p.isValidElement(g))return g}else g=IV(t);var b=Tr(t);if(sy(m)){if(n==="insideStart"||n==="insideEnd"||n==="end")return MV(t,n,g,b,m);y=$V(m,t.offset,t.position)}else y=LV(t,m);return p.createElement(In,{zIndex:t.zIndex},p.createElement(ib,Sa({ref:u,className:rt("recharts-label",o)},b,y,{textAnchor:bV(b.textAnchor)?b.textAnchor:y.textAnchor,breakAll:c}),g))}di.displayName="Label";var BV=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?p.createElement(di,Sa({key:"label-implicit"},n)):ga(e)?p.createElement(di,Sa({key:"label-implicit",value:e},n)):p.isValidElement(e)?e.type===di?p.cloneElement(e,Dt({key:"label-implicit"},n)):p.createElement(di,Sa({key:"label-implicit",content:e},n)):sb(e)?p.createElement(di,Sa({key:"label-implicit",content:e},n)):e&&typeof e=="object"?p.createElement(di,Sa({},e,{key:"label-implicit"},n)):null};function UV(e){var{label:t,labelRef:r}=e,n=QT();return BV(t,n,r)||null}var ZT={},eD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(eD);var tD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(tD);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eD,r=tD,n=Gh;function a(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=a})(ZT);var zV=ZT.last;const WV=Ga(zV);var KV=["valueAccessor"],HV=["dataKey","clockWise","id","textBreakAll","zIndex"];function Vf(){return Vf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vf.apply(null,arguments)}function Xj(e,t){if(e==null)return{};var r,n,a=qV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function qV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var VV=e=>Array.isArray(e.value)?WV(e.value):e.value,rD=p.createContext(void 0),nD=rD.Provider,aD=p.createContext(void 0);aD.Provider;function GV(){return p.useContext(rD)}function YV(){return p.useContext(aD)}function Od(e){var{valueAccessor:t=VV}=e,r=Xj(e,KV),{dataKey:n,clockWise:a,id:i,textBreakAll:s,zIndex:o}=r,c=Xj(r,HV),u=GV(),d=YV(),f=u||d;return!f||!f.length?null:p.createElement(In,{zIndex:o??nr.label},p.createElement(On,{className:"recharts-label-list"},f.map((h,m)=>{var g,y=yt(n)?t(h,m):ir(h&&h.payload,n),v=yt(i)?{}:{id:"".concat(i,"-").concat(m)};return p.createElement(di,Vf({key:"label-".concat(m)},Tr(h),c,v,{fill:(g=r.fill)!==null&&g!==void 0?g:h.fill,parentViewBox:h.parentViewBox,value:y,textBreakAll:s,viewBox:h.viewBox,index:m,zIndex:0}))})))}Od.displayName="LabelList";function iD(e){var{label:t}=e;return t?t===!0?p.createElement(Od,{key:"labelList-implicit"}):p.isValidElement(t)||sb(t)?p.createElement(Od,{key:"labelList-implicit",content:t}):typeof t=="object"?p.createElement(Od,Vf({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function oy(){return oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oy.apply(null,arguments)}var sD=e=>{var{cx:t,cy:r,r:n,className:a}=e,i=rt("recharts-dot",a);return we(t)&&we(r)&&we(n)?p.createElement("circle",oy({},Qn(e),z0(e),{className:i,cx:t,cy:r,r:n})):null},XV={radiusAxis:{},angleAxis:{}},oD=Gr({name:"polarAxis",initialState:XV,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Bee,removeRadiusAxis:Uee,addAngleAxis:zee,removeAngleAxis:Wee}=oD.actions,JV=oD.reducer,lD={exports:{}},it={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ob=Symbol.for("react.transitional.element"),lb=Symbol.for("react.portal"),Ap=Symbol.for("react.fragment"),Tp=Symbol.for("react.strict_mode"),Dp=Symbol.for("react.profiler"),Ip=Symbol.for("react.consumer"),Rp=Symbol.for("react.context"),Mp=Symbol.for("react.forward_ref"),$p=Symbol.for("react.suspense"),Lp=Symbol.for("react.suspense_list"),Fp=Symbol.for("react.memo"),Bp=Symbol.for("react.lazy"),QV=Symbol.for("react.view_transition"),ZV=Symbol.for("react.client.reference");function Rn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case ob:switch(e=e.type,e){case Ap:case Dp:case Tp:case $p:case Lp:case QV:return e;default:switch(e=e&&e.$$typeof,e){case Rp:case Mp:case Bp:case Fp:return e;case Ip:return e;default:return t}}case lb:return t}}}it.ContextConsumer=Ip;it.ContextProvider=Rp;it.Element=ob;it.ForwardRef=Mp;it.Fragment=Ap;it.Lazy=Bp;it.Memo=Fp;it.Portal=lb;it.Profiler=Dp;it.StrictMode=Tp;it.Suspense=$p;it.SuspenseList=Lp;it.isContextConsumer=function(e){return Rn(e)===Ip};it.isContextProvider=function(e){return Rn(e)===Rp};it.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===ob};it.isForwardRef=function(e){return Rn(e)===Mp};it.isFragment=function(e){return Rn(e)===Ap};it.isLazy=function(e){return Rn(e)===Bp};it.isMemo=function(e){return Rn(e)===Fp};it.isPortal=function(e){return Rn(e)===lb};it.isProfiler=function(e){return Rn(e)===Dp};it.isStrictMode=function(e){return Rn(e)===Tp};it.isSuspense=function(e){return Rn(e)===$p};it.isSuspenseList=function(e){return Rn(e)===Lp};it.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ap||e===Dp||e===Tp||e===$p||e===Lp||typeof e=="object"&&e!==null&&(e.$$typeof===Bp||e.$$typeof===Fp||e.$$typeof===Rp||e.$$typeof===Ip||e.$$typeof===Mp||e.$$typeof===ZV||e.getModuleId!==void 0)};it.typeOf=Rn;lD.exports=it;var eG=lD.exports,Jj=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",Qj=null,Qm=null,cD=e=>{if(e===Qj&&Array.isArray(Qm))return Qm;var t=[];return p.Children.forEach(e,r=>{yt(r)||(eG.isFragment(r)?t=t.concat(cD(r.props.children)):t.push(r))}),Qm=t,Qj=e,t};function tG(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>Jj(a)):n=[Jj(t)],cD(e).forEach(a=>{var i=$o(a,"type.displayName")||$o(a,"type.name");i&&n.indexOf(i)!==-1&&r.push(a)}),r}var uD=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,dD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(dD);var rG=dD.isPlainObject;const nG=Ga(rG);function Zj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zj(Object(r),!0).forEach(function(n){aG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aG(e,t,r){return(t=iG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iG(e){var t=sG(e,"string");return typeof t=="symbol"?t:t+""}function sG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gf(){return Gf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gf.apply(null,arguments)}var tS=(e,t,r,n,a)=>{var i=r-n,s;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-i/2,",").concat(t+a),s+="L ".concat(e+r-i/2-n,",").concat(t+a),s+="L ".concat(e,",").concat(t," Z"),s},oG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},lG=e=>{var t=Mr(e,oG),{x:r,y:n,upperWidth:a,lowerWidth:i,height:s,className:o}=t,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:f}=t,h=p.useRef(null),[m,g]=p.useState(-1),y=p.useRef(a),v=p.useRef(i),x=p.useRef(s),w=p.useRef(r),b=p.useRef(n),_=up(e,"trapezoid-");if(p.useEffect(()=>{if(h.current&&h.current.getTotalLength)try{var J=h.current.getTotalLength();J&&g(J)}catch{}},[]),r!==+r||n!==+n||a!==+a||i!==+i||s!==+s||a===0&&i===0||s===0)return null;var j=rt("recharts-trapezoid",o);if(!f)return p.createElement("g",null,p.createElement("path",Gf({},Tr(t),{className:j,d:tS(r,n,a,i,s)})));var S=y.current,N=v.current,k=x.current,C=w.current,E=b.current,P="0px ".concat(m===-1?1:m,"px"),A="".concat(m,"px 0px"),H=uO(["strokeDasharray"],u,c);return p.createElement(cp,{animationId:_,key:_,canBegin:m>0,duration:u,easing:c,isActive:f,begin:d},J=>{var ee=Ot(S,a,J),B=Ot(N,i,J),K=Ot(k,s,J),D=Ot(C,r,J),R=Ot(E,n,J);h.current&&(y.current=ee,v.current=B,x.current=K,w.current=D,b.current=R);var F=J>0?{transition:H,strokeDasharray:A}:{strokeDasharray:P};return p.createElement("path",Gf({},Tr(t),{className:j,d:tS(D,R,ee,B,K),ref:h,style:eS(eS({},F),t.style)}))})},cG=["option","shapeType","propTransformer","activeClassName","isActive"];function uG(e,t){if(e==null)return{};var r,n,a=dG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function dG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function rS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rS(Object(r),!0).forEach(function(n){fG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fG(e,t,r){return(t=hG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hG(e){var t=pG(e,"string");return typeof t=="symbol"?t:t+""}function pG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mG(e,t){return Yf(Yf({},t),e)}function gG(e,t){return e==="symbols"}function nS(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return p.createElement(pO,r);case"trapezoid":return p.createElement(lG,r);case"sector":return p.createElement(vO,r);case"symbols":if(gG(t))return p.createElement(HE,r);break;case"curve":return p.createElement(cO,r);default:return null}}function vG(e){return p.isValidElement(e)?e.props:e}function fD(e){var{option:t,shapeType:r,propTransformer:n=mG,activeClassName:a="recharts-active-shape",isActive:i}=e,s=uG(e,cG),o;if(p.isValidElement(t))o=p.cloneElement(t,Yf(Yf({},s),vG(t)));else if(typeof t=="function")o=t(s);else if(nG(t)&&typeof t!="boolean"){var c=n(t,s);o=p.createElement(nS,{shapeType:r,elementProps:c})}else{var u=s;o=p.createElement(nS,{shapeType:r,elementProps:u})}return i?p.createElement(On,{className:a},o):o}var hD=(e,t)=>{var r=$t();return(n,a)=>i=>{e==null||e(n,a,i),r(pT({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},pD=e=>{var t=$t();return(r,n)=>a=>{e==null||e(r,n,a),t(ZK())}},mD=(e,t)=>{var r=$t();return(n,a)=>i=>{e==null||e(n,a,i),r(eH({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function gD(e){var{fn:t,args:r}=e,n=$t(),a=Nr();return p.useLayoutEffect(()=>{if(!a){var i=t(r);return n(XK(i)),()=>{n(JK(i))}}},[t,r,n,a]),null}function vD(e){var{legendPayload:t}=e,r=$t(),n=Nr();return p.useLayoutEffect(()=>n?al:(r(Rz(t)),()=>{r(Mz(t))}),[r,n,t]),null}var Zm,yG=()=>{var[e]=p.useState(()=>kc("uid-"));return e},xG=(Zm=wI.useId)!==null&&Zm!==void 0?Zm:yG;function yD(e,t){var r=xG();return t||(e?"".concat(e,"-").concat(r):r)}var bG=p.createContext(void 0),xD=e=>{var{id:t,type:r,children:n}=e,a=yD("recharts-".concat(r),t);return p.createElement(bG.Provider,{value:a},n(a))},wG={cartesianItems:[],polarItems:[]},bD=Gr({name:"graphicalItems",initialState:wG,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:qt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,a=Aa(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},prepare:qt()},removeCartesianGraphicalItem:{reducer(e,t){var r=Aa(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:qt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:qt()},removePolarGraphicalItem:{reducer(e,t){var r=Aa(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:qt()}}}),{addCartesianGraphicalItem:_G,replaceCartesianGraphicalItem:jG,removeCartesianGraphicalItem:SG,addPolarGraphicalItem:Kee,removePolarGraphicalItem:Hee}=bD.actions,NG=bD.reducer;function wD(e){var t=$t(),r=p.useRef(null);return p.useLayoutEffect(()=>{r.current===null?t(_G(e)):r.current!==e&&t(jG({prev:r.current,next:e})),r.current=e},[t,e]),p.useLayoutEffect(()=>()=>{r.current&&(t(SG(r.current)),r.current=null)},[t]),null}var kG=["points"];function aS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aS(Object(r),!0).forEach(function(n){CG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CG(e,t,r){return(t=EG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EG(e){var t=PG(e,"string");return typeof t=="symbol"?t:t+""}function PG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xf(){return Xf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xf.apply(null,arguments)}function OG(e,t){if(e==null)return{};var r,n,a=AG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function AG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function TG(e){var{option:t,dotProps:r,className:n}=e;if(p.isValidElement(t))return p.cloneElement(t,r);if(typeof t=="function")return t(r);var a=rt(n,typeof t!="boolean"?t.className:""),i=r??{},{points:s}=i,o=OG(i,kG);return p.createElement(sD,Xf({},o,{className:a}))}function DG(e,t){return e==null?!1:t?!0:e.length===1}function IG(e){var{points:t,dot:r,className:n,dotClassName:a,dataKey:i,baseProps:s,needClip:o,clipPathId:c,zIndex:u=nr.scatter}=e;if(!DG(t,r))return null;var d=uD(r),f=aF(r),h=t.map((g,y)=>{var v,x,w=eg(eg(eg({r:3},s),f),{},{index:y,cx:(v=g.x)!==null&&v!==void 0?v:void 0,cy:(x=g.y)!==null&&x!==void 0?x:void 0,dataKey:i,value:g.value,payload:g.payload,points:t});return p.createElement(TG,{key:"dot-".concat(y),option:r,dotProps:w,className:a})}),m={};return o&&c!=null&&(m.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(c,")")),p.createElement(In,{zIndex:u},p.createElement(On,Xf({className:n},m),h))}function iS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iS(Object(r),!0).forEach(function(n){RG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RG(e,t,r){return(t=MG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MG(e){var t=$G(e,"string");return typeof t=="symbol"?t:t+""}function $G(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LG={xAxis:{},yAxis:{},zAxis:{}},_D=Gr({name:"cartesianAxis",initialState:LG,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:qt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:qt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:qt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:qt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:qt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:qt()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,a=e.yAxis[r];if(a){var i=a.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==a.width&&Math.abs(n-i[0])<=1)return;var s=[...i,n].slice(-3);e.yAxis[r]=sS(sS({},e.yAxis[r]),{},{width:n,widthHistory:s})}}}}),{addXAxis:FG,removeXAxis:BG,addYAxis:UG,removeYAxis:zG,addZAxis:qee,removeZAxis:Vee,updateYAxisWidth:WG}=_D.actions,KG=_D.reducer,HG=U([sr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),qG=U([HG,Xa,Ja],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),cb=()=>Se(qG),VG=()=>Se(BH);function oS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oS(Object(r),!0).forEach(function(n){GG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GG(e,t,r){return(t=YG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YG(e){var t=XG(e,"string");return typeof t=="symbol"?t:t+""}function XG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JG=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:i}=e;if(a===!1||t.x==null||t.y==null)return null;var s={index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},o=tg(tg(tg({},s),Qc(a)),z0(a)),c;return p.isValidElement(a)?c=p.cloneElement(a,o):typeof a=="function"?c=a(o):c=p.createElement(sD,o),p.createElement(On,{className:"recharts-active-dot"},c)};function QG(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a,zIndex:i=nr.activeDot}=e,s=Se(Ps),o=VG();if(t==null||o==null)return null;var c=t.find(u=>o.includes(u.payload));return yt(c)?null:p.createElement(In,{zIndex:i},p.createElement(JG,{point:c,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n}))}var ZG="Invariant failed";function eY(e,t){throw new Error(ZG)}var tY=["x","y"];function ly(){return ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ly.apply(null,arguments)}function lS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Pl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lS(Object(r),!0).forEach(function(n){rY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rY(e,t,r){return(t=nY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nY(e){var t=aY(e,"string");return typeof t=="symbol"?t:t+""}function aY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iY(e,t){if(e==null)return{};var r,n,a=sY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function sY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function oY(e,t){var{x:r,y:n}=e,a=iY(e,tY),i="".concat(r),s=parseInt(i,10),o="".concat(n),c=parseInt(o,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return Pl(Pl(Pl(Pl(Pl({},t),a),s?{x:s}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function Jf(e){return p.createElement(fD,ly({shapeType:"rectangle",propTransformer:oY,activeClassName:"recharts-active-bar"},e))}var lY=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(we(t))return t;var i=we(n)||yt(n);return i?t(n,a):(i||eY(),r)}},cY={},jD=Gr({name:"errorBars",initialState:cY,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:a}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?a:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:Gee,replaceErrorBar:Yee,removeErrorBar:Xee}=jD.actions,uY=jD.reducer,dY=["children"];function fY(e,t){if(e==null)return{};var r,n,a=hY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function hY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var pY={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},mY=p.createContext(pY);function SD(e){var{children:t}=e,r=fY(e,dY);return p.createElement(mY.Provider,{value:r},t)}function ub(e,t){var r,n,a=Se(u=>Za(u,e)),i=Se(u=>ei(u,t)),s=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:tn.allowDataOverflow,o=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:rn.allowDataOverflow,c=s||o;return{needClip:c,needClipX:s,needClipY:o}}function ND(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=cb(),{needClipX:i,needClipY:s,needClip:o}=ub(t,r);if(!o||!a)return null;var{x:c,y:u,width:d,height:f}=a;return p.createElement("clipPath",{id:"clipPath-".concat(n)},p.createElement("rect",{x:i?c:c-d/2,y:s?u:u-f/2,width:i?d:d*2,height:s?f:f*2}))}function gY(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Mt(e.zIndex)?e.zIndex:t}var vY=["onMouseEnter","onMouseLeave","onClick"],yY=["value","background","tooltipPosition"],xY=["id"],bY=["onMouseEnter","onClick","onMouseLeave"];function Va(){return Va=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Va.apply(null,arguments)}function cS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Pr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cS(Object(r),!0).forEach(function(n){wY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wY(e,t,r){return(t=_Y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Y(e){var t=jY(e,"string");return typeof t=="symbol"?t:t+""}function jY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qf(e,t){if(e==null)return{};var r,n,a=SY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function SY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var NY=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:rp(r,t),payload:e}]};function kY(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:i,hide:s,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:rp(i,t),hide:s,type:e.tooltipType,color:e.fill,unit:o}}}function CY(e){var t=Se(Ps),{data:r,dataKey:n,background:a,allOtherBarProps:i}=e,{onMouseEnter:s,onMouseLeave:o,onClick:c}=i,u=Qf(i,vY),d=hD(s,n),f=pD(o),h=mD(c,n);if(!a||r==null)return null;var m=Qc(a);return p.createElement(In,{zIndex:gY(a,nr.barBackground)},r.map((g,y)=>{var{value:v,background:x,tooltipPosition:w}=g,b=Qf(g,yY);if(!x)return null;var _=d(g,y),j=f(g,y),S=h(g,y),N=Pr(Pr(Pr(Pr(Pr({option:a,isActive:String(y)===t},b),{},{fill:"#eee"},x),m),W0(u,g,y)),{},{onMouseEnter:_,onMouseLeave:j,onClick:S,dataKey:n,index:y,className:"recharts-bar-background-rectangle"});return p.createElement(Jf,Va({key:"background-bar-".concat(y)},N))}))}function EY(e){var{showLabels:t,children:r,rects:n}=e,a=n==null?void 0:n.map(i=>{var s={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return Pr(Pr({},s),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:s,fill:i.fill})});return p.createElement(nD,{value:t?a:void 0},r)}function PY(e){var{shape:t,activeBar:r,baseProps:n,entry:a,index:i,dataKey:s}=e,o=Se(Ps),c=Se(PT),u=r&&String(i)===o&&(c==null||s===c),d=u?r:t;return u?p.createElement(In,{zIndex:nr.activeBar},p.createElement(Jf,Va({},n,{name:String(n.name)},a,{isActive:u,option:d,index:i,dataKey:s}))):p.createElement(Jf,Va({},n,{name:String(n.name)},a,{isActive:u,option:d,index:i,dataKey:s}))}function OY(e){var{shape:t,baseProps:r,entry:n,index:a,dataKey:i}=e;return p.createElement(Jf,Va({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:a,dataKey:i}))}function AY(e){var t,{data:r,props:n}=e,a=(t=Qn(n))!==null&&t!==void 0?t:{},{id:i}=a,s=Qf(a,xY),{shape:o,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:f,onMouseLeave:h}=n,m=Qf(n,bY),g=hD(d,c),y=pD(h),v=mD(f,c);return r?p.createElement(p.Fragment,null,r.map((x,w)=>p.createElement(On,Va({key:"rectangle-".concat(x==null?void 0:x.x,"-").concat(x==null?void 0:x.y,"-").concat(x==null?void 0:x.value,"-").concat(w),className:"recharts-bar-rectangle"},W0(m,x,w),{onMouseEnter:g(x,w),onMouseLeave:y(x,w),onClick:v(x,w)}),u?p.createElement(PY,{shape:o,activeBar:u,baseProps:s,entry:x,index:w,dataKey:c}):p.createElement(OY,{shape:o,baseProps:s,entry:x,index:w,dataKey:c})))):null}function TY(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:i,animationBegin:s,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=up(t,"recharts-bar-"),[m,g]=p.useState(!1),y=!m,v=p.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),x=p.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return p.createElement(EY,{showLabels:y,rects:n},p.createElement(cp,{animationId:h,begin:s,duration:o,isActive:i,easing:c,onAnimationEnd:v,onAnimationStart:x,key:h},w=>{var b=w===1?n:n==null?void 0:n.map((_,j)=>{var S=f&&f[j];if(S)return Pr(Pr({},_),{},{x:Ot(S.x,_.x,w),y:Ot(S.y,_.y,w),width:Ot(S.width,_.width,w),height:Ot(S.height,_.height,w)});if(a==="horizontal"){var N=Ot(0,_.height,w),k=Ot(_.stackedBarStart,_.y,w);return Pr(Pr({},_),{},{y:k,height:N})}var C=Ot(0,_.width,w),E=Ot(_.stackedBarStart,_.x,w);return Pr(Pr({},_),{},{width:C,x:E})});return w>0&&(r.current=b??null),b==null?null:p.createElement(On,null,p.createElement(AY,{props:t,data:b}))}),p.createElement(iD,{label:t.label}),t.children)}function DY(e){var t=p.useRef(null);return p.createElement(TY,{previousRectanglesRef:t,props:e})}var kD=0,IY=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:ir(e,t)}};class RY extends p.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:i,yAxisId:s,needClip:o,background:c,id:u}=this.props;if(t||r==null)return null;var d=rt("recharts-bar",a),f=u;return p.createElement(On,{className:d,id:u},o&&p.createElement("defs",null,p.createElement(ND,{clipPathId:f,xAxisId:i,yAxisId:s})),p.createElement(On,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},p.createElement(CY,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),p.createElement(DY,this.props)))}}var MY={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Is.isSsr,legendType:"rect",minPointSize:kD,xAxisId:0,yAxisId:0,zIndex:nr.bar};function $Y(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:i,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=ub(t,r),h=nu(),m=Nr(),g=tG(e.children,zT),y=Se(w=>dX(w,t,r,m,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var v,x=y==null?void 0:y[0];return x==null||x.height==null||x.width==null?v=0:v=h==="vertical"?x.height/2:x.width/2,p.createElement(SD,{xAxisId:t,yAxisId:r,data:y,dataPointFormatter:IY,errorBarOffset:v},p.createElement(RY,Va({},e,{layout:h,needClip:f,data:y,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:i,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function LY(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:i,xAxis:s,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:m,parentViewBox:g,dataStartIndex:y}=e,v=t==="horizontal"?o:s,x=d?v.scale.domain():null,w=ez({numericAxis:v}),b=v.scale(w);return f.map((_,j)=>{var S,N,k,C,E,P;d?S=GU(d[j+y],x):(S=ir(_,r),Array.isArray(S)||(S=[w,S]));var A=lY(n,kD)(S[1],j);if(t==="horizontal"){var H,[J,ee]=[o.scale(S[0]),o.scale(S[1])];N=n1({axis:s,ticks:c,bandSize:i,offset:a.offset,entry:_,index:j}),k=(H=ee??J)!==null&&H!==void 0?H:void 0,C=a.size;var B=J-ee;if(E=Zn(B)?0:B,P={x:N,y:h.top,width:C,height:h.height},Math.abs(A)>0&&Math.abs(E)<Math.abs(A)){var K=Wr(E||A)*(Math.abs(A)-Math.abs(E));k-=K,E+=K}}else{var[D,R]=[s.scale(S[0]),s.scale(S[1])];if(N=D,k=n1({axis:o,ticks:u,bandSize:i,offset:a.offset,entry:_,index:j}),C=R-D,E=a.size,P={x:h.left,y:k,width:h.width,height:E},Math.abs(A)>0&&Math.abs(C)<Math.abs(A)){var F=Wr(C||A)*(Math.abs(A)-Math.abs(C));C+=F}}if(N==null||k==null||C==null||E==null)return null;var le=Pr(Pr({},_),{},{stackedBarStart:b,x:N,y:k,width:C,height:E,value:d?S:S[1],payload:_,background:P,tooltipPosition:{x:N+C/2,y:k+E/2},parentViewBox:g},m&&m[j]&&m[j].props);return le}).filter(Boolean)}function FY(e){var t=Mr(e,MY),r=Nr();return p.createElement(xD,{id:t.id,type:"bar"},n=>p.createElement(p.Fragment,null,p.createElement(vD,{legendPayload:NY(t)}),p.createElement(gD,{fn:kY,args:t}),p.createElement(wD,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:ZU(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),p.createElement(In,{zIndex:t.zIndex},p.createElement($Y,Va({},t,{id:n})))))}var CD=p.memo(FY);CD.displayName="Bar";function uS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uS(Object(r),!0).forEach(function(n){BY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BY(e,t,r){return(t=UY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UY(e){var t=zY(e,"string");return typeof t=="symbol"?t:t+""}function zY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WY=(e,t)=>t,KY=(e,t,r)=>r,HY=(e,t,r,n)=>n,qY=(e,t,r,n,a)=>a,pu=U([kp,qY],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),VY=U([pu],e=>e==null?void 0:e.maxBarSize),GY=(e,t,r,n,a,i)=>i,dS=(e,t,r)=>{var n=r??e;if(!yt(n))return ea(n,t,0)},YY=U([Xe,kp,WY,KY,HY],(e,t,r,n,a)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===a).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),XY=(e,t,r,n)=>{var a=Xe(e);return a==="horizontal"?ey(e,"yAxis",r,n):ey(e,"xAxis",t,n)},JY=(e,t,r)=>{var n=Xe(e);return n==="horizontal"?wj(e,"xAxis",t):wj(e,"yAxis",r)},QY=(e,t,r)=>{var n={},a=e.filter(jp),i=e.filter(u=>u.stackId==null),s=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),o=Object.entries(s).map(u=>{var[d,f]=u,h=f.map(g=>g.dataKey),m=dS(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:m}}),c=i.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=dS(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...c]},ZY=U([YY,WW,JY],QY),eX=(e,t,r,n,a)=>{var i,s,o=pu(e,t,r,n,a);if(o!=null){var c=Xe(e),u=vA(e),{maxBarSize:d}=o,f=yt(d)?u:d,h,m;return c==="horizontal"?(h=Di(e,"xAxis",t,n),m=Ti(e,"xAxis",t,n)):(h=Di(e,"yAxis",r,n),m=Ti(e,"yAxis",r,n)),(i=(s=Fo(h,m,!0))!==null&&s!==void 0?s:f)!==null&&i!==void 0?i:0}},ED=(e,t,r,n)=>{var a=Xe(e),i,s;return a==="horizontal"?(i=Di(e,"xAxis",t,n),s=Ti(e,"xAxis",t,n)):(i=Di(e,"yAxis",r,n),s=Ti(e,"yAxis",r,n)),Fo(i,s)};function tX(e,t,r,n,a){var i=n.length;if(!(i<1)){var s=ea(e,r,0,!0),o,c=[];if(Mt(n[0].barSize)){var u=!1,d=r/i,f=n.reduce((x,w)=>x+(w.barSize||0),0);f+=(i-1)*s,f>=r&&(f-=(i-1)*s,s=0),f>=r&&d>0&&(u=!0,d*=.9,f=i*d);var h=(r-f)/2>>0,m={offset:h-s,size:0};o=n.reduce((x,w)=>{var b,_={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:m.offset+m.size+s,size:u?d:(b=w.barSize)!==null&&b!==void 0?b:0}},j=[...x,_];return m=j[j.length-1].position,j},c)}else{var g=ea(t,r,0,!0);r-2*g-(i-1)*s<=0&&(s=0);var y=(r-2*g-(i-1)*s)/i;y>1&&(y>>=0);var v=Mt(a)?Math.min(y,a):y;o=n.reduce((x,w,b)=>[...x,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:g+(y+s)*b+(y-v)/2,size:v}}],c)}return o}}var rX=(e,t,r,n,a,i,s)=>{var o=yt(s)?t:s,c=tX(r,n,a!==i?a:i,e,o);return a!==i&&c!=null&&(c=c.map(u=>cd(cd({},u),{},{position:cd(cd({},u.position),{},{offset:u.position.offset-a/2})}))),c},nX=U([ZY,vA,zW,yA,eX,ED,VY],rX),aX=(e,t,r,n)=>Di(e,"xAxis",t,n),iX=(e,t,r,n)=>Di(e,"yAxis",r,n),sX=(e,t,r,n)=>Ti(e,"xAxis",t,n),oX=(e,t,r,n)=>Ti(e,"yAxis",r,n),lX=U([nX,pu],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),cX=(e,t)=>{var r=Bx(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:i}=a;if(i)return i.find(s=>s.key===r)}}}},uX=U([XY,pu],cX),dX=U([sr,ox,aX,iX,sX,oX,lX,Xe,vp,ED,uX,pu,GY],(e,t,r,n,a,i,s,o,c,u,d,f,h)=>{var{chartData:m,dataStartIndex:g,dataEndIndex:y}=c;if(!(f==null||s==null||t==null||o!=="horizontal"&&o!=="vertical"||r==null||n==null||a==null||i==null||u==null)){var{data:v}=f,x;if(v!=null&&v.length>0?x=v:x=m==null?void 0:m.slice(g,y+1),x!=null)return LY({layout:o,barSettings:f,pos:s,parentViewBox:t,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,stackedData:d,displayedData:x,offset:e,cells:h,dataStartIndex:g})}}),fX=e=>{var{chartData:t}=e,r=$t(),n=Nr();return p.useEffect(()=>n?()=>{}:(r(Dj(t)),()=>{r(Dj(void 0))}),[t,r,n]),null},fS={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},PD=Gr({name:"brush",initialState:fS,reducers:{setBrushSettings(e,t){return t.payload==null?fS:t.payload}}}),{setBrushSettings:Jee}=PD.actions,hX=PD.reducer;function pX(e,t,r){return(t=mX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mX(e){var t=gX(e,"string");return typeof t=="symbol"?t:t+""}function gX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class db{static create(t){return new db(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}pX(db,"EPS",1e-4);function vX(e){return(e%180+180)%180}var yX=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=vX(a),s=i*Math.PI/180,o=Math.atan(n/r),c=s>o&&s<Math.PI-o?n/Math.sin(s):r/Math.cos(s);return Math.abs(c)},xX={dots:[],areas:[],lines:[]},OD=Gr({name:"referenceElements",initialState:xX,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Aa(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Aa(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Aa(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Qee,removeDot:Zee,addArea:ete,removeArea:tte,addLine:rte,removeLine:nte}=OD.actions,bX=OD.reducer,wX=p.createContext(void 0),_X=e=>{var{children:t}=e,[r]=p.useState("".concat(kc("recharts"),"-clip")),n=cb();if(n==null)return null;var{x:a,y:i,width:s,height:o}=n;return p.createElement(wX.Provider,{value:r},p.createElement("defs",null,p.createElement("clipPath",{id:r},p.createElement("rect",{x:a,y:i,height:o,width:s}))),t)};function Wo(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function AD(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function jX(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return yX(n,r)}function SX(e,t,r){var n=r==="width",{x:a,y:i,width:s,height:o}=e;return t===1?{start:n?a:i,end:n?a+s:i+o}:{start:n?a+s:i+o,end:n?a:i}}function Zf(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function NX(e,t){return AD(e,t+1)}function kX(e,t,r,n,a){for(var i=(n||[]).slice(),{start:s,end:o}=t,c=0,u=1,d=s,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:AD(n,u)};var y=c,v,x=()=>(v===void 0&&(v=r(g,y)),v),w=g.coordinate,b=c===0||Zf(e,w,x,d,o);b||(c=0,d=s,u+=1),b&&(d=w+e*(x()/2+a),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function hS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hS(Object(r),!0).forEach(function(n){CX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CX(e,t,r){return(t=EX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EX(e){var t=PX(e,"string");return typeof t=="symbol"?t:t+""}function PX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OX(e,t,r,n,a){for(var i=(n||[]).slice(),s=i.length,{start:o}=t,{end:c}=t,u=function(h){var m=i[h],g,y=()=>(g===void 0&&(g=r(m,h)),g);if(h===s-1){var v=e*(m.coordinate+e*y()/2-c);i[h]=m=wr(wr({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else i[h]=m=wr(wr({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var x=Zf(e,m.tickCoord,y,o,c);x&&(c=m.tickCoord-e*(y()/2+a),i[h]=wr(wr({},m),{},{isShow:!0}))}},d=s-1;d>=0;d--)u(d);return i}function AX(e,t,r,n,a,i){var s=(n||[]).slice(),o=s.length,{start:c,end:u}=t;if(i){var d=n[o-1],f=r(d,o-1),h=e*(d.coordinate+e*f/2-u);if(s[o-1]=d=wr(wr({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate}),d.tickCoord!=null){var m=Zf(e,d.tickCoord,()=>f,c,u);m&&(u=d.tickCoord-e*(f/2+a),s[o-1]=wr(wr({},d),{},{isShow:!0}))}}for(var g=i?o-1:o,y=function(w){var b=s[w],_,j=()=>(_===void 0&&(_=r(b,w)),_);if(w===0){var S=e*(b.coordinate-e*j()/2-c);s[w]=b=wr(wr({},b),{},{tickCoord:S<0?b.coordinate-S*e:b.coordinate})}else s[w]=b=wr(wr({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var N=Zf(e,b.tickCoord,j,c,u);N&&(c=b.tickCoord+e*(j()/2+a),s[w]=wr(wr({},b),{},{isShow:!0}))}},v=0;v<g;v++)y(v);return s}function fb(e,t,r){var{tick:n,ticks:a,viewBox:i,minTickGap:s,orientation:o,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(we(c)||Is.isSsr){var h;return(h=NX(a,we(c)?c:0))!==null&&h!==void 0?h:[]}var m=[],g=o==="top"||o==="bottom"?"width":"height",y=d&&g==="width"?ec(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(b,_)=>{var j=typeof u=="function"?u(b.value,_):b.value;return g==="width"?jX(ec(j,{fontSize:t,letterSpacing:r}),y,f):ec(j,{fontSize:t,letterSpacing:r})[g]},x=a.length>=2?Wr(a[1].coordinate-a[0].coordinate):1,w=SX(i,x,g);return c==="equidistantPreserveStart"?kX(x,w,v,a,s):(c==="preserveStart"||c==="preserveStartEnd"?m=AX(x,w,v,a,s,c==="preserveStartEnd"):m=OX(x,w,v,a,s),m.filter(b=>b.isShow))}var TX=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:i=0}=e,s=0;if(t){Array.from(t).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>s&&(s=f.width)}});var o=r?r.getBoundingClientRect().width:0,c=a+i,u=s+c+o+(r?n:0);return Math.round(u)}return 0},DX=["axisLine","width","height","className","hide","ticks","axisType"],IX=["viewBox"],RX=["viewBox"];function cy(e,t){if(e==null)return{};var r,n,a=MX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function MX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Os(){return Os=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Os.apply(null,arguments)}function pS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ft(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pS(Object(r),!0).forEach(function(n){$X(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $X(e,t,r){return(t=LX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LX(e){var t=FX(e,"string");return typeof t=="symbol"?t:t+""}function FX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hb={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:nr.axis};function BX(e){var{x:t,y:r,width:n,height:a,orientation:i,mirror:s,axisLine:o,otherSvgProps:c}=e;if(!o)return null;var u=Ft(Ft(Ft({},c),Qn(o)),{},{fill:"none"});if(i==="top"||i==="bottom"){var d=+(i==="top"&&!s||i==="bottom"&&s);u=Ft(Ft({},u),{},{x1:t,y1:r+d*a,x2:t+n,y2:r+d*a})}else{var f=+(i==="left"&&!s||i==="right"&&s);u=Ft(Ft({},u),{},{x1:t+f*n,y1:r,x2:t+f*n,y2:r+a})}return p.createElement("line",Os({},u,{className:rt("recharts-cartesian-axis-line",$o(o,"className"))}))}function UX(e,t,r,n,a,i,s,o,c){var u,d,f,h,m,g,y=o?-1:1,v=e.tickSize||s,x=we(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":u=d=e.coordinate,h=r+ +!o*a,f=h-y*v,g=f-y*c,m=x;break;case"left":f=h=e.coordinate,d=t+ +!o*n,u=d-y*v,m=u-y*c,g=x;break;case"right":f=h=e.coordinate,d=t+ +o*n,u=d+y*v,m=u+y*c,g=x;break;default:u=d=e.coordinate,h=r+ +o*a,f=h+y*v,g=f+y*c,m=x;break}return{line:{x1:u,y1:f,x2:d,y2:h},tick:{x:m,y:g}}}function zX(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function WX(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function KX(e){var{option:t,tickProps:r,value:n}=e,a,i=rt(r.className,"recharts-cartesian-axis-tick-value");if(p.isValidElement(t))a=p.cloneElement(t,Ft(Ft({},r),{},{className:i}));else if(typeof t=="function")a=t(Ft(Ft({},r),{},{className:i}));else{var s="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(s=rt(s,t==null?void 0:t.className)),a=p.createElement(ib,Os({},r,{className:s}),n)}return a}var HX=p.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:i,tickFormatter:s,unit:o,padding:c,tickTextProps:u,orientation:d,mirror:f,x:h,y:m,width:g,height:y,tickSize:v,tickMargin:x,fontSize:w,letterSpacing:b,getTicksConfig:_,events:j,axisType:S}=e,N=fb(Ft(Ft({},_),{},{ticks:r}),w,b),k=zX(d,f),C=WX(d,f),E=Qn(_),P=Qc(n),A={};typeof a=="object"&&(A=a);var H=Ft(Ft({},E),{},{fill:"none"},A),J=N.map(K=>Ft({entry:K},UX(K,h,m,g,y,d,v,f,x))),ee=J.map(K=>{var{entry:D,line:R}=K;return p.createElement(On,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(D.value,"-").concat(D.coordinate,"-").concat(D.tickCoord)},a&&p.createElement("line",Os({},H,R,{className:rt("recharts-cartesian-axis-tick-line",$o(a,"className"))})))}),B=J.map((K,D)=>{var{entry:R,tick:F}=K,le=Ft(Ft(Ft(Ft({textAnchor:k,verticalAnchor:C},E),{},{stroke:"none",fill:i},P),F),{},{index:D,payload:R,visibleTicksCount:N.length,tickFormatter:s,padding:c},u);return p.createElement(On,Os({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(R.value,"-").concat(R.coordinate,"-").concat(R.tickCoord)},W0(j,R,D)),n&&p.createElement(KX,{option:n,tickProps:le,value:"".concat(typeof s=="function"?s(R.value,D):R.value).concat(o||"")}))});return p.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(S,"-ticks")},B.length>0&&p.createElement(In,{zIndex:nr.label},p.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(S,"-tick-labels"),ref:t},B)),ee.length>0&&p.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(S,"-tick-lines")},ee))}),qX=p.forwardRef((e,t)=>{var{axisLine:r,width:n,height:a,className:i,hide:s,ticks:o,axisType:c}=e,u=cy(e,DX),[d,f]=p.useState(""),[h,m]=p.useState(""),g=p.useRef(null);p.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var v;return TX({ticks:g.current,label:(v=e.labelRef)===null||v===void 0?void 0:v.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var y=p.useCallback(v=>{if(v){var x=v.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=x;var w=x[0];if(w){var b=window.getComputedStyle(w),_=b.fontSize,j=b.letterSpacing;(_!==d||j!==h)&&(f(_),m(j))}}},[d,h]);return s||n!=null&&n<=0||a!=null&&a<=0?null:p.createElement(In,{zIndex:e.zIndex},p.createElement(On,{className:rt("recharts-cartesian-axis",i)},p.createElement(BX,{x:e.x,y:e.y,width:n,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Qn(e)}),p.createElement(HX,{ref:y,axisType:c,events:u,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:h,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:o,unit:e.unit,width:e.width,x:e.x,y:e.y}),p.createElement(AV,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},p.createElement(UV,{label:e.label,labelRef:e.labelRef}),e.children)))}),VX=p.memo(qX,(e,t)=>{var{viewBox:r}=e,n=cy(e,IX),{viewBox:a}=t,i=cy(t,RX);return Wo(r,a)&&Wo(n,i)}),pb=p.forwardRef((e,t)=>{var r=Mr(e,hb);return p.createElement(VX,Os({},r,{ref:t}))});pb.displayName="CartesianAxis";var GX=["x1","y1","x2","y2","key"],YX=["offset"],XX=["xAxisId","yAxisId"],JX=["xAxisId","yAxisId"];function mS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mS(Object(r),!0).forEach(function(n){QX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QX(e,t,r){return(t=ZX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZX(e){var t=eJ(e,"string");return typeof t=="symbol"?t:t+""}function eJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function us(){return us=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},us.apply(null,arguments)}function eh(e,t){if(e==null)return{};var r,n,a=tJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function tJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var rJ=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:i,height:s,ry:o}=e;return p.createElement("rect",{x:n,y:a,ry:o,width:i,height:s,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function TD(e){var{option:t,lineItemProps:r}=e,n;if(p.isValidElement(t))n=p.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var a,{x1:i,y1:s,x2:o,y2:c,key:u}=r,d=eh(r,GX),f=(a=Qn(d))!==null&&a!==void 0?a:{},{offset:h}=f,m=eh(f,YX);n=p.createElement("line",us({},m,{x1:i,y1:s,x2:o,y2:c,fill:"none",key:u}))}return n}function nJ(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:s}=e,o=eh(e,XX),c=a.map((u,d)=>{var f=jr(jr({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return p.createElement(TD,{key:"line-".concat(d),option:n,lineItemProps:f})});return p.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function aJ(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:s}=e,o=eh(e,JX),c=a.map((u,d)=>{var f=jr(jr({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return p.createElement(TD,{option:n,lineItemProps:f,key:"line-".concat(d)})});return p.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function iJ(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:i,height:s,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length||o==null)return null;var u=o.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],g=m?a+s-f:u[h+1]-f;if(g<=0)return null;var y=h%t.length;return p.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:g,width:i,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return p.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function sJ(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:i,width:s,height:o,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],g=m?a+s-f:u[h+1]-f;if(g<=0)return null;var y=h%r.length;return p.createElement("rect",{key:"react-".concat(h),x:f,y:i,width:g,height:o,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return p.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var oJ=(e,t)=>{var{xAxis:r,width:n,height:a,offset:i}=e;return GP(fb(jr(jr(jr({},hb),r),{},{ticks:YP(r),viewBox:{x:0,y:0,width:n,height:a}})),i.left,i.left+i.width,t)},lJ=(e,t)=>{var{yAxis:r,width:n,height:a,offset:i}=e;return GP(fb(jr(jr(jr({},hb),r),{},{ticks:YP(r),viewBox:{x:0,y:0,width:n,height:a}})),i.top,i.top+i.height,t)},cJ={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:nr.grid};function uy(e){var t=iO(),r=sO(),n=aO(),a=jr(jr({},Mr(e,cJ)),{},{x:we(e.x)?e.x:n.left,y:we(e.y)?e.y:n.top,width:we(e.width)?e.width:n.width,height:we(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:s,x:o,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:m}=a,g=Nr(),y=Se(C=>_j(C,"xAxis",i,g)),v=Se(C=>_j(C,"yAxis",s,g));if(!va(u)||!va(d)||!we(o)||!we(c))return null;var x=a.verticalCoordinatesGenerator||oJ,w=a.horizontalCoordinatesGenerator||lJ,{horizontalPoints:b,verticalPoints:_}=a;if((!b||!b.length)&&typeof w=="function"){var j=h&&h.length,S=w({yAxis:v?jr(jr({},v),{},{ticks:j?h:v.ticks}):void 0,width:t??u,height:r??d,offset:n},j?!0:f);Ef(Array.isArray(S),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof S,"]")),Array.isArray(S)&&(b=S)}if((!_||!_.length)&&typeof x=="function"){var N=m&&m.length,k=x({xAxis:y?jr(jr({},y),{},{ticks:N?m:y.ticks}):void 0,width:t??u,height:r??d,offset:n},N?!0:f);Ef(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(_=k)}return p.createElement(In,{zIndex:a.zIndex},p.createElement("g",{className:"recharts-cartesian-grid"},p.createElement(rJ,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),p.createElement(iJ,us({},a,{horizontalPoints:b})),p.createElement(sJ,us({},a,{verticalPoints:_})),p.createElement(nJ,us({},a,{offset:n,horizontalPoints:b,xAxis:y,yAxis:v})),p.createElement(aJ,us({},a,{offset:n,verticalPoints:_,xAxis:y,yAxis:v}))))}uy.displayName="CartesianGrid";var DD=(e,t,r,n)=>Di(e,"xAxis",t,n),ID=(e,t,r,n)=>Ti(e,"xAxis",t,n),RD=(e,t,r,n)=>Di(e,"yAxis",r,n),MD=(e,t,r,n)=>Ti(e,"yAxis",r,n),uJ=U([Xe,DD,RD,ID,MD],(e,t,r,n,a)=>Li(e,"xAxis")?Fo(t,n,!1):Fo(r,a,!1)),dJ=(e,t,r,n,a)=>a;function fJ(e){return e.type==="line"}var hJ=U([kp,dJ],(e,t)=>e.filter(fJ).find(r=>r.id===t)),pJ=U([Xe,DD,RD,ID,MD,hJ,uJ,vp],(e,t,r,n,a,i,s,o)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=o;if(!(i==null||t==null||r==null||n==null||a==null||n.length===0||a.length===0||s==null)){var{dataKey:f,data:h}=i,m;if(h!=null&&h.length>0?m=h:m=c==null?void 0:c.slice(u,d+1),m!=null)return RJ({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:f,bandSize:s,displayedData:m})}});function mJ(e){var t=Qc(e),r=3,n=2;if(t!=null){var{r:a,strokeWidth:i}=t,s=Number(a),o=Number(i);return(Number.isNaN(s)||s<0)&&(s=r),(Number.isNaN(o)||o<0)&&(o=n),{r:s,strokeWidth:o}}return{r,strokeWidth:n}}var gJ=["id"],vJ=["type","layout","connectNulls","needClip","shape"],yJ=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function $c(){return $c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$c.apply(null,arguments)}function gS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ua(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gS(Object(r),!0).forEach(function(n){xJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xJ(e,t,r){return(t=bJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bJ(e){var t=wJ(e,"string");return typeof t=="symbol"?t:t+""}function wJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mb(e,t){if(e==null)return{};var r,n,a=_J(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _J(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var jJ=e=>{var{dataKey:t,name:r,stroke:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:rp(r,t),payload:e}]};function SJ(e){var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:i,name:s,hide:o,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:rp(s,t),hide:o,type:e.tooltipType,color:e.stroke,unit:c}}}var $D=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function NJ(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],a=0;a<t;++a)n=[...n,...r];return n}var kJ=(e,t,r)=>{var n=r.reduce((f,h)=>f+h);if(!n)return $D(t,e);for(var a=Math.floor(e/n),i=e%n,s=t-e,o=[],c=0,u=0;c<r.length;u+=r[c],++c)if(u+r[c]>i){o=[...r.slice(0,c),i-u];break}var d=o.length%2===0?[0,s]:[s];return[...NJ(r,a),...o,...d].map(f=>"".concat(f,"px")).join(", ")};function CJ(e){var{clipPathId:t,points:r,props:n}=e,{dot:a,dataKey:i,needClip:s}=n,{id:o}=n,c=mb(n,gJ),u=Qn(c);return p.createElement(IG,{points:r,dot:a,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:u,needClip:s,clipPathId:t})}function EJ(e){var{showLabels:t,children:r,points:n}=e,a=p.useMemo(()=>n==null?void 0:n.map(i=>{var s,o,c={x:(s=i.x)!==null&&s!==void 0?s:0,y:(o=i.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return ua(ua({},c),{},{value:i.value,payload:i.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[n]);return p.createElement(nD,{value:t?a:void 0},r)}function vS(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:a,props:i}=e,{type:s,layout:o,connectNulls:c,needClip:u,shape:d}=i,f=mb(i,vJ),h=ua(ua({},Tr(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:s,layout:o,connectNulls:c,strokeDasharray:a??i.strokeDasharray});return p.createElement(p.Fragment,null,(n==null?void 0:n.length)>1&&p.createElement(fD,$c({shapeType:"curve",option:d},h,{pathRef:r})),p.createElement(CJ,{points:n,clipPathId:t,props:i}))}function PJ(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function OJ(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:a,longestAnimatedLengthRef:i}=e,{points:s,strokeDasharray:o,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:h,width:m,height:g,onAnimationEnd:y,onAnimationStart:v}=r,x=a.current,w=up(r,"recharts-line-"),[b,_]=p.useState(!1),j=!b,S=p.useCallback(()=>{typeof y=="function"&&y(),_(!1)},[y]),N=p.useCallback(()=>{typeof v=="function"&&v(),_(!0)},[v]),k=PJ(n.current),C=i.current;return p.createElement(EJ,{points:s,showLabels:j},r.children,p.createElement(cp,{animationId:w,begin:u,duration:d,isActive:c,easing:f,onAnimationEnd:S,onAnimationStart:N,key:w},E=>{var P=Ot(C,k+C,E),A=Math.min(P,k),H;if(c)if(o){var J="".concat(o).split(/[,\s]+/gim).map(K=>parseFloat(K));H=kJ(A,k,J)}else H=$D(k,A);else H=o==null?void 0:String(o);if(x){var ee=x.length/s.length,B=E===1?s:s.map((K,D)=>{var R=Math.floor(D*ee);if(x[R]){var F=x[R];return ua(ua({},K),{},{x:Ot(F.x,K.x,E),y:Ot(F.y,K.y,E)})}return h?ua(ua({},K),{},{x:Ot(m*2,K.x,E),y:Ot(g/2,K.y,E)}):ua(ua({},K),{},{x:K.x,y:K.y})});return a.current=B,p.createElement(vS,{props:r,points:B,clipPathId:t,pathRef:n,strokeDasharray:H})}return E>0&&k>0&&(a.current=s,i.current=A),p.createElement(vS,{props:r,points:s,clipPathId:t,pathRef:n,strokeDasharray:H})}),p.createElement(iD,{label:r.label}))}function AJ(e){var{clipPathId:t,props:r}=e,n=p.useRef(null),a=p.useRef(0),i=p.useRef(null);return p.createElement(OJ,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:a,pathRef:i})}var TJ=(e,t)=>{var r,n;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(n=e.y)!==null&&n!==void 0?n:void 0,value:e.value,errorVal:ir(e.payload,t)}};class DJ extends p.Component{render(){var{hide:t,dot:r,points:n,className:a,xAxisId:i,yAxisId:s,top:o,left:c,width:u,height:d,id:f,needClip:h,zIndex:m}=this.props;if(t)return null;var g=rt("recharts-line",a),y=f,{r:v,strokeWidth:x}=mJ(r),w=uD(r),b=v*2+x;return p.createElement(In,{zIndex:m},p.createElement(On,{className:g},h&&p.createElement("defs",null,p.createElement(ND,{clipPathId:y,xAxisId:i,yAxisId:s}),!w&&p.createElement("clipPath",{id:"clipPath-dots-".concat(y)},p.createElement("rect",{x:c-b/2,y:o-b/2,width:u+b,height:d+b}))),p.createElement(SD,{xAxisId:i,yAxisId:s,data:n,dataPointFormatter:TJ,errorBarOffset:0},p.createElement(AJ,{props:this.props,clipPathId:y}))),p.createElement(QG,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var LD={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Is.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:nr.line};function IJ(e){var t=Mr(e,LD),{activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:s,connectNulls:o,dot:c,hide:u,isAnimationActive:d,label:f,legendType:h,xAxisId:m,yAxisId:g,id:y}=t,v=mb(t,yJ),{needClip:x}=ub(m,g),w=cb(),b=nu(),_=Nr(),j=Se(E=>pJ(E,m,g,_,y));if(b!=="horizontal"&&b!=="vertical"||j==null||w==null)return null;var{height:S,width:N,x:k,y:C}=w;return p.createElement(DJ,$c({},v,{id:y,connectNulls:o,dot:c,activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:s,isAnimationActive:d,hide:u,label:f,legendType:h,xAxisId:m,yAxisId:g,points:j,layout:b,height:S,width:N,left:k,top:C,needClip:x}))}function RJ(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,dataKey:s,bandSize:o,displayedData:c}=e;return c.map((u,d)=>{var f=ir(u,s);if(t==="horizontal"){var h=r1({axis:r,ticks:a,bandSize:o,entry:u,index:d}),m=yt(f)?null:n.scale(f);return{x:h,y:m,value:f,payload:u}}var g=yt(f)?null:r.scale(f),y=r1({axis:n,ticks:i,bandSize:o,entry:u,index:d});return g==null||y==null?null:{x:g,y,value:f,payload:u}}).filter(Boolean)}function MJ(e){var t=Mr(e,LD),r=Nr();return p.createElement(xD,{id:t.id,type:"line"},n=>p.createElement(p.Fragment,null,p.createElement(vD,{legendPayload:jJ(t)}),p.createElement(gD,{fn:SJ,args:t}),p.createElement(wD,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),p.createElement(IJ,$c({},t,{id:n}))))}var dy=p.memo(MJ);dy.displayName="Line";var $J=["dangerouslySetInnerHTML","ticks"],LJ=["id"],FJ=["domain"],BJ=["domain"];function fy(){return fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fy.apply(null,arguments)}function th(e,t){if(e==null)return{};var r,n,a=UJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function UJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zJ(e){var t=$t();return p.useLayoutEffect(()=>(t(FG(e)),()=>{t(BG(e))}),[e,t]),null}var WJ=e=>{var{xAxisId:t,className:r}=e,n=Se(ox),a=Nr(),i="xAxis",s=Se(v=>ul(v,i,t,a)),o=Se(v=>lT(v,i,t,a)),c=Se(v=>aT(v,t)),u=Se(v=>BK(v,t)),d=Se(v=>kA(v,t));if(c==null||u==null||d==null)return null;var{dangerouslySetInnerHTML:f,ticks:h}=e,m=th(e,$J),{id:g}=d,y=th(d,LJ);return p.createElement(pb,fy({},m,y,{scale:s,x:u.x,y:u.y,width:c.width,height:c.height,className:rt("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:o,axisType:i}))},KJ={allowDataOverflow:tn.allowDataOverflow,allowDecimals:tn.allowDecimals,allowDuplicatedCategory:tn.allowDuplicatedCategory,height:tn.height,hide:!1,mirror:tn.mirror,orientation:tn.orientation,padding:tn.padding,reversed:tn.reversed,scale:tn.scale,tickCount:tn.tickCount,type:tn.type,xAxisId:0},HJ=e=>{var t,r,n,a,i,s=Mr(e,KJ);return p.createElement(p.Fragment,null,p.createElement(zJ,{interval:(t=s.interval)!==null&&t!==void 0?t:"preserveEnd",id:s.xAxisId,scale:s.scale,type:s.type,padding:s.padding,allowDataOverflow:s.allowDataOverflow,domain:s.domain,dataKey:s.dataKey,allowDuplicatedCategory:s.allowDuplicatedCategory,allowDecimals:s.allowDecimals,tickCount:s.tickCount,includeHidden:(r=s.includeHidden)!==null&&r!==void 0?r:!1,reversed:s.reversed,ticks:s.ticks,height:s.height,orientation:s.orientation,mirror:s.mirror,hide:s.hide,unit:s.unit,name:s.name,angle:(n=s.angle)!==null&&n!==void 0?n:0,minTickGap:(a=s.minTickGap)!==null&&a!==void 0?a:5,tick:(i=s.tick)!==null&&i!==void 0?i:!0,tickFormatter:s.tickFormatter}),p.createElement(WJ,s))},qJ=(e,t)=>{var{domain:r}=e,n=th(e,FJ),{domain:a}=t,i=th(t,BJ);return Wo(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(a)&&a.length===2?r[0]===a[0]&&r[1]===a[1]:Wo({domain:r},{domain:a}):!1},hy=p.memo(HJ,qJ);hy.displayName="XAxis";var VJ=["dangerouslySetInnerHTML","ticks"],GJ=["id"],YJ=["domain"],XJ=["domain"];function py(){return py=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},py.apply(null,arguments)}function rh(e,t){if(e==null)return{};var r,n,a=JJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function JJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function QJ(e){var t=$t();return p.useLayoutEffect(()=>(t(UG(e)),()=>{t(zG(e))}),[e,t]),null}var ZJ=e=>{var{yAxisId:t,className:r,width:n,label:a}=e,i=p.useRef(null),s=p.useRef(null),o=Se(ox),c=Nr(),u=$t(),d="yAxis",f=Se(j=>ul(j,d,t,c)),h=Se(j=>iT(j,t)),m=Se(j=>zK(j,t)),g=Se(j=>lT(j,d,t,c)),y=Se(j=>CA(j,t));if(p.useLayoutEffect(()=>{if(!(n!=="auto"||!h||sb(a)||p.isValidElement(a)||y==null)){var j=i.current;if(j){var S=j.getCalculatedWidth();Math.round(h.width)!==Math.round(S)&&u(WG({id:t,width:S}))}}},[g,h,u,a,t,n,y]),h==null||m==null||y==null)return null;var{dangerouslySetInnerHTML:v,ticks:x}=e,w=rh(e,VJ),{id:b}=y,_=rh(y,GJ);return p.createElement(pb,py({},w,_,{ref:i,labelRef:s,scale:f,x:m.x,y:m.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:h.width,height:h.height,className:rt("recharts-".concat(d," ").concat(d),r),viewBox:o,ticks:g,axisType:d}))},eQ={allowDataOverflow:rn.allowDataOverflow,allowDecimals:rn.allowDecimals,allowDuplicatedCategory:rn.allowDuplicatedCategory,hide:!1,mirror:rn.mirror,orientation:rn.orientation,padding:rn.padding,reversed:rn.reversed,scale:rn.scale,tickCount:rn.tickCount,type:rn.type,width:rn.width,yAxisId:0},tQ=e=>{var t,r,n,a,i,s=Mr(e,eQ);return p.createElement(p.Fragment,null,p.createElement(QJ,{interval:(t=s.interval)!==null&&t!==void 0?t:"preserveEnd",id:s.yAxisId,scale:s.scale,type:s.type,domain:s.domain,allowDataOverflow:s.allowDataOverflow,dataKey:s.dataKey,allowDuplicatedCategory:s.allowDuplicatedCategory,allowDecimals:s.allowDecimals,tickCount:s.tickCount,padding:s.padding,includeHidden:(r=s.includeHidden)!==null&&r!==void 0?r:!1,reversed:s.reversed,ticks:s.ticks,width:s.width,orientation:s.orientation,mirror:s.mirror,hide:s.hide,unit:s.unit,name:s.name,angle:(n=s.angle)!==null&&n!==void 0?n:0,minTickGap:(a=s.minTickGap)!==null&&a!==void 0?a:5,tick:(i=s.tick)!==null&&i!==void 0?i:!0,tickFormatter:s.tickFormatter}),p.createElement(ZJ,s))},rQ=(e,t)=>{var{domain:r}=e,n=rh(e,YJ),{domain:a}=t,i=rh(t,XJ);return Wo(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(a)&&a.length===2?r[0]===a[0]&&r[1]===a[1]:Wo({domain:r},{domain:a}):!1},my=p.memo(tQ,rQ);my.displayName="YAxis";var nQ={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mu=p;function aQ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var iQ=typeof Object.is=="function"?Object.is:aQ,sQ=mu.useSyncExternalStore,oQ=mu.useRef,lQ=mu.useEffect,cQ=mu.useMemo,uQ=mu.useDebugValue;nQ.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=oQ(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=cQ(function(){function c(m){if(!u){if(u=!0,d=m,m=n(m),a!==void 0&&s.hasValue){var g=s.value;if(a(g,m))return f=g}return f=m}if(g=f,iQ(d,m))return g;var y=n(m);return a!==void 0&&a(g,y)?(d=m,g):(d=m,f=y)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,a]);var o=sQ(e,i[0],i[1]);return lQ(function(){s.hasValue=!0,s.value=o},[o]),uQ(o),o};function dQ(e){e()}function fQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){dQ(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var yS={notify(){},get:()=>[]};function hQ(e,t){let r,n=yS,a=0,i=!1;function s(y){d();const v=n.subscribe(y);let x=!1;return()=>{x||(x=!0,v(),f())}}function o(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return i}function d(){a++,r||(r=e.subscribe(c),n=fQ())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=yS)}function h(){i||(i=!0,d())}function m(){i&&(i=!1,f())}const g={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>n};return g}var pQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mQ=pQ(),gQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",vQ=gQ(),yQ=()=>mQ||vQ?p.useLayoutEffect:p.useEffect,xQ=yQ(),rg=Symbol.for("react-redux-context"),ng=typeof globalThis<"u"?globalThis:{};function bQ(){if(!p.createContext)return{};const e=ng[rg]??(ng[rg]=new Map);let t=e.get(p.createContext);return t||(t=p.createContext(null),e.set(p.createContext,t)),t}var wQ=bQ();function _Q(e){const{children:t,context:r,serverState:n,store:a}=e,i=p.useMemo(()=>{const c=hQ(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),s=p.useMemo(()=>a.getState(),[a]);xQ(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,s]);const o=r||wQ;return p.createElement(o.Provider,{value:i},t)}var jQ=_Q,SQ=(e,t)=>t,gb=U([SQ,Xe,SA,Xt,NT,ti,ZH,sr],sq),vb=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},FD=An("mouseClick"),BD=tu();BD.startListening({actionCreator:FD,effect:(e,t)=>{var r=e.payload,n=gb(t.getState(),vb(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(tH({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var gy=An("mouseMove"),UD=tu();UD.startListening({actionCreator:gy,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=Xx(n,n.tooltip.settings.shared),i=gb(n,vb(r));a==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(gT({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(mT()))}});var xS={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},zD=Gr({name:"rootProps",initialState:xS,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:xS.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue}}}),NQ=zD.reducer,{updateOptions:kQ}=zD.actions,WD=Gr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:ate}=WD.actions,CQ=WD.reducer,KD=An("keyDown"),HD=An("focus"),yb=tu();yb.startListening({actionCreator:KD,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var s=Number(Jx(a,fl(r))),o=ti(r);if(i==="Enter"){var c=qf(r,"axis","hover",String(a.index));t.dispatch(ry({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var u=qK(r),d=u==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,h=s+f*d;if(!(o==null||h>=o.length||h<0)){var m=qf(r,"axis","hover",String(h));t.dispatch(ry({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});yb.startListening({actionCreator:HD,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var i="0",s=qf(r,"axis","hover",String(i));t.dispatch(ry({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:s}))}}}});var xn=An("externalEvent"),qD=tu();qD.startListening({actionCreator:xn,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:$H(r),activeDataKey:PT(r),activeIndex:Ps(r),activeLabel:ET(r),activeTooltipIndex:Ps(r),isTooltipActive:LH(r)};e.payload.handler(n,e.payload.reactEvent)}}});var EQ=U([dl],e=>e.tooltipItemPayloads),PQ=U([EQ,fu,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(o=>o.settings.dataKey===n);if(a!=null){var{positions:i}=a;if(i!=null){var s=t(i,r);return s}}}),VD=An("touchMove"),GD=tu();GD.startListening({actionCreator:VD,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),a=Xx(n,n.tooltip.settings.shared);if(a==="axis"){var i=gb(n,vb({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(gT({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var s,o=r.touches[0];if(document.elementFromPoint==null)return;var c=document.elementFromPoint(o.clientX,o.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(oz),d=(s=c.getAttribute(lz))!==null&&s!==void 0?s:void 0,f=PQ(t.getState(),u,d);t.dispatch(pT({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}}});var OQ=_P({brush:hX,cartesianAxis:KG,chartData:Mq,errorBars:uY,graphicalItems:NG,layout:zU,legend:$z,options:Aq,polarAxis:JV,polarOptions:CQ,referenceElements:bX,rootProps:NQ,tooltip:rH,zIndex:bq}),AQ=function(t){return hU({reducer:OQ,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([BD.middleware,UD.middleware,yb.middleware,qD.middleware,GD.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(IP({type:"raf"}))},devTools:Is.devToolsEnabled})};function TQ(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=Nr(),i=p.useRef(null);if(a)return r;i.current==null&&(i.current=AQ(t));var s=Z0;return p.createElement(jQ,{context:s,store:i.current},r)}function DQ(e){var{layout:t,margin:r}=e,n=$t(),a=Nr();return p.useEffect(()=>{a||(n(FU(t)),n(LU(r)))},[n,a,t,r]),null}function IQ(e){var t=$t();return p.useEffect(()=>{t(kQ(e))},[t,e]),null}function bS(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",a=yD("".concat(n).concat(t)),i=$t();return p.useLayoutEffect(()=>(i(yq({zIndex:t,elementId:a,isPanorama:r})),()=>{i(xq({zIndex:t,isPanorama:r}))}),[i,t,a,r]),p.createElement("g",{id:a})}function wS(e){var{children:t,isPanorama:r}=e,n=Se(lq);if(!n||n.length===0)return t;var a=n.filter(s=>s<0),i=n.filter(s=>s>0);return p.createElement(p.Fragment,null,a.map(s=>p.createElement(bS,{key:s,zIndex:s,isPanorama:r})),t,i.map(s=>p.createElement(bS,{key:s,zIndex:s,isPanorama:r})))}var RQ=["children"];function MQ(e,t){if(e==null)return{};var r,n,a=$Q(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function $Q(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function nh(){return nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nh.apply(null,arguments)}var LQ={width:"100%",height:"100%",display:"block"},FQ=p.forwardRef((e,t)=>{var r=iO(),n=sO(),a=lO();if(!va(r)||!va(n))return null;var{children:i,otherAttributes:s,title:o,desc:c}=e,u,d;return s!=null&&(typeof s.tabIndex=="number"?u=s.tabIndex:u=a?0:void 0,typeof s.role=="string"?d=s.role:d=a?"application":void 0),p.createElement(jE,nh({},s,{title:o,desc:c,role:d,tabIndex:u,width:r,height:n,style:LQ,ref:t}),i)}),BQ=e=>{var{children:t}=e,r=Se(sp);if(!r)return null;var{width:n,height:a,y:i,x:s}=r;return p.createElement(jE,{width:n,height:a,x:s,y:i},t)},_S=p.forwardRef((e,t)=>{var{children:r}=e,n=MQ(e,RQ),a=Nr();return a?p.createElement(BQ,null,p.createElement(wS,{isPanorama:!0},r)):p.createElement(FQ,nh({ref:t},n),p.createElement(wS,{isPanorama:!1},r))});function UQ(){var e=$t(),[t,r]=p.useState(null),n=Se(sz);return p.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),i=a.width/t.offsetWidth;Mt(i)&&i!==n&&e(UU(i))}},[t,e,n]),r}function jS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jS(Object(r),!0).forEach(function(n){WQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WQ(e,t,r){return(t=KQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KQ(e){var t=HQ(e,"string");return typeof t=="symbol"?t:t+""}function HQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function As(){return As=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},As.apply(null,arguments)}var qQ=()=>(Hq(),null);function ah(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var VQ=p.forwardRef((e,t)=>{var r,n,a=p.useRef(null),[i,s]=p.useState({containerWidth:ah((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:ah((n=e.style)===null||n===void 0?void 0:n.height)}),o=p.useCallback((u,d)=>{s(f=>{var h=Math.round(u),m=Math.round(d);return f.containerWidth===h&&f.containerHeight===m?f:{containerWidth:h,containerHeight:m}})},[]),c=p.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=u.getBoundingClientRect();o(d,f);var h=g=>{var{width:y,height:v}=g[0].contentRect;o(y,v)},m=new ResizeObserver(h);m.observe(u),a.current=m}},[t,o]);return p.useEffect(()=>()=>{var u=a.current;u!=null&&u.disconnect()},[o]),p.createElement(p.Fragment,null,p.createElement(lp,{width:i.containerWidth,height:i.containerHeight}),p.createElement("div",As({ref:c},e)))}),GQ=p.forwardRef((e,t)=>{var{width:r,height:n}=e,[a,i]=p.useState({containerWidth:ah(r),containerHeight:ah(n)}),s=p.useCallback((c,u)=>{i(d=>{var f=Math.round(c),h=Math.round(u);return d.containerWidth===f&&d.containerHeight===h?d:{containerWidth:f,containerHeight:h}})},[]),o=p.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();s(u,d)}},[t,s]);return p.createElement(p.Fragment,null,p.createElement(lp,{width:a.containerWidth,height:a.containerHeight}),p.createElement("div",As({ref:o},e)))}),YQ=p.forwardRef((e,t)=>{var{width:r,height:n}=e;return p.createElement(p.Fragment,null,p.createElement(lp,{width:r,height:n}),p.createElement("div",As({ref:t},e)))}),XQ=p.forwardRef((e,t)=>{var{width:r,height:n}=e;return Ua(r)||Ua(n)?p.createElement(GQ,As({},e,{ref:t})):p.createElement(YQ,As({},e,{ref:t}))});function JQ(e){return e===!0?VQ:XQ}var QQ=p.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:i,onContextMenu:s,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:m,onTouchMove:g,onTouchStart:y,style:v,width:x,responsive:w,dispatchTouchEvents:b=!0}=e,_=p.useRef(null),j=$t(),[S,N]=p.useState(null),[k,C]=p.useState(null),E=UQ(),P=lx(),A=(P==null?void 0:P.width)>0?P.width:x,H=(P==null?void 0:P.height)>0?P.height:a,J=p.useCallback(T=>{E(T),typeof t=="function"&&t(T),N(T),C(T),T!=null&&(_.current=T)},[E,t,N,C]),ee=p.useCallback(T=>{j(FD(T)),j(xn({handler:i,reactEvent:T}))},[j,i]),B=p.useCallback(T=>{j(gy(T)),j(xn({handler:u,reactEvent:T}))},[j,u]),K=p.useCallback(T=>{j(mT()),j(xn({handler:d,reactEvent:T}))},[j,d]),D=p.useCallback(T=>{j(gy(T)),j(xn({handler:f,reactEvent:T}))},[j,f]),R=p.useCallback(()=>{j(HD())},[j]),F=p.useCallback(T=>{j(KD(T.key))},[j]),le=p.useCallback(T=>{j(xn({handler:s,reactEvent:T}))},[j,s]),re=p.useCallback(T=>{j(xn({handler:o,reactEvent:T}))},[j,o]),Ne=p.useCallback(T=>{j(xn({handler:c,reactEvent:T}))},[j,c]),O=p.useCallback(T=>{j(xn({handler:h,reactEvent:T}))},[j,h]),V=p.useCallback(T=>{j(xn({handler:y,reactEvent:T}))},[j,y]),te=p.useCallback(T=>{b&&j(VD(T)),j(xn({handler:g,reactEvent:T}))},[j,b,g]),M=p.useCallback(T=>{j(xn({handler:m,reactEvent:T}))},[j,m]),X=JQ(w);return p.createElement($T.Provider,{value:S},p.createElement(dF.Provider,{value:k},p.createElement(X,{width:A??(v==null?void 0:v.width),height:H??(v==null?void 0:v.height),className:rt("recharts-wrapper",n),style:zQ({position:"relative",cursor:"default",width:A,height:H},v),onClick:ee,onContextMenu:le,onDoubleClick:re,onFocus:R,onKeyDown:F,onMouseDown:Ne,onMouseEnter:B,onMouseLeave:K,onMouseMove:D,onMouseUp:O,onTouchEnd:M,onTouchMove:te,onTouchStart:V,ref:J},p.createElement(qQ,null),r)))}),ZQ=["width","height","responsive","children","className","style","compact","title","desc"];function eZ(e,t){if(e==null)return{};var r,n,a=tZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function tZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var rZ=p.forwardRef((e,t)=>{var{width:r,height:n,responsive:a,children:i,className:s,style:o,compact:c,title:u,desc:d}=e,f=eZ(e,ZQ),h=Qn(f);return c?p.createElement(p.Fragment,null,p.createElement(lp,{width:r,height:n}),p.createElement(_S,{otherAttributes:h,title:u,desc:d},i)):p.createElement(QQ,{className:s,style:o,width:r,height:n,responsive:a??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},p.createElement(_S,{otherAttributes:h,title:u,desc:d,ref:t},p.createElement(_X,null,i)))});function vy(){return vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vy.apply(null,arguments)}var nZ={top:5,right:5,bottom:5,left:5},aZ={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:nZ,reverseStackOrder:!1,syncMethod:"index",responsive:!1},YD=p.forwardRef(function(t,r){var n,a=Mr(t.categoricalChartProps,aZ),{chartName:i,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:u}=t,d={chartName:i,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return p.createElement(TQ,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:i},p.createElement(fX,{chartData:u.data}),p.createElement(DQ,{layout:a.layout,margin:a.margin}),p.createElement(IQ,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),p.createElement(rZ,vy({},a,{ref:r})))}),iZ=["axis"],sZ=p.forwardRef((e,t)=>p.createElement(YD,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:iZ,tooltipPayloadSearcher:FT,categoricalChartProps:e,ref:t})),oZ=["axis","item"],lZ=p.forwardRef((e,t)=>p.createElement(YD,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:oZ,tooltipPayloadSearcher:FT,categoricalChartProps:e,ref:t}));function XD({options:e,value:t,onChange:r,className:n=""}){return l.jsx("div",{className:`inline-flex rounded-2xl border border-gray-200/80 bg-white p-1 shadow-sm ${n}`,children:e.map(a=>l.jsx("button",{onClick:()=>r(a.value),className:`px-4 py-2 text-sm font-semibold rounded-xl transition-all duration-150 min-h-[40px] ${t===a.value?"bg-[rgb(0,122,255)] text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:a.label},a.value))})}const SS={new_lead:"New Lead",contacted:"Contacted",showing_scheduled:"Showing Scheduled",offer_submitted:"Offer Submitted",under_contract:"Under Contract",pending:"Pending",closed:"Closed",dead:"Lost"},NS=["under_contract","pending"],cZ=["closed","dead"],uZ=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dZ=new Date().getFullYear(),Gs={buyer:"Buyer",seller:"Seller",buyer_and_seller:"Buyer & Seller",renter:"Renter",landlord:"Landlord"},kS=30*60*1e3,fZ=60*1e3,ih=["luma-insights","pipeline-health","alerts-actions","monthly-momentum","deal-type-mix","lead-source","upcoming-deals"],hZ=e=>{const t=e.map(s=>s==="monthly-gci"?"monthly-momentum":s),r=t.filter((s,o)=>t.indexOf(s)===o),n=new Set(ih),a=r.filter(s=>n.has(s)),i=ih.filter(s=>!a.includes(s));return[...a,...i]},pZ=/^\d{4}-\d{2}-\d{2}$/,Lc=e=>{if(!e)return null;const t=e.trim();if(!t)return null;const r=t.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(r){const i=Number(r[1]),s=Number(r[2])-1,o=Number(r[3]);if(Number.isNaN(i)||Number.isNaN(s)||Number.isNaN(o)||s<0||s>11||o<1||o>31)return null;const c=new Date(Date.UTC(i,s,o));return{year:i,month:s,date:c}}const n=t.replace(" ","T").replace(/(\+\d{2})(\d{2})$/,"$1:$2").replace(/(-\d{2})(\d{2})$/,"$1:$2"),a=new Date(n);return Number.isNaN(a.getTime())?null:{year:a.getUTCFullYear(),month:a.getUTCMonth(),date:a}},CS=e=>{if(!e)return null;const t=Lc(e);if(!t)return null;const r=e.trim();if(pZ.test(r)){const a=t.date.getUTCDate();return new Date(t.year,t.month,a,23,59,59,999).getTime()}return t.date.getTime()},ag=(e,t)=>{const r=e.split("T")[0],n=t.split("T")[0];return[`and(close_date.gte.${r},close_date.lte.${n})`,`and(close_date.is.null,closed_at.gte.${e},closed_at.lte.${t})`].join(",")},ES=(e,t,r)=>{const n=Lc(e.close_date)||Lc(e.closed_at);if(!n)return!1;const a=n.date.getTime();return a>=t.getTime()&&a<=r.getTime()};function mZ({id:e,children:t}){const{attributes:r,listeners:n,setNodeRef:a,transform:i,transition:s,isDragging:o}=Fh({id:e}),c={transform:Xn.Transform.toString(i),transition:s,opacity:o?.5:1,position:"relative"};return l.jsxs("div",{ref:a,style:c,className:"relative group",children:[l.jsx("div",{...r,...n,className:"absolute -top-2 -right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing bg-white rounded-lg shadow-lg p-2",children:l.jsx(E0,{className:"w-4 h-4 text-gray-400"})}),t]})}function gZ(){var pt,Et;const{user:e,roleInfo:t}=At(),[r,n]=p.useState({ytdGCI:0,ytdDeals:0,ytdVolume:0,avgCommission:0,closingNext7Days:0,conversionRate:0}),[a,i]=p.useState([]),[s,o]=p.useState([]),[c,u]=p.useState([]),[d,f]=p.useState([]),[h,m]=p.useState([]),[g,y]=p.useState(!0),[v,x]=p.useState(!1),[w,b]=p.useState([]),[_,j]=p.useState(null),[S,N]=p.useState(null),[k,C]=p.useState(!1),E=p.useRef(!1),[P,A]=p.useState(0),[H,J]=p.useState(""),ee=p.useRef(null),[B,K]=p.useState([]),[D,R]=p.useState([...ih]),[F,le]=p.useState(null),[re,Ne]=p.useState([]),[O,V]=p.useState([]),[te,M]=p.useState([]),[X,T]=p.useState([]),[z,Z]=p.useState([]),[$,pe]=p.useState([]),[ce,Me]=p.useState([]),[Ie,Je]=p.useState([]),[Ke,lr]=p.useState("ytd"),Ve=p.useMemo(()=>J6(Ke),[Ke]),q=Th(Ah(nl,{activationConstraint:{distance:8}})),He=[{value:"this_month",label:"MTD"},{value:"last_30_days",label:"30D"},{value:"this_quarter",label:"QTD"},{value:"ytd",label:"YTD"}];p.useEffect(()=>{if(!e)return;(async()=>{var Te;const Y={id:e.id,label:((Te=e.user_metadata)==null?void 0:Te.name)||e.email||"You",email:e.email||""},ie=async()=>{if(!(t!=null&&t.teamId))return[];const{data:ae,error:he}=await G.from("user_teams").select("user_id").eq("team_id",t.teamId);return he?(console.error("Unable to load team members",he),[]):(ae||[]).map(de=>de.user_id)},fe=async()=>{if(!t)return[e.id];switch(t.globalRole){case"admin":return await Cn(t);case"sales_manager":{const ae=await ie();return ae.length?ae:await Cn(t)}case"team_lead":return await Cn(t);default:return[t.userId]}};if(!t||t.globalRole==="agent"){Ne([Y]),V([e.id]);return}const ue=await fe();let se=[];const{data:Ae,error:me}=await G.rpc("get_accessible_agents");if(me)console.error("Unable to load accessible agents",me);else if(Ae){const ae=Ae,he=new Set(ae.filter(Oe=>Oe.global_role==="admin"||Oe.global_role==="sales_manager").map(Oe=>Oe.user_id)),de=ae.filter(Oe=>Oe.global_role!=="admin"&&Oe.global_role!=="sales_manager").map(Oe=>({id:Oe.user_id,label:Oe.display_name||Oe.email||"Agent",email:Oe.email||""}));if(se=(ue.length?de.filter(Oe=>ue.includes(Oe.id)):de).filter((Oe,Ge,jt)=>jt.findIndex(Tt=>Tt.id===Oe.id)===Ge),he.size)for(const Oe of he){const Ge=ue.indexOf(Oe);Ge!==-1&&ue.splice(Ge,1)}}const xe=ae=>{var he;return ae===e.id?((he=e.user_metadata)==null?void 0:he.name)||e.email||"You":`Agent ${ae.slice(0,8)}`};if(!se.length)se=ue.map(ae=>({id:ae,label:xe(ae),email:""}));else{const ae=new Set(se.map(de=>de.id)),he=ue.filter(de=>!ae.has(de));he.length&&(se=[...se,...he.map(de=>({id:de,label:xe(de),email:""}))])}Ne(se),ue.length||se.map(ae=>ae.id),V([])})()},[e,t==null?void 0:t.globalRole,t==null?void 0:t.teamId]);const ke=p.useMemo(()=>O.length?[...O].sort().join("|"):"",[O]),Ue=p.useMemo(()=>$.length?[...$].sort().join("|"):"",[$]),xt=p.useMemo(()=>ce.length?[...ce].sort().join("|"):"",[ce]),L=p.useMemo(()=>Ie.length?[...Ie].sort().join("|"):"",[Ie]),Q=!!e&&((t==null?void 0:t.globalRole)==="team_lead"||(t==null?void 0:t.teamRole)==="team_lead"),oe=Q&&O.length===1&&O[0]===e.id,Ee=O.length===0||O.length===re.length,Le=p.useMemo(()=>{const I=(Re,Qr)=>Re.length===0?Qr:Re.length===1?Re[0]:Re.length===2?`${Re[0]} and ${Re[1]}`:Re.length===3?`${Re[0]}, ${Re[1]} and ${Re[2]}`:`multiple ${Qr}`,Y=Re=>Re.endsWith("s")?`${Re}'`:`${Re}'s`,ie=re.filter(Re=>O.includes(Re.id)).map(Re=>Re.label||Re.email||"Agent"),fe=Ee||ie.length===0,ue=!fe&&ie.length===1,se=ue?Y(ie[0]):"",Ae=ce.length===0||X.length>0&&ce.length===X.length,me=Ie.length===0||z.length>0&&Ie.length===z.length,xe=$.length===0||te.length>0&&$.length===te.length,Te=X.filter(Re=>ce.includes(Re.id)).map(Re=>Re.label),ae=Ie.map(Re=>Gs[Re]??Re.replace(/_/g," ")),he=te.filter(Re=>$.includes(Re.id)).map(Re=>Re.name),de=Ae?"all pipeline stages":I(Te,"pipeline stages"),Ce=me?"all deal types":I(ae,"deal types"),Oe=xe?"all lead sources":I(he,"lead sources");if(Ae&&me&&xe)return ue?`Viewing ${se} deals across all pipeline stages, deal types, and lead sources.`:fe?"Viewing all deals across all agents, pipeline stages, deal types, and lead sources.":"Viewing deals for multiple agents across all pipeline stages, deal types, and lead sources.";const jt=fe?"all agents":ue?se:ie.length===2?`${ie[0]} and ${ie[1]}`:ie.length===3?`${ie[0]}, ${ie[1]} and ${ie[2]}`:"multiple agents",Tt=[];if(de&&Tt.push(de),Ce){const Re=me?`across ${Ce}`:`${Ce} deals`;Tt.push(Re)}Oe&&Tt.push(`from ${Oe}`),Tt.length===0&&Tt.push("deals");const ct=Tt.join(", ");return`Viewing ${jt} ${ct}`.replace(/\s+/g," ").trim()+"."},[re,z,te,X,Ee,O,Ie,$,ce]),Pe=()=>{e&&V([e.id])},cr=()=>{V([])},Qt=I=>{const Y=Array.from(I.target.selectedOptions).map(ie=>ie.value);V(Y)};p.useEffect(()=>{z.length&&Je(I=>I.filter(Y=>z.includes(Y)))},[z]);const aa=I=>{const Y=Array.from(I.target.selectedOptions).map(ie=>ie.value);Me(Y)},ia=I=>{const Y=Array.from(I.target.selectedOptions).map(ie=>ie.value);pe(Y)},zi=I=>{const Y=Array.from(I.target.selectedOptions).map(ie=>ie.value);Je(Y)},Wi=t&&t.globalRole!=="agent"||re.length>1,sa=p.useMemo(()=>a.reduce((I,Y)=>I+Y.count,0),[a]),ri=p.useMemo(()=>a.reduce((I,Y)=>I+Y.expectedGCI,0),[a]),Ki=p.useMemo(()=>a.reduce((I,Y)=>I+Y.stalledCount,0),[a]),ni=p.useMemo(()=>{const I=new Date;I.setHours(0,0,0,0);const Y=new Date(I);Y.setDate(Y.getDate()+29),Y.setHours(23,59,59,999);const ie=I.getTime(),fe=Y.getTime();return d.map(ue=>{const se=CS(ue.close_date)??CS(ue.closed_at);return se===null?null:{deal:ue,closeTime:se}}).filter(ue=>ue?ue.closeTime>=ie&&ue.closeTime<=fe:!1).sort((ue,se)=>ue.closeTime-se.closeTime).map(({deal:ue})=>ue)},[d]),ze=p.useMemo(()=>ni.reduce((I,Y)=>I+Vi(Y),0),[ni]);p.useEffect(()=>{e&&re.length&&yr()},[e==null?void 0:e.id,ke,Ue,xt,L,Ke,re.length]),p.useEffect(()=>{e&&Mn()},[e]),p.useEffect(()=>{const I=O.length?O:re.map(Y=>Y.id);!e||!I.length||wt(I)},[O,re]),p.useEffect(()=>{g||E.current||ur()},[g,P]),p.useEffect(()=>{if(!e)return;const I=()=>{var fe;const Y=Date.now();(P===0||Y-P>=kS||!H)&&(J(O_((fe=e.user_metadata)==null?void 0:fe.name,t==null?void 0:t.globalRole)),A(Y))};return I(),ee.current&&clearInterval(ee.current),ee.current=setInterval(I,fZ),()=>{ee.current&&clearInterval(ee.current)}},[(pt=e==null?void 0:e.user_metadata)==null?void 0:pt.name]);const bt=(I,Y)=>Y.length?Y.length===1?I.eq("user_id",Y[0]):I.in("user_id",Y):I,nt=(I,Y)=>{if(I=bt(I,Y),$.length&&(I=I.in("lead_source_id",$)),ce.length){const ie=ce.filter(Boolean);ie.length&&(I=I.in("pipeline_status_id",ie))}return Ie.length&&(I=I.in("deal_type",Ie)),I},wt=async I=>{const Y=I.length?I:re.map(Te=>Te.id);if(!Y.length)return;let ie=G.from("deals").select(`
        id,
        user_id,
        deal_type,
        lead_source_id,
        lead_sources (id, name),
        pipeline_status_id,
        pipeline_statuses (id, name, color, sort_order)
      `).order("created_at",{ascending:!1}).limit(1e3);ie=bt(ie,Y);const{data:fe,error:ue}=await ie;if(ue){console.error("Unable to load filter context",ue);return}const se=new Map,Ae=new Map,me=new Set;(fe||[]).forEach(Te=>{var ae,he;(ae=Te.lead_sources)!=null&&ae.id&&se.set(Te.lead_sources.id,{id:Te.lead_sources.id,name:Te.lead_sources.name||"Unknown"}),(he=Te.pipeline_statuses)!=null&&he.id&&Ae.set(Te.pipeline_statuses.id,{id:Te.pipeline_statuses.id,label:Te.pipeline_statuses.name,color:Te.pipeline_statuses.color,sortOrder:Te.pipeline_statuses.sort_order}),Te.deal_type&&me.add(Te.deal_type)}),M(Array.from(se.values()).sort((Te,ae)=>Te.name.localeCompare(ae.name))),T(Array.from(Ae.values()).sort((Te,ae)=>{const he=Te.sortOrder??999,de=ae.sortOrder??999;return he===de?Te.label.localeCompare(ae.label):he-de}));const xe=Array.from(me).sort((Te,ae)=>{const he=Gs[Te]??Te,de=Gs[ae]??ae;return he.localeCompare(de)});Z(xe.length?xe:Object.keys(Gs))},yr=async()=>{if(!e)return;const I=O.length?O:re.map(ue=>ue.id);if(!I.length)return;const Y=g;Y?y(!0):x(!0);const ie=Ve.start.toISOString(),fe=Ve.end.toISOString();try{await Promise.all([Lr(I,ie,fe),Yr(I),tt(I),Zt(I,ie,fe),kr(I),Xr(I)])}catch(ue){console.error("Error loading dashboard data",ue)}finally{Y&&y(!1),x(!1)}},ur=async()=>{if(!E.current&&e){C(!0);try{const{data:{session:I}}=await G.auth.getSession();if(!I)return;const Y="https://gomwhbewjdcllejifdyf.supabase.co/functions/v1/luma-insights",ie={...r,closingThisMonth:r.closingNext7Days},fe=await fetch(Y,{method:"POST",headers:{Authorization:`Bearer ${I.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({stats:ie,pipelineHealth:a.map(Ae=>({id:Ae.id,name:Ae.name,count:Ae.count,expectedGCI:Ae.expectedGCI,stalledCount:Ae.stalledCount})),leadSourceData:c,monthlyData:s,upcomingDealsCount:d.length,projectedGCI:ze})});if(!fe.ok){const Ae=await fe.text();console.error("Failed to fetch AI insights:",Ae);return}const se=(await fe.json()).insights||[];b(se),!_&&se.length&&(j(se),E.current=!0)}catch(I){console.error("Error loading AI insights:",I)}finally{C(!1)}}},Lr=async(I,Y,ie)=>{const fe=ag(Y,ie);let ue=G.from("deals").select("*").eq("status","closed").or(fe);ue=nt(ue,I);const{data:se,error:Ae}=await ue;Ae&&console.error("loadStats closedDeals error",Ae);let me=G.from("deals").select("*").gte("created_at",Y).lte("created_at",ie);me=nt(me,I);const{data:xe,error:Te}=await me;Te&&console.error("loadStats allDeals error",Te);const ae=new Date;ae.setHours(0,0,0,0);const he=new Date(ae);he.setDate(he.getDate()+6),he.setHours(23,59,59,999);let de=G.from("deals").select("id").in("status",NS).gte("close_date",ae.toISOString()).lte("close_date",he.toISOString());de=nt(de,I);const{data:Ce,error:Oe}=await de;Oe&&console.error("loadStats closingSoon error",Oe);let Ge=0,jt=0;const Tt=(se||[]).filter(Ls=>ES(Ls,Ve.start,Ve.end));Tt.forEach(Ls=>{const Wp=Ls.actual_sale_price||0;Ge+=Wp,jt+=Vi(Ls)});const ct=Tt.length,Re=ct>0?jt/ct:0,Qr=(xe==null?void 0:xe.length)||0,gu=Qr>0?ct/Qr:0;n({ytdGCI:jt,ytdDeals:ct,ytdVolume:Ge,avgCommission:Re,closingNext7Days:(Ce==null?void 0:Ce.length)||0,conversionRate:gu})},Yr=async I=>{let Y=G.from("deals").select(`
        *,
        pipeline_statuses (id, name, color, sort_order),
        lead_sources (id, name)
      `).not("status","in",`(${cZ.join(",")})`);Y=nt(Y,I);const{data:ie,error:fe}=await Y;if(fe){console.error("loadPipelineHealth deals error",fe);return}if(!ie){i([]),K([]);return}const ue=new Map;ie.forEach(ae=>{var jt,Tt,ct,Re;const he=((jt=ae.pipeline_statuses)==null?void 0:jt.id)||ae.pipeline_status_id||`status:${ae.status}`,de=((Tt=ae.pipeline_statuses)==null?void 0:Tt.name)||SS[ae.status]||ae.status,Ce=((ct=ae.pipeline_statuses)==null?void 0:ct.color)||null,Oe=((Re=ae.pipeline_statuses)==null?void 0:Re.sort_order)??null,Ge=ue.get(he)||{id:he,name:de,color:Ce,sortOrder:Oe,count:0,expectedGCI:0,stalledCount:0};Ge.count+=1,Ge.expectedGCI+=Vi(ae),A_(ae.stage_entered_at,30)&&(Ge.stalledCount+=1),ue.set(he,Ge)});const Ae=Array.from(ue.values()).sort((ae,he)=>{const de=ae.sortOrder??999,Ce=he.sortOrder??999;return de===Ce?ae.name.localeCompare(he.name):de-Ce}).map(ae=>({id:ae.id,name:ae.name,color:ae.color,count:ae.count,expectedGCI:ae.expectedGCI,stalledCount:ae.stalledCount}));i(Ae);const me=new Map;ie.forEach(ae=>{const he=me.get(ae.deal_type)??{count:0,gci:0,statusCounts:{}};he.count+=1,he.gci+=Vi(ae);const de=he.statusCounts[ae.status]||0;he.statusCounts[ae.status]=de+1,me.set(ae.deal_type,he)});const xe=ie.length,Te=Array.from(me.entries()).map(([ae,he])=>({dealType:ae,count:he.count,gci:he.gci,percentage:xe>0?he.count/xe:0,statusCounts:he.statusCounts})).sort((ae,he)=>he.count-ae.count);K(Te)},tt=async I=>{const Y=Ve!=null&&Ve.start?Ve.start.getFullYear():dZ,ie=ag(Ve.start.toISOString(),Ve.end.toISOString());let fe=G.from("deals").select("*").eq("status","closed").or(ie);fe=nt(fe,I);const{data:ue,error:se}=await fe;if(se){console.error("loadMonthlyTrends error",se);return}if(!ue){o([]);return}const Ae=uZ.map(me=>({month:me,gci:0,deals:0}));ue.forEach(me=>{const xe=Lc(me.close_date)||Lc(me.closed_at);if(!xe||xe.year!==Y)return;const Te=xe.month,ae=Ae[Te];ae.gci+=Vi(me),ae.deals+=1}),o(Ae.map(me=>({month:me.month,gci:Math.round(me.gci),deals:me.deals})))},Zt=async(I,Y,ie)=>{const fe=ag(Y,ie);let ue=G.from("deals").select("*, lead_sources(*)").eq("status","closed").or(fe);ue=nt(ue,I);const{data:se,error:Ae}=await ue;if(Ae){console.error("loadLeadSourcePerformance error",Ae);return}if(!se){u([]);return}const me=se.filter(ae=>ES(ae,Ve.start,Ve.end)),xe=new Map;me.forEach(ae=>{var Ce;const he=((Ce=ae.lead_sources)==null?void 0:Ce.name)||"Unknown",de=xe.get(he)||{deals:0,gci:0};de.deals+=1,de.gci+=Vi(ae),xe.set(he,de)});const Te=Array.from(xe.entries()).map(([ae,he])=>({name:ae,deals:he.deals,gci:Math.round(he.gci)})).sort((ae,he)=>he.gci-ae.gci).slice(0,5);u(Te)},kr=async I=>{let Y=G.from("deals").select("*").in("status",NS).order("close_date",{ascending:!0,nullsLast:!0}).limit(200);Y=nt(Y,I);const{data:ie,error:fe}=await Y;if(fe){console.error("loadUpcomingDeals error",fe),f([]);return}f(ie||[])},Xr=async I=>{let Y=G.from("deals").select("*").neq("status","closed").neq("status","dead").order("stage_entered_at",{ascending:!0});Y=nt(Y,I);const{data:ie,error:fe}=await Y;if(fe){console.error("loadStalledDeals error",fe),m([]);return}const ue=(ie||[]).filter(se=>A_(se.stage_entered_at,30)).slice(0,5);m(ue)},Mn=async()=>{if(e)try{const{data:I,error:Y}=await G.from("dashboard_layouts").select("widget_order").eq("user_id",e.id).maybeSingle();if(Y){console.error("Error loading widget layout:",Y);return}I&&I.widget_order?R(hZ(I.widget_order)):R([...ih])}catch(I){console.error("Error loading widget layout:",I)}},$n=async I=>{if(e)try{const{error:Y}=await G.from("dashboard_layouts").upsert({user_id:e.id,widget_order:I,updated_at:new Date().toISOString()},{onConflict:"user_id"});Y&&console.error("Error saving widget layout:",Y)}catch(Y){console.error("Error saving widget layout:",Y)}},_t=I=>{const{active:Y,over:ie}=I;if(!ie||Y.id===ie.id){le(null);return}const fe=D.indexOf(Y.id),ue=D.indexOf(ie.id),se=[...D],[Ae]=se.splice(fe,1);se.splice(ue,0,Ae),R(se),$n(se),le(null)},Jr=()=>{window.location.href="/pipeline"},oa=()=>{window.location.href="/pipeline"},$s=()=>{window.location.href="/luma"},ai=p.useMemo(()=>{const I=[];if(s.length>=2){const ie=s.slice(-2);if(ie.length===2){const[fe,ue]=ie;if(ue.gci>fe.gci){const se=(ue.gci-fe.gci)/fe.gci*100;I.push(`You're on track to beat last month by ${se.toFixed(0)}% in GCI.`)}else if(ue.gci<fe.gci&&fe.gci>0){const se=(fe.gci-ue.gci)/fe.gci*100;I.push(`GCI is down ${se.toFixed(0)}% compared to last month.`)}}}const Y=new Map;if(a.forEach(ie=>{ie.stalledCount>0&&Y.set(ie.name,ie.stalledCount)}),Y.size>0){const ie=Array.from(Y.entries()).sort((fe,ue)=>ue[1]-fe[1])[0];I.push(`${ie[1]} deal${ie[1]>1?"s have":" has"} been stalled in '${ie[0]}' for 30+ days.`)}if(c.length>0){const ie=c[0];I.push(`${ie.name} is your top performing lead source with ${Fr(ie.gci)} in closed deals.`)}return r.conversionRate>0&&(r.conversionRate>=.3?I.push(`Strong ${Gu(r.conversionRate)} conversion rate - keep up the momentum!`):r.conversionRate<.15&&I.push(`Conversion rate at ${Gu(r.conversionRate)} - consider focusing on lead quality.`)),d.length>0&&ze>0&&I.push(`${d.length} deals projected to close soon with ${Fr(ze)} potential GCI.`),I.length===0&&I.push("Keep adding deals to your pipeline to get personalized insights."),I},[r,a,c,s,d,ze]);p.useEffect(()=>{if(g)return;const I=Date.now();!(P===0||I-P>=kS)&&S||(N(ai),A(I),j(null),E.current=!1)},[ai,g,P]);const bb=I=>{switch(I){case"luma-insights":return Up();case"pipeline-health":return zp();case"alerts-actions":return W();case"monthly-momentum":return _e();case"deal-type-mix":return $e();case"lead-source":return Qe();case"upcoming-deals":return d.length>0?Be():null;default:return null}},Up=()=>l.jsx("div",{className:"hig-card p-6 bg-gradient-to-br from-blue-50 to-white border-blue-200/60",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-12 h-12 rounded-2xl bg-[rgb(0,122,255)] flex items-center justify-center shadow-lg",children:l.jsx(js,{className:"w-6 h-6 text-white",strokeWidth:2})})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"hig-text-heading",children:"Luma Insights"}),k&&l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[rgb(0,122,255)]"})]}),(_||w).length>0?l.jsx("div",{className:"space-y-3",children:(_||w).slice(0,3).map((I,Y)=>l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[rgb(0,122,255)] mt-2 flex-shrink-0"}),l.jsx("p",{className:"text-[15px] text-gray-700 leading-relaxed",children:I})]},Y))}):l.jsx("div",{className:"space-y-3",children:(S||ai).slice(0,3).map((I,Y)=>l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[rgb(0,122,255)] mt-2 flex-shrink-0"}),l.jsx("p",{className:"text-[15px] text-gray-700 leading-relaxed",children:I})]},Y))})]})]})}),zp=()=>l.jsxs("div",{className:"hig-card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"hig-text-heading",children:"Pipeline Health"}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:sa}),l.jsx("div",{className:"text-xs text-gray-500",children:"Active Deals"})]})]}),a.length===0?l.jsx("div",{className:"text-sm text-gray-500",children:"No active deals in your pipeline yet. Add a deal to see health metrics here."}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-xl",children:l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Total Pipeline Value"}),l.jsx("span",{className:"text-lg font-semibold text-[rgb(0,122,255)]",children:Fr(ri)})]})}),l.jsx("div",{className:"space-y-3",children:a.map(I=>{if(I.count===0)return null;const Y=sa>0?I.count/sa*100:0;return l.jsxs("div",{className:"group p-4 rounded-xl border border-gray-200/60 hover:border-gray-300 hover:shadow-sm transition-all cursor-pointer",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Bh(I.color)}}),l.jsx("span",{className:"font-medium text-gray-900",children:I.name})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[I.stalledCount>0&&l.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-orange-50 rounded-full",children:[l.jsx(hs,{className:"w-3.5 h-3.5 text-orange-600",strokeWidth:2}),l.jsxs("span",{className:"text-xs font-medium text-orange-700",children:[I.stalledCount," stalled"]})]}),l.jsx("span",{className:"text-lg font-semibold text-gray-900",children:I.count})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-sm text-[rgb(0,122,255)] font-medium",children:Fr(I.expectedGCI)}),l.jsxs("div",{className:"text-xs text-gray-500",children:[Y.toFixed(0),"% of pipeline"]})]})]},I.id)})}),Ki>0&&l.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200/60",children:l.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-orange-50 rounded-xl border border-orange-200/60",children:[l.jsx(La,{className:"w-4 h-4 text-orange-600",strokeWidth:2}),l.jsxs("span",{className:"text-sm font-medium text-orange-700",children:[Ki," deals need attention (30+ days)"]})]})})]})]}),W=()=>l.jsxs("div",{className:"hig-card p-6",children:[l.jsx("div",{className:"flex items-center justify-between mb-6",children:l.jsx("h2",{className:"hig-text-heading",children:"Alerts & Actions"})}),h.length>0?l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2 text-orange-600 mb-3",children:[l.jsx(La,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:"Stalled Deals Requiring Attention"})]}),l.jsx("div",{className:"space-y-2",children:h.slice(0,3).map(I=>l.jsx("div",{className:"p-3 bg-orange-50 rounded-xl border border-orange-200/60 hover:shadow-sm transition-all cursor-pointer",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium text-gray-900 text-sm",children:I.client_name}),l.jsx("div",{className:"text-xs text-gray-600 mt-1",children:I.property_address})]}),l.jsx("div",{className:"ml-3 px-2 py-1 bg-orange-100 rounded-lg",children:l.jsxs("div",{className:"text-xs text-orange-700 font-semibold",children:[xE(I.stage_entered_at),"d"]})})]})},I.id))})]}):l.jsx("div",{className:"mb-6 p-4 bg-green-50 rounded-xl border border-green-200/60",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Fa,{className:"w-4 h-4 text-green-600",strokeWidth:2}),l.jsx("span",{className:"text-sm text-green-700",children:"All deals are moving smoothly!"})]})}),l.jsxs("div",{className:"pt-4 border-t border-gray-200/60",children:[l.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Quick Actions"}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{className:"hig-btn-secondary py-3 text-sm flex items-center justify-center gap-2",onClick:Jr,children:[l.jsx(WC,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"New Client"})]}),l.jsxs("button",{className:"hig-btn-secondary py-3 text-sm flex items-center justify-center gap-2",onClick:oa,children:[l.jsx(TC,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"New Task"})]}),l.jsxs("button",{className:"hig-btn-primary py-3 text-sm flex items-center justify-center gap-2",onClick:$s,children:[l.jsx(js,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Ask Luma"})]})]})]})]}),_e=()=>{const I=s.some(xe=>xe.gci>0||xe.deals>0),Y=s.filter(xe=>xe.gci>0||xe.deals>0),ie=Y.length>0?Y[Y.length-1]:null,fe=Y.length>=2?Y[Y.length-2]:null,ue=ie&&fe&&fe.gci>0?(ie.gci-fe.gci)/fe.gci*100:null,se=Y.reduce((xe,Te)=>Te.gci>((xe==null?void 0:xe.gci)??0)?Te:xe,null),Ae=s.map((xe,Te,ae)=>{const he=Math.max(0,Te-2),de=ae.slice(he,Te+1),Ce=de.reduce((Oe,Ge)=>Oe+Ge.gci,0);return de.length?Ce/de.length:xe.gci}),me=s.map((xe,Te)=>({...xe,trend:Ae[Te]??xe.gci}));return l.jsxs("div",{className:"hig-card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"hig-text-heading",children:"Monthly Momentum"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Track production pace and deal count across recent months."})]}),ue!==null&&l.jsxs("div",{className:`inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-semibold ${ue>=0?"bg-emerald-50 text-emerald-600":"bg-rose-50 text-rose-600"}`,children:[ue>=0?l.jsx(OC,{className:"w-3.5 h-3.5"}):l.jsx(P$,{className:"w-3.5 h-3.5"}),ue>=0?"+":"",ue.toFixed(1),"% vs prev. month"]})]}),I?l.jsxs(l.Fragment,{children:[l.jsx(u1,{width:"100%",height:180,children:l.jsxs(sZ,{data:me,children:[l.jsx(uy,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),l.jsx(hy,{dataKey:"month",tick:{fontSize:11},stroke:"#94a3b8"}),l.jsx(my,{tick:{fontSize:11},stroke:"#94a3b8",tickFormatter:xe=>`$${(xe/1e3).toFixed(0)}K`}),l.jsx(Lj,{formatter:xe=>Fr(xe),labelFormatter:xe=>`Month: ${xe}`,contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb"}}),l.jsx(dy,{type:"monotone",dataKey:"gci",stroke:"#0ea5e9",strokeWidth:2,dot:{r:3,fill:"#0ea5e9"},activeDot:{r:5}}),l.jsx(dy,{type:"monotone",dataKey:"trend",stroke:"#ef4444",strokeWidth:1.5,dot:!1,strokeDasharray:"4 4"})]})}),l.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2 text-xs text-gray-600",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"h-1.5 w-6 rounded-full bg-[#0ea5e9]"}),l.jsx("span",{children:"Monthly GCI"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"h-1.5 w-6 rounded-full bg-[#ef4444]"}),l.jsx("span",{children:"3-month trailing mean"})]})]}),se&&l.jsxs("div",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:["Top month: ",se.month,"  ",Fr(se.gci)]})]})]}):l.jsx("div",{className:"text-sm text-gray-500",children:"No closed deals yet in this period. Close your first deal to surface momentum insights."})]})},$e=()=>l.jsxs("div",{className:"hig-card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"hig-text-heading",children:"Deal Type Mix"}),l.jsx("div",{className:"text-xs text-gray-500",children:"Share of active deals by type & status"})]}),B.length>0?l.jsx("div",{className:"space-y-4",children:B.map(I=>l.jsxs("div",{className:"rounded-2xl border border-gray-100 p-4",children:[l.jsxs("div",{className:"flex items-start justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-base font-semibold text-gray-900",children:Gs[I.dealType]}),l.jsxs("p",{className:"text-sm text-gray-500",children:[I.count," active ",I.count===1?"deal":"deals"]}),l.jsxs("p",{className:"text-sm text-gray-500",children:[Fr(I.gci)," expected GCI"]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Gu(I.percentage)}),l.jsx("p",{className:"text-xs text-gray-500",children:"of pipeline"})]})]}),l.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:Object.entries(I.statusCounts).sort((Y,ie)=>ie[1]-Y[1]).map(([Y,ie])=>l.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-gray-100 px-3 py-1 text-xs font-medium text-gray-700",children:[l.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-gray-400"}),SS[Y]??Y.replace(/_/g," "),l.jsxs("span",{className:"text-gray-500",children:["(",ie,")"]})]},Y))})]},I.dealType))}):l.jsx("div",{className:"text-sm text-gray-500",children:"No active deals in your pipeline. Add a deal to see the deal-type mix."})]}),Qe=()=>l.jsxs("div",{className:"hig-card p-6",children:[l.jsx("h2",{className:"hig-text-heading mb-6",children:"Lead Source Performance"}),c.length>0?l.jsx(u1,{width:"100%",height:250,children:l.jsxs(lZ,{data:c,layout:"vertical",children:[l.jsx(uy,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),l.jsx(hy,{type:"number",tick:{fontSize:12},stroke:"#6b7280",tickFormatter:I=>`$${(I/1e3).toFixed(0)}K`}),l.jsx(my,{type:"category",dataKey:"name",tick:{fontSize:12},stroke:"#6b7280",width:100}),l.jsx(Lj,{formatter:I=>Fr(I),contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb"}}),l.jsx(CD,{dataKey:"gci",fill:"#0ea5e9",radius:[0,4,4,0]})]})}):l.jsx("div",{className:"text-sm text-gray-500",children:"No closed deals in this period, so lead source performance is not available yet."})]}),Be=()=>l.jsxs("div",{className:"hig-card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"hig-text-heading",children:"Forecasted Closings (Next 30 Days)"}),l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsx("span",{className:"font-medium text-gray-900",children:Fr(ze)})," ","projected GCI"]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ni.map(I=>l.jsxs("div",{className:"p-4 border border-gray-200/60 rounded-xl hover:shadow-sm hover:border-gray-300 transition-all cursor-pointer",children:[l.jsx("div",{className:"font-medium text-gray-900",children:I.client_name}),l.jsx("div",{className:"text-sm text-gray-600 mt-1",children:I.property_address}),l.jsxs("div",{className:"flex items-center justify-between mt-3",children:[l.jsx("div",{className:"text-sm font-semibold text-[rgb(0,122,255)]",children:Fr(Vi(I))}),l.jsx(cf,{className:"w-4 h-4 text-gray-400",strokeWidth:2})]})]},I.id))})]});return g?l.jsx("div",{className:"flex items-center justify-center h-96",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[rgb(0,122,255)]"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_10px_40px_rgba(15,23,42,0.08)] p-6 space-y-6",children:[l.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-[0.25em]",children:X6()}),l.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mt-1",children:H||O_((Et=e==null?void 0:e.user_metadata)==null?void 0:Et.name)}),l.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[r.closingNext7Days," deal",r.closingNext7Days===1?"":"s"," closing soon (next 7 days) "," ",Fr(ze)," projected GCI over the next 30 days."]})]}),v&&l.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-gray-500 lg:ml-auto",children:[l.jsx("span",{className:"h-2 w-2 rounded-full bg-[var(--app-accent)] animate-pulse"}),"Updating"]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"rounded-2xl border border-blue-100/70 bg-blue-50/40 p-4",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-blue-600",children:"Pipeline Value"}),l.jsx("p",{className:"text-2xl font-semibold text-gray-900 mt-2",children:Fr(ri)}),l.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Active stages only"})]}),l.jsxs("div",{className:"rounded-2xl border border-emerald-100/70 bg-emerald-50/40 p-4",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-emerald-600",children:"Projected GCI"}),l.jsx("p",{className:"text-2xl font-semibold text-gray-900 mt-2",children:Fr(ze)}),l.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Next 30 days"})]}),l.jsxs("div",{className:"rounded-2xl border border-purple-100/70 bg-purple-50/40 p-4",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-purple-600",children:"Active Deals"}),l.jsx("p",{className:"text-2xl font-semibold text-gray-900 mt-2",children:sa}),l.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Across pipeline"})]})]})]}),Wi&&l.jsxs("div",{className:"rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_6px_30px_rgba(15,23,42,0.08)] p-4 space-y-4",children:[l.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Scope"}),l.jsx("p",{className:"text-sm text-gray-700",children:Le})]}),l.jsx(XD,{options:He,value:Ke,onChange:I=>lr(I)})]}),re.length>0&&l.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Agents"}),Q&&l.jsx("button",{type:"button",onClick:Pe,className:`rounded-full px-3 py-1 text-xs font-semibold transition ${oe?"bg-[var(--app-accent)] text-white shadow-[0_8px_20px_rgba(0,122,255,0.25)]":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,children:"Focus On Me"})]}),l.jsx("div",{className:"flex items-center gap-1.5",children:!Ee&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:cr,children:"Clear"})})]}),l.jsx("select",{multiple:!0,value:O,onChange:Qt,className:"hig-input min-h-[72px] rounded-2xl border-gray-200 bg-white/90 text-sm",children:re.map(I=>l.jsx("option",{value:I.id,children:I.label},I.id))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Pipeline Stage"}),ce.length>0&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:()=>Me([]),children:"Clear"})]}),l.jsx("select",{multiple:!0,value:ce,onChange:aa,className:"hig-input min-h-[64px] mt-2",children:X.map(I=>l.jsx("option",{value:I.id,children:I.label},I.id))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Deal Type"}),Ie.length>0&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:()=>Je([]),children:"Clear"})]}),l.jsx("select",{multiple:!0,value:Ie,onChange:zi,className:"hig-input min-h-[64px] mt-2",children:z.map(I=>l.jsx("option",{value:I,children:Gs[I]??I.replace(/_/g," ")},I))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Lead Source"}),$.length>0&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:()=>pe([]),children:"Clear"})]}),l.jsx("select",{multiple:!0,value:$,onChange:ia,className:"hig-input min-h-[64px] mt-2",children:te.map(I=>l.jsx("option",{value:I.id,children:I.name},I.id))})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"hig-card p-6",title:"Gross commission income from closed deals in the selected date range.",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"p-2 rounded-xl bg-blue-50",children:l.jsx(I$,{className:"w-5 h-5 text-[rgb(0,122,255)]",strokeWidth:2})}),l.jsx("span",{className:"text-sm text-gray-600",title:"Gross commission income from closed deals in the selected date range.",children:"Total GCI"})]}),l.jsx("div",{className:"text-3xl font-semibold text-gray-900",children:Fr(r.ytdGCI)})]}),l.jsxs("div",{className:"hig-card p-6",title:"Number of deals marked closed within the selected date range.",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"p-2 rounded-xl bg-green-50",children:l.jsx(Fa,{className:"w-5 h-5 text-green-600",strokeWidth:2})}),l.jsx("span",{className:"text-sm text-gray-600",title:"Number of deals marked closed within the selected date range.",children:"Closed Deals"})]}),l.jsx("div",{className:"text-3xl font-semibold text-gray-900",children:r.ytdDeals})]}),l.jsxs("div",{className:"hig-card p-6",title:"Active deals scheduled to close in the next 7 days.",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"p-2 rounded-xl bg-orange-50",children:l.jsx(jo,{className:"w-5 h-5 text-orange-600",strokeWidth:2})}),l.jsx("span",{className:"text-sm text-gray-600",title:"Active deals scheduled to close in the next 7 days.",children:"Closing Soon (7d)"})]}),l.jsx("div",{className:"text-3xl font-semibold text-gray-900",children:r.closingNext7Days})]}),l.jsxs("div",{className:"hig-card p-6",title:"Closed deals divided by all deals created in the selected date range.",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"p-2 rounded-xl bg-gray-50",children:l.jsx(E$,{className:"w-5 h-5 text-gray-600",strokeWidth:2})}),l.jsx("span",{className:"text-sm text-gray-600",title:"Closed deals divided by all deals created in the selected date range.",children:"Conv. Rate"})]}),l.jsx("div",{className:"text-3xl font-semibold text-gray-900",children:Gu(r.conversionRate)})]})]}),l.jsx(Rh,{sensors:q,collisionDetection:T0,onDragEnd:_t,onDragStart:I=>le(I.active.id),children:l.jsx(Lh,{items:D,strategy:$h,children:l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:D.map(I=>{const Y=bb(I);return Y?l.jsx(mZ,{id:I,children:Y},I):null})})})})]})}function JD({deal:e,netCommission:t,daysInStage:r,onClick:n,isDragging:a=!1}){const i=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s);return l.jsxs("div",{onClick:n,"data-deal-id":e.id,className:`rounded-2xl border border-gray-100/80 bg-white/95 p-4 shadow-[0_10px_30px_rgba(15,23,42,0.05)] ring-1 ring-black/5 cursor-move transition-transform duration-200 ${a?"opacity-60":"hover:-translate-y-0.5"}`,children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:e.client_name}),l.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[l.jsx(IC,{className:"w-3.5 h-3.5 mr-1 text-gray-400"}),l.jsx("span",{className:"truncate",children:e.property_address})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("span",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:"Expected"}),l.jsx("div",{className:"text-sm font-semibold text-gray-900",children:i(e.actual_sale_price||e.expected_sale_price)})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-xs text-gray-600",children:[l.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[l.jsx(hs,{className:"w-3.5 h-3.5 text-gray-400"}),l.jsxs("span",{children:[r,"d in stage"]})]}),e.lead_sources?l.jsxs("div",{className:"flex items-center gap-1 text-gray-500 justify-end",children:[l.jsx(zC,{className:"w-3.5 h-3.5 text-gray-400"}),l.jsx("span",{className:"truncate",children:e.lead_sources.name})]}):l.jsx("div",{})]}),l.jsxs("div",{className:"mt-4 flex items-center justify-between rounded-xl bg-gray-50 px-3 py-2 text-xs",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:"Net Commission"}),l.jsx("div",{className:"text-sm font-semibold text-emerald-600",children:i(t)})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:"Close Date"}),l.jsx("div",{className:"text-sm font-semibold text-gray-900",children:e.close_date?new Date(e.close_date).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""})]})]})]})}const vZ=["buyer","seller","buyer_and_seller","renter","landlord"],Ol={buyer:{label:"Buyer",accentDot:"bg-blue-400",labelClass:"text-blue-900",panelBg:"bg-blue-50/60",panelBorder:"border-blue-100"},seller:{label:"Seller",accentDot:"bg-emerald-400",labelClass:"text-emerald-900",panelBg:"bg-emerald-50/60",panelBorder:"border-emerald-100"},buyer_and_seller:{label:"Buyer & Seller",accentDot:"bg-purple-400",labelClass:"text-purple-900",panelBg:"bg-purple-50/60",panelBorder:"border-purple-100"},renter:{label:"Renter",accentDot:"bg-orange-400",labelClass:"text-orange-900",panelBg:"bg-orange-50/60",panelBorder:"border-orange-100"},landlord:{label:"Landlord",accentDot:"bg-teal-400",labelClass:"text-teal-900",panelBg:"bg-teal-50/60",panelBorder:"border-teal-100"}};function yZ({status:e,label:t,color:r,deals:n,onDealClick:a,calculateNetCommission:i,getDaysInStage:s}){const{setNodeRef:o,isOver:c}=hE({id:e}),u=Uh(r),d=vZ.map(f=>({type:f,label:Ol[f].label,accentDot:Ol[f].accentDot,labelClass:Ol[f].labelClass,deals:n.filter(h=>h.deal_type===f),panelBg:Ol[f].panelBg,panelBorder:Ol[f].panelBorder})).filter(f=>f.deals.length>0);return l.jsxs("div",{className:"flex-shrink-0 w-72 sm:w-80 flex flex-col",children:[l.jsxs("div",{className:"rounded-lg p-2.5 sm:p-3 mb-2 sm:mb-3 flex-shrink-0",style:{backgroundColor:u.bg,color:u.text},children:[l.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:t}),l.jsxs("span",{className:"text-xs sm:text-sm opacity-80",children:[n.length," deal",n.length!==1?"s":""]})]}),l.jsx("div",{ref:o,className:`flex-1 min-h-[600px] rounded-lg p-3 transition overflow-y-auto ${c?"bg-blue-50 ring-2 ring-blue-400":"bg-gray-50"}`,style:{minHeight:"600px"},children:n.length===0?l.jsx("div",{className:"h-full min-h-[560px] flex items-center justify-center",children:l.jsxs("div",{className:"text-center text-gray-400",children:[l.jsx("div",{className:"text-sm font-medium mb-1",children:"Drop deals here"}),l.jsx("div",{className:"text-xs",children:"Drag cards to this column"})]})}):l.jsx("div",{className:"space-y-6",children:d.map((f,h)=>l.jsxs("div",{className:`rounded-2xl border px-3 py-3 sm:px-4 sm:py-4 ${f.panelBg} ${f.panelBorder} ${h>0?"mt-1":""}`,children:[l.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${f.accentDot}`}),l.jsx("span",{className:`text-xs font-semibold ${f.labelClass}`,children:f.label})]}),l.jsxs("span",{className:"text-[11px] font-medium text-gray-400",children:[f.deals.length," deal",f.deals.length!==1?"s":""]})]}),l.jsx(Lh,{items:f.deals.map(m=>m.id),strategy:mE,children:l.jsx("div",{className:"mt-3 space-y-2 sm:space-y-3",children:f.deals.map(m=>l.jsx(xZ,{deal:m,onDealClick:a,calculateNetCommission:i,getDaysInStage:s},m.id))})})]},f.type))})})]})}function xZ({deal:e,onDealClick:t,calculateNetCommission:r,getDaysInStage:n}){const{attributes:a,listeners:i,setNodeRef:s,transform:o,transition:c,isDragging:u}=Fh({id:e.id,data:{type:"deal"}}),d={transform:Xn.Transform.toString(o),transition:c,zIndex:u?50:void 0};return l.jsx("div",{ref:s,style:d,...a,...i,children:l.jsx(JD,{deal:e,netCommission:r(e),daysInStage:n(e.stage_entered_at),onClick:()=>t(e),isDragging:u})})}const bZ={jan:1,january:1,feb:2,february:2,mar:3,march:3,apr:4,april:4,may:5,jun:6,june:6,jul:7,july:7,aug:8,august:8,sep:9,sept:9,september:9,oct:10,october:10,nov:11,november:11,dec:12,december:12};function PS(e){return e.toString().padStart(2,"0")}function wZ(e,t,r){const n=new Date(Date.UTC(e,t-1,r));return n.getUTCFullYear()===e&&n.getUTCMonth()+1===t&&n.getUTCDate()===r}function Al(e,t,r){return wZ(e,t,r)?`${e}-${PS(t)}-${PS(r)}`:null}function _Z(e){return e<100?e>=70?1900+e:2e3+e:e}function OS(e){const t=e.toLowerCase();return bZ[t]||null}function jZ(e){if(!e)return null;const t=e.trim();if(!t)return null;const r=t.replace(/\s+/g," "),n=r.match(/^(\d{4})[\/-](\d{1,2})[\/-](\d{1,2})$/);if(n){const[c,u,d,f]=n;return Al(parseInt(u,10),parseInt(d,10),parseInt(f,10))}const a=r.match(/^(\d{1,2})[\/\.\-](\d{1,2})[\/\.\-](\d{2}|\d{4})$/);if(a){const[c,u,d,f]=a,h=_Z(parseInt(f,10));return Al(h,parseInt(u,10),parseInt(d,10))}const i=r.match(/^(\d{4})\.(\d{1,2})\.(\d{1,2})$/);if(i){const[c,u,d,f]=i;return Al(parseInt(u,10),parseInt(d,10),parseInt(f,10))}const s=r.match(/^([A-Za-z]+)[\s\-](\d{1,2}),?[\s\-]*(\d{4})$/);if(s){const c=OS(s[1]);if(c)return Al(parseInt(s[3],10),c,parseInt(s[2],10))}const o=r.match(/^(\d{1,2})[\s\-]([A-Za-z]+),?[\s\-]*(\d{4})$/);if(o){const c=OS(o[2]);if(c)return Al(parseInt(o[3],10),c,parseInt(o[1],10))}return null}function SZ(e=[]){const t=["client_name","client_phone","client_email","property_address","city","state","zip","deal_type","lead_source_name","pipeline_status","expected_sale_price","actual_sale_price","gross_commission_rate","brokerage_split_rate","referral_out_rate","referral_in_rate","transaction_fee","close_date"].join(","),r=["New Lead","Contacted","Under Contract"],n=e.length>0?e:r,i=[{client_name:"John Smith",client_phone:"555-123-4567",client_email:"john.smith@example.com",property_address:"123 Main Street",city:"Austin",state:"TX",zip:"78701",deal_type:"buyer",lead_source_name:"Zillow",pipeline_status:n[Math.min(2,n.length-1)]||n[0],expected_sale_price:"450000",actual_sale_price:"",gross_commission_rate:"0.03",brokerage_split_rate:"0.20",referral_out_rate:"",referral_in_rate:"",transaction_fee:"500",close_date:""},{client_name:"Sarah Johnson",client_phone:"555-987-6543",client_email:"sarah.j@example.com",property_address:"456 Oak Avenue",city:"Dallas",state:"TX",zip:"75201",deal_type:"seller",lead_source_name:"Past Client",pipeline_status:n[n.length-1]||n[0],expected_sale_price:"525000",actual_sale_price:"520000",gross_commission_rate:"0.03",brokerage_split_rate:"0.20",referral_out_rate:"0.25",referral_in_rate:"",transaction_fee:"500",close_date:"2024-12-15"},{client_name:"Mike Davis",client_phone:"555-456-7890",client_email:"mike.davis@example.com",property_address:"789 Elm Street",city:"Houston",state:"TX",zip:"77001",deal_type:"renter",lead_source_name:"Referral",pipeline_status:n[Math.min(1,n.length-1)]||n[0],expected_sale_price:"2400",actual_sale_price:"",gross_commission_rate:"0.5",brokerage_split_rate:"0.20",referral_out_rate:"",referral_in_rate:"",transaction_fee:"0",close_date:""}].map(s=>Object.values(s).map(o=>{const c=String(o);return c.includes(",")||c.includes('"')||c.includes(`
`)?`"${c.replace(/"/g,'""')}"`:c}).join(",")).join(`
`);return`${t}
${i}`}function NZ(e,t){const r=new Blob([e],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),a=URL.createObjectURL(r);n.setAttribute("href",a),n.setAttribute("download",t),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function kZ(e){const t=[];let r=[],n="",a=!1;for(let i=0;i<e.length;i++){const s=e[i],o=e[i+1];a?s==='"'&&o==='"'?(n+='"',i++):s==='"'?a=!1:n+=s:s==='"'?a=!0:s===","?(r.push(n.trim()),n=""):s===`
`||s==="\r"?((n||r.length>0)&&(r.push(n.trim()),r.some(c=>c!=="")&&t.push(r),r=[],n=""),s==="\r"&&o===`
`&&i++):n+=s}return(n||r.length>0)&&(r.push(n.trim()),r.some(i=>i!=="")&&t.push(r)),t}function CZ(e,t=[]){const r=[];(!e.client_name||e.client_name.trim()==="")&&r.push("client_name is required"),(!e.lead_source_name||e.lead_source_name.trim()==="")&&r.push("lead_source_name is required");const n=["buyer","seller","buyer_and_seller","renter","landlord"];if((!e.deal_type||!n.includes(e.deal_type))&&r.push(`deal_type must be one of: ${n.join(", ")}`),!e.pipeline_status||e.pipeline_status.trim()==="")r.push("pipeline_status is required");else if(t.length>0){const a=e.pipeline_status.toLowerCase().trim();t.includes(a)||r.push(`pipeline_status must be one of your configured statuses: ${t.join(", ")}`)}return{valid:r.length===0,errors:r}}function EZ(e,t){const r={};return e.forEach((n,a)=>{const i=t[a]||"";r[n]=i}),r}function PZ({onClose:e,onSuccess:t}){const{user:r,roleInfo:n}=At(),a=(n==null?void 0:n.teamId)||null,[i,s]=p.useState(null),[o,c]=p.useState(!1),[u,d]=p.useState(null),f=async()=>{if(!r)return;const{data:g}=a?await G.from("pipeline_statuses").select("name").eq("team_id",a).order("sort_order"):{data:null},{data:y}=g!=null&&g.length?{data:g}:await G.from("pipeline_statuses").select("name").eq("user_id",r.id).order("sort_order"),v=(y==null?void 0:y.map(w=>w.name))||[],x=SZ(v);NZ(x,"deals-import-example.csv")},h=g=>{var v;const y=(v=g.target.files)==null?void 0:v[0];y&&y.type==="text/csv"?(s(y),d(null)):alert("Please select a valid CSV file")},m=async()=>{var g,y,v,x,w,b;if(!(!i||!r)){c(!0),d(null);try{const _=await i.text(),j=kZ(_);if(j.length<2){alert("CSV file must contain a header row and at least one data row"),c(!1);return}const S=j[0].map(R=>R.toLowerCase().trim()),N=j.slice(1),{data:k}=a?await G.from("lead_sources").select("id, name").eq("team_id",a):{data:null},{data:C}=k!=null&&k.length?{data:k}:await G.from("lead_sources").select("id, name").eq("user_id",r.id),E=new Map((C==null?void 0:C.map(R=>[R.name.toLowerCase(),R.id]))||[]),{data:P}=a?await G.from("pipeline_statuses").select("id, name").eq("team_id",a):{data:null},{data:A}=P!=null&&P.length?{data:P}:await G.from("pipeline_statuses").select("id, name").eq("user_id",r.id),H=new Map((A==null?void 0:A.map(R=>[R.name.toLowerCase(),R.id]))||[]),{data:J}=await G.from("user_settings").select("default_brokerage_split_rate").eq("user_id",r.id).single(),ee=(J==null?void 0:J.default_brokerage_split_rate)||.2;let B=0,K=0;const D=[];for(let R=0;R<N.length;R++){const F=EZ(S,N[R]),le=CZ(F,Array.from(H.keys()));if(!le.valid){K++,D.push({row:R+2,errors:le.errors});continue}const re=E.get(F.lead_source_name.toLowerCase().trim());if(!re){K++,D.push({row:R+2,errors:[`Lead source "${F.lead_source_name}" not found. Please create it in Lead Sources settings first.`]});continue}let Ne=null,O="new_lead";if(F.pipeline_status&&F.pipeline_status.trim()!==""){Ne=H.get(F.pipeline_status.toLowerCase().trim())||null;const X=F.pipeline_status.toLowerCase().trim();X==="closed"?O="closed":X==="dead"&&(O="dead")}let V=null;if(F.close_date&&F.close_date.trim()!==""&&(V=jZ(F.close_date),!V)){K++,D.push({row:R+2,errors:[`Close date "${F.close_date}" is not recognized. Use formats like YYYY-MM-DD, MM/DD/YYYY, or December 15, 2024.`]});continue}const te={user_id:r.id,client_name:F.client_name.trim(),client_phone:((g=F.client_phone)==null?void 0:g.trim())||null,client_email:((y=F.client_email)==null?void 0:y.trim())||null,property_address:((v=F.property_address)==null?void 0:v.trim())||null,city:((x=F.city)==null?void 0:x.trim())||null,state:((w=F.state)==null?void 0:w.trim())||null,zip:((b=F.zip)==null?void 0:b.trim())||null,deal_type:F.deal_type.trim(),lead_source_id:re,pipeline_status_id:Ne,status:O,expected_sale_price:F.expected_sale_price&&F.expected_sale_price.trim()!==""?Number(F.expected_sale_price):null,actual_sale_price:F.actual_sale_price&&F.actual_sale_price.trim()!==""?Number(F.actual_sale_price):null,gross_commission_rate:F.gross_commission_rate&&F.gross_commission_rate.trim()!==""?Number(F.gross_commission_rate):.03,brokerage_split_rate:F.brokerage_split_rate&&F.brokerage_split_rate.trim()!==""?Number(F.brokerage_split_rate):ee,referral_out_rate:F.referral_out_rate&&F.referral_out_rate.trim()!==""?Number(F.referral_out_rate):null,referral_in_rate:F.referral_in_rate&&F.referral_in_rate.trim()!==""?Number(F.referral_in_rate):null,transaction_fee:F.transaction_fee&&F.transaction_fee.trim()!==""?Number(F.transaction_fee):0,close_date:V,stage_entered_at:new Date().toISOString(),closed_at:O==="closed"?new Date().toISOString():null},{error:M}=await G.from("deals").insert(te);M?(K++,D.push({row:R+2,errors:[M.message]})):B++}d({success:B,failed:K,errors:D})}catch(_){console.error("Import error:",_),alert("An error occurred while importing. Please check your file format.")}finally{c(!1)}}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Import Deals from CSV"}),l.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition",children:l.jsx(Ss,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[l.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How to Import Deals"}),l.jsxs("ol",{className:"text-sm text-blue-800 space-y-1 list-decimal list-inside",children:[l.jsx("li",{children:"Download the example CSV file to see the required format"}),l.jsx("li",{children:"Fill in your deal data following the example structure"}),l.jsx("li",{children:"Save your file as CSV format"}),l.jsx("li",{children:"Upload your CSV file using the button below"})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Step 1: Download Example"}),l.jsxs("button",{onClick:f,className:"w-full px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg flex items-center justify-center space-x-2 transition",children:[l.jsx(R$,{className:"w-5 h-5"}),l.jsx("span",{children:"Download Example CSV"})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Step 2: Upload Your CSV"}),l.jsxs("label",{className:"block w-full px-4 py-8 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 cursor-pointer transition text-center",children:[l.jsx("input",{type:"file",accept:".csv",onChange:h,className:"hidden",disabled:o}),l.jsx(vv,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),l.jsx("div",{className:"text-sm text-gray-600",children:i?l.jsx("span",{className:"font-medium text-blue-600",children:i.name}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"font-medium text-blue-600",children:"Click to upload"})," ","or drag and drop"]})}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"CSV files only"})]})]}),i&&!u&&l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Step 3: Import"}),l.jsx("button",{onClick:m,disabled:o,className:"w-full px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg flex items-center justify-center space-x-2 transition",children:o?l.jsxs(l.Fragment,{children:[l.jsx(U$,{className:"w-5 h-5 animate-spin"}),l.jsx("span",{children:"Importing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(vv,{className:"w-5 h-5"}),l.jsx("span",{children:"Import Deals"})]})})]}),u&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Import Results"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-green-50 rounded-lg p-3 flex items-center space-x-3",children:[l.jsx(Fa,{className:"w-6 h-6 text-green-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:u.success}),l.jsx("div",{className:"text-xs text-gray-600",children:"Successfully Imported"})]})]}),l.jsxs("div",{className:"bg-red-50 rounded-lg p-3 flex items-center space-x-3",children:[l.jsx(La,{className:"w-6 h-6 text-red-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-red-600",children:u.failed}),l.jsx("div",{className:"text-xs text-gray-600",children:"Failed"})]})]})]})]}),u.errors.length>0&&l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-h-64 overflow-y-auto",children:[l.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"Errors"}),l.jsx("div",{className:"space-y-2",children:u.errors.map((g,y)=>l.jsxs("div",{className:"text-sm",children:[l.jsxs("div",{className:"font-medium text-red-800",children:["Row ",g.row,":"]}),l.jsx("ul",{className:"list-disc list-inside text-red-700 ml-2",children:g.errors.map((v,x)=>l.jsx("li",{children:v},x))})]},y))})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{onClick:()=>{s(null),d(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Import Another File"}),l.jsx("button",{onClick:()=>{u.success>0&&t(),e()},className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition",children:"Done"})]})]})]}),l.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Required Fields"}),l.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[l.jsxs("li",{children:[l.jsx("span",{className:"font-medium",children:"client_name:"})," Client's full name"]}),l.jsxs("li",{children:[l.jsx("span",{className:"font-medium",children:"lead_source_name:"})," Must match one of your configured lead sources"]}),l.jsxs("li",{children:[l.jsx("span",{className:"font-medium",children:"deal_type:"})," buyer, seller, buyer_and_seller, renter, or landlord"]}),l.jsxs("li",{children:[l.jsx("span",{className:"font-medium",children:"pipeline_status:"})," Must match one of your configured pipeline statuses"]})]}),l.jsx("div",{className:"mt-3 text-xs text-gray-600",children:"Note: Property address and price are optional. Lead source and pipeline status names must match exactly or the import will fail."})]})]})]})})}const OZ=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),ud=e=>e==null||Number.isNaN(e)?"":OZ.format(e),dd=e=>e==null||Number.isNaN(e)?"":`${(e*100).toFixed(1)}%`,Ys=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},AS=e=>e?e.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "):"",Co=[{id:"client",label:"Client",defaultVisible:!0,cellClassName:"px-4 py-4 align-top whitespace-nowrap cursor-pointer",render:({deal:e})=>l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.client_name||""}),e.client_email&&l.jsx("div",{className:"text-xs text-gray-500",children:e.client_email}),e.client_phone&&l.jsx("div",{className:"text-xs text-gray-500",children:e.client_phone})]})},{id:"clientEmail",label:"Client Email",cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>l.jsx("span",{className:e.client_email?"text-gray-700":"text-gray-400",children:e.client_email||""})},{id:"clientPhone",label:"Client Phone",cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>l.jsx("span",{className:e.client_phone?"text-gray-700":"text-gray-400",children:e.client_phone||""})},{id:"property",label:"Property",defaultVisible:!0,cellClassName:"px-4 py-4 text-sm text-gray-900 cursor-pointer min-w-[220px]",render:({deal:e})=>l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(IC,{className:"w-4 h-4 text-gray-400 flex-shrink-0 mt-0.5"}),l.jsxs("div",{children:[l.jsx("div",{children:e.property_address||""}),(e.city||e.state)&&l.jsx("div",{className:"text-xs text-gray-500",children:[e.city,e.state].filter(Boolean).join(", ")})]})]})},{id:"city",label:"City",cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>l.jsx("span",{className:e.city?"text-gray-700":"text-gray-400",children:e.city||""})},{id:"state",label:"State",cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>l.jsx("span",{className:e.state?"text-gray-700":"text-gray-400",children:e.state||""})},{id:"zip",label:"ZIP",cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>l.jsx("span",{className:e.zip?"text-gray-700":"text-gray-400",children:e.zip||""})},{id:"dealType",label:"Deal Type",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap cursor-pointer",render:({deal:e})=>{const t=e.deal_type==="buyer"?"bg-blue-100 text-blue-700":e.deal_type==="seller"?"bg-green-100 text-green-700":e.deal_type==="buyer_and_seller"?"bg-purple-100 text-purple-700":e.deal_type==="renter"?"bg-orange-100 text-orange-700":e.deal_type==="landlord"?"bg-teal-100 text-teal-700":"bg-gray-100 text-gray-700",r=e.deal_type==="buyer"?"Buyer":e.deal_type==="seller"?"Seller":e.deal_type==="buyer_and_seller"?"Both":e.deal_type==="renter"?"Renter":e.deal_type==="landlord"?"Landlord":AS(e.deal_type);return l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${t}`,children:r})}},{id:"pipelineStatus",label:"Pipeline Status",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap cursor-pointer",render:({deal:e,getStatusForDeal:t})=>{const r=t(e);if(!r)return l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-700",children:"No Status"});const n=Uh(r.color);return l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",style:{backgroundColor:n.bg,color:n.text},children:r.name})}},{id:"status",label:"System Status",cellClassName:"px-4 py-4 whitespace-nowrap cursor-pointer",render:({deal:e})=>l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-700",children:AS(e.status)})},{id:"leadSource",label:"Lead Source",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap text-sm cursor-pointer",render:({deal:e})=>{var t,r;return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(zC,{className:"w-4 h-4 text-gray-400"}),l.jsx("span",{className:(t=e.lead_sources)!=null&&t.name?"text-gray-900":"text-gray-400",children:((r=e.lead_sources)==null?void 0:r.name)||""})]})}},{id:"expectedPrice",label:"Expected Price",defaultVisible:!0,headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:ud(e.actual_sale_price||e.expected_sale_price)})},{id:"actualPrice",label:"Actual Price",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:ud(e.actual_sale_price)})},{id:"netCommission",label:"Net Commission",defaultVisible:!0,headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm font-semibold text-green-600 cursor-pointer text-right",render:({deal:e,calculateNetCommission:t})=>l.jsx("span",{children:ud(t(e))})},{id:"grossCommissionRate",label:"Commission %",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:dd(e.gross_commission_rate)})},{id:"brokerageSplitRate",label:"Broker Split %",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:dd(e.brokerage_split_rate)})},{id:"referralOutRate",label:"Referral Out %",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:dd(e.referral_out_rate)})},{id:"referralInRate",label:"Referral In %",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:dd(e.referral_in_rate)})},{id:"transactionFee",label:"Transaction Fee",headerClassName:"text-right",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 cursor-pointer text-right",render:({deal:e})=>l.jsx("span",{children:ud(e.transaction_fee)})},{id:"daysInStage",label:"Days in Stage",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 cursor-pointer",render:({deal:e,getDaysInStage:t})=>l.jsxs("div",{className:"flex items-center justify-start gap-2",children:[l.jsx(hs,{className:"w-4 h-4 text-gray-400"}),l.jsxs("span",{children:[t(e.stage_entered_at)," days"]})]})},{id:"stageEnteredAt",label:"Stage Entered",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>l.jsx("span",{children:Ys(e.stage_entered_at)})},{id:"closeDate",label:"Close Date",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>l.jsx("span",{children:Ys(e.close_date)})},{id:"closedAt",label:"Closed On",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>l.jsx("span",{children:Ys(e.closed_at)})},{id:"nextTaskDescription",label:"Next Task",cellClassName:"px-4 py-4 text-sm text-gray-700 cursor-pointer min-w-[200px]",render:({deal:e})=>l.jsx("span",{className:e.next_task_description?"text-gray-700":"text-gray-400",children:e.next_task_description||""})},{id:"nextTaskDueDate",label:"Next Task Due",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>l.jsx("span",{children:Ys(e.next_task_due_date)})},{id:"createdAt",label:"Created",defaultVisible:!0,cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(jo,{className:"w-4 h-4 text-gray-400"}),l.jsx("span",{children:Ys(e.created_at)})]})},{id:"updatedAt",label:"Updated",cellClassName:"px-4 py-4 whitespace-nowrap text-sm text-gray-700 cursor-pointer",render:({deal:e})=>l.jsx("span",{children:Ys(e.updated_at)})}],TS="pipeline-table-columns-v1",DS=new Set(Co.map(e=>e.id)),IS=new Map(Co.map((e,t)=>[e.id,t])),ig=Co.filter(e=>e.defaultVisible).map(e=>e.id),sg=e=>[...e].sort((t,r)=>(IS.get(t)??0)-(IS.get(r)??0));function AZ({deals:e,statuses:t,onDealClick:r,calculateNetCommission:n,getDaysInStage:a,onBulkDelete:i,onBulkEdit:s,onImportSuccess:o}){const[c,u]=p.useState(new Set),[d,f]=p.useState(!1),[h,m]=p.useState(""),[g,y]=p.useState(""),[v,x]=p.useState(!1),[w,b]=p.useState(!1),[_,j]=p.useState({column:"pipelineOrder",direction:"asc"}),[S,N]=p.useState(()=>{if(typeof window>"u")return ig;try{const O=window.localStorage.getItem(TS);if(O){const te=JSON.parse(O).filter(M=>DS.has(M));if(te.length>0)return sg(te)}}catch{}return ig});p.useEffect(()=>{typeof window>"u"||window.localStorage.setItem(TS,JSON.stringify(S))},[S]);const k=O=>{N(V=>V.includes(O)?V.length===1?V:V.filter(te=>te!==O):sg([...V,O]))},C=()=>N(sg(Array.from(DS))),E=()=>N(ig),P=Co.filter(O=>S.includes(O.id)),A=P.length+1,H=O=>{const V=new Set(c);V.has(O)?V.delete(O):V.add(O),u(V)},J=()=>{c.size===F.length?u(new Set):u(new Set(F.map(O=>O.id)))},ee=()=>{i&&c.size>0&&(i(Array.from(c)),u(new Set))},B=()=>{s&&c.size>0&&h&&(s(Array.from(c),{pipeline_status_id:h}),u(new Set),f(!1),m(""))},K=p.useMemo(()=>new Map(t.map((O,V)=>[O.id,V])),[t]),D=O=>t.find(V=>V.id===O.pipeline_status_id),F=p.useMemo(()=>{let O=e;if(g.trim()){const T=g.toLowerCase(),z=Z=>Z?Z.toLowerCase().includes(T):!1;O=O.filter(Z=>{var $;return z(Z.client_name)||z(Z.property_address)||z(Z.city)||z(Z.state)||z(Z.client_email)||z(Z.client_phone)||z(($=Z.lead_sources)==null?void 0:$.name)})}const V=T=>{if(!T.stage_entered_at)return null;const z=new Date(T.stage_entered_at).getTime();return Number.isNaN(z)?null:Date.now()-z},te=(T,z)=>{var $;const Z=pe=>pe?pe.toLowerCase():null;switch(z){case"pipelineOrder":return K.get(T.pipeline_status_id||"")??9999;case"client":return Z(T.client_name);case"clientEmail":return Z(T.client_email);case"clientPhone":return Z(T.client_phone);case"property":return Z(T.property_address);case"city":return Z(T.city);case"state":return Z(T.state);case"zip":return Z(T.zip);case"dealType":return Z(T.deal_type);case"pipelineStatus":return K.get(T.pipeline_status_id||"")??9999;case"status":return Z(T.status);case"leadSource":return Z((($=T.lead_sources)==null?void 0:$.name)||T.lead_source_name);case"expectedPrice":return T.expected_sale_price??null;case"actualPrice":return T.actual_sale_price??null;case"netCommission":return n(T);case"grossCommissionRate":return T.gross_commission_rate??null;case"brokerageSplitRate":return T.brokerage_split_rate??null;case"referralOutRate":return T.referral_out_rate??null;case"referralInRate":return T.referral_in_rate??null;case"transactionFee":return T.transaction_fee??null;case"daysInStage":return V(T);case"stageEnteredAt":return T.stage_entered_at?new Date(T.stage_entered_at).getTime():null;case"closeDate":return T.close_date?new Date(T.close_date).getTime():null;case"closedAt":return T.closed_at?new Date(T.closed_at).getTime():null;case"nextTaskDueDate":return T.next_task_due_date?new Date(T.next_task_due_date).getTime():null;case"nextTaskDescription":return Z(T.next_task_description);case"createdAt":return T.created_at?new Date(T.created_at).getTime():null;case"updatedAt":return T.updated_at?new Date(T.updated_at).getTime():null;default:return Z(T[z])}},M=(T,z)=>T==null?z==null?0:1:z==null?-1:typeof T=="number"&&typeof z=="number"?T-z:String(T).localeCompare(String(z));return[...O].sort((T,z)=>{const Z=_.column,$=te(T,Z),pe=te(z,Z),ce=M($,pe);if(ce!==0)return ce*(_.direction==="asc"?1:-1);const Me=new Date(z.created_at).getTime()-new Date(T.created_at).getTime();return _.direction==="asc"?Me:-Me})},[e,g,_,K,n]),le=_.column==="pipelineOrder"?"pipelineStatus":_.column,re=O=>{const V=O==="pipelineStatus"?"pipelineOrder":O;j(te=>te.column===V?{column:V,direction:te.direction==="asc"?"desc":"asc"}:{column:V,direction:"asc"})},Ne=O=>le===O||_.column==="pipelineOrder"&&O==="pipelineStatus"?l.jsx("span",{className:"text-[11px] font-semibold text-gray-500",children:_.direction==="asc"?"":""}):l.jsx(O$,{className:"w-3 h-3 text-gray-300"});return l.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[l.jsxs("div",{className:"p-4 border-b border-gray-200 space-y-3",children:[l.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(P0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"text",value:g,onChange:O=>y(O.target.value),placeholder:"Search by client, property, city, or lead source...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>b(O=>!O),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition whitespace-nowrap",children:[l.jsx(BC,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Columns"}),l.jsx("span",{className:"sm:hidden",children:"Cols"})]}),l.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-4 py-2 bg-[rgb(0,122,255)] hover:bg-[rgb(0,110,230)] text-white rounded-lg transition-colors whitespace-nowrap",children:[l.jsx(vv,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Import Deals"}),l.jsx("span",{className:"sm:hidden",children:"Import"})]})]})]}),w&&l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[l.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["Visible Columns (",S.length," of ",Co.length,")"]}),l.jsx("p",{className:"text-xs text-gray-500",children:"Choose which deal fields appear in the table."})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:C,className:"px-3 py-1.5 text-xs font-medium text-gray-600 border border-gray-300 rounded-lg hover:bg-white",children:"Select All"}),l.jsx("button",{onClick:E,className:"px-3 py-1.5 text-xs font-medium text-gray-600 border border-gray-300 rounded-lg hover:bg-white",children:"Reset Defaults"}),l.jsx("button",{onClick:()=>b(!1),className:"px-3 py-1.5 text-xs font-medium text-blue-600",children:"Done"})]})]}),l.jsx("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:Co.map(O=>l.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 bg-white border border-gray-200 rounded-lg px-3 py-2",children:[l.jsx("input",{type:"checkbox",checked:S.includes(O.id),onChange:()=>k(O.id),className:"text-blue-600 rounded"}),l.jsx("span",{children:O.label})]},O.id))})]})]}),c.size>0&&l.jsxs("div",{className:"bg-sky-50 border-b border-sky-200 px-4 py-3 flex items-center justify-between",children:[l.jsxs("div",{className:"text-sm font-medium text-sky-900",children:[c.size," deal",c.size>1?"s":""," selected"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>f(!d),className:"px-3 py-1.5 bg-white border border-sky-300 text-sky-700 rounded-lg hover:bg-sky-50 transition flex items-center gap-2 text-sm",children:[l.jsx(q$,{className:"w-4 h-4"}),"Update Status"]}),l.jsxs("button",{onClick:ee,className:"px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded-lg transition flex items-center gap-2 text-sm",children:[l.jsx(Ai,{className:"w-4 h-4"}),"Delete"]})]})]}),d&&c.size>0&&l.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center gap-3",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Update status to:"}),l.jsxs("select",{value:h,onChange:O=>m(O.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent text-sm",children:[l.jsx("option",{value:"",children:"Select status..."}),t.map(O=>l.jsx("option",{value:O.id,children:O.name},O.id))]}),l.jsx("button",{onClick:B,disabled:!h,className:"px-4 py-1.5 bg-sky-600 hover:bg-sky-700 text-white rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Apply"}),l.jsx("button",{onClick:()=>{f(!1),m("")},className:"px-4 py-1.5 text-gray-600 hover:text-gray-800 text-sm",children:"Cancel"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-4 py-3 text-left",children:l.jsx("input",{type:"checkbox",checked:F.length>0&&c.size===F.length,onChange:J,className:"w-4 h-4 text-sky-600 border-gray-300 rounded focus:ring-sky-500 cursor-pointer"})}),P.map(O=>l.jsx("th",{scope:"col",className:`px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider ${O.headerClassName||""}`,children:l.jsxs("button",{type:"button",onClick:()=>re(O.id),className:"flex items-center gap-1 text-left uppercase tracking-wider text-[11px]",children:[l.jsx("span",{children:O.label}),Ne(O.id)]})},O.id))]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:A,className:"px-4 py-8 text-center text-sm text-gray-500",children:"No deals yet. Create your first deal to get started!"})}):F.map(O=>l.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap",onClick:V=>V.stopPropagation(),children:l.jsx("input",{type:"checkbox",checked:c.has(O.id),onChange:()=>H(O.id),className:"w-4 h-4 text-sky-600 border-gray-300 rounded focus:ring-sky-500 cursor-pointer"})}),P.map(V=>l.jsx("td",{className:V.cellClassName||"px-4 py-4 text-sm text-gray-900 cursor-pointer",onClick:()=>!V.disableClick&&r(O),children:V.render({deal:O,onDealClick:r,calculateNetCommission:n,getDaysInStage:a,getStatusForDeal:D})},V.id))]},O.id))})]})}),v&&l.jsx(PZ,{onClose:()=>x(!1),onSuccess:()=>{x(!1),o==null||o()}})]})}function TZ({dealId:e,taskId:t,showTaskBadge:r=!1}){const{user:n}=At(),[a,i]=p.useState([]),[s,o]=p.useState(!0),[c,u]=p.useState(!1),[d,f]=p.useState(null),[h,m]=p.useState(!1),[g,y]=p.useState("");p.useEffect(()=>{v()},[e,t,n==null?void 0:n.id]);const v=async()=>{try{const{data:S,error:N}=await G.from("deal_notes").select("*").eq("deal_id",e).order("created_at",{ascending:!1});if(N)throw N;const C=(t?(S||[]).filter(E=>E.task_id===t):S||[]).map(E=>{var P,A;return{...E,user_email:n==null?void 0:n.email,user_name:E.user_id===(n==null?void 0:n.id)?((P=n==null?void 0:n.user_metadata)==null?void 0:P.name)||((A=n==null?void 0:n.email)==null?void 0:A.split("@")[0])||"You":"Team Member"}});i(C)}catch(S){console.error("Error loading notes:",S)}finally{o(!1)}},x=async()=>{if(!(!n||!g.trim())){u(!0);try{if(d){const{error:S}=await G.from("deal_notes").update({content:g,updated_at:new Date().toISOString()}).eq("id",d.id);if(S)throw S}else{const{error:S}=await G.from("deal_notes").insert({deal_id:e,user_id:n.id,content:g,task_id:t||null});if(S)throw S}y(""),f(null),m(!1),v()}catch(S){console.error("Error saving note:",S)}finally{u(!1)}}},w=async S=>{if(confirm("Are you sure you want to delete this note?"))try{const{error:N}=await G.from("deal_notes").delete().eq("id",S);if(N)throw N;v()}catch(N){console.error("Error deleting note:",N)}},b=S=>{f(S),y(S.content),m(!0)},_=()=>{f(null),y(""),m(!1)},j=S=>{const N=new Date(S),C=new Date().getTime()-N.getTime(),E=Math.floor(C/6e4),P=Math.floor(C/36e5),A=Math.floor(C/864e5);return E<1?"Just now":E<60?`${E}m ago`:P<24?`${P}h ago`:A<7?`${A}d ago`:N.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};return s?l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsx(Rt,{className:"w-6 h-6 animate-spin text-[rgb(0,122,255)]"})}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(H$,{className:"w-5 h-5 text-gray-600",strokeWidth:2}),l.jsx("h3",{className:"font-semibold text-gray-900",children:"Notes"}),l.jsxs("span",{className:"text-sm text-gray-500",children:["(",a.length,")"]})]}),!h&&l.jsxs("button",{onClick:()=>m(!0),className:"hig-btn-secondary text-sm py-2",children:[l.jsx(Ba,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Add Note"})]})]}),h&&l.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200/60",children:[l.jsx("textarea",{value:g,onChange:S=>y(S.target.value),placeholder:"Write a note...",className:"hig-input min-h-[100px] resize-y",autoFocus:!0}),l.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[l.jsx("button",{onClick:_,className:"hig-btn-secondary text-sm py-2",disabled:c,children:"Cancel"}),l.jsx("button",{onClick:x,disabled:c||!g.trim(),className:"hig-btn-primary text-sm py-2",children:c?l.jsxs(l.Fragment,{children:[l.jsx(Rt,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving..."})]}):l.jsxs("span",{children:[d?"Update":"Add"," Note"]})})]})]}),a.length===0?l.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:"No notes yet. Add your first note to track important information."}):l.jsx("div",{className:"space-y-3",children:a.map(S=>l.jsxs("div",{className:"bg-white border border-gray-200/60 rounded-xl p-4 hover:shadow-sm transition-all",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"flex items-center gap-2 text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-gray-900",children:S.user_name}),l.jsx("span",{className:"text-gray-400",children:""}),l.jsx("span",{className:"text-gray-500",children:j(S.created_at)}),S.updated_at!==S.created_at&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-gray-400",children:""}),l.jsx("span",{className:"text-gray-500 text-xs",children:"edited"})]}),r&&S.task_id&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-gray-400",children:""}),l.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-50 px-2 py-0.5 text-[11px] font-semibold text-blue-700",children:"Task note"})]})]})}),S.user_id===(n==null?void 0:n.id)&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:()=>b(S),className:"p-1.5 text-gray-600 hover:text-[rgb(0,122,255)] hover:bg-blue-50 rounded-lg transition",title:"Edit note",children:l.jsx(MC,{className:"w-4 h-4",strokeWidth:2})}),l.jsx("button",{onClick:()=>w(S.id),className:"p-1.5 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete note",children:l.jsx(Ai,{className:"w-4 h-4",strokeWidth:2})})]})]}),l.jsx("p",{className:"text-[15px] text-gray-700 whitespace-pre-wrap leading-relaxed",children:S.content})]},S.id))})]})}function QD({deal:e,onClose:t,onDelete:r}){const{user:n,roleInfo:a}=At(),i=(a==null?void 0:a.teamId)||null,[s,o]=p.useState(!1),[c,u]=p.useState(!1),[d,f]=p.useState([]),[h,m]=p.useState([]),[g,y]=p.useState([]),[v,x]=p.useState(""),[w,b]=p.useState(""),[_,j]=p.useState(!1),[S,N]=p.useState(null),[k,C]=p.useState(""),[E,P]=p.useState(""),[A,H]=p.useState((e==null?void 0:e.status)==="dead"),[J,ee]=p.useState((e==null?void 0:e.archived_reason)||""),[B,K]=p.useState({client_name:(e==null?void 0:e.client_name)||"",client_phone:(e==null?void 0:e.client_phone)||"",client_email:(e==null?void 0:e.client_email)||"",property_address:(e==null?void 0:e.property_address)||"",city:(e==null?void 0:e.city)||"",state:(e==null?void 0:e.state)||"",zip:(e==null?void 0:e.zip)||"",deal_type:(e==null?void 0:e.deal_type)||"buyer",lead_source_id:(e==null?void 0:e.lead_source_id)||"",pipeline_status_id:(e==null?void 0:e.pipeline_status_id)||"",expected_sale_price:(e==null?void 0:e.expected_sale_price)||"",actual_sale_price:(e==null?void 0:e.actual_sale_price)||"",gross_commission_rate:(e==null?void 0:e.gross_commission_rate)||.03,brokerage_split_rate:(e==null?void 0:e.brokerage_split_rate)||.2,referral_out_rate:(e==null?void 0:e.referral_out_rate)||"",referral_in_rate:(e==null?void 0:e.referral_in_rate)||"",transaction_fee:(e==null?void 0:e.transaction_fee)||"",close_date:(e==null?void 0:e.close_date)||""});p.useEffect(()=>{R(),F(),e&&(le(),D()),H((e==null?void 0:e.status)==="dead"),ee((e==null?void 0:e.archived_reason)||"")},[e,i,n==null?void 0:n.id]),p.useEffect(()=>{A&&K(q=>({...q,pipeline_status_id:""}))},[A]);const D=async()=>{if(!e)return;const{data:q,error:He}=await G.from("deal_notes").select("content").eq("deal_id",e.id).ilike("content","Archive reason:%").order("created_at",{ascending:!1}).limit(1);if(!He&&q&&q.length){const Ue=(q[0].content||"").replace(/^Archive reason:\s*/i,"").trim();ee(Ue)}},R=async()=>{if(!n)return;const{data:q,error:He}=i?await G.from("lead_sources").select("*").eq("team_id",i).order("name"):{data:null,error:null};if(He)return;const{data:ke}=q!=null&&q.length?{data:q}:await G.from("lead_sources").select("*").eq("user_id",n.id).order("name");ke&&f(ke)},F=async()=>{if(!n)return;const{data:q,error:He}=i?await G.from("pipeline_statuses").select("*").eq("team_id",i).order("sort_order"):{data:null,error:null};if(He)return;const{data:ke}=q!=null&&q.length?{data:q}:await G.from("pipeline_statuses").select("*").eq("user_id",n.id).order("sort_order");ke&&(m(ke),!e&&ke.length>0&&!B.pipeline_status_id&&K(Ue=>({...Ue,pipeline_status_id:ke[0].id})))},le=async()=>{if(!e||!n)return;const{data:q}=await G.from("tasks").select("*").eq("deal_id",e.id).eq("user_id",n.id);if(q){const He=q.sort((ke,Ue)=>!ke.due_date&&!Ue.due_date?0:ke.due_date?Ue.due_date?new Date(ke.due_date).getTime()-new Date(Ue.due_date).getTime():1:-1);y(He)}},re=q=>{K({...B,lead_source_id:q});const He=d.find(ke=>ke.id===q);He&&!e&&K(ke=>({...ke,lead_source_id:q,brokerage_split_rate:He.brokerage_split_rate}))},Ne=async q=>{if(q.preventDefault(),!n)return;o(!0);const He=h.find(xt=>xt.id===B.pipeline_status_id);if(!B.lead_source_id){alert("Please select a lead source"),o(!1);return}if(A&&!J){alert("Please choose an archive reason."),o(!1);return}const ke={...B,user_id:n.id,lead_source_id:B.lead_source_id,pipeline_status_id:A?null:B.pipeline_status_id||null,status:A?"dead":He?(He.slug||He.name||"new_lead").toLowerCase():"new_lead",expected_sale_price:Number(B.expected_sale_price)||0,actual_sale_price:B.actual_sale_price?Number(B.actual_sale_price):null,referral_out_rate:B.referral_out_rate?Number(B.referral_out_rate):null,referral_in_rate:B.referral_in_rate?Number(B.referral_in_rate):null,transaction_fee:Number(B.transaction_fee)||0,close_date:B.close_date||null,closed_at:A?new Date().toISOString():(e==null?void 0:e.closed_at)||null,archived_reason:A?J:null};let Ue=(e==null?void 0:e.id)||null;if(e)await G.from("deals").update(ke).eq("id",e.id),Ue=e.id;else{const{data:xt,error:L}=await G.from("deals").insert(ke).select("id").single();!L&&(xt!=null&&xt.id)&&(Ue=xt.id)}A&&Ue&&await G.from("deal_notes").insert({deal_id:Ue,user_id:n.id,content:`Archive reason: ${J}`}),o(!1),t()},O=async()=>{!v.trim()||!e||!n||(await G.from("tasks").insert({deal_id:e.id,user_id:n.id,title:v,due_date:w||null,completed:!1}),x(""),b(""),j(!1),le())},V=async(q,He)=>{await G.from("tasks").update({completed:!He}).eq("id",q),le()},te=q=>{N(q.id),C(q.title),P(q.due_date||"")},M=async()=>{!k.trim()||!S||(await G.from("tasks").update({title:k,due_date:E||null}).eq("id",S),N(null),C(""),P(""),le())},X=async q=>{await G.from("tasks").delete().eq("id",q),le()},T=()=>{N(null),C(""),P("")},z=async()=>{e&&(o(!0),await G.from("deals").delete().eq("id",e.id),o(!1),r&&r(),t())},Z=()=>{if(!e)return;const q={client_name:B.client_name,client_email:B.client_email,client_phone:B.client_phone,property_address:B.property_address,city:B.city,state:B.state,zip:B.zip,deal_type:B.deal_type,expected_sale_price:B.expected_sale_price,actual_sale_price:B.actual_sale_price},He=new URLSearchParams({source:"pipelineiq",...Object.entries(q).reduce((ke,[Ue,xt])=>(xt!=null&&xt!==""&&(ke[Ue]=String(xt)),ke),{})});window.open(`/contractscribe?${He.toString()}`,"_blank","noopener,noreferrer")},pe=(Number(B.actual_sale_price)||Number(B.expected_sale_price)||0)*B.gross_commission_rate,ce=pe*(1-B.brokerage_split_rate),Me=Number(B.referral_out_rate)||0,Ie=Number(B.referral_in_rate)||0,Je=Number(B.transaction_fee)||0,Ke=Me?ce*(1-Me):ce,Ve=(Ie?Ke*(1+Ie):Ke)-Je;return l.jsxs(l.Fragment,{children:[c&&l.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-[60]",children:l.jsxs("div",{className:"hig-card max-w-md w-full p-6",children:[l.jsx("h3",{className:"hig-text-heading mb-2",children:"Delete Deal"}),l.jsx("p",{className:"hig-text-body text-gray-600 mb-6",children:"Are you sure you want to delete this deal? This action cannot be undone."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>u(!1),className:"hig-btn-secondary",children:"Cancel"}),l.jsx("button",{onClick:z,disabled:s,className:"bg-[rgb(255,59,48)] hover:bg-red-600 active:bg-red-700 text-white font-medium px-5 py-2 rounded-lg transition-colors duration-150 disabled:opacity-40 text-[15px] min-h-[44px] inline-flex items-center justify-center gap-2",children:s?"Deleting...":"Delete"})]})]})}),l.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"hig-card max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200/60 px-6 py-5 flex justify-between items-center backdrop-blur-md bg-white/95",children:[l.jsx("h2",{className:"hig-text-display",children:e?"Edit Deal":"New Deal"}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-150",children:l.jsx(Ss,{className:"w-5 h-5 text-gray-600",strokeWidth:2})})]}),l.jsxs("form",{onSubmit:Ne,className:"p-6 space-y-8",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"hig-text-heading mb-4",children:"Client Information"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Client Name *"}),l.jsx("input",{type:"text",value:B.client_name,onChange:q=>K({...B,client_name:q.target.value}),className:"hig-input",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Phone"}),l.jsx("input",{type:"tel",value:B.client_phone,onChange:q=>K({...B,client_phone:q.target.value}),className:"hig-input"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Email"}),l.jsx("input",{type:"email",value:B.client_email,onChange:q=>K({...B,client_email:q.target.value}),className:"hig-input"})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"hig-text-heading mb-4",children:"Property Details"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"hig-label",children:"Property Address"}),l.jsx("input",{type:"text",value:B.property_address,onChange:q=>K({...B,property_address:q.target.value}),className:"hig-input",placeholder:"e.g., 123 Main St"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"City"}),l.jsx("input",{type:"text",value:B.city,onChange:q=>K({...B,city:q.target.value}),className:"hig-input"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"State"}),l.jsx("input",{type:"text",value:B.state,onChange:q=>K({...B,state:q.target.value}),className:"hig-input",maxLength:2,placeholder:"CA"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"ZIP"}),l.jsx("input",{type:"text",value:B.zip,onChange:q=>K({...B,zip:q.target.value}),className:"hig-input",maxLength:10})]})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"hig-text-heading mb-4",children:"Deal Configuration"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Deal Type *"}),l.jsxs("select",{value:B.deal_type,onChange:q=>K({...B,deal_type:q.target.value}),className:"hig-input",children:[l.jsx("option",{value:"buyer",children:"Buyer"}),l.jsx("option",{value:"seller",children:"Seller"}),l.jsx("option",{value:"buyer_and_seller",children:"Buyer & Seller"}),l.jsx("option",{value:"renter",children:"Renter"}),l.jsx("option",{value:"landlord",children:"Landlord"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Lead Source *"}),l.jsxs("select",{value:B.lead_source_id,onChange:q=>re(q.target.value),className:"hig-input",required:!0,children:[l.jsx("option",{value:"",children:"Select a source"}),d.map(q=>l.jsxs("option",{value:q.id,children:[q.name," (",(q.brokerage_split_rate*100).toFixed(0),"% split)"]},q.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Pipeline Status"}),l.jsxs("select",{value:B.pipeline_status_id,onChange:q=>K({...B,pipeline_status_id:q.target.value}),className:"hig-input",children:[l.jsx("option",{value:"",children:"Select a status"}),h.map(q=>l.jsx("option",{value:q.id,children:q.name},q.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Close Date"}),l.jsx("input",{type:"date",value:B.close_date,onChange:q=>K({...B,close_date:q.target.value}),className:"hig-input"})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"hig-text-heading mb-4",children:"Financial Details"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Expected Sale Price *"}),l.jsx("input",{type:"number",value:B.expected_sale_price,onChange:q=>K({...B,expected_sale_price:q.target.value}),className:"hig-input",placeholder:"500,000",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Actual Sale Price"}),l.jsx("input",{type:"number",value:B.actual_sale_price,onChange:q=>K({...B,actual_sale_price:q.target.value}),className:"hig-input",placeholder:"505,000"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Commission Rate (%)"}),l.jsx("input",{type:"number",step:"0.01",value:B.gross_commission_rate*100,onChange:q=>K({...B,gross_commission_rate:parseFloat(q.target.value)/100||0}),className:"hig-input"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Brokerage Split (% to broker)"}),l.jsx("input",{type:"number",step:"0.01",value:B.brokerage_split_rate*100,onChange:q=>K({...B,brokerage_split_rate:parseFloat(q.target.value)/100||0}),className:"hig-input"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Transaction Fee"}),l.jsx("input",{type:"number",value:B.transaction_fee,onChange:q=>K({...B,transaction_fee:q.target.value}),className:"hig-input",placeholder:"500"})]})]})]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 border border-gray-200/60",children:[l.jsx("h3",{className:"hig-text-heading mb-4",children:"Commission Breakdown"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"hig-text-body text-gray-600",children:"Gross Commission"}),l.jsxs("span",{className:"hig-text-body font-medium",children:["$",pe.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"hig-text-body text-gray-600",children:"After Brokerage Split"}),l.jsxs("span",{className:"hig-text-body font-medium",children:["$",ce.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"hig-text-body text-gray-600",children:"Transaction Fee"}),l.jsxs("span",{className:"hig-text-body font-medium text-gray-500",children:["-$",Je.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),l.jsx("div",{className:"hig-divider my-3"}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"hig-text-heading",children:"Net to Agent"}),l.jsxs("span",{className:"text-xl font-semibold text-[rgb(52,199,89)]",children:["$",Ve.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),e&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(gv,{className:"w-5 h-5 text-gray-600",strokeWidth:2}),l.jsx("h3",{className:"font-semibold text-gray-900",children:"Tasks"}),l.jsxs("span",{className:"text-sm text-gray-500",children:["(",g.length,")"]})]}),!_&&l.jsxs("button",{type:"button",onClick:()=>j(!0),className:"hig-btn-secondary text-sm py-2",children:[l.jsx(Ba,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Add Task"})]})]}),_&&l.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200/60",children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{id:"task-title-input",type:"text",value:v,onChange:q=>x(q.target.value),placeholder:"Task description...",className:"hig-input",autoFocus:!0,onKeyPress:q=>{q.key==="Enter"&&(q.preventDefault(),O())}}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("input",{type:"date",value:w,onChange:q=>b(q.target.value),placeholder:"Due date (optional)",className:"hig-input flex-1"}),l.jsx("button",{type:"button",onClick:()=>{j(!1),x(""),b("")},className:"hig-btn-secondary text-sm py-2",children:"Cancel"}),l.jsx("button",{type:"button",onClick:O,disabled:!v.trim(),className:"hig-btn-primary text-sm py-2",children:l.jsx("span",{children:"Add Task"})})]})]})}),l.jsx("div",{className:"space-y-2",children:g.map(q=>{const He=q.due_date&&!q.completed&&new Date(q.due_date)<new Date,ke=q.due_date&&!q.completed&&new Date(q.due_date).toDateString()===new Date().toDateString();return S===q.id?l.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200/60",children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{type:"text",value:k,onChange:Ue=>C(Ue.target.value),placeholder:"Task description...",className:"hig-input",autoFocus:!0,onKeyPress:Ue=>{Ue.key==="Enter"&&(Ue.preventDefault(),M())}}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("input",{type:"date",value:E,onChange:Ue=>P(Ue.target.value),placeholder:"Due date (optional)",className:"hig-input flex-1"}),l.jsx("button",{type:"button",onClick:T,className:"hig-btn-secondary text-sm py-2",children:"Cancel"}),l.jsx("button",{type:"button",onClick:M,disabled:!k.trim(),className:"hig-btn-primary text-sm py-2",children:"Save"})]})]})},q.id):l.jsx("div",{className:"group flex items-center p-3 bg-white border border-gray-200/60 rounded-xl hover:shadow-sm transition-all",children:l.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[l.jsx("button",{type:"button",onClick:()=>V(q.id,q.completed),className:`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-all duration-150 ${q.completed?"bg-[rgb(52,199,89)] border-[rgb(52,199,89)]":"border-gray-300 hover:border-[rgb(52,199,89)]"}`,children:q.completed&&l.jsx(_c,{className:"w-3 h-3 text-white",strokeWidth:2.5})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("span",{className:q.completed?"line-through text-gray-500 hig-text-body":"text-gray-900 hig-text-body",children:q.title}),q.due_date&&l.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[l.jsx(jo,{className:"w-3.5 h-3.5 text-gray-400",strokeWidth:2}),l.jsxs("span",{className:`hig-text-caption ${He?"text-[rgb(255,59,48)] font-medium":ke?"text-[rgb(255,149,0)] font-medium":q.completed?"text-gray-400":"text-gray-500"}`,children:[He?"Overdue: ":ke?"Due today: ":"",new Date(q.due_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[l.jsx("button",{type:"button",onClick:()=>te(q),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",title:"Edit task",children:l.jsx(MC,{className:"w-4 h-4 text-gray-600",strokeWidth:2})}),l.jsx("button",{type:"button",onClick:()=>X(q.id),className:"p-1.5 hover:bg-red-50 rounded-lg transition-colors",title:"Delete task",children:l.jsx(Ai,{className:"w-4 h-4 text-red-600",strokeWidth:2})})]})]})},q.id)})})]}),e&&l.jsx("div",{className:"pt-8 border-t border-gray-200/60",children:l.jsx(TZ,{dealId:e.id})}),l.jsx("div",{className:"rounded-xl border border-gray-200/70 bg-white/90 p-5 shadow-sm",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-gray-100 border border-gray-200",children:l.jsx(gv,{className:"h-5 w-5 text-gray-700"})}),l.jsxs("div",{className:"flex-1 space-y-3",children:[l.jsx("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-gray-900",children:"Archive this deal (Closed Lost)"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Use when a deal falls through, goes MIA, or stops responding. Well remove it from the active pipeline and track it for KPIs."})]})}),l.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3 md:items-center",children:[l.jsxs("label",{className:"inline-flex items-center gap-2 md:justify-self-start",children:[l.jsx("span",{className:"text-sm text-gray-700",children:"Archived"}),l.jsx("input",{type:"checkbox",checked:A,onChange:q=>H(q.target.checked),className:"h-5 w-5 rounded border-gray-300 text-[rgb(0,122,255)] focus:ring-[rgb(0,122,255)]"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"hig-label mb-1",children:"Archive reason"}),l.jsxs("select",{value:J,onChange:q=>ee(q.target.value),className:"hig-input",disabled:!A,children:[l.jsx("option",{value:"",children:"Select a reason"}),l.jsx("option",{value:"No Response / Ghosted",children:"No Response / Ghosted"}),l.jsx("option",{value:"Client Not Ready / Timeline Changed",children:"Client Not Ready / Timeline Changed"}),l.jsx("option",{value:"Chose Another Agent",children:"Chose Another Agent"}),l.jsx("option",{value:"Financing Didnt Work Out",children:"Financing Didnt Work Out"}),l.jsx("option",{value:"Deal Fell Through",children:"Deal Fell Through"})]})]})]})]})]})}),l.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200/60",children:[l.jsx("div",{className:"flex gap-3",children:e&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{type:"button",onClick:Z,className:"hig-btn-secondary gap-2",children:[l.jsx(TC,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Generate Offer"})]}),l.jsxs("button",{type:"button",onClick:()=>u(!0),className:"bg-white hover:bg-red-50 active:bg-red-100 text-[rgb(255,59,48)] font-medium px-5 py-2 rounded-lg border border-red-200 transition-colors duration-150 text-[15px] min-h-[44px] inline-flex items-center justify-center gap-2",children:[l.jsx(Ai,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Delete"})]})]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"hig-btn-secondary",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:s,className:"hig-btn-primary",children:s?"Saving...":e?"Update Deal":"Create Deal"})]})]})]})]})})]})}const Fc=[{name:"Snow",value:"#F9FAFB"},{name:"Pearl",value:"#F3F4F6"},{name:"Mist",value:"#E5E7EB"},{name:"Silver Fog",value:"#D1D5DB"},{name:"Ice Blue",value:"#E8F1FF"},{name:"Cloud Blue",value:"#D6E7FF"},{name:"Sky Wash",value:"#C3DBFF"},{name:"Pale Azure",value:"#AECFFF"},{name:"Soft Blue",value:"#98C3FF"},{name:"Bluebell",value:"#87B6F9"},{name:"Foggy Indigo",value:"#AEB8D9"},{name:"Lavender Mist",value:"#F2EDFF"},{name:"Lilac Whisper",value:"#E8E2FF"},{name:"Soft Violet",value:"#D8D0FF"},{name:"Periwinkle Light",value:"#C7C3FF"},{name:"Muted Orchid",value:"#B7B2F2"},{name:"Barely Purple",value:"#DDD6F6"},{name:"Blush Tint",value:"#FFE8F3"},{name:"Pink Dew",value:"#FFD6E8"},{name:"Rosewater",value:"#F9C8DB"},{name:"Petal Pink",value:"#F5B8CD"},{name:"Soft Berry",value:"#E8A7C3"},{name:"Muted Magenta",value:"#D3A6C9"},{name:"Rose Mist",value:"#FFE5E5"},{name:"Pale Coral",value:"#FFD4D4"},{name:"Soft Clay",value:"#F5B8B8"},{name:"Muted Red",value:"#EFA9A9"},{name:"Peach Wash",value:"#FFF1E6"},{name:"Apricot Mist",value:"#FFE3CC"},{name:"Soft Tangerine",value:"#FFD1AE"},{name:"Warm Peach",value:"#F7C39C"},{name:"Muted Orange",value:"#E7B690"},{name:"Sunhaze",value:"#FFF8DD"},{name:"Lemon Tint",value:"#FFF2BB"},{name:"Buttercream",value:"#FFECA1"},{name:"Golden Mist",value:"#FFE38C"},{name:"Muted Amber",value:"#F6D67C"},{name:"Mint Wash",value:"#E6FFF5"},{name:"Soft Mint",value:"#CFF9EA"},{name:"Pale Green",value:"#B7F0D9"},{name:"Seafoam",value:"#A1E8CC"},{name:"Soft Teal",value:"#8EDCC0"},{name:"Muted Green",value:"#7BCDB1"},{name:"Aqua Mist",value:"#E5FAFF"},{name:"Arctic Blue",value:"#CDF2FA"},{name:"Icy Teal",value:"#B5E8F0"},{name:"Soft Cyan",value:"#A1DEEA"},{name:"Muted Teal",value:"#8DCFD9"},{name:"Sandstone",value:"#F7EFE6"},{name:"Driftwood",value:"#EADFD2"},{name:"Clay Neutral",value:"#DDCEBF"},{name:"Soft Taupe",value:"#CFC1B2"}],eo=Fc[0].value;function RS({value:e,onChange:t}){const r=e?Bh(e):eo,n=r.toLowerCase(),a=Fc.find(i=>i.value.toLowerCase()===n);return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-gray-200/70 bg-white/80 p-4 shadow-inner",children:[l.jsxs("div",{className:"relative flex h-12 w-12 items-center justify-center rounded-2xl border border-white/40 shadow",children:[l.jsx("span",{className:"absolute inset-0 rounded-2xl",style:{backgroundColor:r}}),l.jsx(_c,{className:"relative h-5 w-5 text-white drop-shadow",strokeWidth:2.5})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Selected color"}),l.jsx("span",{className:"text-xs text-gray-500",children:a?"From palette":"Custom"})]})]}),l.jsx("div",{className:"grid grid-cols-6 gap-3 sm:grid-cols-8",children:Fc.map(i=>{const s=i.value.toLowerCase()===n;return l.jsxs("button",{type:"button",onClick:()=>t(i.value),className:`relative h-10 w-10 rounded-2xl border transition focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--app-accent)]/40 ${s?"border-[var(--app-accent)] shadow-[0_8px_18px_rgba(15,23,42,0.15)]":"border-white/70 shadow-inner hover:border-gray-300"}`,style:{backgroundColor:i.value},"aria-label":`${i.name} color`,children:[s&&l.jsx(_c,{className:"absolute inset-0 m-auto h-4 w-4 text-white drop-shadow",strokeWidth:2.5}),l.jsx("span",{className:"sr-only",children:i.name})]},i.value)})})]})}const DZ=e=>Fc[e%Fc.length].value,IZ={"new lead":"#E8F1FF",contacted:"#AECFFF","warm lead":"#FFF1E6","hot lead":"#FFD1AE","showing scheduled":"#98C3FF","offer submitted":"#87B6F9",inspection:"#B7F0D9",appraisal:"#C3DBFF","under contract":"#8EDCC0",financing:"#FFE38C","title review":"#8DCFD9","clear to close":"#CFF9EA",closed:"#E6FFF5",lost:"#FFE5E5",lead:"#C3DBFF","in progress":"#98C3FF",pending:"#8EDCC0","advanced transaction pipeline":"#E5FAFF"},og=(e,t)=>{const r=IZ[e.trim().toLowerCase()];return r||DZ(t)},RZ=e=>`pipeline-status-color-overrides:${e}`;function ZD(){const{user:e,roleInfo:t}=At(),[r,n]=p.useState([]),[a,i]=p.useState(!0),[s,o]=p.useState(null),[c,u]=p.useState({}),d=p.useRef({}),f=(t==null?void 0:t.teamId)||null,h=e?RZ(e.id):null,m=p.useCallback(()=>{if(typeof window>"u"||!h)return{};try{const C=window.localStorage.getItem(h);if(!C)return{};const E=JSON.parse(C);if(E&&typeof E=="object")return E}catch(C){console.warn("Failed to read status color overrides",C)}return{}},[h]),g=p.useCallback(C=>{typeof window>"u"||!h||window.localStorage.setItem(h,JSON.stringify(C))},[h]),y=p.useCallback((C,E)=>{var A;const P=(A=C.color)==null?void 0:A.trim();return P||og(C.name,E)},[]),v=p.useCallback(async()=>{if(!e){n([]),i(!1);return}i(!0);try{const{data:C,error:E}=f?await G.from("pipeline_statuses").select("*").eq("team_id",f).order("sort_order",{ascending:!0}):{data:null,error:null};if(E)throw E;const P=!!(C!=null&&C.length),{data:A,error:H}=P?{data:null,error:null}:await G.from("pipeline_statuses").select("*").eq("user_id",e.id).order("sort_order",{ascending:!0});if(H)throw H;const J=P?C:A;if(!J)throw new Error("Failed to load pipeline statuses");const ee=J||[],B=[],K=m(),D={},R=ee.map((F,le)=>{const re=y(F,le);D[F.id]=re;const Ne=K[F.id];return!F.color&&re&&B.push({id:F.id,color:re}),{...F,color:Ne||re}});B.length>0&&await Promise.all(B.map(F=>G.from("pipeline_statuses").update({color:F.color}).eq("id",F.id))),d.current=D,u(K),n(R),o(null)}catch(C){console.error("Error loading pipeline statuses:",C),o(C instanceof Error?C.message:"Failed to load statuses")}finally{i(!1)}},[e,f,m,y]);return p.useEffect(()=>{v()},[v]),{statuses:r,loading:a,error:s,colorOverrides:c,addStatus:async(C,E)=>{if(!e)return;const P=Math.max(...r.map(B=>B.sort_order),0),A=C.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),H=(E==null?void 0:E.trim())||og(C,P),{data:J,error:ee}=await G.from("pipeline_statuses").insert({user_id:e.id,team_id:f,name:C,slug:A,sort_order:P+1,color:H,is_default:!1}).select().single();if(ee)throw ee;return await v(),J},updateStatus:async(C,E)=>{const{error:P}=await G.from("pipeline_statuses").update(E).eq("id",C);if(P)throw P;await v()},deleteStatus:async C=>{const{data:E}=await G.from("deals").select("id",{count:"exact",head:!0}).eq("pipeline_status_id",C);if(E&&E.count>0)throw new Error("Cannot delete status with active deals. Please reassign deals first.");const{error:P}=await G.from("pipeline_statuses").delete().eq("id",C);if(P)throw P;await v()},reorderStatuses:async C=>{const E=C.map((P,A)=>({id:P.id,sort_order:A+1}));for(const P of E)await G.from("pipeline_statuses").update({sort_order:P.sort_order}).eq("id",P.id);await v()},applyTemplate:async C=>{if(!e)return;const{error:E}=await G.rpc("apply_pipeline_template",{p_user_id:e.id,p_template_name:C});if(E)throw E;f&&await G.from("pipeline_statuses").update({team_id:f}).eq("user_id",e.id).is("team_id",null);const{error:P}=await G.rpc("migrate_user_deals_to_pipeline_statuses",{p_user_id:e.id});P&&console.error("Error migrating deals:",P),await v()},createCustomWorkflow:async C=>{if(!e)return;const E=C.map(B=>B.trim()).filter(B=>B.length>0);if(E.length===0)throw new Error("Please provide at least one stage.");const P=f?{team_id:f}:{user_id:e.id},{error:A}=await G.from("pipeline_statuses").delete().match(P);if(A)throw A;const H=E.map((B,K)=>({user_id:e.id,team_id:f,name:B,slug:B.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),sort_order:K+1,color:og(B,K),is_default:K===0})),{error:J}=await G.from("pipeline_statuses").insert(H);if(J)throw J;const{error:ee}=await G.rpc("migrate_user_deals_to_pipeline_statuses",{p_user_id:e.id});ee&&console.error("Error migrating deals after custom workflow:",ee),await v()},reload:v,setPersonalStatusColor:(C,E)=>{if(!h)return;const A={...m(),[C]:E};g(A),u(A),n(H=>H.map(J=>J.id===C?{...J,color:E}:J))},clearPersonalStatusColor:C=>{if(!h)return;const E=m();if(!(C in E))return;const{[C]:P,...A}=E;g(A),u(A),n(H=>H.map(J=>{if(J.id!==C)return J;const ee=d.current[C]||y(J,(J.sort_order||1)-1);return{...J,color:ee}}))}}}function MZ(){const[e,t]=p.useState([]),[r,n]=p.useState(!0);return p.useEffect(()=>{(async()=>{const{data:i,error:s}=await G.from("pipeline_templates").select("*").eq("is_system",!0).order("name");!s&&i&&t(i),n(!1)})()},[]),{templates:e,loading:r}}const $Z={"Basic Pipeline":{description:"Simple 6-stage pipeline ideal for new agents",stages:["New Lead","Contacted","Showing Scheduled","Offer Submitted","Under Contract","Closed"]},"Advanced Transaction Pipeline":{description:"Comprehensive 13-stage pipeline covering all transaction phases",stages:["New Lead","Warm Lead","Hot Lead","Showing Scheduled","Offer Submitted","Inspection","Appraisal","Under Contract","Financing","Title Review","Clear to Close","Closed","Lost"]},Minimalist:{description:"Streamlined 4-stage pipeline for quick deal tracking",stages:["Lead","In Progress","Pending","Closed"]}};function eI({onClose:e,onSelect:t,onCreateCustomWorkflow:r,title:n="Choose Your Pipeline Workflow"}){const{templates:a}=MZ(),[i,s]=p.useState(null),[o,c]=p.useState(!1),[u,d]=p.useState(["New Lead","Contacted","Closed"]),[f,h]=p.useState(""),[m,g]=p.useState(!1),[y,v]=p.useState(null),x=async()=>{if(o){if(!r){v("Custom workflows are not supported here.");return}if(u.length<2){v("Add at least two stages to create a custom workflow.");return}g(!0),v(null);try{await r(u),e()}catch(w){console.error("Error creating custom workflow:",w),v(w instanceof Error?w.message:"Failed to create workflow")}finally{g(!1)}return}if(i){g(!0),v(null);try{await t(i),e()}catch(w){console.error("Error applying template:",w),v(w instanceof Error?w.message:"Failed to apply template")}finally{g(!1)}}};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:l.jsxs("div",{className:"app-surface w-full max-w-4xl max-h-[92vh] overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 px-6 py-5",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-500",children:"Pipeline"}),l.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:n}),l.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Start from a proven template or create a custom workflow tailored to your team."})]}),l.jsx("button",{onClick:e,className:"rounded-full border border-gray-200/80 bg-white p-2 text-gray-500 hover:text-gray-900",children:l.jsx(Ss,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-5 space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Recommended workflows"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Choose the pipeline structure that mirrors your current process."})]}),r&&l.jsxs("button",{onClick:()=>c(w=>!w),className:"inline-flex items-center gap-2 rounded-2xl border border-white/60 bg-white px-4 py-2 text-sm font-semibold text-gray-700 shadow-[0_2px_8px_rgba(15,23,42,0.08)] transition hover:border-[var(--app-accent)]/30 hover:text-[var(--app-accent)]",children:[l.jsx(Ba,{className:"h-4 w-4"}),"Custom workflow"]})]}),o?l.jsxs("div",{className:"rounded-2xl border border-[var(--app-border)] bg-white/90 p-5 shadow-inner",children:[l.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Custom workflow"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Define the stages that reflect your teams unique process. Drag to reorder later in settings."}),l.jsxs("div",{className:"mt-4 space-y-3",children:[u.map((w,b)=>l.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-gray-100 bg-gray-50 px-3 py-2",children:[l.jsxs("span",{className:"text-xs font-semibold text-gray-500",children:["Stage ",b+1]}),l.jsx("span",{className:"flex-1 text-sm font-medium text-gray-900",children:w}),l.jsx("button",{onClick:()=>d(_=>_.filter((j,S)=>S!==b)),className:"text-gray-400 hover:text-red-500",type:"button",children:l.jsx(Ai,{className:"h-4 w-4"})})]},w)),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{value:f,onChange:w=>h(w.target.value),placeholder:"Add a stage...",className:"hig-input flex-1 text-sm"}),l.jsx("button",{onClick:()=>{f.trim()&&(d(w=>[...w,f.trim()]),h(""))},className:"hig-btn-primary",type:"button",children:"Add"})]})]})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.filter(w=>w.name!=="Buyer/Seller Split Pipeline").map(w=>{const b=$Z[w.name],_=i===w.name;return l.jsxs("button",{onClick:()=>s(w.name),className:`rounded-2xl border px-5 py-4 text-left transition ${_?"border-[var(--app-accent)]/40 bg-[var(--app-surface-muted)] shadow-[inset_0_0_0_1px_rgba(10,132,255,0.08)]":"border-white/70 bg-white hover:border-[var(--app-accent)]/30"}`,children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:w.name}),l.jsx("p",{className:"text-sm text-gray-600",children:(b==null?void 0:b.description)||w.description})]}),_&&l.jsx("span",{className:"inline-flex h-7 w-7 items-center justify-center rounded-full bg-[var(--app-accent)] text-white",children:l.jsx(_c,{className:"h-4 w-4"})})]}),b&&l.jsxs("div",{className:"mt-3 space-y-1 text-xs text-gray-500",children:[l.jsxs("p",{className:"font-semibold",children:["Stages (",b.stages.length,")"]}),l.jsx("div",{className:"flex flex-wrap gap-1.5",children:b.stages.map((j,S)=>l.jsx("span",{className:"rounded-full border border-gray-200/70 px-2 py-0.5 text-[11px] text-gray-600",children:j},S))})]})]},w.id)})}),y&&l.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:y})]}),l.jsxs("div",{className:"flex items-center justify-between border-t border-gray-100 bg-gray-50/60 px-6 py-4",children:[l.jsx("button",{onClick:e,disabled:m,className:"text-sm font-medium text-gray-600 hover:text-gray-900",children:"Cancel"}),l.jsx("button",{onClick:x,disabled:o&&u.length<2||!o&&!i||m,className:"hig-btn-primary min-w-[140px] justify-center",children:m?"Applying":o?"Create Workflow":"Apply Template"})]})]})})}const LZ="rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_1px_2px_rgba(15,23,42,0.08)]",FZ="inline-flex items-center rounded-full border border-gray-200/70 bg-white px-3 py-1.5 text-sm font-medium text-gray-600 transition",MS="inline-flex items-center rounded-full border px-3 py-1.5 text-xs font-semibold transition",BZ=["buyer","seller","buyer_and_seller","renter","landlord"],$S={buyer:{label:"Buyer",accentClass:"bg-blue-50 text-blue-700 border-blue-200",matches:["buyer","buyer_and_seller"]},seller:{label:"Seller",accentClass:"bg-emerald-50 text-emerald-700 border-emerald-200",matches:["seller","buyer_and_seller"]},buyer_and_seller:{label:"Buyer & Seller",accentClass:"bg-purple-50 text-purple-700 border-purple-200",matches:["buyer_and_seller"]},renter:{label:"Renter",accentClass:"bg-orange-50 text-orange-700 border-orange-200",matches:["renter"]},landlord:{label:"Landlord",accentClass:"bg-teal-50 text-teal-700 border-teal-200",matches:["landlord"]}};function UZ(){const{user:e,roleInfo:t}=At(),{statuses:r,loading:n,applyTemplate:a,createCustomWorkflow:i}=ZD(),[s,o]=p.useState([]),[c,u]=p.useState(!0),[d,f]=p.useState(null),[h,m]=p.useState(!1),[g,y]=p.useState(null),[v,x]=p.useState(!1),[w,b]=p.useState("kanban"),[_,j]=p.useState("all"),[S,N]=y2(),k=S.get("newDeal"),C=p.useMemo(()=>{const M=new Map;return r.forEach(X=>{M.set(X.id,X)}),s.forEach(X=>{X.pipeline_statuses&&!M.has(X.pipeline_statuses.id)&&M.set(X.pipeline_statuses.id,X.pipeline_statuses)}),Array.from(M.values()).sort((X,T)=>{const z=X.sort_order??999,Z=T.sort_order??999;return z===Z?X.name.localeCompare(T.name):z-Z})},[r,s]),E=Th(Ah(nl,{activationConstraint:{distance:5}}));p.useEffect(()=>{A()},[e,t]),p.useEffect(()=>{if(k){y(null),m(!0);const M=new URLSearchParams(S);M.delete("newDeal"),N(M,{replace:!0})}},[k,S,N]);const P=p.useCallback(async M=>{const X=s.find(Z=>Z.id===M);if(X){y(X),m(!0);return}const{data:T,error:z}=await G.from("deals").select("*").eq("id",M).maybeSingle();!z&&T&&(y(T),m(!0))},[s]);p.useEffect(()=>{const M=S.get("dealId");M&&P(M)},[S,s,P]),p.useEffect(()=>{!n&&C.length===0&&x(!0)},[n,C]);const A=async()=>{if(!(!e||!t)){u(!0);try{const M=async()=>{if(!t.teamId)return[];const{data:$,error:pe}=await G.from("user_teams").select("user_id").eq("team_id",t.teamId);return pe?(console.error("Error loading team members",pe),[]):($||[]).map(ce=>ce.user_id)};let X=[];switch(t.globalRole){case"admin":{X=await Cn(t);break}case"sales_manager":{const $=await M();X=$.length?$:await Cn(t);break}case"team_lead":{const $=await M();X=$.length?$:[t.userId];break}default:X=[t.userId]}let T=G.from("deals").select(`
          *,
          lead_sources (*),
          pipeline_statuses (*)
        `).order("created_at",{ascending:!1});X.length===1?T=T.eq("user_id",X[0]):X.length>1&&(T=T.in("user_id",X));const{data:z,error:Z}=await T;if(Z)console.error("Error loading deals",Z),o([]);else{const $=new Date().getFullYear(),pe=(z||[]).filter(ce=>{if(ce.status!=="closed")return!0;const Me=ce.close_date||ce.closed_at;return Me?new Date(Me).getFullYear()>=$:!1});o(pe)}}catch(M){console.error("Error resolving visible users",M),o([])}finally{u(!1)}}},H=M=>{const X=s.find(T=>T.id===M.active.id);f(X||null)},J=async M=>{const{active:X,over:T}=M;if(f(null),!T)return;const z=X.id,Z=s.find(Ke=>Ke.id===z);if(!Z)return;const $=s.find(Ke=>Ke.id===T.id),pe=$?$.pipeline_status_id:T.id;if(!pe)return;if(pe===Z.pipeline_status_id){$&&$.id!==Z.id&&$.deal_type===Z.deal_type&&o(Ke=>{const lr=Ke.findIndex(q=>q.id===Z.id),Ve=Ke.findIndex(q=>q.id===$.id);return lr===-1||Ve===-1?Ke:Mh(Ke,lr,Ve)});return}const ce=C.find(Ke=>Ke.id===pe);if(!ce)return;const Me={pipeline_status_id:pe,status:(ce.slug||ce.name||"").toLowerCase(),stage_entered_at:new Date().toISOString()};(typeof ce.slug=="string"&&ce.slug.length>0?ce.slug.toLowerCase():(ce.name||"").toLowerCase()).includes("closed")&&(Me.closed_at=new Date().toISOString());const{error:Je}=await G.from("deals").update(Me).eq("id",z);Je||A()},ee=M=>{y(M),m(!0)},B=()=>{m(!1),y(null);const M=new URLSearchParams(S);M.has("dealId")&&(M.delete("dealId"),N(M,{replace:!0})),A()},K=(_==="all"?s:s.filter(M=>$S[_].matches.includes(M.deal_type))).filter(M=>M.status!=="dead"),D=M=>K.filter(X=>X.pipeline_status_id===M),R=M=>{const z=(M.actual_sale_price||M.expected_sale_price)*M.gross_commission_rate*(1-M.brokerage_split_rate);return(M.referral_out_rate?z*(1-M.referral_out_rate):z)-M.transaction_fee},F=M=>{const X=new Date(M),z=new Date().getTime()-X.getTime();return Math.floor(z/(1e3*60*60*24))},le=async M=>{if(!confirm(`Are you sure you want to delete ${M.length} deal${M.length>1?"s":""}?`))return;const{error:X}=await G.from("deals").delete().in("id",M);X||A()},re=async(M,X)=>{const T={};if(X.pipeline_status_id){T.pipeline_status_id=X.pipeline_status_id,T.stage_entered_at=new Date().toISOString();const Z=C.find($=>$.id===X.pipeline_status_id);(Z==null?void 0:Z.name.toLowerCase())==="closed"?(T.status="closed",T.closed_at=new Date().toISOString()):(Z==null?void 0:Z.name.toLowerCase())==="dead"&&(T.status="dead")}const{error:z}=await G.from("deals").update(T).in("id",M);z||A()},Ne=M=>{const X=M.filter(pe=>pe.deal_type==="buyer"||pe.deal_type==="buyer_and_seller").length,T=M.filter(pe=>pe.deal_type==="seller"||pe.deal_type==="buyer_and_seller").length,z=M.filter(pe=>pe.deal_type==="renter").length,Z=M.filter(pe=>pe.deal_type==="landlord").length,$=M.reduce((pe,ce)=>pe+R(ce),0);return{buyers:X,sellers:T,renters:z,landlords:Z,totalCommission:$}},O=M=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(M),V=Ne(K),te=[{label:"Buyers",value:V.buyers,display:V.buyers.toString()},{label:"Sellers",value:V.sellers,display:V.sellers.toString()},{label:"Renters",value:V.renters,display:V.renters.toString()},{label:"Landlords",value:V.landlords,display:V.landlords.toString()},{label:"Net Commission",value:V.totalCommission,display:O(V.totalCommission)}].filter(M=>M.value>0);return c||n?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):l.jsxs("div",{className:"space-y-6 min-h-full",children:[l.jsxs("div",{className:`${LZ} p-6 space-y-4`,children:[l.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-[0.25em]",children:"Pipeline"}),l.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mt-1",children:"Active deals workspace"}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Monitor every opportunity, shift deals between stages, and launch new work without leaving this view."})]}),l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[l.jsxs("div",{className:"inline-flex items-center rounded-full border border-gray-200/80 bg-white/80 p-1 shadow-inner",children:[l.jsxs("button",{onClick:()=>b("kanban"),className:`inline-flex items-center gap-2 rounded-full px-3 py-1.5 text-sm font-medium ${w==="kanban"?"bg-[var(--app-accent)] text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[l.jsx(F$,{className:"w-4 h-4"}),l.jsx("span",{children:"Kanban"})]}),l.jsxs("button",{onClick:()=>b("table"),className:`inline-flex items-center gap-2 rounded-full px-3 py-1.5 text-sm font-medium ${w==="table"?"bg-[var(--app-accent)] text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[l.jsx(RC,{className:"w-4 h-4"}),l.jsx("span",{children:"Table"})]})]}),l.jsxs("button",{onClick:()=>{y(null),m(!0)},className:"inline-flex items-center justify-center gap-2 rounded-2xl border border-white/50 bg-[var(--app-accent)] px-4 py-2 text-sm font-semibold text-white shadow-[0_8px_16px_rgba(15,23,42,0.12)] transition hover:bg-[var(--app-accent-dark,#0052cc)]",children:[l.jsx(Ba,{className:"w-4 h-4"}),l.jsx("span",{children:"New Deal"})]})]})]}),te.length>0&&l.jsx("div",{className:"flex flex-wrap gap-3",children:te.map(M=>l.jsxs("div",{className:`${FZ} gap-2`,children:[l.jsx("span",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:M.label}),l.jsx("span",{className:"font-semibold text-gray-900",children:M.display})]},M.label))}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Deal types"}),_!=="all"&&l.jsx("button",{onClick:()=>j("all"),className:"text-xs font-medium text-[var(--app-accent)] hover:underline",children:"Reset"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:()=>j("all"),className:`${MS} ${_==="all"?"bg-gray-900 text-white border-gray-900 shadow-sm":"border-gray-200/70 bg-white text-gray-600 hover:text-gray-900"}`,children:"All deals"}),BZ.map(M=>{const X=$S[M],T=_===M;return l.jsx("button",{onClick:()=>j(M),className:`${MS} ${T?`${X.accentClass} shadow-sm ring-1 ring-black/5`:"border-gray-200/70 bg-white text-gray-600 hover:text-gray-900"}`,children:X.label},M)})]})]})]}),C.length===0?l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsxs("div",{className:"text-center max-w-md",children:[l.jsx(Ch,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Configure Your Pipeline"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Choose a template to get started with your pipeline workflow"}),l.jsx("button",{onClick:()=>x(!0),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition",children:"Choose Pipeline Template"})]})}):w==="kanban"?l.jsxs(Rh,{sensors:E,collisionDetection:OL,onDragStart:H,onDragEnd:J,children:[l.jsx("div",{className:"pb-2 overflow-x-auto",children:l.jsx("div",{className:"flex gap-3 sm:gap-4 pb-4 px-2 sm:px-6 min-w-max",children:C.map(M=>l.jsx(yZ,{status:M.id,label:M.name,color:M.color,deals:D(M.id),onDealClick:ee,calculateNetCommission:R,getDaysInStage:F},M.id))})}),l.jsx(pE,{children:d?l.jsx(JD,{deal:d,netCommission:R(d),daysInStage:F(d.stage_entered_at),onClick:()=>{},isDragging:!0}):null})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsx(AZ,{deals:K,statuses:C,onDealClick:ee,calculateNetCommission:R,getDaysInStage:F,onBulkDelete:le,onBulkEdit:re,onImportSuccess:A})}),h&&l.jsx(QD,{deal:g,onClose:B,onDelete:B}),v&&l.jsx(eI,{onClose:()=>x(!1),onSelect:a,onCreateCustomWorkflow:i})]})}const zZ=["under_contract","pending","closed"],Tl={buyer:"Buyer",seller:"Seller",buyer_and_seller:"Buyer & Seller",renter:"Renter",landlord:"Landlord"},WZ=["No Response / Ghosted","Client Not Ready / Timeline Changed","Chose Another Agent","Financing Didnt Work Out","Deal Fell Through"];function KZ(){const{user:e,roleInfo:t}=At(),[,r]=p.useTransition(),[n,a]=p.useState(new Date().getFullYear()),[i,s]=p.useState({closedDeals:0,totalVolume:0,totalGCI:0,avgSalePrice:0,avgCommission:0,buyerDeals:0,sellerDeals:0,avgDaysToClose:0}),[o,c]=p.useState([]),[u,d]=p.useState([]),[f,h]=p.useState({count:0,gci:0}),[m,g]=p.useState(0),[y,v]=p.useState(!0),[x,w]=p.useState(!1),[b,_]=p.useState([]),[j,S]=p.useState([]),[N,k]=p.useState([]),[C,E]=p.useState([]),[P,A]=p.useState([]),[H,J]=p.useState([]),[ee,B]=p.useState([]),[K,D]=p.useState([]),[R,F]=p.useState({total:0,reasons:[]}),[le,re]=p.useState([]),Ne=p.useMemo(()=>j.length?[...j].sort().join("|"):"",[j]),O=p.useMemo(()=>H.length?[...H].sort().join("|"):"",[H]),V=p.useMemo(()=>ee.length?[...ee].sort().join("|"):"",[ee]),te=p.useMemo(()=>K.length?[...K].sort().join("|"):"",[K]),M=!!e&&((t==null?void 0:t.globalRole)==="team_lead"||(t==null?void 0:t.teamRole)==="team_lead"),X=j.length===0||j.length===b.length,T=M&&j.length===1&&j[0]===(e==null?void 0:e.id),z=p.useMemo(()=>{const W=(de,Ce)=>de.length===0?Ce:de.length===1?de[0]:de.length===2?`${de[0]} and ${de[1]}`:de.length===3?`${de[0]}, ${de[1]} and ${de[2]}`:`multiple ${Ce}`,_e=de=>de.endsWith("s")?`${de}'`:`${de}'s`,$e=b.filter(de=>j.includes(de.id)).map(de=>de.label||de.email||"Agent"),Qe=X||$e.length===0,Be=!Qe&&$e.length===1,pt=Be?_e($e[0]):"",Et=ee.length===0||C.length>0&&ee.length===C.length,I=K.length===0||P.length>0&&K.length===P.length,Y=H.length===0||N.length>0&&H.length===N.length,ie=C.filter(de=>ee.includes(de.id)).map(de=>de.label),fe=K.map(de=>Tl[de]??de.replace(/_/g," ")),ue=N.filter(de=>H.includes(de.id)).map(de=>de.name),se=Et?"all pipeline stages":W(ie,"pipeline stages"),Ae=I?"all deal types":W(fe,"deal types"),me=Y?"all lead sources":W(ue,"lead sources");if(Et&&I&&Y)return Be?`Viewing ${pt} deals across all pipeline stages, deal types, and lead sources.`:Qe?"Viewing all deals across all agents, pipeline stages, deal types, and lead sources.":"Viewing deals for multiple agents across all pipeline stages, deal types, and lead sources.";const Te=Qe?"all agents":Be?pt:$e.length===2?`${$e[0]} and ${$e[1]}`:$e.length===3?`${$e[0]}, ${$e[1]} and ${$e[2]}`:"multiple agents",ae=[];if(se&&ae.push(se),Ae){const de=I?`across ${Ae}`:`${Ae} deals`;ae.push(de)}me&&ae.push(`from ${me}`),ae.length===0&&ae.push("deals");const he=ae.join(", ");return`Viewing ${Te} ${he}`.replace(/\s+/g," ").trim()+"."},[b,P,N,C,X,j,K,H,ee,e==null?void 0:e.id]),Z=()=>{e&&S([e.id])},$=()=>{S([])},pe=W=>{const _e=Array.from(W.target.selectedOptions).map($e=>$e.value);S(_e)},ce=W=>{const _e=Array.from(W.target.selectedOptions).map($e=>$e.value);B(_e)},Me=W=>{const _e=Array.from(W.target.selectedOptions).map($e=>$e.value);J(_e)},Ie=W=>{const _e=Array.from(W.target.selectedOptions).map($e=>$e.value);D(_e)};p.useEffect(()=>{P.length&&D(W=>W.filter(_e=>P.includes(_e)))},[P]);const Je=(W,_e)=>_e.length?_e.length===1?W.eq("user_id",_e[0]):W.in("user_id",_e):W,Ke=(W,_e)=>{if(W=Je(W,_e),H.length&&(W=W.in("lead_source_id",H)),ee.length){const $e=ee.filter(Boolean);$e.length&&(W=W.in("pipeline_status_id",$e))}return K.length&&(W=W.in("deal_type",K)),W},lr=t&&t.globalRole!=="agent"||b.length>1,Ve=async(W,_e)=>{const $e=W.length?W:b.map(se=>se.id);if(!$e.length)return;const Qe=new Date(_e,0,1).toISOString(),Be=new Date(_e,11,31,23,59,59).toISOString();let pt=G.from("deals").select(`
        id,
        deal_type,
        lead_source_id,
        lead_sources (id, name),
        pipeline_status_id,
        pipeline_statuses (id, name, sort_order)
      `).gte("created_at",Qe).lte("created_at",Be);pt=Je(pt,$e);const{data:Et,error:I}=await pt;if(I){console.error("Unable to load analytics filter context",I);return}const Y=new Map,ie=new Map,fe=new Set;(Et||[]).forEach(se=>{var Ae,me;(Ae=se.lead_sources)!=null&&Ae.id&&Y.set(se.lead_sources.id,{id:se.lead_sources.id,name:se.lead_sources.name||"Unknown"}),(me=se.pipeline_statuses)!=null&&me.id&&ie.set(se.pipeline_statuses.id,{id:se.pipeline_statuses.id,label:se.pipeline_statuses.name,sortOrder:se.pipeline_statuses.sort_order}),se.deal_type&&fe.add(se.deal_type)}),k(Array.from(Y.values()).sort((se,Ae)=>se.name.localeCompare(Ae.name))),E(Array.from(ie.values()).sort((se,Ae)=>{const me=se.sortOrder??999,xe=Ae.sortOrder??999;return me===xe?se.label.localeCompare(Ae.label):me-xe}));const ue=Array.from(fe).sort((se,Ae)=>{const me=Tl[se]??se,xe=Tl[Ae]??Ae;return me.localeCompare(xe)});A(ue.length?ue:Object.keys(Tl))},q=W=>{if(!W)return null;const _e=W.trim();if(!_e)return null;const $e=_e.match(/^(\d{4})-(\d{2})-(\d{2})$/);if($e){const pt=Number($e[1]),Et=Number($e[2])-1,I=Number($e[3]);if(Number.isNaN(pt)||Number.isNaN(Et)||Number.isNaN(I)||Et<0||Et>11||I<1||I>31)return null;const Y=new Date(Date.UTC(pt,Et,I));return{year:pt,month:Et,date:Y}}const Qe=_e.replace(" ","T").replace(/(\+\d{2})(\d{2})$/,"$1:$2").replace(/(-\d{2})(\d{2})$/,"$1:$2"),Be=new Date(Qe);return Number.isNaN(Be.getTime())?null:{year:Be.getUTCFullYear(),month:Be.getUTCMonth(),date:Be}};p.useEffect(()=>{if(!e)return;(async()=>{var ie;const _e={id:e.id,label:((ie=e.user_metadata)==null?void 0:ie.name)||e.email||"You",email:e.email||""},$e=async()=>{if(!t)return[e.id];switch(t.globalRole){case"admin":return await Cn(t);case"sales_manager":case"team_lead":return await Cn(t);default:return[t.userId]}};if(!t||t.globalRole==="agent"){_([_e]),S([e.id]);return}const Qe=await $e();let Be=[];const{data:pt,error:Et}=await G.rpc("get_accessible_agents");if(Et)console.error("Unable to load accessible agents",Et);else if(pt){const fe=pt,ue=new Set(fe.filter(me=>me.global_role==="admin"||me.global_role==="sales_manager").map(me=>me.user_id)),se=fe.filter(me=>me.global_role!=="admin"&&me.global_role!=="sales_manager").map(me=>({id:me.user_id,label:me.display_name||me.email||"Agent",email:me.email||""}));if(Be=(Qe.length?se.filter(me=>Qe.includes(me.id)):se).filter((me,xe,Te)=>Te.findIndex(ae=>ae.id===me.id)===xe),ue.size)for(const me of ue){const xe=Qe.indexOf(me);xe!==-1&&Qe.splice(xe,1)}}const I=fe=>{var ue;return fe===e.id?((ue=e.user_metadata)==null?void 0:ue.name)||e.email||"You":`Agent ${fe.slice(0,8)}`};if(!Be.length)Be=Qe.map(fe=>({id:fe,label:I(fe),email:""}));else{const fe=new Set(Be.map(se=>se.id)),ue=Qe.filter(se=>!fe.has(se));ue.length&&(Be=[...Be,...ue.map(se=>({id:se,label:I(se),email:""}))])}_(Be);const Y=Be.map(fe=>fe.id);S(Y.length?[]:[e.id])})()},[e,t==null?void 0:t.globalRole,t==null?void 0:t.teamId]),p.useEffect(()=>{e&&b.length!==0&&He()},[e==null?void 0:e.id,n,Ne,O,V,te,b]),p.useEffect(()=>{const W=j.length?j:b.map(_e=>_e.id);!e||W.length===0||Ve(W,n)},[j,n,b]);const He=async()=>{if(!e||b.length===0)return;const W=j.length?j:b.map(he=>he.id);if(!W.length){r(()=>{s({closedDeals:0,totalVolume:0,totalGCI:0,avgSalePrice:0,avgCommission:0,buyerDeals:0,sellerDeals:0,avgDaysToClose:0}),d([]),c([]),h({count:0,gci:0})}),v(!1),w(!1);return}const _e=y;_e?v(!0):w(!0);const $e=new Date(n,0,1).toISOString(),Qe=new Date(n,11,31,23,59,59).toISOString(),Be=`
      id,
      user_id,
      deal_type,
      status,
      created_at,
      stage_entered_at,
      close_date,
      closed_at,
      expected_sale_price,
      actual_sale_price,
      gross_commission_rate,
      brokerage_split_rate,
      referral_out_rate,
      transaction_fee,
      lead_source_id,
      lead_sources (name),
      pipeline_status_id,
      pipeline_statuses (id, name, sort_order)
    `,pt=Ke(G.from("deals").select(Be).eq("status","closed"),W),Et=Ke(G.from("deals").select("id, created_at, close_date, closed_at, lead_source_id, pipeline_status_id, archived_reason").eq("status","dead").gte("created_at",$e).lte("created_at",Qe),W),I=Ke(G.from("deals").select(Be).gte("created_at",$e).lte("created_at",Qe),W),[Y,ie,fe,ue]=await Promise.all([G.from("user_settings").select("annual_gci_goal").eq("user_id",e.id).maybeSingle(),pt,Et,I]);Y.data&&g(Y.data.annual_gci_goal||0);const se=ie.data,Ae=fe.data,me=ue.data;if(se){const he=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];let de=0,Ce=0,Oe=0,Ge=0,jt=0,Tt=0,ct=0;const Re={},Qr={},gu=new Date;gu.getMonth(),gu.getFullYear(),se.forEach(dr=>{const vu=q(dr.close_date)||q(dr.closed_at);if(!vu||vu.year!==n)return;ct+=1;const wb=dr.actual_sale_price||dr.expected_sale_price||0;de+=wb;const _b=wb*(dr.gross_commission_rate||0)*(1-(dr.brokerage_split_rate||0)),jb=(dr.referral_out_rate?_b*(1-dr.referral_out_rate):_b)-(dr.transaction_fee||0);Ce+=jb,dr.deal_type==="buyer"&&Oe++,dr.deal_type==="seller"&&Ge++,dr.deal_type==="buyer_and_seller"&&(Oe++,Ge++);const Sb=q(dr.created_at);if(Sb){const Kp=(vu.date.getTime()-Sb.date.getTime())/(1e3*60*60*24);!Number.isNaN(Kp)&&Kp>=0&&(jt+=Kp,Tt++)}const rI=vu.month,yu=he[rI];Re[yu]=(Re[yu]||0)+jb,Qr[yu]=(Qr[yu]||0)+1});const Ls=Tt>0?jt/Tt:0;s({closedDeals:ct,totalVolume:de,totalGCI:Ce,avgSalePrice:ct>0?de/ct:0,avgCommission:ct>0?Ce/ct:0,buyerDeals:Oe,sellerDeals:Ge,avgDaysToClose:Ls});const Wp=he.map(dr=>({month:dr,gci:Re[dr]||0,deals:Qr[dr]||0}));d(Wp)}else s(he=>({...he,closedDeals:0,totalVolume:0,totalGCI:0,avgSalePrice:0,avgCommission:0,buyerDeals:0,sellerDeals:0,avgDaysToClose:0})),d([]),h({count:0,gci:0});if(Ae){const he={"No Response / Ghosted":0,"Client Not Ready / Timeline Changed":0,"Chose Another Agent":0,"Financing Didnt Work Out":0,"Deal Fell Through":0,Other:0},de=Ae.map(Ce=>Ce.id).filter(Boolean);if(de.length){Ae.forEach(Ge=>{const jt=(Ge.archived_reason||"").trim(),ct=WZ.find(Re=>jt&&Re.toLowerCase()===jt.toLowerCase())||"Other";he[ct]=(he[ct]||0)+1});const Ce=de.length,Oe=Object.entries(he).filter(([,Ge])=>Ge>0).map(([Ge,jt])=>({reason:Ge,count:jt,percentage:Ce>0?jt/Ce*100:0})).sort((Ge,jt)=>jt.count-Ge.count);F({total:Ce,reasons:Oe})}else F({total:0,reasons:[]})}else F({total:0,reasons:[]});const xe=new Date,Te=xe.getFullYear()===n,ae={count:0,gci:0};if(me){Te&&me.forEach(Ce=>{const Oe=q(Ce.close_date)||q(Ce.closed_at);if(!Oe||!(Oe.year===xe.getFullYear()&&Oe.month===xe.getMonth())||!zZ.includes(Ce.status))return;const ct=(Ce.actual_sale_price||Ce.expected_sale_price||0)*(Ce.gross_commission_rate||0)*(1-(Ce.brokerage_split_rate||0)),Qr=(Ce.referral_out_rate?ct*(1-Ce.referral_out_rate):ct)-(Ce.transaction_fee||0);ae.count+=1,ae.gci+=Qr});const he={};me.forEach(Ce=>{var Ge;const Oe=((Ge=Ce.lead_sources)==null?void 0:Ge.name)||"Unknown";if(he[Oe]||(he[Oe]={total:0,closed:0,commission:0}),he[Oe].total++,Ce.status==="closed"){he[Oe].closed++;const ct=(Ce.actual_sale_price||Ce.expected_sale_price||0)*(Ce.gross_commission_rate||0)*(1-(Ce.brokerage_split_rate||0)),Qr=(Ce.referral_out_rate?ct*(1-Ce.referral_out_rate):ct)-(Ce.transaction_fee||0);he[Oe].commission+=Qr}});const de=Object.entries(he).map(([Ce,Oe])=>({name:Ce,totalDeals:Oe.total,closedDeals:Oe.closed,conversionRate:Oe.total>0?Oe.closed/Oe.total*100:0,totalCommission:Oe.commission}));c(de.sort((Ce,Oe)=>Oe.totalCommission-Ce.totalCommission))}else h({count:0,gci:0}),c([]);if(me){const he=Ee(me,n);re(he)}else re([]);h(ae),_e&&v(!1),w(!1)},ke=W=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(W),Ue=W=>new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(W),xt={lead:1,in_progress:2,under_contract:3,closed_won:4,archived:5},L={lead:"Lead",in_progress:"In Progress",under_contract:"Under Contract",closed_won:"Closed Won",archived:"Archived (Closed Lost)"},Q=W=>{switch(W){case"closed":return"closed_won";case"dead":return"archived";case"under_contract":case"pending":return"under_contract";case"offer_submitted":case"showing_scheduled":case"in_progress":case"contacted":return"in_progress";default:return"lead"}},oe=(W,_e)=>W?W.getFullYear()===_e:!1,Ee=(W,_e)=>{const $e=[{from:"lead",to:"in_progress"},{from:"in_progress",to:"under_contract"},{from:"under_contract",to:"closed_won"}],Qe=W.filter(Be=>{var pt;return oe(((pt=q(Be.created_at))==null?void 0:pt.date)||null,_e)});return $e.map(({from:Be,to:pt})=>{const Et=Qe.filter(ie=>{const fe=Q(ie.status);return xt[fe]>=xt[Be]}).length,I=Qe.filter(ie=>{const fe=Q(ie.status);return fe==="archived"?!1:xt[fe]>=xt[pt]}).length,Y=Et>0?I/Et*100:0;return{from:Be,to:pt,entered:Et,advanced:I,rate:Y}})},Le=m>0?i.totalGCI/m*100:0,Pe=new Date,cr=n===Pe.getFullYear(),Qt=new Date(n,0,1),aa=new Date(n,11,31,23,59,59),ia=cr?Math.max(0,Math.min(Pe.getTime(),aa.getTime())-Qt.getTime()):aa.getTime()-Qt.getTime(),zi=aa.getTime()-Qt.getTime(),Wi=zi>0?ia/zi:1,sa=Wi>0?i.totalGCI/Wi:i.totalGCI,ri=Math.max(0,m-i.totalGCI),Ki=cr&&Pe.getFullYear()===n?12-Pe.getMonth():0,ni=m>0&&Ki>0?ri/Ki:0,{bestMonth:ze,worstMonth:bt}=p.useMemo(()=>{const W=u.filter(Qe=>Qe.gci>0);if(W.length===0)return{bestMonth:null,worstMonth:null};const _e=W.reduce((Qe,Be)=>Be.gci>Qe.gci?Be:Qe),$e=W.reduce((Qe,Be)=>Be.gci<Qe.gci?Be:Qe);return{bestMonth:_e,worstMonth:$e}},[u]),nt=p.useMemo(()=>u.filter(W=>W.gci>0),[u]),wt=nt.length,yr=wt>0?i.totalGCI/wt:0,ur=nt.reduce((W,_e)=>W+_e.deals,0),Lr=wt>0?ur/wt:0,Yr=wt>0?nt[wt-1]:null,tt=wt>1?nt[wt-2]:null,Zt=Yr&&tt?Yr.gci-tt.gci:null,kr=p.useMemo(()=>u.reduce((W,_e)=>Math.max(W,_e.gci),0),[u]),Xr=p.useMemo(()=>u.reduce((W,_e)=>Math.max(W,_e.deals),0),[u]),Mn=ze?u.find(W=>W.month===ze.month):null,$n=bt?u.find(W=>W.month===bt.month):null,_t="rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_1px_2px_rgba(15,23,42,0.08)]",Jr="inline-flex items-center rounded-full border border-gray-200/70 bg-white px-2.5 py-0.5 text-[11px] font-medium text-gray-600",oa="rounded-xl border border-gray-100/80 bg-white px-4 py-3",$s=o[0]||null,ai=o.length>1?[...o].filter(W=>W.totalDeals>=3).sort((W,_e)=>W.conversionRate-_e.conversionRate)[0]:null,Up=Array.from({length:5},(W,_e)=>new Date().getFullYear()-_e).map(W=>({value:W.toString(),label:W.toString()})),zp=`Jan 1  Dec 31, ${n}${cr?"  In progress":""}`;return y?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):l.jsxs("div",{className:"space-y-8",children:[l.jsxs("section",{className:`${_t} p-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between relative`,children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-[0.25em]",children:"Analytics"}),l.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mt-1",children:"Year in Review"}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"A cohesive digest of production, pace, and lead-source efficiency for your selected year."})]}),l.jsxs("div",{className:"flex flex-col gap-3 items-start sm:items-end",children:[l.jsxs("div",{className:"flex items-center gap-3 text-left sm:text-right",children:[l.jsx("div",{className:"flex items-center gap-2 text-xs font-semibold text-gray-500 min-h-[20px]",children:x?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"h-2 w-2 rounded-full bg-[var(--app-accent)] animate-pulse"}),"Updating"]}):l.jsx("span",{className:"invisible",children:"Updating"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Timeframe"}),l.jsx("p",{className:"text-sm text-gray-500",children:zp})]})]}),l.jsx(XD,{options:Up,value:String(n),onChange:W=>a(parseInt(W,10)),className:"self-start sm:self-end w-max"})]})]}),lr&&l.jsxs("section",{className:`${_t} p-5 space-y-4`,children:[l.jsx("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:l.jsxs("div",{children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Scope"}),l.jsx("p",{className:"text-sm text-gray-700",children:z})]})}),b.length>0&&l.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Agents"}),M&&l.jsx("button",{type:"button",onClick:Z,className:`rounded-full px-3 py-1 text-xs font-semibold transition ${T?"bg-[var(--app-accent)] text-white shadow-[0_8px_20px_rgba(0,122,255,0.25)]":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,children:"Focus On Me"})]}),l.jsx("div",{className:"flex items-center gap-1.5",children:!X&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:$,children:"Clear"})})]}),l.jsx("select",{multiple:!0,value:j,onChange:pe,className:"hig-input min-h-[72px] rounded-2xl border-gray-200 bg-white/90 text-sm analytics-multi-select",children:b.map(W=>l.jsx("option",{value:W.id,children:W.label},W.id))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Pipeline Stage"}),ee.length>0&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:()=>B([]),children:"Clear"})]}),l.jsx("select",{multiple:!0,value:ee,onChange:ce,className:"hig-input min-h-[64px] mt-2 analytics-multi-select",children:C.map(W=>l.jsx("option",{value:W.id,children:W.label},W.id))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Deal Type"}),K.length>0&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:()=>D([]),children:"Clear"})]}),l.jsx("select",{multiple:!0,value:K,onChange:Ie,className:"hig-input min-h-[64px] mt-2 analytics-multi-select",children:P.map(W=>l.jsx("option",{value:W,children:Tl[W]??W.replace(/_/g," ")},W))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Lead Source"}),H.length>0&&l.jsx("button",{type:"button",className:"text-xs text-[var(--app-accent)]",onClick:()=>J([]),children:"Clear"})]}),l.jsx("select",{multiple:!0,value:H,onChange:Me,className:"hig-input min-h-[64px] mt-2 analytics-multi-select",children:N.map(W=>l.jsx("option",{value:W.id,children:W.name},W.id))})]})]})]}),l.jsx("section",{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[l.jsxs("div",{className:`${_t} p-5`,children:[l.jsx("p",{className:"text-xs font-semibold text-blue-600 uppercase tracking-wide",children:"Pipeline"}),l.jsx("div",{className:"text-2xl font-semibold text-gray-900 mt-2",children:Ue(i.closedDeals)}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Closed deals"}),l.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:[i.buyerDeals," buyer  ",i.sellerDeals," seller"]})]}),l.jsxs("div",{className:`${_t} p-5`,children:[l.jsx("p",{className:"text-xs font-semibold text-green-600 uppercase tracking-wide",children:"Volume"}),l.jsx("div",{className:"text-2xl font-semibold text-gray-900 mt-2",children:ke(i.totalVolume)}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Total sales volume"}),l.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Avg sale price  ",ke(i.avgSalePrice)]})]}),l.jsxs("div",{className:`${_t} p-5`,children:[l.jsx("p",{className:"text-xs font-semibold text-amber-600 uppercase tracking-wide",children:"Net GCI"}),l.jsx("div",{className:"text-2xl font-semibold text-gray-900 mt-2",children:ke(i.totalGCI)}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Total earnings after splits"}),l.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Avg commission  ",ke(i.avgCommission)]})]}),l.jsxs("div",{className:`${_t} p-5`,children:[l.jsx("p",{className:"text-xs font-semibold text-indigo-600 uppercase tracking-wide",children:"Pace"}),l.jsx("div",{className:"text-2xl font-semibold text-gray-900 mt-2",children:Ue(f.count)}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Deals closing this month"}),l.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["GCI this month  ",ke(f.gci)]}),i.avgDaysToClose>0&&l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Avg time to close  ",i.avgDaysToClose.toFixed(0)," days"]})]})]})}),l.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:`${_t} p-6`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-5",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Monthly Performance"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How each producing month contributes to pace and income."})]}),l.jsx("div",{className:"text-xs text-gray-500",children:wt>0?l.jsxs("span",{className:Jr,children:[wt," active months"]}):l.jsx("span",{className:"text-gray-400",children:"No closed months yet"})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{className:oa,children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide",children:"Top Month"}),ze?l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[ze.month,l.jsxs("span",{className:Jr,children:[(Mn==null?void 0:Mn.deals)??0," deals"]})]}),l.jsx("p",{className:"text-sm text-gray-600",children:ke(ze.gci)})]}):l.jsx("p",{className:"text-sm text-gray-500",children:"No producing months yet."})]}),l.jsxs("div",{className:oa,children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide",children:"Slow Month"}),bt&&ze&&bt.month!==ze.month?l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[bt.month,l.jsxs("span",{className:Jr,children:[($n==null?void 0:$n.deals)??0," deals"]})]}),l.jsx("p",{className:"text-sm text-gray-600",children:ke(bt.gci)})]}):ze?l.jsx("p",{className:"text-sm text-gray-500",children:"Only one producing month so far."}):l.jsx("p",{className:"text-sm text-gray-500",children:"No data yet."})]}),l.jsxs("div",{className:oa,children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide",children:"Avg Active Month"}),l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:ke(yr||0)}),l.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[wt||0," active month",wt===1?"":"s",l.jsxs("span",{className:Jr,children:[Lr.toFixed(1)," deals/mo"]})]})]}),l.jsxs("div",{className:oa,children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide",children:"Momentum"}),Zt!==null&&Yr?l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:`text-lg font-semibold ${Zt>=0?"text-emerald-600":"text-rose-600"}`,children:[Zt>=0?"+":"-",ke(Math.abs(Zt))]}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Vs. ",(tt==null?void 0:tt.month)??"previous month"," GCI"]})]}):l.jsx("p",{className:"text-sm text-gray-500",children:"Log at least two producing months to see momentum."})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Monthly Ledger"}),l.jsxs("span",{className:"text-xs text-gray-500",children:["Peak GCI: ",kr?ke(kr):"","  Peak deals:"," ",Xr||""]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-left text-xs uppercase tracking-wide text-gray-500 border-b border-gray-100",children:[l.jsx("th",{className:"pb-2 pr-4",children:"Month"}),l.jsx("th",{className:"pb-2 pr-4",children:"Deals"}),l.jsx("th",{className:"pb-2 pr-4",children:"GCI"}),l.jsx("th",{className:"pb-2 pr-4",children:"Avg / Deal"}),l.jsx("th",{className:"pb-2 text-right",children:"Share"})]})}),l.jsx("tbody",{children:u.map(W=>{const _e=W.deals>0?W.gci/W.deals:0,$e=i.totalGCI>0?W.gci/i.totalGCI*100:0;return l.jsxs("tr",{className:"border-b border-gray-50",children:[l.jsx("td",{className:"py-2 pr-4 font-medium text-gray-900",children:W.month}),l.jsx("td",{className:"py-2 pr-4 text-gray-700",children:W.deals}),l.jsx("td",{className:"py-2 pr-4 text-gray-700",children:ke(W.gci)}),l.jsx("td",{className:"py-2 pr-4 text-gray-700",children:W.deals>0?ke(_e):""}),l.jsx("td",{className:"py-2 text-right text-gray-700",children:i.totalGCI>0?`${$e.toFixed(1)}%`:""})]},W.month)})})]})})]})]}),l.jsxs("div",{className:`${_t} p-6`,children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Momentum & Pace"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Are you ahead or behind last years GCI at this point on the calendar?"})]})}),l.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[l.jsxs("div",{className:"rounded-2xl border border-gray-100/80 bg-gradient-to-br from-white to-[var(--app-bg-start)] p-5 shadow-inner",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Year-over-year pace"}),l.jsxs("div",{className:"mt-3 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:ke(i.totalGCI)}),l.jsx("p",{className:"text-sm text-gray-600",children:"Current GCI"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Pace needed"}),l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:ke(sa)})]})]}),l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[l.jsx("span",{children:"Current"}),l.jsx("span",{children:"Goal"})]}),l.jsx("div",{className:"mt-1 h-3 rounded-full bg-gray-100",children:l.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-blue-500 to-cyan-400 transition-all",style:{width:`${Math.min(100,i.totalGCI/(m||1)*100)}%`}})}),l.jsxs("div",{className:"mt-1 text-xs font-semibold text-gray-600",children:[Le.toFixed(1),"% of goal  year is ",(Wi*100).toFixed(1),"% complete"]})]})]}),l.jsxs("div",{className:"rounded-2xl border border-gray-100/80 bg-white/90 p-5",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Active pipeline outlook"}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Ue(f.count)}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Deals expected to close this month"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:ke(f.gci)}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Projected monthly GCI"})]})]}),l.jsx("div",{className:"mt-4 rounded-xl bg-[var(--app-surface-muted)] p-4 text-sm text-gray-600",children:Zt!==null&&Yr?l.jsxs(l.Fragment,{children:[l.jsxs("span",{className:"font-semibold",children:[Zt>=0?"Ahead":"Trailing"," pace"]})," ","by ",ke(Math.abs(Zt))," versus ",(tt==null?void 0:tt.month)??"previous",". Keep this cadence to end the year at"," ",l.jsx("span",{className:"font-semibold",children:ke(sa)}),"."]}):"Once two months close well highlight whether you are accelerating or slowing down."})]})]})]})]}),l.jsxs("section",{className:`${_t} p-6`,children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Stage Conversion (Funnel)"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How many deals advance between key stages; highlights slowdowns and drop-offs."})]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-left text-xs uppercase tracking-wide text-gray-500 border-b border-gray-100",children:[l.jsx("th",{className:"pb-2 pr-4",children:"From  To"}),l.jsx("th",{className:"pb-2 pr-4",children:"Entered"}),l.jsx("th",{className:"pb-2 pr-4",children:"Advanced"}),l.jsx("th",{className:"pb-2 pr-4",children:"Conversion"})]})}),l.jsxs("tbody",{className:"divide-y divide-gray-100",children:[le.map(W=>l.jsxs("tr",{children:[l.jsxs("td",{className:"py-3 pr-4 font-medium text-gray-900",children:[L[W.from],"  ",L[W.to]]}),l.jsx("td",{className:"py-3 pr-4 text-gray-700",children:W.entered}),l.jsx("td",{className:"py-3 pr-4 text-gray-700",children:W.advanced}),l.jsxs("td",{className:"py-3 pr-4 text-gray-900 font-semibold",children:[W.rate.toFixed(1),"%"]})]},`${W.from}-${W.to}`)),le.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"py-4 text-sm text-gray-500",children:"No stage movement recorded in this period."})})]})]})})]}),l.jsxs("section",{className:`${_t} p-6`,children:[l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Closed Lost Reasons"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Why archived deals fell out  fuel pipeline fixes, coaching, and source tuning."})]}),l.jsx("div",{className:"text-sm text-gray-600",children:l.jsxs("span",{className:Jr,children:[R.total," archived"]})})]}),R.total===0?l.jsx("div",{className:"rounded-xl border border-dashed border-gray-200 p-4 text-sm text-gray-600 bg-gray-50/80",children:"No archived deals in this period. When you archive with a reason, well summarize them here."}):l.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3",children:R.reasons.map(W=>l.jsxs("div",{className:"rounded-xl border border-gray-100/80 bg-white px-4 py-3 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:W.reason}),l.jsxs("span",{className:"text-xs font-semibold text-gray-500",children:[W.percentage.toFixed(1),"%"]})]}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[W.count," deal",W.count===1?"":"s"]})]},W.reason))})]}),l.jsxs("section",{className:`${_t} overflow-hidden`,children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:"Lead Source Performance"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Compare volume, conversion, and commissions by source."})]})}),l.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Deals"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Closed"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Conv. Rate"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Commission"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Insight"})]})}),l.jsxs("tbody",{className:"bg-white/70 divide-y divide-gray-100",children:[o.map(W=>{let _e="Solid";return W.conversionRate>=25&&W.totalCommission>(i.totalGCI||0)/4?_e="Power Source":W.conversionRate<10&&W.totalDeals>=3&&(_e="Underperformer"),l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:W.name}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:W.totalDeals}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:W.closedDeals}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[W.conversionRate.toFixed(1),"%"]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600",children:ke(W.totalCommission)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:l.jsx("span",{className:_e==="Power Source"?"inline-flex px-2 py-1 rounded-full bg-green-50 text-green-700":_e==="Underperformer"?"inline-flex px-2 py-1 rounded-full bg-amber-50 text-amber-700":"inline-flex px-2 py-1 rounded-full bg-gray-50 text-gray-600",children:_e})})]},W.name)}),o.length===0&&l.jsx("tr",{children:l.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:["No data available for ",n]})})]})]})]}),l.jsxs("section",{className:`${_t} p-6`,children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Suggested Focus Areas"}),l.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Practical follow-ups informed by what the data is highlighting this year."}),l.jsxs("ul",{className:"space-y-3 text-sm text-gray-700",children:[m>0&&ri>0&&l.jsxs("li",{className:"leading-relaxed",children:["You need approximately"," ",l.jsx("span",{className:"font-semibold",children:ke(ri)})," ","more GCI to hit your annual goal.",ni>0&&l.jsxs(l.Fragment,{children:[" ","That's about"," ",l.jsxs("span",{className:"font-semibold",children:[ke(ni)," per month"]})," ","for the rest of the year."]})]}),$s&&l.jsxs("li",{className:"leading-relaxed",children:[l.jsx("span",{className:"font-semibold",children:$s.name})," continues to be your most profitable channel with"," ",l.jsx("span",{className:"font-semibold",children:ke($s.totalCommission)})," ","in GCI. Consider increasing budget or nurture time here."]}),ai&&l.jsxs("li",{className:"leading-relaxed",children:[l.jsx("span",{className:"font-semibold",children:ai.name})," is converting at"," ",ai.conversionRate.toFixed(1),"%. Revisit the script or pause the spend until it improves."]}),i.avgDaysToClose>0&&l.jsxs("li",{className:"leading-relaxed",children:["Average time from lead to close is"," ",l.jsxs("span",{className:"font-semibold",children:[i.avgDaysToClose.toFixed(0)," days"]}),". Tighten follow-up cadences or pre-qualification steps to reduce the cycle."]}),(!$s||!ai)&&i.closedDeals===0&&l.jsx("li",{className:"leading-relaxed",children:"Add a few deals to the pipeline this year to unlock richer insight. Once production starts, this dashboard will reveal which channels earn the most."})]})]})]})}const fd="rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_1px_2px_rgba(15,23,42,0.08)]",HZ="inline-flex items-center rounded-full border px-3 py-1.5 text-xs font-semibold transition",qZ=[{label:"All tasks",value:"all",accentClass:"bg-gray-900 text-white border-gray-900 shadow-sm"},{label:"Overdue",value:"overdue",accentClass:"bg-red-50 text-red-700 border-red-200 shadow-sm ring-1 ring-red-100"},{label:"Due today",value:"today",accentClass:"bg-amber-50 text-amber-700 border-amber-200 shadow-sm ring-1 ring-amber-100"},{label:"Upcoming",value:"upcoming",accentClass:"bg-sky-50 text-sky-700 border-sky-200 shadow-sm ring-1 ring-sky-100"}];function VZ(){const{user:e,roleInfo:t}=At(),[r,n]=p.useState([]),[a,i]=p.useState([]),[s,o]=p.useState("all"),[c,u]=p.useState("all"),[d,f]=p.useState(""),[h,m]=p.useState(!0),[g,y]=p.useState([]),[v,x]=p.useState({}),[w,b]=p.useState(!0),[_,j]=p.useState(null),[S,N]=p.useState(!1),[k,C]=p.useState(null),[E,P]=p.useState(""),[A,H]=p.useState(""),[J,ee]=p.useState(""),[B,K]=p.useState(""),[D,R]=p.useState(!1),[F,le]=p.useState(null),re=!!t&&["sales_manager","team_lead","admin"].includes(t.globalRole),[Ne,O]=p.useState([]),[V,te]=p.useState({}),[M,X]=p.useState({}),T=L=>{var Q;return v[L]?v[L]:L===(e==null?void 0:e.id)?((Q=e.user_metadata)==null?void 0:Q.name)||e.email||"You":`Agent ${L.slice(0,8)}`},z=L=>{if(!L)return null;const[Q,oe,Ee]=L.split("-").map(Number);return!Q||!oe||!Ee?null:new Date(Q,oe-1,Ee)},Z=p.useMemo(()=>c==="all"?r:r.filter(L=>L.user_id===c),[r,c]),$=p.useMemo(()=>{const L=new Date;L.setHours(0,0,0,0);let Q=0,oe=0,Ee=0,Le=0;const Pe=[];return Z.forEach(cr=>{const Qt=z(cr.due_date);if(!Qt){Le+=1;return}Qt<L?Q+=1:Qt.getTime()===L.getTime()?oe+=1:Ee+=1,Pe.push(cr)}),Pe.sort((cr,Qt)=>{const aa=z(cr.due_date),ia=z(Qt.due_date);return aa?ia?aa.getTime()-ia.getTime():-1:1}),{total:r.length,scopedTotal:Z.length,overdue:Q,dueToday:oe,upcoming:Ee,unscheduled:Le,nextTask:Pe[0]||null}},[Z]),pe=p.useMemo(()=>g.find(L=>L.id===A),[g,A]),ce=p.useMemo(()=>!!(t&&["sales_manager","team_lead"].includes(t.globalRole)),[t]),Me=p.useMemo(()=>ce?g.reduce((L,Q)=>{const oe=Q.user_id;return L[oe]||(L[oe]=[]),L[oe].push(Q),L},{}):null,[g,ce]);p.useEffect(()=>{e&&Ie()},[e,t]),p.useEffect(()=>{(async()=>{if(!(!e||!t)){if(!re){O([]),u("all");return}try{const Q=await Cn(t),{data:oe,error:Ee}=await G.rpc("get_accessible_agents");if(!Ee&&oe){const Le=oe.filter(Pe=>Q.includes(Pe.user_id)&&Pe.global_role!=="admin"&&Pe.global_role!=="sales_manager").map(Pe=>({id:Pe.user_id,label:Pe.display_name||Pe.email||"Agent"}));O(Le),c!=="all"&&!Le.find(Pe=>Pe.id===c)&&u("all")}}catch(Q){console.error("Error loading agents",Q),O([])}}})()},[e,t]),p.useEffect(()=>{if(!e){y([]),b(!1);return}Je()},[e,t]),p.useEffect(()=>{let L=[...Z];const Q=new Date;if(Q.setHours(0,0,0,0),s==="overdue"?L=L.filter(oe=>{if(!oe.due_date)return!1;const Ee=z(oe.due_date);return!!Ee&&Ee<Q}):s==="today"?L=L.filter(oe=>{if(!oe.due_date)return!1;const Ee=z(oe.due_date);return Ee?Ee.getTime()===Q.getTime():!1}):s==="upcoming"&&(L=L.filter(oe=>{if(!oe.due_date)return!1;const Ee=z(oe.due_date);return!!Ee&&Ee>Q})),c!=="all"&&(L=L.filter(oe=>oe.user_id===c)),d.trim()){const oe=d.toLowerCase();L=L.filter(Ee=>Ee.title.toLowerCase().includes(oe)||Ee.deals.client_name.toLowerCase().includes(oe)||Ee.deals.property_address.toLowerCase().includes(oe))}i(L)},[s,d,c,Z]),p.useEffect(()=>{if(c==="all")return;const L=new Set(g.filter(Q=>Q.user_id===c).map(Q=>Q.id));A&&!L.has(A)&&H("")},[c,g,A]);const Ie=async()=>{if(!e)return;m(!0);let L=[e.id];t&&(L=await Cn(t),L.length||(L=[e.id]));let Q=G.from("tasks").select("*, deals(*, lead_sources(*))").eq("completed",!1).order("due_date",{ascending:!0});L.length===1?Q=Q.eq("user_id",L[0]):L.length>1&&(Q=Q.in("user_id",L));const{data:oe,error:Ee}=await Q;if(!Ee&&oe){const Le=oe.filter(Pe=>Pe.deals).map(Pe=>Pe);n(Le),await Ke(Le)}m(!1)},Je=async()=>{if(e){b(!0);try{let L=[e.id];t&&(L=await Cn(t),L.length||(L=[e.id]));let Q=G.from("deals").select("id, user_id, client_name, property_address, city, state, deal_type, status, next_task_due_date, next_task_description").neq("status","closed").neq("status","dead").order("updated_at",{ascending:!1});L.length===1?Q=Q.eq("user_id",L[0]):L.length>1&&(Q=Q.in("user_id",L));const{data:oe,error:Ee}=await Q;if(Ee)console.error("Error loading deals",Ee),y([]);else{y(oe||[]);const Le={},{data:Pe,error:cr}=await G.rpc("get_accessible_agents");!cr&&Array.isArray(Pe)&&Pe.forEach(Qt=>{L.includes(Qt.user_id)&&(Le[Qt.user_id]=Qt.display_name||Qt.email||"Agent")}),x(Le)}}catch(L){console.error("Error resolving visible deals",L),y([]),x({})}finally{b(!1)}}},Ke=async L=>{if(!L.length){te({});return}const Q=L.map(Pe=>Pe.id),{data:oe,error:Ee}=await G.from("deal_notes").select("id, task_id, content, created_at").in("task_id",Q).order("created_at",{ascending:!1});if(Ee||!oe){console.error("Error loading task notes",Ee),te({});return}const Le={};oe.forEach(Pe=>{Pe.task_id&&(Le[Pe.task_id]||(Le[Pe.task_id]=[]),Le[Pe.task_id].push(Pe))}),te(Le)},lr=L=>{const Q=z(L);return Q?Q.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"No due date"},Ve=L=>{const Q=z(L.due_date);if(!Q)return l.jsx("span",{className:"text-xs font-medium text-gray-500",children:"No due date"});const oe=new Date;return oe.setHours(0,0,0,0),Q<oe?l.jsx("span",{className:"text-xs font-semibold text-red-600",children:"Overdue"}):Q.getTime()===oe.getTime()?l.jsx("span",{className:"text-xs font-semibold text-orange-600",children:"Due today"}):l.jsx("span",{className:"text-xs font-semibold text-emerald-600",children:"Upcoming"})},q=L=>{C(L.deals),N(!0)},He=async L=>{if(L.preventDefault(),!!e){if(le(null),!E.trim()||!A){le("Add a task name and choose a deal.");return}R(!0);try{const{error:Q}=await G.from("tasks").insert({user_id:(pe==null?void 0:pe.user_id)||e.id,deal_id:A,title:E.trim(),description:B.trim()||null,due_date:J||null,completed:!1});if(Q)throw Q;P(""),H(""),ee(""),K(""),o("all"),await Ie()}catch(Q){console.error("Error creating task",Q),le("Could not add this task. Please try again.")}finally{R(!1)}}},ke=p.useMemo(()=>{if(!re||c!=="all")return null;const L=new Map;return a.forEach(Q=>{const oe=Q.user_id;L.has(oe)||L.set(oe,[]),L.get(oe).push(Q)}),Array.from(L.entries()).map(([Q,oe])=>({agentId:Q,agentName:v[Q]||T(Q),tasks:oe})).sort((Q,oe)=>Q.agentName.localeCompare(oe.agentName))},[a,c,re,v]),Ue=async(L,Q)=>{if(Q.stopPropagation(),!!e){j(L.id);try{const{error:oe}=await G.from("tasks").update({completed:!0}).eq("id",L.id);if(oe)throw oe;n(Ee=>Ee.filter(Le=>Le.id!==L.id)),i(Ee=>Ee.filter(Le=>Le.id!==L.id))}catch(oe){console.error("Error completing task",oe)}finally{j(null)}}},xt=()=>{N(!1),C(null),Ie()};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:`${fd} p-6 space-y-5`,children:[l.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-[0.25em]",children:"Tasks"}),l.jsx("h1",{className:"text-3xl font-semibold text-gray-900 mt-1",children:"Outstanding work"}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Track every open commitment across all deals in a single, prioritized list."})]}),l.jsx("div",{className:"w-full md:w-auto",children:l.jsx("input",{value:d,onChange:L=>f(L.target.value),placeholder:"Search by client, task, property...",className:"w-full rounded-2xl border border-white/60 bg-white/90 py-2.5 pl-4 pr-4 text-sm text-gray-900 shadow-inner placeholder:text-gray-400 focus:border-[var(--app-accent)]/40 focus:ring-2 focus:ring-[var(--app-accent)]/15 md:min-w-[280px]"})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between gap-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Task status"}),s!=="all"&&l.jsx("button",{onClick:()=>o("all"),className:"text-xs font-medium text-[var(--app-accent)] hover:underline",children:"Reset"})]}),re&&l.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400",children:"Agent"})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsx("div",{className:"flex flex-wrap gap-2",children:qZ.map(L=>{const Q=s===L.value;return l.jsx("button",{onClick:()=>o(L.value),className:`${HZ} ${Q?L.accentClass:"border-gray-200/70 bg-white text-gray-600 hover:text-gray-900"}`,children:L.label},L.value)})}),re&&l.jsxs("select",{value:c,onChange:L=>u(L.target.value),className:"hig-input w-52",children:[l.jsx("option",{value:"all",children:"All agents"}),(Ne.length?Ne:Array.from(new Set(r.map(L=>L.user_id))).map(L=>({id:L,label:v[L]||T(L)}))).map(L=>l.jsx("option",{value:L.id,children:L.label},L.id))]})]})]})]}),l.jsxs("div",{className:`${fd} p-6 space-y-4`,children:[l.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-[0.25em]",children:"Add a task"}),l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mt-1",children:"Assign the next move"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Attach a next step to any deal without leaving this page. Keep it short, clear, and actionable."})]}),l.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white/90 px-4 py-2 text-xs font-semibold text-gray-700 shadow-inner",children:[l.jsx("span",{className:"h-2 w-2 rounded-full bg-[var(--app-accent)] shadow-[0_0_0_4px_rgba(0,122,255,0.12)]"}),w?"Loading deals":`${c==="all"?g.length:g.filter(L=>L.user_id===c).length} deals available`]})]}),l.jsxs("form",{onSubmit:He,className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[l.jsxs("div",{className:"lg:col-span-5",children:[l.jsx("label",{className:"hig-label",children:"Task"}),l.jsx("input",{type:"text",value:E,onChange:L=>{P(L.target.value),F&&le(null)},placeholder:"Call lender about pre-approval",className:"hig-input"})]}),l.jsxs("div",{className:"lg:col-span-4",children:[l.jsx("label",{className:"hig-label",children:"Deal"}),l.jsxs("select",{value:A,onChange:L=>{H(L.target.value),F&&le(null)},className:"hig-input task-deal-select",disabled:w||g.length===0,children:[l.jsx("option",{value:"",children:w?"Loading deals":"Choose a deal"}),ce&&Me?Object.entries(Me).map(([L,Q])=>{const oe=c==="all"?Q:Q.filter(Ee=>Ee.user_id===c);return[L,oe]}).filter(([,L])=>L.length>0).sort((L,Q)=>{const oe=T(L[0]),Ee=T(Q[0]);return oe.localeCompare(Ee)}).map(([L,Q])=>l.jsx("optgroup",{label:` ${T(L).toUpperCase()}  ${Q.length} deal${Q.length===1?"":"s"} `,children:Q.map(oe=>l.jsxs("option",{value:oe.id,children:[oe.client_name,"  ",oe.property_address||"Address TBD"]},oe.id))},L)):(c==="all"?g:g.filter(L=>L.user_id===c)).map(L=>l.jsxs("option",{value:L.id,children:[L.client_name,"  ",L.property_address||"Address TBD"]},L.id))]}),pe&&l.jsx("p",{className:"mt-1 text-xs text-gray-500",children:pe.city&&pe.state?`${pe.city}, ${pe.state}`:pe.city||pe.state||"No location on file"})]}),l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("label",{className:"hig-label",children:"Due date"}),l.jsx("input",{type:"date",value:J,onChange:L=>ee(L.target.value),className:"hig-input"})]}),l.jsx("div",{className:"lg:col-span-1 flex items-end",children:l.jsx("button",{type:"submit",className:"hig-btn-primary w-full gap-2",disabled:D||w||g.length===0,children:D?"Adding":l.jsxs(l.Fragment,{children:[l.jsx(Ba,{className:"h-4 w-4"}),"Add"]})})}),l.jsxs("div",{className:"lg:col-span-9",children:[l.jsx("label",{className:"hig-label",children:"Notes (optional)"}),l.jsx("textarea",{value:B,onChange:L=>K(L.target.value),placeholder:"Context, prep work, or key talking points",className:"hig-input min-h-[80px]"})]}),l.jsx("div",{className:"lg:col-span-3",children:l.jsxs("div",{className:"h-full rounded-xl border border-gray-200/70 bg-gray-50/80 px-4 py-3 text-sm text-gray-700 shadow-inner",children:[l.jsx("p",{className:"font-semibold text-gray-900",children:"Give it clarity"}),l.jsx("p",{className:"mt-1 text-gray-600",children:"Use short verbs, include the who/where, and set a date so it shows up in the right bucket."})]})}),F&&l.jsx("div",{className:"lg:col-span-12 text-sm text-red-600",children:F})]})]}),l.jsx("div",{className:`${fd} p-0 overflow-hidden`,children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{className:"text-left text-xs uppercase tracking-wide text-gray-500",children:[l.jsx("th",{className:"px-5 py-3",children:"Task"}),l.jsx("th",{className:"px-5 py-3",children:"Due"}),l.jsx("th",{className:"px-5 py-3",children:"Deal"}),l.jsx("th",{className:"px-5 py-3",children:"Status"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100 bg-white/90",children:h?l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"px-5 py-8 text-center text-gray-500 text-sm",children:"Loading tasks"})}):a.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"px-5 py-12 text-center text-gray-500 text-sm",children:"Nothing to show here  take a moment to plan your next steps."})}):ke&&ke.length>0?ke.map(L=>l.jsxs(ft.Fragment,{children:[l.jsx("tr",{className:"bg-[var(--app-surface-muted)] sticky top-[3.5rem] z-10",children:l.jsxs("td",{colSpan:4,className:"px-5 py-2 text-xs font-semibold text-gray-700 uppercase tracking-wide",children:[L.agentName,"  ",L.tasks.length," task",L.tasks.length===1?"":"s"]})}),L.tasks.map(Q=>{var Le;const oe=V[Q.id]||[],Ee=!!M[Q.id];return l.jsxs("tr",{className:"hover:bg-[var(--app-surface-muted)]/60 cursor-pointer",onClick:()=>q(Q),children:[l.jsx("td",{className:"px-5 py-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("button",{type:"button",className:"pt-1",onClick:Pe=>Ue(Q,Pe),disabled:_===Q.id,"aria-label":"Mark task complete",children:_===Q.id?l.jsx(Rt,{className:"h-4 w-4 text-emerald-500 animate-spin"}):Q.completed?l.jsx(Fa,{className:"h-4 w-4 text-emerald-500"}):l.jsx(Om,{className:"h-4 w-4 text-gray-300"})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"font-medium text-gray-900",children:Q.title}),oe.length>0&&l.jsxs("button",{type:"button",onClick:Pe=>{Pe.stopPropagation(),X(cr=>({...cr,[Q.id]:!Ee}))},className:"text-[11px] font-semibold text-[var(--app-accent)] inline-flex items-center gap-1","aria-label":"Toggle task notes",children:[Ee?l.jsx(m_,{className:"h-3.5 w-3.5"}):l.jsx(cf,{className:"h-3.5 w-3.5"}),l.jsx("span",{children:"Notes"})]})]}),((Le=Q.deals)==null?void 0:Le.next_task_description)&&l.jsxs("p",{className:"text-xs text-gray-500",children:["Related: ",Q.deals.next_task_description]}),Ee&&oe.length>0&&l.jsxs("div",{className:"mt-2 rounded-xl border border-gray-200/70 bg-gray-50/80 p-3 space-y-2",children:[oe.slice(0,3).map(Pe=>l.jsx("p",{className:"text-sm text-gray-700",children:Pe.content},Pe.id)),oe.length>3&&l.jsxs("p",{className:"text-xs text-gray-500",children:[oe.length-3," more note",oe.length-3===1?"":"s"," in Deal notes"]})]})]})]})}),l.jsx("td",{className:"px-5 py-4 text-sm text-gray-700",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(jo,{className:"h-4 w-4 text-gray-400"}),l.jsx("span",{children:lr(Q.due_date)})]})}),l.jsx("td",{className:"px-5 py-4 text-sm text-gray-700",children:l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(jc,{className:"h-3.5 w-3.5 text-gray-400"}),l.jsx("span",{className:"font-medium text-gray-900",children:Q.deals.client_name})]}),Q.deals.property_address&&l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[l.jsx(g_,{className:"h-3 w-3"}),l.jsxs("span",{className:"truncate",children:[Q.deals.property_address,Q.deals.city?`, ${Q.deals.city}`:""]})]})]})}),l.jsx("td",{className:"px-5 py-4 text-sm text-gray-700",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(hs,{className:"h-4 w-4 text-gray-400"}),Ve(Q)]})})]},Q.id)})]},L.agentId)):a.map(L=>{var Ee;const Q=V[L.id]||[],oe=!!M[L.id];return l.jsxs("tr",{className:"hover:bg-[var(--app-surface-muted)]/60 cursor-pointer",onClick:()=>q(L),children:[l.jsx("td",{className:"px-5 py-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("button",{type:"button",className:"pt-1",onClick:Le=>Ue(L,Le),disabled:_===L.id,"aria-label":"Mark task complete",children:_===L.id?l.jsx(Rt,{className:"h-4 w-4 text-emerald-500 animate-spin"}):L.completed?l.jsx(Fa,{className:"h-4 w-4 text-emerald-500"}):l.jsx(Om,{className:"h-4 w-4 text-gray-300"})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"font-medium text-gray-900",children:L.title}),Q.length>0&&l.jsxs("button",{type:"button",onClick:Le=>{Le.stopPropagation(),X(Pe=>({...Pe,[L.id]:!oe}))},className:"text-[11px] font-semibold text-[var(--app-accent)] inline-flex items-center gap-1","aria-label":"Toggle task notes",children:[oe?l.jsx(m_,{className:"h-3.5 w-3.5"}):l.jsx(cf,{className:"h-3.5 w-3.5"}),l.jsx("span",{children:"Notes"})]})]}),((Ee=L.deals)==null?void 0:Ee.next_task_description)&&l.jsxs("p",{className:"text-xs text-gray-500",children:["Related: ",L.deals.next_task_description]}),oe&&Q.length>0&&l.jsxs("div",{className:"mt-2 rounded-xl border border-gray-200/70 bg-gray-50/80 p-3 space-y-2",children:[Q.slice(0,3).map(Le=>l.jsx("p",{className:"text-sm text-gray-700",children:Le.content},Le.id)),Q.length>3&&l.jsxs("p",{className:"text-xs text-gray-500",children:[Q.length-3," more note",Q.length-3===1?"":"s"," in Deal notes"]})]})]})]})}),l.jsx("td",{className:"px-5 py-4 text-sm text-gray-700",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(jo,{className:"h-4 w-4 text-gray-400"}),l.jsx("span",{children:lr(L.due_date)})]})}),l.jsx("td",{className:"px-5 py-4 text-sm text-gray-700",children:l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(jc,{className:"h-3.5 w-3.5 text-gray-400"}),l.jsx("span",{className:"font-medium text-gray-900",children:L.deals.client_name})]}),L.deals.property_address&&l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[l.jsx(g_,{className:"h-3 w-3"}),l.jsxs("span",{className:"truncate",children:[L.deals.property_address,L.deals.city?`, ${L.deals.city}`:""]})]})]})}),l.jsx("td",{className:"px-5 py-4 text-sm text-gray-700",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(hs,{className:"h-4 w-4 text-gray-400"}),Ve(L)]})})]},L.id)})})]})})}),l.jsxs("section",{className:`${fd} p-6`,children:[l.jsx("div",{className:"flex items-center justify-between mb-6",children:l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Focus cues"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Where attention is needed"})]})}),l.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[l.jsxs("div",{className:"rounded-2xl border border-red-100/60 bg-red-50/70 p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm font-semibold uppercase tracking-wide",children:[l.jsx(PC,{className:"h-4 w-4"}),"Overdue"]}),l.jsx("p",{className:"mt-2 text-2xl font-semibold text-red-700",children:$.overdue}),l.jsx("p",{className:"text-xs text-red-600",children:"Tasks waiting on you"})]}),l.jsxs("div",{className:"rounded-2xl border border-amber-100/70 bg-amber-50/60 p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-amber-600 text-sm font-semibold uppercase tracking-wide",children:[l.jsx(hs,{className:"h-4 w-4"}),"Due today"]}),l.jsx("p",{className:"mt-2 text-2xl font-semibold text-amber-700",children:$.dueToday}),l.jsx("p",{className:"text-xs text-amber-600",children:"Expected before midnight"})]}),l.jsxs("div",{className:"rounded-2xl border border-emerald-100/70 bg-emerald-50/60 p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 text-sm font-semibold uppercase tracking-wide",children:[l.jsx(OC,{className:"h-4 w-4"}),"Upcoming"]}),l.jsx("p",{className:"mt-2 text-2xl font-semibold text-emerald-700",children:$.upcoming}),l.jsx("p",{className:"text-xs text-emerald-600",children:"On the horizon"})]}),l.jsxs("div",{className:"rounded-2xl border border-gray-100/70 bg-gray-50/80 p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm font-semibold uppercase tracking-wide",children:[l.jsx(Om,{className:"h-4 w-4"}),"Unscheduled"]}),l.jsx("p",{className:"mt-2 text-2xl font-semibold text-gray-700",children:$.unscheduled}),l.jsx("p",{className:"text-xs text-gray-500",children:"Add due dates to keep momentum"})]})]}),l.jsxs("div",{className:"mt-6 rounded-2xl border border-gray-100/80 bg-[var(--app-surface-muted)] p-5",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Next actionable"}),$.nextTask?l.jsxs("div",{className:"mt-3 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:$.nextTask.title}),l.jsx("p",{className:"text-sm text-gray-600",children:$.nextTask.deals.client_name})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[l.jsx(jo,{className:"h-4 w-4 text-gray-400"}),l.jsx("span",{children:lr($.nextTask.due_date)})]})]}):l.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"No dated tasks remain. Assign due dates to keep focus on high-leverage work."})]})]}),S&&k&&l.jsx(QD,{deal:k,onClose:xt,onDelete:xt})]})}const LS="rounded-2xl border border-gray-200/70 bg-white/90 shadow-[0_8px_20px_rgba(15,23,42,0.08)]",GZ="inline-flex items-center gap-2 rounded-2xl border border-white/80 bg-white/80 px-4 py-1.5 text-sm font-medium text-gray-700 shadow-inner transition hover:-translate-y-0.5 hover:border-[var(--app-accent)]/40 hover:text-gray-900";function YZ(){const[e,t]=p.useState([]),[r,n]=p.useState(""),[a,i]=p.useState(!1),s=["Show me the deals expected to close this month.","Which clients need new activity this week?","Summarize my pipeline stage mix.","How is my projected GCI pacing for Q3?","Who owns the next step on the Torres deal?"],o=async u=>{if(u.preventDefault(),!r.trim()||a)return;const d={role:"user",content:r};t(f=>[...f,d]),n(""),i(!0);try{const{data:{session:f}}=await G.auth.getSession();if(!f)throw new Error("Not authenticated");const h="https://gomwhbewjdcllejifdyf.supabase.co/functions/v1/luma-query",m={Authorization:`Bearer ${f.access_token}`,"Content-Type":"application/json"},g=e.slice(-6).map(w=>({role:w.role,content:w.content})),v=await(await fetch(h,{method:"POST",headers:m,body:JSON.stringify({query:d.content,conversation_history:g})})).json();if(v.error)throw new Error(v.error);const x={role:"assistant",content:v.answer,supportingData:v.supporting_data};t(w=>[...w,x])}catch(f){console.error("Luma query error:",f);const h={role:"assistant",content:"Sorry, I encountered an error processing your request. Please try again."};t(m=>[...m,h])}finally{i(!1)}},c=u=>{n(u)};return l.jsxs("div",{className:"flex h-full flex-col gap-6",children:[l.jsx("section",{className:`${LS} space-y-4 bg-white/95 px-6 py-6 sm:px-8 sm:py-8`,children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-gray-500",children:"Luma AI"}),l.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Chat with your data-aware copilot"}),l.jsx("p",{className:"max-w-3xl text-sm text-gray-600",children:"Ask natural questions about deals, tasks, lead sources, or performance and get calm answers without breaking your workflow. Luma keeps context from your workspace so you can move quickly."})]})}),l.jsxs("section",{className:`${LS} flex flex-1 flex-col overflow-hidden bg-gradient-to-b from-[#f5f9ff] to-white`,children:[l.jsxs("div",{className:"border-b border-white/60 px-4 py-5 sm:px-6",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-gray-500",children:"Conversation"}),l.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Bring up deals, follow-ups, or performance goalsLuma replies with grounded insight."})]}),l.jsxs("div",{className:"border-b border-white/60 px-4 py-4 sm:px-6",children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-gray-400",children:"Starter prompts"}),l.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:s.map((u,d)=>l.jsxs("button",{type:"button",onClick:()=>c(u),className:GZ,children:[l.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-gray-300"}),u]},d))})]}),l.jsxs("div",{className:"flex-1 space-y-4 overflow-y-auto px-4 py-6 pr-2 sm:px-6",children:[e.map((u,d)=>l.jsx("div",{className:`flex ${u.role==="user"?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:`max-w-3xl rounded-3xl px-5 py-4 ${u.role==="user"?"bg-[var(--app-accent)] text-white shadow-[0_25px_50px_rgba(0,122,255,0.25)]":"border border-white/80 bg-white/90 shadow-[0_15px_30px_rgba(15,23,42,0.08)]"}`,children:[u.role==="assistant"&&l.jsxs("div",{className:"mb-3 flex items-center gap-2 text-gray-500",children:[l.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-[var(--app-accent)]/10 text-[var(--app-accent)]",children:l.jsx(js,{className:"h-4 w-4",strokeWidth:2})}),l.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Luma"})]}),l.jsx("div",{className:`whitespace-pre-wrap text-sm leading-relaxed ${u.role==="user"?"text-white":"text-gray-900"}`,children:u.content}),u.supportingData&&l.jsx("div",{className:"mt-4 border-t border-gray-100 pt-4",children:l.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[u.supportingData.total_deals!==void 0&&l.jsx(Xs,{label:"Total Deals",value:u.supportingData.total_deals,accent:"blue"}),u.supportingData.total_gci!==void 0&&l.jsx(Xs,{label:"Total GCI",value:`$${u.supportingData.total_gci.toLocaleString("en-US",{maximumFractionDigits:0})}`,accent:"green"}),u.supportingData.closed_deals!==void 0&&l.jsx(Xs,{label:"Closed Deals",value:u.supportingData.closed_deals,accent:"indigo"}),u.supportingData.active_deals!==void 0&&l.jsx(Xs,{label:"Active Deals",value:u.supportingData.active_deals,accent:"orange"}),u.supportingData.under_contract!==void 0&&l.jsx(Xs,{label:"Under Contract",value:u.supportingData.under_contract,accent:"purple"}),u.supportingData.team_members!==void 0&&l.jsx(Xs,{label:"Team Members",value:u.supportingData.team_members,accent:"teal"})]})})]})},d)),a&&l.jsx("div",{className:"flex justify-start",children:l.jsxs("div",{className:"max-w-3xl rounded-3xl border border-white/80 bg-white/90 px-5 py-4 shadow-[0_15px_30px_rgba(15,23,42,0.08)]",children:[l.jsxs("div",{className:"mb-2 flex items-center gap-2 text-gray-500",children:[l.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-[var(--app-accent)]/10 text-[var(--app-accent)]",children:l.jsx(js,{className:"h-4 w-4"})}),l.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Luma"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400"}),l.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400",style:{animationDelay:"0.1s"}}),l.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400",style:{animationDelay:"0.2s"}})]})]})})]}),l.jsx("form",{onSubmit:o,className:"border-t border-white/60 bg-white/80 px-4 py-4 backdrop-blur sm:px-6",children:l.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end",children:[l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsx("div",{className:"rounded-2xl border border-[#d0e2ff] bg-white px-4 py-3 shadow-inner focus-within:border-[var(--app-accent)]/40 focus-within:ring-2 focus-within:ring-[var(--app-accent)]/15",children:l.jsx("input",{type:"text",value:r,onChange:u=>n(u.target.value),placeholder:"Ask Luma anything about your pipeline...",className:"w-full border-none bg-transparent text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none",disabled:a})}),l.jsx("p",{className:"text-[11px] text-gray-500",children:"Enter to send  Luma respects the same roles as PipelineIQ."})]}),l.jsxs("button",{type:"submit",disabled:a||!r.trim(),className:"inline-flex items-center justify-center gap-2 rounded-2xl bg-[rgb(0,122,255)] px-6 py-3 text-sm font-semibold text-white shadow-[0_20px_40px_rgba(0,122,255,0.35)] transition hover:bg-[rgb(0,100,210)] disabled:opacity-60",children:[l.jsx(J$,{className:"h-4 w-4"}),l.jsx("span",{children:"Send"})]})]})})]})]})}const XZ={blue:"from-blue-50 to-blue-100 text-blue-900",green:"from-emerald-50 to-emerald-100 text-emerald-900",indigo:"from-indigo-50 to-indigo-100 text-indigo-900",orange:"from-orange-50 to-orange-100 text-orange-900",purple:"from-purple-50 to-purple-100 text-purple-900",teal:"from-teal-50 to-teal-100 text-teal-900"};function Xs({label:e,value:t,accent:r}){return l.jsxs("div",{className:`rounded-2xl bg-gradient-to-br ${XZ[r]} px-4 py-3`,children:[l.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-500",children:e}),l.jsx("div",{className:"text-xl font-semibold text-gray-900",children:t})]})}function JZ({status:e,onEdit:t,onDelete:r}){const{attributes:n,listeners:a,setNodeRef:i,transform:s,transition:o,isDragging:c}=Fh({id:e.id}),u={transform:Xn.Transform.toString(s),transition:o,opacity:c?.5:1},d=Uh(e.color);return l.jsxs("div",{ref:i,style:u,className:"bg-white border border-gray-200/60 rounded-xl p-4 flex items-center gap-4 hover:shadow-sm hover:border-gray-300 transition-all",children:[l.jsx("div",{...n,...a,className:"cursor-grab active:cursor-grabbing",children:l.jsx(E0,{className:"w-5 h-5 text-gray-400"})}),l.jsxs("div",{className:"flex-1 flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-4 h-4 rounded-full shadow-sm",style:{backgroundColor:d.bg}}),l.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.name})]}),l.jsxs("span",{className:"text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded-lg",children:["Order: ",e.sort_order]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>t(e),className:"p-2 text-gray-600 hover:text-[rgb(0,122,255)] hover:bg-blue-50 rounded-lg transition",title:"Edit status",children:l.jsx($C,{className:"w-4 h-4",strokeWidth:2})}),l.jsx("button",{onClick:()=>r(e.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete status",children:l.jsx(Ai,{className:"w-4 h-4",strokeWidth:2})})]})]})}function QZ({status:e,onPersonalize:t,onResetOverride:r,hasPersonalOverride:n}){const a=Uh(e.color);return l.jsxs("div",{className:"bg-white border border-gray-200/60 rounded-xl p-4 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:a.bg}}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.name}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Order ",e.sort_order]}),n&&l.jsx("p",{className:"text-[11px] font-semibold text-[rgb(0,122,255)]",children:"Personalized"})]})]}),t?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>t(e),className:"px-3 py-1.5 text-xs font-semibold text-[rgb(0,122,255)] hover:bg-blue-50 rounded-lg transition",children:"Personalize color"}),n&&r&&l.jsx("button",{onClick:()=>r(e.id),className:"px-3 py-1.5 text-xs font-semibold text-gray-500 hover:bg-gray-100 rounded-lg transition",children:"Reset"})]}):l.jsx("span",{className:"text-[11px] uppercase tracking-wide text-gray-400",children:"View only"})]})}function ZZ({canEdit:e=!0}){const{statuses:t,loading:r,addStatus:n,updateStatus:a,deleteStatus:i,reorderStatuses:s,applyTemplate:o,createCustomWorkflow:c,colorOverrides:u,setPersonalStatusColor:d,clearPersonalStatusColor:f}=ZD(),[h,m]=p.useState(!1),[g,y]=p.useState(!1),[v,x]=p.useState(null),[w,b]=p.useState(""),[_,j]=p.useState(eo),[S,N]=p.useState(null),[k,C]=p.useState(!1),[E,P]=p.useState(null),[A,H]=p.useState(null),J=Th(Ah(nl,{activationConstraint:{distance:8}})),ee=async O=>{const{active:V,over:te}=O;if(!te||V.id===te.id)return;const M=t.findIndex(Z=>Z.id===V.id),X=t.findIndex(Z=>Z.id===te.id),T=[...t],[z]=T.splice(M,1);T.splice(X,0,z);try{await s(T)}catch(Z){console.error("Error reordering:",Z),N("Failed to reorder statuses")}},B=async()=>{if(!w.trim()){N("Status name is required");return}C(!0),N(null);try{v?await a(v.id,{name:w.trim(),color:_}):await n(w.trim(),_),K()}catch(O){console.error("Error saving status:",O),N(O instanceof Error?O.message:"Failed to save status")}finally{C(!1)}},K=()=>{y(!1),x(null),b(""),j(eo),N(null)},D=async O=>{if(confirm("Are you sure you want to delete this status? This action cannot be undone."))try{await i(O)}catch(V){console.error("Error deleting status:",V),N(V instanceof Error?V.message:"Failed to delete status")}},R=O=>{x(O),b(O.name),j(Bh(O.color)||eo),y(!0)},F=async O=>{try{await o(O)}catch(V){throw console.error("Error applying template:",V),V}},le=O=>{P(O),H(O.color||eo)},re=()=>{!E||!A||(d(E.id,A),P(null))},Ne=O=>{if(!E&&!O)return;const V=O||(E==null?void 0:E.id);V&&(f(V),O||P(null))};return r?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx(Rt,{className:"w-8 h-8 animate-spin text-[rgb(0,122,255)]"})}):l.jsxs("div",{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Pipeline Statuses"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Customize your pipeline stages, colors, and workflow order"}),!e&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Viewing workspace stages from your workspace. You can personalize colors without changing the shared setup."})]}),S&&l.jsxs("div",{className:"mb-4 flex items-center gap-3 p-4 rounded-xl bg-red-50 text-red-700 border border-red-200/60",children:[l.jsx(La,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:S})]}),e&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-6",children:[l.jsxs("button",{onClick:()=>{b(""),j(eo),y(!0)},className:"hig-btn-primary",children:[l.jsx(Ba,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Add Status"})]}),l.jsxs("button",{onClick:()=>m(!0),className:"hig-btn-secondary",children:[l.jsx(X$,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Load Template"})]})]}),h&&l.jsx(eI,{onClose:()=>m(!1),onSelect:F,onCreateCustomWorkflow:c})]}),t.length===0?l.jsxs("div",{className:"bg-gray-50 rounded-xl p-12 text-center border border-gray-200/60",children:[l.jsx("p",{className:"text-gray-600 mb-4",children:"No pipeline stages configured"}),e?l.jsx("button",{onClick:()=>m(!0),className:"hig-btn-primary",children:"Load a Template to Get Started"}):l.jsx("p",{className:"text-sm text-gray-500",children:"Ask an admin to configure stages for this workspace."})]}):e?l.jsx(Rh,{sensors:J,collisionDetection:T0,onDragEnd:ee,children:l.jsx(Lh,{items:t.map(O=>O.id),strategy:mE,children:l.jsx("div",{className:"space-y-3",children:t.map(O=>l.jsx(JZ,{status:O,onEdit:R,onDelete:D},O.id))})})}):l.jsx("div",{className:"space-y-3",children:t.map(O=>l.jsx(QZ,{status:O,hasPersonalOverride:!!u[O.id],onPersonalize:e?void 0:le,onResetOverride:e?void 0:()=>Ne(O.id)},O.id))}),e&&g&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[l.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200/60",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:v?"Edit Status":"Add New Status"}),l.jsx("button",{onClick:K,className:"text-gray-400 hover:text-gray-600 transition p-2 hover:bg-gray-100 rounded-lg",children:l.jsx(Ss,{className:"w-5 h-5",strokeWidth:2})})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Status Name"}),l.jsx("input",{type:"text",value:w,onChange:O=>b(O.target.value),className:"hig-input",placeholder:"e.g., Inspection, Appraisal",autoFocus:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:"Color"}),l.jsx(RS,{value:_,onChange:j})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200/60 bg-gray-50/50",children:[l.jsx("button",{onClick:K,className:"hig-btn-secondary",children:"Cancel"}),l.jsx("button",{onClick:B,disabled:k||!w.trim(),className:"hig-btn-primary",children:k?l.jsxs(l.Fragment,{children:[l.jsx(Rt,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving..."})]}):l.jsxs("span",{children:[v?"Update":"Add"," Status"]})})]})]})}),!e&&E&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[l.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200/60",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:['Personalize "',E.name,'"']}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Changes apply only to your view. Workspace defaults stay intact."})]}),l.jsx("button",{onClick:()=>P(null),className:"text-gray-400 hover:text-gray-600 transition p-2 hover:bg-gray-100 rounded-lg",children:l.jsx(Ss,{className:"w-5 h-5",strokeWidth:2})})]}),l.jsx("div",{className:"p-6 space-y-6",children:l.jsx(RS,{value:A,onChange:H})}),l.jsxs("div",{className:"flex justify-between items-center gap-3 p-6 border-t border-gray-200/60 bg-gray-50/50",children:[l.jsx("button",{onClick:()=>Ne(),className:"text-sm font-semibold text-gray-600 hover:text-gray-800 hover:bg-gray-100 px-3 py-2 rounded-lg transition",children:"Use workspace default"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>P(null),className:"hig-btn-secondary",children:"Cancel"}),l.jsx("button",{onClick:re,className:"hig-btn-primary",children:"Save for me"})]})]})]})})]})}const Js=()=>({name:"",brokerage_split_rate:20,payout_structure:"standard",partnership_split_rate:35,partnership_notes:""});function eee({canEdit:e=!0}){const{user:t,roleInfo:r}=At(),n=(r==null?void 0:r.teamId)||null,[a,i]=p.useState([]),[s,o]=p.useState(!0),[c,u]=p.useState(!1),[d,f]=p.useState(!1),[h,m]=p.useState(null),[g,y]=p.useState(null),[v,x]=p.useState(Js()),[w,b]=p.useState(null),[_,j]=p.useState("all"),[S,N]=p.useState("");p.useEffect(()=>{k()},[t==null?void 0:t.id,n]);const k=async()=>{if(t){o(!0);try{const{data:D,error:R}=n?await G.from("lead_sources").select("*").eq("team_id",n).order("sort_order",{ascending:!0,nullsLast:!0}).order("name",{ascending:!0}):{data:null,error:null};if(R)throw R;const F=!!(D!=null&&D.length),{data:le,error:re}=F?{data:D,error:null}:await G.from("lead_sources").select("*").eq("user_id",t.id).order("sort_order",{ascending:!0,nullsLast:!0}).order("name",{ascending:!0});if(re)throw re;if(!le){i([]),o(!1);return}const Ne=[...le].sort((V,te)=>V.sort_order===te.sort_order?V.name.localeCompare(te.name):(V.sort_order??0)-(te.sort_order??0));if(Ne.some((V,te)=>V.sort_order!==te+1)){const V=Ne.map((te,M)=>({...te,sort_order:M+1}));i(V),await Promise.all(V.map((te,M)=>G.from("lead_sources").update({sort_order:M+1}).eq("id",te.id)))}else i(Ne)}catch(D){console.error("Error loading lead sources:",D),b(D instanceof Error?D.message:"Failed to load lead sources")}finally{o(!1)}}},C=async D=>{if(D.preventDefault(),!e||!t||!v.name.trim()){b("Lead source name is required");return}if(!(r!=null&&r.workspaceId)){b("Workspace is required to add a lead source.");return}u(!0),b(null);try{const R=parseFloat(v.brokerage_split_rate||""),F=Number.isNaN(R)?0:R,le=v.partnership_split_rate??0,re=Number.isNaN(le)?0:le,Ne={name:v.name,team_id:n,brokerage_split_rate:F/100,payout_structure:v.payout_structure,partnership_split_rate:v.payout_structure==="partnership"?re/100:null,partnership_notes:v.payout_structure==="partnership"&&v.partnership_notes.trim()||null,workspace_id:r.workspaceId};if(h){const{error:O}=await G.from("lead_sources").update(Ne).eq("id",h.id);if(O)throw O}else{const O=a.reduce((te,M)=>Math.max(te,M.sort_order??0),0),{error:V}=await G.from("lead_sources").insert({user_id:t.id,sort_order:O+1,...Ne});if(V)throw V}f(!1),x(Js()),m(null),k()}catch(R){console.error("Error saving lead source:",R),b(R instanceof Error?R.message:"Failed to save lead source")}finally{u(!1)}},E=D=>{e&&(m(D),x({name:D.name,brokerage_split_rate:D.brokerage_split_rate*100,payout_structure:D.payout_structure,partnership_split_rate:(D.partnership_split_rate??.35)*100,partnership_notes:D.partnership_notes||""}),f(!0),b(null))},P=async D=>{if(e&&confirm("Are you sure you want to delete this lead source? This action cannot be undone."))try{const{error:R}=await G.from("lead_sources").delete().eq("id",D);if(R)throw R;k()}catch(R){console.error("Error deleting lead source:",R),b(R instanceof Error?R.message:"Failed to delete lead source")}},A=[{value:"standard",title:"Standard Split",description:"Only your brokerage split applies."},{value:"partnership",title:"Partnership Program",description:"Pay the partner first, then split the remainder with your brokerage."}],H=[{value:"all",label:"All sources"},{value:"standard",label:"Standard"},{value:"partnership",label:"Partnership"}],J=Th(Ah(nl,{activationConstraint:{distance:3}})),ee=p.useMemo(()=>{const D=S.trim().toLowerCase();return a.filter(R=>{const F=_==="all"||R.payout_structure===_,le=!D||[R.name,R.partnership_notes||""].some(re=>re.toLowerCase().includes(D));return F&&le})},[a,S,_]),B=e&&_==="all"&&S.trim()==="",K=async D=>{if(y(null),!B)return;const{active:R,over:F}=D;if(!F||R.id===F.id)return;const le=a.findIndex(M=>M.id===R.id),re=a.findIndex(M=>M.id===F.id);if(le===-1||re===-1)return;const O=Mh(a,le,re).map((M,X)=>({...M,sort_order:X+1}));i(O);const V=new Map(a.map(M=>[M.id,M.sort_order])),te=O.filter(M=>M.sort_order!==V.get(M.id));try{te.length>0&&await Promise.all(te.map(M=>G.from("lead_sources").update({sort_order:M.sort_order}).eq("id",M.id)))}catch(M){console.error("Error reordering lead sources:",M),b("Unable to save lead source order. Please try again."),k()}};return s?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx(Rt,{className:"w-8 h-8 animate-spin text-[rgb(0,122,255)]"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"space-y-3",children:l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"hig-text-heading mb-1",children:"Lead Sources"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Track partner programs, portals, and referral channels."}),!e&&l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"You can review workspace lead sources. Only admins can make edits."})]}),e&&l.jsxs("button",{onClick:()=>{f(!0),m(null),x(Js()),b(null)},className:"hig-btn-primary self-start",children:[l.jsx(Ba,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Add Lead Source"})]})]})}),w&&l.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-red-200/70 bg-red-50 px-4 py-3 text-red-700",children:[l.jsx(La,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:w})]}),l.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{className:"relative w-full md:w-72",children:[l.jsx(P0,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",value:S,onChange:D=>N(D.target.value),placeholder:"Search lead sources",className:"w-full rounded-2xl border border-gray-200/70 bg-white/90 py-2 pl-9 pr-3 text-sm text-gray-900 shadow-inner focus:border-[var(--app-accent)]/50 focus:ring-2 focus:ring-[var(--app-accent)]/20"})]}),l.jsx("div",{className:"inline-flex flex-wrap gap-2 rounded-2xl border border-gray-200/70 bg-white/80 p-1.5 shadow-inner",children:H.map(D=>{const R=_===D.value;return l.jsx("button",{type:"button",onClick:()=>j(D.value),className:`rounded-xl px-3 py-1.5 text-sm font-medium transition ${R?"bg-gray-900 text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:D.label},D.value)})})]}),e&&l.jsx("p",{className:"text-xs text-gray-400",children:"Drag handles appear when viewing all sources without filters so you can reorder tiles."}),a.length===0?l.jsxs("div",{className:"rounded-2xl border border-dashed border-gray-300 bg-gray-50/80 p-10 text-center",children:[l.jsx(UC,{className:"mx-auto mb-4 h-10 w-10 text-gray-400",strokeWidth:1.5}),l.jsx("p",{className:"text-gray-600 mb-2 font-medium",children:"No lead sources configured"}),l.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Add your first lead source to start tracking where your deals originate."}),e?l.jsxs("button",{onClick:()=>{f(!0),m(null),x(Js()),b(null)},className:"hig-btn-primary",children:[l.jsx(Ba,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Add Lead Source"})]}):l.jsx("p",{className:"text-xs text-gray-500",children:"Ask a workspace admin to configure lead sources."})]}):ee.length===0?l.jsx("div",{className:"rounded-2xl border border-gray-200/70 bg-white/80 p-10 text-center text-sm text-gray-500",children:"No sources match your filters."}):l.jsxs(Rh,{sensors:J,collisionDetection:T0,onDragStart:D=>{const R=a.find(F=>F.id===D.active.id);y(R||null)},onDragEnd:K,onDragCancel:()=>y(null),children:[l.jsx(Lh,{items:ee.map(D=>D.id),strategy:$h,children:l.jsx("div",{className:"grid w-full gap-4",style:{gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))"},children:ee.map(D=>l.jsx(tee,{source:D,canEdit:e,disableDrag:!B,onEdit:()=>E(D),onDelete:()=>P(D.id)},D.id))})}),l.jsx(pE,{dropAnimation:{duration:200,easing:"ease"},children:g?l.jsx(ree,{source:g}):null})]}),e&&d&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[l.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200/60",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:h?"Edit Lead Source":"Add Lead Source"}),l.jsx("button",{onClick:()=>{f(!1),m(null),x(Js()),b(null)},className:"text-gray-400 hover:text-gray-600 transition p-2 hover:bg-gray-100 rounded-lg",children:l.jsx(Ss,{className:"w-5 h-5",strokeWidth:2})})]}),l.jsxs("form",{onSubmit:C,className:"p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Source Name"}),l.jsx("input",{type:"text",value:v.name,onChange:D=>x({...v,name:D.target.value}),className:"hig-input",placeholder:"e.g., Zillow, Past Client, Open House",required:!0,autoFocus:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:"Deal Structure"}),l.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:A.map(D=>{const R=v.payout_structure===D.value;return l.jsxs("button",{type:"button",onClick:()=>x({...v,payout_structure:D.value}),className:`text-left rounded-2xl border p-4 transition-all ${R?"border-[rgb(0,122,255)] bg-[rgb(0,122,255)]/5":"border-gray-200 hover:border-gray-300"}`,children:[l.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-1",children:D.title}),l.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:D.description})]},D.value)})}),l.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Choose partnership when working with platforms like Redfin or Zillow that take their fee before your team split."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Brokerage Split Rate"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",step:"0.5",value:v.brokerage_split_rate,onChange:D=>x({...v,brokerage_split_rate:Number.isNaN(parseFloat(D.target.value))?0:parseFloat(D.target.value)}),className:"hig-input pr-8",placeholder:"20",min:"0",max:"100"}),l.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]}),l.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Percentage of the remaining commission that goes to your brokerage/team."})]}),v.payout_structure==="partnership"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Partner Split Rate"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",step:"0.5",value:v.partnership_split_rate,onChange:D=>x({...v,partnership_split_rate:Number.isNaN(parseFloat(D.target.value))?0:parseFloat(D.target.value)}),className:"hig-input pr-8",placeholder:"35",min:"0",max:"100"}),l.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]}),l.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Portion of the gross commission that goes to the partner program before any brokerage split."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Partner Notes"}),l.jsx("textarea",{value:v.partnership_notes,onChange:D=>x({...v,partnership_notes:D.target.value}),className:"hig-input min-h-[88px]",placeholder:"e.g., Pay Redfin 35% within 5 days, then 50/50 split with brokerage"})]})]}),l.jsxs("div",{className:"rounded-2xl border border-gray-200/70 bg-gray-50/60 p-4",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-3",children:"Payout Preview"}),l.jsxs("ol",{className:"space-y-3 text-sm text-gray-800",children:[v.payout_structure==="partnership"&&l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"inline-flex w-7 h-7 items-center justify-center rounded-full bg-[rgb(0,122,255)]/10 text-[rgb(0,122,255)] text-xs font-semibold",children:"1"}),"Pay partner first (",v.partnership_split_rate||0,"% of gross commission)"]}),l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"inline-flex w-7 h-7 items-center justify-center rounded-full bg-[rgb(0,122,255)]/10 text-[rgb(0,122,255)] text-xs font-semibold",children:v.payout_structure==="partnership"?"2":"1"}),"Split the remaining commission with your brokerage (",v.brokerage_split_rate||0,"% to broker)"]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-2 border-t border-gray-200/60",children:[l.jsx("button",{type:"button",onClick:()=>{f(!1),m(null),x(Js()),b(null)},className:"hig-btn-secondary",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:c||!v.name.trim(),className:"hig-btn-primary",children:c?l.jsxs(l.Fragment,{children:[l.jsx(Rt,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving..."})]}):l.jsxs("span",{children:[h?"Update":"Add"," Source"]})})]})]})]})})]})}function tee({source:e,canEdit:t,disableDrag:r,onEdit:n,onDelete:a}){const{attributes:i,listeners:s,setNodeRef:o,transform:c,transition:u,isDragging:d}=Fh({id:e.id,disabled:r}),f={transform:Xn.Transform.toString(c),transition:u??"transform 200ms ease"},h=e.payout_structure==="partnership",m=`${(e.brokerage_split_rate*100).toFixed(1)}%`,g=h?`${((e.partnership_split_rate??0)*100).toFixed(1)}%`:null;return l.jsxs("div",{ref:o,style:f,className:`w-full rounded-[24px] border border-gray-200/80 bg-white/95 p-4 shadow-[0_14px_40px_rgba(15,23,42,0.08)] transition ${d?"ring-2 ring-[var(--app-accent)]/40 shadow-[0_20px_50px_rgba(15,23,42,0.15)]":"hover:border-gray-300/80 hover:shadow-[0_24px_60px_rgba(15,23,42,0.12)]"}`,children:[l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[t&&l.jsx("button",{type:"button",...i,...s,disabled:r,className:`rounded-full border border-gray-200/70 bg-white/80 p-2 text-gray-400 transition ${r?"cursor-not-allowed opacity-40":"cursor-grab hover:text-gray-700 active:cursor-grabbing"}`,"aria-label":"Drag to reorder lead source",children:l.jsx(E0,{className:"h-4 w-4"})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-1 text-[11px] font-semibold tracking-[0.35em] text-gray-500",children:[h?l.jsx(DC,{className:"h-3 w-3 text-[var(--app-accent)]",strokeWidth:2}):l.jsx(js,{className:"h-3 w-3 text-gray-500",strokeWidth:2}),l.jsx("span",{className:h?"text-[var(--app-accent)]":"",children:h?"PARTNERSHIP":"STANDARD"})]}),l.jsx("h3",{className:"mt-1 text-base font-semibold text-gray-900",children:e.name})]})]}),t?l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:n,className:"rounded-xl p-1.5 text-gray-600 transition hover:bg-blue-50 hover:text-[var(--app-accent)]",title:"Edit lead source",children:l.jsx($C,{className:"h-4 w-4",strokeWidth:2})}),l.jsx("button",{onClick:a,className:"rounded-xl p-1.5 text-gray-600 transition hover:bg-red-50 hover:text-red-600",title:"Delete lead source",children:l.jsx(Ai,{className:"h-4 w-4",strokeWidth:2})})]}):l.jsx("span",{className:"text-[11px] uppercase tracking-[0.35em] text-gray-400",children:"View only"})]}),l.jsxs("div",{className:"mt-4 rounded-[20px] border border-gray-100 bg-gray-50/80 px-3 py-3 text-sm",children:[h&&g&&l.jsxs("div",{className:"mb-2 flex items-center justify-between text-gray-600",children:[l.jsx("span",{children:"Partner share"}),l.jsx("span",{className:"font-semibold text-gray-900",children:g})]}),l.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[l.jsx("span",{children:"Broker split"}),l.jsx("span",{className:"font-semibold text-gray-900",children:m})]})]}),e.partnership_notes&&l.jsx("p",{className:"mt-3 rounded-[18px] border border-gray-100 bg-white/80 px-3 py-2 text-[12px] text-gray-600 shadow-inner line-clamp-2",children:e.partnership_notes})]})}function ree({source:e}){const t=e.payout_structure==="partnership",r=`${(e.brokerage_split_rate*100).toFixed(1)}%`,n=t?`${((e.partnership_split_rate??0)*100).toFixed(1)}%`:null;return l.jsxs("div",{className:"w-full rounded-[24px] border border-gray-200/80 bg-white/95 p-4 shadow-[0_18px_40px_rgba(15,23,42,0.15)]",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[11px] font-semibold tracking-[0.35em] text-gray-500",children:[t?l.jsx(DC,{className:"h-3.5 w-3.5 text-[var(--app-accent)]",strokeWidth:2}):l.jsx(js,{className:"h-3.5 w-3.5 text-gray-500",strokeWidth:2}),l.jsx("span",{className:t?"text-[var(--app-accent)]":"",children:t?"PARTNERSHIP":"STANDARD"})]}),l.jsx("h3",{className:"mt-2 text-base font-semibold text-gray-900",children:e.name}),l.jsxs("div",{className:"mt-4 rounded-[20px] border border-gray-100 bg-gray-50/80 px-3 py-3 text-sm",children:[t&&n&&l.jsxs("div",{className:"mb-2 flex items-center justify-between text-gray-600",children:[l.jsx("span",{children:"Partner share"}),l.jsx("span",{className:"font-semibold text-gray-900",children:n})]}),l.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[l.jsx("span",{children:"Broker split"}),l.jsx("span",{className:"font-semibold text-gray-900",children:r})]})]})]})}function tI(){const{roleInfo:e}=At(),t=(e==null?void 0:e.workspaceId)||null,[r,n]=p.useState(null),[a,i]=p.useState(!0),[s,o]=p.useState(null),c=p.useCallback(async()=>{if(!t){n(null),i(!1);return}i(!0),o(null);const{data:d,error:f}=await G.from("workspace_settings").select("*").eq("id",t).maybeSingle();f?(console.error("Error loading workspace settings:",f),o("Unable to load workspace settings.")):n(d),i(!1)},[t]);return p.useEffect(()=>{c()},[c]),{workspace:r,loading:a,error:s,refresh:c,updateWorkspace:async d=>{if(!t)return{error:new Error("Workspace not found")};const{data:f,error:h}=await G.from("workspace_settings").update({...d,updated_at:new Date().toISOString()}).eq("id",t).select("*").maybeSingle();return h?(console.error("Error updating workspace settings:",h),{error:h}):(f&&n(f),{error:null})}}}function nee({canEdit:e}){const{workspace:t,loading:r,updateWorkspace:n}=tI(),[a,i]=p.useState({name:"",company_name:"",timezone:"America/Los_Angeles",locale:"en-US"}),[s,o]=p.useState(!1),[c,u]=p.useState(null);p.useEffect(()=>{t&&i({name:t.name||"",company_name:t.company_name||"",timezone:t.timezone||"America/Los_Angeles",locale:t.locale||"en-US"})},[t]);const d=async f=>{if(f.preventDefault(),!e)return;o(!0),u(null);const{error:h}=await n(a);u(h?{type:"error",text:"Unable to update workspace info."}:{type:"success",text:"Workspace updated."}),o(!1)};return r?l.jsx("div",{className:"flex items-center justify-center py-10",children:l.jsx(Rt,{className:"w-6 h-6 animate-spin text-[var(--app-accent)]"})}):l.jsxs("div",{className:"max-w-2xl",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Company Info"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Company identity, locale, and defaults shared with your agents and teams."}),!e&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Workspace details are managed by admins. You can view but not edit."})]}),l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Company Name"}),l.jsx("input",{type:"text",value:a.name,onChange:f=>i(h=>({...h,name:f.target.value})),className:"hig-input",disabled:!e,placeholder:"Luminex Realty Group"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Timezone"}),l.jsxs("select",{value:a.timezone,onChange:f=>i(h=>({...h,timezone:f.target.value})),className:"hig-input",disabled:!e,children:[l.jsx("option",{value:"America/Los_Angeles",children:"Pacific (PT)"}),l.jsx("option",{value:"America/Denver",children:"Mountain (MT)"}),l.jsx("option",{value:"America/Chicago",children:"Central (CT)"}),l.jsx("option",{value:"America/New_York",children:"Eastern (ET)"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Locale"}),l.jsxs("select",{value:a.locale,onChange:f=>i(h=>({...h,locale:f.target.value})),className:"hig-input",disabled:!e,children:[l.jsx("option",{value:"en-US",children:"English (US)"}),l.jsx("option",{value:"en-CA",children:"English (Canada)"}),l.jsx("option",{value:"es-US",children:"Espaol"})]})]})]}),c&&l.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${c.type==="error"?"bg-red-50 text-red-700 border-red-200/60":"bg-green-50 text-green-700 border-green-200/60"}`,children:[c.type==="error"?l.jsx(La,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}):l.jsx(Fa,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:c.text})]}),e&&l.jsx("button",{type:"submit",className:"hig-btn-primary",disabled:s,children:s?l.jsxs(l.Fragment,{children:[l.jsx(Rt,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving"})]}):l.jsxs(l.Fragment,{children:[l.jsx(kh,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Save Workspace"})]})})]})]})}const FS={crm:{provider:"Follow Up Boss",description:"Sync contacts + deals bi-directionally.",status:"not_connected"},email:{provider:"Google Workspace",description:"Log emails to deals and trigger automations.",status:"not_connected"},marketing:{provider:"Zapier",description:"Push new leads into PipelineIQ automatically.",status:"not_connected"}};function aee({canEdit:e}){const{workspace:t,updateWorkspace:r}=tI(),[n,a]=p.useState(FS),[i,s]=p.useState(null);p.useEffect(()=>{if(t!=null&&t.integration_settings){const c=t.integration_settings;a({...FS,...c})}},[t==null?void 0:t.integration_settings]);const o=async c=>{if(!e)return;s(c);const u=n[c].status==="connected"?"not_connected":"connected",d={...n,[c]:{...n[c],status:u,lastSync:u==="connected"?new Date().toISOString():void 0}};a(d),await r({integration_settings:d}),s(null)};return l.jsxs("div",{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Integrations"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Connect your CRM, email, and marketing tools so deals stay in sync."}),!e&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only workspace admins can manage integrations."})]}),l.jsx("div",{className:"space-y-4",children:Object.entries(n).map(([c,u])=>l.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-gray-200/70 bg-white/80 px-4 py-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:u.provider}),l.jsx("p",{className:"text-xs text-gray-500",children:u.description}),u.lastSync&&l.jsxs("p",{className:"text-[11px] text-gray-400 mt-1",children:["Last sync ",new Date(u.lastSync).toLocaleString()]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:`text-xs font-semibold ${u.status==="connected"?"text-emerald-600":"text-gray-500"}`,children:u.status==="connected"?"Connected":"Not connected"}),l.jsx("button",{type:"button",onClick:()=>o(c),disabled:!e||i===c,className:`rounded-full border px-4 py-2 text-sm font-semibold transition ${u.status==="connected"?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-gray-50 text-gray-600 border-gray-200"} ${e?"":"opacity-50 cursor-not-allowed"}`,children:u.status==="connected"?l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(Z$,{className:"w-4 h-4"}),"Disconnect"]}):l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(Q$,{className:"w-4 h-4"}),"Connect"]})})]})]},c))})]})}const iee=[{title:"Deal Templates",description:"Define repeatable sets of tasks, stages, and documents for each pipeline type."},{title:"Custom Fields",description:"Capture additional data points (loan type, co-borrower, transaction coordinator) across every deal."},{title:"Default Views",description:"Control which boards, filters, and metrics new team members inherit on first login."}];function see({canEdit:e}){return l.jsxs("div",{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Shared Configuration"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Templates, custom fields, and default views that keep your workspace aligned."}),!e&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ask an admin to adjust shared templates or defaults for the workspace."})]}),l.jsx("div",{className:"space-y-4",children:iee.map(t=>l.jsx("div",{className:"rounded-2xl border border-gray-200/70 bg-white px-4 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:t.title}),l.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),l.jsx("button",{type:"button",className:`px-4 py-2 rounded-2xl border text-sm font-medium ${e?"border-gray-200 text-gray-700 hover:bg-gray-50":"border-gray-100 text-gray-400 cursor-not-allowed"}`,disabled:!e,children:e?"Configure":"View only"})]})},t.title))})]})}function oee(e){const[t,r]=p.useState([]),[n,a]=p.useState(!1),[i,s]=p.useState(null),o=p.useCallback(async()=>{if(!e)return;a(!0),s(null);const{data:u,error:d}=await G.rpc("get_workspace_members",{p_workspace_id:e});d?(s(d.message),r([])):r(u||[]),a(!1)},[e]);p.useEffect(()=>{o()},[o]);const c=p.useCallback(async(u,d,f)=>{const{error:h}=await G.rpc("manage_workspace_member",{target_user:u,action:d,new_role:f??null});return h||await o(),{error:h}},[o]);return{members:t,loading:n,error:i,refresh:o,changeRole:(u,d)=>c(u,"update_role",d),deactivate:u=>c(u,"deactivate"),reactivate:u=>c(u,"reactivate"),remove:u=>c(u,"delete"),updateTeam:async(u,d)=>{if(!d)return{error:new Error("Team is required")};const{error:f}=await G.from("user_teams").delete().eq("user_id",u);if(f)return{error:f};const{error:h}=await G.from("user_teams").upsert({user_id:u,team_id:d,role:"agent"});return h?{error:h}:(await o(),{error:null})}}}function xb(e){const[t,r]=p.useState([]),[n,a]=p.useState(!1),i=p.useCallback(async()=>{if(!e)return;a(!0);const{data:o,error:c}=await G.rpc("get_workspace_teams",{p_workspace_id:e});r(c?[]:o||[]),a(!1)},[e]);p.useEffect(()=>{i()},[i]);const s=p.useCallback(async(o,c)=>{if(!e)return{error:new Error("Workspace is required")};const u=o.trim();if(!u)return{error:new Error("Team name is required")};const{data:d,error:f}=await G.from("teams").insert({name:u}).select("id, name").single();if(f||!d)return{error:f};if(c){const{error:h}=await G.from("user_teams").upsert({user_id:c,team_id:d.id,role:"team_lead"});if(h)return{error:h}}return await i(),{error:null}},[e,i]);return{teams:t,loading:n,refresh:i,createTeam:s}}const lee=["admin","sales_manager","team_lead","agent"];function cee(){const{roleInfo:e,user:t}=At(),r=(e==null?void 0:e.workspaceId)||null,n=CC(e),[a,i]=p.useState(null),{members:s,loading:o,error:c,changeRole:u,deactivate:d,reactivate:f,remove:h,updateTeam:m}=oee(r),{teams:g,loading:y}=xb(r),[v,x]=p.useState(null),w=p.useMemo(()=>s.filter(k=>k.global_role==="admin"&&k.is_active).length,[s]),b=async(k,C)=>{i(k+C),await u(k,C),i(null)},_=async k=>{i(`deactivate-${k}`),await d(k),i(null)},j=async k=>{i(`reactivate-${k}`),await f(k),i(null)},S=async(k,C)=>{confirm(`Delete ${C||"this user"}? This removes their account and access. This cannot be undone.`)&&(i(`delete-${k}`),await h(k),i(null))},N=async(k,C)=>{i(`team-${k}`);const{error:E}=await m(k,C);x((E==null?void 0:E.message)??null),i(null)};return!r||!n?l.jsx("div",{className:"text-sm text-gray-600",children:"Workspace member management is limited to administrators. Contact an admin if you need to add or update teammates."}):o?l.jsx("div",{className:"flex items-center justify-center py-10 text-gray-500",children:l.jsx(Rt,{className:"h-5 w-5 animate-spin"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Workspace Members"}),l.jsxs("p",{className:"text-sm text-gray-500",children:["View and manage everyone in your workspace. You currently have ",w," admin",w===1?"":"s","."]}),c&&l.jsx("div",{className:"mt-3 rounded-xl border border-red-200/70 bg-red-50 px-3 py-2 text-sm text-red-600",children:c}),v&&!c&&l.jsx("div",{className:"mt-3 rounded-xl border border-red-200/70 bg-red-50 px-3 py-2 text-sm text-red-600",children:v}),!c&&y&&l.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 rounded-xl border border-gray-200/70 bg-white px-3 py-1 text-xs text-gray-600",children:[l.jsx(Rt,{className:"h-3.5 w-3.5 animate-spin"}),"Loading teams"]})]}),l.jsx("div",{className:"overflow-hidden rounded-2xl border border-gray-200/70",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[l.jsx("thead",{className:"bg-gray-50/60",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-[0.25em] text-gray-500",children:"Member"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-[0.25em] text-gray-500",children:"Role"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-[0.25em] text-gray-500",children:"Team"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-[0.25em] text-gray-500",children:"Status"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-[0.25em] text-gray-500",children:"Last active"}),l.jsx("th",{className:"px-4 py-3"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100 bg-white/80",children:s.map(k=>{var J;const C=k.user_id===(t==null?void 0:t.id),E=k.is_active,P=a!==null,A=P&&((a==null?void 0:a.includes(k.user_id))??!1),H=P&&!A;return l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-4",children:l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-sm font-semibold text-gray-900",children:k.full_name||k.email||"Member"}),l.jsx("span",{className:"text-xs text-gray-500",children:k.email})]})}),l.jsxs("td",{className:"px-4 py-4",children:[l.jsx("select",{className:"hig-input text-sm",value:k.global_role,disabled:!E||H||C,onChange:ee=>b(k.user_id,ee.target.value),children:lee.map(ee=>l.jsx("option",{value:ee,children:Oi(ee)},ee))}),C&&l.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"You cant change your own role from this screen."})]}),l.jsx("td",{className:"px-4 py-4",children:l.jsx("select",{className:"hig-input text-sm",value:k.team_id||((J=g[0])==null?void 0:J.team_id)||"",disabled:!E||H||y||g.length===0,onChange:ee=>N(k.user_id,ee.target.value),children:g.map(ee=>l.jsx("option",{value:ee.team_id,children:ee.name},ee.team_id))})}),l.jsx("td",{className:"px-4 py-4",children:l.jsx("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${E?"bg-emerald-50 text-emerald-700 border border-emerald-200/70":"bg-gray-100 text-gray-500 border border-gray-200"}`,children:E?"Active":"Inactive"})}),l.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:k.last_sign_in_at?new Date(k.last_sign_in_at).toLocaleDateString():""}),l.jsxs("td",{className:"px-4 py-4 text-right space-x-2",children:[E?l.jsxs("button",{onClick:()=>_(k.user_id),disabled:H||C,className:"inline-flex items-center gap-2 rounded-2xl border border-red-200/70 bg-red-50 px-3 py-1.5 text-sm font-semibold text-red-600 hover:bg-red-100 disabled:opacity-50",children:[l.jsx(Y$,{className:"h-4 w-4"}),"Deactivate"]}):l.jsxs("button",{onClick:()=>j(k.user_id),disabled:H,className:"inline-flex items-center gap-2 rounded-2xl border border-blue-200/70 bg-blue-50 px-3 py-1.5 text-sm font-semibold text-blue-600 hover:bg-blue-100 disabled:opacity-50",children:[l.jsx(LC,{className:"h-4 w-4"}),"Reactivate"]}),!C&&l.jsxs("button",{onClick:()=>S(k.user_id,k.email),disabled:H,className:"inline-flex items-center gap-2 rounded-2xl border border-gray-200/70 bg-white px-3 py-1.5 text-sm font-semibold text-gray-700 hover:bg-red-50 hover:border-red-200/70 hover:text-red-700 disabled:opacity-50",title:"Delete user",children:[l.jsx(Ai,{className:"h-4 w-4"}),"Delete"]})]})]},k.user_id)})})]})})]})}function uee(e){const[t,r]=p.useState([]),[n,a]=p.useState(!1),[i,s]=p.useState(null),o=async h=>{try{const{error:m}=await G.functions.invoke("send-invite-email",{body:{inviteId:h,origin:typeof window<"u"?window.location.origin:void 0}});m&&console.error("Invite email dispatch failed",m)}catch(m){console.error("Invite email dispatch failed",m)}},c=p.useCallback(async()=>{if(!e)return;a(!0),s(null);const{data:h,error:m}=await G.from("workspace_invitations").select("*").eq("workspace_id",e).eq("status","pending").order("created_at",{ascending:!1});m?(s(m.message),r([])):r(h||[]),a(!1)},[e]);p.useEffect(()=>{c()},[c]),p.useEffect(()=>{if(!e)return;const h=G.channel(`workspace-invitations-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"workspace_invitations",filter:`workspace_id=eq.${e}`},()=>{c()}).subscribe();return()=>{G.removeChannel(h)}},[e,c]);const u=p.useCallback(async({email:h,intendedRole:m,teamId:g})=>{if(!e)return{error:new Error("Workspace is required")};if(!g)return{error:new Error("Team is required for invites")};const{data:y,error:v}=await G.from("workspace_invitations").insert({email:h,intended_role:m,workspace_id:e,team_id:g??null}).select("*").single();return!v&&y&&(await o(y.id),await c()),{error:v}},[e,c]),d=p.useCallback(async h=>{const{error:m}=await G.from("workspace_invitations").update({status:"canceled"}).eq("id",h);return m||await c(),{error:m}},[c]),f=p.useCallback(async h=>{const{data:m,error:g}=await G.from("workspace_invitations").update({status:"pending",expires_at:new Date(Date.now()+12096e5).toISOString()}).eq("id",h).select("*").single();return!g&&m&&(await o(m.id),await c()),{error:g}},[c]);return{invites:t,loading:n,error:i,refresh:c,createInvite:u,cancelInvite:d,resendInvite:f}}const BS=[{value:"admin",label:"Admin"},{value:"sales_manager",label:"Sales Manager"},{value:"team_lead",label:"Team Lead"},{value:"agent",label:"Agent"}];function dee(){var P;const{roleInfo:e}=At(),t=(e==null?void 0:e.workspaceId)||null,r=kC(e),n=S$(e),{invites:a,loading:i,createInvite:s,resendInvite:o,cancelInvite:c}=uee(t),{teams:u}=xb(t),[d,f]=p.useState(""),[h,m]=p.useState("agent"),[g,y]=p.useState((e==null?void 0:e.teamId)||null),[v,x]=p.useState(!1),[w,b]=p.useState(null),[_,j]=p.useState(null),S=(P=u.find(A=>A.team_id===(e==null?void 0:e.teamId)))==null?void 0:P.name,N=n?BS:BS.filter(A=>A.value==="agent");p.useEffect(()=>{n||m("agent")},[n]),p.useEffect(()=>{!g&&u.length>0&&y(u[0].team_id)},[u,g]);const k=A=>`${window.location.origin}/invite/${A}`,C=async A=>{if(A.preventDefault(),!d)return;if(!t){b({type:"error",text:"Workspace is required before sending invites. Please refresh or contact an admin."});return}if(!g){b({type:"error",text:"A team is required so pipeline statuses and lead sources stay in sync. Create a team first if none exist."});return}x(!0),b(null);const{error:H}=await s({email:d.trim().toLowerCase(),intendedRole:h,teamId:g});if(x(!1),H){b({type:"error",text:H.message||"Unable to send invite. Please try again."});return}f(""),b({type:"success",text:`Invitation sent to ${d.trim().toLowerCase()}. Share the link or let them check their inbox.`})};if(p.useEffect(()=>{e!=null&&e.teamId&&y(e.teamId)},[e==null?void 0:e.teamId]),!r)return l.jsx("div",{className:"text-sm text-gray-600",children:"Only admins, sales managers, or team leads can invite new members. Contact an admin if you need to add someone to your workspace."});const E=a.filter(A=>A.status==="pending");return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Invitations"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Invite teammates by email and manage pending invitations. Links stay valid for 14 days."})]}),l.jsxs("form",{onSubmit:C,className:"rounded-2xl border border-gray-200/70 bg-white/80 p-5 space-y-4",children:[w&&l.jsx("div",{className:`flex items-center gap-2 rounded-2xl border px-3 py-2 text-sm ${w.type==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-red-200 bg-red-50 text-red-700"}`,children:w.text}),l.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Email"}),l.jsx("input",{type:"email",required:!0,className:"hig-input",placeholder:"newagent@example.com",value:d,onChange:A=>f(A.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Role"}),l.jsx("select",{className:"hig-input",value:h,onChange:A=>m(A.target.value),children:N.map(A=>l.jsx("option",{value:A.value,children:A.label},A.value))})]})]}),l.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Team *"}),(e==null?void 0:e.globalRole)==="agent"||!n&&(e!=null&&e.teamId)?l.jsx("input",{type:"text",className:"hig-input bg-gray-50",value:S||"Assigned automatically",readOnly:!0}):u.length===0?l.jsx("input",{type:"text",className:"hig-input bg-gray-50",value:"Create a team first to send invites",readOnly:!0}):l.jsx("select",{className:"hig-input",value:g||"",onChange:A=>y(A.target.value||null),children:u.map(A=>l.jsx("option",{value:A.team_id,children:A.name},A.team_id))})]})}),l.jsx("button",{type:"submit",disabled:v||!g,className:"hig-btn-primary inline-flex items-center gap-2",children:v?l.jsxs(l.Fragment,{children:[l.jsx(Rt,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):l.jsxs(l.Fragment,{children:[l.jsx(W$,{className:"h-4 w-4"}),"Send invitation"]})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Pending invitations"}),i?l.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm",children:[l.jsx(Rt,{className:"h-4 w-4 animate-spin"}),"Loading invitations"]}):E.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No active invitations."}):l.jsx("div",{className:"space-y-4",children:E.map(A=>{const J=A.status==="pending"&&new Date(A.expires_at).getTime()<Date.now()?"expired":A.status;return l.jsxs("div",{className:"flex flex-col gap-3 rounded-2xl border border-gray-200/70 bg-white/80 p-4 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:A.email}),l.jsxs("p",{className:"text-xs text-gray-500",children:[Oi(A.intended_role),"  expires ",new Date(A.expires_at).toLocaleDateString()]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[A.status==="pending"&&l.jsx("button",{type:"button",onClick:async()=>{await navigator.clipboard.writeText(k(A.token)),j(A.id),setTimeout(()=>j(null),2e3)},className:`inline-flex items-center gap-2 rounded-2xl border px-3 py-1.5 text-xs font-semibold transition shadow-sm ${_===A.id?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-gray-200 text-gray-700 hover:border-emerald-200/80 hover:bg-emerald-50/60 hover:text-emerald-700 hover:shadow-md"}`,children:_===A.id?l.jsxs(l.Fragment,{children:[l.jsx(_c,{className:"h-3.5 w-3.5"}),"Copied"]}):l.jsxs(l.Fragment,{children:[l.jsx(B$,{className:"h-3.5 w-3.5"}),"Copy link"]})}),J==="pending"?l.jsxs("button",{type:"button",onClick:()=>o(A.id),className:"inline-flex items-center gap-2 rounded-2xl border border-blue-200/70 bg-blue-50 px-3 py-1.5 text-xs font-semibold text-blue-600 hover:bg-blue-100",children:[l.jsx(LC,{className:"h-3.5 w-3.5"}),"Resend"]}):l.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-3 py-1 text-xs font-semibold text-gray-600 capitalize",children:J}),A.status==="pending"&&l.jsxs("button",{type:"button",onClick:()=>c(A.id),className:"inline-flex items-center gap-2 rounded-2xl border border-red-200/70 bg-red-50 px-3 py-1.5 text-xs font-semibold text-red-600 hover:bg-red-100",children:[l.jsx(tL,{className:"h-3.5 w-3.5"}),"Cancel"]})]})]},A.id)})})]})]})}function fee(){const{roleInfo:e,user:t}=At(),r=(e==null?void 0:e.workspaceId)||null,n=NC(e),{teams:a,loading:i,createTeam:s}=xb(r),[o,c]=p.useState(""),[u,d]=p.useState(!1),[f,h]=p.useState(null),m=p.useMemo(()=>[...a].sort((y,v)=>y.name.localeCompare(v.name)),[a]),g=async y=>{var x;if(y.preventDefault(),!o.trim())return;d(!0),h(null);const{error:v}=await s(o,t==null?void 0:t.id);if(d(!1),v){const w=(x=v.message)==null?void 0:x.toLowerCase().includes("duplicate");h({type:"error",text:w?"A team with that name already exists.":v.message||"Unable to create team right now."});return}c(""),h({type:"success",text:"Team created. Assign members from the Members tab."})};return!r||!n?l.jsx("div",{className:"text-sm text-gray-600",children:"Only workspace admins can create teams. Ask an admin to set this up if you need a new team."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Teams"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Create lightweight teams to group agents and route invitations. You can add members after creating the team."})]}),l.jsxs("form",{onSubmit:g,className:"space-y-4 rounded-2xl border border-gray-200/70 bg-white/80 p-5",children:[l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-end sm:gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"hig-label",children:"Team name"}),l.jsx("input",{type:"text",className:"hig-input",placeholder:"Example: East Coast Team",value:o,onChange:y=>c(y.target.value),required:!0}),l.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Names must be unique across your workspace."})]}),l.jsx("button",{type:"submit",disabled:u,className:"hig-btn-primary inline-flex items-center justify-center gap-2 px-4",children:u?l.jsxs(l.Fragment,{children:[l.jsx(Rt,{className:"h-4 w-4 animate-spin"}),"Creating"]}):l.jsxs(l.Fragment,{children:[l.jsx(G$,{className:"h-4 w-4"}),"Create team"]})})]}),f&&l.jsx("div",{className:`flex items-center gap-2 rounded-2xl border px-3 py-2 text-sm ${f.type==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-red-200 bg-red-50 text-red-700"}`,children:f.text})]}),l.jsxs("div",{className:"rounded-2xl border border-gray-200/70 bg-white/80 p-5",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Existing teams"}),l.jsx("p",{className:"text-xs text-gray-500",children:i?"Loading teams":`${m.length||"No"} team${m.length===1?"":"s"}`})]}),i&&l.jsx(Rt,{className:"h-4 w-4 animate-spin text-gray-500"})]}),!i&&m.length===0&&l.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"No teams yet. Create one to get started."}),!i&&m.length>0&&l.jsx("div",{className:"mt-4 space-y-3",children:m.map(y=>l.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-gray-100/80 bg-white px-4 py-3 shadow-[inset_0_0_0_1px_rgba(255,255,255,0.6)]",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:y.name}),l.jsx("p",{className:"text-xs text-gray-500",children:"Assign members from the Members tab."})]}),l.jsx("span",{className:"inline-flex items-center rounded-full border border-gray-200 bg-gray-50 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.18em] text-gray-600",children:"Team"})]},y.team_id))})]})]})}const hee=[{id:"workspace.info",label:"Workspace Info",description:"Identity, locale, and defaults",icon:T$},{id:"workspace.pipeline-statuses",label:"Pipeline Statuses",description:"Shared stage definitions",icon:RC},{id:"workspace.lead-sources",label:"Lead Sources",description:"Partner & portal sources",icon:UC},{id:"workspace.integrations",label:"Integrations",description:"CRM & email connections",icon:V$},{id:"workspace.configuration",label:"Shared Configuration",description:"Templates & custom fields",icon:$$}];function pee(){const{user:e,roleInfo:t}=At(),r=Oi(t==null?void 0:t.globalRole),n=p_(t),a=p_(t)||j$(t)||_$(t),i=CC(t),s=kC(t),o=NC(t),[c,u]=p.useState("workspace.info"),d=p.useMemo(()=>{const h=[...hee];return o&&h.push({id:"workspace.teams",label:"Teams",description:"Create teams for routing",icon:M$}),i&&h.push({id:"workspace.members",label:"Members",description:"Roles, status, and access",icon:WC}),s&&h.push({id:"workspace.invites",label:"Invitations",description:"Pending & sent invites",icon:K$}),h},[i,s]),f=()=>{switch(c){case"workspace.info":return l.jsx(nee,{canEdit:n});case"workspace.pipeline-statuses":return l.jsx(ZZ,{canEdit:a});case"workspace.lead-sources":return l.jsx(eee,{canEdit:a});case"workspace.integrations":return l.jsx(aee,{canEdit:n});case"workspace.teams":return l.jsx(fee,{});case"workspace.members":return l.jsx(cee,{});case"workspace.invites":return l.jsx(dee,{});case"workspace.configuration":default:return l.jsx(see,{canEdit:n})}};return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"flex flex-col gap-4 rounded-[var(--app-radius)] border border-[var(--app-border)] bg-white/90 p-6 shadow-[0_15px_45px_rgba(15,23,42,0.08)]",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-2xl bg-gray-100",children:l.jsx(Ch,{className:"w-6 h-6 text-gray-700"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Workspace Settings"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Configuration shared across your entire workspace"})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-gray-200/70 bg-white px-3 py-1",children:[l.jsx("span",{className:"text-[10px] uppercase tracking-[0.4em] text-gray-400",children:"Role"}),l.jsx("span",{className:"font-semibold text-gray-900",children:r})]}),!n&&l.jsx("span",{className:"text-xs text-gray-500",children:"Workspace configuration is managed by admins. You have read-only access."})]})]}),l.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[l.jsx("aside",{className:"lg:w-72 space-y-6",children:l.jsxs("div",{children:[l.jsx("p",{className:"px-2 pb-2 text-[11px] font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Workspace"}),l.jsx("div",{className:"space-y-1",children:d.map(h=>{const m=h.icon,g=c===h.id;return l.jsx("button",{onClick:()=>u(h.id),className:`group w-full rounded-2xl border px-4 py-3 text-left transition-all duration-200 ${g?"border-[rgb(0,122,255)] bg-[rgba(0,122,255,0.06)] shadow-[inset_0_0_0_1px_rgba(0,122,255,0.2)]":"border-white/60 bg-white hover:-translate-y-[1px] hover:border-[rgba(0,122,255,0.25)] hover:bg-[rgba(0,122,255,0.04)] hover:shadow-[0_12px_30px_rgba(0,0,0,0.06)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[rgba(0,122,255,0.35)]"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:`rounded-2xl border p-2 ${g?"border-[rgba(0,122,255,0.3)] bg-white":"border-gray-100 bg-gray-50 group-hover:border-[rgba(0,122,255,0.2)] group-hover:bg-white"}`,children:l.jsx(m,{className:`w-4 h-4 ${g?"text-[rgb(0,122,255)]":"text-gray-500 group-hover:text-[rgb(0,122,255)]"}`})}),l.jsxs("div",{children:[l.jsx("p",{className:`text-sm font-semibold ${g?"text-[rgb(0,122,255)]":"text-gray-800"}`,children:h.label}),l.jsx("p",{className:"text-xs text-gray-500",children:h.description})]})]})},h.id)})})]})}),l.jsx("section",{className:"flex-1 hig-card p-6",children:f()})]})]})}function mee(){var f;const{user:e,roleInfo:t}=At(),[r,n]=p.useState(((f=e==null?void 0:e.user_metadata)==null?void 0:f.name)||""),[a,i]=p.useState(!1),[s,o]=p.useState(null),c=async h=>{if(h.preventDefault(),!e)return;i(!0),o(null);const{error:m}=await G.auth.updateUser({data:{...e.user_metadata,name:r.trim()||e.email}});o(m?{type:"error",text:m.message||"Unable to update profile."}:{type:"success",text:"Profile updated."}),i(!1)},u=(r||(e==null?void 0:e.email)||"PI").split(" ").map(h=>h.charAt(0).toUpperCase()).slice(0,2).join(""),d=Oi(t==null?void 0:t.globalRole);return l.jsxs("div",{className:"max-w-2xl",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Profile"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Manage your display name, login email, and view the role assigned by your workspace admin."})]}),l.jsxs("form",{onSubmit:c,className:"space-y-8",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"h-16 w-16 rounded-2xl bg-[var(--app-accent)] text-white flex items-center justify-center text-xl font-semibold",children:u}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Signed in as"}),l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e==null?void 0:e.email})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Full Name"}),l.jsx("input",{type:"text",value:r,onChange:h=>n(h.target.value),className:"hig-input",placeholder:"Jane Agent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Primary Email"}),l.jsx("input",{type:"email",value:(e==null?void 0:e.email)||"",disabled:!0,className:"hig-input bg-gray-50 text-gray-500"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Contact support to change your login email."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Role"}),l.jsxs("div",{className:"hig-input bg-gray-50 text-gray-700 flex items-center gap-2",children:[l.jsx("span",{className:"inline-flex rounded-full bg-gray-100 px-2 py-0.5 text-[11px] uppercase tracking-wide text-gray-500",children:d}),l.jsx("span",{className:"text-sm text-gray-600",children:"Workspace permissions are managed by your admin."})]})]})]}),s&&l.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${s.type==="error"?"bg-red-50 text-red-700 border-red-200/60":"bg-green-50 text-green-700 border-green-200/60"}`,children:[s.type==="error"?l.jsx(La,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}):l.jsx(Fa,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:s.text})]}),l.jsx("div",{className:"flex gap-3",children:l.jsx("button",{type:"submit",className:"hig-btn-primary",disabled:a,children:a?l.jsxs(l.Fragment,{children:[l.jsx(Rt,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving"})]}):l.jsxs(l.Fragment,{children:[l.jsx(kh,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Save Profile"})]})})})]})]})}function gee(){const[e,t]=p.useState({newPassword:"",confirmPassword:""}),[r,n]=p.useState(!1),[a,i]=p.useState(null),s=async o=>{if(o.preventDefault(),!e.newPassword||e.newPassword!==e.confirmPassword){i({type:"error",text:"Passwords must match."});return}n(!0),i(null);const{error:c}=await G.auth.updateUser({password:e.newPassword});c?i({type:"error",text:c.message||"Unable to update password."}):(i({type:"success",text:"Password updated successfully."}),t({newPassword:"",confirmPassword:""})),n(!1)};return l.jsxs("div",{className:"max-w-xl",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Password & Security"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Update your login password. Changes apply immediately across all PipelineIQ sessions."})]}),l.jsxs("form",{onSubmit:s,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"New Password"}),l.jsx("input",{type:"password",value:e.newPassword,onChange:o=>t(c=>({...c,newPassword:o.target.value})),className:"hig-input",minLength:8,required:!0}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use at least 8 characters including a number or symbol."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"hig-label",children:"Confirm Password"}),l.jsx("input",{type:"password",value:e.confirmPassword,onChange:o=>t(c=>({...c,confirmPassword:o.target.value})),className:"hig-input",required:!0})]}),a&&l.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${a.type==="error"?"bg-red-50 text-red-700 border-red-200/60":"bg-green-50 text-emerald-700 border-emerald-200/60"}`,children:[a.type==="error"?l.jsx(PC,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}):l.jsx(FC,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:a.text})]}),l.jsx("button",{type:"submit",className:"hig-btn-primary",disabled:r,children:r?l.jsxs(l.Fragment,{children:[l.jsx(Rt,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Updating"})]}):l.jsx("span",{children:"Update Password"})})]})]})}const vee=[{id:"new_lead",label:"New lead assigned"},{id:"stage_change",label:"Deal moved to a new stage"},{id:"reminders",label:"Task & follow-up reminders"},{id:"analytics",label:"Weekly pipeline summary"}],US={new_lead:!0,stage_change:!0,reminders:!0,analytics:!1};function yee(){var c;const{user:e}=At(),[t,r]=p.useState(US),[n,a]=p.useState(!1),[i,s]=p.useState(null);p.useEffect(()=>{var u;(u=e==null?void 0:e.user_metadata)!=null&&u.notifications&&r({...US,...e.user_metadata.notifications})},[(c=e==null?void 0:e.user_metadata)==null?void 0:c.notifications]);const o=async()=>{if(!e)return;a(!0),s(null);const{error:u}=await G.auth.updateUser({data:{...e.user_metadata,notifications:t}});s(u?{type:"error",text:u.message||"Unable to update notifications."}:{type:"success",text:"Notification preferences saved."}),a(!1)};return l.jsxs("div",{className:"max-w-2xl",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Notifications"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Choose which alerts to receive. These preferences only affect your PipelineIQ account."})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"space-y-4",children:vee.map(u=>l.jsxs("label",{className:"flex items-center justify-between rounded-2xl border border-gray-200/70 bg-white/90 px-4 py-3",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:u.label}),l.jsx("p",{className:"text-xs text-gray-500",children:"Delivered via email & in-app"})]}),l.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-[var(--app-accent)] focus:ring-[var(--app-accent)]",checked:t[u.id]??!1,onChange:d=>r(f=>({...f,[u.id]:d.target.checked}))})]},u.id))}),i&&l.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${i.type==="error"?"bg-red-50 text-red-700 border-red-200/60":"bg-green-50 text-green-700 border-green-200/60"}`,children:[i.type==="error"?l.jsx(La,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}):l.jsx(Fa,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:i.text})]}),l.jsx("button",{onClick:o,className:"hig-btn-primary",disabled:n,children:n?l.jsxs(l.Fragment,{children:[l.jsx(Rt,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving"})]}):l.jsxs(l.Fragment,{children:[l.jsx(kh,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Save Preferences"})]})})]})]})}function xee(){const{user:e}=At(),[t,r]=p.useState(!0),[n,a]=p.useState(!1),[i,s]=p.useState(null),[o,c]=p.useState({annual_gci_goal:0,default_tax_rate:25,default_brokerage_split_rate:20});p.useEffect(()=>{u()},[e]);const u=async()=>{if(!e)return;const{data:f}=await G.from("user_settings").select("*").eq("user_id",e.id).maybeSingle();f&&c({annual_gci_goal:f.annual_gci_goal,default_tax_rate:f.default_tax_rate*100,default_brokerage_split_rate:f.default_brokerage_split_rate*100}),r(!1)},d=async f=>{if(f.preventDefault(),!e)return;a(!0),s(null);const{error:h}=await G.from("user_settings").upsert({user_id:e.id,annual_gci_goal:o.annual_gci_goal,default_tax_rate:o.default_tax_rate/100,default_brokerage_split_rate:o.default_brokerage_split_rate/100});h?s({type:"error",text:"Failed to save preferences. Please try again."}):(s({type:"success",text:"Preferences updated!"}),setTimeout(()=>s(null),3e3)),a(!1)};return t?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx(Rt,{className:"w-8 h-8 animate-spin text-[rgb(0,122,255)]"})}):l.jsxs("div",{className:"max-w-2xl",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"hig-text-heading mb-2",children:"Personal Preferences"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Set your financial targets and default assumptions. These only apply to your profile."})]}),l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Annual GCI Goal"}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"$"}),l.jsx("input",{type:"number",value:o.annual_gci_goal,onChange:f=>c({...o,annual_gci_goal:parseFloat(f.target.value)||0}),className:"hig-input pl-8",placeholder:"100000",min:"0",step:"1000"})]}),l.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Your personal net commission goal for the year."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Default Tax Allocation"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",step:"0.5",value:o.default_tax_rate,onChange:f=>c({...o,default_tax_rate:parseFloat(f.target.value)||0}),className:"hig-input pr-8",placeholder:"25",min:"0",max:"100"}),l.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]}),l.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Used to forecast take-home pay inside PipelineIQ."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Default Brokerage Split"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",step:"0.5",value:o.default_brokerage_split_rate,onChange:f=>c({...o,default_brokerage_split_rate:parseFloat(f.target.value)||0}),className:"hig-input pr-8",placeholder:"20",min:"0",max:"100"}),l.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"%"})]}),l.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Determines what portion of each deal is allocated to your brokerage by default."})]}),i&&l.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${i.type==="error"?"bg-red-50 text-red-700 border-red-200/60":"bg-green-50 text-green-700 border-green-200/60"}`,children:[i.type==="error"?l.jsx(La,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}):l.jsx(Fa,{className:"w-5 h-5 flex-shrink-0",strokeWidth:2}),l.jsx("span",{className:"text-sm font-medium",children:i.text})]}),l.jsx("div",{className:"pt-4 border-t border-gray-200/60 flex flex-wrap gap-3",children:l.jsx("button",{type:"submit",disabled:n,className:"hig-btn-primary px-8",children:n?l.jsxs(l.Fragment,{children:[l.jsx(Rt,{className:"w-4 h-4 animate-spin",strokeWidth:2}),l.jsx("span",{children:"Saving"})]}):l.jsxs(l.Fragment,{children:[l.jsx(kh,{className:"w-4 h-4",strokeWidth:2}),l.jsx("span",{children:"Save Preferences"})]})})})]})]})}const bee=[{id:"personal.profile",label:"Profile",description:"Name & identity",icon:jc},{id:"personal.security",label:"Password & Security",description:"Account protection",icon:FC},{id:"personal.notifications",label:"Notifications",description:"Email + in-app alerts",icon:AC},{id:"personal.preferences",label:"Preferences",description:"Goals & defaults",icon:BC}];function wee(){const{user:e,roleInfo:t}=At(),r=Oi(t==null?void 0:t.globalRole),[n,a]=p.useState("personal.profile"),i=()=>{switch(n){case"personal.profile":return l.jsx(mee,{});case"personal.security":return l.jsx(gee,{});case"personal.notifications":return l.jsx(yee,{});case"personal.preferences":default:return l.jsx(xee,{})}};return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"flex flex-col gap-4 rounded-[var(--app-radius)] border border-[var(--app-border)] bg-white/90 p-6 shadow-[0_15px_45px_rgba(15,23,42,0.08)]",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-2xl bg-gray-100",children:l.jsx(jc,{className:"w-6 h-6 text-gray-700"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Account Settings"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Preferences that only apply to your login."})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-gray-200/70 bg-white px-3 py-1",children:[l.jsx("span",{className:"text-[10px] uppercase tracking-[0.4em] text-gray-400",children:"Signed in"}),l.jsx("span",{className:"font-semibold text-gray-900",children:e==null?void 0:e.email})]}),l.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-gray-200/70 bg-white px-3 py-1",children:[l.jsx("span",{className:"text-[10px] uppercase tracking-[0.4em] text-gray-400",children:"Role"}),l.jsx("span",{className:"font-semibold text-gray-900",children:r})]})]})]}),l.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[l.jsx("aside",{className:"lg:w-72 space-y-6",children:l.jsxs("div",{children:[l.jsx("p",{className:"px-2 pb-2 text-[11px] font-semibold uppercase tracking-[0.25em] text-gray-400",children:"Account"}),l.jsx("div",{className:"space-y-1",children:bee.map(s=>{const o=s.icon,c=n===s.id;return l.jsx("button",{onClick:()=>a(s.id),className:`group w-full rounded-2xl border px-4 py-3 text-left transition-all duration-200 ${c?"border-[rgb(0,122,255)] bg-[rgba(0,122,255,0.06)] shadow-[inset_0_0_0_1px_rgba(0,122,255,0.2)]":"border-white/60 bg-white hover:-translate-y-[1px] hover:border-[rgba(0,122,255,0.25)] hover:bg-[rgba(0,122,255,0.04)] hover:shadow-[0_12px_30px_rgba(0,0,0,0.06)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[rgba(0,122,255,0.35)]"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:`rounded-2xl border p-2 ${c?"border-[rgba(0,122,255,0.3)] bg-white":"border-gray-100 bg-gray-50 group-hover:border-[rgba(0,122,255,0.2)] group-hover:bg-white"}`,children:l.jsx(o,{className:`w-4 h-4 ${c?"text-[rgb(0,122,255)]":"text-gray-500 group-hover:text-[rgb(0,122,255)]"}`})}),l.jsxs("div",{children:[l.jsx("p",{className:`text-sm font-semibold ${c?"text-[rgb(0,122,255)]":"text-gray-800"}`,children:s.label}),l.jsx("p",{className:"text-xs text-gray-500",children:s.description})]})]})},s.id)})})]})}),l.jsx("section",{className:"flex-1 hig-card p-6",children:i()})]})]})}const _ee=[{title:"AI Contract Drafting",description:"Instinctively assemble Dotloop-ready agreements from natural-language prompts."},{title:"Smart Field Autofill",description:"Pull buyer, seller, property, and financing data directly from your CRM or files."},{title:"Amendments in Seconds",description:"Request edits in plain English and regenerate updated paperwork instantly."},{title:"Compliance Checker",description:"Let AI scan for missing signatures, incorrect clauses, or jurisdictional nuances."},{title:"Team Collaboration Tools",description:"Shared templates, version history, and real-time updates for every stakeholder."}];function jee(){const[e,t]=p.useState(""),[r,n]=p.useState("idle"),a=i=>{if(i.preventDefault(),!e.trim()){n("error");return}n("loading"),setTimeout(()=>{n("success"),t("")},1200)};return l.jsxs("div",{className:"min-h-screen bg-white text-slate-900 flex flex-col",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#f4f7fb] via-white to-[#eef4fa] pointer-events-none"}),l.jsx("header",{className:"relative z-10 border-b border-slate-200/60",children:l.jsx("div",{className:"max-w-5xl mx-auto px-6 py-6 flex items-center",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(See,{}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs tracking-[0.3em] text-slate-500 uppercase font-semibold",children:"Contract"}),l.jsx("p",{className:"text-xl font-semibold tracking-tight text-slate-800",children:"Scribe"})]})]})})}),l.jsxs("main",{className:"relative z-10 flex-1",children:[l.jsxs("section",{className:"max-w-4xl mx-auto px-6 py-16 text-center",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.4em] text-slate-500 mb-4",children:"ContractScribe"}),l.jsx("h1",{className:"text-4xl md:text-5xl font-semibold text-slate-900 leading-tight mb-4",children:"ContractScribe is Coming Soon"}),l.jsx("p",{className:"text-lg text-slate-600 mb-8 max-w-3xl mx-auto",children:"The fastest way for real-estate professionals to draft, edit, and manage contracts with AI-powered precision. Automation that feels human, accuracy that feels inevitable."}),l.jsxs("form",{onSubmit:a,className:"flex flex-col sm:flex-row gap-3 justify-center max-w-2xl mx-auto",children:[l.jsx("input",{type:"email",value:e,onChange:i=>{t(i.target.value),r!=="idle"&&n("idle")},placeholder:"Enter your work email",className:"flex-1 rounded-2xl border border-slate-200/80 bg-white/90 px-5 py-3 text-sm shadow-inner focus:outline-none focus:ring-2 focus:ring-[#0E4B72]/20 focus:border-[#0E4B72]/50"}),l.jsx("button",{type:"submit",className:"rounded-2xl bg-[#0E4B72] text-white font-semibold px-6 py-3 text-sm shadow-[0_12px_24px_rgba(14,75,114,0.25)] hover:bg-[#0b3c5b] transition-colors",disabled:r==="loading",children:r==="loading"?"Joining":r==="success"?"Added!":"Join the Waitlist"})]}),r==="success"&&l.jsx("p",{className:"mt-3 text-sm text-emerald-600 animate-fade-in",children:"Thanks! Well be in touch shortly."}),r==="error"&&l.jsx("p",{className:"mt-3 text-sm text-rose-500",children:"Please enter a valid email address."})]}),l.jsx("section",{className:"max-w-6xl mx-auto px-6 pb-16",children:l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:_ee.map(i=>l.jsxs("div",{className:"rounded-2xl border border-slate-200/70 bg-white/80 p-6 shadow-[0_12px_30px_rgba(15,23,42,0.08)] hover:-translate-y-1 transition-transform",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-[#0E4B72] mb-3",children:"Coming Feature"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:i.title}),l.jsx("p",{className:"text-sm text-slate-600",children:i.description})]},i.title))})}),l.jsx("section",{className:"max-w-3xl mx-auto px-6 pb-20 text-center",children:l.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"ContractScribe empowers agents, teams, and brokerages with lightning-fast contract workflows so you can spend more time closing dealsnot filling out paperwork."})})]}),l.jsx("footer",{className:"relative z-10 border-t border-slate-200/70 bg-white/80 backdrop-blur",children:l.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-8 flex flex-col md:flex-row items-center justify-between gap-4 text-xs text-slate-500",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("span",{children:[" ",new Date().getFullYear()," ContractScribe"]}),l.jsx("span",{children:"Terms"}),l.jsx("span",{children:"Privacy"}),l.jsx("span",{children:"Security"})]}),l.jsxs("div",{className:"text-xs text-slate-500",children:["Made by ",l.jsx("span",{className:"font-semibold text-slate-700",children:"Luminex Ventures"})]})]})})]})}const See=()=>l.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 48 56","aria-hidden":"true",className:"drop-shadow-sm",children:[l.jsx("path",{d:"M2 12L22 0L22 32L2 44Z",fill:"#F3C6C5"}),l.jsx("path",{d:"M12 18L32 6V38L12 50Z",fill:"#CF7A7A"}),l.jsx("path",{d:"M22 24L42 12V44L22 56Z",fill:"#C85757"})]});function Nee(){const{token:e}=lM(),t=Xo();return l.jsx(KC,{onToggle:()=>t("/login"),presetToken:e})}function Gi({children:e}){const{user:t,loading:r,roleInfo:n,signOut:a}=At();return r?l.jsx("div",{className:"min-h-screen bg-[rgb(var(--color-app-bg))] flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[rgb(0,122,255)]"})}):t?n&&n.isActive===!1?l.jsx("div",{className:"min-h-screen bg-[rgb(var(--color-app-bg))] flex items-center justify-center px-4",children:l.jsxs("div",{className:"max-w-md rounded-2xl border border-[var(--app-border)] bg-white/90 p-6 text-center shadow-xl space-y-3",children:[l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"Account deactivated"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Your PipelineIQ access has been suspended. Please reach out to an administrator if you believe this is a mistake."}),l.jsx("button",{onClick:a,className:"hig-btn-secondary mx-auto",children:"Back to login"})]})}):l.jsx(oL,{children:e}):l.jsx(rf,{to:"/login",replace:!0})}function zS({children:e}){const{user:t,loading:r}=At();return r?l.jsx("div",{className:"min-h-screen bg-[rgb(var(--color-app-bg))] flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[rgb(0,122,255)]"})}):t?l.jsx(rf,{to:"/",replace:!0}):l.jsx(l.Fragment,{children:e})}function kee(){const[e,t]=p.useState(!0);return e?l.jsx(lL,{onToggle:()=>t(!1)}):l.jsx(KC,{onToggle:()=>t(!0)})}function Cee(){return l.jsx(N$,{children:l.jsx(VM,{children:l.jsxs(jM,{children:[l.jsx(Zr,{path:"/login",element:l.jsx(zS,{children:l.jsx(kee,{})})}),l.jsx(Zr,{path:"/",element:l.jsx(Gi,{children:l.jsx(gZ,{})})}),l.jsx(Zr,{path:"/invite/:token",element:l.jsx(zS,{children:l.jsx(Nee,{})})}),l.jsx(Zr,{path:"/pipeline",element:l.jsx(Gi,{children:l.jsx(UZ,{})})}),l.jsx(Zr,{path:"/tasks",element:l.jsx(Gi,{children:l.jsx(VZ,{})})}),l.jsx(Zr,{path:"/luma",element:l.jsx(Gi,{children:l.jsx(YZ,{})})}),l.jsx(Zr,{path:"/analytics",element:l.jsx(Gi,{children:l.jsx(KZ,{})})}),l.jsx(Zr,{path:"/workspace-settings",element:l.jsx(Gi,{children:l.jsx(pee,{})})}),l.jsx(Zr,{path:"/settings",element:l.jsx(Gi,{children:l.jsx(wee,{})})}),l.jsx(Zr,{path:"/lead-sources",element:l.jsx(rf,{to:"/workspace-settings",replace:!0})}),l.jsx(Zr,{path:"/pipeline-settings",element:l.jsx(rf,{to:"/workspace-settings",replace:!0})}),l.jsx(Zr,{path:"/contractscribe",element:l.jsx(jee,{})})]})})})}r2(document.getElementById("root")).render(l.jsx(p.StrictMode,{children:l.jsx(Cee,{})}));
